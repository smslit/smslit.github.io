<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c"><meta itemprop="name" content="一起使用 pipenv">
<meta itemprop="description" content="今天十里给大家推荐一个 python 工具，它就是 python 官方推荐的包管理工具 pipenv。这个工具会十八般武艺， virtualenv、pyenv 和 pip 三者的功能集于一身，可谓是高手中的高手了，所以，掌控了它相信你会轻松很多！
">
<meta itemprop="datePublished" content="2018-10-18T10:53:36+08:00" />
<meta itemprop="dateModified" content="2018-11-09T15:08:36+08:00" />
<meta itemprop="wordCount" content="2311">



<meta itemprop="keywords" content="python," />
<meta property="og:title" content="一起使用 pipenv" />
<meta property="og:description" content="今天十里给大家推荐一个 python 工具，它就是 python 官方推荐的包管理工具 pipenv。这个工具会十八般武艺， virtualenv、pyenv 和 pip 三者的功能集于一身，可谓是高手中的高手了，所以，掌控了它相信你会轻松很多！
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.smslit.top/2018/10/18/pipenv/" />
<meta property="article:published_time" content="2018-10-18T10:53:36+08:00" />
<meta property="article:modified_time" content="2018-11-09T15:08:36+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="一起使用 pipenv"/>
<meta name="twitter:description" content="今天十里给大家推荐一个 python 工具，它就是 python 官方推荐的包管理工具 pipenv。这个工具会十八般武艺， virtualenv、pyenv 和 pip 三者的功能集于一身，可谓是高手中的高手了，所以，掌控了它相信你会轻松很多！
"/>
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>一起使用 pipenv</title>
	<link rel="stylesheet" href="https://www.smslit.top/css/style.min.3ad1e3b1b66be9d0a7a1ec736d1c871706f6fed2351dce21060fdde57a9cd3fa.css" integrity="sha256-OtHjsbZr6dCnoexzbRyHFwb2/tI1Hc4hBg/d5Xqc0/o=">
	
	<link rel="stylesheet" href="https://www.smslit.top/css/valine.css">
	<link rel="stylesheet" href="https://www.smslit.top/css/reward.css">
	<link rel="stylesheet" href="https://www.smslit.top/css/asciinema.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://www.smslit.top">SMSLIT</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://www.smslit.top/post/">Posts</a>
				<a href="https://www.smslit.top/tags/">Tags</a>
				<a href="https://www.smslit.top/about/">Me</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="目录"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="http://weibo.com/u/2684217817" target="_blank" rel="noopener me" title="Weibo"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"  fill="none" fill-rule="evenodd" class="feather feather-mail">
    <g transform="translate(0.000000, 2.000000)" fill="#000000" fill-rule="nonzero" id="形状">
        <path d="M23.7,8.59152679 C23.6,8.94964029 23.25,9.20543566 22.9,9.25659472 C22.55,9.30775379 22.2,9.10311751 22,8.745004 C21.9,8.54036772 21.85,8.28457235 21.95,8.02877698 C22.45,6.44284573 22.1,4.70343724 21,3.4756195 C19.9,2.24780175 18.3,1.68505194 16.7,2.04316547 C16.45,2.09432453 16.2,2.04316547 16,1.88968825 C15.8,1.73621103 15.65,1.53157475 15.6,1.27577938 C15.5,0.764188657 15.8,0.252597914 16.3,0.150279784 C18.45,-0.310151871 20.75,0.354916067 22.35,2.14548362 C23.95,3.98721024 24.35,6.44284573 23.7,8.59152679 Z M17.35,5.06155077 C17.15,5.11270983 16.95,5.06155077 16.75,4.95923261 C16.55,4.85691446 16.45,4.65227818 16.4,4.44764189 C16.3,3.98721024 16.6,3.57793765 17,3.4756195 C18.1,3.21982412 19.2,3.62909671 19.95,4.44764189 C20.7,5.31734614 20.9,6.4940048 20.6,7.56834532 C20.55,7.77298161 20.4,7.92645882 20.2,8.02877698 C20,8.13109513 19.8,8.13109513 19.6,8.07993604 C19.2,7.92645882 18.95,7.46602717 19.1,7.0567546 C19.25,6.54516388 19.15,5.93125501 18.8,5.52198242 C18.4,5.11270983 17.85,4.95923261 17.35,5.06155077 Z M18.05,9.66586731 C19.45,10.126299 20.95,11.1494804 20.95,13.0423661 C20.95,16.1119105 16.6,20 10.1,20 C5.1,20 1.13686838e-13,17.5443645 1.13686838e-13,13.4516387 C1.13686838e-13,11.3029576 1.30000001,8.84732213 3.6,6.54516386 C6.6,3.42446043 10.15,2.04316547 11.45,3.37330137 C12.05,3.98721024 12.1,5.0103917 11.7,6.23820942 C11.5,6.8521183 12.25,6.4940048 12.25,6.4940048 C14.7,5.41966427 16.85,5.3685052 17.6,6.54516386 C18,7.15907273 17.95,8.02877698 17.6,9.00079935 C17.45,9.46123101 17.7,9.56354916 18.05,9.66586731 Z M10.1,18.5163869 C14.05,18.1071143 17.1,15.6003197 16.85,12.940048 C16.6,10.2797762 13.15,8.43804957 9.19999999,8.84732213 C5.25,9.25659472 2.19999998,11.7633893 2.44999999,14.4236611 C2.7,17.0839329 6.09999998,18.9256595 10.1,18.5163869 Z M10.5,10.8936851 C12.45,11.4052758 13.45,13.2981615 12.65,15.1398881 C11.85,17.0327738 9.49999999,18.0047962 7.54999999,17.3908873 C5.64999998,16.7769784 4.84999999,14.8329336 5.65000001,13.0935252 C6.45,11.3541167 8.60000002,10.3820943 10.5,10.8936851 Z M9.04999999,15.3445244 C9.45,14.7306155 9.24999998,13.9632294 8.59999999,13.7074341 C7.99999999,13.4516387 7.2,13.7074341 6.79999999,14.3213429 C6.39999998,14.9352518 6.6,15.6514788 7.2,15.9584333 C7.84999999,16.2653877 8.65000001,16.0095923 9.04999999,15.3445244 Z" fill="currentColor"></path>
    </g>
</svg></a><a href="https://www.zhihu.com/people/smslit/activities" target="_blank" rel="noopener me" title="Zhihu"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="none" fill-rule="evenodd" class="feather feather-mail">
    <path d="M12.1197571,11.3394973 C11.2394396,11.2471275 8.50587146,11.3394973 8.50587146,11.3394973 L8.50587146,5.8004836 L12.5830381,5.8004836 C12.5830381,5.8004836 12.5367176,3.95412048 11.7490411,3.95412048 L5.12356308,3.95412048 L6.23550841,1 C6.23550841,1 4.56753979,1.09236985 3.96524661,2.15395489 C3.36295344,3.21553992 1.46333165,8.52386857 1.46333165,8.52386857 C1.46333165,8.52386857 2.11199596,8.80082682 3.17759547,8.0161496 C4.2432456,7.2314976 4.6138603,5.84665591 4.6138603,5.84665591 L6.5598026,5.75428606 L6.60612311,11.3856444 C6.60612311,11.3856444 3.22394129,11.3394973 2.52895647,11.3856444 C1.83397166,11.4317915 1.46330634,13.2781799 1.46330634,13.2781799 L6.60619904,13.2781799 C6.60619904,13.2781799 6.14281677,16.4169392 4.8455894,18.6787523 C3.50191497,20.9405149 1,22.7406553 1,22.7406553 C1,22.7406553 2.80693015,23.4791854 4.56761573,22.4636971 C6.32822537,21.4020364 7.62555398,16.8323387 7.62555398,16.8323387 L11.7491424,21.9559781 C11.7491424,21.9559781 12.1197824,19.5096018 11.7028219,18.8172188 C11.2394396,18.1248358 8.83019096,15.3553541 8.83019096,15.3553541 L7.76454082,16.2784726 L8.50584615,13.2319823 L12.9999986,13.2319823 C13.0000745,13.2320328 13.0000745,11.4318672 12.1197571,11.3394973 Z M14.0447646,4 L14,20.8940959 L15.6119399,20.8940959 L16.1940015,23 L19.014927,20.8940959 L23,20.8940959 L23,4 L14.0448624,4 L14.0447646,4 Z M21,18.2118088 L19.2203194,18.2118088 L16.9745545,20 L16.4660842,18.2118088 L16,18.2118088 L16,6 L21,6 L21,18.2118088 Z" id="形状" fill="currentColor" fill-rule="nonzero"></path>    
</svg></a><a href="mailto:5km@smslit.cn" target="_blank" rel="noopener me" title="Email"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a><a href="https://github.com/smslit" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="菜单"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://www.smslit.top/post/">Posts</a></li>
			<li><a href="https://www.smslit.top/tags/">Tags</a></li>
			<li><a href="https://www.smslit.top/about/">Me</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Oct 18, 2018</span></div>
				<h1>一起使用 pipenv</h1>
			</header>
			<div class="content">
				<p>今天十里给大家推荐一个 python 工具，它就是 python 官方推荐的包管理工具 <a href="https://pypi.org/project/pipenv/">pipenv</a>。这个工具会十八般武艺， virtualenv、pyenv 和 pip 三者的功能集于一身，可谓是高手中的高手了，所以，掌控了它相信你会轻松很多！</p>
<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181018153983543930207.png" alt="20181018153983543930207.png"></p>
<h2 id="身世与技能">身世与技能</h2>
<p>不知道大家晓不晓得 python 界很有名的励志型男 <a href="https://www.kennethreitz.org">Kenneth Reitz</a>，如果你不知道他的话，那你一定知道 <strong>requests</strong> 库吧，没错，<strong>requests</strong> 库的作者就是 <a href="https://www.kennethreitz.org">Kenneth Reitz</a>，是他开发了用于创建和管理 python 虚拟环境的工具 pipenv。</p>
<p>pipenv 能够自动为项目创建和管理虚拟环境，从 Pipfile 文件中添加或者删除包，同时生成 Pipfile.lock 文件来锁定安装包的版本和依赖信息，避免构建错误。它解决了以下问题^[<a href="https://juejin.im/post/5b31ba8851882574e808e555">Pipenv – 超好用的 Python 包管理工具</a>]：</p>
<ul>
<li>不用再单独使用 virtualenv、pyenv 和 pip 了，现在它们结合到了一起。</li>
<li>不用再维护 requirement.txt 了，使用 Pipfile 和 Pipfile.lock 来代替。</li>
<li>可以在开发环境使用多个 python 版本。</li>
<li>在安装的 pyenv 条件下，可以自动安装需要的 python 版本。</li>
<li>安全，广泛地使用 Hash 校验，能够自动曝露安全漏洞。</li>
<li>随时查看图形化的依赖关系。</li>
</ul>
<h2 id="安装及配置">安装及配置</h2>
<h3 id="安装">安装</h3>
<p>这里推荐使用 pip 安装：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pip install pipenv
</code></pre></div><h3 id="配置">配置</h3>
<p>我们知道有些 python 工具命令行下默认不支持补全，pipenv 也不例外，如果将下面的内容添加到 <code>.bashrc</code> 或 <code>.zshrc</code> 中就可以实现 pipenv 命令的补全了：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>pipenv --completion<span class="k">)</span><span class="s2">&#34;</span>
</code></pre></div><h2 id="使用">使用</h2>
<p>本节以一个工程为例展示操作流程，从而说明 pipenv 的使用。</p>
<h3 id="创建虚拟环境">创建虚拟环境</h3>
<ol>
<li>
<p>新建工程</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ mkdir myproject
$ <span class="nb">cd</span> myproject
</code></pre></div></li>
<li>
<p>执行以下命令创建虚拟环境：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install
</code></pre></div><p>执行完上面的命令，就会发现目录下出现 <code>Pipfile</code> 和 <code>Pipfile.lock</code> 两个文件，它们主要记录包的安装信息，上面的命令会使用系统默认版本的 python 创建虚拟环境，如果要使用其他版本可以指定 <code>--two</code> 、 <code>--three</code> 参数指定使用 2.x 版本还是 3.x 版本，形如：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install --three
</code></pre></div><p>也可以直接指定详细版本号，比如：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># pipenv install --python 3</span>
<span class="c1"># pipenv install --python 2.7.15</span>
$ pipenv install --python 3.7
</code></pre></div></li>
</ol>
<h3 id="第三方包管理">第三方包管理</h3>
<h4 id="安装包">安装包</h4>
<p>可以使用 <code>pipenv install 包名</code> 安装第三方包，比如这里安装 <code>requests</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install requests
</code></pre></div><p>安装过程中，<code>Pipfile</code> 会记录包安装的信息和使用的安装源，名称、版本号等。所以 <code>Pipfile</code> 可以跟踪包的管理信息，可以在与别人分享项目的时候，实现一致的开发环境。而 <code>Pipfile.lock</code> 中包含系统信息，所有已安装包的依赖包及其版本信息，以及所有安装包及其依赖包的 Hash 校验信息。</p>
<h5 id="指定版本安装">指定版本安装</h5>
<p>这里以安装版本为1.22的 <code>urllib3</code> 为例：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv install <span class="nv">urllib3</span><span class="o">==</span>1.22
</code></pre></div><h5 id="安装开发版本包">安装开发版本包</h5>
<p>在安装命令的基础上使用 <code>--dev</code> 参数即可：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv install httpie --dev
</code></pre></div><p>至此，我们可以查看一下 <code>Pipfile</code> 的内容，看看有没有同步记录包的安装信息：</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[[source]]</span>
<span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://pypi.org/simple&#34;</span>
<span class="na">verify_ssl</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&#34;pypi&#34;</span>

<span class="k">[packages]</span>
<span class="na">requests</span> <span class="o">=</span> <span class="s">&#34;*&#34;</span>
<span class="na">&#34;urllib3&#34;</span> <span class="o">=</span> <span class="s">&#34;==1.22&#34;</span>

<span class="k">[dev-packages]</span>
<span class="na">httpie</span> <span class="o">=</span> <span class="s">&#34;*&#34;</span>

<span class="k">[requires]</span>
<span class="na">python_version</span> <span class="o">=</span> <span class="s">&#34;3.7&#34;</span>
</code></pre></div><p>可以看到开发版本的包信息在 <code>[dev-packages]</code> 节点记录，而正常的包在 <code>[packages]</code> 节点记录，同时也能看到 <code>urllib3</code> 确实是 1.22 版本的。</p>
<h5 id="包同步">包同步</h5>
<p>有了 <code>Pipfile.lock</code> 就可以在一个新的目录下搭建一致的 python 开发环境了，使用 <code>pipenv syns</code> 命令就会读取 <code>Pipfile.lock</code> 包信息进行第三方包的批量安装了。</p>
<h5 id="更改安装源">更改安装源</h5>
<p>有时安装包时比较慢，为了快速一点可以更改为国内的包安装源，更改 <code>pipfile</code> 中的 <code>source</code> 配置即可，主要是 <strong>url</strong> ，比如更改为阿里源，可以为：</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[[source]]</span>
<span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://mirrors.aliyun.com/pypi/simple&#34;</span>
<span class="na">verify_ssl</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&#34;aliyun&#34;</span>
</code></pre></div><h4 id="卸载包">卸载包</h4>
<p>可以使用 <code>pipenv uninstall</code> 命令卸载第三方包，比如要卸载刚刚安装的 <code>httpie</code> ：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv uninstall httpie
</code></pre></div><p>此时看一下 <code>Pipfile</code> 内容，可以看到已经没有了 <code>httpie</code> 的记录信息了：</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[[source]]</span>
<span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://pypi.org/simple&#34;</span>
<span class="na">verify_ssl</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&#34;pypi&#34;</span>

<span class="k">[packages]</span>
<span class="na">requests</span> <span class="o">=</span> <span class="s">&#34;*&#34;</span>
<span class="na">&#34;urllib3&#34;</span> <span class="o">=</span> <span class="s">&#34;==1.22&#34;</span>

<span class="k">[dev-packages]</span>

<span class="k">[requires]</span>
<span class="na">python_version</span> <span class="o">=</span> <span class="s">&#34;3.7&#34;</span>
</code></pre></div><p>如果想把所有的包都卸载，可以使用以下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv uninstall --all
</code></pre></div><p>另外，可以使用 <code>clean</code> 命令清除 <code>Pipfile.lock</code> 中没有记录的包：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv clean
</code></pre></div><h4 id="更新包">更新包</h4>
<p>更新一个具体的包很简单，比如要更新 <code>urllib3</code> ，可以执行如下命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv update urllib3
</code></pre></div><p>如果想更新所有的包，可以这样：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv update
</code></pre></div><h4 id="查看包安装信息">查看包安装信息</h4>
<p>可以通过以下命令清晰有层次的查看包的安装依赖信息：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv graph
<span class="nv">Pygments</span><span class="o">==</span>2.2.0
<span class="nv">requests</span><span class="o">==</span>2.19.1
  - certifi <span class="o">[</span>required: &gt;<span class="o">=</span>2017.4.17, installed: 2018.10.15<span class="o">]</span>
  - chardet <span class="o">[</span>required: &gt;<span class="o">=</span>3.0.2,&lt;3.1.0, installed: 3.0.4<span class="o">]</span>
  - idna <span class="o">[</span>required: &gt;<span class="o">=</span>2.5,&lt;2.8, installed: 2.7<span class="o">]</span>
  - urllib3 <span class="o">[</span>required: &gt;<span class="o">=</span>1.21.1,&lt;1.24, installed: 1.22<span class="o">]</span>
</code></pre></div><h4 id="检查包完整性">检查包完整性</h4>
<p>有些时候需要检查一下包的完整性，据说可以依据 <code>PEP 508</code> 检查安全漏洞，感觉很高端的样子：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv check
Checking PEP <span class="m">508</span> requirements...
Passed!
Checking installed package safety...
All good!
</code></pre></div><h3 id="其它操作">其它操作</h3>
<h4 id="使用虚拟环境中的-python">使用虚拟环境中的 python</h4>
<p>比如，目录中有个文件 <code>demo.py</code> ，如果想使用虚拟环境中的 python 运行这个文件怎么办？可以使用 <code>pipenv run</code> 比如这样：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv run python demo.py
</code></pre></div><p>也可以这样执行 <code>pip</code> 命令：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv run pip list
</code></pre></div><h4 id="进入或退出虚拟环境">进入或退出虚拟环境</h4>
<p>执行命令 <code>pipenv shell</code> 便可进入虚拟环境，在环境中使用的 python 就是虚拟环境中的：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv shell
Launching subshell in virtual environment…
. /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
$ . /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
<span class="o">(</span>myproject-NwwHp4QU<span class="o">)</span> $
</code></pre></div><p>在虚执环境中执行命令 <code>exit</code> 或者使用快捷键 <code>CTRL</code> + <code>d</code> 便可退出虚拟环境。</p>
<h4 id="查看虚拟环境安装目录">查看虚拟环境安装目录</h4>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv --venv
/Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU
</code></pre></div><h4 id="查看工程根目录">查看工程根目录</h4>
<p>有时需要查看当前使用的虚拟环境对应的工程根目录，使用命令 <code>pipenv --where</code> 即可查看：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv --where
/Users/5km/Desktop/myproject
</code></pre></div><h4 id="环境变量">环境变量</h4>
<p>在虚拟开发环境中，操作都是独立的，并不影响系统的环境，这是虚拟环境的最重要作用，有时候也需要独立的虚拟环境变量，而不是存在于系统的环境变量中。只需要在工程根目录新建一个 <code>.env</code> 文件，在文件中声明环境变量即可，比如想添加一个变量 <code>FLASK_KEY</code> 值为 <code>NONE</code>，可以将 <code>FLASK_KEY=NONE</code> 放到 <code>.env</code> 中：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">echo</span> <span class="s2">&#34;FLASK_KEY=NONE&#34;</span> &gt; .env
</code></pre></div><p>重新进入虚拟环境后，就会自动加载 <code>.env</code> 中的环境变量，此时就可以使用环境变量了：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv shell
Launching subshell in virtual environment…
 . /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
$ . /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
<span class="o">(</span>myproject-NwwHp4QU<span class="o">)</span> $ <span class="nb">echo</span> <span class="nv">$FLASK_KEY</span>
NONE
</code></pre></div><p><strong>注意：</strong></p>
<p>在虚拟环境中，使用 <code>pip</code> 安装第三包是安装在虚拟环境中的，但是不会记录到 <code>Pipfile</code> 中，虚拟环境中也可以使用 <code>pipenv install</code> 安装第三方包，此时仍会记录在 <code>Pipfile</code> 和 <code>Pipfile.lock</code> 中。</p>
<h2 id="问题">问题</h2>
<h3 id="module-object-is-not-callable-问题">&lsquo;module&rsquo; object is not callable 问题</h3>
<p>使用命令 <code>pipenv install</code> 安装软件包的时候，可能会遇到 <strong>TypeError: &lsquo;module&rsquo; object is not callable</strong> 问题，这是因为 pip 版本不兼容的问题导致的，可以在相应的工程内执行以下命令安装 18.0 版本的 pip 临时解决^[<a href="https://github.com/pypa/pipenv/issues/2871">Running pipenv gives TypeError: &lsquo;module&rsquo; object is not callable #2871</a>]：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv run pip install <span class="nv">pip</span><span class="o">==</span>18.0
</code></pre></div><p>这个问题，是在本文章发表的时候刚出现的，可能会随着 pipenv 的升级得到相应解决。</p>
<h3 id="valueerror-unknown-locale-utf-8-问题">ValueError: unknown locale: UTF-8 问题</h3>
<p>这个问题解决方法很简单，只需指定环境变量即可，可以将以下内容添加到 <code>.bashrc</code> 或 <code>.zshrc</code> 中解决^[<a href="https://github.com/pypa/pipenv/issues/187">ValueError: unknown locale: UTF-8 #187</a>]：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">export</span> <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
</code></pre></div><h3 id="lock-updating-很慢的问题">Lock updating 很慢的问题</h3>
<p>在使用 <code>pipenv install</code> 安装包最后，会进行一次 lock 操作，但是 lock 操作奇慢无比， 果不想等待漫长(或者是永久)的时间，可以在每次安装包操作的时候添加参数 <code>--skip-lock</code> 进行跳过^[<a href="https://github.com/pypa/pipenv/issues/1914#issuecomment-378846926">Lock updating is very slow #1914</a>]，形如：</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install requests --skip-lock
</code></pre></div><h2 id="总结">总结</h2>
<p>本文简单介绍了 pipenv 的安装和使用方法，希望您读了本文能感受到这个工具的方便之处！</p>
			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://www.smslit.top/tags/python">python</a></span>
				</p>
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
					2311 字
				</p>
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
					2018-10-18 10:53 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc">
			<div class="toc-title">目录</div>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#身世与技能">身世与技能</a></li>
    <li><a href="#安装及配置">安装及配置</a>
      <ul>
        <li><a href="#安装">安装</a></li>
        <li><a href="#配置">配置</a></li>
      </ul>
    </li>
    <li><a href="#使用">使用</a>
      <ul>
        <li><a href="#创建虚拟环境">创建虚拟环境</a></li>
        <li><a href="#第三方包管理">第三方包管理</a></li>
        <li><a href="#其它操作">其它操作</a></li>
      </ul>
    </li>
    <li><a href="#问题">问题</a>
      <ul>
        <li><a href="#module-object-is-not-callable-问题">&lsquo;module&rsquo; object is not callable 问题</a></li>
        <li><a href="#valueerror-unknown-locale-utf-8-问题">ValueError: unknown locale: UTF-8 问题</a></li>
        <li><a href="#lock-updating-很慢的问题">Lock updating 很慢的问题</a></li>
      </ul>
    </li>
    <li><a href="#总结">总结</a></li>
  </ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://www.smslit.top/2018/10/20/codeimg-python/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;下一篇</span><br><span>图中藏(cáng)语</span>
			</a>
			<a class="prev-post" href="https://www.smslit.top/2018/10/16/md2html_python/">
				<span class="post-nav-label">上一篇&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>python3 实现Markdown转html小工具</span>
			</a>
		</div>
		<div id="comments" class="thin">
		<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">打赏作者</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/assets/pay/wechatpay.png">
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/assets/pay/alipay.png">
      </label>
  </div>
</div>


<span id="/2018/10/18/pipenv/" class="leancloud_visitors" data-flag-title="一起使用 pipenv">
  <span class="post-meta-item-text">访问量 </span>
  <span class="leancloud-visitors-count"></span>
  <p></p>
</span>
<div id="vcomments"></div>
<script src="/js/valine-data.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script type="text/javascript">
  new Valine({
      el: '#vcomments' ,
      appId: 'IlJ4XQsE83q10RN3Maoglx2x-gzGzoHsz',
      appKey: 'OxVuAMUYBTbDMO9vO2IqTsMR',
      notify:  false , 
      verify:  false , 
      avatar:'', 
      placeholder: '说点什么吧...(提醒：填写邮箱，若有人回复您，您将及时收到提醒邮件！)',
      visitor:  true ,
      emojiCDN: '',
      emojiMaps: null
  });
</script>
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2021 <a href="https://www.smslit.top">5km</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://www.smslit.top/post/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://www.smslit.top/js/main.min.35ccbf1cdceb91e4c64c06b5d009d6e2977fafe56beda7762febd4e67528d2ac.js" integrity="sha256-Ncy/HNzrkeTGTAa10AnW4pd/r+Vr7ad2L+vU5nUo0qw="></script>

	
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      TeX: {equationNumbers: {autoNumber: "AMS"}},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>

</html>
