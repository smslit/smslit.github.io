<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>Posts on SMSLIT</title>
		<link>https://www.smslit.top/post/</link>
		<description>Recent content in Posts on SMSLIT</description>
		<generator>Hugo -- gohugo.io</generator>
		<language>en</language>
		<copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
		<lastBuildDate>Mon, 11 Nov 2019 11:04:25 +0800</lastBuildDate>
		<atom:link href="https://www.smslit.top/post/index.xml" rel="self" type="application/rss+xml" />
		
		<item>
			<title>Ant Design Vue å·¥ç¨‹é…ç½®ç¬”è®°</title>
			<link>https://www.smslit.top/2019/11/11/ant-design-vue-note-start/</link>
			<pubDate>Mon, 11 Nov 2019 11:04:25 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/11/11/ant-design-vue-note-start/</guid>
			<description>å·¥ç¨‹é…ç½® åˆ›å»ºå·¥ç¨‹ # å®‰è£… Vue # npm install -g @vue/cli $ vue creat antd-demo æ’é™¤ vscode é…ç½®å¿½ç•¥ vscode æ‰“å¼€ä¸Šé¢åˆ›å»ºçš„å·¥ç¨‹ï¼Œä¿®æ”¹ .gitignore æ–‡ä»¶å†…å®¹ä¸ºï¼š .DS_Store node_modules /dist # local env files .env.local .env.*.local # Log files npm-debug.log* yarn-debug.log* yarn-error.log* # Editor directories and files .idea -</description>
			<content type="html"><![CDATA[

<h2 id="å·¥ç¨‹é…ç½®">å·¥ç¨‹é…ç½®</h2>

<h3 id="åˆ›å»ºå·¥ç¨‹">åˆ›å»ºå·¥ç¨‹</h3>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># å®‰è£… Vue</span>
<span class="c1"># npm install -g @vue/cli</span>
$ vue creat antd-demo</code></pre></div>
<h3 id="æ’é™¤-vscode-é…ç½®å¿½ç•¥">æ’é™¤ vscode é…ç½®å¿½ç•¥</h3>

<p>vscode æ‰“å¼€ä¸Šé¢åˆ›å»ºçš„å·¥ç¨‹ï¼Œä¿®æ”¹ <code>.gitignore</code> æ–‡ä»¶å†…å®¹ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">.DS_Store
node_modules
/dist

# local env files
.env.local
.env.*.local

# Log files
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Editor directories and files
.idea
<span class="gd">- .vscode
</span><span class="gd"></span><span class="gi">+ .vscode/*
</span><span class="gi"></span>*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

<span class="gi">+ !.vscode/settings.json
</span></code></pre></div>
<h3 id="ä¿®æ”¹-vscode-å·¥ç¨‹é…ç½®">ä¿®æ”¹ vscode å·¥ç¨‹é…ç½®</h3>

<p>ä¿®æ”¹æ–‡ä»¶ <code>.vscode/settings.json</code> ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="err">//</span> <span class="err">vscodeé»˜è®¤å¯ç”¨äº†æ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨è®¾ç½®tabsizeçš„é€‰é¡¹</span>
  <span class="nt">&#34;editor.detectIndentation&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">é‡æ–°è®¾å®štabsize</span>
  <span class="nt">&#34;editor.tabSize&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">#æ¯æ¬¡ä¿å­˜çš„æ—¶å€™è‡ªåŠ¨æ ¼å¼åŒ–</span>
  <span class="nt">&#34;editor.formatOnSave&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">#æ¯æ¬¡ä¿å­˜çš„æ—¶å€™å°†ä»£ç æŒ‰eslintæ ¼å¼è¿›è¡Œä¿®å¤</span>
  <span class="nt">&#34;eslint.autoFixOnSave&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">æ·»åŠ </span> <span class="err">vue</span> <span class="err">æ”¯æŒ</span>
  <span class="nt">&#34;eslint.validate&#34;</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">&#34;javascript&#34;</span><span class="p">,</span>
    <span class="s2">&#34;javascriptreact&#34;</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="nt">&#34;language&#34;</span><span class="p">:</span> <span class="s2">&#34;vue&#34;</span><span class="p">,</span>
      <span class="nt">&#34;autoFix&#34;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="err">//</span> <span class="err">#è®©prettierä½¿ç”¨eslintçš„ä»£ç æ ¼å¼è¿›è¡Œæ ¡éªŒ</span>
  <span class="nt">&#34;prettier.eslintIntegration&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">#å»æ‰ä»£ç ç»“å°¾çš„åˆ†å·</span>
  <span class="nt">&#34;prettier.semi&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">#ä½¿ç”¨å¸¦å¼•å·æ›¿ä»£åŒå¼•å·</span>
  <span class="nt">&#34;prettier.singleQuote&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">#è®©å‡½æ•°(å)å’Œåé¢çš„æ‹¬å·ä¹‹é—´åŠ ä¸ªç©ºæ ¼</span>
  <span class="nt">&#34;javascript.format.insertSpaceBeforeFunctionParenthesis&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">#è¿™ä¸ªæŒ‰ç”¨æˆ·è‡ªèº«ä¹ æƒ¯é€‰æ‹©</span>
  <span class="nt">&#34;vetur.format.defaultFormatter.html&#34;</span><span class="p">:</span> <span class="s2">&#34;js-beautify-html&#34;</span><span class="p">,</span>
  <span class="err">//</span> <span class="err">#è®©vueä¸­çš„jsæŒ‰ç¼–è¾‘å™¨è‡ªå¸¦çš„tsæ ¼å¼è¿›è¡Œæ ¼å¼åŒ–</span>
  <span class="nt">&#34;vetur.format.defaultFormatter.js&#34;</span><span class="p">:</span> <span class="s2">&#34;vscode-typescript&#34;</span><span class="p">,</span>
  <span class="nt">&#34;vetur.format.defaultFormatterOptions&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&#34;js-beautify-html&#34;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&#34;wrap_attributes&#34;</span><span class="p">:</span> <span class="s2">&#34;force-aligned&#34;</span>
      <span class="err">//</span> <span class="err">#vueç»„ä»¶ä¸­htmlä»£ç æ ¼å¼åŒ–æ ·å¼</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span></code></pre></div>
<h3 id="å®‰è£…-ant-design-vue">å®‰è£… Ant Design Vue</h3>

<p>ä» yarn æˆ– npm å®‰è£…å¹¶å¼•å…¥ ant-design-vueã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ yarn add ant-design-vue</code></pre></div>
<h3 id="å®‰è£…-antd-å¯¼å…¥æ’ä»¶">å®‰è£… antd å¯¼å…¥æ’ä»¶</h3>

<p><a href="https://github.com/ant-design/babel-plugin-import" target="_blank">babel-plugin-import</a> æ˜¯ä¸€ä¸ªç”¨äºæŒ‰éœ€åŠ è½½ç»„ä»¶ä»£ç å’Œæ ·å¼çš„ babel æ’ä»¶ï¼ˆ<a href="https://www.antdv.com/docs/vue/getting-started-cn/#æŒ‰éœ€åŠ è½½" target="_blank">åŸç†</a>ï¼‰ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ yarn add babel-plugin-import --dev</code></pre></div>
<p>ä¿®æ”¹<code>babel.config.js</code>æ–‡ä»¶ï¼Œé…ç½® babel-plugin-import</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff"> module.exports = {
  presets: [&#34;@vue/app&#34;],
<span class="gi">+  plugins: [
</span><span class="gi">+    [
</span><span class="gi">+      &#34;import&#34;,
</span><span class="gi">+      { libraryName: &#34;ant-design-vue&#34;, libraryDirectory: &#34;es&#34;, style: true }
</span><span class="gi">+    ]
</span><span class="gi">+  ]
</span><span class="gi"></span>};
</code></pre></div>
<h2 id="ç®€å•æµ‹è¯•">ç®€å•æµ‹è¯•</h2>

<p>ä¿®æ”¹ <code>main.js</code> æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">  import Vue from &#39;vue&#39;
<span class="gi">+ import { Button } from &#39;ant-design-vue&#39;;
</span><span class="gi"></span>  import App from &#39;./App&#39;

<span class="gi">+ Vue.component(Button.name, Button)
</span><span class="gi"></span>
  Vue.config.productionTip = false

  new Vue({
    render: h =&gt; h(App)
  }).$mount(&#34;#app&#34;);
</code></pre></div>
<p>ä¿®æ”¹ <code>src/App.vue</code>çš„ template å†…å®¹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-diff" data-lang="diff">&lt;template&gt;
  &lt;div id=&#34;app&#34;&gt;
    &lt;img src=&#34;./assets/logo.png&#34;&gt;
<span class="gd">-    &lt;HelloWorld msg=&#34;Welcome to Your Vue.js App&#34;/&gt;
</span><span class="gd"></span><span class="gi">+    &lt;a-button type=&#34;primary&#34;&gt;Button&gt;&lt;/a-button&gt;
</span><span class="gi"></span>  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
  
<span class="gd">- import HelloWorld from &#39;./components/HelloWorld.vue&#39;
</span><span class="gd"></span>
export default {
  name: &#39;app&#39;,
  components: {
<span class="gd">-     HelloWorld
</span><span class="gd"></span>  }
}
&lt;/script&gt;
...
</code></pre></div>
<p>æ­¤æ—¶è¿è¡Œ <code>yarn serve</code> ä¼šå‡ºç°é”™è¯¯ã€‚</p>

<h3 id="core-js-é”™è¯¯">core-js é”™è¯¯</h3>

<p>å‡ºç°å¦‚ä¸‹é”™è¯¯æç¤ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">yarn serve                                         
yarn run v1.19.1
$ vue-cli-service serve
 INFO  Starting development server...
<span class="m">98</span>% after emitting CopyPlugin

 ERROR  Failed to compile with <span class="m">1</span> errors                                                                                                              <span class="m">10</span>:34:18 AM

This dependency was not found:

* core-js/modules/es.function.name in ./src/main.js

To install it, you can run: npm install --save core-js/modules/es.function.name</code></pre></div>
<p>è§£å†³ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ yarn add core-js</code></pre></div>
<h3 id="less-loader-é”™è¯¯">less-loader é”™è¯¯</h3>

<p>å†æ¬¡è¿è¡Œä»ç„¶æœ‰é”™è¯¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">yarn serve
yarn run v1.19.1
$ vue-cli-service serve
 INFO  Starting development server...
<span class="m">98</span>% after emitting CopyPlugin

 ERROR  Failed to compile with <span class="m">2</span> errors                                                                                                              <span class="m">10</span>:36:34 AM

Failed to resolve loader: less-loader
You may need to install it.
Failed to resolve loader: less-loader
You may need to install it.</code></pre></div>
<h4 id="è§£å†³">è§£å†³</h4>

<h5 id="å®‰è£…-less-å’Œ-less-loader">å®‰è£… less å’Œ less-loader</h5>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">$ npm i less less-loader --save-dev</code></pre></div>
<p>æ·»åŠ é…ç½®æ–‡ä»¶ <code>vue.config.js</code> ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">css</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">loaderOptions</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">less</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">javascriptEnabled</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>æ­¤æ—¶è¿è¡Œï¼Œæ­£å¸¸çš„è¯å°±å¯ä»¥æŸ¥çœ‹é¡µé¢äº†ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹çŠ¶æ€æ å°å·¥å…·åˆ†åˆ«å“åº”é¼ æ ‡å·¦å³é”®å•å‡»</title>
			<link>https://www.smslit.top/2019/10/24/macOS-dev-menu-mouse/</link>
			<pubDate>Thu, 24 Oct 2019 07:30:12 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/10/24/macOS-dev-menu-mouse/</guid>
			<description>ä¸Šä¸€ç¯‡æ–‡ç«  macOS å¼€å‘ä¹‹èœå•æ å½¢å¼çš„çŠ¶æ€æ å°å·¥å…· è®²è¿°äº†å¦‚ä½•å¼€å‘èœå•æ å½¢å¼çš„çŠ¶æ€æ å°å·¥å…·ï¼Œå¤§å®¶å¯èƒ½å·²ç»å‘ç°ï¼Œæˆ‘ä»¬æ— è®ºä½¿ç”¨é¼ æ ‡å·¦é”®è¿˜æ˜¯å³é”®å•å‡»èœå•æ å›¾</description>
			<content type="html"><![CDATA[

<p>ä¸Šä¸€ç¯‡æ–‡ç«  <a href="/2019/10/22/macOS-dev-basic-nsmenu/" target="_blank">macOS å¼€å‘ä¹‹èœå•æ å½¢å¼çš„çŠ¶æ€æ å°å·¥å…·</a> è®²è¿°äº†å¦‚ä½•å¼€å‘èœå•æ å½¢å¼çš„çŠ¶æ€æ å°å·¥å…·ï¼Œå¤§å®¶å¯èƒ½å·²ç»å‘ç°ï¼Œæˆ‘ä»¬æ— è®ºä½¿ç”¨é¼ æ ‡å·¦é”®è¿˜æ˜¯å³é”®å•å‡»èœå•æ å›¾æ ‡ï¼Œéƒ½ä¼šå¼¹å‡ºæˆ‘ä»¬æ·»åŠ çš„èœå•ï¼Œè€ƒè™‘åˆ°æˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦åˆ†åˆ«å¯¹é¼ æ ‡å·¦å³é”®å•å‡»èœå•æ æŒ‰é’®è¿›è¡Œä¸åŒçš„å¤„ç†ï¼Œæ‰€ä»¥å†™æ­¤æ–‡è®²è§£ä¸€ä¸‹å¦‚ä½•å®ç°ã€‚</p>

<!-- more -->

<h2 id="å·¥ç¨‹">å·¥ç¨‹</h2>

<p>æˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä¸Šä¸€ç¯‡æ–‡ç« æœ€åå®Œæˆçš„å·¥ç¨‹ï¼š</p>

<p><a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022195552-l6UN33.zip" target="_blank">MenuToolDemo</a></p>

<h2 id="æ¢ç´¢">æ¢ç´¢</h2>

<p>ä¸ºäº†å±•ç¤ºå·¦é”®å’Œå³é”®ç‚¹å‡»å¤„ç†çš„åŒºåˆ«ï¼ŒæŒ‡å®šä¸åŒçš„è¡Œä¸ºï¼š</p>

<ul>
<li>å·¦é”®å•å‡»ï¼šæ˜¾ç¤ºä¸€ä¸ªæç¤ºçª—å£</li>
<li>å³é”®å•å‡»ï¼šå¼¹å‡ºä¹‹å‰çš„èœå•</li>
</ul>

<p>æˆ‘ä»¬ç¬¬ä¸€ååº”å°±æ˜¯ï¼Œä¸ºæŒ‰é’®è®¾ç½®ç‚¹å‡»äº‹ä»¶ç›´æ¥åˆ†å¼€å¤„ç†å°±å¯ä»¥äº†ï¼Œæˆ‘ä»¬è¯•ä¸€ä¸‹ã€‚</p>

<ol>
<li><p>æ‰“å¼€æ–‡ä»¶ <code>AppDelegate.swift</code>ï¼Œä¿®æ”¹ä¹‹å‰å·¥ç¨‹ä¸­æŒ‡å®š button å›¾æ ‡çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="k">if</span> <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="n">statusItem</span><span class="p">.</span><span class="n">button</span> <span class="p">{</span>
    <span class="n">button</span><span class="p">.</span><span class="n">image</span> <span class="p">=</span> <span class="n">NSImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">&#34;StatusIcon&#34;</span><span class="p">)</span>
    <span class="n">button</span><span class="p">.</span><span class="n">action</span> <span class="p">=</span> <span class="k">#selector</span><span class="p">(</span><span class="n">mouseClickHandler</span><span class="p">)</span>
    <span class="n">button</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="n">on</span><span class="p">:</span> <span class="p">[.</span><span class="n">leftMouseUp</span><span class="p">,</span> <span class="p">.</span><span class="n">rightMouseUp</span><span class="p">])</span>
<span class="p">}</span></code></pre></div></li>

<li><p>åœ¨æ–¹æ³• <code>applicationDidFinishLaunching(_ aNotification:)</code> åé¢æ·»åŠ é¼ æ ‡ç‚¹å‡»å¤„ç†æ–¹æ³• <code>mouseClickHandler</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">mouseClickHandler</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">event</span> <span class="p">=</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">currentEvent</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">event</span><span class="p">.</span><span class="n">type</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">leftMouseUp</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;å·¦é”®&#34;</span><span class="p">)</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;å³é”®&#34;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>
</ol>

<p>è¿è¡Œç¨‹åºï¼Œæ˜¯ä¸æ˜¯å‘ç°ï¼Œå·¦é”®å’Œå³é”®å•å‡»è¿˜éƒ½æ˜¯æ˜¾ç¤ºèœå•ï¼Œè€Œæ²¡æœ‰æ‰“å°å‡º <strong>å·¦é”®</strong> å’Œ <strong>å³é”®</strong>ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>

<p>æˆ‘ä»¬å°è¯•æŠŠä¸‹é¢çš„ä»£ç æ³¨é‡Šæ‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">statusItem</span><span class="p">.</span><span class="n">menu</span> <span class="p">=</span> <span class="n">menu</span></code></pre></div>
<p>å†æ¬¡è¿è¡Œç¨‹åºï¼ŒAmazingï¼æ˜¯ä¸æ˜¯å·¦é”®å•å‡»å°±æ‰“å° <strong>å·¦é”®</strong> å³é”®å•å‡»å°±æ‰“å°å‡º <strong>å³é”®</strong>ï¼æ‰€ä»¥æˆ‘ä»¬èƒ½æƒ³åˆ°çš„åŸå› å°±æ˜¯<strong>å½“æŒ‡å®š <code>menu</code> åï¼Œç³»ç»Ÿä¼šå¿½ç•¥æŒ‰é’®çš„äº‹ä»¶è®¾ç½®ï¼Œéƒ½åªæ˜¯å¼¹å‡ºèœå•</strong>ã€‚</p>

<h2 id="æ€è·¯">æ€è·¯</h2>

<p>æœ‰äº†ä¸Šé¢çš„æ¢ç´¢ï¼Œæ˜¯ä¸æ˜¯å°±æœ‰æ€è·¯äº†ï¼ç›®æ ‡ä¸­å³é”®è¿˜æ˜¯è¦æ˜¾ç¤ºèœå•çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å³é”®å•å‡»çš„æ—¶å€™æŒ‡å®š <strong>menu</strong>ï¼Œèœå•å…³é—­çš„æ—¶å€™å°† <code>statusItem</code> çš„ <code>menu</code> è®¾ç½®ä¸º <strong>nil</strong>ï¼Œè¿™æ ·å°±ä¿è¯å¸¸æ€ä¸‹ï¼Œmenu æ˜¯ä¸æŒ‡å®šçš„ï¼Œå°±å¯ä»¥å“åº”æˆ‘ä»¬è®¾ç½®çš„å·¦å³é”®å•å‡»çš„å¤„ç†äº†ã€‚</p>

<h2 id="å®ç°">å®ç°</h2>

<ol>
<li><p>åˆ é™¤ <code>applicationDidFinishLaunching</code> ä¸­çš„ <code>statusItem.menu = menu</code></p></li>

<li><p>ä¿®æ”¹ <code>mouseClickHandler</code> çš„å¤„ç†å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">mouseClickHandler</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">event</span> <span class="p">=</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">currentEvent</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">event</span><span class="p">.</span><span class="n">type</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">leftMouseUp</span><span class="p">:</span>
            <span class="c1">// ä½¿ç”¨è­¦å‘Šçª—å£ç¤ºæ„å·¦é”®å•å‡»</span>
            <span class="kd">let</span> <span class="nv">alert</span> <span class="p">=</span> <span class="n">NSAlert</span><span class="p">()</span>
            <span class="n">alert</span><span class="p">.</span><span class="n">messageText</span> <span class="p">=</span> <span class="s">&#34;é¼ æ ‡äº‹ä»¶&#34;</span>
            <span class="n">alert</span><span class="p">.</span><span class="n">informativeText</span> <span class="p">=</span> <span class="s">&#34;å·¦é”®å•å‡»&#34;</span>
            <span class="n">alert</span><span class="p">.</span><span class="n">addButton</span><span class="p">(</span><span class="n">withTitle</span><span class="p">:</span> <span class="s">&#34;å…³é—­&#34;</span><span class="p">)</span>
            <span class="n">alert</span><span class="p">.</span><span class="n">window</span><span class="p">.</span><span class="n">titlebarAppearsTransparent</span> <span class="p">=</span> <span class="kc">true</span>
            <span class="n">alert</span><span class="p">.</span><span class="n">runModal</span><span class="p">()</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="n">statusItem</span><span class="p">.</span><span class="n">menu</span> <span class="p">=</span> <span class="n">menu</span>
            <span class="n">statusItem</span><span class="p">.</span><span class="n">button</span><span class="p">?.</span><span class="n">performClick</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>

<li><p>ä¿è¯èœå•å…³é—­çš„æ—¶å€™ï¼Œå°† <code>statusItem</code> çš„ <code>menu</code> è®¾ç½®ä¸º nilï¼Œæ‰©å±•ä¸€ä¸‹ <strong>AppDelegate</strong>ï¼Œéµå¾ª <code>NSMenuDelegate</code> åœ¨æ–¹æ³• Menu å…³é—­åæŒ‡å®š nilï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">extension</span> <span class="nc">AppDelegate</span><span class="p">:</span> <span class="n">NSMenuDelegate</span> <span class="p">{</span>
    <span class="c1">// ä¸ºäº†ä¿è¯æŒ‰é’®çš„å•å‡»äº‹ä»¶è®¾ç½®æœ‰æ•ˆï¼Œmenuè¦å»é™¤</span>
    <span class="kd">func</span> <span class="nf">menuDidClose</span><span class="p">(</span><span class="kc">_</span> <span class="n">menu</span><span class="p">:</span> <span class="n">NSMenu</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">statusItem</span><span class="p">.</span><span class="n">menu</span> <span class="p">=</span> <span class="kc">nil</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>éœ€è¦æŒ‡å®š <code>menu</code> çš„ä»£ç†ä¸º AppDelegateï¼Œåœ¨ <code>applicationDidFinishLaunching</code> æ–¹æ³•ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç :</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">menu</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span></code></pre></div></li>
</ol>

<p>æ­¤æ—¶è¿è¡Œç¨‹åºï¼Œé¼ æ ‡å·¦é”®å•å‡»èœå•æ æŒ‰é’®ï¼Œä¾¿ä¼šå¼¹å‡ºè­¦å‘Šçª—å£ï¼Œå³é”®å•å‡»å°±èƒ½æ˜¾ç¤ºèœå•äº†ã€‚</p>

<p><video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191024094833-3CiYyz.mp4" width="100%" controls="controls"></p>

<p>å·¥ç¨‹æ‰“åŒ…å¦‚ä¸‹ï¼š</p>

<p><a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191024095445-Rhex8j.zip" target="_blank">MenuToolDemo2</a></p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹èœå•æ å½¢å¼çš„çŠ¶æ€æ å°å·¥å…·</title>
			<link>https://www.smslit.top/2019/10/22/macOS-dev-basic-nsmenu/</link>
			<pubDate>Tue, 22 Oct 2019 16:46:21 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/10/22/macOS-dev-basic-nsmenu/</guid>
			<description>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ç”¨è¿‡èœå•æ å½¢å¼çš„çŠ¶æ€æ å·¥å…·ï¼Œç±»ä¼¼äºä¹‹å‰å†™çš„ NSPopover çš„å·¥å…·åœ¨ç³»ç»Ÿé¡¶æ å ç”¨ä¸€ä¸ªå›¾æ ‡ï¼Œä¸åŒçš„æ˜¯ç‚¹å‡»ä¹‹åå¼¹å‡ºçš„ä¸æ˜¯å¼¹çª—è€Œæ˜¯ä¸€ä¸ªèœå•ï¼Œå°±åƒä¸‹</description>
			<content type="html"><![CDATA[

<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ç”¨è¿‡èœå•æ å½¢å¼çš„çŠ¶æ€æ å·¥å…·ï¼Œç±»ä¼¼äºä¹‹å‰å†™çš„ NSPopover çš„å·¥å…·åœ¨ç³»ç»Ÿé¡¶æ å ç”¨ä¸€ä¸ªå›¾æ ‡ï¼Œä¸åŒçš„æ˜¯ç‚¹å‡»ä¹‹åå¼¹å‡ºçš„ä¸æ˜¯å¼¹çª—è€Œæ˜¯ä¸€ä¸ªèœå•ï¼Œå°±åƒä¸‹é¢æˆªå›¾å±•ç¤ºçš„å·¥å…·ï¼Œæœ¬æ–‡å°±è®²ä¸€ä¸‹å¦‚ä½•å®ç°ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022165922-Nf83mL.jpg" alt="" /></p>

<!-- more -->

<h2 id="å¹³å°">å¹³å°</h2>

<ul>
<li>macOS 10.15</li>
<li>Xcode 11.1</li>
<li>Swift 5.1</li>
</ul>

<p>æœ¬æ–‡ä½¿ç”¨ä¸Šè¿°å¹³å°å®ç°éªŒè¯ï¼Œç‰ˆæœ¬ä¸åŒå¯èƒ½æœ‰äº›å·®å¼‚ï¼Œä½†åŸºæœ¬æ€è·¯ä¸€è‡´ã€‚</p>

<h2 id="å·¥ç¨‹æ–°å»ºåŠé…ç½®">å·¥ç¨‹æ–°å»ºåŠé…ç½®</h2>

<ul>
<li>æ‰“å¼€xcodeæ–°å»ºå·¥ç¨‹ï¼Œ <strong>macOS</strong> -&gt; <strong>App</strong> -&gt; <strong>Next</strong>:</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022175405-tIrq9m.png" alt="" /></p>

<ul>
<li>è¾“å…¥å·¥ç¨‹åç§°ï¼š<code>MenuToolDemo</code>ï¼Œ<strong>language</strong> é€‰æ‹©<code>Swift</code>ï¼Œ<strong>User Interface</strong> é€‰æ‹© <strong>SwiftUI</strong>(æœ¬æ–‡ä¸ä¼šç”¨åˆ° SwiftUI)ç‚¹å‡» Nextï¼š</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022175405-tIrq9m.png" alt="" /></p>

<ul>
<li>é€‰æ‹©åˆé€‚çš„ç›®å½•ï¼Œç‚¹å‡» <strong>create</strong> å³å¯æ‰“å¼€åˆ›å»ºçš„æ–°å·¥ç¨‹ï¼›</li>

<li><p>ç‚¹å‡»è¿è¡ŒæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºè¿è¡Œï¼Œå‡ºç°ä¸€ä¸ªæ˜¾ç¤º <strong>hello world</strong> çš„çª—å£ï¼ŒåŒæ—¶dockä¸Šå‡ºç°äº†åº”ç”¨å›¾æ ‡ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè®¾ç½®ä¸€ä¸‹ä¸æ˜¾ç¤ºå®ƒä»¬ï¼š</p>

<ul>
<li>å·¥ç¨‹å¯¼èˆªæ é€‰ä¸­å·¥ç¨‹<code>MenuToolDemo</code>ï¼Œæ‰“å¼€<code>Info</code>æ ‡ç­¾é¡µ;</li>
<li>å¯ä»¥çœ‹åˆ°<code>Custom macOS application Target Properties</code>ç»„ï¼Œæ·»åŠ æ–°çš„é…ç½®<code>Application is agent(UI Element)</code>ï¼Œå¸ƒå°”å±æ€§ï¼Œå€¼ä¸º <strong>YES</strong>:</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022175506-TsRWW4.png" alt="" /></p></li>

<li><p>é‡æ–°è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°å·²ç»ä¸æ˜¾ç¤ºDockå›¾æ ‡ï¼›</p></li>

<li><p>åˆ é™¤ <strong>ContentView.swift</strong> æ–‡ä»¶ï¼›</p></li>

<li><p>æ‰“å¼€æ–‡ä»¶<code>AppDelegate.swift</code>ï¼Œåˆ æ‰ä¸¤ä¸ªåœ°æ–¹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">var</span> <span class="nv">window</span><span class="p">:</span> <span class="n">NSWindow</span><span class="p">!</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">// Create the SwiftUI view that provides the window contents.</span>
<span class="kd">let</span> <span class="nv">contentView</span> <span class="p">=</span> <span class="n">ContentView</span><span class="p">()</span>

<span class="c1">// Create the window and set the content view.</span>
<span class="n">window</span> <span class="p">=</span> <span class="n">NSWindow</span><span class="p">(</span>
    <span class="n">contentRect</span><span class="p">:</span> <span class="n">NSRect</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="p">:</span> <span class="mi">480</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mi">300</span><span class="p">),</span>
    <span class="n">styleMask</span><span class="p">:</span> <span class="p">[.</span><span class="n">titled</span><span class="p">,</span> <span class="p">.</span><span class="n">closable</span><span class="p">,</span> <span class="p">.</span><span class="n">miniaturizable</span><span class="p">,</span> <span class="p">.</span><span class="n">resizable</span><span class="p">,</span> <span class="p">.</span><span class="n">fullSizeContentView</span><span class="p">],</span>
    <span class="n">backing</span><span class="p">:</span> <span class="p">.</span><span class="n">buffered</span><span class="p">,</span> <span class="k">defer</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
<span class="n">window</span><span class="p">.</span><span class="n">center</span><span class="p">()</span>
<span class="n">window</span><span class="p">.</span><span class="n">setFrameAutosaveName</span><span class="p">(</span><span class="s">&#34;Main Window&#34;</span><span class="p">)</span>
<span class="n">window</span><span class="p">.</span><span class="n">contentView</span> <span class="p">=</span> <span class="n">NSHostingView</span><span class="p">(</span><span class="n">rootView</span><span class="p">:</span> <span class="n">contentView</span><span class="p">)</span>
<span class="n">window</span><span class="p">.</span><span class="n">makeKeyAndOrderFront</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span></code></pre></div></li>

<li><p>å†æ¬¡è¿è¡Œç¨‹åºï¼Œä¸»çª—å£ä¹Ÿä¸æ˜¾ç¤ºäº†ï¼Œè¿èœå•æ ä¹Ÿæœ¨æœ‰äº†ï¼Œä¸è¦ç€æ€¥ï¼Œå’±ç»§ç»­ã€‚</p></li>
</ul>

<h2 id="æ·»åŠ çŠ¶æ€æ æŒ‰é’®">æ·»åŠ çŠ¶æ€æ æŒ‰é’®</h2>

<p>æ‰“å¼€æ–‡ä»¶<code>AppDelegate.swift</code>ï¼Œåœ¨ç±»ä¸­æ·»åŠ å±æ€§ï¼Œè¿™ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªçŠ¶æ€æ æŒ‰é’®ï¼Œè®¾ç½®å®½åº¦å±æ€§<code>NSStatusItem.squareLength</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">let</span> <span class="nv">statusItem</span> <span class="p">=</span> <span class="n">NSStatusBar</span><span class="p">.</span><span class="n">system</span><span class="p">.</span><span class="n">statusItem</span><span class="p">(</span><span class="n">withLength</span><span class="p">:</span> <span class="n">NSStatusItem</span><span class="p">.</span><span class="n">squareLength</span><span class="p">)</span></code></pre></div>
<p>çŠ¶æ€æ æŒ‰é’®æ€»è¯¥éœ€è¦ä¸€ä¸ªå›¾æ ‡å§ï¼æ‰“å¼€<code>Assets.xcassets</code>ï¼Œå³å‡»æ˜¾ç¤º<code>AppIcon</code>ä¸‹æ–¹çš„ç©ºç™½åŒºï¼Œé€‰æ‹©<code>New Image Set</code>ï¼Œé‡å‘½åä¸º<code>statusIcon</code>ï¼Œå½“ç„¶è¿™ä¸ªåå­—éšä¾¿å®šï¼Œé€‰ä¸­è¿™ä¸ªå›¾é›†ï¼Œä¼šçœ‹åˆ°å³ä¾§æœ‰é…ç½®åŒºï¼Œé…ç½®å›¾é›†æŒ‰ç…§<code>Template Image</code>æ¸²æŸ“ã€‚</p>

<p>çœ‹åˆ°æœ‰ä¸‰ä¸ªè™šçº¿æ¡†ç©ºç™½åŒºï¼Œè¿™å°±æ˜¯å›¾ç‰‡åŒºï¼ŒçŠ¶æ€æ æŒ‰é’®çš„å›¾ç‰‡åŸºæœ¬å¤§å°ä¸º $18px\times18px$ ï¼Œè¿˜éœ€2å€å’Œ3å€çš„é€‚ç”¨äºè§†ç½‘è†œå±å¹•çš„macï¼Œåƒç´ åˆ†åˆ«æ˜¯ $36px\times36px$ å’Œ $54px\times54px$ ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æˆ‘æä¾›çš„å›¾æ ‡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024309821129.png" width="18px"><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018062915302434352614.png" width="36px"><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024344990828.png" width="54px"></p>

<p>åˆ†åˆ«å°†å›¾æ‹–åˆ°å¯¹åº”ä½ç½®ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022175555-Ag8b6R.png" alt="" /></p>

<p>æ‰¾åˆ°<code>applicationDidFinishLaunching</code>åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œä¸ºçŠ¶æ€æ æŒ‰é’®é…ç½®å›¾æ ‡å’Œè¡Œä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="k">if</span> <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="n">statusItem</span><span class="p">.</span><span class="n">button</span> <span class="p">{</span>
    <span class="n">button</span><span class="p">.</span><span class="n">image</span> <span class="p">=</span> <span class="n">NSImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="s">&#34;StatusIcon&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>æ­¤æ—¶è¿è¡Œç¨‹åºä¼šçœ‹åˆ°çŠ¶æ€æ ä¸­å‡ºç°äº†æˆ‘ä»¬å®šä¹‰çš„æŒ‰é’®ï¼Œå½“ç„¶æ­¤æ—¶é¼ æ ‡å•å‡»æ²¡æœ‰ä»»ä½•åŠ¨ä½œå‘ç”Ÿã€‚</p>

<blockquote>
<p>å‰é¢è®¾ç½®å›¾ç‰‡é›†æ¸²æŸ“æ–¹å¼ä¸º<code>Template Image</code>ï¼Œæ˜¯ä¸ºäº†é€‚é…ä¸åŒçš„çŠ¶æ€æ ä¸»é¢˜ï¼Œå› ä¸ºmacOSè¿˜æœ‰ä¸ªæš—é»‘ä¸»é¢˜ä¸æ˜¯ï¼Ÿ</p>
</blockquote>

<p>ä¸¤ç§ä¸»é¢˜ä¸‹çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022182946-PD6ygW.png" alt="" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022182916-NRA6ZI.png" alt="" /></p>

<h2 id="æ·»åŠ èœå•">æ·»åŠ èœå•</h2>

<p>æ‰“å¼€ <strong>Main.storyboard</strong> æ–‡ä»¶ï¼Œä½¿ç”¨ä»¥ä¸‹ä¸¤ç§æ–¹å¼ä¸­çš„ä»»æ„ä¸€ç§ï¼Œæ‰“å¼€æ§ä»¶åº“çª—å£ï¼š</p>

<ul>
<li><p>æŒ‰ä¸‹å¿«æ·é”® <code>Command</code> + <code>Shift</code> + <code>L</code></p></li>

<li><p>ç‚¹å‡» Xcode çª—å£å³ä¸Šè§’çš„ â• æŒ‰é’®</p></li>
</ul>

<p>åœ¨æœç´¢æ¡†ä¸­è¾“å…¥ <code>Menu</code>ï¼Œå°±ä¼šæ£€ç´¢åˆ° NSMenu æ§ä»¶ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022183632-vRDig6.png" alt="" /></p>

<p>é¼ æ ‡å·¦é”®åœ¨æ§ä»¶å•å‡»ä¸æ¾æ‹–æ”¾åˆ°æ–‡ä»¶ <code>Main.storyboard</code> çš„å·¦è¾¹æ  <strong>First Responder</strong> ä¸‹é¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022184124-fhMo9C.png" alt="" /></p>

<p>æŒ‰ä¸‹å¿«æ·é”® <code>Ctrl</code> + <code>Option</code> + <code>Command</code> + <code>Enter</code>(âŒƒâŒ¥âŒ˜â) æ‰“å¼€ <strong>Assitant</strong> ç¼–è¾‘å™¨ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022184927-uusDC1.png" alt="" /></p>

<p>æŒ‰ä½ <code>Ctrl</code> é”®ï¼Œé¼ æ ‡å·¦é”®æŒ‰ä½ Menu æ§ä»¶ä¸æ¾æ‹–åŠ¨è‡³è¾…åŠ©ç¼–è¾‘å™¨çš„æ–‡ä»¶ <strong>AppDelegate.swift</strong> ä¸­ï¼Œåœ¨å¼¹å‡ºçš„å±æ€§æ·»åŠ å¼¹çª—ä¸­è¾“å…¥å±æ€§å <code>menu</code>ï¼Œç‚¹å‡» Connect å°±ä¼šçœ‹åˆ° <strong>AppDelegate.swift</strong> ä¸­å‡ºç° menu å±æ€§ï¼š</p>

<p><video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022190313-oUeSVx.mp4" controls="controls" width="100%"></p>

<p>æ‰“å¼€æ–‡ä»¶ <code>AppDelegate.swift</code> ï¼Œåœ¨ä¸Šé¢é…ç½®æŒ‰é’®å›¾æ ‡çš„ä»£ç ä¸Šé¢æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">statusItem</span><span class="p">.</span><span class="n">menu</span> <span class="p">=</span> <span class="n">menu</span></code></pre></div>
<p>è¿è¡Œç¨‹åºï¼Œé¼ æ ‡å·¦é”®å’Œå³é”®å•å‡»èœå•æ æŒ‰é’®éƒ½ä¼šå¼¹å‡ºæˆ‘ä»¬æ·»åŠ çš„æŒ‰é’®ï¼ŒåŒ…å« item1ã€item2 å’Œ item3ã€‚</p>

<h2 id="é…ç½®èœå•">é…ç½®èœå•</h2>

<p>ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹èœå•å³èœå•é¡¹çš„åŸºæœ¬ä½¿ç”¨ã€‚</p>

<h3 id="èœå•é¡¹åŸºæœ¬å±æ€§">èœå•é¡¹åŸºæœ¬å±æ€§</h3>

<p>æ‰“å¼€æ–‡ä»¶ <strong>main.storyboard</strong>ï¼Œå•å‡» menuï¼Œé€‰ä¸­ <strong>Item1</strong>ï¼Œå¯ä»¥åœ¨å³ä¾§å±æ€§æ£€æŸ¥å™¨(Attributes Inspector) ä¸­çœ‹åˆ°å„ä¸ªå±æ€§ã€‚é€‰ä¸­ Item2 å’Œ Item3ï¼ŒæŒ‰ <code>Delete</code> é”®åˆ é™¤ï¼Œé€‰ä¸­ Item1</p>

<h4 id="åç§°-title">åç§° - Title</h4>

<p>ä¿®æ”¹ Item1 çš„å±æ€§æ£€æŸ¥å™¨çš„ <strong>Title</strong> ï¼Œæ¯”å¦‚ä¿®æ”¹æˆ <strong>é€€å‡º</strong>ï¼Œå°±ä¼šä¿®æ”¹æ­¤èœå•é¡¹ç°å®çš„åç§°ã€‚</p>

<h4 id="çŠ¶æ€-state">çŠ¶æ€ - State</h4>

<p>State è¡¨ç¤ºé€‰ä¸­çŠ¶æ€ï¼ˆcheckï¼‰ï¼Œä¸‰ç§çŠ¶æ€ï¼šonã€offã€mixedã€‚å½“è®¾ç½®ä¸º <strong>on</strong> çš„æ—¶å€™ä¼šçœ‹åˆ°èœå•é¡¹å‰å‡ºç°ä¸€ä¸ªå¯¹å·ï¼Œè¿™é‡Œè®¾ç½®ä¸º <strong>off</strong> å³å¯ã€‚</p>

<h4 id="å›¾æ ‡-image">å›¾æ ‡ - Image</h4>

<p>å¯ä»¥è®¾ç½®é€šç”¨çš„å›¾æ ‡ Imageï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è®¾ç½®å„ç§çŠ¶æ€çš„å›¾æ ‡ã€‚è¿™é‡Œæˆ‘ä»¬åªè®¾ç½® <strong>Image</strong> ä¸º <strong>NSStopProgressFreestandingTemplate</strong>ï¼Œç¼–è¯‘è¿è¡Œï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022193003-HEef84.png" alt="" /></p>

<h4 id="è¡Œä¸º-action">è¡Œä¸º - Action</h4>

<p>ä½ ä¼šå¥½å¥‡ä¸ºä»€ä¹ˆä¸Šé¢è¿è¡Œ <strong>é€€å‡º</strong> æ˜¯ç°è‰²çš„ï¼Œé‚£æ˜¯å› ä¸ºæˆ‘ä»¬è¿˜æ²¡ä¸ºå®ƒæŒ‡å®šè¡Œä¸ºï¼Œç±»ä¼¼äºå‰é¢ç»‘å®š menu å±æ€§çš„æ“ä½œï¼ŒåŒæ ·çš„æ“ä½œï¼Œåªä¸è¿‡è¿™æ¬¡æ˜¯æŒ‰ä½ <code>Ctrl</code> é”®çš„åŒæ—¶ï¼Œé¼ æ ‡å·¦é”®å•å‡» <strong>é€€å‡º</strong> èœå•é¡¹ä¸æ¾æ‹–åŠ¨åˆ°è¾…åŠ©ç¼–è¾‘å™¨çš„ <code>AppDelegate.swift</code> æ–‡ä»¶ä¸­ï¼Œç»‘å®šä¸€ä¸ªåå« <code>quitApp</code> çš„ actionã€‚</p>

<p>å®ç° action çš„åŠŸèƒ½ä¸ºé€€å‡ºåº”ç”¨ï¼Œæœ€ç»ˆ <code>quitApp</code> æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">quitApp</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">terminate</span><span class="p">(</span><span class="kc">self</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>ç¼–è¯‘è¿è¡Œç¨‹åºï¼Œå•å‡»èœå•æ çš„æŒ‰é’®å¯ä»¥çœ‹åˆ° <strong>é€€å‡º</strong> èœå•é¡¹å·²ç»ä¸æ˜¯ç°è‰²çš„äº†ï¼Œå¯ä»¥ç‚¹å‡»ï¼Œç‚¹å‡»åä¾¿é€€å‡ºç¨‹åºã€‚</p>

<h4 id="å¿«æ·é”®">å¿«æ·é”®</h4>

<p>æ¯ä¸ªèœå•é¡¹æ‰§è¡Œè¡Œä¸ºå¯ä»¥ç»‘å®šå¿«æ·é”®çš„ï¼Œå°±æ˜¯è®¾ç½®åœ¨å±æ€§æ£€æŸ¥èµ·ä¸­çš„ <strong>Key Equivalent</strong> å±æ€§ï¼Œæˆ‘ä»¬è¿™é‡Œè®¾ç½®ä¸º <strong>Q</strong>ï¼Œè¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°èœå•é¡¹åç§°åé¢å¤šäº†ä¸€ä¸ª Qï¼Œå½“æ˜¾ç¤ºèœå•æ—¶æŒ‰ä¸‹ Q é”®ï¼Œç­‰åŒäºç‚¹å‡»äº† <strong>é€€å‡º</strong>ã€‚</p>

<h3 id="å¤šçº§èœå•">å¤šçº§èœå•</h3>

<p>å¤šçº§èœå•ä¹Ÿå¾ˆå®¹æ˜“å®ç°ã€‚</p>

<ul>
<li><p>æ·»åŠ æ–°çš„èœå•é¡¹</p>

<p>æ‰“å¼€æ–‡ä»¶ <code>main.storyboard</code> ï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Command</code> + <code>Shift</code> + <code>L</code> ï¼Œåœ¨æ§ä»¶åº“å¼¹çª—è¾“å…¥ <strong>Menu item</strong>ï¼Œæ‹–åŠ¨æ§ä»¶ <strong>Menu Item</strong> åˆ° <strong>é€€å‡º</strong> ä¸Šæ–¹æ·»åŠ ã€‚</p></li>

<li><p>å¨åˆšæ·»åŠ çš„èœå•é¡¹æ·»åŠ èœå•</p>

<p>æ‰“å¼€æ§ä»¶åº“å¼¹çª—ï¼Œæ‹–åŠ¨ <strong>Menu</strong> æ§ä»¶åˆ°åˆšåˆšæ·»åŠ çš„æ–°çš„èœå•é¡¹ Item ä¸Šï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ° Item åé¢å‡ºç°äº†æ–°çš„èœå•</p></li>
</ul>

<p>è¿è¡Œç¨‹åºï¼Œç‚¹å‡»èœå•æ æŒ‰é’®ï¼Œé¼ æ ‡æ”¾åˆ°èœå•é¡¹ <strong>Item</strong> ä¾¿å¯ä»¥çœ‹åˆ°ç¬¬äºŒçº§èœå•ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022195239-sZCEwG.png" alt="" /></p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡ç®€å•è®²äº†èœå•å½¢å¼èœå•æ å·¥å…·çš„åŸºæœ¬å®ç°ï¼Œæ¨ä¸€åä¸‰ä¾¿å¯ä»¥å®ç°æ›´ä¸°å¯Œçš„å°å·¥å…·äº†ã€‚æœ€ç»ˆå®ç°çš„å·¥ç¨‹æ–‡ä»¶å·²ç»æ‰“åŒ…åœ¨ä¸‹é¢ï¼š</p>

<p><a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191022195552-l6UN33.zip" target="_blank">MenuToolDemo</a></p>
]]></content>
		</item>
		
		<item>
			<title>macbook pro æ¢è„¸æˆåŠŸ</title>
			<link>https://www.smslit.top/2019/10/18/mbp-screen/</link>
			<pubDate>Fri, 18 Oct 2019 10:13:52 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/10/18/mbp-screen/</guid>
			<description>å…³æ³¨æˆ‘çš„å°ä¼™ä¼´åº”è¯¥ä¹ŸçŸ¥é“ long long ago æˆ‘å› ä¸ºè‡ªå·±çš„æ„šè ¢è¡Œä¸ºè®© MBP çš„å±å¹•è¿›æ°´äº†ï¼Œå¯¼è‡´å®ƒçš„è„¸ - å±å¹•å˜æˆäº†æ¡çº¹è„¸ï¼Œæ˜¾ç¤ºå‡ºç°ä¸€äº›ç°è‰²æ¨ªå‘æ¡çº¹åˆ†å¸ƒæ•´ä¸ªå±å¹•ï¼Œåº•éƒ¨</description>
			<content type="html"><![CDATA[

<p>å…³æ³¨æˆ‘çš„å°ä¼™ä¼´åº”è¯¥ä¹ŸçŸ¥é“ long long ago æˆ‘å› ä¸ºè‡ªå·±çš„æ„šè ¢è¡Œä¸ºè®© MBP çš„å±å¹•è¿›æ°´äº†ï¼Œå¯¼è‡´å®ƒçš„è„¸ - å±å¹•å˜æˆäº†æ¡çº¹è„¸ï¼Œæ˜¾ç¤ºå‡ºç°ä¸€äº›ç°è‰²æ¨ªå‘æ¡çº¹åˆ†å¸ƒæ•´ä¸ªå±å¹•ï¼Œåº•éƒ¨æœ€å¯†é›†ï¼Œé€ å­½å‘€ï¼æ²¡é”™ï¼Œå®ƒéœ€è¦å¾—åˆ°æ•‘èµï¼Œå°±ç”±æˆ‘æ¥å¸®å®ƒåšæ¢è„¸æ‰‹æœ¯å§ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191018104714-0v0def.jpg" alt="" /></p>

<!-- more -->

<h2 id="è´­ä¹°æ–°è„¸">è´­ä¹°æ–°è„¸</h2>

<p>å»è¿‡ Apple å®ä½“åº—ï¼Œæ¢å±å¹•éœ€è¦å››åƒå¤šå¤§æ´‹ï¼Œæˆ‘å»ï¼Œæœ‰ç‚¹çŒ›çƒˆï¼Œä¸ºäº†èŠ‚æµï¼Œåé‡Œå†³å®šäº²è‡ªå¸® MBP æ¢è„¸ï¼Œæœ¨æœ‰åŠæ³•ï¼Œéœ€è¦ç°ä¾¿å®œä¹°å¼ åˆé€‚çš„è„¸ï¼Œä»æŸå®ç½‘ä¸ŠèŠ±äº†ä¸åˆ°ä¸¤åƒå¤§æ´‹ä¹°äº†ä¸€ä¸ªå±å¹•æ€»æˆï¼Œæ•´ä¸ªä¸Šç›–åŒ…å«å±å¹•ï¼ŒA1707 æ·±ç©ºç°ç‰ˆæœ¬ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191018105601-4XfdSf.jpg" alt="" /></p>

<h2 id="æ‹†å±å¹•">æ‹†å±å¹•</h2>

<p>ä¸å¾—ä¸è¯´ï¼Œå°å¿ƒç¿¼ç¿¼ï¼Œç”Ÿæ€•æŠŠåç›–å¼„å˜å½¢ï¼Œå•å•åç›–æ‹†äº†å¾ˆä¹…ï¼Œä¸è¿‡æŒæ¡äº†è¯€çªã€‚MBP åšå·¥æä½³ï¼Œçœ‹åˆ°å†…éƒ¨çš„è®¾è®¡ä¹Ÿä¼šæ˜ç™½ä¸ºä»€ä¹ˆå–è¿™ä¹ˆè´µäº†ï¼ä¸ºäº†æ‹†å±å¹•ï¼Œå¯æ˜¯åŠ¨äº†ä¸å°‘èºä¸å’Œç»“æ„ï¼Œè¿˜å¥½çš„æ˜¯ï¼Œä¸éœ€è¦æ‹†ä¸»æ¿ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191018111142-ggDM4B.jpg" alt="" /></p>

<h2 id="å®‰è£…å±å¹•">å®‰è£…å±å¹•</h2>

<p>å±å¹•å–ä¸‹çš„æ—¶å€™æŒºè´¹åŠ²çš„ï¼Œå¾€ä¸Šå¡å±å¹•ä¹Ÿå¾—å°å¿ƒï¼Œå†æŒ‰ç…§å€’åºè¿˜åŸèºä¸å’Œç»“æ„çš„ä½ç½®å°± OK äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191018112349-FEAIqy.jpg" alt="" /></p>

<p>æœ€åå¼€æœºï¼Œå®Œç¾ç‚¹äº®å±å¹•</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20191018112421-WBnF7U.jpg" alt="" /></p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<ul>
<li>æ‹†æœºè¿‡ç¨‹ä¸­å‘ç°ç”µæ± æœ‰é¼“åŒ…ç°è±¡ï¼Œè¿™æœ‰ç‚¹ææ€–å‘€ï¼Œç®—äº†å…ˆä¸ç†ä¼šï¼æˆ‘å¥½åƒæ‹†å®Œåç›–ï¼Œæ²¡æœ‰å…ˆæŠŠç”µæ± ç”µæºæ–­å¼€ï¼Œå¥½é™©ï¼Œæ²¡æœ‰å‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼ğŸ˜…</li>
<li>æ¢å®Œè„¸ä¹‹åï¼Œç¬¬ä¸€æ¬¡å¼€æœºææ…¢ï¼Œæ®è¯´è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œæˆ‘é‡å¤é‡å¯å‡ æ¬¡ä¹‹åå°±æ­£å¸¸äº†</li>
<li>å¯ä»¥å¼€å¿ƒåœ°æ‹¿ç€ MBP å‡ºå»æµªäº†</li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>PlatformIO IDE(VSCode) - stm32cube æ¡†æ¶çš„å·¥ç¨‹</title>
			<link>https://www.smslit.top/2019/08/24/platformio-stm32-cubemx/</link>
			<pubDate>Sat, 24 Aug 2019 19:21:06 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/08/24/platformio-stm32-cubemx/</guid>
			<description>å‰äº›å¤©çŸ¥ä¹ç½‘å‹æœ‰é—®åˆ° PIO ä¸­ stm32 çš„ cubemx æ¡†æ¶å·¥ç¨‹ä¸­é—ªç¯ç¨‹åºä¸èƒ½æ­£å¸¸å·¥ä½œçš„é—®é¢˜ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯æ²¡æœ‰è¿›è¡Œç³»ç»Ÿæ—¶é’Ÿé…ç½®å¯¼è‡´çš„ã€‚æœ¬æ–‡å°±ä»¥ LED é—ªçƒä¸ºä¾‹è®²ä¸€ä¸‹å¦‚ä½•æ–°å»ºä¸€</description>
			<content type="html"><![CDATA[

<p>å‰äº›å¤©çŸ¥ä¹ç½‘å‹æœ‰é—®åˆ° PIO ä¸­ stm32 çš„ cubemx æ¡†æ¶å·¥ç¨‹ä¸­é—ªç¯ç¨‹åºä¸èƒ½æ­£å¸¸å·¥ä½œçš„é—®é¢˜ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯æ²¡æœ‰è¿›è¡Œç³»ç»Ÿæ—¶é’Ÿé…ç½®å¯¼è‡´çš„ã€‚æœ¬æ–‡å°±ä»¥ LED é—ªçƒä¸ºä¾‹è®²ä¸€ä¸‹å¦‚ä½•æ–°å»ºä¸€ä¸ª <strong>stm32cube</strong> æ¡†æ¶çš„å·¥ç¨‹ï¼Œå¹¶ä¸”å°† LED ç‚¹äº®ã€‚</p>

<h2 id="æµ‹è¯•å¹³å°">æµ‹è¯•å¹³å°</h2>

<ul>
<li>PlatformIO IDE (VSCode)</li>
<li>stm32f103c8t6 æœ€å°ç³»ç»Ÿæ¿ï¼Œæ¿è½½ LED è¿æ¥åœ¨ <strong>PC13</strong> ç®¡è„šï¼Œä½ç”µå¹³ç‚¹äº®</li>
<li>stlink v2 ä»¿çœŸè°ƒè¯•å™¨</li>
</ul>

<p>æµ‹è¯•ç›®æ ‡ï¼šåˆ›å»º <strong>stm32cube</strong> æ¡†æ¶çš„å·¥ç¨‹é¡¹ç›®ï¼Œå®ç° LED å‘¨æœŸé—ªçƒçš„ä»£ç </p>

<h2 id="åˆ›å»ºå·¥ç¨‹é¡¹ç›®">åˆ›å»ºå·¥ç¨‹é¡¹ç›®</h2>

<p>è¿™ä¸€æ­¥å¾ˆç®€å•ï¼Œæ³¨æ„é€‰æ‹©æ¡†æ¶ <strong>stm32cube</strong><sup class="footnote-ref" id="fnref:stm32cube-cubemx"><a href="#fn:stm32cube-cubemx">1</a></sup>ï¼Œå¼€å‘æ¿é€‰æ‹© <strong>STM32F103C8(20k RAM. 64k Flash)(Generic)</strong>ï¼Œåç§°éšä¾¿ï¼Œæœ€åç‚¹å‡»åˆ›å»ºå³å¯ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190824193953-b9xwHn.png" alt="" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190824194009-9G7nyQ.png" alt="" /></p>

<h2 id="æ·»åŠ ä¾‹ç¨‹ä»£ç ">æ·»åŠ ä¾‹ç¨‹ä»£ç </h2>

<p>æŒ‰ç…§ <a href="https://docs.platformio.org/en/latest/tutorials/ststm32/stm32cube_debugging_unit_testing.html#adding-code-to-the-generated-project" target="_blank">STM32Cube HAL and Nucleo-F401RE: debugging and unit testing - Adding Code to the Generated Project</a> <sup class="footnote-ref" id="fnref:STM32Cube-HAL-an"><a href="#fn:STM32Cube-HAL-an">2</a></sup> æè¿°çš„è¿‡ç¨‹æ·»åŠ é€‚åˆè‡ªå·±å¼€å‘æ¿çš„ä»£ç ï¼ˆä¿®æ”¹å¯¹åº”çš„ LED ç®¡è„šå³å¯ï¼‰ã€‚</p>

<p>å³é”® src æ–‡ä»¶å¤¹ï¼Œæ–°å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ <code>main.h</code> å¦ä¸€ä¸ªæ˜¯ <code>main.c</code>ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190824195932-qoIR8c.png" alt="" /></p>

<p>å‘ <code>mian.h</code> ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œå¦‚æœæ‚¨çš„æ¿è½½ LED è¿æ¥åˆ°å…¶å®ƒç®¡è„šï¼Œè¯·ç›¸åº”ä¿®æ”¹å…³äº LED çš„ä¸‰ä¸ªå®å®šä¹‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#ifndef MAIN_H
</span><span class="cp">#define MAIN_H
</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&#34;stm32f1xx_hal.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#define LED_PIN GPIO_PIN_13
</span><span class="cp">#define LED_GPIO_PORT GPIOC
</span><span class="cp">#define LED_GPIO_CLK_ENABLE() __HAL_RCC_GPIOC_CLK_ENABLE()
</span><span class="cp"></span>
<span class="cp">#endif  </span><span class="c1">// MAIN_H
</span></code></pre></div>
<p>å‘ <code>mian.c</code> ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&#34;main.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">LED_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">HAL_Init</span><span class="p">();</span>
  <span class="n">LED_Init</span><span class="p">();</span>

  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// LED ç¿»è½¬
</span><span class="c1"></span>    <span class="n">HAL_GPIO_TogglePin</span><span class="p">(</span><span class="n">LED_GPIO_PORT</span><span class="p">,</span> <span class="n">LED_PIN</span><span class="p">);</span>
    <span class="n">HAL_Delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">LED_Init</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// LED GPIO åˆå§‹åŒ–
</span><span class="c1"></span>  <span class="n">LED_GPIO_CLK_ENABLE</span><span class="p">();</span>
  <span class="n">GPIO_InitTypeDef</span> <span class="n">GPIO_InitStruct</span><span class="p">;</span>
  <span class="n">GPIO_InitStruct</span><span class="p">.</span><span class="n">Pin</span> <span class="o">=</span> <span class="n">LED_PIN</span><span class="p">;</span>
  <span class="n">GPIO_InitStruct</span><span class="p">.</span><span class="n">Mode</span> <span class="o">=</span> <span class="n">GPIO_MODE_OUTPUT_PP</span><span class="p">;</span>
  <span class="n">GPIO_InitStruct</span><span class="p">.</span><span class="n">Pull</span> <span class="o">=</span> <span class="n">GPIO_PULLUP</span><span class="p">;</span>
  <span class="n">GPIO_InitStruct</span><span class="p">.</span><span class="n">Speed</span> <span class="o">=</span> <span class="n">GPIO_SPEED_FREQ_HIGH</span><span class="p">;</span>
  <span class="n">HAL_GPIO_Init</span><span class="p">(</span><span class="n">LED_GPIO_PORT</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">GPIO_InitStruct</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">SysTick_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span> <span class="n">HAL_IncTick</span><span class="p">();</span> <span class="p">}</span></code></pre></div>
<p>ç¡®ä¿æŠŠ stm32f103c8t6 çš„æœ€å°ç³»ç»Ÿæ¿é€šè¿‡ stlink è¿æ¥åˆ°ç”µè„‘ usbï¼Œç¼–è¯‘å¹¶ä¸Šä¼ ç¨‹åºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190824222127-q3S1ZX.png" alt="" /></p>

<p><strong>whatï¼Ÿ</strong> LED ç«Ÿç„¶æ²¡æœ‰å¦‚æœŸçš„é—ªåŠ¨èµ·æ¥!</p>

<h2 id="è§£å†³é—®é¢˜">è§£å†³é—®é¢˜</h2>

<p>ä»£ç éƒ½æ­£ç¡®å‘€ï¼Œä¸ºä»€ä¹ˆç¨‹åºæ²¡æœ‰æ­£å¸¸å·¥ä½œå‘¢?é¦–å…ˆæ€€ç–‘å¯¹è±¡æ˜¯ç³»ç»Ÿæ—¶é’Ÿï¼Œç”¨ç¤ºæ³¢å™¨æµ‹è¯•äº†ä¸€ä¸‹èŠ¯ç‰‡çš„é«˜é€Ÿæ™¶æŒ¯ç®¡è„šï¼Œç«Ÿç„¶æ²¡æœ‰èµ·æŒ¯ï¼Œå“å‘€ï¼Œæˆ‘ä»¬ç¡®å®æ²¡æœ‰æ·»åŠ ç³»ç»Ÿæ—¶é’Ÿé…ç½®çš„ä»£ç ï¼Œå†æ¬¡å¯¹ç…§ä¸€ä¸‹ç”¨ <strong>STMCubeMX</strong><sup class="footnote-ref" id="fnref:STM32CubeMX-is-a"><a href="#fn:STM32CubeMX-is-a">3</a></sup> ç”Ÿæˆçš„æ™®é€šé¡¹ç›®çš„æºç ï¼Œç¡®å®æˆ‘ä»¬çš„å·¥ç¨‹ä¸­ç¼ºå°‘äº†å¯¹äºæ—¶é’Ÿçš„é…ç½®ã€‚</p>

<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‚è€ƒäº† STMCubeMX é¡¹ç›®ï¼Œç¬”è€…å»ºè®®é™¤äº†æ·»åŠ æ—¶é’Ÿçš„é…ç½®ä¹‹å¤–ï¼Œè¿˜è¦åŠ ä¸€äº›å¯èƒ½ä»¥åä¼šç”¨åˆ°çš„å¤„ç†å‡½æ•°ã€‚è¿™é‡Œæˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªæ–°çš„æ–‡ä»¶ <code>sys_basic.h</code> å’Œ <code>sys_basic.c</code>ã€‚</p>

<p>æ–‡ä»¶ <code>sys_basic.h</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#ifndef SYS_BASIC_H
</span><span class="cp">#define SYS_BASIC_H
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">_Error_Handler</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">,</span> <span class="kt">int</span><span class="p">);</span>
<span class="cp">#define Error_Handler() _Error_Handler(__FILE__, __LINE__)
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">SystemClock_Config</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="cp">#endif</span></code></pre></div>
<p>æ–‡ä»¶ <code>sys_basic.c</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&#34;sys_basic.h&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;stm32f1xx_hal.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="cm">/** System Clock Configuration
</span><span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">SystemClock_Config</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">RCC_OscInitTypeDef</span> <span class="n">RCC_OscInitStruct</span><span class="p">;</span>
  <span class="n">RCC_ClkInitTypeDef</span> <span class="n">RCC_ClkInitStruct</span><span class="p">;</span>

  <span class="cm">/**Initializes the CPU, AHB and APB busses clocks
</span><span class="cm">   */</span>
  <span class="n">RCC_OscInitStruct</span><span class="p">.</span><span class="n">OscillatorType</span> <span class="o">=</span> <span class="n">RCC_OSCILLATORTYPE_HSE</span><span class="p">;</span>
  <span class="n">RCC_OscInitStruct</span><span class="p">.</span><span class="n">HSEState</span> <span class="o">=</span> <span class="n">RCC_HSE_ON</span><span class="p">;</span>
  <span class="n">RCC_OscInitStruct</span><span class="p">.</span><span class="n">HSEPredivValue</span> <span class="o">=</span> <span class="n">RCC_HSE_PREDIV_DIV1</span><span class="p">;</span>
  <span class="n">RCC_OscInitStruct</span><span class="p">.</span><span class="n">HSIState</span> <span class="o">=</span> <span class="n">RCC_HSI_ON</span><span class="p">;</span>
  <span class="n">RCC_OscInitStruct</span><span class="p">.</span><span class="n">PLL</span><span class="p">.</span><span class="n">PLLState</span> <span class="o">=</span> <span class="n">RCC_PLL_ON</span><span class="p">;</span>
  <span class="n">RCC_OscInitStruct</span><span class="p">.</span><span class="n">PLL</span><span class="p">.</span><span class="n">PLLSource</span> <span class="o">=</span> <span class="n">RCC_PLLSOURCE_HSE</span><span class="p">;</span>
  <span class="n">RCC_OscInitStruct</span><span class="p">.</span><span class="n">PLL</span><span class="p">.</span><span class="n">PLLMUL</span> <span class="o">=</span> <span class="n">RCC_PLL_MUL9</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">HAL_RCC_OscConfig</span><span class="p">(</span><span class="o">&amp;</span><span class="n">RCC_OscInitStruct</span><span class="p">)</span> <span class="o">!=</span> <span class="n">HAL_OK</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_Error_Handler</span><span class="p">(</span><span class="n">__FILE__</span><span class="p">,</span> <span class="n">__LINE__</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="cm">/**Initializes the CPU, AHB and APB busses clocks
</span><span class="cm">   */</span>
  <span class="n">RCC_ClkInitStruct</span><span class="p">.</span><span class="n">ClockType</span> <span class="o">=</span> <span class="n">RCC_CLOCKTYPE_HCLK</span> <span class="o">|</span> <span class="n">RCC_CLOCKTYPE_SYSCLK</span> <span class="o">|</span>
                                <span class="n">RCC_CLOCKTYPE_PCLK1</span> <span class="o">|</span> <span class="n">RCC_CLOCKTYPE_PCLK2</span><span class="p">;</span>
  <span class="n">RCC_ClkInitStruct</span><span class="p">.</span><span class="n">SYSCLKSource</span> <span class="o">=</span> <span class="n">RCC_SYSCLKSOURCE_PLLCLK</span><span class="p">;</span>
  <span class="n">RCC_ClkInitStruct</span><span class="p">.</span><span class="n">AHBCLKDivider</span> <span class="o">=</span> <span class="n">RCC_SYSCLK_DIV1</span><span class="p">;</span>
  <span class="n">RCC_ClkInitStruct</span><span class="p">.</span><span class="n">APB1CLKDivider</span> <span class="o">=</span> <span class="n">RCC_HCLK_DIV2</span><span class="p">;</span>
  <span class="n">RCC_ClkInitStruct</span><span class="p">.</span><span class="n">APB2CLKDivider</span> <span class="o">=</span> <span class="n">RCC_HCLK_DIV1</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">HAL_RCC_ClockConfig</span><span class="p">(</span><span class="o">&amp;</span><span class="n">RCC_ClkInitStruct</span><span class="p">,</span> <span class="n">FLASH_LATENCY_2</span><span class="p">)</span> <span class="o">!=</span> <span class="n">HAL_OK</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_Error_Handler</span><span class="p">(</span><span class="n">__FILE__</span><span class="p">,</span> <span class="n">__LINE__</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="cm">/**Configure the Systick interrupt time
</span><span class="cm">   */</span>
  <span class="n">HAL_SYSTICK_Config</span><span class="p">(</span><span class="n">HAL_RCC_GetHCLKFreq</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>

  <span class="cm">/**Configure the Systick
</span><span class="cm">   */</span>
  <span class="n">HAL_SYSTICK_CLKSourceConfig</span><span class="p">(</span><span class="n">SYSTICK_CLKSOURCE_HCLK</span><span class="p">);</span>

  <span class="cm">/* SysTick_IRQn interrupt configuration */</span>
  <span class="n">HAL_NVIC_SetPriority</span><span class="p">(</span><span class="n">SysTick_IRQn</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/**
</span><span class="cm"> * @brief  This function is executed in case of error occurrence.
</span><span class="cm"> * @param  None
</span><span class="cm"> * @retval None
</span><span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">_Error_Handler</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">file</span><span class="p">,</span> <span class="kt">int</span> <span class="n">line</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/* USER CODE BEGIN Error_Handler_Debug */</span>
  <span class="cm">/* User can add his own implementation to report the HAL error return state */</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
  <span class="cm">/* USER CODE END Error_Handler_Debug */</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">NMI_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">HardFault_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">MemManage_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">BusFault_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">UsageFault_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">SVC_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">DebugMon_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">PendSV_Handler</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{}</span></code></pre></div>
<p>æ—¶é’Ÿåˆå§‹åŒ–åœ¨å‡½æ•° <code>SystemClock_Config</code> ä¸­å®ç°ï¼Œè¿™é‡Œæ—¶é’Ÿæºé€‰æ‹©ä½¿ç”¨ 8M é«˜é€Ÿæ™¶æŒ¯ã€9å€é¢‘ç­‰ç­‰å¸¸ç”¨çš„æ—¶é’Ÿé…ç½®ï¼Œåœ¨ <code>main.c</code> ä¸­åŒ…å«å¤´æ–‡ä»¶ <code>sys_basic.h</code> å¹¶åœ¨ä¸»å‡½æ•° <code>HAL_Init();</code> ååŠ å…¥æ—¶é’Ÿåˆå§‹åŒ–å‡½æ•°è°ƒç”¨ <code>SystemClock_Config();</code>ã€‚</p>

<p>æ­¤æ—¶ç¼–è¯‘ä¸Šä¼ ç¨‹åºï¼Œå¯ä»¥çœ‹åˆ° LED å¦‚æœŸçµåŠ¨äº†èµ·æ¥ï¼</p>

<h2 id="è°ƒè¯•ç¨‹åº">è°ƒè¯•ç¨‹åº</h2>

<p>è°ƒè¯•ç¨‹åºä¸ä½¿ç”¨ Arduino æ¡†æ¶æ—¶ä¸€è‡´ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè°ƒè¯•å·¥å…·ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ stlink ï¼Œæ‰€ä»¥ <code>paltformio.ini</code> çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[env:genericSTM32F103C8]</span>
<span class="na">platform</span> <span class="o">=</span> <span class="s">ststm32</span>
<span class="na">board</span> <span class="o">=</span> <span class="s">genericSTM32F103C8</span>
<span class="na">framework</span> <span class="o">=</span> <span class="s">stm32cube</span>
<span class="na">debug_tool</span> <span class="o">=</span> <span class="s">stlink</span></code></pre></div>
<p>ç‚¹å‡» F5 æŒ‰é”®ä¾¿å¯ä»¥è¿›è¡Œç¨‹åºè°ƒè¯•äº†ï¼</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡ç®€å•è®²è§£äº†åˆ›å»º stm32cube æ¡†æ¶çš„ PIO å·¥ç¨‹çš„è¿‡ç¨‹ã€é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•ï¼Œå¸Œæœ›å¯¹åˆæ¬¡ä½¿ç”¨ PIO å¼€å‘ stm32cube é¡¹ç›®çš„åŒå­¦æœ‰æ‰€å¸®åŠ©ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:stm32cube-cubemx">stm32cube å¯¹åº”çš„å°±æ˜¯ cubemx åº“ï¼Œè¯¦è§<a href="https://docs.platformio.org/en/latest/frameworks/stm32cube.html" target="_blank">STM32Cube</a> <a class="footnote-return" href="#fnref:stm32cube-cubemx"><sup>[return]</sup></a></li>
<li id="fn:STM32Cube-HAL-an"><a href="https://docs.platformio.org/en/latest/tutorials/ststm32/stm32cube_debugging_unit_testing.html#tutorial-stm32cube-debugging-unit-testing" target="_blank">STM32Cube HAL and Nucleo-F401RE: debugging and unit testing</a> <a class="footnote-return" href="#fnref:STM32Cube-HAL-an"><sup>[return]</sup></a></li>
<li id="fn:STM32CubeMX-is-a">STM32CubeMX is a graphical tool that allows a very easy configuration of STM32 microcontrollers and microprocessors, as well as the generation of the corresponding initialization C code for the ArmÂ® CortexÂ®-M core or a partial LinuxÂ® Device Tree for ArmÂ® CortexÂ®-A core), through a step-by-step process.â€”â€”<a href="https://www.st.com/en/development-tools/stm32cubemx.html" target="_blank">STM32CubeMX</a> <a class="footnote-return" href="#fnref:STM32CubeMX-is-a"><sup>[return]</sup></a></li>
</ol>
</div>
]]></content>
		</item>
		
		<item>
			<title>PlatformIO IDE(VSCode) - å®ç° VS1838B çº¢å¤–æ¥æ”¶é©±åŠ¨</title>
			<link>https://www.smslit.top/2019/08/21/platformio-irremote-driver/</link>
			<pubDate>Wed, 21 Aug 2019 10:51:18 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/08/21/platformio-irremote-driver/</guid>
			<description>æœ€è¿‘åšä¸€ä¸ªé¡¹ç›®éœ€è¦ç”¨åˆ°çº¢å¤–æ¥æ”¶ï¼Œé¡¹ç›®å·¥ç¨‹é’ˆå¯¹çš„æ˜¯ STM32F103C8T6 å¹³å°ï¼Œä½¿ç”¨çš„æ˜¯ Arduino æ¡†æ¶ï¼Œæƒ³ç€ä¸é‡å¤é€ è½®å­ï¼Œç»“æœç¬¬ä¸‰æ–¹çº¢å¤–åº“éƒ½æ²¡æœ‰åŒæ—¶æ»¡è¶³ ST STM32 å¹³å° å’Œ Arduino æ¡†æ¶ä¸¤ä¸ª</description>
			<content type="html"><![CDATA[

<p>æœ€è¿‘åšä¸€ä¸ªé¡¹ç›®éœ€è¦ç”¨åˆ°çº¢å¤–æ¥æ”¶ï¼Œé¡¹ç›®å·¥ç¨‹é’ˆå¯¹çš„æ˜¯ <code>STM32F103C8T6</code> å¹³å°ï¼Œä½¿ç”¨çš„æ˜¯ Arduino æ¡†æ¶ï¼Œæƒ³ç€ä¸é‡å¤é€ è½®å­ï¼Œç»“æœç¬¬ä¸‰æ–¹çº¢å¤–åº“éƒ½æ²¡æœ‰åŒæ—¶æ»¡è¶³ ST STM32 å¹³å° å’Œ Arduino æ¡†æ¶ä¸¤ä¸ªæ¡ä»¶çš„ï¼Œç´¢æ€§å°±è‡ªå·±é€ ä¸ªè½®å­å‘—ï¼Œä¹Ÿä¸éš¾ï¼</p>

<h2 id="ç¡¬ä»¶è¿æ¥">ç¡¬ä»¶è¿æ¥</h2>

<p>æœ¬æ–‡çš„å®ç°é©±åŠ¨çš„ç¡¬ä»¶æ¡ä»¶å¦‚ä¸‹ï¼š</p>

<ul>
<li>STM32F103C8T6 æœ€å°ç³»ç»Ÿæ¿</li>
<li>stlink v2 ä»¿çœŸè°ƒè¯•å™¨</li>
<li>VS1838B çº¢å¤–æ¥æ”¶å¤´</li>
<li>å¸¸è§„çš„çº¢å¤–é¥æ§å™¨</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190821125056-eMMm6g.jpg" alt="" /></p>

<p>VS1838B æœ‰ä¸‰ä¸ªç®¡è„šï¼ŒVCC ã€ GND å’Œ OUTï¼Œæ­å»ºçš„ç¡¬ä»¶ç”µè·¯å¾ˆç®€å•ï¼Œä¸éœ€è¦å…¶ä»–çš„é…å¥—ç”µè·¯ï¼Œç›´æ¥è¿æ¥å•ç‰‡æœºç®¡è„šå’Œç”µæºå°±èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘å°†ç®¡è„šè¿æ¥åˆ° <strong>PA0</strong> ç®¡è„šã€‚</p>

<h2 id="çº¢å¤–ç›¸å…³çŸ¥è¯†">çº¢å¤–ç›¸å…³çŸ¥è¯†</h2>

<p>è¦æƒ³ç¼–å†™çº¢å¤–é©±åŠ¨éœ€è¦äº†è§£çº¢å¤–æ¥æ”¶å™¨è¾“å‡ºå¾—ä¿¡å·ç‰¹ç‚¹ï¼Œæ ¹æ® VS1838B è¾“å‡ºä¿¡å·æœ‰çš„æ”¾çŸ¢çš„è®¾è®¡ä¿¡å·è§£æé©±åŠ¨ã€‚</p>

<p>ç¬”è€…æ‰‹å¤´çš„çº¢å¤–é¥æ§å™¨é‡‡ç”¨ NEC ç¼–ç åè®®<sup class="footnote-ref" id="fnref:NEC-https-blog-c"><a href="#fn:NEC-https-blog-c">1</a></sup>ï¼Œå…¶ä¸­çº¢å¤–å‘å°„èŠ¯ç‰‡ä¼šè‡ªåŠ¨æ‰«æçŸ©é˜µé”®ç›˜ç”µè·¯ï¼Œæ ¹æ®ä¸åŒçš„é”®ç ï¼Œç”Ÿæˆä¸€ä¸²äºŒè¿›åˆ¶æ•°æ®ï¼Œå†æŒ‰æ¯ä½çš„äºŒè¿›åˆ¶æ•°æ®ç”¨ç›¸åº”çš„çº¢å¤–å…‰ä¿¡å·å‘å‡ºã€‚é¥æ§å™¨ä¸Šçš„ä¸€ä¸ªæŒ‰é”®æŒ‰ä¸‹åçš„ <strong>bit</strong> æ•°æ®:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190821135123-cVuJ0l.png" alt="" /></p>

<p>å¼•å¯¼ç ç”¨äºæ ‡è¯†ä¸€ä¸ªé”®ç æ•°æ®çš„ä¼ è¾“å¼€å§‹ï¼Œå°†ä¼ è¾“ 32 ä½æ•°æ®ï¼Œå…±å››ä¸ªå­—èŠ‚ï¼ŒæŒ‰ç…§å…ˆä½ä½åé«˜ä½ä¼ è¾“ã€‚ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸ºç”¨æˆ·ç¼–ç ï¼Œç”¨äºæ ‡è¯†é¥æ§å™¨çš„å‚å®¶ï¼Œç¬¬äºŒä¸ªå­—èŠ‚ä¸ºç”¨æˆ·ç¼–å—çš„åç ï¼Œç”¨äºæ ¡éªŒç”¨æˆ·ç¼–ç ã€‚ç¬¬ä¸‰ä¸ªå­—èŠ‚æ˜¯æŒ‰é”®ç¼–ç ç”¨äºåŒºåˆ«æŒ‰ä¸‹çš„é”®ï¼Œç¬¬å››ä¸ªå­—èŠ‚ä¸ºæŒ‰é”®ç¼–ç çš„åç ï¼Œç”¨äºæ ¡éªŒæŒ‰é”®ç¼–ç , ä»è€Œç¡®ä¿çº¢å¤–çº¿ä¼ è¾“çš„æ•°æ®çš„æœ‰æ•ˆæ€§ã€‚</p>

<p>å¼•å¯¼ç ã€ä½æ•°æ® 0 å’Œä½æ•°æ® 1 ä¿¡å·ç‰¹å¾æ˜æ˜¾ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190821143223-HkqRTp.png" alt="" /></p>

<p>ä¸Šé¢å°±æ˜¯çº¢å¤–è¦å‘å°„æ•°æ®çš„æ ¼å¼äº†ï¼ŒçœŸæ­£å‘å°„å…‰ä¿¡å·çš„æ—¶å€™ï¼Œå…¶å®æ˜¯å°†å¾…å‘å°„çš„æ•°æ®è°ƒåˆ¶åˆ°ä¸€ä¸ª 38KHz çš„å…‰ä¿¡å·ä¸­çš„ï¼Œçº¢å¤–æ¥æ”¶å¤´æ¯”å¦‚ VS1838Bï¼Œæ¥æ”¶åˆ°è¿™ä¸ªä¿¡å·åä¼šå¯¹ä¿¡å·è¿›è¡Œä¿¡å·æ”¾å¤§ã€å¸¦é€šæ»¤æ³¢ã€è§£è°ƒã€æ³¢å½¢æ•´å½¢æœ€ç»ˆè¿˜åŸå‡ºåŸå§‹çš„ NEC åè®®æŒ‰é”®ç¼–ç ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ä» VS1838B è¾“å‡ºçš„ä¿¡å·æ˜¯ä¸åŸå§‹ç¼–ç åç›¸çš„<sup class="footnote-ref" id="fnref:35-linux-https-b"><a href="#fn:35-linux-https-b">2</a></sup>ï¼Œé€šä¿—è®²å°±æ˜¯é«˜ä½ç”µå¹³æ˜¯åç€çš„ã€‚</p>

<h2 id="é©±åŠ¨è®¾è®¡æ€è·¯">é©±åŠ¨è®¾è®¡æ€è·¯</h2>

<p>ä¸ºäº†æ‰¾åˆ°è§£æ VS1838B è¾“å‡ºä¿¡å·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—å…ˆåˆ†æä¸€ä¸‹å¼•å¯¼ç ã€ä½æ•°æ® 0 å’Œ ä½æ•°æ® 1 çš„ç‰¹å¾ï¼Œå…¶å®æˆ‘ä»¬åªè¦æ‰¾åˆ°èƒ½åŒºåˆ†è¿™ä¸‰ä¸ªä¿¡å·çš„æ–¹æ³•å³å¯ã€‚</p>

<p>è§‚å¯Ÿä¸Šä¸€å°èŠ‚ä¿¡å·ç‰¹å¾å›¾ï¼Œå¯ä»¥å‘ç°ä¸‰ç§ä¿¡å·æœ€æ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯ä½ç”µå¹³æ—¶é—´ï¼š</p>

<table>
<thead>
<tr>
<th>ä¿¡å·</th>
<th>ä½ç”µå¹³æ—¶é—´(ms)</th>
</tr>
</thead>

<tbody>
<tr>
<td>å¼•å¯¼ç </td>
<td>4.5ms</td>
</tr>

<tr>
<td>b0</td>
<td>0.56ms</td>
</tr>

<tr>
<td>b1</td>
<td>1.68ms</td>
</tr>
</tbody>
</table>

<p>ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ VS1838B è¾“å‡ºä¿¡å·æ˜¯ä¸å›¾ä¸­é«˜ä½ä¿¡å·ç›¸åçš„ï¼Œæ‰€ä»¥é’ˆå¯¹ VS1838B çš„è¾“å‡ºä¿¡å·ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­æ¯æ®µé«˜ç”µå¹³çš„æ—¶é—´å°±å¯ä»¥åŒºåˆ†å‡ºå¼•å¯¼ç ã€ä½æ•°æ® 0 å’Œ ä½æ•°æ® 1ã€‚</p>

<p>ä¸€ç»„çº¢å¤–æ•°æ®çš„ä¿¡å·æ˜¯ä»¥å¼•å¯¼ç å¼€å§‹çš„ï¼Œæ‰€ä»¥æ­£å¸¸çŠ¶æ€ä¸‹ä¸€æ—¦åˆ¤æ–­åˆ°æ˜¯å¼•å¯¼ç ï¼Œä¸‹é¢å°±åº”è¯¥é€šè¿‡åŒºåˆ†ä½æ•°æ®ä¿¡å·æ¥ä¿å­˜ä½æ•°æ®ç”Ÿæˆå­—èŠ‚æ•°æ®äº†ï¼Œéœ€è¦è¿ç»­åˆ†è¾¨ 32 ä½æ•°æ®æ˜¯ 0 æˆ– 1å³å¯ã€‚</p>

<p>ä¸ºäº†ä¿è¯åŠæ—¶çš„åˆ¤æ–­ç®¡è„šç”µå¹³çš„å˜åŒ–ï¼Œè¿™é‡Œé‡‡ç”¨ IO å¤–éƒ¨ä¸­æ–­çš„æ–¹å¼ï¼Œåœ¨ä¸­æ–­å­ç¨‹åºä¸­å®ç°è§£æé€»è¾‘ï¼Œè§£ææ•°æ®ä¹‹å‰å…³é”®çš„ä¸€ç‚¹è¿˜æ˜¯å¾—åˆ°é«˜ç”µå¹³æ—¶é—´ï¼Œå°†å¤–éƒ¨ä¸­æ–­è§¦å‘æ–¹å¼è®¾ç½®ä¸ºç”µå¹³å˜åŒ–è§¦å‘ï¼Œä¹Ÿå°±æ˜¯æ— è®ºç”µå¹³ä¸‹é™æ²¿è¿˜æ˜¯ä¸Šå‡æ²¿éƒ½ä¼šè§¦å‘ä¸­æ–­ã€‚</p>

<p>ä¸­æ–­å¤„ç†é€»è¾‘ä¸­ï¼ŒåŠ å…¥çŠ¶æ€æœºçš„å¤„ç†å½¢å¼ï¼Œå¯åˆ†ä¸¤ç§çŠ¶æ€ï¼š</p>

<ul>
<li><strong>æ­£å¸¸çŠ¶æ€</strong>ï¼šç­‰å¾…å¼•å¯¼ç </li>
<li><strong>æ¥æ”¶æ•°æ®çŠ¶æ€</strong>ï¼šè§£æ 0ã€1 æ•°æ®</li>
</ul>

<p>æœ€ç»ˆç»“æœå­˜å‚¨åœ¨ä¸€ä¸ª 32 ä½æ•´å‹æ•°æ®ä¸­ï¼Œé‚£ä¹ˆæ•´ä¸ªä¸­æ–­çš„å¤„ç†é€»è¾‘æ­¥éª¤å¯å‚è€ƒå¦‚ä¸‹ï¼š</p>

<ol>
<li>åˆ¤æ–­è¿›å…¥ä¸­æ–­æ—¶ç®¡è„šç”µå¹³

<ul>
<li>å¦‚æœæ˜¯é«˜ç”µå¹³ï¼Œè®°å½•æ­¤åˆ»æ—¶é—´ï¼Œé€€å‡ºä¸­æ–­</li>
<li>å¦‚æœæ˜¯ä½ç”µå¹³ï¼Œç”¨æ­¤åˆ»æ—¶é—´å‡å»è®°å½•çš„æ—¶é—´å°±å¾—åˆ°äº†é«˜ç”µå¹³è„‰å†²å®½åº¦ï¼ˆå•ä½ usï¼‰ï¼Œç„¶åè¿›è¡Œç¬¬ 2 æ­¥</li>
</ul></li>
<li>åˆ¤æ–­æ­¤æ—¶çŠ¶æ€ï¼š

<ul>
<li>å¦‚æœæ˜¯<strong>æ­£å¸¸çŠ¶æ€</strong>ï¼Œè„‰å®½å¦‚æœå¤§äº 4000us è¯´æ˜æ˜¯å¼•å¯¼ç ï¼Œæ­¤æ—¶å°†çŠ¶æ€åˆ‡æ¢ä¸º<strong>æ¥æ”¶æ•°æ®çŠ¶æ€</strong>ï¼Œç»“æœç½®ä¸º 0ï¼Œç„¶åé€€å‡ºä¸­æ–­</li>
<li>å¦‚æœæ˜¯<strong>æ¥æ”¶æ•°æ®çŠ¶æ€</strong>ï¼Œåˆ¤æ–­è„‰å®½å¦‚æœåœ¨ 1120us å’Œ 2240us ä¹‹é—´è¯´æ˜æ˜¯ 1 ï¼Œå°†ç»“æœçš„å¯¹åº”ä½ç½® 1 ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦æ¥å—å®Œæ‰€æœ‰ä½ï¼š

<ul>
<li>å¦‚æœæ˜¯ï¼Œå¯¹ç»“æœè¿›è¡Œæ ¡éªŒï¼ˆåˆ©ç”¨åç ï¼‰ï¼Œå¦‚æœæ­£ç¡®è¿›è¡Œæ•°æ®å¤„ç†</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œé€€å‡ºä¸­æ–­</li>
</ul></li>
</ul></li>
</ol>

<h2 id="é©±åŠ¨ç¨‹åºå®ç°">é©±åŠ¨ç¨‹åºå®ç°</h2>

<p>æ ¹æ®ä¸Šè¿°æ€è·¯è®¾è®¡äº†çº¢å¤–æ¥æ”¶é©±åŠ¨ç¨‹åºï¼Œä»¥åº“çš„å½¢å¼å¯¹ç¨‹åºå°è£…ï¼Œå£°æ˜å¯¹è±¡åªéœ€æŒ‡å®šç®¡è„šå’Œå¤„ç†å›è°ƒå‡½æ•°å³å¯ï¼Œåœ¨ PlatformIO IDE é¡¹ç›®å·¥ç¨‹ç›®å½• lib ä¸­æ–°å»º IrRemote ç›®å½•ï¼Œç›®å½•ä¸‹æ”¾ç½®æºä»£ç  irRemote.h å’Œ irRemote.cppã€‚ç†è®ºä¸Šåªè¦æ˜¯ä½¿ç”¨ Arduino æ¡†æ¶ï¼Œå¹¶ä¸”ç®¡è„šæ”¯æŒ IO å¤–éƒ¨ä¸­æ–­ï¼Œå‡å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p>

<h3 id="irremote-h">irRemote.h</h3>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#ifndef IRREMOTE_H_
</span><span class="cp">#define IRREMOTE_H_
</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&#34;Arduino.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">*</span><span class="n">IrRemoteCBPtr</span><span class="p">)(</span><span class="kt">uint32_t</span><span class="p">);</span>

<span class="k">enum</span> <span class="nc">IrRemoteState</span> <span class="p">{</span> <span class="n">WAITING</span><span class="p">,</span> <span class="n">READING</span> <span class="p">};</span>

<span class="cm">/**
</span><span class="cm"> * @brief çº¢å¤–æ¥æ”¶ç»“æœè”åˆä½“
</span><span class="cm"> *
</span><span class="cm"> * å®šä¹‰çº¢å¤–æ¥æ”¶è”åˆä½“æ˜¯ä¸ºäº†å¯ä»¥ä»åŸç”Ÿçš„ 32 ä½æ•°æ®ï¼Œè½»æ¾è·å–å­—èŠ‚æ•°æ®
</span><span class="cm"> */</span>
<span class="k">union</span> <span class="nc">IrRemoteResult</span> <span class="p">{</span>
  <span class="kt">uint32_t</span> <span class="n">value</span><span class="p">;</span>
  <span class="kt">uint8_t</span> <span class="n">bytes</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">IrRemote</span> <span class="p">{</span>
 <span class="k">public</span><span class="o">:</span>
  <span class="cm">/**
</span><span class="cm">   * @brief çº¢å¤–ç±»çš„æ„é€ å‡½æ•°
</span><span class="cm">   *
</span><span class="cm">   * æŒ‡å®šçº¢å¤–çš„ç®¡è„šå’Œå›è°ƒå‡½æ•°
</span><span class="cm">   *
</span><span class="cm">   * @param pin è¿æ¥çº¢å¤–æ•°æ®è¾“å‡ºçš„ç®¡è„š
</span><span class="cm">   * @param callback
</span><span class="cm">   * æ”¶åˆ°æ•°æ®åè¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°å…·æœ‰ä¸€ä¸ªå‚æ•°ç”¨äºä¼ é€’æ•°æ®ç»“æœ
</span><span class="cm">   */</span>
  <span class="n">IrRemote</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">pin</span><span class="p">,</span> <span class="n">IrRemoteCBPtr</span> <span class="n">callback</span><span class="p">);</span>

  <span class="cm">/**
</span><span class="cm">   * @brief çº¢å¤–æ•°æ®æ¥æ”¶å¤„ç†å‡½æ•°
</span><span class="cm">   *
</span><span class="cm">   * åˆ†æçº¢å¤–è¾“å‡ºç”µå¹³åŠæŒç»­æ—¶é—´ï¼Œè§£æå¾—åˆ°æ•°æ®
</span><span class="cm">   */</span>
  <span class="kt">void</span> <span class="nf">handler</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

  <span class="cm">/**
</span><span class="cm">   * @brief å¯åŠ¨çº¢å¤–æ¥æ”¶
</span><span class="cm">   *
</span><span class="cm">   * å¼€å¯çº¢å¤–æ•°æ®è§£æé€»è¾‘
</span><span class="cm">   */</span>
  <span class="kt">void</span> <span class="nf">begin</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

  <span class="cm">/**
</span><span class="cm">   * @brief å…³é—­çº¢å¤–æ¥æ”¶
</span><span class="cm">   *
</span><span class="cm">   * å…³é—­çº¢å¤–æ•°æ®è§£æé€»è¾‘
</span><span class="cm">   */</span>
  <span class="kt">void</span> <span class="nf">end</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

 <span class="k">private</span><span class="o">:</span>
  <span class="kt">uint8_t</span> <span class="n">pin</span><span class="p">;</span>             <span class="c1">// è¿æ¥çº¢å¤–è¾“å‡ºçš„ç®¡è„š
</span><span class="c1"></span>  <span class="kt">uint32_t</span> <span class="n">time</span><span class="p">;</span>           <span class="c1">// ä¸Šä¸€æ¬¡ FALLING çš„æ—¶åˆ»ï¼Œå•ä½ us
</span><span class="c1"></span>  <span class="kt">uint32_t</span> <span class="n">width</span><span class="p">;</span>          <span class="c1">// è„‰å†²å®½åº¦ï¼Œå•ä½ us
</span><span class="c1"></span>  <span class="kt">uint32_t</span> <span class="n">count</span><span class="p">;</span>          <span class="c1">// æ•°æ®æ¥æ”¶ä½æ•°è®¡æ•°
</span><span class="c1"></span>  <span class="n">IrRemoteState</span> <span class="n">state</span><span class="p">;</span>     <span class="c1">// å¤„ç†çŠ¶æ€
</span><span class="c1"></span>  <span class="n">IrRemoteResult</span> <span class="n">result</span><span class="p">;</span>   <span class="c1">// æ”¶åˆ°çš„æ•°æ®ç»“æœ
</span><span class="c1"></span>  <span class="n">IrRemoteCBPtr</span> <span class="n">callback</span><span class="p">;</span>  <span class="c1">// æ”¶åˆ°æ•°æ®çš„å›è°ƒå‡½æ•°
</span><span class="c1"></span>
  <span class="cm">/**
</span><span class="cm">   * @brief çº¢å¤–æ¥æ”¶ç»“æœæ ¡éªŒ
</span><span class="cm">   *
</span><span class="cm">   * æ ¡éªŒçº¢å¤–æ¥æ”¶ç»“æœï¼Œæœ€åä¸¤ä¸ªå­—èŠ‚äº’ä¸ºåç å³ä¸ºæ­£ç¡®ç»“æœ
</span><span class="cm">   *
</span><span class="cm">   * @param result è§£æå¾—åˆ°çš„çº¢å¤–æ¥æ”¶ç»“æœ
</span><span class="cm">   */</span>
  <span class="kt">bool</span> <span class="nf">check</span><span class="p">(</span><span class="n">IrRemoteResult</span> <span class="n">result</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif
</span></code></pre></div>
<h3 id="irremote-cpp">irRemote.cpp</h3>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&#34;irRemote.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">nullCB</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">_</span><span class="p">)</span> <span class="p">{}</span>

<span class="kt">void</span> <span class="nf">irRxHandler</span><span class="p">(</span><span class="n">IrRemote</span> <span class="o">*</span><span class="n">ir</span><span class="p">)</span> <span class="p">{</span> <span class="n">ir</span><span class="o">-&gt;</span><span class="n">handler</span><span class="p">();</span> <span class="p">}</span>

<span class="n">IrRemote</span><span class="o">::</span><span class="n">IrRemote</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">pin</span><span class="p">,</span> <span class="n">IrRemoteCBPtr</span> <span class="n">callback</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="o">-&gt;</span><span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span><span class="p">;</span>
  <span class="k">this</span><span class="o">-&gt;</span><span class="n">callback</span> <span class="o">=</span> <span class="n">callback</span><span class="p">;</span>

  <span class="n">pinMode</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">IrRemote</span><span class="o">::</span><span class="n">handler</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">)</span> <span class="o">==</span> <span class="n">HIGH</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">time</span> <span class="o">=</span> <span class="n">micros</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">time</span><span class="p">;</span>
    <span class="k">switch</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="nl">WAITING</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">&gt;</span> <span class="mi">4000</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">=</span> <span class="n">READING</span><span class="p">;</span>
          <span class="k">this</span><span class="o">-&gt;</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">this</span><span class="o">-&gt;</span><span class="n">result</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">case</span> <span class="nl">READING</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">&gt;</span> <span class="mi">1120</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">&lt;</span> <span class="mi">2240</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="o">-&gt;</span><span class="n">result</span><span class="p">.</span><span class="n">value</span> <span class="o">|=</span> <span class="p">(</span><span class="mh">0x00000001</span> <span class="o">&lt;&lt;</span> <span class="k">this</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">count</span><span class="o">++</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">count</span> <span class="o">&gt;=</span> <span class="mi">32</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="o">-&gt;</span><span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">this</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">=</span> <span class="n">WAITING</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="n">check</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">result</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">detachInterrupt</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">);</span>
            <span class="k">this</span><span class="o">-&gt;</span><span class="n">callback</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">result</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
            <span class="n">attachInterrupt</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">,</span> <span class="p">(</span><span class="n">voidArgumentFuncPtr</span><span class="p">)</span><span class="n">irRxHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span>
                            <span class="n">CHANGE</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="k">default</span><span class="o">:</span>
        <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">IrRemote</span><span class="o">::</span><span class="n">begin</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="o">-&gt;</span><span class="n">state</span> <span class="o">=</span> <span class="n">WAITING</span><span class="p">;</span>
  <span class="n">attachInterrupt</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">,</span> <span class="p">(</span><span class="n">voidArgumentFuncPtr</span><span class="p">)</span><span class="n">irRxHandler</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="n">CHANGE</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">IrRemote</span><span class="o">::</span><span class="n">end</span><span class="p">()</span> <span class="p">{</span> <span class="n">detachInterrupt</span><span class="p">(</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">pin</span><span class="p">);</span> <span class="p">}</span>

<span class="kt">bool</span> <span class="n">IrRemote</span><span class="o">::</span><span class="n">check</span><span class="p">(</span><span class="n">IrRemoteResult</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">((</span><span class="n">result</span><span class="p">.</span><span class="n">bytes</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">result</span><span class="p">.</span><span class="n">bytes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xFF</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">result</span><span class="p">.</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xFF</span><span class="p">))</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="æµ‹è¯•é©±åŠ¨">æµ‹è¯•é©±åŠ¨</h2>

<p>ç¼–å†™ä¸€ä¸ªä¾‹ç¨‹æµ‹è¯•ä¸€ä¸‹é©±åŠ¨ï¼Œå½“æ”¶åˆ°æ•°æ®çš„æ—¶å€™é€šè¿‡ä¸²å£æŠŠæ•°æ®æ‰“å°å‡ºæ¥ï¼Œ<code>main.cpp</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;irRemote.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">result</span><span class="p">)</span> <span class="p">{</span> <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">HEX</span><span class="p">);</span> <span class="p">}</span>

<span class="n">IrRemote</span> <span class="nf">ir</span><span class="p">(</span><span class="n">PB0</span><span class="p">,</span> <span class="n">test</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// å¯åŠ¨çº¢å¤–æ¥æ”¶
</span><span class="c1"></span>  <span class="n">ir</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{}</span>
</code></pre></div>
<p>å°†è¿æ¥äº† VS1838B çš„ stm32f103c8t6 æœ€å°ç³»ç»Ÿæ¿é€šè¿‡ stlink è¿æ¥ç”µè„‘åŒæ—¶å°†å…¶ usb ç›´è¿åˆ°ç”µè„‘ï¼Œç¼–è¯‘ä¸Šä¼ ç¨‹åºï¼Œå¾…è¿è¡Œä»¥åï¼Œæ‰“å¼€ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œå¯¹ç€ VS1838B æŒ‰ä¸‹çº¢å¤–é¥æ§æŒ‰é’®ï¼Œä¾¿å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ 32 ä½åŸæ•°æ®(ä»é«˜ä½åˆ°ä½ä½å››ä¸ªå­—èŠ‚åˆ†åˆ«æ˜¯æŒ‰é”®ç¼–ç åç ã€æŒ‰é”®ç¼–ç ã€ç”¨æˆ·ç¼–ç åç ã€ç”¨æˆ·ç¼–ç )ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190821162128-Mce9i5.png" alt="" /></p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡è®²çš„çº¢å¤–é©±åŠ¨å®ç°æ€è·¯å¯¹äº NEC åè®®çš„çº¢å¤–æ•°æ®è§£æåº”è¯¥æ˜¯é€šç”¨çš„ï¼Œç¬”è€…å› ä¸ºä½¿ç”¨äº† Arduino æ¡†æ¶ï¼Œæ‰€ä»¥æ˜¯ä»¥ Arduino ä¸ºåŸºç¡€è®¾è®¡çš„é©±åŠ¨ç¨‹åºï¼Œå½“ç„¶ä¸ä½¿ç”¨ Arduino æ¡†æ¶ä¹Ÿå¯ä»¥æŒ‰ç…§å®ç°æ€è·¯è¿›è¡Œè®¾è®¡å¯¹åº”çš„é©±åŠ¨ï¼Œæ€è·¯å¯è¡Œå°±å¯ä»¥ï¼å¸Œæœ›æœ¬æ–‡ä»‹ç»çš„æ€è·¯èƒ½å¤Ÿå¸®åˆ°æ‚¨ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:NEC-https-blog-c"><a href="https://blog.csdn.net/yu__jia/article/details/52912762" target="_blank"> NECçº¢å¤–çº¿ç¼–ç åè®®</a> <a class="footnote-return" href="#fnref:NEC-https-blog-c"><sup>[return]</sup></a></li>
<li id="fn:35-linux-https-b"><a href="https://blog.csdn.net/jklinux/article/details/73498067" target="_blank">35 çº¢å¤–æ¥æ”¶å¤´åœ¨linuxå†…æ ¸é‡Œçš„é©±åŠ¨</a> <a class="footnote-return" href="#fnref:35-linux-https-b"><sup>[return]</sup></a></li>
</ol>
</div>
]]></content>
		</item>
		
		<item>
			<title>PlatformIO IDE(VSCode) åŸºæœ¬ä½¿ç”¨ - ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</title>
			<link>https://www.smslit.top/2019/08/19/platformio-libraries/</link>
			<pubDate>Mon, 19 Aug 2019 10:49:25 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/08/19/platformio-libraries/</guid>
			<description>åœ¨å®é™…åšä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œä¸ºäº†æé«˜æ•ˆç‡æˆ‘ä»¬ä¼šé¦–é€‰ä¸é‡å¤é€ è½®å­ï¼Œæ‰€ä»¥å¯èƒ½ä¼šç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œè€Œ PlatformIO ä¸ºæˆ‘ä»¬æ•´ç†å’Œæä¾›äº†ä¸€äº›å³è£…å³ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæœ¬æ–‡ç¬”è€…å°±</description>
			<content type="html"><![CDATA[

<p>åœ¨å®é™…åšä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œä¸ºäº†æé«˜æ•ˆç‡æˆ‘ä»¬ä¼šé¦–é€‰ä¸é‡å¤é€ è½®å­ï¼Œæ‰€ä»¥å¯èƒ½ä¼šç”¨åˆ°ç¬¬ä¸‰æ–¹åº“ï¼Œè€Œ PlatformIO ä¸ºæˆ‘ä»¬æ•´ç†å’Œæä¾›äº†ä¸€äº›å³è£…å³ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæœ¬æ–‡ç¬”è€…å°±å¸¦å¤§å®¶äº†è§£ä¸€ä¸‹åœ¨ PlatformIO IDE (VSCode) ä¸­å¦‚ä½•ä½¿ç”¨å’Œç®¡ç†è¿™äº›åº“ã€‚</p>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>æœ¬æ–‡å°†ä½¿ç”¨ Arduino Leonardo è®²è§£ï¼Œä»¥æ–‡ç«  <a href="/2019/08/18/platformio-newproject/" target="_blank">PlatformIO IDE(VSCode) åŸºæœ¬ä½¿ç”¨ - æ–°å»ºé¡¹ç›®</a> ä¸­æ–°å»ºçš„æ§åˆ¶ LED é—ªçƒçš„å·¥ç¨‹ï¼ˆblinkï¼‰ä¸ºä¾‹ã€‚</p>

<p>è¿™ä¸ªå·¥ç¨‹ä¸­ LED çš„æ§åˆ¶æ˜¯é˜»å¡å¼çš„ï¼Œå› ä¸ºä½¿ç”¨äº† <code>delay</code> æ–¹æ³•ï¼Œå°±æ˜¯æ­»ç­‰å»¶æ—¶è¿™é€ æˆäº†è¿ç®—èµ„æºçš„æµªè´¹ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•æ§åˆ¶ LED æŒ‰å‘¨æœŸé—ªçƒï¼Œè€Œä¸é˜»å¡å‘¢ï¼Ÿç¬”è€…å¾ˆè‡ªç„¶åœ°æƒ³åˆ°äº†ç”¨å®šæ—¶å™¨æ§åˆ¶ led å°±è¡Œå•¦ï¼Œæ‰€ä»¥è¿™å°±æœ‰äº†æˆ‘ä»¬çš„æ–°çš„éœ€æ±‚ï¼Œæœ‰æ²¡æœ‰ç¬¬ä¸‰æ–¹åº“æ”¯æŒå®šæ—¶å™¨æ“ä½œå‘¢ï¼</p>

<p>PIO æä¾›äº†å¾ˆå¥½çš„æ–¹å¼å¸®åŠ©æˆ‘ä»¬æŸ¥æ‰¾å’Œç®¡ç†ç¬¬ä¸‰æ–¹åº“ï¼Œåœ¨ä¸‹ä¸€å°èŠ‚è·Ÿç¬”è€…ä¸€èµ·çœ‹ä¸€ä¸‹å¦‚ä½•æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p>

<h2 id="ç¬¬ä¸‰æ–¹åº“çš„ç®¡ç†">ç¬¬ä¸‰æ–¹åº“çš„ç®¡ç†</h2>

<p>é¦–å…ˆæˆ‘ä»¬æ‰“å¼€ blink å·¥ç¨‹ï¼Œç„¶åæ‰“å¼€ PIO Home é¡µé¢ï¼Œç‚¹å‡»å·¦ä¾§çš„ <strong>Libraries</strong> æ ‡ç­¾æ‰“å¼€åº“çš„æ ‡ç­¾é¡µï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°åº“çš„æ ‡ç­¾é¡µä¸­æœ‰å››ä¸ªæ ‡ç­¾é¡µåˆ†åˆ«æ˜¯ï¼š</p>

<ul>
<li><strong>Registry</strong>ï¼šä»“åº“ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰¾æˆ‘ä»¬éœ€è¦çš„ç¬¬ä¸‰æ–¹åº“ï¼Œä¹Ÿèƒ½çœ‹åˆ°æŒ‰ç…§ä¸‹è½½é‡æ’åºçš„å…³é”®è¯æ ‡ç­¾ï¼Œä¹Ÿèƒ½çœ‹åˆ°æœ€è¿‘åº“çš„ä¸‹è½½æ’å</li>
<li><strong>Installed</strong>ï¼šåœ¨è¿™é‡Œæˆ‘ä»¬èƒ½çœ‹åˆ°æ›¾ç»å®‰è£…çš„åº“ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œç®¡ç†</li>
<li><strong>Build-in</strong>ï¼šåœ¨è¿™é‡Œæˆ‘ä»¬èƒ½çœ‹åˆ°å®‰è£…çš„å¹³å°å’Œæ¡†æ¶ä¸­å†…å»ºçš„åº“</li>
<li><strong>Updates</strong>ï¼šåœ¨è¿™é‡Œæˆ‘ä»¬èƒ½çœ‹åˆ°éœ€è¦æ›´æ–°çš„åº“</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190819165858-rZXhxO.png" alt="" /></p>

<h3 id="åº“çš„æŸ¥æ‰¾">åº“çš„æŸ¥æ‰¾</h3>

<p>æŒ‰ç…§ä¸Šé¢æåˆ°çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åœ¨ <strong>Registry</strong> æ ‡ç­¾é¡µä¸­æŸ¥æ‰¾åº“ï¼Œæˆ‘ä»¬åœ¨æœç´¢æ¡†ä¸­æœç´¢å®šæ—¶å™¨å¯¹åº”çš„è‹±æ–‡ <code>Timer</code>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190819170522-tktUXt.png" alt="" /></p>

<p>å¯ä»¥çœ‹åˆ°ä¼šåˆ—å‡ºæœç´¢åˆ°çš„ç»“æœï¼Œæœç´¢ä¼˜å…ˆä¼šæŒ‰ç…§æ¡†æ¶è¿›è¡Œå…³é”®è¯æœç´¢ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å…·ä½“çš„ä¸€ä¸ªæ¡ç›®ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ªåº“ <strong>Ticker</strong>ï¼Œæ¯ä¸ªæ¡ç›®åŒ…å«çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p>

<ul>
<li>åç§°åŠåŠŸèƒ½æè¿°</li>
<li>é€‚ç”¨çš„æ¡†æ¶</li>
<li>é€‚ç”¨çš„å¹³å°</li>
<li>å…³é”®è¯æ ‡ç­¾</li>
<li>å…¶å®ƒï¼šä¸‹è½½é‡ã€ä¾‹ç¨‹æ•°</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190819171521-GCYNkM.png" alt="" /></p>

<p>æ ¹æ®ç¬¬ä¸€ä¸ªæè¿°å°±ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚å‘€ï¼Œæˆ‘ä»¬ç‚¹å‡»ä¸€ä¸‹è¿›å…¥åº“çš„é¡µé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190819172308-nxocy5.png" alt="" /></p>

<p>å¯ä»¥çœ‹åˆ°æœ‰äº”ä¸ªæ ‡ç­¾é¡µï¼Œè¿™é‡Œç®€å•è¯´æ˜ä¸€ä¸‹ï¼š</p>

<ul>
<li><strong>Examples</strong>ï¼šå±•ç¤ºåº“ä¸­åŒ…å«çš„ä¾‹ç¨‹ï¼Œæœ‰çš„åŒ…å«å¤šä¸ªï¼Œå¯ä»¥ç‚¹å‡»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©ä¸åŒçš„ä¾‹ç¨‹æŸ¥çœ‹ä»£ç </li>
<li><strong>Installtion</strong>ï¼šå±•ç¤ºå¦‚ä½•åœ¨é¡¹ç›®å·¥ç¨‹ä¸­ä½¿ç”¨åº“ï¼Œåœ¨ <code>platformio.ini</code> æ–‡ä»¶ä¸­å¦‚ä½•é…ç½®</li>
<li><strong>Headers</strong>ï¼šåº“ä¸­åŒ…å«çš„å¤´æ–‡ä»¶</li>
<li><strong>Manifest</strong>ï¼šè¿™ä¸ªä¸€èˆ¬ä¸ç”¨å…³å¿ƒï¼Œå±•ç¤ºçš„æ˜¯è¿™ä¸ªåº“åœ¨ PIO ä»“åº“ä¸­çš„é…ç½®ä¿¡æ¯</li>
<li><strong>Changelog</strong>ï¼šæ›´æ–°æ—¥å¿—</li>
</ul>

<h3 id="åº“çš„å®‰è£…">åº“çš„å®‰è£…</h3>

<p>å®‰è£…åº“ä¸€èˆ¬æ˜¯ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯å…¨å±€å®‰è£…ï¼Œå…¶ä»–é¡¹ç›®å·¥ç¨‹ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ï¼Œå¦ä¸€ç§æ˜¯åªå®‰è£…åˆ°æŒ‡å®šé¡¹ç›®å·¥ç¨‹ä¸­ã€‚</p>

<p>ç‚¹å‡» <strong>Install</strong> ä¼šé»˜è®¤å…¨å±€å®‰è£…ï¼Œè¿™æ ·å…¶å®ƒçš„å·¥ç¨‹é¡¹ç›®ä¹Ÿèƒ½ä½¿ç”¨è€Œä¸ç”¨é‡å¤å®‰è£…ã€‚</p>

<p>å¦å¤–ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡» Install æŒ‰é’®å³è¾¹çš„ <code>...</code> æŒ‰é’®å®ŒæˆæŒ‡å®šä½ç½®çš„å®‰è£…ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190819200737-zYvJxn.png" alt="" /></p>

<p>è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨å…¨å±€å®‰è£…ï¼Œç‚¹å‡» <code>Install</code> æŒ‰é’®å³å¯ï¼Œåº“å®‰è£…å®Œæˆåä¼šæœ‰å¼¹çª—æç¤ºã€‚</p>

<h3 id="åº“çš„å¸è½½">åº“çš„å¸è½½</h3>

<p>æœ‰æ—¶æœ‰äº›åº“å¯èƒ½ä¸å†ä¼šä½¿ç”¨ï¼Œå¦‚æœæƒ³å¸è½½æ€ä¹ˆæ“ä½œï¼Ÿæ‰¾åˆ° Librairies çš„ Installed æ ‡ç­¾é¡µï¼Œå°±ä¼šçœ‹åˆ°æˆ‘ä»¬åˆšæ‰å®‰è£…çš„ <strong>Ticker</strong> åº“ï¼Œå¯ä»¥çœ‹åˆ° <code>Uninstall</code> æŒ‰é’®ï¼Œç‚¹å‡»å®ƒæŒ‰ç…§æç¤ºæ“ä½œå³å¯å®Œæˆå¸è½½ï¼Œç‚¹å‡» <code>Reveal</code> æŒ‰é’®ä¼šæ‰“å¼€å®‰è£…åº“çš„ç›®å½•ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190819201650-LtB1dT.png" alt="" /></p>

<h3 id="åº“çš„æ›´æ–°">åº“çš„æ›´æ–°</h3>

<p>PIO Home å¯åŠ¨åä¼šæ£€æµ‹åº“çš„æ›´æ–°ï¼Œå¦‚æœåº“æœ‰æ–°çš„ç‰ˆæœ¬å‘å¸ƒï¼Œå°±ä¼šåœ¨ Libraries - Updates é¡µé¢å‡ºç°å¾…æ›´æ–°çš„åº“ï¼Œç‚¹å‡» <code>Update</code> æŒ‰é’®å³å¯å®ç°æ›´æ–°ï¼</p>

<h2 id="åº“çš„ä½¿ç”¨">åº“çš„ä½¿ç”¨</h2>

<h3 id="é…ç½®">é…ç½®</h3>

<p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ–¹å¼ä¼šåœ¨åº“çš„é¡µé¢çš„ <code>Installtion</code> æ ‡ç­¾é¡µå±•ç¤ºï¼Œæ¯”å¦‚ <strong>Ticker</strong> åº“çš„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190819202421-yNf4mA.png" alt="" /></p>

<p>éœ€è¦åœ¨ <code>paltformio.ini</code> æ–‡ä»¶ä¸­æ·»åŠ  <code>lib_deps</code> é¡¹ï¼ŒæŒ‡å®šåº“å³å¯ï¼Œä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">lib_deps</span> <span class="o">=</span>
<span class="c1"># ä½¿ç”¨åº“çš„åç§°</span>
    <span class="na">Ticker</span>

<span class="c1"># ... æˆ–è€…ä½¿ç”¨åº“çš„ ID</span>
    <span class="na">1586</span>

<span class="c1"># ... æˆ–è€…ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„åº“</span>
    <span class="na">Ticker@3.1.5</span>
    
<span class="c1"># Semantic Versioning Rules</span>
<span class="c1"># http://docs.platformio.org/page/userguide/lib/cmd_install.html#description</span>
<span class="c1"># Ticker@^3.1.5</span>
<span class="c1"># Ticker@~3.1.5</span>
<span class="c1"># Ticker@&gt;=3.1.5</span></code></pre></div>
<p>æˆ‘ä»¬è¿™é‡Œé‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œæœ€ç»ˆ <strong>blink</strong> é¡¹ç›®çš„ <code>platformio.ini</code> å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="p">[</span><span class="nl">env</span><span class="p">:</span><span class="n">leonardo</span><span class="p">]</span>
<span class="n">platform</span> <span class="o">=</span> <span class="n">atmelavr</span>
<span class="n">board</span> <span class="o">=</span> <span class="n">leonardo</span>
<span class="n">framework</span> <span class="o">=</span> <span class="n">arduino</span>
<span class="n">lib_deps</span> <span class="o">=</span>
  <span class="cp"># Using a library name
</span><span class="cp"></span>  <span class="n">Ticker</span></code></pre></div>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªé¡¹ç›®å·¥ç¨‹ææœ‰å¯èƒ½ä¼šä½¿ç”¨å¤šä¸ªåº“ï¼Œè¿™æ˜¯æœ‰ä¸¤ç§è¯­æ³•é…ç½®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="c1">; one line definition (comma + space)</span>
<span class="k">[env:myenv]</span>
<span class="na">lib_deps</span> <span class="o">=</span> <span class="s">LIBRARY_1, LIBRARY_2, LIBRARY_N</span>

<span class="c1">; multi-line definition</span>
<span class="k">[env:myenv2]</span>
<span class="na">lib_deps</span> <span class="o">=</span><span class="s">
</span><span class="s">  LIBRARY_1
</span><span class="s">  LIBRARY_2
</span><span class="s">  LIBRARY_N</span></code></pre></div>
<h3 id="ä½¿ç”¨åº“">ä½¿ç”¨åº“</h3>

<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å·¥ç¨‹ä¸­æºä»£ç ä¸­åŒ…å«åº“çš„å¤´æ–‡ä»¶ç„¶åä½¿ç”¨åº“äº†ï¼Œå› ä¸ºæ¯•ç«Ÿæ˜¯åˆ«äººçš„å†™çš„åº“ï¼Œæ‰€ä»¥åº”è¯¥å…ˆçœ‹ä¸€ä¸‹ä¾‹ç¨‹çš„ç”¨æ³•ï¼Œç„¶åæ ¹æ®è‡ªå·±çš„éœ€æ±‚å®ç°è‡ªå·±éœ€è¦çš„åŠŸèƒ½ã€‚</p>

<p>æ¯”å¦‚è¿˜æ˜¯å®ç° 1s åˆ‡æ¢ä¸€æ¬¡ LED çŠ¶æ€å®ç°ç­‰çš„é—ªçƒï¼Œåªéœ€è¦ç¼–å†™ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œå®šä¹‰æ–°çš„ Ticker æŒ‡å®šå¤„ç†å‡½æ•°å’Œæ—¶é—´å‚æ•°å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;Ticker.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">blink</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">static</span> <span class="kt">uint32_t</span> <span class="n">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">state</span> <span class="o">^=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">state</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">Ticker</span> <span class="nf">timer</span><span class="p">(</span><span class="n">blink</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MILLIS</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">timer</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">timer</span><span class="p">.</span><span class="n">update</span><span class="p">();</span>
  <span class="c1">//æ”¾ç½®å…¶å®ƒå¤„ç†æ“ä½œ
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div>
<p>ç¼–è¯‘ä¸Šä¼ ç¨‹åºï¼Œé¡ºåˆ©çš„è¯åŒæ ·å®ç°äº† LED çš„ç§’é—ªçƒã€‚</p>

<h2 id="ç»“è¯­">ç»“è¯­</h2>

<p>æœ¬æ–‡åªæ˜¯ç®€å•çš„è¯´äº†åº“ç®¡ç†å’Œä½¿ç”¨çš„åŸºæœ¬å¸¸ç”¨æ“ä½œï¼Œå¯ä»¥æ»¡è¶³åŸºæœ¬ä½¿ç”¨éœ€æ±‚äº†ï¼Œå¦‚æœéœ€è¦äº†è§£æ›´å¤šå†…å®¹ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://docs.platformio.org/en/latest/librarymanager/index.html" target="_blank">Library Manager</a>ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>PlatformIO IDE(VSCode) åŸºæœ¬ä½¿ç”¨ - æ–°å»ºé¡¹ç›®</title>
			<link>https://www.smslit.top/2019/08/18/platformio-newproject/</link>
			<pubDate>Sun, 18 Aug 2019 17:02:01 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/08/18/platformio-newproject/</guid>
			<description>PlatformIO IDE (VSCode) å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä½¿ç”¨ PlatforIOï¼Œä¸€ä¸ª MCU é¡¹ç›®çš„å¼€å§‹é‚£å°±æ˜¯æ–°å»ºï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹å¦‚æœä½¿ç”¨ PlatformIO IDE æ–°å»ºä¸€ä¸ª MCU çš„é¡¹ç›®ã€‚ åŸºæœ¬æ¦‚å¿µ åœ¨ä½¿ç”¨ PlatformIO çš„è¿‡</description>
			<content type="html"><![CDATA[

<p>PlatformIO IDE (VSCode) å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä½¿ç”¨ PlatforIOï¼Œä¸€ä¸ª MCU é¡¹ç›®çš„å¼€å§‹é‚£å°±æ˜¯æ–°å»ºï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹å¦‚æœä½¿ç”¨ PlatformIO IDE æ–°å»ºä¸€ä¸ª MCU çš„é¡¹ç›®ã€‚</p>

<h2 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h2>

<p>åœ¨ä½¿ç”¨ PlatformIO çš„è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€äº›è¯ï¼Œæ¯”å¦‚ Platform ã€ Framworks ä»¥åŠ Boardsï¼Œåœ¨æ–°å»ºé¡¹ç›®ä¹‹å‰æœ‰å¿…è¦å…ˆè¯´æ˜ä¸€ä¸‹ï¼Œè¿™äº›å…·ä½“éƒ½ä»£è¡¨äº†ä»€ä¹ˆï¼</p>

<h3 id="platform">Platform</h3>

<p>ç›´è¯‘çš„è¯å°±æ˜¯ <strong>å¹³å°</strong>ï¼Œå…·ä½“å°±æ˜¯æŒ‡çš„èŠ¯ç‰‡å¹³å°ï¼Œå†è¯¦ç»†ä¸€ç‚¹é‚£å°±æ˜¯å„ä¸ªå…¬å¸å…·ä½“çš„ç³»åˆ—èŠ¯ç‰‡çš„å¼€å‘å¹³å°äº†ã€‚ç›®å‰ä¸ºæ­¢ PIO<sup class="footnote-ref" id="fnref:PIO-PlatformIO"><a href="#fn:PIO-PlatformIO">1</a></sup> é’ˆå¯¹æ”¯æŒçš„å¹³å°éƒ½æœ‰ä»¥ä¸‹åŠŸèƒ½æ”¯æ’‘ï¼š</p>

<ul>
<li>æ”¯æŒæŒ‡å®šæ¡†æ¶çš„åŸºäºè„šæœ¬çš„ç¼–è¯‘æ„å»ºç³»ç»Ÿ</li>
<li>é’ˆå¯¹å„å…¬å¸å¸¸è§„å¼€å‘æ¿çš„é¢„é…ç½®</li>
<li>æä¾›å¤šæ¶æ„çš„æ„å»ºå·¥å…·åŠç›¸å…³å·¥å…·é“¾çš„æ”¯æŒ</li>
</ul>

<p>PIO ç›®å‰æ”¯æŒçš„å¹³å°åˆ†ä¸ºåµŒå…¥å¼å’Œæ¡Œé¢ä¸¤å¤§ç±»ã€‚</p>

<ul>
<li><p>åµŒå…¥å¼å¹³å°</p>

<ul>
<li><a href="https://docs.platformio.org/en/latest/platforms/aceinna_imu.html" target="_blank">Aceinna IMU</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/atmelavr.html" target="_blank">Atmel AVR</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/atmelsam.html" target="_blank">Atmel SAM</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/espressif32.html" target="_blank">Espressif 32</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/espressif8266.html" target="_blank">Espressif 8266</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/freescalekinetis.html" target="_blank">Freescale Kinetis</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/infineonxmc.html" target="_blank">Infineon XMC</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/intel_arc32.html" target="_blank">Intel ARC32</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/intel_mcs51.html" target="_blank">Intel MCS-51 (8051)</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/kendryte210.html" target="_blank">Kendryte K210</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/lattice_ice40.html" target="_blank">Lattice iCE40</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/maxim32.html" target="_blank">Maxim 32</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/microchippic32.html" target="_blank">Microchip PIC32</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/nordicnrf51.html" target="_blank">Nordic nRF51</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/nordicnrf52.html" target="_blank">Nordic nRF52</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/nxplpc.html" target="_blank">NXP LPC</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/riscv_gap.html" target="_blank">RISC-V GAP</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/samsung_artik.html" target="_blank">Samsung ARTIK</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/sifive.html" target="_blank">SiFive</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/siliconlabsefm32.html" target="_blank">Silicon Labs EFM32</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/ststm32.html" target="_blank">ST STM32</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/ststm8.html" target="_blank">ST STM8</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/teensy.html" target="_blank">Teensy</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/timsp430.html" target="_blank">TI MSP430</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/titiva.html" target="_blank">TI TIVA</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/wiznet7500.html" target="_blank">WIZNet W7500</a></li>
</ul></li>

<li><p>æ¡Œé¢å¹³å°</p>

<ul>
<li><a href="https://docs.platformio.org/en/latest/platforms/native.html" target="_blank">Native</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/linux_arm.html" target="_blank">Linux ARM</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/linux_i686.html" target="_blank">Linux i686</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/linux_x86_64.html" target="_blank">Linux x86_64</a></li>
<li><a href="https://docs.platformio.org/en/latest/platforms/windows_x86.html" target="_blank">Windows x86</a></li>
</ul></li>
</ul>

<p>ä¸Šé¢ä¹Ÿæœ‰å‰é¢æ–‡ç« ä¸­ä½¿ç”¨åˆ°çš„ ST STM32ï¼ŒAtmel AVR ä¸€èˆ¬æŒ‡çš„å°±æ˜¯ Arduino ç³»åˆ—å¼€å‘æ¿ä½¿ç”¨çš„èŠ¯ç‰‡ï¼Œè¯´åˆ° Arduino ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç”Ÿæ€ï¼Œæä¾›å¼€æºçš„ç¡¬ä»¶å¼€å‘æ¿çš„è®¾è®¡ä»¥åŠ Arduino ç»Ÿä¸€çš„è½¯ä»¶å¼€å‘åŒ…å°±æ˜¯æ‰€è°“çš„ Frameworksã€‚</p>

<h3 id="frameworks">Frameworks</h3>

<p>ä¸Šé¢å·²ç»æåˆ° Frameworks å…¶å®å°±æ˜¯ç±»ä¼¼äº SDK çš„ä¸€ä¸ªä¸œè¥¿ï¼Œå…¨ä¸–ç•Œæœ€æœ‰åçš„ Arduino æœ‰è‡ªå®¶çš„ä¸€å¥— SDKï¼Œé‚£å°±æ˜¯ Arduinoï¼Œæ¡†æ¶åŸºæœ¬ç‰¹å¾å°±æ˜¯æä¾›ä¸€æ•´å¥—ä¸€è‡´çš„ API çš„é›†åˆï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå®˜æ–¹æˆ–ç¬¬ä¸‰æ–¹æä¾›çš„è½¯ä»¶åº“ã€‚</p>

<p>å› ä¸º Arduino æå…·å½±å“åŠ›ï¼Œæ‰€ä»¥å¾ˆå¤šèŠ¯ç‰‡å¹³å°ä¹Ÿéƒ½æœ‰äº†è‡ªå·±çš„ Arduino æ¡†æ¶ï¼Œç°åœ¨ Arduino æ¡†æ¶å¹³å°æ”¯æŒçš„å¹³å°æœ‰å¾ˆå¤šï¼šAtmel AVRã€Atmel SAMã€Espressif 32ã€Espressif 8266ã€Infineon XMCã€Intel ARC32ã€Kendryte K210ã€Microchip PIC32ã€Nordic nRF51ã€Nordic nRF52ã€T STM32ã€ST STM8 ã€Teensyã€TI MSP430  ã€TI TIVA <sup class="footnote-ref" id="fnref:Arduino-https-do"><a href="#fn:Arduino-https-do">2</a></sup>ã€‚</p>

<p>åè¿‡æ¥è®²ï¼Œä¸€ä¸ªå¹³å°æœ‰å¯èƒ½æ”¯æŒå¤šä¸ªä¸åŒå¼€å‘æ¡†æ¶ï¼Œæ¯”å¦‚ <strong>ST STM32</strong> æ”¯æŒçš„å¼€å‘æ¡†æ¶æœ‰ï¼šArduinoã€CMSISã€libOpenCM3ã€mbedã€SPLã€STM32Cube<sup class="footnote-ref" id="fnref:stm32-https-docs"><a href="#fn:stm32-https-docs">3</a></sup>ã€‚</p>

<p>PIO æ”¯æŒçš„æ¡†æ¶ä¹Ÿæ˜¯æœ‰å¾ˆå¤šï¼Œæ€»æœ‰é€‚åˆä½ çš„ï¼š</p>

<ul>
<li>Arduino</li>
<li>ARTIK SDK</li>
<li>CMSIS</li>
<li>ESP8266 Non-OS SDK</li>
<li>ESP8266 RTOS SDK</li>
<li>ESP-IDF</li>
<li>Freedom E SDK</li>
<li>Kendryte FreeRTOS SDK</li>
<li>Kendryte Standalone SDK</li>
<li>libOpenCM3</li>
<li>mbed</li>
<li>PULP OS</li>
<li>Pumbaa</li>
<li>Simba</li>
<li>SPL</li>
<li>STM32Cube</li>
<li>Tizen RT</li>
<li>WiringPi</li>
</ul>

<p>è¯¦è§ï¼š<a href="https://docs.platformio.org/en/latest/frameworks/index.html" target="_blank">https://docs.platformio.org/en/latest/frameworks/index.html</a></p>

<h3 id="boards">Boards</h3>

<p>PIO æ”¯æŒç»å¤§éƒ¨åˆ†æµè¡Œçš„å¼€å‘æ¿ï¼Œæ¯”å¦‚ Arduino çš„å…¨ç³»å¼€å‘æ¿ã€STM32 çš„ Nucleo å’Œ Discovery ç³»åˆ—è¯„ä¼°æ¿ã€‚æœ‰å¤ªå¤šå¤ªå¤šäº†ï¼Œè¿™é‡Œå°±æ²¡å¿…è¦ä¸€ä¸€ç½—åˆ—äº†ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹é¢çš„é“¾æ¥äº†è§£æ›´å¤šå…³äºå¼€å‘æ¿çš„æ”¯æŒåˆ—è¡¨ï¼š</p>

<p><a href="https://docs.platformio.org/en/latest/boards/index.html" target="_blank">https://docs.platformio.org/en/latest/boards/index.html</a></p>

<p>PIO é’ˆå¯¹æ”¯æŒçš„å¼€å‘æ¿éƒ½æä¾›å®Œæ•´çš„é¡¹ç›®ç”Ÿæˆè„šæœ¬ï¼Œæ–°å»ºé¡¹ç›®ä»æœªå¦‚æ­¤å¿«æ·å’Œç®€å•ï¼</p>

<h2 id="æ–°å»ºé¡¹ç›®">æ–°å»ºé¡¹ç›®</h2>

<p>è¿™é‡Œæˆ‘ä»¬ä»¥æ–°å»ºä¸€ä¸ª <strong>Arduino Leonardo</strong> çš„é¡¹ç›®ä¸ºä¾‹ã€‚</p>

<ul>
<li><p>æ‰“å¼€ PIO Homeï¼šæ‰“å¼€æ–°çš„ VSCode çš„çª—å£ï¼Œç‚¹å‡»å·¦ä¸‹è§’çŠ¶æ€æ çš„ç¬¬ä¸‰ä¸ªå°æˆ¿å­æŒ‰é’®ï¼Œå°±èƒ½æ‰“å¼€ PIO Home é¡µé¢äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190818190630-mBE3x7.jpg" alt="" /></p></li>

<li><p>ç‚¹å‡»é¡¹ç›®æ“ä½œæŒ‰é’®çš„ <strong>+ New Project</strong>ï¼Œåœ¨å¼¹çª—ä¸­åˆ†åˆ«å¡«å…¥æˆ–é€‰æ‹© Nameã€Boardã€Framework ç‚¹å‡» Finishï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190818192413-24rRf1.jpg" alt="" /></p></li>

<li><p>ç¨ä½œç­‰å¾…ï¼ŒPIO ä¼šè‡ªåŠ¨æ ¹æ®é€‰æ‹©çš„ Board å’Œ Framework é…ç½®å·¥ç¨‹å¹¶ä¸”ä¸‹è½½éœ€è¦ç”¨åˆ°çš„ç¼–è¯‘å·¥å…·ï¼Œéœ€è¦çš„ç¼–è¯‘ä¾èµ–ä»€ä¹ˆçš„ PIO é€šé€šå¸®æˆ‘ä»¬æå®šï¼Œä¸€æ®µæ—¶é—´è¿‡åé¡¹ç›®å·¥ç¨‹å°±æ–°å»ºå®Œæˆäº†ï¼Œæ‰“å¼€ <code>src</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>main.cpp</code> å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190818193026-lz9O9C.png" alt="" /></p></li>
</ul>

<h2 id="é¡¹ç›®æ–‡ä»¶ç»“æ„">é¡¹ç›®æ–‡ä»¶ç»“æ„</h2>

<p>é¡¹ç›®æ–‡ä»¶ç»“æ„è¦äº†è§£ä¸€ä¸‹ï¼Œæ–¹ä¾¿åæœŸè‡ªå·±æ‰‹åŠ¨ç®¡ç†é¡¹ç›®ã€‚</p>

<ul>
<li><strong>.pio</strong>ï¼Œå­˜æ”¾å·¥ç¨‹ç¼–è¯‘äº§ç”Ÿçš„æ–‡ä»¶</li>
<li><strong>.vscode</strong>, å­˜æ”¾é’ˆå¯¹å·¥ç¨‹å®šåˆ¶åŒ–çš„ vscode é…ç½®æ–‡ä»¶</li>
<li><strong>include</strong>ï¼Œå­˜æ”¾ç»Ÿä¸€ç®¡ç†çš„ h å¤´æ–‡ä»¶</li>
<li><strong>lib</strong>ï¼Œå­˜æ”¾è‡ªå·±ç¼–å†™çš„åº“æ–‡ä»¶</li>
<li><strong>src</strong>ï¼Œå­˜æ”¾å·¥ç¨‹é¡¹ç›®çš„ C/C++ æºæ–‡ä»¶</li>
<li><strong>test</strong>ï¼Œå­˜æ”¾å·¥ç¨‹é¡¹ç›®çš„æµ‹è¯•æ–‡ä»¶ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°</li>
<li><strong>.gitignore</strong>ï¼Œgit ä»“åº“çš„å¿½ç•¥æ–‡ä»¶ï¼Œæ–¹ä¾¿ git è¿›è¡Œå·¥ç¨‹é¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶</li>
<li><strong>travis.yml</strong>ï¼ŒæŒç»­é›†æˆçš„é…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°</li>
<li><strong>platformio.ini</strong>ï¼Œé¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªä¼šç»å¸¸ç”¨åˆ°ï¼Œæ‰€ä»¥å¾—äº†è§£å…¶ä¸­å¯ç”¨çš„é…ç½®é¡¹<sup class="footnote-ref" id="fnref:platformio-ini-P"><a href="#fn:platformio-ini-P">4</a></sup></li>
</ul>

<h2 id="ç¼–è¯‘å’Œä¸Šä¼ ">ç¼–è¯‘å’Œä¸Šä¼ </h2>

<p>æ–°å»ºäº†é¡¹ç›®å·¥ç¨‹ä¹‹åï¼Œå°±æ˜¯è¿›è¡Œå¼€å‘äº†ï¼Œå¿…ç„¶è¦ç”¨åˆ°ç¼–è¯‘ä»£ç ï¼Œè¦å°†ç¼–è¯‘ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸Šä¼ åˆ°å¼€å‘æ¿çš„èŠ¯ç‰‡ä¸­ã€‚</p>

<p>ä¸ºäº†çœ‹åˆ°æ•ˆæœï¼Œæˆ‘ä»¬ç¼–å†™ä¸€æ®µè®©æ¿è½½ LED é—ªåŠ¨çš„å®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// put your setup code here, to run once:
</span><span class="c1"></span>  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// put your main code here, to run repeatedly:
</span><span class="c1"></span>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>åœ¨è¿™ä¹‹å‰æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ PIO çš„å·¥å…·æ æŒ‰é’®ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190818195923-OYxNoh.jpg" alt="" /></p>

<p><strong>Tip:</strong></p>

<p>å¦‚æœä½¿ç”¨ Arduino æ¡†æ¶ä»£ç ä¸­ï¼Œä¸€å®šè¦åŒ…å«å¤´æ–‡ä»¶ <code>Arduino.h</code>ã€‚</p>

<h3 id="ç¼–è¯‘é¡¹ç›®å·¥ç¨‹">ç¼–è¯‘é¡¹ç›®å·¥ç¨‹</h3>

<p>å°†ä¸Šé¢çš„ä»£ç å½•å…¥ <code>src</code> ç›®å½•ä¸‹çš„ <code>main.cpp</code> æ–‡ä»¶ä¸­ï¼Œçœ‹æ–‡ä»¶åå°±çŸ¥é“ä½¿ç”¨çš„æ˜¯ c++ ç¼–ç¨‹è¯­è¨€äº†ã€‚å¤šç§æ–¹å¼å¯ä»¥è§¦å‘ç¼–è¯‘ï¼Œæ¯”å¦‚ç¬”è€…ç»å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼ï¼š</p>

<ul>
<li>ç‚¹å‡»ä¸Šé¢æˆªå›¾åº•éƒ¨ä¸­å·¥å…·æ çš„ç¬¬äºŒä¸ªå¯¹å·å›¾æ ‡</li>
<li>æŒ‰ä¸‹ç»„åˆé”® <code>CTRL</code> + <code>ALT</code> + <code>B</code></li>
</ul>

<p>è¿˜æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§¦å‘ç¼–è¯‘ä»»åŠ¡ï¼š</p>

<ul>
<li>æŒ‰ä¸‹ç»„åˆé”® <code>CTRL</code> + <code>SHIFT</code> + <code>P</code> (macOS ä¸‹æ˜¯ <code>COMMAND</code> + <code>SHIFT</code> + <code>P</code>)ï¼Œç„¶åè¾“å…¥å…³é”®å­— <strong>platformio</strong>ï¼Œé€‰æ‹© <strong>Build</strong></li>
<li>ç‚¹å‡»çª—å£å·¦è¾¹æ çš„èš‚èšå¤´çš„å›¾æ ‡ä¼šæ‰“å¼€ PlatformIO çš„å·¥å…·æ ï¼Œç‚¹å‡»å…¶ä¸­çš„ <strong>Build</strong></li>
</ul>

<p>é¡ºåˆ©çš„è¯ï¼Œè§¦å‘äº†ç¼–è¯‘ï¼Œå¾ˆå¿«å°±ä¼šåœ¨ç»ˆç«¯çª—å£æç¤ºç¼–è¯‘å®Œæˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">&gt; Executing task: platformio run &lt;

Processing leonardo <span class="o">(</span>platform: atmelavr<span class="p">;</span> board: leonardo<span class="p">;</span> framework: arduino<span class="o">)</span>
------------------------------------------------------------------------------------
Verbose mode can be enabled via <span class="sb">`</span>-v, --verbose<span class="sb">`</span> option
CONFIGURATION: https://docs.platformio.org/page/boards/atmelavr/leonardo.html
PLATFORM: Atmel AVR <span class="m">1</span>.15.0 &gt; Arduino Leonardo
HARDWARE: ATMEGA32U4 16MHz, <span class="m">2</span>.50KB RAM, 28KB Flash
PACKAGES: toolchain-atmelavr <span class="m">1</span>.50400.190710 <span class="o">(</span><span class="m">5</span>.4.0<span class="o">)</span>, framework-arduinoavr <span class="m">4</span>.1.1
LDF: Library Dependency Finder -&gt; http://bit.ly/configure-pio-ldf
LDF Modes: Finder ~ chain, Compatibility ~ soft
Found <span class="m">7</span> compatible libraries
Scanning dependencies...
No dependencies
Checking size .pio/build/leonardo/firmware.elf
Memory Usage -&gt; http://bit.ly/pio-memory-usage
DATA:    <span class="o">[=</span>         <span class="o">]</span>   <span class="m">5</span>.8% <span class="o">(</span>used <span class="m">149</span> bytes from <span class="m">2560</span> bytes<span class="o">)</span>
PROGRAM: <span class="o">[=</span>         <span class="o">]</span>  <span class="m">14</span>.4% <span class="o">(</span>used <span class="m">4130</span> bytes from <span class="m">28672</span> bytes<span class="o">)</span>
<span class="o">============================</span> <span class="o">[</span>SUCCESS<span class="o">]</span> Took <span class="m">0</span>.66 <span class="nv">seconds</span> <span class="o">============================</span></code></pre></div>
<h3 id="ä¸Šä¼ ">ä¸Šä¼ </h3>

<p>å…ˆæŠŠæ‰‹å¤´çš„ Arduino Leonardo å¼€å‘æ¿ä¸ç”µè„‘è¿æ¥ï¼Œç›´æ¥è§¦å‘ä¸Šä¼ ä»»åŠ¡å³å¯ï¼Œç”šè‡³ä¸ç”¨è‡ªå·±å»é€‰æ‹©æ¥å£ï¼ŒPlatformIO ä¼šè‡ªåŠ¨æŸ¥æ‰¾ä¸ç”µè„‘è¿æ¥çš„ç«¯å£è¿›è¡Œåˆ¤æ–­ç„¶åä¸Šä¼ ç¨‹åºï¼Œç¬”è€…ç»å¸¸ä¼šç”¨åˆ°çš„è§¦å‘æ–¹å¼ï¼š</p>

<ul>
<li>ç»„åˆé”® <code>CTRL</code> + <code>ALT</code> + <code>U</code></li>
<li>ç‚¹å‡»çª—å£çŠ¶æ€æ ä¸­ PIO å·¥å…·æ çš„ç¬¬ä¸‰ä¸ªæŒ‰é’®<strong>â†’</strong></li>
</ul>

<p>ç¬¬ä¸€æ¬¡ä¸Šä¼ ç¨‹åºçš„æ—¶å€™ï¼ŒPIO å¾€å¾€ä¼šå…ˆæ ¹æ®æ¿å­èŠ¯ç‰‡å¯¹åº”çš„å¹³å°é€‰æ‹©åˆé€‚çš„ä¸Šä¼ å·¥å…·åŒ…ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡ä¸Šä¼ å¯èƒ½éœ€è¦ç­‰ä¸€ä¼šå„¿ï¼Œé¡ºåˆ©çš„è¯ä¹Ÿä¼šåœ¨ç»ˆç«¯çª—å£çœ‹åˆ° <strong>Sucess</strong> çš„æ¶ˆæ¯ï¼ŒåŒæ—¶ä¼šçœ‹åˆ° Leonardo æ¿è½½ LED å¼€å§‹é—ªçƒï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20190818232501-Z84ehL.mp4" controls="controls" width="100%">Blink</video>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>PIO è®©æ–°å»ºèŠ¯ç‰‡å¼€å‘çš„é¡¹ç›®å·¥ç¨‹å˜å¾—å¼‚å¸¸ç®€å•ï¼Œåªéœ€å‡ å°æ­¥å°±å¯ä»¥å®Œæˆï¼Œå¦å¤–æœ¬æ–‡ä¹Ÿç®€å•è¯´äº†ä¸€ä¸‹ç¨‹åºçš„ç¼–è¯‘å’Œä¸Šä¼ æ“ä½œï¼ŒåŒæ ·ç®€å•æ–¹ä¾¿ï¼å¸Œæœ›æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©æƒ³è¦ä½“ä¼š PlatformIO é­…åŠ›çš„æœ‹å‹ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:PIO-PlatformIO">PIO æ˜¯ PlatformIO çš„ç®€ç§°ï¼Œåé¢ç³»åˆ—æ–‡ç« ä¼šç»å¸¸ä½¿ç”¨è¿™ä¸ªç®€ç§° <a class="footnote-return" href="#fnref:PIO-PlatformIO"><sup>[return]</sup></a></li>
<li id="fn:Arduino-https-do">æ›´å¤šå…³äº Arduino æ¡†æ¶çš„ä¿¡æ¯å‚è€ƒï¼š<a href="https://docs.platformio.org/en/latest/frameworks/arduino.html" target="_blank">https://docs.platformio.org/en/latest/frameworks/arduino.html</a> <a class="footnote-return" href="#fnref:Arduino-https-do"><sup>[return]</sup></a></li>
<li id="fn:stm32-https-docs">æ›´å¤šå…³äº stm32 å•ç‰‡æœºå¼€å‘å¹³å°çš„ä¿¡æ¯å‚è€ƒï¼š<a href="https://docs.platformio.org/en/latest/platforms/ststm32.html" target="_blank">https://docs.platformio.org/en/latest/platforms/ststm32.html</a> <a class="footnote-return" href="#fnref:stm32-https-docs"><sup>[return]</sup></a></li>
<li id="fn:platformio-ini-P">è¯¦è§ï¼š<a href="https://docs.platformio.org/en/latest/projectconf.html" target="_blank">â€œplatformio.iniâ€ (Project Configuration File)</a> <a class="footnote-return" href="#fnref:platformio-ini-P"><sup>[return]</sup></a></li>
</ol>
</div>
]]></content>
		</item>
		
		<item>
			<title>PlatformIO IDE(VScode) ä¸‹è°ƒè¯• STM32 å¹³å°ç¨‹åº</title>
			<link>https://www.smslit.top/2019/08/05/platformio-debug/</link>
			<pubDate>Mon, 05 Aug 2019 17:17:42 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/08/05/platformio-debug/</guid>
			<description>PlatformIO ç³»åˆ—æ–‡ç«  stm32å¼€å‘æ–°æ–¹å¼-platformio ä¸­æœ€åæåˆ°è¯´ PlatformIO é™åˆ¶äº†å…è´¹ç”¨æˆ·è°ƒè¯•ç¨‹åºçš„åŠŸèƒ½ï¼Œæœ€è¿‘å‘ç° PlatformIO å·²ç»å…è´¹å¼€å‘ç¨‹åºè°ƒè¯•åŠŸèƒ½ï¼Œæ‰€ä»¥ç°åœ¨</description>
			<content type="html"><![CDATA[

<p><strong>PlatformIO</strong> ç³»åˆ—æ–‡ç«  <a href="/2017/11/08/stm32InPIO-start/#è°ƒè¯•é…ç½®" target="_blank"><strong>stm32å¼€å‘æ–°æ–¹å¼-platformio</strong></a> ä¸­æœ€åæåˆ°è¯´ PlatformIO é™åˆ¶äº†å…è´¹ç”¨æˆ·è°ƒè¯•ç¨‹åºçš„åŠŸèƒ½ï¼Œæœ€è¿‘å‘ç° PlatformIO å·²ç»å…è´¹å¼€å‘ç¨‹åºè°ƒè¯•åŠŸèƒ½ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…å»ºæ”¯æŒæ›´å¥½çš„æ–¹å¼è°ƒè¯•æˆ‘ä»¬çš„ ST MCU çš„ç¨‹åºäº†ï¼Œé‚£ä»Šå¤©æˆ‘ä»¬å°±èŠä¸€ä¸‹è¿™ä¸€å—å†…å®¹ã€‚</p>

<p>å®˜æ–¹ç§°å…¶ä¸º PIO Unified Debuggerï¼Œå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ç»Ÿä¸€çš„è°ƒè¯•å™¨ï¼Œæ„æ€æ˜¯å‡¡æ˜¯ PIO æ”¯æŒçš„å¯è°ƒå¼çš„ MCU å¼€å‘å¹³å°å‡å¯ä»¥ä½¿ç”¨ç»Ÿä¸€åŠŸèƒ½çš„è°ƒè¯•å™¨ï¼ŒPIO è·¨å¹³å°çš„ç‰¹æ€§ä»ç„¶æ”¯æŒç¨‹åºè°ƒè¯•ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ windowsã€linuxå’Œ macOS ä¸‹å‡å¯ä»¥å¾—åˆ°ç›¸åŒçš„å¼€å‘ä½“éªŒã€‚</p>

<blockquote>
<p>You should have PIO Account to work with PIO Unified Debugger. A registration is FREE.</p>
</blockquote>

<p>å®˜æ–¹è¯´æ˜å…è´¹ä½¿ç”¨è¿™ä¸ªè°ƒè¯•åŠŸèƒ½éœ€è¦ç™»å½•ä¸€ä¸ª PIO è´¦æˆ·ï¼Œè¿™ä¸ªå¾ˆç®€å•å˜›ï¼Œæ³¨å†Œä¸€ä¸ªç„¶ååœ¨ VSCode çš„ PIO IDE ä¸­ç™»å½•å³å¯ï¼Œè¿™å¯èƒ½æ˜¯å”¯ä¸€çš„é™åˆ¶äº†ï¼</p>

<h2 id="åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</h2>

<p>å®˜æ–¹æ–‡æ¡£ä¸­æåˆ° VScode æ­å»ºçš„ PIO å¼€å‘ç¯å¢ƒå¯ä»¥æä¾›æœ€å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ç‰¹æ€§ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ï¼š</p>

<ul>
<li><strong>å±€éƒ¨ã€å…¨å±€å’Œé™æ€å˜é‡çš„æµè§ˆå™¨</strong> (Local, Global, and Static Variable Explorer)</li>
<li><strong>æ¡ä»¶æ–­ç‚¹</strong> (Conditional Breakpoints)</li>
<li><strong>è¡¨è¾¾å¼ç›‘æ§</strong> (Expressions and Watchpoints)</li>
<li><strong>é€šç”¨å¯„å­˜å™¨æ£€é˜…</strong> (Generic Registers)</li>
<li><strong>å¤–è®¾å¯„å­˜å™¨æ£€é˜…</strong> (Peripheral Registers)</li>
<li><strong>å†…å­˜æ•°æ®æ£€é˜…å™¨</strong> (Memory Viewer)</li>
<li><strong>æ±‡ç¼–æ£€é˜…</strong> (Disassembly)</li>
<li><strong>å¤šçº¿ç¨‹æ”¯æŒ</strong> (Multi-thread support)</li>
<li><strong>è°ƒè¯•ä¼šè¯çš„çƒ­é‡å¯å’Œæ¿€æ´»</strong> (A hot restart of an active debugging session)</li>
</ul>

<p>ä»¥ä¸‹ä¸º <strong>genericSTM32F103C8</strong> å¼€å‘æ¿ä½¿ç”¨ Arduino å¼€å‘æ¡†æ¶æ—¶è°ƒè¯•ç¨‹åºæ—¶çš„ç•Œé¢ï¼š</p>

<p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g5ukpd0n9wj31hc0u0q80.jpg" alt="" /></p>

<h2 id="å®è·µ">å®è·µ</h2>

<p>ä¸‹é¢æˆ‘ä»¬å°±ä»¥ <strong>genericSTM32F103C8</strong> å¼€å‘æ¿ä½¿ç”¨ Arduino å¼€å‘æ¡†æ¶ä¸ºä¾‹è®²è§£ä¸€ä¸‹ï¼Œè°ƒè¯•ç¨‹åºæ˜¯å¤šä¹ˆçš„ç®€å•ã€‚</p>

<h3 id="å‰ææ¡ä»¶">å‰ææ¡ä»¶</h3>

<h4 id="å¼€å‘ç¯å¢ƒ">å¼€å‘ç¯å¢ƒ</h4>

<ul>
<li>å·²ç»å®‰è£… vscode</li>
<li>vscode å·²ç»å®‰è£… PlatformIO IDE æ’ä»¶</li>
</ul>

<p>ä¸Šè¿°æ¡ä»¶æ»¡è¶³åï¼Œæ‰“å¼€ vscode æ–°çš„çª—å£ï¼Œä¼šå¦‚ä¸‹å›¾ä¸­æ‰€ç¤ºï¼Œå·¦è¾¹æ å¤šå‡º PlatformIO çš„logoï¼Œä»¥åŠæœ€ä¸‹è¾¹çŠ¶æ€æ å·¦è¾¹æœ‰ä¸ªå°æˆ¿å­çš„å›¾æ ‡ï¼š</p>

<p><img src="http://ww3.sinaimg.cn/large/006tNc79ly1g5ul9bsjubj31hc0u0go1.jpg" alt="" /></p>

<h4 id="ç¡¬ä»¶">ç¡¬ä»¶</h4>

<ul>
<li>ä¸€ä¸ª stm32f103c8t6 çš„æœ€å°ç³»ç»Ÿæ¿</li>
<li>stlink v2 è°ƒè¯•å™¨</li>
</ul>

<h4 id="pio-è´¦æˆ·">PIO è´¦æˆ·</h4>

<p>å¦‚æœæ²¡æœ‰ PIO è´¦æˆ·é‚£å°±å…ˆæ³¨å†Œä¸€ä¸ªï¼Œæ‰“å¼€ vscode ç‚¹å‡»ä¸Šå›¾ä¸­æåˆ°çš„å°æˆ¿å­çš„å›¾æ ‡å°±ä¼šæ‰“å¼€ PlatformIO çš„ç®¡ç†é¡µé¢ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ PIO Account å›¾æ ‡</p>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g5uliezdtej302i02c0hn.jpg" alt="" /></p>

<p>æ­¤æ—¶ä¼šè·³è½¬åˆ° PIO è´¦æˆ·ç™»å½•é¡µé¢ï¼Œç™»å½•æŒ‰é’®ä¸‹é¢æœ‰ä¸€ä¸ªé“¾æ¥ <strong>create a new one</strong> ï¼Œç‚¹å‡»ä¸€ä¸‹å³å¯è¿›å…¥æ³¨å†Œé¡µé¢ï¼š</p>

<p><img src="http://ww2.sinaimg.cn/large/006tNc79ly1g5ulnmveigj316i0u0wfn.jpg" alt="" /></p>

<p>è¾“å…¥è‡ªå·±çš„é‚®ç®±ï¼Œç‚¹å‡»æ³¨å†ŒæŒ‰é’®å³å¯å®Œæˆæ³¨å†Œï¼Œ PlatformIO ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯†ç å‘åˆ°ä½ çš„é‚®ç®±ï¼Œè¿”å›åˆ°ç™»å½•é¡µé¢è¾“å…¥é‚®ç®±å’Œå¯†ç ç™»å½•å³å¯ã€‚</p>

<h3 id="æ–°å»ºé¡¹ç›®">æ–°å»ºé¡¹ç›®</h3>

<p>è¿”å›åˆ° Home é¡µé¢ï¼Œç‚¹å‡» New Project æŒ‰é’®å¼€å§‹æ–°å»ºé¡¹ç›®ï¼Œè¿™é‡Œé¡¹ç›®åç§°å®šä¹‰ä¸º <strong>c8t6Blink</strong>ï¼Œä¸€ä¸ªæ§åˆ¶ LED é—ªçƒçš„ç®€å•ä¾‹å­ï¼ŒBoard å°±é€‰ <strong>STM32F103C8(20k RAM. 64k Flash)(Generic)</strong> ï¼Œç„¶åä½¿ç”¨ <strong>Arduino</strong> æ¡†æ¶ï¼Œæœ€åç‚¹å‡» Finish å³å¯åˆ›å»ºé¡¹ç›®ï¼š</p>

<p><img src="http://ww4.sinaimg.cn/large/006tNc79ly1g5um2h72phj316i0u0q4y.jpg" alt="" /></p>

<p>åˆæ¬¡åˆ›å»ºå¯èƒ½éœ€è¦æ—¶é—´ä¼šé•¿ä¸€ç‚¹ï¼Œä¼šä¸‹è½½ç¼–è¯‘éœ€è¦çš„ä¸€äº›ä¾èµ–å·¥å…·åŒ…ï¼Œä»¥åå†åˆ›å»ºç›¸åŒå¹³å°é¡¹ç›®çš„æ—¶å€™å°±å¾ˆå¿«äº†ã€‚</p>

<h3 id="ç¼–å†™ç¨‹åº">ç¼–å†™ç¨‹åº</h3>

<p>æ‰‹å¤´ä¸Šè¿™ä¸ªæœ€å°ç³»ç»Ÿæ¿ä¸Šçš„ LED æ˜¯ PB0 ç®¡è„šæ§åˆ¶çš„ï¼Œç¡¬ä»¶è®¾è®¡æ˜¯ä½ç”µå¹³ LED ç‚¹äº®ï¼Œæ‰€ä»¥ä¸€ä¸ªç®€å•çš„é—ªç¯ç¨‹åºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#define LED_PIN PB0
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// put your setup code here, to run once:
</span><span class="c1"></span>  <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// put your main code here, to run repeatedly:
</span><span class="c1"></span>  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">900</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>ç‚¹å‡»åº•éƒ¨çŠ¶æ€æ å·¦è¾¹çš„å°å¯¹å·å›¾æ ‡å°±å¯ä»¥è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆåç‚¹å‡»å³è¾¹å‘å³çš„ç®­å¤´å›¾æ ‡å°±å¯ä»¥çƒ§å†™ç¨‹åºï¼Œåˆæ¬¡ä¸Šä¼ çƒ§å†™éœ€è¦æ—¶é—´é•¿ä¸€äº›ï¼ŒPIO éœ€è¦ä¸‹è½½ä¸€äº›ç›¸å…³å·¥å…·åŒ…ï¼Œä»¥åå°±æ˜¯æ­£å¸¸ä¸Šä¼ ç¨‹åºäº†ï¼Œå®Œæˆåå°±èƒ½çœ‹åˆ°ç¨‹åºæ­£å¸¸è¿è¡Œï¼ŒLED é—ªäº†èµ·æ¥ã€‚</p>

<h3 id="è°ƒè¯•ç¨‹åº">è°ƒè¯•ç¨‹åº</h3>

<p>æŒ‰ä¸‹ <strong>F5</strong> æŒ‰é”®å³å¯è§¦å‘ç¨‹åºè°ƒè¯•ï¼Œæœ¬ä»¥ä¸ºä¼šå‡ºç°ç±»ä¼¼æœ¬ç¯‡æ–‡ç« ç¬¬ä¸€å¼ å›¾çš„æ ·å­ï¼Œç»“æœä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">&gt; Executing task: platformio debug &lt;

Error: Please specify <span class="sb">`</span>debug_port<span class="sb">`</span> <span class="k">for</span> environment
ç»ˆç«¯è¿›ç¨‹å·²ç»ˆæ­¢ï¼Œé€€å‡ºä»£ç : <span class="m">1</span>

ç»ˆç«¯å°†è¢«ä»»åŠ¡é‡ç”¨ï¼ŒæŒ‰ä»»æ„é”®å…³é—­ã€‚</code></pre></div>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ï¼ŸåŸå› å¾ˆç®€å•ï¼ŒPIO ä¸çŸ¥é“æˆ‘ä»¬æ˜¯ç”¨ä»€ä¹ˆè°ƒè¯•å·¥å…·è¿›è¡Œç¨‹åºè°ƒè¯•ï¼Œæ‰€ä»¥éœ€è¦åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ <code>platformio.ini</code> ä¸­æŒ‡æ˜ä¸€ä¸‹æˆ‘ä»¬ä½¿ç”¨ stlink è¿›è¡Œè°ƒè¯•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[env:genericSTM32F103C8]</span>
<span class="na">platform</span> <span class="o">=</span> <span class="s">ststm32</span>
<span class="na">board</span> <span class="o">=</span> <span class="s">genericSTM32F103C8</span>
<span class="na">framework</span> <span class="o">=</span> <span class="s">arduino</span>
<span class="na">debug_tool</span> <span class="o">=</span> <span class="s">stlink</span></code></pre></div>
<p>æ­¤æ—¶ç‚¹å‡» <strong>F5</strong> å°±å¯ä»¥æ­£å¸¸è§¦å‘è°ƒè¯•äº†ï¼Œå¯ä»¥çœ‹åˆ°å¯åŠ¨è°ƒè¯•ç¨‹åºé»˜è®¤åœåˆ° main ä¸­ç¬¬ä¸€å¥ã€‚</p>

<ul>
<li>é¡¶éƒ¨ä¼šçœ‹åˆ°è°ƒè¯•å·¥å…·æ ï¼Œå¯ä»¥å®ç°è°ƒè¯•ä¼šè¯çš„é‡å¯ã€ç¨‹åºå¯åœã€æ‰§è¡Œç­‰æ“ä½œæŒ‰é’®</li>
<li>å¯ä»¥åœ¨ä»£ç ç¼–è¾‘å™¨è¡Œå·å‰é¢å•å‡»æ·»åŠ æˆ–åˆ é™¤æ–­ç‚¹</li>
<li>å·¦ä¾§è°ƒè¯•å·¥å…·åŒºç‚¹å‡» <strong>PERIPHERALS</strong> æ ï¼Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¤–è®¾å¯„å­˜å™¨é…ç½®ï¼Œæ–¹ä¾¿éªŒè¯å¯„å­˜å™¨é…ç½®æ­£ç¡®ä¸å¦</li>
<li><strong>MEMORY</strong> æ å¯ä»¥æ·»åŠ å†…å­˜åœ°å€æ¥æŸ¥çœ‹æŒ‡å®šå­—èŠ‚çš„æ•°æ®ï¼Œæ–¹ä¾¿éªŒè¯æŒ‡é’ˆæ•°æ®</li>
<li><strong>ç›‘è§†</strong> ä¸­å¯ä»¥æ·»åŠ ç›‘æµ‹å˜é‡ï¼Œéšæ—¶æŸ¥çœ‹å˜é‡å˜åŒ–</li>
<li><strong>å˜é‡</strong> ä¸­å±•ç¤ºäº†æ‰€æœ‰å½“å‰æ–­ç‚¹å¯æ£€é˜…çš„å…¨å±€ã€å±€éƒ¨ä»¥åŠé™æ€å˜é‡</li>
<li><strong>è°ƒç”¨å †æ ˆ</strong> ä¸­å±•ç¤ºäº†å‡½æ•°çš„è°ƒç”¨å±‚æ¬¡</li>
<li>è°ƒè¯•æ§åˆ¶å°çš„æœ€ä¸‹æ–¹å¯ä»¥è¾“å…¥ <strong>adb</strong> å‘½ä»¤ï¼Œä»è€Œå®ç°æ›´å¼ºå¤§çš„è°ƒè¯•æ“ä½œ</li>
<li><strong>DISASSEMBLY</strong> æ å¯ä»¥æ§åˆ¶åˆ‡æ¢æ±‡ç¼–çª—å£æ–¹ä¾¿æŸ¥çœ‹æ±‡ç¼–ä»£ç </li>
</ul>

<p><img src="http://ww1.sinaimg.cn/large/006tNc79ly1g5ung40o74j31hc0u0wkt.jpg" alt="" /></p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ Windows å’Œ WindowController</title>
			<link>https://www.smslit.top/2019/04/01/macOS-dev-windows-and-windowcontroller/</link>
			<pubDate>Mon, 01 Apr 2019 08:20:10 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/04/01/macOS-dev-windows-and-windowcontroller/</guid>
			<description>æœ¬æ–‡å¸¦å¤§å®¶ä¸€èµ·ç®€å•å­¦ä¹ å¦‚ä½•å¼€å‘ä¸€ä¸ªåŸºäºæ–‡æ¡£çš„ Cocoa åº”ç”¨(document based Cocoa App)ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨æ¨¡æ€çª—å£(Modal Windows) ä»¥åŠ macOS Sierra æ”¯æŒçš„æ ‡ç­¾çª—å£</description>
			<content type="html"><![CDATA[

<p>æœ¬æ–‡å¸¦å¤§å®¶ä¸€èµ·ç®€å•å­¦ä¹ å¦‚ä½•å¼€å‘ä¸€ä¸ªåŸºäºæ–‡æ¡£çš„ Cocoa åº”ç”¨(document based Cocoa App)ï¼Œå¹¶å­¦ä¹ å¦‚ä½•ä½¿ç”¨æ¨¡æ€çª—å£(Modal Windows) ä»¥åŠ macOS Sierra æ”¯æŒçš„æ ‡ç­¾çª—å£(tabbed interface)ã€‚</p>

<h1 id="å¼€å‘å¹³å°">å¼€å‘å¹³å°</h1>

<ul>
<li>macOS 10.14.4</li>
<li>Swift 5</li>
<li>xcode 10.2</li>
</ul>

<h1 id="æ¦‚è¿°">æ¦‚è¿°</h1>

<p>æ‰€æœ‰ macOS ç¨‹åºè¦å‘ˆç°ç”¨æˆ·ç•Œé¢éƒ½æ˜¯ä»¥ Windows ä½œä¸ºå®¹å™¨çš„ï¼Œå½“ç„¶é™¤äº†çº¯ç²¹çš„å‘½ä»¤è¡Œå·¥å…·å’Œèœå•æ å°å·¥å…·ã€‚Windows å®šä¹‰äº† App åœ¨å±å¹•ä¸­çš„æ´»åŠ¨åŒºåŸŸï¼Œåœ¨è¿™ä¸ªåŒºåŸŸå†…å…è®¸ç”¨æˆ·è¿›è¡Œæ˜“äºç†è§£çš„å¤šä»»åŠ¡äº¤äº’æ“ä½œã€‚macOS åº”ç”¨æœ€ç»ˆå¯åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p>

<ul>
<li><p>å•çª—å£çš„å·¥å…·ï¼Œæ¯”å¦‚è®¡ç®—å™¨</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-single-Window.png" width="210px"/> 
</figure>
</li>

<li><p>å•çª—å£çš„ library-style åº”ç”¨ï¼Œæ¯”å¦‚ç…§ç‰‡åº”ç”¨(Photos.app)</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-library-Style1.png" width="560px"/> 
</figure>
</li>

<li><p>åŸºäºæ–‡æ¡£çš„å¤šçª—å£åº”ç”¨ï¼Œæ¯”å¦‚æ–‡æœ¬ç¼–è¾‘åº”ç”¨(TextEdit.app)</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-document-based1.png" width="640px"/> 
</figure>
</li>
</ul>

<p>ä¸ç®¡å±äºå“ªä¸€ç±»çš„åº”ç”¨ï¼Œå‡ ä¹æ¯ä¸€ä¸ª macOS åº”ç”¨éƒ½æ˜¯ä½¿ç”¨ MVC (Model-View-Controller) æ„å»ºçš„ï¼Œè¿™æ˜¯ macOS å¼€å‘ä¸­æ ¸å¿ƒçš„å¼€å‘æ¨¡å¼ã€‚</p>

<p>Cocoa åº”ç”¨ä¸­ï¼Œä¸€ä¸ªçª—å£æ˜¯ <code>NSWindow</code> ç±»çš„ä¸€ä¸ªå®ä¾‹(window å°±æ˜¯ view çš„å®¹å™¨)ï¼Œå…¶ä¸æ§åˆ¶å™¨ç´§å¯†é…åˆå·¥ä½œï¼Œè€Œæ§åˆ¶å™¨æ˜¯ <code>NSWIndowController</code> çš„ä¸€ä¸ªå®ä¾‹ã€‚åœ¨ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„åº”ç”¨ä¸­ä¼šå‘ç°é€šå¸¸çª—å£å’Œæ§åˆ¶å™¨æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œè€Œ MVC æ¨¡å¼ä¸­çš„ç¬¬ä¸‰ä¸ªç»„æˆéƒ¨åˆ†â€”â€”æ¨¡å‹(model)çš„ä½¿ç”¨ä¼šæ ¹æ®åº”ç”¨çš„ç±»å‹å’Œè®¾è®¡è€Œä¸åŒã€‚</p>

<p>åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ªæœ‰ç‚¹åƒ TextEdit çš„åº”ç”¨ï¼Œæ˜¯ document based çš„ï¼Œæˆ‘ç®¡å®ƒå« <strong>5kmEditor</strong>ï¼Œè¿™ä¸ªåå­—éšä¾¿ï¼Œåªè¦æ‚¨å–œæ¬¢å•¥éƒ½è¡Œï¼åœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå°†ä¼šæ¶‰åŠåˆ°ä»¥ä¸‹å†…å®¹ï¼š</p>

<ul>
<li>çª—å£ å’Œ çª—å£æ§åˆ¶å™¨</li>
<li>document æ¶æ„</li>
<li>NSTextView</li>
<li>æ¨¡æ€çª—å£</li>
<li>èœå•æ å’Œèœå•é¡¹</li>
</ul>

<h1 id="æèµ·">æèµ·</h1>

<p>å¯åŠ¨ Xcodeï¼ŒæŒ‰å¿«æ·é”® <code>Shift</code> + <code>Command</code> + <code>n</code> ï¼Œæ–°å»ºå·¥ç¨‹ï¼Œé€‰æ‹© macOS -&gt; Cocoa Appï¼Œç‚¹å‡» Nextï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-03-31%2012.48.44.png" alt="" /></p>

<p>æ–°å‡ºç°çš„çª—å£ä¸­ï¼Œå‹¾é€‰ <code>Create Document-Based Application</code>ï¼Œåº”ç”¨çš„åç§°éšæ„å–ï¼Œæ¯”å¦‚ <strong>5kmEditor</strong>ï¼Œç„¶å <code>Document Extention</code> è¿™ä¸€é¡¹æŒ‡å®šæ–‡ä»¶çš„æ‰©å±•åï¼Œå…¶å†³å®šä»¥ååº”ç”¨ä¿å­˜æ–‡ä»¶çš„æ‰©å±•åï¼Œæ¯”å¦‚åé‡ŒæŒ‡å®šçš„æ˜¯ <code>5km</code>ï¼Œå¯ä»¥ä¸å‹¾é€‰åŒ…å«æµ‹è¯•ï¼Œç‚¹å‡» Nextï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-03-31%2020.56.55.png" alt="" /></p>

<p>é€‰æ‹©åˆé€‚çš„ç›®å½•ï¼Œç‚¹å‡» <code>Create</code> åˆ›å»ºå³å¯ï¼Œåˆ›å»ºæˆåŠŸåç¼–è¯‘è¿è¡Œï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-03-31%2020.59.52.png" alt="" /></p>

<p>æ­¤æ—¶ï¼ŒæŒ‰å¿«æ·é”® <code>Command</code> + <code>n</code> æˆ–è€…èœå•æ ç‚¹å‡» File -&gt; Newï¼Œå¯ä»¥åˆ›å»ºæ–°çš„çª—å£å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-multi-windwos.png" alt="" /></p>

<h1 id="document-based-åº”ç”¨å¦‚ä½•å·¥ä½œ">Document-Based åº”ç”¨å¦‚ä½•å·¥ä½œ</h1>

<p>ä¸Šé¢ä¹Ÿçœ‹åˆ°äº†è¿™ç±»åº”ç”¨çš„æ ·å­ï¼Œä¸‹é¢èŠ±å‡ åˆ†é’Ÿä¸€èµ·çœ‹ä¸€ä¸‹ Document-Based åº”ç”¨å¦‚ä½•å·¥ä½œçš„ã€‚</p>

<h2 id="document-çš„ç»“æ„">Document çš„ç»“æ„</h2>

<p>ä¸€ä¸ª Document å…¶å®å°±æ˜¯ <code>NSDocument</code> çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼Œæ–‡æ¡£æ¨¡å‹ <code>NSDocument</code> ä½œä¸ºæ¨¡å‹ä¿å­˜äº†æ–‡æ¡£çš„æ•°æ®ï¼ŒåŒæ—¶è´Ÿè´£æ–‡æ¡£çª—å£æ§åˆ¶å™¨ <code>NSWindowController</code> çš„åˆ›å»ºç®¡ç†ï¼Œå®ƒç®¡ç†æ–‡æ¡£æ•°æ®ï¼Œè´Ÿè´£æ–‡æ¡£æ‰“å¼€æ—¶æ•°æ®è¯»å–çš„ç®¡ç†å’Œæ–‡æ¡£å¯¹è±¡ç®¡ç†çš„æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶çš„å¤„ç†ï¼Œè€Œæ–‡ä»¶æœ‰å¯èƒ½æ˜¯åœ¨ç¡¬ç›˜ä¹Ÿæœ‰å¯èƒ½åœ¨ iCloudï¼Œå‡æ”¯æŒã€‚</p>

<p>åˆ›å»ºå…³è”çš„ <code>NSWindowController</code> è´Ÿè´£å±•ç¤ºæ–‡æ¡£çš„å†…å®¹ï¼Œå†…å®¹è§†å›¾æœ€ç»ˆç›¸åº”å¤„ç†ç”¨æˆ·å¯¹æ–‡æ¡£æ“ä½œçš„å„ç§äº¤äº’äº‹ä»¶ã€‚</p>

<p><code>NSDocumentController</code> æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œä¸»è¦è´Ÿè´£æ–‡æ¡£æ¨¡å‹ <code>NSDocument</code> çš„ç®¡ç†å·¥ä½œï¼Œç»´æŠ¤ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ–‡æ¡£æ¨¡å‹ <code>NSDocument</code> åˆ—è¡¨ï¼Œæ§åˆ¶å¤šä¸ªæ–‡æ¡£çª—å£çš„æ¿€æ´»åˆ‡æ¢ï¼ŒåŒæ—¶è·Ÿè¸ªå½“å‰æ´»åŠ¨æ–‡æ¡£å¯¹è±¡ï¼Œæœ€ç»ˆç»“æ„å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-document-arch.png" alt="" /></p>

<h2 id="ç¦ç”¨-document-çš„ä¿å­˜å’Œæ‰“å¼€">ç¦ç”¨ Document çš„ä¿å­˜å’Œæ‰“å¼€</h2>

<p>Document-Based åº”ç”¨çš„ Documnent æ¶æ„æ”¯æŒæ–‡ä»¶çš„ä¿å­˜å’Œæ‰“å¼€ï¼Œä½†æ˜¯éœ€è¦å®šä¹‰ <code>Document</code> ç±»ä¸­è‡ªå·±å…·ä½“å®ç°ï¼Œæœ¬æ–‡æš‚ä¸æ¶‰åŠè¿™éƒ¨åˆ†å†…å®¹ï¼Œæ‰€ä»¥å…ˆç¦ç”¨ Document çš„ä¿å­˜å’Œæ‰“å¼€ã€‚</p>

<p>æ‰“å¼€æ–‡ä»¶ <code>Document.swift</code>ï¼Œä¼šå‘ç°æœ‰ä¸¤ä¸ªå‡½æ•°æ˜¯ç©ºçš„ï¼š</p>

<ul>
<li><code>data(ofType:)</code>: ç”¨äºå†™æ–‡ä»¶</li>
<li><code>read(from:ofType:)</code>: ç”¨äºè¯»å–æ–‡ä»¶</li>
</ul>

<p>åŒæ—¶è¿˜æœ‰ä¸€ä¸ªå‡½æ•°æ˜¯ <code>autosavesInPlace()-&gt;Bool</code>ï¼Œæ›´æ”¹è¿”å›å€¼ä¸º <code>false</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">override</span> <span class="kd">class</span> <span class="nc">var</span> <span class="n">autosavesInPlace</span><span class="p">:</span> <span class="nb">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span>
<span class="p">}</span></code></pre></div>
<p>è¿™æ ·æˆ‘ä»¬é¦–å…ˆç¦ç”¨äº†è‡ªåŠ¨ä¿å­˜åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦ç¦ç”¨èœå•æ  File ä¸­çš„ä¿å­˜å’Œæ‰“å¼€èœå•é¡¹ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬è¿è¡Œç¨‹åºï¼Œç‚¹å‡» File -&gt; Open ï¼Œç«Ÿç„¶ä¼šå¼¹å‡ºæ‰“å¼€æ–‡ä»¶çš„çª—å£ï¼Œå¾ˆç¥å¥‡ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å®ç°æ‰“å¼€å‘€ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°æ–‡ä»¶æ‰“å¼€çª—å£å‘¢ï¼Ÿ</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-03-31%2023.23.37.png" alt="" /></p>

<p>å…¶å®æ˜¯å› ä¸º Open çš„èœå•é¡¹ç»‘å®šäº†å…·ä½“çš„ Actionï¼ŒActionä¸­å®ç°äº†è¿™äº›ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æ–­å¼€èœå•é¡¹ä¸ Action çš„é“¾æ¥å°±å¯ä»¥ç¦ç”¨æ‰èœå•é¡¹ï¼Œè§†è§‰ä¸Šçš„è¡¨ç°å°±æ˜¯èœå•æ ç›¸åº”èœå•é¡¹ä¼šå˜ç°è‰²ä¸å¯ç”¨ã€‚</p>

<p>æ‰“å¼€ <code>Main.storyboard</code> ï¼Œæ‰¾åˆ° <code>Application Scene</code>ï¼Œç‚¹å‡»èœå•æ ä¸­ Fileï¼Œé€‰æ‹©å…¶ä¸­çš„ <code>Open</code>ï¼Œå³å‡»ä¼šçœ‹åˆ°æ‰€æœ‰çš„è¿æ¥ï¼Œç‚¹å‡» Sent Action ä¸­è¿æ¥å³ä¾§çš„ <code>x</code> å·ï¼Œå³å¯æ–­å¼€è¿æ¥ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-03-31%2023.34.42-1.png" alt="" /></p>

<p>åŒæ ·çš„æ“ä½œï¼Œåˆ†åˆ«å°† <code>Save...</code>ã€<code>Save As...</code> å’Œ <code>Reverrt to Saved</code> ä¸ç›¸åº”çš„ Action æ–­å¼€è¿æ¥ã€‚</p>

<p>ç„¶ååˆ é™¤ <code>Open Recent</code> èœå•é¡¹ï¼Œæœ€åæˆ‘ä»¬é‡å†™ä¸€ä¸‹ <code>save(withDelegate:didSave:contexInfo:)</code> æ–¹æ³•ï¼Œåé¢æˆ‘ä»¬ä¼šç”¨åˆ°ï¼Œä¸»è¦æ˜¯æ·»åŠ ä¸€ä¸ªé”™è¯¯ğŸ™…â€æé†’çª—å£ï¼Œæ‰“å¼€ <code>Document.swift</code> æ–‡ä»¶ï¼Œåœ¨ <code>Document</code> ç±»ä¸­æ·»åŠ é‡å†™æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">override</span> <span class="kd">func</span> <span class="nf">save</span><span class="p">(</span><span class="n">withDelegate</span> <span class="n">delegate</span><span class="p">:</span> <span class="nb">Any</span><span class="p">?,</span> <span class="n">didSave</span> <span class="n">didSaveSelector</span><span class="p">:</span> <span class="nb">Selector</span><span class="p">?,</span> <span class="n">contextInfo</span><span class="p">:</span> <span class="n">UnsafeMutableRawPointer</span><span class="p">?)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">userInfo</span> <span class="p">=</span> <span class="p">[</span><span class="n">NSLocalizedDescriptionKey</span><span class="p">:</span> <span class="s">&#34;Sorry, no saving implemented in this post. Click &#39;Do not save&#39; to quit!&#34;</span><span class="p">]</span>
    <span class="kd">let</span> <span class="nv">error</span> <span class="p">=</span> <span class="n">NSError</span><span class="p">(</span><span class="n">domain</span><span class="p">:</span> <span class="n">NSOSStatusErrorDomain</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">unimpErr</span><span class="p">,</span> <span class="n">userInfo</span><span class="p">:</span> <span class="n">userInfo</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">alert</span> <span class="p">=</span> <span class="n">NSAlert</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
    <span class="n">alert</span><span class="p">.</span><span class="n">runModal</span><span class="p">()</span>
<span class="p">}</span></code></pre></div>
<p>è¿è¡Œç¨‹åºï¼Œæ­¤æ—¶ä¼šçœ‹åˆ°èœå•æ çš„ç›¸åº”èœå•é¡¹å·²ç»ç¦ç”¨ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-03-31%2023.41.27.png" alt="" /></p>

<h1 id="çª—å£æ˜¾ç¤º">çª—å£æ˜¾ç¤º</h1>

<p>ä¸Šé¢æ–°å»ºæ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°æ–°å»ºæ–‡æ¡£çš„çª—å£å®Œå…¨è¦†ç›–äº†ä¹‹å‰çš„æ–‡æ¡£çª—å£ï¼Œç„¶è€Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œæœ¬èŠ‚å°±èŠä¸€ä¸‹æ€ä¹ˆåˆç†å¸ƒå±€çª—å£çš„ä½ç½®ã€‚è¿›è¡Œæ”¹é€ å‰ï¼Œæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ª <code>NSWindowController</code> çš„å­ç±»ï¼Œç„¶åæ·»åŠ ç›¸åº”çš„ä»£ç å®ç°æˆ‘ä»¬é¢„æœŸçš„åŠŸèƒ½ã€‚</p>

<h2 id="æ–°å»º-nswindowcontroller-çš„å­ç±»">æ–°å»º NSWindowController çš„å­ç±»</h2>

<p>å·¥ç¨‹å¯¼èˆªæ é€‰æ‹© <code>5kmEditor</code>ï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Command</code> + <code>n</code>ï¼Œå°±ä¼šå¼¹å‡ºæ–°å»ºæ–‡ä»¶çš„å¯¼èˆªçª—å£ï¼Œé€‰æ‹© macOS -&gt; Source -&gt; Cocoa Classï¼Œç‚¹å‡» Next</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-03-31%2023.58.08.png" alt="" /></p>

<p>å–åä¸º <code>WindowController</code>ï¼Œé€‰æ‹©ç»§æ‰¿è‡ª <code>NSWindowController</code>ï¼Œä¸è¦å‹¾é€‰ <code>Also Create XIB file for user interface</code>ï¼Œè¯­è¨€é€‰æ‹© <code>Swift</code> ï¼Œç‚¹å‡» Nextï¼Œä¹‹åé»˜è®¤ç„¶åç‚¹å‡» Create å³å¯åˆ›å»ºã€‚</p>

<p>ä¸‹ä¸€æ­¥éœ€è¦ç¡®ä¿ storyboard ä¸­çš„ window çš„æ§åˆ¶å™¨æ˜¯æˆ‘ä»¬åˆšå®šä¹‰çš„ <code>WindowController</code> çš„å®ä¾‹ï¼Œæ‰“å¼€ <code>Main.storyboard</code> ç‚¹å‡» <code>Window Controller Scene</code> ä¸­çš„ <code>Window Controller</code>ï¼ŒæŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>3</code> ï¼Œåœ¨å³ä¾§æ˜¾ç¤ºçš„ <code>Identity Inspector</code> ä¸­é…ç½® Custom Class ä¸º <code>WindowController</code>ï¼Œä¹Ÿå°±æ˜¯åˆšåˆšåˆ›å»ºçš„ç±»ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2000.08.04.png" alt="" /></p>

<h2 id="å±‚å çª—å£">å±‚å çª—å£</h2>

<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿æ–°å»ºçš„çª—å£å±‚å æ˜¾ç¤ºè€Œä¸æ˜¯è¦†ç›–æ˜¾ç¤ºï¼Œæ‰“å¼€æ–°å»ºçš„ <code>WindowController.swift</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">required</span> <span class="kd">init</span><span class="p">?(</span><span class="n">coder</span><span class="p">:</span> <span class="n">NSCoder</span><span class="p">)</span> <span class="p">{</span>
    <span class="kc">super</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">coder</span><span class="p">:</span> <span class="n">coder</span><span class="p">)</span>
    <span class="n">shouldCascadeWindows</span> <span class="p">=</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></div>
<p>åªéœ€è¦è®¾ç½® <code>shouldCascadeWindows</code> ä¸º true å°±å¯ä»¥å®ç°å±‚å æ•ˆæœï¼Œè¿è¡Œç¨‹åºæµ‹è¯•ä¸€ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-cascade_windows.png" alt="" /></p>

<h2 id="ä»¥æ ‡ç­¾é¡µæ˜¾ç¤º">ä»¥æ ‡ç­¾é¡µæ˜¾ç¤º</h2>

<p>å±‚å æ•ˆæœå¾ˆä¸é”™ï¼Œä½†æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹å…¶å®ƒçš„æ–¹å¼ï¼Œæ¯”å¦‚ä» macOS Sierra å¼€å§‹æ–°å¢åŠ çš„ tabbed Windowsï¼Œç®€å•è¯´å°±æ˜¯æ–°å»ºçš„çª—å£ä»¥æ ‡ç­¾é¡µæ˜¾ç¤ºã€‚</p>

<p>æ‰“å¼€ <code>Main.storyboard</code>ï¼Œé€‰ä¸­ <code>Window Controller scene</code> ä¸‹çš„ <code>Window</code> ï¼Œç„¶åæ‰“å¼€ Inspector æ çš„ <code>Attributes Inspector</code> (å¯ä»¥æŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>4</code>)ï¼Œæ‰¾åˆ° <code>Tabbing Mode</code>ï¼Œæ›´æ”¹å®ƒçš„å€¼ä¸º <code>Preferred</code>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2006.59.56.png" alt="" /></p>

<p>è¿è¡Œç¨‹åºï¼Œç„¶åæŒ‰å¿«æ·é”® <code>Command</code> + <code>n</code> æ–°å»ºçª—å£ï¼Œå¯ä»¥çœ‹åˆ°æ–°çš„çª—å£ä»¥æ ‡ç­¾é¡µçš„æ–¹å¼æ˜¾ç¤ºäº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2007.04.58.png" alt="" /></p>

<p>å½“æˆ‘ä»¬è¿è¡Œç¨‹åºçš„æ—¶å€™ï¼ŒmacOS ä¼šæ ¹æ®å½“å‰å±å¹•å¤§å°å’Œåº”ç”¨è¯·æ±‚çª—å£çš„å¤§æ¥å†³å®šåº”ç”¨çª—å£çš„æ˜¾ç¤ºä½ç½®å’Œå®é™…çš„å¤§å°ï¼Œä¸‹é¢æˆ‘ä»¬å°†å­¦ä¹ ä¸¤ç§æ–¹å¼æ§åˆ¶åº”ç”¨çª—å£çš„æ˜¾ç¤ºä½ç½®å’Œå®é™…å¤§å°ã€‚</p>

<h2 id="ä½¿ç”¨-interface-builder-è®¾ç½®çª—å£æ˜¾ç¤ºä½ç½®">ä½¿ç”¨ Interface Builder è®¾ç½®çª—å£æ˜¾ç¤ºä½ç½®</h2>

<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆä½¿ç”¨ Interface Builder è®¾ç½®çª—å£çš„åˆå§‹ä½ç½®ã€‚</p>

<p>æ‰“å¼€ <code>Main.storyboard</code>ï¼Œé€‰ä¸­ <code>Window Controller scene</code> ä¸‹çš„ <code>Window</code> ï¼Œç„¶åæ‰“å¼€ Inspector æ çš„ <code>Size Inspector</code> (å¯ä»¥æŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>5</code>)ï¼Œæ‰¾åˆ° Initial Positionï¼Œè¿è¡Œç¨‹åºåçš„çª—å£å°±æ˜¯æŒ‰ç…§è¿™ä¸ªè®¾ç½®åˆå§‹ä½ç½®çš„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-31-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2007.28.32.jpg" alt="" /></p>

<p>å…¶ä¸­ x ä»£è¡¨çª—å£åˆ°å±å¹•å·¦è¾¹ç¼˜çš„è·ç¦»ï¼Œy ä»£è¡¨çª—å£åˆ°å±å¹•åº•è¾¹çš„è·ç¦»ï¼Œå•ä½æ˜¯ pxï¼Œåœ¨ macOS ä¸­åº”ç”¨çš„åæ ‡åŸç‚¹åœ¨å·¦ä¸‹è§’ï¼Œè¿™ä¸ iOS ä¸­æ˜¯ä¸åŒçš„ï¼ˆiOS ä½¿ç”¨çš„æ˜¯ flipped åæ ‡ç³»ï¼Œå…¶åŸç‚¹åœ¨å·¦ä¸Šè§’ï¼‰ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-Window-position-1.png" alt="" /></p>

<p>æˆ‘ä»¬å¯ä»¥ç‚¹å‡»ä¸Šé¢ Size Inspector ä¸­çš„çª—å£ä½ç½®é¢„è§ˆå›¾ä¸­çš„çº¢è‰² constrainsï¼Œè¿™ä¼šå†³å®š macOS æ˜¾ç¤ºåº”ç”¨çª—å£ä½ç½®çš„è®¾å®šï¼Œç‚¹å‡»çº¢è‰² Constrains å¯ä»¥æ‰“å¼€æˆ–å…³é—­ç›¸å…³é™åˆ¶ï¼ŒåŒæ—¶ä¼šçœ‹åˆ°ä¸‹é¢ä¸¤ä¸ªä¸‹æ‹‰æ¡†å¾—å€¼ä¼šæ”¹å˜ï¼Œæ¯”å¦‚è¿™é‡Œï¼š</p>

<ul>
<li>å–æ¶ˆä¸Šè¾¹å’Œå³è¾¹çš„çº¢è‰²é™åˆ¶ï¼Œæ­¤æ—¶ä¼šçœ‹åˆ°ä¸‹é¢ä¸¤ä¸ªä¸‹æ‹‰æ¡†çš„å€¼åˆ†åˆ«å˜æˆ <code>Fixed From Left</code> å’Œ <code>Fixed From Bottom</code></li>
<li>è®¾ç½®åˆå§‹çš„ä½ç½®ï¼šx -&gt; 200, y -&gt; 200</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2009.45.16.png" alt="" /></p>

<p>æ­¤æ—¶é‡æ–°ç¼–è¯‘è¿è¡Œåº”ç”¨ï¼Œä½ ä¼šå‘ç°ä¸ç®¡å±å¹•å¤šå¤§ï¼Œåªè¦å°ºå¯¸å…è®¸èŒƒå›´å†…ï¼Œåº”ç”¨çš„çª—å£ä¼šæ˜¾ç¤ºåœ¨ç¦»å±å¹•å·¦è¾¹å’Œåº•è¾¹å‡ä¸º 200 px çš„ä½ç½®ã€‚</p>

<p>âš ï¸: macOS ä¼šè®°ä½ app çš„çª—å£æ˜¾ç¤ºä½ç½®ï¼Œæ‰€ä»¥éœ€è¦å…ˆæŠŠåº”ç”¨å®Œå…¨é€€å‡ºï¼Œç„¶åå†ç¼–è¯‘è¿è¡Œå°±èƒ½çœ‹åˆ°ä¿®æ”¹çš„æ•ˆæœï¼</p>

<h2 id="ä»£ç å®ç°å¯¹çª—å£æ˜¾ç¤ºä½ç½®çš„è®¾ç½®">ä»£ç å®ç°å¯¹çª—å£æ˜¾ç¤ºä½ç½®çš„è®¾ç½®</h2>

<p>ä»£ç å®ç°çš„è¯ï¼Œéœ€è¦åœ¨ window åŠ è½½ä¹‹åè¿›è¡Œè®¾ç½®ï¼Œåœ¨ WindowsController ä¸­é‡å†™çš„ windowDidLoad æ–¹æ³•ä¸­æ·»åŠ ç›¸å…³ä»£ç ã€‚</p>

<p>è¿™æ¬¡æˆ‘ä»¬æ¥ç‚¹ç‰¹åˆ«çš„ï¼Œæˆ‘ä»¬è®¾ç½®çª—å£æ˜¾ç¤ºåœ¨ç¦»å±å¹•é¡¶è¾¹å’Œå·¦è¾¹å‡ä¸º 150px çš„ä½ç½®ï¼Œæ‰“å¼€ <code>WindowController.swift</code> æ–‡ä»¶ï¼Œåœ¨ <code>WindowController</code> ç±»ä¸­ä¿®æ”¹ windowDidLoad æ–¹æ³•å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">override</span> <span class="kd">func</span> <span class="nf">windowDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="kc">super</span><span class="p">.</span><span class="n">windowDidLoad</span><span class="p">()</span>
    
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">window</span> <span class="p">=</span> <span class="n">window</span><span class="p">,</span> <span class="kd">let</span> <span class="nv">screen</span> <span class="p">=</span> <span class="n">window</span><span class="p">.</span><span class="n">screen</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">offsetFromLeftOfScreen</span> <span class="p">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">offsetFromTopOFScreen</span> <span class="p">=</span> <span class="n">CGFloat</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">screenFrame</span> <span class="p">=</span> <span class="n">screen</span><span class="p">.</span><span class="n">visibleFrame</span>
        <span class="kd">let</span> <span class="nv">offsetFromBottomOfScreen</span> <span class="p">=</span> <span class="n">screenFrame</span><span class="p">.</span><span class="n">maxY</span> <span class="o">-</span> <span class="n">window</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">offsetFromTopOFScreen</span>
        <span class="n">window</span><span class="p">.</span><span class="n">setFrameOrigin</span><span class="p">(</span><span class="n">CGPoint</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">offsetFromLeftOfScreen</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">offsetFromBottomOfScreen</span><span class="p">))</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>ä¸Šé¢ä»£ç ä¸»è¦å®Œæˆä»¥ä¸‹å·¥ä½œï¼š</p>

<ul>
<li>è·å–éœ€è¦ç”¨åˆ°çš„ <code>NSWindow</code> å’Œ <code>NSScreen</code> çš„å®ä¾‹</li>
<li>å¾—åˆ° screen çš„ <code>visibleFrame</code></li>
<li>é€šè¿‡ç¦»é¡¶è¾¹çš„è·ç¦»è®¡ç®—å¾—åˆ°ç¦»åº•è¾¹è·ç¦»</li>
<li>è®¾ç½® window çš„è¿œç‚¹åæ ‡ä¸º (offsetFromLeftOfScreen, offsetFromBottomOfScreen)</li>
</ul>

<p>é€‰ä¸­ä¹‹å‰æ˜¾ç¤ºçš„åº”ç”¨çª—å£ï¼Œ<code>Command</code> + <code>q</code> å®Œå…¨é€€å‡ºåº”ç”¨ï¼Œç„¶åå›åˆ° Xcode ç¼–è¯‘è¿è¡Œåº”ç”¨ï¼Œä¼šçœ‹åˆ°åº”ç”¨çš„çª—å£å¦‚æœŸæ˜¾ç¤ºåœ¨æŒ‡å®šçš„ä½ç½®ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-positionDemo-1.png" alt="" /></p>

<h1 id="å˜èº«è¶…-mini-å¯Œæ–‡æœ¬å¤„ç†å·¥å…·">å˜èº«è¶… mini å¯Œæ–‡æœ¬å¤„ç†å·¥å…·</h1>

<p>Cocoa æœ‰å¾ˆå¤šå¯ä»¥æ·»åŠ åˆ° window ä¸­çš„ç‰›ğŸ‚çš„åŠŸèƒ½æ€§ UI æ§ä»¶ï¼Œåœ¨æœ¬èŠ‚æˆ‘ä»¬å°†ä¼šç”¨åˆ° <code>NSTextView</code>ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ <code>NSWindow</code> çš„ content viewã€‚</p>

<h2 id="content-view">content view</h2>

<p><code>contentView</code> ä½äº window ä¸­è§†å›¾å±‚æ¬¡çš„æ ¹çº§ï¼Œåœ¨è¿™ä¸ªè§†å›¾ä¸­æˆ‘ä»¬å¯ä»¥æ”¾ç½®æ‰€æœ‰ç•Œé¢å…ƒç´ ã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½æ›¿æ¢é»˜è®¤çš„ <code>contentView</code> ä¸ºæˆ‘ä»¬è‡ªå®šä¹‰çš„è§†å›¾ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°±ä¸åšç›¸å…³æ“ä½œäº†ï¼Œä»¥åæˆ‘ä»¬å¯èƒ½ä¼šç”¨åˆ°ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2010.58.22.png" alt="" /></p>

<h2 id="æ·»åŠ -text-view">æ·»åŠ  Text View</h2>

<p>æ‰“å¼€ <code>Main.storyboard</code> æ–‡ä»¶ï¼Œæ‰¾åˆ° View Contorller Scene ä¸‹çš„ View Controllerï¼Œå…¶ä¸‹çš„ View ä¸­æœ‰ä¸ªæ§ä»· <code>Your document contents here</code> ï¼Œå°†å…¶åˆ é™¤ï¼Œç„¶åæˆ‘ä»¬æ·»åŠ  Text View:</p>

<ul>
<li>æŒ‰å¿«æ·é”® <code>Shift</code> + <code>Command</code> + <code>l</code> æ‰“å¼€ <code>Object Library</code></li>

<li><p>æœç´¢ Text View</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2019.34.32.png" alt="" /></p></li>

<li><p>å°† <code>Rich Document Content Text View</code> æ‹–å…¥ Content View ä¸­</p></li>

<li><p>è°ƒæ•´ <code>Rich Document Content Text View</code> çš„å¤§å°å’Œä½ç½®ï¼Œæœ€ç»ˆä½¿å…¶å››è¾¹åˆ†åˆ«ä¸ <code>contentView</code> çš„è¾¹ç¼˜è´´é½</p></li>

<li><p>é€‰ä¸­åˆšæ·»åŠ çš„ Text View æ§ä»¶ï¼Œç„¶åç‚¹å‡»åº•è¾¹çš„ <code>Resolve Auto Layout Issues</code> æŒ‰é’®ï¼Œé€‰ä¸­ <code>Reset To Suggested Constrains</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2020.38.53.png" alt="" /></p></li>

<li><p>æ·»åŠ é™åˆ¶ä¹‹åçš„æ ·å­å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2020.39.14.png" alt="" /></p></li>
</ul>

<p>ç¼–è¯‘è¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°åˆšæ·»åŠ çš„ Text View äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2020.39.25.png" alt="" /></p>

<p>åœ¨çª—å£çš„ Text View ä¸­å¯ä»¥æ·»åŠ è¿›è¡Œæ–‡æœ¬ç¼–è¾‘äº†ï¼Œä¹Ÿæ”¯æŒå¸¸ç”¨çš„å¿«æ·é”®ï¼Œæ¯”å¦‚å¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡ã€æ’¤é”€ã€é‡åšç­‰ã€‚çª—å£ä¸­ä¹Ÿå‡ºç°äº†ä¸€ç»„å·¥å…·æ ï¼Œæ”¯æŒå­—ä½“è®¾ç½®ã€ç®€å•çš„æ®µè½è®¾ç½®ç­‰ï¼ŒåŒæ—¶èœå•æ çš„ Format çš„èœå•é¡¹åŠŸèƒ½ä¹Ÿæ˜¯å¯ç”¨çš„ï¼Œè¿˜æ”¯æŒæŸ¥æ‰¾æ›¿æ¢ã€‚è¿™ä¸€å°èŠ‚æˆ‘ä»¬æ²¡æœ‰æ·»åŠ ä»»ä½•ä»£ç ï¼Œå°±å®Œæˆäº†ä¸€ä¸ªç®€å•çš„å¯Œæ–‡æœ¬ç¼–è¾‘å·¥å…·äº†ï¼Œæ˜¯ä¸æ˜¯ç‚’ğŸ”ç…ğŸ³ï¼</p>

<h2 id="æ’¤é”€å’Œé‡åš">æ’¤é”€å’Œé‡åš</h2>

<p>åœ¨çª—å£ä¸­æ·»åŠ éƒ¨åˆ†æ–‡æœ¬ï¼Œå·²ç»å¯ä»¥å®ŒæˆåŸºæœ¬çš„å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½äº†ï¼Œä½†æ˜¯æ­¤æ—¶è¿˜ä¸æ”¯æŒæ’¤é”€å’Œé‡åšï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æ”¯æŒã€‚</p>

<ul>
<li>æ‰“å¼€ <code>Main.storyboard</code> æ–‡ä»¶ï¼Œä¾æ¬¡æ‰¾åˆ° <code>View Controller</code> -&gt; <code>View</code> -&gt; <code>Scroll View - Text View</code> -&gt; <code>Clip View</code>  -&gt; <code>Text View</code>ï¼Œé€‰ä¸­ <code>Text View</code></li>
<li>æŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>4</code> æ‰“å¼€ Attribute Inspectorï¼Œå‹¾é€‰ <code>Undo</code> å¤é€‰æ¡†</li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2020.45.04.png" alt="" /></p>

<p>æ­¤æ—¶è¿è¡Œç¨‹åºï¼Œå°±æ”¯æŒ Undo å’Œ Redo äº†ï¼</p>

<p>åœ¨æ–‡æœ¬æ¡†æ·»åŠ æ–‡æœ¬ä»¥åï¼Œæˆ‘ä»¬ç‚¹å‡»çª—å£å…³é—­æŒ‰é’®ï¼Œæ­¤æ—¶ä¼šæé†’è¦ä¸è¦ä¿å­˜æ–‡æ¡£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2020.40.49.png" alt="" /></p>

<p>ç‚¹å‡» save æŒ‰é’®ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Šçª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-01-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-01%2020.02.36.png" alt="" /></p>

<p>æ˜¯ä¸æ˜¯å¯¹é‡Œé¢çš„å†…å®¹å¾ˆç†Ÿæ‚‰ï¼Œè¿™å°±æ˜¯å‰é¢æ·»åŠ çš„ save æ–¹æ³•ä¸­çš„é”™è¯¯ä¿¡æ¯ã€‚</p>

<h1 id="æ¨¡æ€çª—å£-modal-window">æ¨¡æ€çª—å£(Modal Window)</h1>

<p>æ¨¡æ€çª—å£æ˜¯ä¸€ç§ç‰¹æ®Šçš„çª—å£ï¼Œä¸€æ—¦æ˜¾ç¤ºå°±ä¼šç‹¬å ç”¨æˆ·çš„æ‰€æœ‰æ“ä½œäº‹ä»¶ï¼Œä¸€ç›´åˆ°å®ƒè¢«å…³é—­ï¼Œå…¶å®ƒçª—å£æ‰èƒ½å“åº”ç”¨æˆ·çš„æ“ä½œã€‚</p>

<p>æ˜¾ç¤ºæ¨¡æ€çª—å£æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>

<ul>
<li>ä»¥ä¸€ä¸ªæ™®é€šçª—å£çš„å½¢å¼æ˜¾ç¤ºï¼Œä½¿ç”¨ <code>NSApplication.runModal(for:)</code> è§¦å‘æ˜¾ç¤º</li>
<li>ä»¥ Modal sheet çš„å½¢å¼æ˜¾ç¤ºï¼Œ è°ƒç”¨ <code>NSWindow.beginSheet(_:completionHandler:)</code> æ˜¾ç¤ºçª—å£</li>
<li>é€šè¿‡æ¨¡æ€ä¼šè¯çš„å½¢å¼ï¼Œæœ¬æ–‡æš‚ä¸æ¶‰åŠè¿™ç§é«˜çº§çš„æ–¹æ³•</li>
</ul>

<p>å…¶å®ï¼Œæ–‡æ¡£çš„ä¿å­˜å’Œæ‰“å¼€çª—å£å°±æ˜¯æ¨¡æ€çª—å¸˜çš„å¥½ä¾‹å­ï¼Œå°±åƒä¸Šé¢å…³é—­çª—å£æ—¶å¼¹å‡ºçš„æç¤ºä¿å­˜çš„çª—å£ï¼Œå®ƒå‡ºç°åœ¨çª—å£çš„é¡¶éƒ¨ï¼Œè¿™å°±æ˜¯ Modal Sheetï¼Œåœ¨æœ¬æ–‡ä¹Ÿä¸è®²è¿™ç§æ¨¡æ€çª—å£ï¼Œä¸‹é¢æˆ‘ä»¬ä¸€èµ·å®ç°ä¸€ä¸ªæ˜¾ç¤ºå­—æ•°å’Œæ®µè½ç»Ÿè®¡çš„æ¨¡æ€çª—å£ï¼Œå®ƒæ˜¯ä»¥ä¸€ä¸ªæ­£å¸¸çª—å£å½¢å¼æ˜¾ç¤ºçš„ã€‚</p>

<h2 id="æ·»åŠ ä¸€ä¸ªæ–°çš„çª—å£">æ·»åŠ ä¸€ä¸ªæ–°çš„çª—å£</h2>

<p>æ‰“å¼€ <code>Main.storyboard</code> æ–‡ä»¶ï¼ŒæŒ‰å¿«æ·é”® <code>Shift</code> + <code>Command</code> + <code>l</code> æ‰“å¼€ Object Libraryï¼Œæœç´¢ Window Controllerï¼Œæ‹–æ‹½ <code>Window Controller</code> è¿›å…¥ç”»å¸ƒï¼Œè¿™ä¼šç”Ÿæˆä¸¤ä¸ªåœºæ™¯ï¼šWindow Controller Scene å’Œ View Controller Sceneã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2008.46.15.jpg" alt="" /></p>

<p>é€‰ä¸­åˆšæ·»åŠ çš„ WIndow Controller Scene ä¸­çš„ Windowï¼ŒæŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>5</code>ï¼Œæ‰“å¼€ Size Inspectorï¼Œè°ƒæ•´å…¶å®½ä¸º 300ï¼Œé«˜ä¸º 150ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2008.54.23.png" alt="" /></p>

<p>ç»§ç»­é€‰ä¸­ Windowï¼ŒæŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>4</code> æ‰“å¼€ Atrribute Inspectorï¼Œå–æ¶ˆ Closeã€Resize å’Œ Minimise æ§ä»¶å¤é€‰æ¡†çš„å‹¾é€‰ï¼Œè®¾ç½®æ ‡é¢˜ä¸º <code>Word Count</code>ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2009.02.30.png" alt="" /></p>

<p>çª—å£ Close æŒ‰é’®ä¼šé€ æˆä¸€ä¸ª bugï¼šå½“ç‚¹å‡»è¿™ä¸ªæŒ‰é’®åè™½ç„¶çª—å£å·²ç»å…³é—­ï¼Œä½†æ˜¯åº”ç”¨å› ä¸ºæ²¡æœ‰è°ƒç”¨ <code>stopModal</code> æ–¹æ³•è€Œä¸€ç›´ä¿ç•™åœ¨æ¨¡æ€çŠ¶æ€ï¼Œè¿™å°±å¾ˆå°´å°¬äº†ï¼</p>

<p>å¦å¤–ï¼Œä¸ä¿ç•™ Minimise å’Œ Resize æŒ‰é’®æ˜¯ä¸ºäº†éµå¾ª Apple çš„ <a href="https://developer.apple.com/design/human-interface-guidelines/macos/overview/themes/" target="_blank">Human Interface Guidelines (HIG)</a>ã€‚</p>

<p>é€‰ä¸­æ–°æ·»åŠ çš„ View Controller Scene ä¸­çš„ Viewï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>5</code> æ‰“å¼€ Size Inspectorï¼Œè®¾ç½®å®½ä¸º 300 é«˜ä¸º 150ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2009.10.18.png" alt="" /></p>

<h2 id="é…ç½®-word-count-çª—å£">é…ç½® Word Count çª—å£</h2>

<p><code>Shift</code> + <code>Command</code> + <code>l</code> æ‰“å¼€ Object Library æ‹–æ‹½ 4 ä¸ª label åˆ° View ä¸­ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2009.18.39.png" alt="" /></p>

<p>æ”¹å˜å››ä¸ª label çš„æ ‡é¢˜åˆ†åˆ«ä¸ºï¼š<strong>Word Count</strong>ã€<strong>Paragraph Count</strong>ã€<strong>0</strong> å’Œ <strong>0</strong>ï¼ŒåŒæ—¶è®¾ç½®å®ƒä»¬éƒ½æ˜¯å³å¯¹é½ï¼Œè°ƒæ•´å®ƒä»¬çš„å®½ä¸º 120ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸æ¶‰åŠè‡ªåŠ¨å¸ƒå±€ï¼Œå¯èƒ½ä¼šå‡ºç°å‡ ä¸ªè­¦å‘Šï¼Œå…ˆä¸ç®¡å®ƒä»¬ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2009.37.07.png" alt="" /></p>

<p>ä» Object Library æ¨æ‹½ä¸€ä¸ª Push Button åˆ° View ä¸­ï¼Œæ›´æ”¹å…¶æ ‡é¢˜ä¸º OKï¼Œæ‰‹åŠ¨è°ƒæ•´æ‰€æœ‰æ§ä»¶å¸ƒå±€åˆ°åˆé€‚çš„ä½ç½®ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2009.41.34.png" alt="" /></p>

<h2 id="åˆ›å»º-word-count-çš„-view-controller-çš„ç±»">åˆ›å»º Word Count çš„ View Controller çš„ç±»</h2>

<p><code>Command</code> + <code>n</code> ä¼šæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ–°å»ºçš„å¯¼èˆªçª—å£ï¼Œæˆ‘ä»¬é€‰æ‹© macOS -&gt; Source -&gt; Cocoa Classï¼Œæ–°å‡ºç°çš„çª—å£ä¸­è¾“å…¥ç±»çš„åç§°ä¸º <code>WordCountViewController</code>ï¼Œ<strong>Subclass of</strong> è®¾ç½®ä¸º <code>NSViewController</code>ï¼Œå–æ¶ˆå‹¾é€‰ <code>Also create XIB for user interface</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2009.49.32.png" alt="" /></p>

<p>ç‚¹å‡» Next åˆ›å»ºæ–°çš„æ–‡ä»¶ã€‚</p>

<p>æ‰“å¼€ <code>Main.storyboard</code>ï¼Œé€‰ä¸­æ–°æ·»åŠ çš„ View Controllerï¼ŒæŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>3</code> æ‰“å¼€ Identity Inspectorï¼Œé€‰æ‹© class ä¸ºåˆšæ·»åŠ çš„ <code>WordCountViewController</code> ç±»ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2009.52.17.png" alt="" /></p>

<h2 id="ç»‘å®šè®¡æ•°-label-ä¸-view-controller">ç»‘å®šè®¡æ•° label ä¸ View Controller</h2>

<p>æ‰“å¼€æ–°å»ºçš„ <code>WordCountViewController.swift</code> æ–‡ä»¶ï¼Œåœ¨ WordCountViewCOntroller ä¸­æ·»åŠ å±æ€§å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@objc</span> <span class="kr">dynamic</span> <span class="kd">var</span> <span class="nv">wordCount</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">0</span>
<span class="kr">@objc</span> <span class="kr">dynamic</span> <span class="kd">var</span> <span class="nv">paragraphCount</span><span class="p">:</span> <span class="nb">Int</span> <span class="p">=</span> <span class="mi">0</span></code></pre></div>
<p>âš ï¸ï¼šä¸¤ä¸ªå±æ€§æ·»åŠ äº† <code>@objc dynamic</code> ä¿®é¥°ç¬¦æ˜¯ä¸ºäº†æœ‰æ•ˆå®ç° <code>Cocoa Bindings</code><sup class="footnote-ref" id="fnref:Cocoa-Bindings-U"><a href="#fn:Cocoa-Bindings-U">1</a></sup>ï¼Œå¦åˆ™ç»‘å®šæ— æ•ˆè¿è¡Œæ—¶ä¼šæŠ¥é”™ã€‚</p>

<p>æ‰“å¼€ <code>Main.storyboard</code> é€‰ä¸­ä¸ Word Count çš„ label ç›¸å¯¹åº”çš„æ•°å­— labelï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>7</code> æ‰“å¼€ Bindings Inspector:</p>

<ul>
<li>ç‚¹å‡» <strong>Value</strong> å·¦è¾¹çš„å°ä¸‰è§’ï¼Œå±•å¼€ <strong>Value</strong></li>
<li><strong>Bind to</strong> çš„ä¸‹æ‹‰æ¡†é€‰æ‹© <code>Word Count View Controller</code></li>
<li>å‹¾é€‰ <strong>Bind to</strong></li>
<li><strong>Model Key Path</strong> è¾“å…¥ <code>wordCount</code></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2010.11.47.png" alt="" /></p>

<p>åŒæ ·çš„æ­¥éª¤ï¼Œä¸ Paragraph Count çš„ label ç›¸å¯¹åº”çš„æ•°å­— label ç»‘å®šåˆ° <code>paragraphCount</code>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2010.17.58.png" alt="" /></p>

<p>ä¸‹ä¸€æ­¥è®¾ç½® Window Controller çš„ <strong>Storyboard ID</strong>ã€‚</p>

<p>é€‰æ‹© <strong>Word Count Window</strong> çš„ <strong>Window Controller</strong>ï¼Œç„¶åæŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>3</code> æ‰“å¼€ Identity Inspectorï¼Œæ›´æ”¹ <strong>Storyboard ID</strong> çš„å€¼ä¸º <code>Word Count Window Controller</code>ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2010.20.24.png" alt="" /></p>

<h2 id="æ˜¾ç¤ºå’Œå…³é—­æ¨¡æ€çª—å£">æ˜¾ç¤ºå’Œå…³é—­æ¨¡æ€çª—å£</h2>

<p>å‰é¢çš„å‡†å¤‡å·¥ä½œåšè¶³äº†ï¼Œé‚£æœ¬èŠ‚è®²è®²å¦‚ä½•å¬å”¤å’Œè½°èµ°æ¨¡æ€çª—å£ã€‚</p>

<h3 id="å‡ºæ¥å§-æ¨¡æ€çª—å£">å‡ºæ¥å§ï¼Œæ¨¡æ€çª—å£</h3>

<p>æ‰“å¼€ <strong>ViewController.swift</strong> æ–‡ä»¶ï¼Œåœ¨ç±»ä¸­æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@IBOutlet</span> <span class="kd">var</span> <span class="nv">text</span><span class="p">:</span> <span class="n">NSTextView</span><span class="p">!</span></code></pre></div>
<p>åŒæ—¶æ·»åŠ ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">showWordCountWindow</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 1</span>
    <span class="kd">let</span> <span class="nv">storyboard</span> <span class="p">=</span> <span class="n">NSStoryboard</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">&#34;Main&#34;</span><span class="p">,</span> <span class="n">bundle</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">wordCountWindowController</span> <span class="p">=</span> <span class="n">storyboard</span><span class="p">.</span><span class="n">instantiateController</span><span class="p">(</span><span class="n">withIdentifier</span><span class="p">:</span> <span class="s">&#34;Word Count Window Controller&#34;</span><span class="p">)</span> <span class="k">as</span><span class="p">!</span> <span class="n">NSWindowController</span>

    <span class="k">if</span> <span class="kd">let</span> <span class="nv">wordCountWindow</span> <span class="p">=</span> <span class="n">wordCountWindowController</span><span class="p">.</span><span class="n">window</span><span class="p">,</span> <span class="kd">let</span> <span class="nv">textStorage</span> <span class="p">=</span> <span class="n">text</span><span class="p">.</span><span class="n">textStorage</span> <span class="p">{</span>

        <span class="c1">// 2</span>
        <span class="kd">let</span> <span class="nv">wordCountViewController</span> <span class="p">=</span> <span class="n">wordCountWindow</span><span class="p">.</span><span class="n">contentViewController</span> <span class="k">as</span><span class="p">!</span> <span class="n">WordCountViewController</span>
        <span class="n">wordCountViewController</span><span class="p">.</span><span class="n">wordCount</span> <span class="p">=</span> <span class="n">textStorage</span><span class="p">.</span><span class="n">words</span><span class="p">.</span><span class="bp">count</span>
        <span class="n">wordCountViewController</span><span class="p">.</span><span class="n">paragraphCount</span> <span class="p">=</span> <span class="n">textStorage</span><span class="p">.</span><span class="n">paragraphs</span><span class="p">.</span><span class="bp">count</span>

        <span class="c1">// 3</span>
        <span class="n">NSApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">runModal</span><span class="p">(</span><span class="k">for</span><span class="p">:</span> <span class="n">wordCountWindow</span><span class="p">)</span>
        <span class="c1">// 4</span>
        <span class="n">wordCountWindow</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>æ‰“å¼€ <strong>Main.storyboard</strong> æ–‡ä»¶ï¼Œé€‰ä¸­æ·»åŠ  Text View çš„ View Controllerï¼ŒæŒ‰ä½ <code>Ctrl</code> é”®ï¼Œç‚¹å‡» View Controller æŒ‰é’®ï¼Œä¸æ¾æ‰‹æ‹–åŠ¨è‡³ Text View ä¸Šæ¾æ‰‹ï¼Œæ­¤æ—¶ä¼šå¼¹å‡ºä¸€ä¸ªç»‘å®šé€‰æ‹©æ¡†ï¼Œé‡Œé¢å°±åŒ…å«äº†æˆ‘ä»¬åˆšæ·»åŠ çš„ text å±æ€§ï¼Œç‚¹å‡»å®ƒï¼Œè¿™å°±å®Œæˆäº† Text View æ§ä»¶ä¸ text å±æ€§çš„ç»‘å®š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2010.34.58.png" alt="" /></p>

<p>ä¸Šé¢æ·»åŠ çš„æ–¹æ³•ï¼Œè¿™é‡Œä¸€æ­¥ä¸€æ­¥çš„è¯´æ˜ä¸€ä¸‹ï¼š</p>

<ol>
<li>ä½¿ç”¨ä¹‹å‰é…ç½®çš„ <strong>Storyboard ID</strong> å®ä¾‹åŒ–ä¸€ä¸ª <strong>Word Count Window Controller</strong> å¯¹è±¡</li>
<li>ä» text view çš„ storage å¯¹è±¡ä¸­è·å–å­—æ•°ç»Ÿè®¡å’Œæ®µè½ç»Ÿè®¡ï¼Œå°†å€¼è®¾ç½®åˆ° <strong>wordCountViewController</strong> çš„ä¸¤ä¸ªå±æ€§ <code>wordCount</code> å’Œ <code>paragraphCount</code></li>
<li>æ¨¡æ€æ–¹å¼æ˜¾ç¤º word count çª—å£</li>
<li>ä¸€æ—¦æ¨¡æ€çŠ¶æ€ç»“æŸå°±å…³é—­æ¨¡æ€çª—å£ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œåªè¦æ¨¡æ€ä¸ç»“æŸè¿™ä¸€å¥å°±ä¸ä¼šæ‰§è¡Œ</li>
</ol>

<h3 id="æ¶ˆå¤±å§-æ¨¡æ€çª—å£">æ¶ˆå¤±å§ï¼Œæ¨¡æ€çª—å£</h3>

<p>è¿™é‡Œæˆ‘ä»¬éœ€è¦æ·»åŠ ç»“æŸæ¨¡æ€çš„å®ç°ï¼Œæ‰“å¼€æ–‡ä»¶ <strong>WordCountViewController.swift</strong>ï¼Œæ·»åŠ ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">dismissWordCountWindow</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="n">NSButton</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">stopModal</span><span class="p">()</span>
<span class="p">}</span></code></pre></div>
<p>ä¸‹é¢æˆ‘ä»¬å°†æ­¤æ–¹æ³•ä¸ä¸Šé¢æ·»åŠ çš„ OK æŒ‰é’®è¿›è¡Œç»‘å®šã€‚</p>

<p>æ‰“å¼€ <code>Main.storyboard</code>ï¼Œé€‰ä¸­ OK æŒ‰é’®ï¼Œç‚¹å‡»å®ƒï¼ŒåŒæ—¶æŒ‰ä½ <code>Ctrl</code> é”®ï¼Œæ‹–åŠ¨é¼ æ ‡è‡³ <strong>Word Count View Controller</strong> çš„æŒ‰é’®ä¸Šï¼Œåœ¨å¼¹å‡ºçš„ç»‘å®šçª—å£ä¸Šé€‰æ‹©åˆšæ·»åŠ çš„æ–¹æ³• <code>dismissWordCountWindow</code> å³å¯å®Œæˆç»‘å®šã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2011.01.15.png" alt="" /></p>

<h3 id="æ·»åŠ å¬å”¤æ¨¡æ€çš„ç¬¦å’’">æ·»åŠ å¬å”¤æ¨¡æ€çš„ç¬¦å’’</h3>

<p>è¿™é‡Œæˆ‘ä»¬ä»¥èœå•æ çš„èœå•é¡¹çš„æ–¹å¼è§¦å‘æ¨¡æ€çª—å£ã€‚</p>

<p>æ‰“å¼€ <strong>Main.storyboard</strong> æ–‡ä»¶ï¼Œæ‰¾åˆ° <strong>Main Menu</strong>ï¼Œç‚¹å‡»å±•å¼€ <strong>Edit</strong>ï¼Œç„¶åè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p>

<ol>
<li><code>Shift</code> + <code>Command</code> + <code>l</code> æ‰“å¼€ Object Libraryï¼Œæœç´¢ <code>Menu Item</code>ï¼Œæ‹–åŠ¨åˆ°æœ€ä¸‹é¢çš„ä½ç½®ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„èœå•é¡¹ï¼Œé€‰ä¸­å®ƒ</li>
<li><code>Option</code> + <code>Command</code> + <code>4</code> æ‰“å¼€å®ƒçš„ <strong>Attribute Inspector</strong>ï¼Œæ›´æ”¹æ ‡é¢˜ä¸º <strong>Word Count</strong>ï¼ŒåŒæ—¶é…ç½®å¿«æ·é”®ä¸º <strong>âŒ˜K</strong></li>
</ol>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2011.20.01.png" alt="" /></p>

<p>ä¸‹é¢æˆ‘ä»¬éœ€è¦ä¸ºå…¶ç»‘å®šä¸Šé¢å®šä¹‰çš„æ–¹æ³• <code>showWordCountWindow</code>ï¼Œç‚¹å‡»èœå•é¡¹ <strong>Word Count</strong>ï¼ŒåŒæ—¶æŒ‰ä½ <code>Ctrl</code> é”®ï¼Œæ‹–åŠ¨è‡³ <strong>Application Scene</strong> ä¸‹çš„ <strong>First Responder</strong> ä¸Šæ¾æ‰‹ï¼Œåœ¨å¼¹å‡ºçš„åˆ—è¡¨ä¸­æ‰¾åˆ°æ–¹æ³• <code>showWordCountWindow</code>ï¼Œé€‰æ‹©å®ƒï¼Œè¿™å°±å®Œæˆäº†è§¦å‘æ¨¡æ€çš„ç»‘å®šï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2011.30.40-1.png" alt="" /></p>

<h3 id="å¬å”¤æ¨¡æ€">å¬å”¤æ¨¡æ€</h3>

<p>ç¼–è¯‘è¿è¡Œç¨‹åºï¼Œåœ¨çª—å£ä¸­è¾“å…¥ä¸€äº›å†…å®¹ï¼Œæ¯”å¦‚ï¼š</p>

<blockquote>
<p>æœ›å²³</p>

<p>å”ä»£ï¼šæœç”«</p>

<p>å²±å®—å¤«å¦‚ä½•ï¼Ÿé½é²é’æœªäº†ã€‚</p>

<p>é€ åŒ–é’Ÿç¥ç§€ï¼Œé˜´é˜³å‰²æ˜æ™“ã€‚</p>

<p>è¡èƒ¸ç”Ÿæ›¾äº‘ï¼Œå†³çœ¦å…¥å½’é¸Ÿã€‚</p>

<p>ä¼šå½“å‡Œç»é¡¶ï¼Œä¸€è§ˆä¼—å±±å°ã€‚</p>
</blockquote>

<p>èœå•æ  Edit -&gt; Word Count (æˆ–è€…æŒ‰å¿«æ·é”® <code>Command</code> + <code>k</code>) å°±èƒ½æ‰“å¼€ç»Ÿè®¡å­—æ•°çš„æ¨¡æ€çª—å£ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-04-02%2013.13.18.png" alt="" /></p>

<p>ç‚¹å‡» OK å°±å¯ä»¥â€œè½°èµ°â€æ¨¡æ€çª—å£äº†ã€‚</p>

<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p><a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-04-02-5kmEditor.zip" target="_blank">ç‚¹æˆ‘</a>å¯ä»¥ä¸‹è½½æœ¬æ–‡ä¸­çš„å·¥ç¨‹ã€‚æœ¬æ–‡æ¶‰åŠåˆ°äº†ä»¥ä¸‹å†…å®¹ï¼š</p>

<ul>
<li>MVC çš„è®¾è®¡æ¨¡å¼</li>
<li>å¤šçª—å£åº”ç”¨çš„å®ç°</li>
<li>Interface Builder å’Œ ä»£ç  ä¸¤ç§æ–¹å¼æ§åˆ¶çª—å£ä½ç½®</li>
<li>æ§ä»¶ä¸ç±»å±æ€§çš„ç»‘å®šï¼Œæ§ä»¶ Action ä¸ç±»æ–¹æ³•çš„ç»‘å®š</li>
<li>çª—å£å½¢å¼çš„ macOS çš„å¸¸è§„å¼€å‘å§¿åŠ¿</li>
<li>å¦‚ä½•ä»£ç æ§åˆ¶æ˜¾ç¤ºæ¨¡æ€çª—å£</li>
<li>å¯Œæ–‡æœ¬ç¼–è¾‘çš„ç®€å•å®ç°</li>
</ul>

<p>å¸Œæœ›å¯¹å¤§å®¶å­¦ä¹  macOS å¼€å‘æœ‰æ‰€å¸®åŠ©ï¼æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼</p>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>

<p><a href="https://www.raywenderlich.com/613-windows-and-windowcontroller-tutorial-for-macos" target="_blank">Windows and WindowController Tutorial for macOS</a></p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:Cocoa-Bindings-U">Cocoa Bindings æ˜¯ UI å¼€å‘ä¸­ä¸€ä¸ªå¼ºå¤§çš„æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºæ•°æ®ä¸ UI çš„ç»‘å®šï¼Œå¯ä»¥é˜…è¯» <a href="https://www.raywenderlich.com/141297/cocoa-bindings-macos" target="_blank"> Cocoa Bindings on macOS </a> äº†è§£æ›´å¤šç›¸å…³å†…å®¹ï¼Œåé¢æœ‰æ—¶é—´åé‡Œä¼šä¸“é—¨å†™ä¸€ç¯‡ç›¸å…³çš„æ–‡ç« ä¸å¤§å®¶ä¸€èµ·å­¦ä¹ ï¼ <a class="footnote-return" href="#fnref:Cocoa-Bindings-U"><sup>[return]</sup></a></li>
</ol>
</div>
]]></content>
		</item>
		
		<item>
			<title>PlatformIO æ˜¯ä»€ä¹ˆ</title>
			<link>https://www.smslit.top/2019/03/30/what-is-pio/</link>
			<pubDate>Sat, 30 Mar 2019 17:45:14 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/30/what-is-pio/</guid>
			<description>PlatformIO is an open source ecosystem for IoT development. Cross-platform IDE and unified debugger. Remote unit testing and firmware updates. PlatformIO æ˜¯ä¸€ä¸ªç”¨äºç‰©è”ç½‘å¼€å‘çš„å¼€æºç”Ÿæ€ç³»ç»Ÿã€‚å®ƒæä¾›è·¨å¹³å°çš„å¼€å‘ç¯å¢ƒå’Œç»Ÿä¸€çš„è°ƒè¯•å™¨ï¼Œè¿˜æ”¯æŒè¿œç¨‹å•å…ƒæµ‹è¯•å’Œå›ºä»¶</description>
			<content type="html"><![CDATA[

<blockquote>
<p>PlatformIO is an open source ecosystem for IoT development.</p>

<p>Cross-platform IDE and unified debugger.</p>

<p>Remote unit testing and firmware updates.</p>
</blockquote>

<p><a href="https://platformio.org" target="_blank">PlatformIO</a> æ˜¯ä¸€ä¸ªç”¨äºç‰©è”ç½‘å¼€å‘çš„å¼€æºç”Ÿæ€ç³»ç»Ÿã€‚å®ƒæä¾›è·¨å¹³å°çš„å¼€å‘ç¯å¢ƒå’Œç»Ÿä¸€çš„è°ƒè¯•å™¨ï¼Œè¿˜æ”¯æŒè¿œç¨‹å•å…ƒæµ‹è¯•å’Œå›ºä»¶æ›´æ–°&hellip;</p>

<h1 id="platformio-ç®€ä»‹">PlatformIO ç®€ä»‹</h1>

<figure class="right">
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-30-platformio-ide-vscode.png"/> 
</figure>


<p>PlatformIO æ˜¯ç‹¬ç«‹äºå¹³å°è¿è¡Œçš„ï¼Œå®é™…ä¸Šå®ƒåªä¾èµ–äº pythonï¼Œç„¶è€Œ python åœ¨ macOSã€linux å’Œ windows éƒ½èƒ½å®Œç¾é€‚é…. ä¹Ÿå°±æ˜¯è¯´ PlatformIO çš„å·¥ç¨‹ä»ä¸€ä¸ªç”µè„‘å¾ˆå®¹æ˜“è¿ç§»åˆ°å¦ä¸€ä¸ªç”µè„‘ï¼Œåªéœ€è¦æ‹·è´å†ä½¿ç”¨ PlatformIO å°±èƒ½å®Œç¾æ‰“å¼€ï¼Œä¸ç®¡å›¢é˜Ÿä¸­çš„æˆå‘˜ä½¿ç”¨ä»€ä¹ˆæ“ä½œç³»ç»Ÿ PlatformIO å¯ä»¥è®©å·¥ç¨‹å…±äº«å˜å¾—å¼‚å¸¸ç®€å•. é™¤æ­¤ä¹‹å¤–, PlatformIO ä¸ä»…å¯ä»¥åœ¨ç¬”è®°æœ¬å’Œå°å¼æœºä¸Šè¿è¡Œï¼ŒåŒæ ·å¯ä»¥è¿è¡Œåœ¨æ²¡æœ‰æ˜¾ç¤ºæ¡Œé¢çš„æœåŠ¡å™¨ã€‚PlatformIO çš„æ ¸å¿ƒ(PlatformIO Core) å°±æ˜¯ä¸€ä¸ªç»ˆç«¯ç¨‹åº, å®ƒèƒ½é…åˆæ‚¨å–œæ¬¢çš„å¤šæ¬¾äº‘ IDEã€æ¡Œé¢ IDE æˆ–è€… é€šç”¨ä»£ç ç¼–è¾‘å™¨æ„å»º PlatformIO çš„ IDEï¼Œæ¯”å¦‚ Atom, CLion, Eclipse, Emacs, NetBeans, Qt Creator, Sublime Text, VIM, Visual Studio, VSCode, etc.</p>

<p>ç›®å‰å®˜æ–¹æ¨èçš„ IDE ä½¿ç”¨æ–¹æ¡ˆå°±æ˜¯ VSCode + PlatformIO IDE æ’ä»¶ï¼Œç•Œé¢å¦‚å³å›¾ï¼š</p>

<ul>
<li>PIO ç»Ÿä¸€çš„è°ƒè¯•å™¨ï¼Œå¯ä»¥é›¶é…ç½®çš„å¯¹æ”¯æŒç¡¬ä»¶è°ƒè¯•çš„çš„åµŒå…¥å¼å¼€å‘æ¿è¿›è¡Œè°ƒè¯•å·¥ä½œï¼Œè°ƒè¯•å™¨æ”¯æŒå¾ˆå¤šçš„æ¶æ„å’Œå¼€å‘å¹³å°</li>
<li>è·¨å¹³å°çš„ä»£ç æ„å»ºç³»ç»Ÿå¯¹ç³»ç»Ÿè½¯ä»¶æ²¡æœ‰é¢å¤–çš„ä¾èµ–: 600+ åµŒå…¥å¼å¼€å‘æ¿, 30+ å¼€å‘å¹³å°, 15+ æ¡†æ¶</li>
<li>C/C++ æ™ºèƒ½ä»£ç è¡¥å…¨ï¼Œè¯­æ³•æ£€æŸ¥ï¼Œå¿«é€Ÿé‡æ„ä»¥åŠä»£ç è·³è½¬æ»¡è¶³å¿«é€Ÿä¸“ä¸šçš„å¼€å‘éœ€æ±‚</li>
<li>VSCode æä¾›å¤šå·¥ç¨‹å’Œæ–‡ä»¶ç®¡ç†çš„æ”¯æŒå’Œç»Ÿä¸€è€Œæµç•…çš„ä½¿ç”¨ä½“éªŒï¼Œå¹¶ä¸”æ”¯æŒå¤šç§è‰²å½©ä¸»é¢˜ï¼Œæ€»æœ‰æ‚¨å–œæ¬¢å’Œé€‚åˆæ‚¨çš„</li>
<li>å†…å»ºçš„ç»ˆç«¯æ”¯æŒ PlatformIO Core å‘½ä»¤è¡Œå·¥å…·ï¼Œå¹¶ä¸”æ”¯æŒå¼ºå¤§çš„ä¸²å£è°ƒè¯•å™¨</li>
</ul>

<p>å°½ç®¡ PlatformIO å¯ä»¥è¿è¡Œåœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œä½†ä»å¼€å‘çš„è§’åº¦çœ‹æ›´é‡è¦çš„æ˜¯å®ƒæ”¯æŒå¤šå°‘å¼€å‘æ¿å’Œå•ç‰‡æœºã€‚æ¦‚æ‹¬æ¥è¯´: PlatformIO æ”¯æŒå¤§çº¦ 600+ ä¸ª<a href="https://docs.platformio.org/en/latest/boards/index.html" target="_blank">å¼€å‘æ¿</a>å’Œå¸‚é¢ä¸Šæµè¡Œçš„æ”¯æŒè·¨å¹³å°çš„ 30 ä¸ª<a href="https://docs.platformio.org/en/latest/platforms/index.html#" target="_blank">å¼€å‘å¹³å°</a>ã€‚</p>

<ul>
<li>æ”¯æŒçš„åµŒå…¥å¼å¼€å‘æ¿åˆ—è¡¨: <a href="https://docs.platformio.org/en/latest/boards/index.html" target="_blank">Boards</a></li>
<li>æ”¯æŒçš„å•ç‰‡æœºå¹³å°å’Œæ¡Œé¢å¹³å°: <a href="https://docs.platformio.org/en/latest/platforms/index.html#" target="_blank">Platforms</a></li>
</ul>

<p>åŒæ—¶ï¼ŒPlatformIO è¿˜æä¾›å¤§é‡çš„å¼€å‘åº“ï¼Œç›®å‰è¶…è¿‡äº† 6000 ä¸ªï¼Œä¸ºäº†æ–¹ä¾¿æ–°æ‰‹å…¥é—¨å¼€å‘ï¼Œä»–ä»¬ä¹ŸåŒæ ·æä¾›ä»£ç ä¾‹ç¨‹ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-30-support.png" alt="" /></p>

<h1 id="platformio-è§£å†³çš„é—®é¢˜">PlatformIO è§£å†³çš„é—®é¢˜</h1>

<ul>
<li>åµŒå…¥å¼å¼€å‘çš„ä¸–ç•Œè®©å¾ˆå¤šäººæœ›è€Œå´æ­¥çš„ä¸»è¦åŸå› æ˜¯é’ˆå¯¹æŸä¸€ä¸ªå•ç‰‡æœºæˆ–å¼€å‘æ¿å¼€å‘ç¯å¢ƒå¤æ‚çš„é…ç½®è¿‡ç¨‹ï¼šäº¤å‰ç¼–è¯‘é“¾å·¥å…·ä¸‹è½½ã€å®‰è£…å’Œé…ç½®ï¼Œå¦å¤–è¿˜å¾—ä½¿ç”¨å‚å•†ç‹¬æœ‰çš„ IDE (æœ‰æ—¶è¿˜ä¸æ˜¯å…è´¹çš„) ï¼Œè¿˜æœ‰æœ‰æ—¶è¿˜ä¸å¾—ä¸ä½¿ç”¨ IDE åªæ”¯æŒçš„ Windows</li>
<li>å¤šä¸ªç¡¬ä»¶å¹³å° (å•ç‰‡æœº, å¼€å‘æ¿) éœ€è¦ä¸åŒäº¤å‰ç¼–è¯‘é“¾å·¥å…·å’Œå¼€å‘ç¯å¢ƒ, æ‰€æœ‰ç›¸åº”çš„å¼€å‘äººå‘˜éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›åœ¨é…ç½®æ–°çš„å¼€å‘ç¯å¢ƒä¸Š</li>
<li>ä¸ºäº†å­¦ä¹ å¦‚ä½•ä½¿ç”¨å¸¸è§„çš„ä¼ æ„Ÿå™¨æˆ–æ‰§è¡Œå™¨ä»¶ç­‰å¤–è®¾ï¼Œéœ€è¦èŠ±æ—¶é—´æŸ¥æ‰¾åˆé€‚çš„åº“å’Œä¾‹ç¨‹</li>
<li>æ¯ä¸ªå›¢é˜Ÿæˆå‘˜å¯èƒ½ä¼šä½¿ç”¨ä¸ç”¨çš„æ“ä½œç³»ç»Ÿï¼Œè¿™å°±ä¸ºä»–ä»¬ä¹‹é—´å…±äº«æˆæœå½¢æˆé˜»ç¢ï¼ˆå½“ç„¶å›½å†…ç°çŠ¶æ˜¯å…¬å¸é€¼ç€å‘˜å·¥ä½¿ç”¨ç»Ÿä¸€çš„æ“ä½œç³»ç»Ÿï¼Œå“ˆå“ˆğŸ¤£ï¼‰</li>
</ul>

<h1 id="platformio-å¦‚ä½•å·¥ä½œ">PlatformIO å¦‚ä½•å·¥ä½œ</h1>

<p>è¿™é‡Œä¸æ·±å…¥è¯´ PlatformIO çš„å®ç°ç»†èŠ‚, ä½¿ç”¨ PlatformIO æ—¶å·¥ç¨‹çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>

<ul>
<li>ç”¨æˆ·åœ¨ â€œplatformio.iniâ€ (å·¥ç¨‹é…ç½®æ–‡ä»¶) ä¸­æŒ‡å®šå¼€å‘å¹³å°ï¼ˆå¼€å‘æ¿ï¼‰</li>
<li>æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„å¼€å‘æ¿ï¼ˆä¸€ä¸ªå·¥ç¨‹å¯ä»¥é…ç½®å¤šä¸ªå¼€å‘æ¿ï¼‰ï¼ŒPlatformIO ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…å¯¹åº”çš„äº¤å‰ç¼–è¯‘é“¾å·¥å…·ä»¥åŠè°ƒè¯•å·¥å…·.</li>
<li>ç”¨æˆ·ç¼–å†™ä»£ç ï¼ŒPlatformIO æ¥ä¿è¯æ‰€æœ‰æŒ‡å®šå¼€å‘æ¿çš„ç¼–è¯‘ã€è°ƒè¯•å’Œä¸Šä¼ å·¥ä½œ</li>
</ul>

<h1 id="platformio-éœ€è¦ç”¨æˆ·è¿›è¡Œçš„é€‰æ‹©">PlatformIO éœ€è¦ç”¨æˆ·è¿›è¡Œçš„é€‰æ‹©</h1>

<ul>
<li>å†³å®šä½¿ç”¨ä»€ä¹ˆç³»ç»Ÿè¿è¡Œ PlatformIO æ¥è¿›è¡Œå•ç‰‡æœºå¼€å‘ï¼Œéœ€è¦è¿›è¡Œç›¸åº”ç³»ç»Ÿçš„å®‰è£…å·¥ä½œ</li>
<li>é€‰æ‹©ä½¿ç”¨ä»€ä¹ˆç¼–è¾‘å™¨è¿›è¡Œä»£ç ç¼–å†™ï¼Œå¯ä»¥æ˜¯æç®€é€šç”¨çš„ä»£ç ç¼–è¾‘å™¨ï¼Œä¹Ÿå¯ä»¥æ‚¨å–œæ¬¢çš„æ¡Œé¢ IDE</li>
<li>ä¸“æ³¨äºä»£ç å¼€å‘ï¼Œæ˜¾è‘—ç®€åŒ–ä½¿ç”¨å¼€å‘å¹³å°å’Œå•ç‰‡æœºçš„è¿‡ç¨‹</li>
</ul>

<h1 id="platformio-çš„ç›¸å…³æŠ¥é“">PlatformIO çš„ç›¸å…³æŠ¥é“</h1>

<blockquote>
<p>é€šå¸¸æƒ…å†µä¸‹ä¸åŒçš„å•ç‰‡æœºéœ€è¦ä¸åŒçš„å¼€å‘å·¥å…·ï¼Œæ¯”å¦‚ Arduino ä½¿ç”¨çš„æ˜¯ <strong>Arduino IDE</strong>ï¼Œæœ‰äº›é«˜çº§ç”¨æˆ·ä¸ºäº†æ›´å¥½çš„è¿›è¡Œä»£ç å·¥ç¨‹ç®¡ç†ï¼Œä¹Ÿä¼šé…ç½®åŸºäº Eclipse çš„å›¾å½¢ç•Œé¢çš„å¼€å‘ç¯å¢ƒã€‚æœ‰æ—¶åŒæ­¥æ”¯æŒä¸åŒçš„å•ç‰‡æœºæ¯”è¾ƒå›°éš¾ï¼Œæ‚¨å¯èƒ½è§‰å¾—å¦‚æœæœ‰ä¸€ä¸ªç»Ÿä¸€çš„å¼€å‘å·¥å…·é‚£è¯¥å¤šå¥½å‘€ï¼ PlatformIO å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå¼€æºçš„è¿›è¡Œå•ç‰‡æœºåµŒå…¥å¼å¼€å‘çš„ç”Ÿæ€å·¥å…·ã€‚</p>

<p>PlatformIO æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ä»£ç æ„å»ºå·¥å…·å’Œåº“ç®¡ç†å·¥å…·ï¼Œå¹¶ä¸”æ”¯æŒåƒ Arduino å’Œ MBED è¿™æ ·çš„å¹³å°ã€‚ä»–ä»¬å…³å¿ƒå¯ä»¥è·¨ macOSã€windows å’Œ linux ä¸‰ä¸ªå¹³å°å·¥ä½œçš„å·¥å…·é“¾ã€è°ƒè¯•å™¨å’Œå¼€å‘å¹³å°ï¼Œå®ƒæ”¯æŒè¶…è¿‡ 200 ä¸ªçš„å¼€å‘æ¿å’Œè¶…è¿‡ 15 ç§çš„å¼€å‘å¹³å°ä»¥åŠ 10 ä¸­å¼€å‘æ¡†æ¶ï¼Œæ‰€ä»¥ç»å¤§å¤šæ•°æµè¡Œçš„å¼€å‘æ¿éƒ½æ˜¯åŒ…å«å…¶ä¸­çš„ã€‚ä»–ä»¬åœ¨æ”¶é›†æ•´ç†å¼€å‘åº“ä¸Šå€¾æ³¨äº†å¤§é‡ç²¾åŠ›ï¼Œä»¥è‡³äºæ‚¨çš„å·¥ç¨‹å¯ä»¥ä½¿ç”¨ä¸Šç™¾ç§å¼€å‘åº“ã€‚å¦å¤–ï¼Œä¹Ÿæœ‰å¾ˆå¤šä»£ç ä¾‹ç¨‹æä¾›æ–¹ä¾¿æ‚¨å…¥é—¨å•ç‰‡æœºå¼€å‘ã€‚PlatformIO æœ€åˆä»¥å‘½ä»¤è¡Œçš„å½¢æ€è¿›è¡Œå¼€å‘ï¼Œç°å¦‚ä»Šå®ƒå¯ä»¥å®Œç¾é…åˆå…¶å®ƒçš„ IDE è¿›è¡Œä½¿ç”¨ï¼Œæ¯”å¦‚ Eclipseã€Visual Studioï¼Œæœ€è¿‘ä»–ä»¬æœ€æ–°å‘å¸ƒäº†åŸºäº Atom çš„ PlatformIO å¼€å‘ç¯å¢ƒã€‚</p>
</blockquote>

<h1 id="platformio-çš„è£èª‰">PlatformIO çš„è£èª‰</h1>

<p>PlatformIO æ›¾æå <a href="https://www.postscapes.com/internet-of-things-software-guide/" target="_blank"><sup>2015</sup>&frasl;<sub>16</sub> IOT å¹´åº¦æœ€ä½³å¼€å‘è½¯ä»¶å’Œå·¥å…·å¥–</a>ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ Swift çš„ Codable</title>
			<link>https://www.smslit.top/2019/03/24/macOS-dev-swift-codable/</link>
			<pubDate>Sun, 24 Mar 2019 16:49:16 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/24/macOS-dev-swift-codable/</guid>
			<description>è¿‘æ—¥ç ”ç©¶äº†ä¸€ä¸‹å¦‚ä½•å°†è‡ªå®šä¹‰ç±»å‹æ•°æ®æŒä¹…åŒ–ï¼Œåœ¨ç ”ç©¶è¿‡ç¨‹ä¸­å‘ç° Swift çš„ Codable çœŸçš„å¾ˆæ–¹ä¾¿ï¼Œè§‰å¾—æœ‰å¿…è¦å†™ä¸€å†™è¿™ä¸ª Codableï¼Œåœ¨æœ¬æ–‡ä¸€èµ·æ¢è®¨ä¸€ä¸‹ä»¥ä¸‹ä¸‰ä¸ªæ–¹</description>
			<content type="html"><![CDATA[

<p>è¿‘æ—¥ç ”ç©¶äº†ä¸€ä¸‹å¦‚ä½•å°†è‡ªå®šä¹‰ç±»å‹æ•°æ®æŒä¹…åŒ–ï¼Œåœ¨ç ”ç©¶è¿‡ç¨‹ä¸­å‘ç° Swift çš„ Codable çœŸçš„å¾ˆæ–¹ä¾¿ï¼Œè§‰å¾—æœ‰å¿…è¦å†™ä¸€å†™è¿™ä¸ª <strong>Codable</strong>ï¼Œåœ¨æœ¬æ–‡ä¸€èµ·æ¢è®¨ä¸€ä¸‹ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p>

<ul>
<li>ä»€ä¹ˆæ˜¯ Swift çš„ Codable</li>
<li>æ€ä¹ˆä½¿ç”¨ Codable</li>
<li>Codable ç»™æˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆä¾¿åˆ©</li>
</ul>

<h1 id="å¼€å‘å¹³å°">å¼€å‘å¹³å°</h1>

<ul>
<li>macOS 10.14.4</li>
<li>Swift 5</li>
<li>xcode 10.2</li>
</ul>

<h1 id="swift-çš„-codable">Swift çš„ Codable</h1>

<blockquote>
<p>In a nutshell, Encoding is the process of transforming your own custom type, class or struct to external data representation type like JSON or plist or something else &amp; Decoding is the process of transforming external data representation type like JSON or plist to your own custom type, class or struct.</p>
</blockquote>

<h2 id="å¯ä»¥ä½¿ç”¨çš„åè®®">å¯ä»¥ä½¿ç”¨çš„åè®®</h2>

<p>Swift çš„æ ‡å‡†åº“ä¸­åŒ…å«äº†ç”¨äºè‡ªå®šä¹‰ç±»å‹(ç»“æ„ä½“ã€ç±»)ä¸å…¶å®ƒè¡¨ç¤ºå½¢å¼(JSONã€Property List æˆ– äºŒè¿›åˆ¶)çš„æ•°æ®ä¹‹é—´ç›¸äº’è½¬æ¢çš„åè®®ï¼š</p>

<ul>
<li><p><strong>Encodable</strong>: ç”¨äºè‡ªå®šä¹‰ç±»å‹å‘ JSON æˆ– Property List çš„è½¬æ¢ï¼Œåè®®åŒ…å«ä¸€ä¸ªæ–¹æ³•</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">encode</span><span class="p">(</span><span class="n">to</span><span class="p">:)</span>â€Š</code></pre></div></li>

<li><p><strong>Decodable</strong>: ç”¨äºè‡ª JSON æˆ– Property List æ•°æ®å‘è‡ªå®šä¹‰ç±»å‹çš„è½¬æ¢ï¼Œåè®®åŒ…å«ä¸€ä¸ªæ–¹æ³•</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">init</span><span class="p">(</span><span class="n">from</span><span class="p">:)</span></code></pre></div></li>

<li><p><strong>Codable</strong>: åŒ…å« Encodable å’Œ Decodable ä¸¤æ–¹é¢çš„è½¬æ¢ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">typealias</span> <span class="n">Codable</span> <span class="p">=</span> <span class="n">Decodable</span> <span class="o">&amp;</span> <span class="n">Encodable</span></code></pre></div></li>
</ul>

<p>ä½¿ç”¨ Codable åè®® çš„ Encodable å’Œ Decodableï¼Œå¯ä»¥è®©æˆ‘ä»¬è½»æ¾å®ç°è‡ªå®šä¹‰æ•°æ®ç±»å‹çš„åºåˆ—åŒ–ä»¥åŠå¾—åˆ°ç›¸åº”æ•°æ®ç±»å‹çš„å®ä¾‹å¯¹è±¡ã€‚æŒ‰ç…§å­—é¢æ„æ€ï¼Œæˆ‘ä»¬åé¢å°†æ•°æ®ç±»å‹å®ä¾‹å‘ JSON æˆ– Property List è½¬æ¢çš„è¿‡ç¨‹ç§°ä¸ºç¼–ç ï¼Œåä¹‹ï¼Œç§°ä¸ºè§£ç ï¼</p>

<h2 id="éµå¾ªåè®®çš„ç±»å‹">éµå¾ªåè®®çš„ç±»å‹</h2>

<p>å¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°è‡ªå®šä¹‰ç±»å‹æˆ–æ•°æ®æ¨¡å‹çš„ç¼–ç å’Œè§£ç ï¼Œå¿…é¡»éµå¾ª Codable åè®®ï¼Swift åŸºæœ¬çš„å†…å»ºç±»å‹å·²ç»æ˜¯ Codable çš„äº†ï¼Œæ¯”å¦‚ <code>String</code>ã€<code>Int</code>ã€<code>Double</code>ã€<code>Date</code> å’Œ <code>Data</code>ã€‚å¦å¤–åƒ <code>Array</code>ã€<code>Dictionary</code> å’Œ <code>Optional</code> ä¹Ÿéƒ½æ˜¯éµå¾ª Codable åè®®çš„ï¼Œå¯ä»¥è¿›è¡Œç¼–ç å’Œè§£ç ã€‚</p>

<p>å¦‚ä¸‹è‡ªå®šä¹‰çš„ç»“æ„ä½“ Person å’Œ Teamï¼Œéµå¾ª Codable åè®®ï¼ŒåŒæ—¶ç»“æ„ä½“çš„æ‰€æœ‰å±æ€§è¦ä¹ˆæ˜¯æ ‡å‡†çš„ Codable ç±»å‹ï¼Œè¦ä¹ˆåŒ…å« Codable ç±»å‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">struct</span> <span class="nc">Person</span> <span class="p">:</span> <span class="n">Codable</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">id</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">name</span><span class="p">:</span> <span class="nb">String</span>
    <span class="kd">var</span> <span class="nv">age</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">isMale</span><span class="p">:</span> <span class="nb">Bool</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">Team</span><span class="p">:</span> <span class="n">Codable</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">master</span><span class="p">:</span> <span class="n">Person</span>
    <span class="kd">var</span> <span class="nv">memebers</span><span class="p">:</span> <span class="p">[</span><span class="n">Person</span><span class="p">]</span>
<span class="p">}</span></code></pre></div>
<h2 id="codable-ç±»å‹çš„ç¼–è§£ç ">Codable ç±»å‹çš„ç¼–è§£ç </h2>

<p>å¯¹äº Codable çš„ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨ç›¸åº”çš„ç¼–ç å™¨å¯¹æˆ‘ä»¬çš„æ•°æ®è¿›è¡Œç¼–ç å’Œè§£ç ï¼Œå…·ä½“ç»†èŠ‚å¯ä»¥å‚è€ƒåé¢çš„å°èŠ‚ï¼Œæœ‰ä¸¤ç§ç¼–ç å™¨å¯ç”¨ï¼š</p>

<ul>
<li><strong>JSON</strong>

<ul>
<li><code>JSONEncoder</code>: å°† Codable ç±»å‹æ•°æ®ç¼–ç ä¸º JSON æ•°æ®</li>
<li><code>JSONDecoder</code>: å°† JSON æ•°æ®è§£ç ä¸ºæŒ‡å®šçš„ Codable ç±»å‹æ•°æ®</li>
</ul></li>
<li><strong>Property List</strong>

<ul>
<li><code>PropertyListEncoder</code>: å°† Codable ç±»å‹æ•°æ®ç¼–ç ä¸º plist æ•°æ®</li>
<li><code>PropertyListDecoder</code>: å°† plist æ•°æ®è§£ç ä¸ºæŒ‡å®šçš„ Codable ç±»å‹æ•°æ®</li>
</ul></li>
</ul>

<h1 id="codable-çš„ä½¿ç”¨">Codable çš„ä½¿ç”¨</h1>

<p>ä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·ç ”ç©¶ä¸€ä¸‹ Codable çš„ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬åªå°è¯• Codable ç±»å‹æ•°æ®ä¸ JSON æ•°æ®çš„ç¼–ç è§£ç çš„å®ç°ã€‚</p>

<h2 id="ç¼–ç å’Œè§£ç ">ç¼–ç å’Œè§£ç </h2>

<h3 id="ä½¿ç”¨-jsonencoder-ç¼–ç ">ä½¿ç”¨ <code>JSONEncoder</code> ç¼–ç </h3>

<p>éå¸¸ç®€å•ï¼Œåªéœ€è°ƒç”¨ <code>JSONEncoder</code> çš„ <code>encode(_:)</code> æ–¹æ³•å°±èƒ½å°† Codable ç±»å‹è½¬æ¢ä¸º JSON æ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">jack</span> <span class="p">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s">&#34;Jack&#34;</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="n">isMale</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">jackData</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONEncoder</span><span class="p">().</span><span class="n">encode</span><span class="p">(</span><span class="n">jack</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">jackData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºè½¬æ¢å¾—åˆ°çš„ JSON å­—ç¬¦ä¸²æ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Json" data-lang="Json"><span class="p">{</span><span class="nt">&#34;age&#34;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span><span class="nt">&#34;id&#34;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">&#34;isMale&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&#34;name&#34;</span><span class="p">:</span><span class="s2">&#34;Jack&#34;</span><span class="p">}</span></code></pre></div>
<p>æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè§£ç åŒæ ·å¦‚æ­¤ç®€å•ï¼</p>

<h3 id="ä½¿ç”¨-jsondecoder-è§£ç ">ä½¿ç”¨ <code>JSONDecoder</code> è§£ç </h3>

<p>åªéœ€è¦è°ƒç”¨ <code>JSONDecoder</code> å®ä¾‹çš„ <code>decode(_:from:)</code> æ–¹æ³•å°±èƒ½å°† JSON å¯¹è±¡è½¬æ¢å¾—åˆ°æŒ‡å®šç±»å‹çš„å®ä¾‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">jsonString</span> <span class="p">=</span> <span class="s">&#34;&#34;&#34;
</span><span class="s">{
</span><span class="s">    &#34;</span><span class="n">id</span><span class="s">&#34;: 2,
</span><span class="s">    &#34;</span><span class="n">name</span><span class="s">&#34;: &#34;</span><span class="n">lucy</span><span class="s">&#34;,
</span><span class="s">    &#34;</span><span class="n">age</span><span class="s">&#34;: 11,
</span><span class="s">    &#34;</span><span class="n">isMale</span><span class="s">&#34;: false
</span><span class="s">}
</span><span class="s">&#34;&#34;&#34;</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">json</span> <span class="p">=</span> <span class="n">jsonString</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="n">using</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">lucy</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONDecoder</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="n">Person</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="n">json</span><span class="p">)</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">lucy</span><span class="p">!)</span>
<span class="p">}</span></code></pre></div>
<p>æ‰“å°ç»“æœï¼Œå¦‚æ‚¨æ‰€æ–™ï¼Œå°† JSON å­—ç¬¦ä¸²æˆåŠŸçš„è§£ç ä¸ºäº† Person å®ä¾‹å¯¹è±¡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">Person</span><span class="p">(</span><span class="n">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s">&#34;lucy&#34;</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="n">isMale</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span></code></pre></div>
<h3 id="codable-ä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤">Codable ä½¿ç”¨çš„åŸºæœ¬æ­¥éª¤</h3>

<p>ç»¼ä¸Šè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹ï¼Œè¦ä½¿ç”¨ Swift çš„ç‰¹æ€§å…¶å®å¾ˆç®€å•ï¼Œåˆ†ä¸¤æ­¥ï¼š</p>

<ul>
<li>è‡ªå®šä¹‰ç±»å‹éµå¾ª Codable åè®®</li>
<li>ä½¿ç”¨ç¼–ç å™¨å®ç°è‡ªå®šä¹‰ç±»å‹æ•°æ®çš„ç¼–ç å’Œè§£ç </li>
</ul>

<h2 id="ä½¿ç”¨-codingkeys-æ¥é€‰æ‹©éƒ¨åˆ†å±æ€§æ˜¯-codable-çš„">ä½¿ç”¨ CodingKeys æ¥é€‰æ‹©éƒ¨åˆ†å±æ€§æ˜¯ Codable çš„</h2>

<p>ä¹Ÿè®¸æ­¤æ—¶æ­¤åˆ»æ‚¨å¯èƒ½ä¼šæƒ³ï¼š</p>

<ul>
<li>å¦‚æœä¸æƒ³æŠŠè‡ªå®šä¹‰æ•°æ®æ‰€æœ‰çš„å±æ€§ç¼–ç åˆ° JSON è¯¥æ€ä¹ˆåŠï¼Ÿ</li>
<li>å¦‚æœ JSON æ•°æ®ä¸­çš„é”®åä¸è‡ªå®šä¹‰ç±»å‹ä¸­çš„å±æ€§åä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ</li>
</ul>

<p>è¯·æ”¾å¿ƒï¼Œæ‚¨æƒ³åˆ°çš„ï¼ŒApple åŒæ ·ç…§é¡¾åˆ°äº†ï¼å°±æ˜¯æœ¬èŠ‚è¦è®²çš„ <code>CodingKeys</code></p>

<blockquote>
<p>Codable types can declare a special nested enumeration named CodingKeys that conforms to the CodingKey protocol. When this enumeration is present, its cases serve as the authoritative list of properties that must be included when instances of a codable type are encoded or decoded. The names of the enumeration cases should match the names you&rsquo;ve given to the corresponding properties in your type.</p>
</blockquote>

<p><code>CodingKeys</code> æ˜¯æˆ‘ä»¬åœ¨è‡ªå®šä¹‰æ•°æ®ç±»å‹ä¸­å®šä¹‰çš„æšä¸¾ï¼Œæœ‰ä»¥ä¸‹ä¸¤ç‚¹è¦æ±‚ï¼š</p>

<ul>
<li>æšä¸¾å…ƒç´ ç±»å‹æ˜¯ Stringï¼Œå¹¶ä¸”éµå¾ª CodingKey åè®®ã€</li>
<li>æšä¸¾å…ƒç´ çš„åç§°å¿…é¡»ä¸è‡ªå®šä¹‰ç±»å‹ä¸­çš„å±æ€§åç§°ä¿æŒä¸€è‡´</li>
</ul>

<p>é‚£ä¹ˆæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹å‰é¢çš„ä¸¤ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³ï¼š</p>

<ul>
<li>CodingKeys ä¸­çš„å…ƒç´ ä¸è‡ªå®šä¹‰æ•°æ®ç±»å‹ä¸­çš„å±æ€§åç§°å¯¹åº”ï¼Œåªè¦åˆ é™¤å¯¹åº”å±æ€§çš„æšä¸¾å…ƒç´ å°±å¯ä»¥å®ç°ç¼–ç æ—¶å¯¹åº”å±æ€§çš„å¿½ç•¥ï¼Œè¿™æ ·å°±è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¦æ³¨æ„ï¼Œä¸ç¼–ç çš„å±æ€§å¿…é¡»èµ‹äºˆé»˜è®¤å€¼</li>
<li>ä¸º CodingKeys ä¸­æšä¸¾å…ƒç´ è‡ªå®šä¹‰ String å€¼ä¸ JSON æ•°æ®ä¸­çš„é”®åå¯¹åº”èµ·æ¥ï¼Œå°±èƒ½è§£å†³ç¬¬äºŒä¸ªé—®é¢˜ã€‚</li>
</ul>

<p>å‡å¦‚æƒ³ä¸º Person ç»“æ„ä½“æ·»åŠ ä¸€ä¸ª <code>description</code> çš„å±æ€§ï¼ŒåŒæ—¶ä¸æƒ³è®©å®ƒå‚ä¸ç¼–ç å’Œè§£ç ï¼Œå¦å¤– JSON æ•°æ®ä¸­çš„é”®åæ˜¯ä¸­æ–‡çš„ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ„ Person ç±»ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">struct</span> <span class="nc">Person</span> <span class="p">:</span> <span class="n">Codable</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">id</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">name</span><span class="p">:</span> <span class="nb">String</span>
    <span class="kd">var</span> <span class="nv">age</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">isMale</span><span class="p">:</span> <span class="nb">Bool</span>
    <span class="kd">var</span> <span class="nv">description</span><span class="p">:</span> <span class="nb">String</span> <span class="p">=</span> <span class="s">&#34;person&#34;</span>
    
    <span class="kd">enum</span> <span class="nc">CodingKeys</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">CodingKey</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">id</span> <span class="p">=</span> <span class="s">&#34;èº«ä»½è¯å·&#34;</span>
        <span class="k">case</span> <span class="n">name</span> <span class="p">=</span> <span class="s">&#34;å§“å&#34;</span>
        <span class="k">case</span> <span class="n">age</span> <span class="p">=</span> <span class="s">&#34;å¹´é¾„&#34;</span>
        <span class="k">case</span> <span class="n">isMale</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹å°†è‡ªå®šä¹‰æ•°æ®è½¬æ¢ä¸º JSON ä¼šæ˜¯æ€æ ·çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">tim</span> <span class="p">=</span> <span class="n">Person</span><span class="p">(</span><span class="n">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="s">&#34;tim&#34;</span><span class="p">,</span> <span class="n">age</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">isMale</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">timData</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONEncoder</span><span class="p">().</span><span class="n">encode</span><span class="p">(</span><span class="n">tim</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">timData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>ç¼–ç å¾—åˆ°çš„ JSON æ•°æ®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Json" data-lang="Json"><span class="p">{</span><span class="nt">&#34;å§“å&#34;</span><span class="p">:</span><span class="s2">&#34;tim&#34;</span><span class="p">,</span><span class="nt">&#34;isMale&#34;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nt">&#34;å¹´é¾„&#34;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="nt">&#34;èº«ä»½è¯å·&#34;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span></code></pre></div>
<h2 id="è‡ªå®šä¹‰-encode-å’Œ-decode">è‡ªå®šä¹‰ encode å’Œ decode</h2>

<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Size ç»“æ„ä½“ã€Point ç»“æ„ä½“å’Œ Rect ç»“æ„ä½“å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">struct</span> <span class="nc">Size</span><span class="p">:</span> <span class="n">Codable</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">width</span><span class="p">:</span> <span class="nb">Double</span>
    <span class="kd">var</span> <span class="nv">height</span><span class="p">:</span> <span class="nb">Double</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">Point</span><span class="p">:</span> <span class="n">Codable</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">x</span><span class="p">:</span> <span class="nb">Double</span>
    <span class="kd">var</span> <span class="nv">y</span><span class="p">:</span> <span class="nb">Double</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">Rect</span><span class="p">:</span> <span class="n">Codable</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">position</span><span class="p">:</span> <span class="n">Point</span>
    <span class="kd">var</span> <span class="nv">size</span><span class="p">:</span> <span class="n">Size</span>
<span class="p">}</span></code></pre></div>
<p>æˆ‘ä»¬åˆ©ç”¨ä¸€å¼€å§‹å®šä¹‰çš„ Rect ç»“æ„ä½“å£°æ˜ä¸€ä¸ª rectï¼Œåæ ‡åœ¨åŸç‚¹ï¼Œå®½é«˜éƒ½ä¸º 2.0ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º JSON æ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">rect</span> <span class="p">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="n">Size</span><span class="p">(</span><span class="n">width</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">))</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">rectData</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONEncoder</span><span class="p">().</span><span class="n">encode</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">rectData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>team å¯¹åº”çš„ JSON å­—ç¬¦ä¸²å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Json" data-lang="Json"><span class="p">{</span><span class="nt">&#34;position&#34;</span><span class="p">:{</span><span class="nt">&#34;x&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&#34;y&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span><span class="nt">&#34;size&#34;</span><span class="p">:{</span><span class="nt">&#34;width&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&#34;height&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">}}</span></code></pre></div>
<p>ä½†æ˜¯å‘¢ï¼Œåé‡Œä¸æƒ³è®© JSON æ•°æ®ä¸­ x å’Œ y åµŒå¥—åœ¨ positon ä¸­ï¼Œä¹Ÿä¸æƒ³ width å’Œ height åµŒå¥—åœ¨ size ä¸­ï¼Œè€Œæ˜¯åƒä¸‹é¢çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Json" data-lang="Json"><span class="p">{</span>
    <span class="nt">&#34;x&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&#34;y&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&#34;width&#34;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
    <span class="nt">&#34;height&#34;</span><span class="p">:</span> <span class="mf">2.0</span>
<span class="p">}</span></code></pre></div>
<p>è¦å®ç°è¿™ç§éœ€æ±‚ï¼Œæˆ‘ä»¬å¿…é¡»è‡ªå®šä¹‰ <code>Encodable</code> åè®®çš„ <code>encode(_:)</code> æ–¹æ³• å’Œ <code>Decodable</code> åè®®çš„ <code>init(from:)</code> æ–¹æ³•ï¼Œå®ç°è‡ªå®šä¹‰çš„ç¼–ç è§£ç é€»è¾‘ï¼Œå¤§ä½“åˆ†ä¸‹é¢å‡ æ­¥ï¼š</p>

<ul>
<li>å®šä¹‰ CodingKeys æšä¸¾ï¼Œå…ƒç´ ä¸ç›®æ ‡ JSON æ•°æ®çš„é”®åå¯¹åº”ï¼Œå®šä¹‰ x å’Œ y è€Œä¸æ˜¯ positionï¼Œå®šä¹‰ width å’Œ height è€Œä¸æ˜¯ size</li>
<li>åˆ é™¤ Rect å®šä¹‰ä¸­çš„ Codable</li>
<li>æ‰©å±• Rect éµå¾ª Encodable åè®®ï¼Œå¹¶å®ç° <code>encode(_:)</code> æ–¹æ³•</li>
<li>æ‰©å±• Rect éµå¾ª Decodable åè®®ï¼Œå¹¶å®ç° <code>init(from:)</code> æ–¹æ³•</li>
</ul>

<p>æœ€ç»ˆ Rect å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">struct</span> <span class="nc">Rect</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">position</span><span class="p">:</span> <span class="n">Point</span>
    <span class="kd">var</span> <span class="nv">size</span><span class="p">:</span> <span class="n">Size</span>
    
    <span class="kd">enum</span> <span class="nc">CodingKeys</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">CodingKey</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">x</span>
        <span class="k">case</span> <span class="n">y</span>
        <span class="k">case</span> <span class="n">width</span>
        <span class="k">case</span> <span class="n">height</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">Rect</span><span class="p">:</span> <span class="n">Encodable</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">encode</span><span class="p">(</span><span class="n">to</span> <span class="n">encoder</span><span class="p">:</span> <span class="n">Encoder</span><span class="p">)</span> <span class="kr">throws</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nv">container</span> <span class="p">=</span> <span class="n">encoder</span><span class="p">.</span><span class="n">container</span><span class="p">(</span><span class="n">keyedBy</span><span class="p">:</span> <span class="n">CodingKeys</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>
        <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">x</span><span class="p">)</span>
        <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">position</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">width</span><span class="p">)</span>
        <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">encode</span><span class="p">(</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">height</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">Rect</span><span class="p">:</span> <span class="n">Decodable</span> <span class="p">{</span>
    <span class="kd">init</span><span class="p">(</span><span class="n">from</span> <span class="n">decoder</span><span class="p">:</span> <span class="n">Decoder</span><span class="p">)</span> <span class="kr">throws</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">container</span> <span class="p">=</span> <span class="k">try</span> <span class="n">decoder</span><span class="p">.</span><span class="n">container</span><span class="p">(</span><span class="n">keyedBy</span><span class="p">:</span> <span class="n">CodingKeys</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">x</span> <span class="p">=</span> <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="nb">Double</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">x</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">y</span> <span class="p">=</span> <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="nb">Double</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">position</span> <span class="p">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">width</span> <span class="p">=</span> <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="nb">Double</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">width</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">height</span> <span class="p">=</span> <span class="k">try</span> <span class="n">container</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="nb">Double</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="p">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">size</span> <span class="p">=</span> <span class="n">Size</span><span class="p">(</span><span class="n">width</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="n">height</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>æµ‹è¯•ä¸€ä¸‹ç¼–ç å®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">rect</span> <span class="p">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="n">Size</span><span class="p">(</span><span class="n">width</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">))</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">rectData</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONEncoder</span><span class="p">().</span><span class="n">encode</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">rectData</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>å¾—åˆ°çš„ JSON æ•°æ®çš„æ‰“å°ç»“æœä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Json" data-lang="Json"><span class="p">{</span><span class="nt">&#34;y&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&#34;x&#34;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="nt">&#34;width&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">&#34;height&#34;</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span></code></pre></div>
<p>æµ‹è¯•ä¸€ä¸‹è§£ç çš„å®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">rectString</span> <span class="p">=</span> <span class="s">&#34;&#34;&#34;
</span><span class="s">{
</span><span class="s">    &#34;</span><span class="n">x</span><span class="s">&#34;: 3,
</span><span class="s">    &#34;</span><span class="n">y</span><span class="s">&#34;: 3,
</span><span class="s">    &#34;</span><span class="n">width</span><span class="s">&#34;: 2.5,
</span><span class="s">    &#34;</span><span class="n">height</span><span class="s">&#34;: 2.5
</span><span class="s">}
</span><span class="s">&#34;&#34;&#34;</span>

<span class="k">if</span> <span class="kd">let</span> <span class="nv">json</span> <span class="p">=</span> <span class="n">rectString</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="n">using</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">newRect</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONDecoder</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="n">Rect</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="n">json</span><span class="p">)</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">newRect</span><span class="p">!)</span>
<span class="p">}</span></code></pre></div>
<p>å¾—åˆ°çš„ newRect å®ä¾‹å¯¹è±¡æ‰“å°ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">:</span> <span class="n">__lldb_expr_21</span><span class="p">.</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="n">__lldb_expr_21</span><span class="p">.</span><span class="n">Size</span><span class="p">(</span><span class="n">width</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">))</span></code></pre></div>
<h1 id="codable-å¸¦æ¥çš„ç¦åˆ©">Codable å¸¦æ¥çš„ç¦åˆ©</h1>

<p>ä¸Šé¢è¯´äº†è¿™ä¹ˆå¤šçš„ Codable ï¼Œåˆ°åº•æˆ‘ä»¬èƒ½ç”¨å®ƒæ¥å¹²ä»€ä¹ˆå‘¢ï¼Œæœ€ä¸»è¦çš„ä¸¤ä¸ªåº”ç”¨æ–¹å‘å°±æ˜¯è‡ªå®šä¹‰ç±»å‹æ•°æ®æŒä¹…åŒ–å’Œç½‘ç»œé€šä¿¡ã€‚</p>

<h2 id="æ•°æ®æŒä¹…åŒ–">æ•°æ®æŒä¹…åŒ–</h2>

<p>å…¶ä¸­ä¸€ç§å¸¸ç”¨çš„æ•°æ®æŒä¹…åŒ–æ–¹å¼å°±æ˜¯å±æ€§åˆ—è¡¨(Property List)ï¼Œ<code>UserDefaults.standard</code> é€‚åˆå­˜å‚¨è½»é‡çº§çš„æœ¬åœ°æ•°æ®ï¼Œå…¶æä¾›äº†ä¸é»˜è®¤æ•°æ®åº“ç›¸äº¤äº’çš„ç¼–ç¨‹æ¥å£ã€‚å…¶å®å®ƒå­˜å‚¨åœ¨åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªplistæ–‡ä»¶é‡Œï¼Œè·¯å¾„ä¸ºåº”ç”¨æ²™ç›’Documentç›®å½•å¹³çº§çš„ <code>/Library/Prefereces</code> é‡Œã€‚å¦å¤–ï¼Œå…¶åªèƒ½å­˜å‚¨å¯ä»¥åºåˆ—åŒ–çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸€å¼€å§‹è¯´çš„é‚£äº›åŸºæœ¬ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ Codable çš„ï¼Œæ‰€ä»¥ä¸€æ—¦æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹éµå¾ªäº† Codable åè®®ï¼Œå³å¯åºåˆ—åŒ–äº†ï¼Œé‚£æˆ‘ä»¬çš„è‡ªå®šä¹‰ç±»å‹çš„æ•°æ®å¯ä»¥è‡ªç”±å­˜å–äº†ã€‚</p>

<p><strong>æ³¨æ„ï¼š</strong></p>

<ul>
<li>ä½¿ç”¨è¿™ç§æ–¹å¼ä¸€èˆ¬ç”¨äºå­˜å‚¨åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯</li>
<li>æ‰‹åŠ¨è°ƒç”¨ <code>synchronize</code> æ–¹æ³•å¯ä»¥ç«‹é©¬å°†æ•°æ®æŒä¹…åŒ–å­˜å‚¨</li>
</ul>

<p>è¿™é‡Œåªæ˜¯ä»¥è¿™ç§æ•°æ®æŒä¹…åŒ–ä¸ºä¾‹ï¼Œè®²ä¸€ä¸‹å¦‚ä½•æŒä¹…åŒ–è‡ªå®šä¹‰æ•°æ®ç±»å‹çš„æ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">rectDemo</span> <span class="p">=</span> <span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="n">Size</span><span class="p">(</span><span class="n">width</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">))</span>
<span class="k">if</span> <span class="kd">let</span> <span class="nv">demoData</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONEncoder</span><span class="p">().</span><span class="n">encode</span><span class="p">(</span><span class="n">rectDemo</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">UserDefaults</span><span class="p">.</span><span class="n">standard</span><span class="p">.</span><span class="kr">set</span><span class="p">(</span><span class="n">demoData</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span> <span class="s">&#34;rect-test&#34;</span><span class="p">)</span>
    <span class="n">UserDefaults</span><span class="p">.</span><span class="n">standard</span><span class="p">.</span><span class="n">synchronize</span><span class="p">()</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;saved successfully!&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">if</span> <span class="kd">let</span> <span class="nv">rectJson</span> <span class="p">=</span> <span class="n">UserDefaults</span><span class="p">.</span><span class="n">standard</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">forKey</span><span class="p">:</span> <span class="s">&#34;rect-test&#34;</span><span class="p">)</span> <span class="k">as</span><span class="p">?</span> <span class="n">Data</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">newRect</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONDecoder</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="n">Rect</span><span class="p">.</span><span class="kc">self</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="n">rectJson</span><span class="p">)</span>
    <span class="bp">print</span><span class="p">(</span><span class="n">newRect</span><span class="p">!)</span>
<span class="p">}</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">saved</span> <span class="n">successfully</span><span class="p">!</span>
<span class="n">Rect</span><span class="p">(</span><span class="n">position</span><span class="p">:</span> <span class="n">__lldb_expr_29</span><span class="p">.</span><span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">),</span> <span class="n">size</span><span class="p">:</span> <span class="n">__lldb_expr_29</span><span class="p">.</span><span class="n">Size</span><span class="p">(</span><span class="n">width</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">height</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">))</span></code></pre></div>
<h2 id="ç½‘ç»œé€šä¿¡">ç½‘ç»œé€šä¿¡</h2>

<p>HTTP/HTTPS ç½‘ç»œé€šä¿¡ä¸­ JSON æ˜¯å¸¸ç”¨çš„äº¤äº’æ•°æ®ç±»å‹ï¼Œå‡å¦‚æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç½‘ç»œæ¥å£ï¼Œå½“å¤–éƒ¨è¯·æ±‚çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ºå…¶è¿”å›ä¸€ä¸ªå“åº”ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Codable çš„ Response ç±»å‹ï¼Œå¯ä»¥æ–¹ä¾¿ç”Ÿæˆå“åº”æ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">struct</span> <span class="nc">Response</span><span class="p">:</span> <span class="n">Codable</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">ststus</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">message</span><span class="p">:</span> <span class="nb">String</span>
<span class="p">}</span>

<span class="kd">let</span> <span class="nv">res</span> <span class="p">=</span> <span class="n">Response</span><span class="p">(</span><span class="n">ststus</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="s">&#34;OK&#34;</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">resData</span> <span class="p">=</span> <span class="k">try</span><span class="p">?</span> <span class="n">JSONEncoder</span><span class="p">().</span><span class="n">encode</span><span class="p">(</span><span class="n">res</span><span class="p">)</span></code></pre></div>
<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>Swift 4 å¼€å§‹æ”¯æŒçš„ Codable å¤§å¤§ç®€åŒ–äº†å¯¹è‡ªå®šä¹‰ç±»å‹æ•°æ®åºåˆ—åŒ–çš„å®ç°ï¼Œç›¸ä¿¡æ‚¨ä¼šç”¨å¾—åˆ°ï¼</p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹æœ¬åœ°æ¶ˆæ¯é€šçŸ¥</title>
			<link>https://www.smslit.top/2019/03/17/macOS-dev-local-notification/</link>
			<pubDate>Sun, 17 Mar 2019 11:33:15 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/17/macOS-dev-local-notification/</guid>
			<description>macOS ä¸­çš„æ¶ˆæ¯æ¨é€åˆ†ä¸ºæœ¬åœ°æ¶ˆæ¯é€šçŸ¥å’Œè¿œç¨‹æ¶ˆæ¯é€šçŸ¥ï¼Œæœ¬æ–‡åé‡Œå°†ä»‹ç»ä¸€ä¸‹æœ¬åœ°æ¶ˆæ¯é€šçŸ¥ï¼Œå±•ç¤ºä¸€äº›å¸¸è§„çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ–¹ä¾¿å¤§å®¶äº†è§£æœ¬åœ°æ¶ˆæ¯æ¨é€çš„å®ç°è¿‡ç¨‹ã€‚ å¼€</description>
			<content type="html"><![CDATA[

<p>macOS ä¸­çš„æ¶ˆæ¯æ¨é€åˆ†ä¸ºæœ¬åœ°æ¶ˆæ¯é€šçŸ¥å’Œè¿œç¨‹æ¶ˆæ¯é€šçŸ¥ï¼Œæœ¬æ–‡åé‡Œå°†ä»‹ç»ä¸€ä¸‹æœ¬åœ°æ¶ˆæ¯é€šçŸ¥ï¼Œå±•ç¤ºä¸€äº›å¸¸è§„çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ–¹ä¾¿å¤§å®¶äº†è§£æœ¬åœ°æ¶ˆæ¯æ¨é€çš„å®ç°è¿‡ç¨‹ã€‚</p>

<h1 id="å¼€å‘å¹³å°">å¼€å‘å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="ç®€å•ä»‹ç»">ç®€å•ä»‹ç»</h1>

<p>æœ¬åœ°æ¶ˆæ¯é€šçŸ¥(Notification)æ˜¯ç”± App è¯·æ±‚ç”¨æˆ·æ¶ˆæ¯ä¸­å¿ƒ(User Notifications Center)è€Œæ¨é€çš„ï¼Œæˆ‘ä»¬çš„ App æ—¢æ˜¯æ¶ˆæ¯çš„æä¾›è€…åˆæ˜¯æ¶ˆæ¯çš„æ¥å—è€…ï¼Œä¸€ä¸ª App æœ€å¤šæ”¯æŒ 64 ä¸ªæ¶ˆæ¯é€šçŸ¥ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/sq37y.svg" alt="" /></p>

<h2 id="æ¶ˆæ¯é€šçŸ¥ç»„æˆ">æ¶ˆæ¯é€šçŸ¥ç»„æˆ</h2>

<p>ä¸€ä¸ªæ¶ˆæ¯é€šçŸ¥ä¸€èˆ¬åœ¨æ˜¾ç¤ºä¸Šçœ‹ç”±æ ‡é¢˜(title)ã€å‰¯æ ‡é¢˜(subtitle)ã€æ¶ˆæ¯å†…å®¹ã€logoå’ŒæŒ‰é’®ç»„æˆã€‚å¦å¤–è¿˜åŒ…æ‹¬æç¤ºéŸ³çš„è®¾ç½®å’Œç”¨æˆ·ä¿¡æ¯(ç”¨äºä¼ é€’æ•°æ®)ã€‚</p>

<h2 id="æ¶ˆæ¯é€šçŸ¥çš„ç±»å‹">æ¶ˆæ¯é€šçŸ¥çš„ç±»å‹</h2>

<p>æ¶ˆæ¯é€šçŸ¥ä¸»è¦æœ‰ä¸‰ç§ç±»å‹ï¼šæ— ã€æ¨ªå¹…(barner)å’Œæç¤º(alert)</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/gvq8q.png" alt="" /></p>

<p>é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ <em>æ¨ªå¹…</em> æ ·å¼ï¼</p>

<h2 id="é€šçŸ¥æ¨é€çš„è§¦å‘æ¡ä»¶">é€šçŸ¥æ¨é€çš„è§¦å‘æ¡ä»¶</h2>

<p>æ¶ˆæ¯æ¨é€çš„è§¦å‘æ¡ä»¶æœ‰å¤šç§æ–¹å¼ï¼Œæ¶ˆæ¯ä¸­å¿ƒä¼šæ ¹æ®æŒ‡å®šçš„è§¦å‘æ¡ä»¶æ¨é€æ¶ˆæ¯ï¼š</p>

<ul>
<li>ç›´æ¥æ¨é€é€šçŸ¥ï¼Œä¸€èˆ¬æ˜¯æ ¹æ® App ä¸­è‡ªèº«é€»è¾‘çµæ´»æ‰‹åŠ¨è§¦å‘</li>
<li>æŒ‰ç…§æŒ‡å®šæ—¶é—´é—´éš”æ¨é€é€šçŸ¥ï¼Œå¯ä»¥è®¾ç½®ä¸ºé‡å¤æˆ–è€…ä¸é‡å¤</li>
<li>æ ¹æ®æŒ‡å®šçš„æ—¥æœŸæ—¶é—´æ¨é€é€šçŸ¥ï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦é‡å¤</li>
<li>æ ¹æ®åœ°ç†ä½ç½®æ¨é€é€šçŸ¥ï¼Œé€šå¸¸è¦è®¾ç½®ç»çº¬åº¦åæ ‡ä»¥åŠèŒƒå›´(æ–¹åœ†è·ç¦»)</li>
</ul>

<h2 id="æ¶ˆæ¯é€šçŸ¥çš„å¤„ç†">æ¶ˆæ¯é€šçŸ¥çš„å¤„ç†</h2>

<p>æœ¬åœ°æ¶ˆæ¯é€šçŸ¥é€šè¿‡ç”¨æˆ·æ¶ˆæ¯é€šçŸ¥ä¸­å¿ƒçš„æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œç®¡ç†ï¼Œæ ¹æ®é€šçŸ¥çš„è§¦å‘æ¡ä»¶æ¨é€çš„æ¶ˆæ¯ä¼šä¾æ¬¡å­˜æ”¾åˆ°è¿™ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åä¾æ¬¡é€šçŸ¥ç»™ Appï¼Œè€Œ App å¯ä»¥é€šè¿‡å¯¹æ¶ˆæ¯ä¸­å¿ƒçš„ä»£ç†å®ç°ä»£ç†æ–¹æ³•å¯¹æ¶ˆæ¯é€šçŸ¥è¡Œä¸ºè¿›è¡Œç›¸åº”å¤„ç†ã€‚</p>

<h2 id="æ¶ˆæ¯é€šçŸ¥çš„ç®¡ç†">æ¶ˆæ¯é€šçŸ¥çš„ç®¡ç†</h2>

<p>æ¶ˆæ¯é€šçŸ¥çš„ç®¡ç†ç”±é€šçŸ¥ä¸­å¿ƒå®Œæˆï¼ŒåŒ…æ‹¬æ¶ˆæ¯é€šçŸ¥çš„æ³¨å†Œã€åˆ é™¤ã€æ¨é€ä»¥åŠæƒé™ã€‚</p>

<h3 id="æ¶ˆæ¯é€šçŸ¥çš„æ³¨å†Œ">æ¶ˆæ¯é€šçŸ¥çš„æ³¨å†Œ</h3>

<p>è¦æƒ³è®© App é…ç½®å¥½çš„é€šçŸ¥èƒ½å¤ŸæŒ‰ç…§é¢„æœŸè¿›è¡Œæ¨é€ï¼Œå¿…é¡»è¦å°†é€šçŸ¥æ³¨å†Œåˆ°é€šçŸ¥ä¸­å¿ƒã€‚</p>

<h3 id="æ¶ˆæ¯é€šçŸ¥çš„æ¨é€">æ¶ˆæ¯é€šçŸ¥çš„æ¨é€</h3>

<p>é€šçŸ¥ä¸­å¿ƒä¼šæ—¶åˆ»ç›‘å¬ç€æ¯ä¸ªæ¶ˆæ¯é€šçŸ¥ï¼Œä¸€æ—¦æ»¡è¶³è§¦å‘æ¡ä»¶å°±ä¼šåƒæ¶ˆæ¯é€šçŸ¥é˜Ÿåˆ—ä¸­æ¨é€æ¶ˆæ¯ã€‚</p>

<h3 id="æ¶ˆæ¯é€šçŸ¥çš„åˆ é™¤">æ¶ˆæ¯é€šçŸ¥çš„åˆ é™¤</h3>

<p>æœ‰æ—¶éœ€è¦å…³é—­å·²ç»æ³¨å†Œçš„æ¶ˆæ¯é€šçŸ¥çš„æ¨é€æ´»åŠ¨ï¼Œé€šçŸ¥ä¸­å¿ƒå¯ä»¥å°†æŒ‡å®šæ¶ˆæ¯é€šçŸ¥åˆ é™¤ï¼Œä¸å†ç›‘ç®¡ã€‚</p>

<h3 id="æ¶ˆæ¯é€šçŸ¥çš„æƒé™">æ¶ˆæ¯é€šçŸ¥çš„æƒé™</h3>

<p>åœ¨ macOS çš„ç³»ç»Ÿåå¥½è®¾ç½®ä¸­å¯ä»¥è®¾ç½®æŒ‡å®šåº”ç”¨çš„é€šçŸ¥æƒé™ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/n1q5z.png" alt="" /></p>

<p>è¿™äº›é€šçŸ¥æƒé™åœ¨ App ä¸­å¯ä»¥ç”±é€šçŸ¥ä¸­å¿ƒè¿›è¡Œç®¡ç†ï¼Œé€šå¸¸å°±æ˜¯æ¶ˆæ¯å¼¹çª—å’Œå£°éŸ³æ’­æ”¾ä¸¤ç‚¹ã€‚</p>

<h2 id="å…³äºå®ç°">å…³äºå®ç°</h2>

<p>ä¸Šé¢è¯´äº†æœ¬åœ°æ¶ˆæ¯é€šçŸ¥çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå’Œç®€å•ä»‹ç»ï¼Œé‚£ä¹ˆå®ç°æœ¬åœ°æ¶ˆæ¯é€šçŸ¥çš„æµç¨‹å°±å¾ˆæ¸…æ¥šäº†ï¼š</p>

<ul>
<li>æ¶ˆæ¯é€šçŸ¥çš„é…ç½®ï¼ŒåŒ…æ‹¬è§¦å‘æ¡ä»¶ã€æ¶ˆæ¯é€šçŸ¥ä¸­å†…å®¹</li>
<li>æ³¨å†Œæ¶ˆæ¯é€šçŸ¥åˆ°æ¶ˆæ¯é€šçŸ¥ä¸­å¿ƒ</li>
<li>å®ç°æ¶ˆæ¯é€šçŸ¥ä¸­å¿ƒçš„ä»£ç†æ–¹æ³•ï¼Œä»è€Œå®Œæˆå¯¹æ¶ˆæ¯çš„å¤„ç†</li>
</ul>

<p>ç›®å‰çœ‹ Apple å®˜æ–¹çš„å¼€å‘æ¥å£æœ‰ä¸¤å¥—ï¼š</p>

<ul>
<li>ä¼ ç»Ÿçš„æ¶ˆæ¯é€šçŸ¥æ¥å£ï¼Œåœ¨ <code>Foundation</code> æ¡†æ¶ä¸­å®ç°ï¼ŒSDK æ”¯æŒæ˜ç¡®æ ‡è®° <code>macOS 10.8â€“10.14</code> <code>Deprecated</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ 10.14 ä¹‹åä¾¿åºŸå¼ƒäº†</li>
<li>æœ€æ–°çš„æ¶ˆæ¯é€šçŸ¥æ¥å£ï¼Œä¸å¤šä¸ªè½¯ä»¶å¹³å°(iOSã€watchOSã€tvOS)å…±ç”¨ï¼Œä½¿ç”¨ <code>UserNotifacations</code> æ¡†æ¶ï¼ŒSDK æ”¯æŒ

<ul>
<li>iOS 10.0+</li>
<li>macOS 10.14+</li>
<li>tvOS 10.0+</li>
<li>watchOS 3.0+</li>
</ul></li>
</ul>

<p>ä¸éš¾çœ‹å‡º Apple çš„è½¯ä»¶å¼€å‘ç”Ÿæ€è“å›¾çš„å®å¤§ï¼Œè¿™ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…ï¼åœ¨ä¸‹é¢ä¼šä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­ä»‹ç»ä½¿ç”¨ä¸¤å¥—æ–¹æ³•çš„å®ç°è¿‡ç¨‹ï¼Œä¸è¿‡ä¼šç€é‡è®²æ–°çš„æ¥å£ï¼</p>

<h1 id="ç¤ºä¾‹">ç¤ºä¾‹</h1>

<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç®€å•çš„ Demo çœ‹ä¸€ä¸‹å¦‚ä½•å®ç°æœ¬åœ°æ¶ˆæ¯é€šçŸ¥ã€‚ä¸¤ä¸ª Demo ä¸­æˆ‘ä»¬åˆ†åˆ«è®¾ç½®ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶åˆ†åˆ«ç»‘å®š å„è‡ªçš„ Actionï¼Œä¸€ä¸ª Action ä¸­æŒ‰ç…§ä¼ ç»Ÿçš„æ–¹å¼å®ç°æ¶ˆæ¯é€šçŸ¥ï¼Œå¦ä¸€ä¸ª Action ä¸­æŒ‰ç…§æ–°çš„æ–¹å¼å®ç°ã€‚è¿™ä¸ªæ¶ˆæ¯é€šçŸ¥å…·æœ‰ä»¥ä¸‹å®ç°ï¼š</p>

<ul>
<li>ç«‹é©¬æ¨é€çš„</li>
<li>ä½¿ç”¨ç³»ç»Ÿå£°éŸ³ä½œä¸ºæç¤ºéŸ³ï¼Œæ¶ˆæ¯æ¨é€æ—¶æ’­æ”¾</li>
<li>é€šçŸ¥æºå¸¦æ•°æ®åœ¨ç”¨æˆ·ä¿¡æ¯ä¸­</li>
<li>é€šçŸ¥è®¾ç½®ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæ˜¯å…³é—­ä¸€ä¸ªæ˜¯ç¡®å®šæŒ‰é’®ï¼Œç‚¹å‡»åæ‰“å°ä¼ é€’çš„ç”¨æˆ·ä¿¡æ¯</li>
</ul>

<h2 id="ä¼ ç»Ÿå®ç°æ–¹å¼">ä¼ ç»Ÿå®ç°æ–¹å¼</h2>

<ul>
<li>æ‰“å¼€ Xcode æ–°å»ºä¸€ä¸ªä½¿ç”¨ storyboard çš„å·¥ç¨‹ï¼Œæˆ‘ä»¬å°±å‘½åä¸º <code>OldNotificationDemo</code></li>
<li>æ‰“å¼€ <code>Main.storyboard</code> ï¼Œåœ¨ view controller ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼ŒæŒ‰é’®æ ‡é¢˜æ”¹ä¸º <code>é€šçŸ¥</code></li>
<li>ä¸ºä¸¤ä¸ªæŒ‰é’®ç»‘å®š actionï¼Œåœ¨ <code>Main.storyboard</code> ä¸­æŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + å›è½¦é”® æ‰“å¼€è¾…åŠ©ç¼–è¾‘å™¨ï¼ŒæŒ‰ä½ <code>ctrl</code> é”®çš„åŒæ—¶é¼ æ ‡å·¦é”®æ‹–åŠ¨æŒ‰é’®åˆ° ViewController.swift çš„ ViewController ç±»ä¸­ç»‘å®š action ä¸º <code>oldNotificationAction</code></li>
</ul>

<h3 id="æ›´æ”¹é€šçŸ¥æ ·å¼">æ›´æ”¹é€šçŸ¥æ ·å¼</h3>

<p>ä¼ ç»Ÿæ¥å£ä¸‹ï¼ŒApp é»˜è®¤ä½¿ç”¨æ¨ªå¹…çš„é€šçŸ¥æ ·å¼ï¼Œä½†æ˜¯æ¨ªå¹…çš„é€šçŸ¥åªèƒ½æ˜¾ç¤º reply button å’Œ other buttonï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³è‡ªå·±å®šä¹‰ä¸€ä¸ªæŒ‰é’®ï¼Œåªèƒ½ä½¿ç”¨æç¤ºçš„æ ·å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæ›´æ”¹ä¸€ä¸‹é€šçŸ¥æ ·å¼ï¼Œéœ€è¦åœ¨ Info.plist æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„é”®â€”â€”<code>NSUserNotificationAlertStyle</code>ï¼Œå€¼è®¾ç½®ä¸º <code>alert</code>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/pg2li.png" alt="" /></p>

<h3 id="oldnotificationaction-å®ç°">oldNotificationAction å®ç°</h3>

<p>ä¸‹é¢åœ¨ oldNotificationAction ä¸­æ·»åŠ ä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•æ¶ˆæ¯é€šçŸ¥çš„å®ç°:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">oldNotificationAction</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">userNotification</span> <span class="p">=</span> <span class="n">NSUserNotification</span><span class="p">()</span>
    
    <span class="n">userNotification</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="s">&#34;ä¼ ç»Ÿæ–¹å¼&#34;</span>
    <span class="n">userNotification</span><span class="p">.</span><span class="n">subtitle</span> <span class="p">=</span> <span class="s">&#34;old&#34;</span>
    <span class="n">userNotification</span><span class="p">.</span><span class="n">informativeText</span> <span class="p">=</span> <span class="s">&#34;æˆ‘æ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„æ–¹å¼&#34;</span>
    
    <span class="n">userNotification</span><span class="p">.</span><span class="n">hasActionButton</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="n">userNotification</span><span class="p">.</span><span class="n">otherButtonTitle</span> <span class="p">=</span> <span class="s">&#34;å…³é—­&#34;</span>
    <span class="n">userNotification</span><span class="p">.</span><span class="n">actionButtonTitle</span> <span class="p">=</span> <span class="s">&#34;æ˜¾ç¤º&#34;</span>
    
    <span class="n">userNotification</span><span class="p">.</span><span class="n">identifier</span> <span class="p">=</span> <span class="s">&#34;OLD_NOTIFICATION_DEMO&#34;</span>
    <span class="n">userNotification</span><span class="p">.</span><span class="n">userInfo</span> <span class="p">=</span> <span class="p">[</span><span class="s">&#34;method&#34;</span><span class="p">:</span> <span class="s">&#34;old&#34;</span><span class="p">]</span>
    
    <span class="n">userNotification</span><span class="p">.</span><span class="n">soundName</span> <span class="p">=</span> <span class="n">NSUserNotificationDefaultSoundName</span>
    
    <span class="n">NSUserNotificationCenter</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>
    <span class="n">NSUserNotificationCenter</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="n">deliver</span><span class="p">(</span><span class="n">userNotification</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<ul>
<li>ä¸Šé¢ä½¿ç”¨æ¶ˆæ¯é€šçŸ¥ä¸­å¿ƒçš„ <code>deliver</code> æ–¹æ³•ç›´æ¥æ¨é€æ¶ˆæ¯ï¼Œå¦‚æœè¦è®¾ç½®å…¶å®ƒè§¦å‘æ–¹å¼çš„é€šçŸ¥éœ€è¦ä½¿ç”¨é€šçŸ¥ä¸­å¿ƒçš„ <code>scheduleNotification</code> æ–¹æ³•</li>
<li>å°†è¦ä¼ é€’ç”¨æˆ·æ•°æ®è®¾ç½®åœ¨ <code>userNotification</code> çš„ <code>userInfo</code> ä¸­</li>
<li>è®¾ç½®äº†é€šçŸ¥ä¸­å¿ƒçš„ä»£ç†ä¸º selfï¼Œæ‰€ä»¥è¦å®Œæˆå‰©ä¸‹çš„å®ç°ï¼Œè¿˜éœ€è¦å®ç°ä»£ç†æ–¹æ³•</li>
<li>è¦æ˜¾ç¤º action æŒ‰é’®å¿…é¡»è®¾ç½® <code>userNotification</code> çš„ <code>hasActionButton</code> ä¸º <code>true</code></li>
</ul>

<h3 id="å®ç°ä»£ç†æ–¹æ³•">å®ç°ä»£ç†æ–¹æ³•</h3>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">extension</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">NSUserNotificationCenterDelegate</span> <span class="p">{</span>
    
    <span class="c1">// å½“ App åœ¨å‰å°æ—¶æ˜¯å¦å¼¹å‡ºé€šçŸ¥</span>
    <span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="kc">_</span> <span class="n">center</span><span class="p">:</span> <span class="n">NSUserNotificationCenter</span><span class="p">,</span> <span class="n">shouldPresent</span> <span class="n">notification</span><span class="p">:</span> <span class="n">NSUserNotification</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span>
    <span class="p">}</span>
    
    <span class="c1">// æ¨é€æ¶ˆæ¯åçš„å›è°ƒ</span>
    <span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="kc">_</span> <span class="n">center</span><span class="p">:</span> <span class="n">NSUserNotificationCenter</span><span class="p">,</span> <span class="n">didDeliver</span> <span class="n">notification</span><span class="p">:</span> <span class="n">NSUserNotification</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">(</span><span class="n">timeIntervalSinceNow</span><span class="p">:</span> <span class="mi">0</span><span class="si">))</span><span class="s"> -&gt; æ¶ˆæ¯å·²ç»æ¨é€&#34;</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="c1">// ç”¨æˆ·ç‚¹å‡»äº†é€šçŸ¥åçš„å›è°ƒ</span>
    <span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="kc">_</span> <span class="n">center</span><span class="p">:</span> <span class="n">NSUserNotificationCenter</span><span class="p">,</span> <span class="n">didActivate</span> <span class="n">notification</span><span class="p">:</span> <span class="n">NSUserNotification</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">notification</span><span class="p">.</span><span class="n">activationType</span> <span class="p">{</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">actionButtonClicked</span><span class="p">:</span>
            <span class="kd">let</span> <span class="nv">method</span> <span class="p">=</span> <span class="n">notification</span><span class="p">.</span><span class="n">userInfo</span><span class="p">![</span><span class="s">&#34;method&#34;</span><span class="p">]</span> <span class="k">as</span><span class="p">!</span> <span class="nb">String</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;methods -&gt; </span><span class="si">\(</span><span class="n">method</span><span class="si">)</span><span class="s">&#34;</span><span class="p">)</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">contentsClicked</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;clicked&#34;</span><span class="p">)</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">replied</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;replied&#34;</span><span class="p">)</span>
        <span class="k">case</span> <span class="p">.</span><span class="n">additionalActionClicked</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;additional action&#34;</span><span class="p">)</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;action&#34;</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
<span class="p">}</span></code></pre></div>
<ul>
<li>ä»£ç†æ–¹æ³• <code>userNotificationCenter(:shouldPresent:)-&gt;Bool</code> ä¸­å¦‚æœè¿”å› falseï¼Œé‚£ä¹ˆ App çš„çª—å£æ˜¯å½“å‰ç³»ç»Ÿæ¡Œé¢æ˜¾ç¤ºçš„çª—å£ï¼Œå°±ä¸ä¼šå¼¹å‡ºé€šçŸ¥ä¹Ÿä¸ä¼šæ’­æ”¾æç¤ºéŸ³</li>
<li>é€šçŸ¥ä¸­å¿ƒæ¨é€æ¶ˆæ¯åä¼šè°ƒç”¨ <code>userNotificationCenter(:didDeliver:)</code></li>
<li>å½“ç”¨æˆ·æ“ä½œå¼¹çª—æ—¶ï¼Œæ¯”å¦‚ç‚¹å‡»å¼¹çª—ã€ç‚¹å‡»å¼¹çª—ä¸Šçš„æŒ‰é’®æ—¶ï¼Œ<code>userNotificationCenter(:didActivate)</code> æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œåœ¨å…¶ä¸­è¦å®ç°å¯¹å„ç§æ“ä½œçš„å¤„ç†</li>
</ul>

<h3 id="è¿è¡Œç¨‹åº">è¿è¡Œç¨‹åº</h3>

<p>è¿è¡Œç¨‹åºåç‚¹å‡»çª—å£ä¸­æŒ‰é’®ï¼Œä¸å‡ºæ„å¤–å°±ä¼šçœ‹åˆ°é€šçŸ¥å¼¹çª—ï¼ŒåŒæ—¶æ§åˆ¶å°ä¼šæ‰“å°æ¨é€æ¶ˆæ¯ï¼Œç‚¹å‡»å¼¹çª—çš„æŒ‰é’®æˆ–å¼¹çª—å¯ä»¥çœ‹åˆ°æ§åˆ¶å°æ‰“å°äº†ç›¸åº”çš„ä¿¡æ¯ï¼</p>

<p>Demo ä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/jfc5c.zip" target="_blank">OldNotificationDemo</a></p>

<h2 id="æœ€æ–°å®ç°æ–¹å¼">æœ€æ–°å®ç°æ–¹å¼</h2>

<ul>
<li>æ‰“å¼€ Xcode æ–°å»ºä¸€ä¸ªä½¿ç”¨ storyboard çš„å·¥ç¨‹ï¼Œæˆ‘ä»¬å°±å‘½åä¸º <code>NotificationDemo</code></li>
<li>æ‰“å¼€ <code>Main.storyboard</code> ï¼Œåœ¨ view controller ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼ŒæŒ‰é’®æ ‡é¢˜æ”¹ä¸º <code>é€šçŸ¥</code></li>
<li>ä¸ºä¸¤ä¸ªæŒ‰é’®ç»‘å®š actionï¼Œåœ¨ <code>Main.storyboard</code> ä¸­æŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + å›è½¦é”® æ‰“å¼€è¾…åŠ©ç¼–è¾‘å™¨ï¼ŒæŒ‰ä½ <code>ctrl</code> é”®çš„åŒæ—¶é¼ æ ‡å·¦é”®æ‹–åŠ¨æŒ‰é’®åˆ° ViewController.swift çš„ ViewController ç±»ä¸­ç»‘å®š action ä¸º <code>notificationAction</code></li>
</ul>

<h3 id="å…³äºæ ·å¼">å…³äºæ ·å¼</h3>

<p>æ–°çš„å®ç°æ–¹å¼ä¸ä¼ ç»Ÿçš„å®ç°æ–¹å¼ä¸åŒçš„æ˜¯ï¼Œåœ¨æ ·å¼ä¸º<strong>æ¨ªå¹…(barner)</strong>æ—¶ï¼Œå°†é¼ æ ‡æ”¾ç½®åœ¨é€šçŸ¥å¼¹çª—ä¸Šå¯ä»¥æ˜¾ç¤ºè‡ªå®šä¹‰çš„ action æŒ‰é’®ï¼Œæ‰€ä»¥è¿™é‡Œæ²¡å¿…è¦æ›´æ”¹æ ·å¼ï¼</p>

<h3 id="notificationaction-å®ç°">notificationAction å®ç°</h3>

<p>å› ä¸ºæ–°çš„æ–¹å¼ä½¿ç”¨çš„æ˜¯ <code>UserNotifications</code> æ¡†æ¶ï¼Œæ‰€ä»¥éœ€è¦å…ˆå¯¼å…¥æ¨¡å—ï¼Œåœ¨ <code>ViewController.swift</code> ä¸­æ·»åŠ ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">import</span> <span class="nc">UserNotifications</span></code></pre></div>
<p>æ–°çš„æ–¹å¼é€šçŸ¥çš„å®ç°è¿‡ç¨‹ä¸ä¼ ç»Ÿçš„æœ‰å¾ˆå¤§ä¸åŒï¼Œæµç¨‹å¤§æ¦‚æ˜¯ï¼š</p>

<ul>
<li>å…ˆåˆ›å»ºä¸€ä¸ª <code>UNMutableNotificationContent</code> æ¥è®¾ç½®é€šçŸ¥çš„å†…å®¹ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€å†…å®¹ã€å›¾ç‰‡ã€æ ‡è¯†ç¬¦ã€æç¤ºå£°éŸ³ä»¥åŠç”¨æˆ·æ•°æ®</li>
<li>(å¯é€‰) åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼Œè§¦å‘å™¨çš„ç±»å‹æœ‰å¾ˆå¤šï¼š

<ul>
<li><code>UNCalendarNotificationTrigger</code>: é€šè¿‡æŒ‡å®šæ—¥æœŸå’Œæ—¶é—´è¿›è¡Œè§¦å‘</li>
<li><code>UNTimeIntervalNotificationTrigger</code>: é€šè¿‡è®¾ç½®æŒ‡å®šæ—¶é—´é—´éš”å’Œæ˜¯å¦é‡å¤æ¥è§¦å‘</li>
<li><code>UNLocationNotificationTrigger</code>: é€šè¿‡æŒ‡å®šåœ°ç†åæ ‡åŠåœ°åŸŸèŒƒå›´æ¥è§¦å‘</li>
</ul></li>
<li>(å¯é€‰) åˆ›å»ºæ“ä½œé›†åˆï¼Œè¿™ä¸ªæ“ä½œé›†åˆç±»å‹ä¸º <code>UNNotificationCategory</code> å¯¹åº”é€šçŸ¥å¼¹çª—çš„æŒ‰é’®ï¼Œé›†åˆä¸­å…ƒç´ ä¸º <code>UNNotificationAction</code> å®ä¾‹ï¼Œéœ€è¦è°ƒç”¨é€šçŸ¥ä¸­å¿ƒçš„ <code>setNotificationCategories</code> æ–¹æ³•æ·»åŠ ç”Ÿæ•ˆã€‚

<ul>
<li>barneræ ·å¼ä¸‹ç›´æ¥æ˜¾ç¤ºä¸¤ä¸ªæ“ä½œé¡¹æŒ‰é’®</li>
<li>alert æ ·å¼ä¸‹é›†åˆä¸‹çš„æ“ä½œé¡¹ä¼šæ˜¾ç¤ºä¸º <code>æ“ä½œ</code> çš„å­é¡¹</li>
<li><code>UNNotificationAction</code> åˆ›å»ºæ—¶éœ€è¦æŒ‡å®šå”¯ä¸€æ ‡è¯†ç¬¦ã€æ˜¾ç¤ºåç§°å’Œé€‰é¡¹ï¼Œæ ‡è¯†ç¬¦ç”¨äºåæœŸåŒºåˆ† action è¿›è¡Œæ“ä½œå¤„ç†</li>
<li>é›†åˆçš„å”¯ä¸€æ ‡è¯†ç¬¦ä¸é€šçŸ¥å†…å®¹å®ä¾‹çš„å”¯ä¸€æ ‡è¯†ç¬¦ç»Ÿä¸€èµ·æ¥æ—¶ï¼Œæ‰èƒ½åœ¨ barner æ ·å¼ä¸‹æ˜¾ç¤ºæŒ‰é’®</li>
</ul></li>
<li>ç„¶åé€šè¿‡ä¸Šé¢åˆ›å»ºå¥½çš„é€šçŸ¥å†…å®¹å®ä¾‹å’Œè§¦å‘å™¨åˆ›å»ºä¸€ä¸ªé€šçŸ¥è¯·æ±‚ï¼Œå®ƒæ˜¯ <code>UNNotificationRequest</code> å®ä¾‹ï¼Œè¿˜éœ€è¦æŒ‡å®šä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¦å¤–å¦‚æœæŒ‡å®šçš„è§¦å‘å™¨ä¸ºç©ºï¼Œé€šçŸ¥ä¸­å¿ƒä¼šç«‹å³æ¨é€é€šçŸ¥</li>
<li>æœ€åæŒ‡å®šé€šçŸ¥ä¸­å¿ƒçš„ä»£ç†å®ä¾‹ï¼Œä¸€èˆ¬æƒ…å†µå°±æ˜¯ç±»è‡ªèº«å³ selfï¼Œä¹‹åè°ƒç”¨é€šçŸ¥ä¸­å¿ƒå®ä¾‹çš„ <code>add</code> æ–¹æ³•å°†é€šçŸ¥è¯·æ±‚æ·»åŠ åˆ°é€šçŸ¥ä¸­å¿ƒå®ä¾‹ï¼Œè¿™ä¸ªé€šçŸ¥ä¸­å¿ƒå®ä¾‹ä½¿ç”¨ç³»ç»Ÿå½“å‰çš„å°±å¯ä»¥ï¼Œè°ƒç”¨ <code>UNUserNotificationCenter.current()</code> å³å¯è·å¾—</li>
</ul>

<p>æ‰€ä»¥æ ¹æ®æˆ‘ä»¬çš„å®ç°ç›®æ ‡ï¼Œ<code>notificationAction</code> çš„å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">notificationAction</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">content</span> <span class="p">=</span> <span class="n">UNMutableNotificationContent</span><span class="p">()</span>
    <span class="n">content</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="s">&#34;æ–°çš„æ–¹å¼&#34;</span>
    <span class="n">content</span><span class="p">.</span><span class="n">body</span> <span class="p">=</span> <span class="s">&#34;æˆ‘æ˜¯ä¸€ä¸ªæ–°çš„æ–¹å¼&#34;</span>
    
    <span class="n">content</span><span class="p">.</span><span class="n">userInfo</span> <span class="p">=</span> <span class="p">[</span><span class="s">&#34;method&#34;</span><span class="p">:</span> <span class="s">&#34;new&#34;</span><span class="p">]</span>
    
    <span class="n">content</span><span class="p">.</span><span class="n">sound</span> <span class="p">=</span> <span class="n">UNNotificationSound</span><span class="p">.</span><span class="k">default</span>
    <span class="n">content</span><span class="p">.</span><span class="n">categoryIdentifier</span> <span class="p">=</span> <span class="s">&#34;NOTIFICATION_DEMO&#34;</span>
    
    <span class="kd">let</span> <span class="nv">acceptAction</span> <span class="p">=</span> <span class="n">UNNotificationAction</span><span class="p">(</span><span class="n">identifier</span><span class="p">:</span> <span class="s">&#34;SHOW_ACTION&#34;</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="s">&#34;æ˜¾ç¤º&#34;</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">rawValue</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span>
    <span class="kd">let</span> <span class="nv">declineAction</span> <span class="p">=</span> <span class="n">UNNotificationAction</span><span class="p">(</span><span class="n">identifier</span><span class="p">:</span> <span class="s">&#34;CLOSE_ACTION&#34;</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="s">&#34;å…³é—­&#34;</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">rawValue</span><span class="p">:</span> <span class="mi">0</span><span class="p">))</span>
    <span class="kd">let</span> <span class="nv">testCategory</span> <span class="p">=</span> <span class="n">UNNotificationCategory</span><span class="p">(</span><span class="n">identifier</span><span class="p">:</span> <span class="s">&#34;NOTIFICATION_DEMO&#34;</span><span class="p">,</span>
                                              <span class="n">actions</span><span class="p">:</span> <span class="p">[</span><span class="n">acceptAction</span><span class="p">,</span> <span class="n">declineAction</span><span class="p">],</span>
                                              <span class="n">intentIdentifiers</span><span class="p">:</span> <span class="p">[],</span>
                                              <span class="n">hiddenPreviewsBodyPlaceholder</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">,</span>
                                              <span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">customDismissAction</span><span class="p">)</span>
    
    <span class="kd">let</span> <span class="nv">request</span> <span class="p">=</span> <span class="n">UNNotificationRequest</span><span class="p">(</span><span class="n">identifier</span><span class="p">:</span> <span class="s">&#34;NOTIFICATION_DEMO_REQUEST&#34;</span><span class="p">,</span>
                                        <span class="n">content</span><span class="p">:</span> <span class="n">content</span><span class="p">,</span>
                                        <span class="n">trigger</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    
    <span class="c1">// Schedule the request with the system.</span>
    <span class="kd">let</span> <span class="nv">notificationCenter</span> <span class="p">=</span> <span class="n">UNUserNotificationCenter</span><span class="p">.</span><span class="n">current</span><span class="p">()</span>
    <span class="n">notificationCenter</span><span class="p">.</span><span class="n">delegate</span> <span class="p">=</span> <span class="kc">self</span>
    <span class="n">notificationCenter</span><span class="p">.</span><span class="n">setNotificationCategories</span><span class="p">([</span><span class="n">testCategory</span><span class="p">])</span>
    <span class="n">notificationCenter</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">if</span> <span class="n">error</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
            <span class="c1">// Handle any errors.</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p><strong>æ³¨æ„ï¼š</strong></p>

<p><code>testCategory</code> å’Œ <code>content</code> ä¸€å®šè¦ä½¿ç”¨ä¸€è‡´çš„æ ‡è¯†ç¬¦ï¼Œå¦åˆ™é€šçŸ¥æ¨ªå¹…æ ·å¼ä¸‹ä¸ä¼šæ˜¾ç¤º action æŒ‰é’®</p>

<h3 id="ä»£ç†æ–¹æ³•çš„å®ç°">ä»£ç†æ–¹æ³•çš„å®ç°</h3>

<p>ç›´æ¥è´´å‡ºå®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">extension</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">UNUserNotificationCenterDelegate</span> <span class="p">{</span>
    
    <span class="c1">// ç”¨æˆ·ç‚¹å‡»å¼¹çª—åçš„å›è°ƒ</span>
    <span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="kc">_</span> <span class="n">center</span><span class="p">:</span> <span class="n">UNUserNotificationCenter</span><span class="p">,</span> <span class="n">didReceive</span> <span class="n">response</span><span class="p">:</span> <span class="n">UNNotificationResponse</span><span class="p">,</span> <span class="n">withCompletionHandler</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">userInfo</span> <span class="p">=</span> <span class="n">response</span><span class="p">.</span><span class="n">notification</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">content</span><span class="p">.</span><span class="n">userInfo</span>
        <span class="k">switch</span> <span class="n">response</span><span class="p">.</span><span class="n">actionIdentifier</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s">&#34;SHOW_ACTION&#34;</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="n">userInfo</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;CLOSE_ACTION&#34;</span><span class="p">:</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;Nothing to do&#34;</span><span class="p">)</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="p">}</span>
        <span class="n">completionHandler</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="c1">// é…ç½®é€šçŸ¥å‘èµ·æ—¶çš„è¡Œä¸º alert -&gt; æ˜¾ç¤ºå¼¹çª—, sound -&gt; æ’­æ”¾æç¤ºéŸ³</span>
    <span class="kd">func</span> <span class="nf">userNotificationCenter</span><span class="p">(</span><span class="kc">_</span> <span class="n">center</span><span class="p">:</span> <span class="n">UNUserNotificationCenter</span><span class="p">,</span> <span class="n">willPresent</span> <span class="n">notification</span><span class="p">:</span> <span class="n">UNNotification</span><span class="p">,</span> <span class="n">withCompletionHandler</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">(</span><span class="n">UNNotificationPresentationOptions</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">completionHandler</span><span class="p">([.</span><span class="n">alert</span><span class="p">,</span> <span class="p">.</span><span class="n">sound</span><span class="p">])</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<ul>
<li>ä¸¤ä¸ªå›è°ƒä¸­éƒ½æœ‰ä¸€ä¸ªé€ƒé€¸é—­åŒ…å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå®Œæˆå¤„ç†çš„å›è°ƒï¼Œä¸€å®šè¦æ‰§è¡Œç›¸åº”çš„ <code>completionHandler</code></li>
<li><code>userNotificationCenter(:willPresent:withCompletionHandler)</code> æ–¹æ³•ä¸­é€šè¿‡ <code>completionHandler</code> é…ç½®é€šçŸ¥è¡Œä¸ºï¼Œè¿™é‡Œé…ç½®æ—¢æ˜¾ç¤ºå¼¹çª—åˆæ’­æ”¾æç¤ºéŸ³</li>
</ul>

<h3 id="å…³äºæ¶ˆæ¯é€šçŸ¥æƒé™">å…³äºæ¶ˆæ¯é€šçŸ¥æƒé™</h3>

<p>å…¶å®ä¸¥æ ¼æ¥è®²ï¼Œä¸€ä¸ª app åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨çš„æ—¶å€™è¦å‘ç³»ç»Ÿè¯·æ±‚è®¾ç½®é€šçŸ¥æƒé™çš„ï¼Œç­‰åœ¨ä¹‹åçš„æ‰€æœ‰å¯åŠ¨çš„æ—¶å€™å°±ä¸éœ€è¦è¯·æ±‚è®¾ç½®æƒé™äº†ï¼Œåªéœ€æ¯æ¬¡è¯»å–ç³»ç»Ÿåå¥½è®¾ç½®ä¸­çš„æƒé™é…ç½®æ¥å®ç°ç›¸åº”çš„é€šçŸ¥è¡Œä¸ºã€‚è²Œä¼¼åœ¨ macOS ä¸­ä¸åšè¿™ä¸ªæ“ä½œï¼Œç›®å‰ä¹Ÿæ²¡ä»€ä¹ˆå½±å“ï¼Œå¦‚æœæƒ³è¿›ä¸€æ­¥äº†è§£æƒé™å¯ä»¥é˜…è¯» <a href="https://developer.apple.com/documentation/usernotifications/asking_permission_to_use_notifications" target="_blank">Asking Permission to Use Notifications</a>!</p>

<h3 id="éªŒè¯å®ç°">éªŒè¯å®ç°</h3>

<p>è¿è¡Œç¨‹åºï¼Œç‚¹å‡»çª—å£ä¸­çš„æŒ‰é’®å°±èƒ½çœ‹åˆ°é€šçŸ¥äº†ï¼å°†é¼ æ ‡æ”¾åœ¨é€šçŸ¥ä¸Šï¼Œå°±èƒ½æ˜¾ç¤ºæ“ä½œæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®å°±èƒ½åœ¨ xcode æ§åˆ¶å™¨çª—å£çœ‹åˆ°ç›¸åº”çš„æ‰“å°ä¿¡æ¯äº†ã€‚</p>

<p>Demo ä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2019-03-17-NotificationDemo.zip" target="_blank">NotificationDemo</a></p>

<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°è¯•äº†ä¸¤ç§æ–¹å¼å®ç°æ¶ˆæ¯é€šçŸ¥çš„æ¨é€ï¼Œå¦‚æœæœ‰å…¶å®ƒçš„å®ç°éœ€æ±‚ï¼Œæ¯”å¦‚æŒ‰æ—¥æœŸæ—¶é—´æ¨é€æ¶ˆæ¯ï¼Œç›´æ¥å‚è€ƒé˜…è¯» Apple å®˜æ–¹çš„èµ„æ–™å§ï¼Apple çš„å„å¤§ç³»ç»Ÿå¹³å°æ¥å£èåˆæ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œå¤§å®¶èµ¶å¿«æ ¹æ®æ–°çš„å®ç°æ–¹å¼æ›¿æ¢é©¬ä¸Šè¦æ·˜æ±°çš„æ–¹æ³•å§ï¼</p>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>

<ul>
<li><a href="https://blog.gaelfoppolo.com/user-notifications-in-macos-66c25ed5c692" target="_blank">User Notifications in macOS</a></li>
<li><a href="https://developer.apple.com/documentation/foundation/nsusernotificationcenter" target="_blank">NSUserNotificationCenter</a></li>
<li><a href="https://developer.apple.com/documentation/usernotifications/unusernotificationcenter" target="_blank">UNUserNotificationCenter</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ NSTextField æ–‡æœ¬çš„å‚ç›´å±…ä¸­</title>
			<link>https://www.smslit.top/2019/03/10/macOS-dev-vertically-centered-textfield/</link>
			<pubDate>Sun, 10 Mar 2019 15:26:20 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/10/macOS-dev-vertically-centered-textfield/</guid>
			<description>åœ¨ macOS å¼€å‘ä¸­ä¸çŸ¥é“æ‚¨æ˜¯å¦ä¸º NSTextField çš„å‚ç›´å±…ä¸­çš„é—®é¢˜å›°æ‰°è¿‡å‘¢ï¼ä»ä»Šå¤©è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼Œè¿™ä¸ªé—®é¢˜å°†ä¸å†æ˜¯é—®é¢˜ï¼Œæœ¬æ–‡å°†ä»‹ç»ä¸€ç§å¯ä»¥å®ç° NSTextField å‚ç›´å±…ä¸­çš„æ–¹æ³•ï¼Œå¤§æ¦‚å¯</description>
			<content type="html"><![CDATA[

<p>åœ¨ macOS å¼€å‘ä¸­ä¸çŸ¥é“æ‚¨æ˜¯å¦ä¸º NSTextField çš„å‚ç›´å±…ä¸­çš„é—®é¢˜å›°æ‰°è¿‡å‘¢ï¼ä»ä»Šå¤©è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼Œè¿™ä¸ªé—®é¢˜å°†ä¸å†æ˜¯é—®é¢˜ï¼Œæœ¬æ–‡å°†ä»‹ç»ä¸€ç§å¯ä»¥å®ç° NSTextField å‚ç›´å±…ä¸­çš„æ–¹æ³•ï¼Œå¤§æ¦‚å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼</p>

<h2 id="å¼€å‘å¹³å°">å¼€å‘å¹³å°</h2>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h2 id="å‡†å¤‡-demo">å‡†å¤‡ Demo</h2>

<p>è¿˜æ˜¯è€è§„çŸ©ï¼Œä»¥å®ä¾‹å‡ºå‘ï¼Œç†è§£å®ç°ï¼æ–°å»ºä¸€ä¸ª macOS app çš„å·¥ç¨‹ï¼Œä½¿ç”¨ storyboardï¼Œè¿™é‡Œå·¥ç¨‹å°±å‘½åä¸º TextFieldDemo å§ã€‚åˆ›å»ºæˆåŠŸåï¼Œæ‰“å¼€ <code>Main.storyboard</code> ï¼Œå¾€ <code>View Controller</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>Text Field</code> ï¼Œè°ƒæ•´å…¶å¤§å°è´´é½çª—å£å››è¾¹ï¼Œæ·»åŠ å¿…è¦çš„å¸ƒå±€é™åˆ¶ï¼Œå¹¶å°†ä»¥ä¸‹å†…å®¹ä½œä¸º Text Field çš„å†…å®¹ï¼š</p>

<blockquote>
<p>æ¼«å¨ç”µå½±å®‡å®™ï¼ˆè‹±è¯­ï¼šMarvel Cinematic Universeï¼Œç®€ç§°MCUï¼‰æ˜¯ç”±æ¼«å¨æ¼«ç”»å·¥ä½œå®¤åŸºäºæ¼«å¨æ¼«ç”»å‡ºç‰ˆç‰©ä¸­çš„è§’è‰²ç‹¬ç«‹åˆ¶ä½œçš„ä¸€ç³»åˆ—ç”µå½±æ‰€æ„æˆçš„æ¶ç©ºä¸–ç•Œå’Œå…±åŒä¸–ç•Œï¼ˆEarth-199999ï¼‰ã€‚</p>
</blockquote>

<p>å°±åƒä¸‹é¢è¿™æ ·(åé‡Œè¿™é‡Œå°†çª—å£è°ƒå°äº†ä¸€ç‚¹):</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190310154814.png" alt="" /></p>

<p>è¿è¡Œç¨‹åºå¯ä»¥çœ‹åˆ°æ˜¾ç¤ºæ–‡æœ¬æ˜¯é»˜è®¤å‘ä¸Šå¯¹é½çš„:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190310155150.png" alt="" /></p>

<h2 id="å®ç°æ€è·¯">å®ç°æ€è·¯</h2>

<p>æœ€ç»ˆæˆ‘ä»¬è¦å®ç° Demo çª—å£ä¸­çš„æ–‡æœ¬å‚ç›´å±…ä¸­æ˜¾ç¤ºï¼Œè¦æƒ³åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¾—äº†è§£ä¸€ä¸‹æ–‡æœ¬æ¡†æ˜¾ç¤ºæ–‡æœ¬çš„è¿‡ç¨‹ã€‚NSTextField ç±»é€šè¿‡ NSTextFieldCell ç±»å®ç°ç”¨æˆ·ç•Œé¢çš„æ˜¾ç¤ºï¼Œæ‰€ä»¥å…³æ³¨ç‚¹åº”è¯¥æ”¾åœ¨ NSTextFieldCell ç±»ä¸Šï¼Œæ–‡æœ¬æ˜¯åœ¨ text field cell ä¸Šçš„ï¼Œè€Œ TextField åˆæ˜¯ text field cell çš„ä¸€ä¸ªå®¹å™¨ï¼Œæ‰€ä»¥åªéœ€è¦è°ƒæ•´ text field cell åœ¨ Text Field ä¸­çš„åæ ‡ï¼Œå¦‚æœ y è½´åæ ‡å€¼åˆé€‚å°±èƒ½å®ç°å±…ä¸­ï¼Œåœ¨ Cocoa ä¸­ï¼Œæ§ä»¶ä½¿ç”¨å¦‚ä¸‹åæ ‡ç³»(flipped coordinate)ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190310171441.png" alt="" /></p>

<p>NSTextFieldCell ç±»ç»§æ‰¿äº NSCell ç±»ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è°ƒæ•´ç»˜åˆ¶è¿‡ç¨‹ä¸­ text field cell çš„ frame åæ ‡æ•°æ®å®ç°å…¶ä½ç½®è°ƒæ•´ï¼Œå¯¹åº”è¿™ä¸ªç»˜åˆ¶è¿‡ç¨‹çš„æ–¹æ³•å°±æ˜¯ <code>drawingRect(forBounds:)</code>ï¼Œæ–°åæ ‡çš„è®¡ç®—å…¬å¼ä¸ºï¼š</p>

<p>$$
y_{new} = y_{old} + (Height_{frame} - Height_{text}) \times 0.5
$$</p>

<p>å…¶ä¸­ï¼š</p>

<ul>
<li>$Height_{frame}$ æ˜¯æŒ‡é»˜è®¤ç”Ÿæˆçš„ cell çš„ frame</li>
<li>$Height_{text}$ æ˜¯æ–‡æœ¬å®é™…å ç”¨çš„ frame</li>
</ul>

<p>ä¸ºäº†æ›´å½»åº•ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è°ƒæ•´ frame çš„é«˜åº¦ä¸æ–‡æœ¬å®é™…å ç”¨çš„é«˜åº¦ä¸€è‡´ï¼š</p>

<p>$$
Height_{frame} = Height_{text}
$$</p>

<p>ä¹Ÿè®¸æ‚¨çœ‹äº†ä¸‹é¢çš„å›¾å°±æ˜ç™½ä¸Šé¢å…¬å¼çš„å«ä¹‰äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190310182541.png" alt="" /></p>

<h2 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h2>

<p>æ ¹æ®ä¸Šé¢çš„æ€è·¯å¯ä»¥æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯å®šä¹‰ä¸€ä¸ª <code>NSTextFielCell</code> çš„å­ç±»ï¼Œåœ¨å­ç±»ä¸­é‡å†™æ–¹æ³•ï¼Œå¦ä¸€ç§æ˜¯æ‰©å±•çš„æ–¹å¼é‡å†™ <code>NSTextFieldCell</code> çš„æ–¹æ³•ã€‚ç¬¬äºŒç§ä¼šå½±å“ app ä¸­æ‰€æœ‰çš„ TextFieldï¼Œæ‰€ä»¥è¿™é‡Œé‡‡ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚</p>

<p>åœ¨ <code>AppDelegate.swift</code> æ–‡ä»¶ä¸­å®šä¹‰å­ç±» <code>VerticallyCenteredTextFieldCell</code> å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">class</span> <span class="nc">VerticallyCenteredTextFieldCell</span><span class="p">:</span> <span class="n">NSTextFieldCell</span> <span class="p">{</span>
    
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">drawingRect</span><span class="p">(</span><span class="n">forBounds</span> <span class="n">theRect</span><span class="p">:</span> <span class="n">NSRect</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">NSRect</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nv">newRect</span><span class="p">:</span><span class="n">NSRect</span> <span class="p">=</span> <span class="kc">super</span><span class="p">.</span><span class="n">drawingRect</span><span class="p">(</span><span class="n">forBounds</span><span class="p">:</span> <span class="n">theRect</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">textSize</span><span class="p">:</span><span class="n">NSSize</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">cellSize</span><span class="p">(</span><span class="n">forBounds</span><span class="p">:</span> <span class="n">theRect</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">heightDelta</span><span class="p">:</span><span class="n">CGFloat</span> <span class="p">=</span> <span class="n">newRect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">textSize</span><span class="p">.</span><span class="n">height</span>
        <span class="k">if</span> <span class="n">heightDelta</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
            <span class="n">newRect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="p">=</span> <span class="n">textSize</span><span class="p">.</span><span class="n">height</span>
            <span class="n">newRect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">heightDelta</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">newRect</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>ç„¶åæ‰“å¼€ <code>Main.storyboard</code> æ–‡ä»¶ï¼Œé€‰ä¸­ä¹‹å‰æ·»åŠ çš„ Text Field çš„ cell ï¼ŒæŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>3</code> æ‰“å¼€ Identity æ£€æŸ¥å™¨ï¼Œåœ¨ <code>Custom Class</code> ä¸­ä¸º cell æŒ‡å®šåˆšå®šä¹‰çš„å­ç±» <code>VerticallyCenteredTextFieldCell</code>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190310183739.png" alt="" /></p>

<p>è¿è¡Œç¨‹åºå°±èƒ½çœ‹åˆ°æ–‡æœ¬å®ç°äº†å±…ä¸­æ˜¾ç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190310184822.png" alt="" /></p>

<p>Demoä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/VerticallyCenteredTextFieldDemo.zip" target="_blank">VerticallyCenteredTextFieldDemo.zip</a></p>
]]></content>
		</item>
		
		<item>
			<title>å¿«å¿«æ‹¿èµ°ï¼ŒXcode å¸¸ç”¨å¿«æ·é”®</title>
			<link>https://www.smslit.top/2019/03/07/mac-dev-keyboard-shortcuts/</link>
			<pubDate>Thu, 07 Mar 2019 14:42:16 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/07/mac-dev-keyboard-shortcuts/</guid>
			<description>æ— è®ºæ‚¨è¿›è¡Œ macOS å¼€å‘è¿˜æ˜¯ iOS å¼€å‘ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šç”¨åˆ° Xcodeï¼Œé‚£ä¹ˆæœ¬æ–‡å°±åˆ†äº«ä¸€ä¸‹åé‡Œæ•´ç†çš„å¸¸ç”¨å¿«æ·é”®ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼ è¯´æ˜ Xocde çš„å¿«æ·é”®ä¸ä¼šéšç€</description>
			<content type="html"><![CDATA[

<p>æ— è®ºæ‚¨è¿›è¡Œ macOS å¼€å‘è¿˜æ˜¯ iOS å¼€å‘ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šç”¨åˆ° Xcodeï¼Œé‚£ä¹ˆæœ¬æ–‡å°±åˆ†äº«ä¸€ä¸‹åé‡Œæ•´ç†çš„å¸¸ç”¨å¿«æ·é”®ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼</p>

<h1 id="è¯´æ˜">è¯´æ˜</h1>

<ul>
<li>Xocde çš„å¿«æ·é”®ä¸ä¼šéšç€ç‰ˆæœ¬æ›´è¿­è€Œå˜åŒ–å¤ªå¤šï¼Œä½†è¿˜æ˜¯è¦è¯´æ˜ä¸€ä¸‹æœ¬æ–‡çš„å¿«æ·é”®å‡èƒ½åœ¨ Xcode 10.2 ä¸­æ­£å¸¸ä½¿ç”¨</li>
<li>æ­£æ–‡ä¸­å‡ä½¿ç”¨å¿«æ·é”®ä¿®é¥°é”®çš„ç¬¦å·è¡¨ç¤ºä¿®é¥°ç¬¦ï¼š

<ul>
<li>Control âŒƒ</li>
<li>Option âŒ¥</li>
<li>Shift â‡§</li>
<li>Command âŒ˜</li>
<li>Return â†©</li>
</ul></li>
</ul>

<h1 id="çª—å£æ“ä½œ">çª—å£æ“ä½œ</h1>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190307154213.jpg" alt="" /></p>

<h1 id="å¸¸è§„">å¸¸è§„</h1>

<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä½œç”¨</th>
</tr>
</thead>

<tbody>
<tr>
<td>âŒ˜,</td>
<td>æ‰“å¼€åå¥½è®¾ç½®</td>
</tr>

<tr>
<td>â‡§âŒ˜0</td>
<td>æ‰“å¼€å¸®åŠ©çª—å£</td>
</tr>

<tr>
<td>â‡§âŒ˜c</td>
<td>æ‰“å¼€è°ƒè¯•åŒºåŸŸçš„ç»ˆç«¯æ </td>
</tr>

<tr>
<td>âŒ˜?</td>
<td>æ‰“å¼€å¸®åŠ©æœç´¢</td>
</tr>

<tr>
<td>âŒ˜n</td>
<td>æ–°å»ºæ–‡ä»¶</td>
</tr>

<tr>
<td>âŒ˜o</td>
<td>æ‰“å¼€æ–‡ä»¶</td>
</tr>

<tr>
<td>â‡§âŒ˜a</td>
<td>å‘å·¥ç¨‹ä¸­æ·»åŠ æ–‡ä»¶</td>
</tr>
</tbody>
</table>

<h1 id="ç¼–è¯‘åŠè¿è¡Œ">ç¼–è¯‘åŠè¿è¡Œ</h1>

<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä½œç”¨</th>
</tr>
</thead>

<tbody>
<tr>
<td>âŒ˜b</td>
<td>ç¼–è¯‘å·¥ç¨‹</td>
</tr>

<tr>
<td>â‡§âŒ˜b</td>
<td>åˆ†æå·¥ç¨‹</td>
</tr>

<tr>
<td>âŒ˜r</td>
<td>è¿è¡Œå·¥ç¨‹</td>
</tr>

<tr>
<td>âŒ˜i</td>
<td>æ‰“å¼€ Profile</td>
</tr>

<tr>
<td>âŒ˜u</td>
<td>æµ‹è¯•å·¥ç¨‹</td>
</tr>

<tr>
<td>â‡§âŒ˜k</td>
<td>æ¸…ç†å·¥ç¨‹ç¼–è¯‘ä¸­é—´æ–‡ä»¶</td>
</tr>

<tr>
<td>âŒ˜k</td>
<td>æ¸…ç©ºç»ˆç«¯æ‰“å°çš„ä¿¡æ¯</td>
</tr>

<tr>
<td>âŒ˜.</td>
<td>åœæ­¢è¿è¡Œ</td>
</tr>
</tbody>
</table>

<h1 id="ä»£ç ç¼–è¾‘">ä»£ç ç¼–è¾‘</h1>

<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä½œç”¨</th>
</tr>
</thead>

<tbody>
<tr>
<td>âŒƒSpace</td>
<td>æ˜¾ç¤ºè¡¥å…¨æç¤ºé¡¹</td>
</tr>

<tr>
<td>âŒƒ.</td>
<td>ä¸‹ä¸€ä¸ªè¡¥å…¨æç¤ºé¡¹</td>
</tr>

<tr>
<td>Tab</td>
<td>é€‰ä¸­è¡¥å…¨æç¤ºé¡¹</td>
</tr>

<tr>
<td>âŒƒ/</td>
<td>ä¸‹ä¸€ä¸ªä»£ç  placeholder é¡¹</td>
</tr>

<tr>
<td>â‡§âŒƒ/</td>
<td>ä¸Šä¸€ä¸ªä»£ç  placeholder é¡¹</td>
</tr>

<tr>
<td>âŒ˜/</td>
<td>æ³¨é‡Šæˆ–å–æ¶ˆæ³¨é‡Šä»£ç </td>
</tr>

<tr>
<td>âŒ¥âŒ˜â†</td>
<td>æŠ˜å ä»£ç ï¼ˆæ–¹æ³•æˆ–ç±»ï¼‰</td>
</tr>

<tr>
<td>âŒ¥âŒ˜â†’</td>
<td>å±•å¼€æŠ˜å ä»£ç </td>
</tr>

<tr>
<td>âŒƒâŒ˜e</td>
<td>ç¼–è¾‘ä¿®æ”¹å½“å‰æ–‡ä»¶ä¸­æ‰€æœ‰å‡ºç°å…‰æ ‡å¤„å•è¯çš„åœ°æ–¹</td>
</tr>
</tbody>
</table>

<h1 id="ä»£ç å¯¼èˆª">ä»£ç å¯¼èˆª</h1>

<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä½œç”¨</th>
</tr>
</thead>

<tbody>
<tr>
<td>âŒ˜â†’</td>
<td>è·³è½¬åˆ°è¡Œå°¾</td>
</tr>

<tr>
<td>âŒ˜â†</td>
<td>è·³è½¬åˆ°è¡Œé¦–</td>
</tr>

<tr>
<td>âŒ˜â†‘</td>
<td>è·³è½¬åˆ°æ–‡ä»¶é¡¶éƒ¨</td>
</tr>

<tr>
<td>âŒ˜â†“</td>
<td>è·³è½¬åˆ°æ–‡ä»¶åº•éƒ¨</td>
</tr>

<tr>
<td>âŒ¥â†’</td>
<td>å‘åè·³è¿‡ä¸€ä¸ªå•è¯</td>
</tr>

<tr>
<td>âŒ¥â†</td>
<td>å‘å‰è·³è¿‡ä¸€ä¸ªå•è¯</td>
</tr>

<tr>
<td>âŒ˜l</td>
<td>è·³è½¬åˆ°æŒ‡å®šè¡Œ</td>
</tr>

<tr>
<td>âŒ˜f</td>
<td>åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾</td>
</tr>

<tr>
<td>â‡§âŒ˜f</td>
<td>åœ¨å·¥ç¨‹ä¸­æŸ¥æ‰¾</td>
</tr>

<tr>
<td>âŒ˜g</td>
<td>æŸ¥æ‰¾ä¸‹ä¸€ä¸ª</td>
</tr>

<tr>
<td>â‡§âŒ˜g</td>
<td>æŸ¥æ‰¾ä¸Šä¸€ä¸ª</td>
</tr>

<tr>
<td>âŒƒâŒ˜ + é¼ æ ‡å·¦é”®å•å‡»</td>
<td>è·³è½¬åˆ°å®šä¹‰</td>
</tr>

<tr>
<td>âŒ¥ + é¼ æ ‡å·¦é”®å•å‡»</td>
<td>å¿«é€Ÿå¸®åŠ©</td>
</tr>

<tr>
<td>âŒƒâŒ˜d</td>
<td>æ˜¾ç¤ºå…‰æ ‡å¤„å…³é”®å­—çš„å¿«é€Ÿå¸®åŠ©</td>
</tr>
</tbody>
</table>

<h1 id="æ–‡ä»¶å¯¼èˆª">æ–‡ä»¶å¯¼èˆª</h1>

<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä½œç”¨</th>
</tr>
</thead>

<tbody>
<tr>
<td>âŒƒâŒ˜â†</td>
<td>å‰ä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>âŒƒâŒ˜â†’</td>
<td>åä¸€ä¸ªæ‰“å¼€çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>â‡§âŒ˜o</td>
<td>å¿«é€Ÿæ‰“å¼€æ–‡ä»¶</td>
</tr>

<tr>
<td>âŒƒ1</td>
<td>æ˜¾ç¤ºä¸æŒ‡å®šä»£ç ç›¸å…³çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>âŒ˜n</td>
<td>æ–°å»ºæ–‡ä»¶</td>
</tr>

<tr>
<td>âŒ˜o</td>
<td>æ‰“å¼€æ–‡ä»¶</td>
</tr>

<tr>
<td>â‡§âŒ˜a</td>
<td>å‘å·¥ç¨‹ä¸­æ·»åŠ æ–‡ä»¶</td>
</tr>
</tbody>
</table>

<h1 id="è°ƒè¯•">è°ƒè¯•</h1>

<table>
<thead>
<tr>
<th>å¿«æ·é”®</th>
<th>ä½œç”¨</th>
</tr>
</thead>

<tbody>
<tr>
<td>âŒ˜ \</td>
<td>æ·»åŠ æˆ–åˆ é™¤æ–­ç‚¹</td>
</tr>

<tr>
<td>âŒ˜y</td>
<td>ç¦ç”¨æˆ–æ¿€æ´»æ–­ç‚¹</td>
</tr>

<tr>
<td>âŒƒâŒ˜y</td>
<td>ç»§ç»­æ‰§è¡Œ</td>
</tr>

<tr>
<td>âŒƒâŒ˜c</td>
<td>ç»§ç»­æ‰§è¡Œåˆ°å½“å‰è¡Œ</td>
</tr>

<tr>
<td>F6</td>
<td>å•æ­¥è·³è¿‡</td>
</tr>

<tr>
<td>F7</td>
<td>å•æ­¥è¿›å…¥</td>
</tr>

<tr>
<td>F8</td>
<td>å•æ­¥è·³å‡º</td>
</tr>
</tbody>
</table>

<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶æ”¶è—ï¼Œåé‡Œä¸ºæ­¤å°†ä¸Šé¢çš„å¿«æ·é”®æ•´ç†ä¸ºä¸€é¡µ pdf ï¼Œæ–¹ä¾¿å¤§å®¶åŠæ—¶æŸ¥çœ‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/xcode_shortcuts.pdf" alt="" /></p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹å®šæ—¶å™¨çš„ä½¿ç”¨</title>
			<link>https://www.smslit.top/2019/03/05/macOS-dev-timer/</link>
			<pubDate>Tue, 05 Mar 2019 15:43:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/05/macOS-dev-timer/</guid>
			<description>å‰æ®µæ—¶é—´å¼€å‘äº†ä¸€æ¬¾çŠ¶æ€æ å°å·¥å…· æ—¶å…‰(Time Go) ï¼Œå®ƒç”¨åˆ°äº†å®šæ—¶å™¨ï¼Œè¿‘æœŸåé‡Œåœ¨æƒ³å¤§å®¶ä¼šä¸ä¼šä¹Ÿæœ‰ç”¨å®šæ—¶å™¨çš„éœ€æ±‚å‘¢ï¼æ‰€ä»¥å‘¢ï¼Œå†™æœ¬æ–‡æ„åœ¨åˆ†äº« macOS å¼€å‘ä¸­å…³</description>
			<content type="html"><![CDATA[

<p>å‰æ®µæ—¶é—´å¼€å‘äº†ä¸€æ¬¾çŠ¶æ€æ å°å·¥å…· <a href="https://github.com/smslit/timeGO" target="_blank">æ—¶å…‰(Time Go)</a> ï¼Œå®ƒç”¨åˆ°äº†å®šæ—¶å™¨ï¼Œè¿‘æœŸåé‡Œåœ¨æƒ³å¤§å®¶ä¼šä¸ä¼šä¹Ÿæœ‰ç”¨å®šæ—¶å™¨çš„éœ€æ±‚å‘¢ï¼æ‰€ä»¥å‘¢ï¼Œå†™æœ¬æ–‡æ„åœ¨åˆ†äº« macOS å¼€å‘ä¸­å…³äºå®šæ—¶å™¨çš„çš„æ”¶è·åŠå…¶ä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ã€‚</p>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="å‡†å¤‡ç¯å¢ƒ">å‡†å¤‡ç¯å¢ƒ</h1>

<p>ä¸ºäº†æ›´å¥½åœ°å±•ç¤ºå®šæ—¶å™¨çš„ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ playground æµ‹è¯•æˆ‘ä»¬çš„å®šæ—¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨å¿«æ·é”® <code>Option</code> + <code>Shift</code> + <code>Command</code> + n æ–°å»º playgroud æ–‡ä»¶ã€‚åœ¨æ–‡ä»¶ä¸­æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ª TimerDemo ç±»ç”¨äºæµ‹è¯•å®šæ—¶å™¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">import</span> <span class="nc">Foundation</span>


<span class="kd">class</span> <span class="nc">TimerDemo</span> <span class="p">{</span>
    
    <span class="kd">private</span> <span class="kd">var</span> <span class="nv">timeCount</span> <span class="p">=</span> <span class="mi">5</span>
    
    <span class="kd">static</span> <span class="kd">let</span> <span class="nv">share</span> <span class="p">=</span> <span class="n">TimerDemo</span><span class="p">()</span>
    
    <span class="c1">// æ·»åŠ ä¸åŒå®šæ—¶å™¨ä½¿ç”¨æ–¹æ³•çš„ç¤ºä¾‹ä»£ç </span>
    <span class="kd">func</span> <span class="nf">run</span><span class="p">()</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;TimerDemo&#34;</span><span class="p">)</span>
    <span class="p">}</span>
    
<span class="p">}</span>

<span class="n">TimerDemo</span><span class="p">.</span><span class="n">share</span><span class="p">.</span><span class="n">run</span><span class="p">()</span></code></pre></div>
<p>ä¸Šé¢å®šä¹‰äº† TimerDemo ç±»ï¼ŒåŒæ—¶å®ç°äº†ä¸€ä¸ª TimerDemo çš„å•ä¾‹ï¼Œæ–¹ä¾¿è°ƒç”¨æ–¹æ³•å±•ç¤ºæ•ˆæœï¼</p>

<h1 id="å®šæ—¶å™¨çš„ä½¿ç”¨">å®šæ—¶å™¨çš„ä½¿ç”¨</h1>

<p>ç½‘ä¸Šèƒ½æœåˆ°æœ‰ä¸‰ç§å®ç°å®šæ—¶å™¨çš„æ–¹å¼ï¼Œå› ä¸ºè‹¹æœå®˜æ–¹ API çš„å˜åŒ–å¯¼è‡´éƒ¨åˆ†æœåˆ°çš„ä¿¡æ¯è¿‡æ—¶ï¼Œæœ¬æ–‡æ•´ç†çš„å®ç°æ–¹æ³•é€‚ç”¨äºä¸Šè¿°æè¿°çš„å®ç°å¹³å°ï¼Œè¿‘æœŸåº”è¯¥ä¸ä¼šè¿‡æœŸï¼Œå“ˆå“ˆï¼š</p>

<ul>
<li>Timer ç±»å®ç°</li>
<li>GCD(<a href="https://en.wikipedia.org/wiki/Grand_Central_Dispatch" target="_blank">Grand Central Dispatch</a>) çš„æ–¹å¼</li>
<li>åˆ©ç”¨å±å¹•åˆ·æ–°å®ç°è®¡æ•°å®šæ—¶</li>
</ul>

<p>æœ¬äººè§‰å¾—ç¬¬ä¸‰ç§æ–¹å¼ä¸æ˜¯ä»€ä¹ˆå¥½çš„æ–¹å¼ï¼Œæ‰€ä»¥æœ¬æ–‡åªè®²å‰ä¸¤ç§æ–¹å¼ã€‚</p>

<h2 id="ä½¿ç”¨-timer-ç±»">ä½¿ç”¨ Timer ç±»</h2>

<p>Timer ç±»çš„ä½¿ç”¨ä¾èµ– RunLoop(çº¿ç¨‹çš„äº‹ä»¶å¾ªç¯ï¼Œapp è¿è¡Œä¸€å®šä¼šæœ‰ä¸€ä¸ªåä¸º main çš„ RunLoopï¼Œä¸»è¦è´Ÿè´£ç•Œé¢æ§ä»¶çš„æ˜¾ç¤ºå’Œäº¤äº’) ï¼Œåªæœ‰æ·»åŠ åˆ°æ¿€æ´»çŠ¶æ€çš„ RunLoop ä¸­å®šæ—¶å™¨æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚</p>

<p>å®šæ—¶å™¨çš„è¿è¡Œæ ¹æ®æ¬¡æ•°åˆ†ä¸¤ç§ï¼šå•æ¬¡å’Œå¾ªç¯ï¼š</p>

<ul>
<li>å•æ¬¡çš„å®šæ—¶å™¨ï¼Œä¼šåœ¨æŒ‡å®šçš„æ—¶é—´è¿‡åï¼Œè‡ªåŠ¨é”€æ¯å¹¶ä» RunLoop ä¸­å¼¹å‡ºï¼Œè€Œä¸å†å½±å“ RunLoop çš„è¿è¡Œ</li>
<li>å¾ªç¯çš„å®šæ—¶å™¨ï¼Œä¼šæ ¹æ®æŒ‡å®šæ—¶é—´é—´éš”è§¦å‘æ‰§è¡Œå¤„ç†ä»»åŠ¡ï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨æ‰§è¡Œ Timer å¯¹è±¡çš„ <code>invalidate</code> æ–¹æ³•æ‰èƒ½é”€æ¯å¹¶ä» RunLoop ä¸­å¼¹å‡ºã€‚ä¸€èˆ¬ä½¿ç”¨å¾ªç¯å®šæ—¶å™¨ï¼Œä¸ä¼šè®©å…¶ä¸€ç›´æ‰§è¡Œï¼Œæ»¡è¶³æŸç§æ¡ä»¶æˆ–æ‰§è¡ŒæŒ‡å®šæ¬¡æ•°ä¹‹åï¼Œæ‰‹åŠ¨è°ƒç”¨ invlaidate æ–¹æ³•åœæ­¢å®šæ—¶å™¨</li>
</ul>

<p>æ ¹æ®å®šæ—¶å™¨çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥åˆ†ä¸‰ç§ï¼š</p>

<ul>
<li>ä½¿ç”¨ <code>Timer(timeInterval:repeats:block:)</code> æˆ– <code>Timer(timeInterval:target:selector:userInfo:repeats:)</code> ç±»æ–¹æ³•åˆå§‹åŒ– Timer å¯¹è±¡ï¼Œå°†å¯¹è±¡æ‰‹åŠ¨æ·»åŠ åˆ°æŒ‡å®š RunLoop ä¸­æ‰§è¡Œ</li>
<li>ä½¿ç”¨ <code>Timer(fire:interval:repeats:block:)</code> æˆ– <code>Timer(fireAt:interval:target:selector:userInfo:repeats:)</code> ç±»æ–¹æ³•åˆå§‹åŒ– Timer å¯¹è±¡ï¼Œå°†å¯¹è±¡æ‰‹åŠ¨æ·»åŠ åˆ°æŒ‡å®š RunLoop ä¸­æ‰§è¡Œ</li>
<li>ä½¿ç”¨ <code>Timer.scheduledTimer(withTimeInterval:repeats:block:)</code> å’Œ <code>Timer.scheduledTimer(timeInterval:target:selector:userInfo:repeats:)</code> ç±»æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šåˆ›å»º Timer å¯¹è±¡ï¼Œå¹¶ä¸”ä»¥é»˜è®¤çš„è¿è¡Œæ¨¡å¼æ·»åŠ åˆ°å½“å‰çš„ RunLoop ä¸­</li>
</ul>

<p>ä¸‹é¢æˆ‘ä»¬å¼€å§‹å°è¯•ä¸Šé¢çš„ä¸‰ç§æ–¹å¼ã€‚å…ˆåœ¨ä¸Šé¢å®šä¹‰çš„ TimerDemo ç±»ä¸­å£°æ˜ä¸€ä¸ª timer å±æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">private</span> <span class="kd">var</span> <span class="nv">timer</span><span class="p">:</span> <span class="n">Timer</span><span class="p">?</span></code></pre></div>
<h3 id="ç¬¬ä¸€ç§æ–¹å¼">ç¬¬ä¸€ç§æ–¹å¼</h3>

<h4 id="timer-timeinterval-repeats-block-ç±»æ–¹æ³•"><code>Timer(timeInterval:repeats:block:)</code> ç±»æ–¹æ³•</h4>

<ul>
<li>timeInterval æ˜¯å®šæ—¶å™¨çš„è§¦å‘æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’</li>
<li>repeats å¸ƒå°”ç±»å‹ï¼Œä»£è¡¨æ˜¯å¦é‡å¤ï¼Œå¦‚æœä¸º true ï¼Œå®šæ—¶å™¨æ˜¯å¾ªç¯å®šæ—¶å™¨ï¼Œå¦‚æœä¸º false ï¼Œå®šæ—¶å™¨æ˜¯å•æ¬¡çš„</li>
<li>block ä¸º <code>((timer: Timer?) -&gt; Void)</code> ç±»å‹çš„é—­åŒ…ï¼Œå…¶ä¸­ timer æ˜¯å®šæ—¶å™¨è‡ªèº«</li>
</ul>

<p>æˆ‘ä»¬ä¸º TimerDemo ç±»å®šä¹‰ä¸€ä¸ª <code>oneshot1</code> æ–¹æ³•ï¼Œä½¿ç”¨ <code>Timer(timeInterval:repeats:block:)</code> ç±»æ–¹æ³•å®ç°ä¸€ä¸ªå•æ¬¡çš„å®šæ—¶å™¨ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">// ä½¿ç”¨ Timer(timeInterval:repeats:block:) åˆå§‹åŒ–å¯¹è±¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° main çº¿ç¨‹çš„ RunLoop ä¸­ï¼Œå•æ¬¡</span>
<span class="kd">func</span> <span class="nf">oneshot1</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer(timeInterval:repeats:block:) åˆå§‹åŒ–ï¼Œå•æ¬¡&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">timeInterval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="p">{</span> <span class="n">timer</span> <span class="k">in</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">oneFireHandler</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">timer</span><span class="p">!,</span> <span class="n">forMode</span><span class="p">:</span> <span class="p">.</span><span class="n">common</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°å®šæ—¶å™¨æ—¶é—´é—´éš”æ˜¯ 1 ç§’ï¼Œå•æ¬¡ï¼Œå¹¶ä¸”é—­åŒ…ä¸­è°ƒç”¨å®šä¹‰çš„ <code>oneFireHandler</code> æ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ˜¯ç”¨æ¥å¤„ç†æˆ‘ä»¬éœ€è¦åšçš„å®šæ—¶ä»»åŠ¡çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@objc</span> <span class="kd">private</span> <span class="kd">func</span> <span class="nf">oneFireHandler</span><span class="p">(</span><span class="kc">_</span> <span class="n">timer</span><span class="p">:</span> <span class="n">Timer</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: å•æ¬¡å€’è®¡æ—¶ç»“æŸï¼&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>oneshot1</code> ä¸­åˆå§‹åŒ–å¾—åˆ° Timer å¯¹è±¡åï¼Œæ‰§è¡Œ <code>RunLoop.main.add(timer:forMode:)</code> æ–¹æ³•å°†å®šæ—¶å™¨åŠ å…¥åˆ° RunLoop ä¸­ï¼Œè¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„ï¼Œå…¶ä¸­ <code>forMode</code> å‚æ•°æˆ‘ä»¬ä½¿ç”¨é»˜è®¤æ¨¡å¼(<code>common</code>)ï¼Œå¯ä»¥é˜²æ­¢å…¶å®ƒé«˜ä¼˜å…ˆçº§ mode çš„äº‹ä»¶å½±å“å®šæ—¶å™¨çš„è¿è¡Œã€‚æ‰“å°ä¿¡æ¯æ—¶åŒæ—¶æ‰“å°äº†å½“å‰æ—¶é—´ï¼Œä¸»è¦ä½œä¸ºå‚è€ƒçœ‹å€’è®¡æ—¶å¯¹ä¸å¯¹ã€‚ä¸‹é¢æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬å®šä¹‰çš„ <code>oneshot1</code> æ–¹æ³•:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">TimerDemo</span><span class="p">.</span><span class="n">share</span><span class="p">.</span><span class="n">oneshot1</span><span class="p">()</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœï¼Œç¡®å®æ˜¯ 1 ç§’çš„æ—¶é—´é—´éš”ï¼Œä¸”æ‰§è¡Œäº†å®šæ—¶å™¨ä»»åŠ¡ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash"><span class="m">2019</span>-03-05 <span class="m">13</span>:51:07 +0000: Timer<span class="o">(</span>timeInterval:repeats:block:<span class="o">)</span> åˆå§‹åŒ–ï¼Œå•æ¬¡
<span class="m">2019</span>-03-05 <span class="m">13</span>:51:08 +0000: å•æ¬¡å€’è®¡æ—¶ç»“æŸï¼</code></pre></div>
<p>ä¸Šé¢ <code>oneshot1</code> å’Œ <code>oneFirehandler(timer:)</code> çš„å®ç°å¯ä»¥ç®€åŒ–ä¸ºä¸‹é¢çš„å½¢å¼ï¼Œçœ‹æ‚¨çš„ä½¿ç”¨ä¹ æƒ¯å’Œéœ€æ±‚å†³å®šä½¿ç”¨å“ªç§å½¢å¼äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">func</span> <span class="nf">oneshot1</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer(timeInterval:repeats:block:) åˆå§‹åŒ–ï¼Œå•æ¬¡&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">timeInterval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span> <span class="n">timer</span> <span class="k">in</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: å•æ¬¡å€’è®¡æ—¶ç»“æŸï¼&#34;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">timer</span><span class="p">!,</span> <span class="n">forMode</span><span class="p">:</span> <span class="p">.</span><span class="n">common</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>æˆ‘ä»¬ç»§ç»­è¯•ä¸€ä¸‹<strong>å¾ªç¯å®šæ—¶å™¨</strong>ï¼Œå…ˆå®šä¹‰ä¸€ä¸ªå¾ªç¯å®šæ—¶å™¨è¦å¤„ç†çš„ä»»åŠ¡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@objc</span> <span class="kd">private</span> <span class="kd">func</span> <span class="nf">loopFireHandler</span><span class="p">(</span><span class="kc">_</span> <span class="n">timer</span><span class="p">:</span> <span class="n">Timer</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kc">self</span><span class="p">.</span><span class="n">timeCount</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="n">timer</span><span class="p">!.</span><span class="n">invalidate</span><span class="p">()</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: å¾ªç¯å€’è®¡æ—¶ç»“æŸï¼&#34;</span><span class="p">)</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">timeCount</span> <span class="p">=</span> <span class="mi">5</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="kc">self</span><span class="p">.</span><span class="n">timeCount</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: å€’è®¡æ—¶ </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">timeCount</span><span class="si">)</span><span class="s"> ç§’&#34;</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p><code>loopFireHandler</code> æ–¹æ³•ä¸­è¿›è¡Œå€’è®¡æ—¶ï¼Œåˆ° 0 æ—¶ï¼Œè°ƒç”¨å®šæ—¶å™¨å¯¹è±¡çš„ <code>invalidate</code> æ–¹æ³•é‡Šæ”¾å®šæ—¶å™¨ã€‚å¦å¤–å®šæ—¶å™¨çš„å®ç°å¦‚ä¸‹ <code>loop1</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">func</span> <span class="nf">loop1</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer(timeInterval:repeats:block:) åˆå§‹åŒ–ï¼Œå¾ªç¯&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">timeInterval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="p">{</span> <span class="n">timer</span> <span class="k">in</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">loopFireHandler</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">timer</span><span class="p">!,</span> <span class="n">forMode</span><span class="p">:</span> <span class="p">.</span><span class="n">common</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°åªæ˜¯ <code>repeats</code> å‚æ•°æ”¹ä¸º trueï¼Œblock ä¸­è°ƒç”¨ <code>loopFireHandler</code> æ–¹æ³•ï¼Œä¸‹é¢æµ‹è¯•ä¸€ä¸‹ <code>loop1</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">TimerDemo</span><span class="p">.</span><span class="n">share</span><span class="p">.</span><span class="n">loop1</span><span class="p">()</span></code></pre></div>
<p>è¿è¡Œç»“æœå¦‚æˆ‘ä»¬æ‰€æƒ³ï¼Œå®ç°äº† 5 ç§’å€’è®¡æ—¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash"><span class="m">2019</span>-03-05 <span class="m">14</span>:10:22 +0000: Timer<span class="o">(</span>timeInterval:repeats:block:<span class="o">)</span> åˆå§‹åŒ–ï¼Œå¾ªç¯
<span class="m">2019</span>-03-05 <span class="m">14</span>:10:23 +0000: å€’è®¡æ—¶ <span class="m">4</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:10:24 +0000: å€’è®¡æ—¶ <span class="m">3</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:10:25 +0000: å€’è®¡æ—¶ <span class="m">2</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:10:26 +0000: å€’è®¡æ—¶ <span class="m">1</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:10:27 +0000: å€’è®¡æ—¶ <span class="m">0</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:10:28 +0000: å¾ªç¯å€’è®¡æ—¶ç»“æŸï¼</code></pre></div>
<h4 id="timer-timeinterval-target-selector-userinfo-repeats-ç±»æ–¹æ³•"><code>Timer(timeInterval:target:selector:userInfo:repeats:)</code> ç±»æ–¹æ³•</h4>

<ul>
<li>timeInterval å®šæ—¶å™¨æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’</li>
<li>target å®šæ—¶å™¨æ¯æ¬¡å¾ªç¯ç»“æŸåå‘é€æ¶ˆæ¯çš„ç›®æ ‡å¯¹è±¡</li>
<li>selector æŒ‡å®šå®šæ—¶å™¨æ¯æ¬¡è®¡æ—¶ç»“æŸè¦æ‰§è¡Œçš„æ–¹æ³•ï¼Œå¿…é¡»ä¸º <code>@objc</code> çš„å‡½æ•°å¯¹è±¡ï¼Œæ‰€ä»¥ä¸Šé¢å®šä¹‰çš„ <code>oneFireHandler</code> å’Œ <code>loopFireHandler</code> æœ€å‰é¢è¦åŠ  <code>@objc</code> å…³é”®è¯</li>
<li>userinfo æŒ‡å®šç”¨æˆ·ä¿¡æ¯ï¼Œå¯ä»¥æŒ‡å®šä¸º nil</li>
<li>repeats å†³å®šè¦ä¸è¦å¾ªç¯æ‰§è¡Œï¼Œtrue ä¸ºå¾ªç¯ï¼Œfalse ä¸ºå•æ¬¡</li>
</ul>

<p>å•æ¬¡å’Œå¾ªç¯çš„å®šæ—¶å™¨å¤„ç†ï¼Œåªæœ‰æ–¹æ³•ä¸­çš„ <code>repeats</code> å‚æ•°å’ŒæŒ‡å®šçš„å¤„ç†ä»»åŠ¡å‡½æ•°ä¸ä¸€æ ·ï¼Œå…¶å®ƒéƒ½ä¸€è‡´ï¼Œæ‰€ä»¥åé¢åªå±•ç¤ºå¾ªç¯å®šæ—¶å™¨çš„å®ç°ã€‚</p>

<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ <code>loop2</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">// ä½¿ç”¨ Timer(timeInterval:target:selector:userInfo:repeats:) åˆå§‹åŒ–å¯¹è±¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° main çº¿ç¨‹çš„ RunLoop ä¸­ï¼Œå¾ªç¯</span>
<span class="kd">func</span> <span class="nf">loop2</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer(timeInterval:target:selector:userInfo:repeats:) åˆå§‹åŒ–ï¼Œå¾ªç¯&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">timeInterval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">loopFireHandler</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">userInfo</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">timer</span><span class="p">!,</span> <span class="n">forMode</span><span class="p">:</span> <span class="p">.</span><span class="n">common</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>åŒæ ·éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦å°†å®šæ—¶å™¨ timer æ·»åŠ åˆ° RunLoop ä¸­å»ã€‚è°ƒç”¨è¿™ä¸ªæ–¹æ³• <code>TimerDemo.share.loop2()</code> å³å¯çœ‹åˆ°æ‰“å°ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash"><span class="m">2019</span>-03-05 <span class="m">14</span>:21:07 +0000: Timer<span class="o">(</span>timeInterval:target:selector:userInfo:repeats:<span class="o">)</span> åˆå§‹åŒ–ï¼Œå¾ªç¯
<span class="m">2019</span>-03-05 <span class="m">14</span>:21:08 +0000: å€’è®¡æ—¶ <span class="m">4</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:21:09 +0000: å€’è®¡æ—¶ <span class="m">3</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:21:10 +0000: å€’è®¡æ—¶ <span class="m">2</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:21:11 +0000: å€’è®¡æ—¶ <span class="m">1</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:21:12 +0000: å€’è®¡æ—¶ <span class="m">0</span> ç§’
<span class="m">2019</span>-03-05 <span class="m">14</span>:21:13 +0000: å¾ªç¯å€’è®¡æ—¶ç»“æŸï¼</code></pre></div>
<h3 id="ç¬¬äºŒç§æ–¹å¼">ç¬¬äºŒç§æ–¹å¼</h3>

<h4 id="timer-fire-interval-repeats-block-ç±»æ–¹æ³•"><code>Timer(fire:interval:repeats:block:)</code> ç±»æ–¹æ³•</h4>

<p>è¿™ä¸ªæ–¹æ³•ç›¸è¾ƒäº <code>Timer(timeInterval:repeats:block:)</code> åªå¤šäº†ä¸€ä¸ª <code>fire</code> å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä»£è¡¨çš„æ„æ€æ˜¯ä»€ä¹ˆæ—¶å€™è§¦å‘ç¬¬ä¸€æ¬¡è®¡æ—¶ç»“æŸï¼Œç±»å‹æ˜¯ Date ç±»ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³• <code>Date(timeIntervalSinceNow:)</code> æ–¹æ³•æŒ‡å®šç›¸å¯¹äºç°åœ¨çš„æ—¶åˆ»ï¼Œè¿™ä¸ªæ–¹æ³•å‚æ•°å•ä½æ˜¯ç§’ï¼Œæœ€ç»ˆ <code>Timer(fire:interval:repeats:block:)</code> ç±»æ–¹æ³•å®ç°å¾ªç¯å®šæ—¶å™¨çš„è¿‡ç¨‹å¦‚ä¸‹ <code>loop3</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">//  ä½¿ç”¨ Timer(fire:interval:repeats:block:) åˆå§‹åŒ–å¯¹è±¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° main çº¿ç¨‹çš„ RunLoop ä¸­ï¼Œå¾ªç¯</span>
<span class="kd">func</span> <span class="nf">loop3</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer(fire:interval:repeats:block:) åˆå§‹åŒ–ï¼Œæ·»åŠ åˆ° RunLoopï¼Œå¾ªç¯&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">fire</span><span class="p">:</span> <span class="n">Date</span><span class="p">(</span><span class="n">timeIntervalSinceNow</span><span class="p">:</span> <span class="mi">0</span><span class="p">),</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="p">{</span> <span class="n">timer</span> <span class="k">in</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">loopFireHandler</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">timer</span><span class="p">!,</span> <span class="n">forMode</span><span class="p">:</span> <span class="p">.</span><span class="n">common</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>æ³¨æ„ <code>fire</code> å‚æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬è®¾ç½®çš„æ˜¯ <code>Date(timeIntervalSinceNow: 0)</code>ï¼Œä¹Ÿå°±æ˜¯ç°åœ¨å°±è§¦å‘ä¸€æ¬¡è®¡æ—¶ç»“æŸï¼Œæ­¤æ—¶æ‰§è¡Œ <code>TimerDemo.share.loop3()</code> å¯ä»¥çœ‹åˆ°ç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">35</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="n">Timer</span><span class="p">(</span><span class="n">fire</span><span class="p">:</span><span class="n">interval</span><span class="p">:</span><span class="n">repeats</span><span class="p">:</span><span class="n">block</span><span class="p">:)</span> <span class="err">åˆå§‹åŒ–ï¼Œæ·»åŠ åˆ°</span> <span class="n">RunLoop</span><span class="err">ï¼Œå¾ªç¯</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">35</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">4</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">36</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">3</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">37</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">2</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">38</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">1</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">39</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">0</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">40</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å¾ªç¯å€’è®¡æ—¶ç»“æŸï¼</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œçš„æ‰“å°æ—¶é—´éƒ½æ˜¯ <code>2019-03-05 14:30:35 +0000</code> è¿™æ­£åŒ¹é…æˆ‘ä»¬è®¾ç½®çš„ fire å‚æ•°ï¼Œæˆ‘ä»¬æ”¹ä¸€ä¸‹ fire å‚æ•°ä¸º <code>Date(timeIntervalSinceNow: 3)</code>ï¼Œä¹Ÿå°±æ˜¯ç›¸å¯¹äºç°åœ¨å»¶å 3 ç§’è§¦å‘ç¬¬ä¸€æ¬¡è®¡æ—¶ç»“æŸï¼Œæ‰§è¡Œ <code>TimerDemo.share.loop3()</code> çœ‹ä¸€ä¸‹ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">00</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="n">Timer</span><span class="p">(</span><span class="n">fire</span><span class="p">:</span><span class="n">interval</span><span class="p">:</span><span class="n">repeats</span><span class="p">:</span><span class="n">block</span><span class="p">:)</span> <span class="err">åˆå§‹åŒ–ï¼Œæ·»åŠ åˆ°</span> <span class="n">RunLoop</span><span class="err">ï¼Œå¾ªç¯</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">03</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">4</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">04</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">3</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">05</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">2</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">06</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">1</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">07</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å€’è®¡æ—¶</span> <span class="mi">0</span> <span class="err">ç§’</span>
<span class="mi">2019</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span> <span class="mi">14</span><span class="p">:</span><span class="mi">33</span><span class="p">:</span><span class="mi">08</span> <span class="o">+</span><span class="mi">0000</span><span class="p">:</span> <span class="err">å¾ªç¯å€’è®¡æ—¶ç»“æŸï¼</span></code></pre></div>
<p>ç¬¬äºŒè¡Œä¸ç¬¬ä¸€è¡Œçš„æ‰“å°æ—¶é—´æœç„¶å·®äº† 3 ç§’ï¼Œè¿™ä¸‹æ‚¨åº”è¯¥æ˜ç™½è¿™ä¸ª fire å‚æ•°çš„å«ä¹‰äº†å§ï¼</p>

<h4 id="timer-fireat-interval-target-selector-userinfo-repeats-ç±»æ–¹æ³•"><code>Timer(fireAt:interval:target:selector:userInfo:repeats:)</code> ç±»æ–¹æ³•</h4>

<p>è¿™ä¸ªæ–¹æ³•ç›¸å¯¹äº <code>Timer(timeInterval:target:selector:userInfo:repeats:)</code> æ–¹æ³•å¤šäº†ä¸€ä¸ª <code>fireAt</code> å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°ä¸ä¸Šä¸€ä¸ªç±»æ–¹æ³•çš„ <code>fire</code> å«ä¹‰ä¸€è‡´ï¼Œä½¿ç”¨å°±å¾ˆç®€å•äº†ï¼Œå®šä¹‰ <code>loop4</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">//  ä½¿ç”¨ Timer(fireAt:interval:target:selector:userInfo:repeats:) åˆå§‹åŒ–å¯¹è±¡ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ° main çº¿ç¨‹çš„ RunLoop ä¸­ï¼Œå¾ªç¯</span>
<span class="kd">func</span> <span class="nf">loop4</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer(fireAt:interval:target:selector:userInfo:repeats:) åˆå§‹åŒ–ï¼Œæ·»åŠ åˆ° RunLoopï¼Œå¾ªç¯&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">fireAt</span><span class="p">:</span> <span class="n">Date</span><span class="p">(</span><span class="n">timeIntervalSinceNow</span><span class="p">:</span> <span class="mi">0</span><span class="p">),</span> <span class="n">interval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">loopFireHandler</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">userInfo</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="n">RunLoop</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">timer</span><span class="p">!,</span> <span class="n">forMode</span><span class="p">:</span> <span class="p">.</span><span class="n">common</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>è¿™é‡Œå°±ä¸å±•ç¤ºæ‰§è¡Œç»“æœäº†ã€‚</p>

<h3 id="ç¬¬ä¸‰ç§æ–¹å¼">ç¬¬ä¸‰ç§æ–¹å¼</h3>

<h4 id="timer-scheduledtimer-withtimeinterval-repeats-block-ç±»æ–¹æ³•"><code>Timer.scheduledTimer(withTimeInterval:repeats:block:)</code> ç±»æ–¹æ³•</h4>

<p>æ­¤æ–¹æ³•å‚æ•°ä¸ <code>Timer(timeInterval:repeats:block:)</code> å‚æ•°ä¸€è‡´ï¼Œæ‰€ä»¥å®ç°å®šæ—¶å™¨ä¸€å®šéš¾ä¸å€’æˆ‘ä»¬äº†ï¼Œä½†æ˜¯è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨æ­¤æ–¹æ³•å¾—åˆ°çš„ timer å¯¹è±¡åœ¨æ‰§è¡Œæ–¹æ³•çš„æ—¶å€™å·²ç»æ·»åŠ åˆ° RunLoop ä¸­äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ åˆ° RunLoop äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">//  ä½¿ç”¨ Timer.scheduledTimer(withTimeInterval:repeats:block:) æ–¹æ³•æ³¨å†Œè¿è¡Œï¼Œå¾ªç¯</span>
<span class="kd">func</span> <span class="nf">loop5</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer.scheduledTimer(withTimeInterval:repeats:block:) æ–¹æ³•ï¼Œå¾ªç¯&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">scheduledTimer</span><span class="p">(</span><span class="n">withTimeInterval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="n">block</span><span class="p">:</span> <span class="p">{</span> <span class="n">timer</span> <span class="k">in</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">loopFireHandler</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span></code></pre></div>
<h4 id="timer-scheduledtimer-timeinterval-target-selector-userinfo-repeats-ç±»æ–¹æ³•"><code>Timer.scheduledTimer(timeInterval:target:selector:userInfo:repeats:)</code> ç±»æ–¹æ³•</h4>

<p>æ­¤æ–¹æ³•å¦‚åŒ <code>Timer.scheduledTimer(withTimeInterval:repeats:block:)</code> æ–¹æ³•ï¼Œä¹Ÿä¸éœ€è¦å°†æ–¹æ³•è¿”å›çš„å¯¹è±¡æ‰‹åŠ¨æ·»åŠ åˆ° RunLoop äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">//  ä½¿ç”¨ Timer.scheduledTimer(timeInterval:target:selector:userInfo:repeats:) æ–¹æ³•æ³¨å†Œè¿è¡Œï¼Œå¾ªç¯</span>
<span class="kd">func</span> <span class="nf">loop6</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: Timer.scheduledTimer(withTimeInterval:repeats:block:) æ–¹æ³•ï¼Œå¾ªç¯&#34;</span><span class="p">)</span>
    <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">scheduledTimer</span><span class="p">(</span><span class="n">timeInterval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="kc">self</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="k">#selector</span><span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">loopFireHandler</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">userInfo</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<h3 id="timer-ç±»å®šæ—¶å™¨æ€»ç»“">Timer ç±»å®šæ—¶å™¨æ€»ç»“</h3>

<p>ç»¼ä¸Šï¼Œæˆ‘ä»¬ç®—æ˜¯äº†è§£äº† 6 ä¸­ç±»æ–¹æ³•å®ç°å®šæ—¶å™¨ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼æœ‰ä¸ªé—®é¢˜ï¼šå› ä¸ºæ˜¯è¿è¡Œåœ¨ main çº¿ç¨‹çš„çš„ RunLoop ä¸­ï¼Œæ‰€ä»¥å¯èƒ½å‡ºç°æ—¶é—´å»¶è¿Ÿçš„é—®é¢˜ï¼Œä¸»çº¿ç¨‹ä¸»è¦å¤„ç† UI æ§ä»¶çš„äº¤äº’ï¼Œå¦‚æœåœ¨å…¶ä¸­å†æœ‰ä¸€äº›è¿ç®—é‡å¤§çš„æ“ä½œï¼Œå¿…å®šä¼šå½±å“å®šæ—¶å™¨çš„æ‰§è¡Œï¼ˆé˜»å¡ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ Timer ä¸è®ºæ˜¯åœ¨å“ªä¸ª RunLoop ä¸­ï¼Œç»ˆç©¶ä¼šæ˜¯å— RunLoop çš„å½±å“ã€‚ä¸‹é¢æˆ‘ä»¬å°±å†äº†è§£ä¸€ä¸ªä¸å— RunLoop å½±å“çš„ GCD æ–¹å¼çš„å®šæ—¶å™¨ã€‚</p>

<h2 id="gcd-æ–¹å¼çš„-timer">GCD æ–¹å¼çš„ Timer</h2>

<p>é€šè¿‡ GCD æ–¹å¼åˆ›å»ºçš„å®šæ—¶å™¨ä¸ä¼šå— RunLoop çš„å½±å“ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒåº•å±‚çš„å®ç°ï¼Œæ‰€ä»¥å¾ˆé«˜æ•ˆè€Œä¸”ä¸å—çª—å£æ§ä»¶é¢‘ç¹æ“ä½œçš„å½±å“ã€‚GCD æ–¹å¼çš„å®šæ—¶å™¨ç±»å‹ä¸º <code>DispatchSourceTimer</code>ï¼Œå…¶å®ä¾‹å¯¹è±¡å¯ä»¥ä½¿ç”¨ <code>DispatchSource</code> çš„ <code>MakeTimerSource</code> æ–¹æ³•åˆ†é…èµ„æºè€Œå¾—åˆ°ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä»¥ä¸‹å¸¸ç”¨æ–¹æ³•ï¼š</p>

<ul>
<li>resume() å¼€å¯è¿è¡Œæˆ–æ¢å¤è¿è¡Œ</li>
<li>cancel() å–æ¶ˆå®šæ—¶å™¨</li>
<li>suspend() æŒ‚èµ·å®šæ—¶å™¨ï¼Œå¯ä»¥ä½¿ç”¨ resumne() æ¢å¤è¿è¡Œ</li>
<li>setEventHandler(handler: (() -&gt; Void)?) è®¾ç½®å®šæ—¶å™¨ä»»åŠ¡çš„å¤„ç†</li>
<li>setCancelHandler(handler: (() -&gt; Void)?) è®¾ç½®å®šæ—¶å™¨å–æ¶ˆæ—¶çš„å¤„ç†</li>
<li>schedule(deadline:repeating:leeway:) é…ç½®å®šæ—¶å™¨çš„æ—¶é—´å‚æ•°</li>
</ul>

<h3 id="schedule-deadline-repeating-leeway-æ–¹æ³•">schedule(deadline:repeating:leeway:) æ–¹æ³•</h3>

<p>è¿™ä¸ªæ˜¯ <code>DispatchSourceTimer</code> å¯¹è±¡ç”¨æ¥é…ç½®æ—¶é—´å‚æ•°çš„æ–¹æ³•ï¼Œæœ¬èŠ‚ä¸»è¦ä»‹ç»ä¸€ä¸‹å…¶å‚æ•°ã€‚</p>

<ul>
<li>deadline ç±»å‹ä¸º <code>DispatchTime</code> ï¼Œè¿™ä¸ªæ—¶é—´ç²¾åº¦å¯ä»¥è¾¾åˆ°çº³ç§’çº§ï¼Œå«ä¹‰ä¸ä¸Šé¢ Timer ç±»çš„ <code>Timer(fire:interval:repeats:block:)</code> æ–¹æ³•çš„ <code>fire</code> ä¸€è‡´ï¼Œä¸è¿‡ç±»å‹ä¸ä¸€æ ·ã€‚<code>DispatchTime</code> æœ‰ now() æ–¹æ³•ç”¨æ¥è·å–ç°åœ¨çš„æ—¶é—´ï¼Œå¯ä»¥ä¸ <code>DispatchTimeInterval</code> å¯¹è±¡å®ç° + æ“ä½œï¼Œå¾—åˆ°ä¸€ä¸ªç›¸å¯¹äºæ—¶åˆ»ï¼Œ<code>DispatchTimeInterval</code> å¯¹è±¡å¯ä»¥é€šè¿‡è°ƒç”¨ <code>seconds(_:Int)</code> æ–¹æ³•å¾—åˆ°ç§’ï¼Œ<code>milliseconds(_:Int)</code> æ–¹æ³•å¾—åˆ°æ¯«ç§’ï¼Œ<code>microseconds(_:Int)</code> æ–¹æ³•å¾—åˆ°å¾®ç§’ï¼Œ<code>nanoseconds(_:Int)</code> æ–¹æ³•å¾—åˆ°çº³ç§’</li>
<li>repeating ä¸ Timer ç±»æ–¹æ³•ä¸­çš„ repeat ä¸æ˜¯ä¸€ä¸ªæ„æ€ï¼Œè¿™é‡Œä»£è¡¨çš„æ˜¯å®šæ—¶å™¨æ—¶é—´é—´éš”ä¹Ÿå°±æ˜¯ <strong>timeInterval</strong>ï¼Œç±»å‹ä¸º <code>DispatchTimeInterval</code>ï¼Œæ¯”å¦‚æŒ‡å®šä¸€ç§’å¯ä»¥ <code>DispatchTimeInterval.seconds(1)</code>ã€‚è¿™ä¸ªå‚æ•°å…·æœ‰é»˜è®¤å€¼ï¼Œå½“ä¸æŒ‡å®šè¿™ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œè¿™ä¸ªå‚æ•°å°±ä¼šè®¾ç½®ä¸º <code>DispatchTimeInterval.never</code> ï¼Œé‚£ä¹ˆ<strong>å®šæ—¶å™¨åªæ‰§è¡Œä¸€æ¬¡</strong>ã€‚</li>
<li>leeway æ—¶é—´å®¹å·®ï¼Œæ˜¯ä¸€ä¸ªå®šæ—¶æ—¶é—´çš„å®½å®¹åº¦ï¼Œå…·æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œæ‰€ä»¥è°ƒç”¨æ­¤æ–¹æ³•çš„æ—¶å€™å¯ä»¥ä¸ç”¨æŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œå¦‚æœè¦æŒ‡å®šçš„è¯ï¼Œä¹Ÿæ˜¯ <code>DispatchTimeInterval</code> ç±»å‹</li>
</ul>

<h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3>

<p>è®²äº†ä¸Šé¢è¿™ä¹ˆå¤šï¼Œè¿˜æ˜¯ç”¨å®é™…çš„ä¾‹å­è¯´æ˜ï¼Œé¦–å…ˆåœ¨ TimerDemo ç±»ä¸­æ·»åŠ å¦‚ä¸‹å±æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">private</span> <span class="kd">var</span> <span class="nv">gcdTimer</span><span class="p">:</span> <span class="n">DispatchSourceTimer</span><span class="p">?</span></code></pre></div>
<p>å•æ¬¡å®šæ—¶å™¨ï¼Œå¦‚æ–¹æ³• <code>oneshot7</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">// GCD æ–¹å¼çš„å®šæ—¶å™¨ï¼Œå•æ¬¡</span>
<span class="kd">func</span> <span class="nf">oneshot7</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: GCD æ–¹å¼çš„å®šæ—¶å™¨ï¼Œå•æ¬¡&#34;</span><span class="p">)</span>
    <span class="n">gcdTimer</span> <span class="p">=</span> <span class="n">DispatchSource</span><span class="p">.</span><span class="n">makeTimerSource</span><span class="p">()</span>
    <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">setEventHandler</span><span class="p">()</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: å•æ¬¡å€’è®¡æ—¶ç»“æŸï¼&#34;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">schedule</span><span class="p">(</span><span class="n">deadline</span><span class="p">:</span> <span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="p">.</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span></code></pre></div>
<p>å¾ªç¯å®šæ—¶å™¨ï¼Œå¦‚æ–¹æ³• <code>loop7</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">// GCD æ–¹å¼çš„å®šæ—¶å™¨ï¼Œå¾ªç¯</span>
<span class="kd">func</span> <span class="nf">loop7</span><span class="p">()</span> <span class="p">{</span>
    <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: GCD æ–¹å¼çš„å®šæ—¶å™¨ï¼Œå¾ªç¯&#34;</span><span class="p">)</span>
    <span class="n">gcdTimer</span> <span class="p">=</span> <span class="n">DispatchSource</span><span class="p">.</span><span class="n">makeTimerSource</span><span class="p">()</span>
    <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">setEventHandler</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="kc">self</span><span class="p">.</span><span class="n">timeCount</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">gcdTimer</span><span class="p">?.</span><span class="n">cancel</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="p">}</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">timeCount</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: å€’è®¡æ—¶ </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">timeCount</span><span class="si">)</span><span class="s"> ç§’&#34;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">setCancelHandler</span><span class="p">()</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;</span><span class="si">\(</span><span class="n">Date</span><span class="si">())</span><span class="s">: å€’è®¡æ—¶ç»“æŸï¼&#34;</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">schedule</span><span class="p">(</span><span class="n">deadline</span><span class="p">:</span> <span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="p">.</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">repeating</span><span class="p">:</span> <span class="p">.</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span></code></pre></div>
<p><strong>æ³¨æ„</strong></p>

<p>å¦‚æœå®šæ—¶å™¨ä»»åŠ¡ä¸­éœ€è¦å¯¹ UI æ§ä»¶è¿›è¡Œæ“ä½œï¼Œè¦å°†é‚£éƒ¨åˆ†æ“ä½œæ”¾åœ¨ä¸»çº¿ç¨‹è¿›è¡Œä¹Ÿå°±æ˜¯ç”¨ä¸‹é¢çš„ä»£ç åŒ…è£¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span> <span class="p">{</span>
    <span class="c1">// UIæ§ä»¶æ“ä½œ</span>
<span class="p">}</span></code></pre></div>
<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ä¸Šè¿°å®šæ—¶å™¨æ¼”ç¤ºçš„ playgroud å¯ä»¥é€šè¿‡ä¸‹é¢é“¾æ¥æŸ¥çœ‹ï¼š</p>

<p><a href="https://gist.github.com/smslit/d62773e68d12816c4efc878395da2365" target="_blank">cocoaTimer.playground</a></p>

<h1 id="ä¸¤ç§æ–¹å¼ç¤ºä¾‹å¯¹æ¯”">ä¸¤ç§æ–¹å¼ç¤ºä¾‹å¯¹æ¯”</h1>

<p>ä¸ºäº†å‡¸æ˜¾ GCD æ–¹å¼å®šæ—¶å™¨ä¸å— UI çš„æ“ä½œçš„å½±å“ï¼Œæœ¬å°èŠ‚æ–°å»ºä¸€ä¸ªåä¸º TimerDemo çš„å·¥ç¨‹ï¼Œå·¥ç¨‹çš„ Main.storyboard ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œä¸¤ä¸ª label å’Œä¸€ä¸ªæ»‘å—ï¼Œåˆç†æ”¾ç½®ä½ç½®ï¼Œæ¯”å¦‚ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190306002519.png" alt="" /></p>

<p>åˆ†åˆ«å°†ä¸¤ä¸ª label çš„æŒ‰é’®ç»‘å®šå±æ€§åˆ° ViewController ç±»ï¼ŒåŒæ—¶ä¸ºæŒ‰é’®æ·»åŠ ä¸€ä¸ª action ç”¨æ¥å¯åŠ¨ä¸¤ç§å®šæ—¶å™¨ã€‚ä¸¤ä¸ª label åˆ†åˆ«æ˜¾ç¤º Timer å®šæ—¶å™¨çš„å€’è®¡æ—¶æ—¶é—´å’Œ GCD æ–¹å¼çš„å®šæ—¶å™¨çš„å€’è®¡æ—¶æ—¶é—´ï¼Œå½“å¯åŠ¨å®šæ—¶å™¨åï¼Œæˆ‘ä»¬é¢‘ç¹æ»‘åŠ¨æ»‘æ†ï¼Œè§‚å¯Ÿä¸¤ä¸ªå®šæ—¶å™¨çš„æƒ…å†µï¼Œæœ€ç»ˆå®ç°çš„ ViewController ç±»å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">class</span> <span class="nc">ViewController</span><span class="p">:</span> <span class="n">NSViewController</span> <span class="p">{</span>

    <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">timerLabel1</span><span class="p">:</span> <span class="n">NSTextField</span><span class="p">!</span>
    <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">timerLabel2</span><span class="p">:</span> <span class="n">NSTextField</span><span class="p">!</span>
    <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">timerButton</span><span class="p">:</span> <span class="n">NSButton</span><span class="p">!</span>
    
    <span class="kd">var</span> <span class="nv">count1</span> <span class="p">=</span> <span class="mi">60</span>
    <span class="kd">var</span> <span class="nv">count2</span> <span class="p">=</span> <span class="mi">60</span>
    <span class="kd">var</span> <span class="nv">timer</span><span class="p">:</span> <span class="n">Timer</span><span class="p">?</span>
    <span class="kd">var</span> <span class="nv">gcdTimer</span><span class="p">:</span> <span class="n">DispatchSourceTimer</span><span class="p">?</span>
    
    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="kc">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

        <span class="c1">// Do any additional setup after loading the view.</span>
    <span class="p">}</span>

    <span class="kr">override</span> <span class="kd">var</span> <span class="nv">representedObject</span><span class="p">:</span> <span class="nb">Any</span><span class="p">?</span> <span class="p">{</span>
        <span class="kr">didSet</span> <span class="p">{</span>
        <span class="c1">// Update the view, if already loaded.</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">startTimer</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">timer</span> <span class="p">=</span> <span class="n">Timer</span><span class="p">.</span><span class="n">scheduledTimer</span><span class="p">(</span><span class="n">withTimeInterval</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">repeats</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span> <span class="n">timer</span> <span class="k">in</span>
            <span class="k">if</span> <span class="kc">self</span><span class="p">.</span><span class="n">count1</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
                <span class="n">timer</span><span class="p">.</span><span class="n">invalidate</span><span class="p">()</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">count1</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">timerLabel1</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="s">&#34;timer: </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">count1</span><span class="si">)</span><span class="s"> ç§’&#34;</span>
        <span class="p">}</span>
        
        <span class="n">gcdTimer</span> <span class="p">=</span> <span class="n">DispatchSource</span><span class="p">.</span><span class="n">makeTimerSource</span><span class="p">()</span>
        <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">setEventHandler</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="kc">self</span><span class="p">.</span><span class="n">count2</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="p">{</span>
                <span class="kc">self</span><span class="p">.</span><span class="n">gcdTimer</span><span class="p">?.</span><span class="n">cancel</span><span class="p">()</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">count2</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span> <span class="p">{</span>
                <span class="kc">self</span><span class="p">.</span><span class="n">timerLabel2</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="s">&#34;gcdTimer: </span><span class="si">\(</span><span class="kc">self</span><span class="p">.</span><span class="n">count2</span><span class="si">)</span><span class="s"> ç§’&#34;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">schedule</span><span class="p">(</span><span class="n">deadline</span><span class="p">:</span> <span class="p">.</span><span class="n">now</span><span class="p">()</span> <span class="o">+</span> <span class="p">.</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">repeating</span><span class="p">:</span> <span class="p">.</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">leeway</span><span class="p">:</span> <span class="p">.</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">gcdTimer</span><span class="p">?.</span><span class="n">resume</span><span class="p">()</span>
        
        <span class="kc">self</span><span class="p">.</span><span class="n">timerButton</span><span class="p">.</span><span class="n">isEnabled</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>æœ€åè¿è¡Œç¨‹åºï¼Œç–¯ç‹‚æ»‘åŠ¨æ»‘æ†å¯ä»¥çœ‹åˆ° GCD æ–¹å¼çš„å®šæ—¶å™¨ä¸æ¯«ä¸å—å½±å“ï¼Œè€Œ Timer ç±»çš„å®šæ—¶å™¨å—åˆ°äº†é˜»å¡ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/timer_compare.mp4" width="960px" controls="controls"></video>

<p>ç¤ºä¾‹å·¥ç¨‹ä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/TimerDemo.zip" target="_blank">TimerDemo</a></p>
]]></content>
		</item>
		
		<item>
			<title>å·²å¼€æº app å®ç°æ£€æŸ¥æ›´æ–°çš„ç®€å•æ–¹å¼</title>
			<link>https://www.smslit.top/2019/03/03/macOS-dev-simple-check-update/</link>
			<pubDate>Sun, 03 Mar 2019 09:38:27 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/03/macOS-dev-simple-check-update/</guid>
			<description>å¦‚æœæ‚¨å¼€å‘çš„ app æ²¡æœ‰ä¸Šæ¶ app storeï¼Œé‚£ä¹ˆæ‚¨è‚¯å®šä¼šè€ƒè™‘å¦‚ä½•ä¿è¯ç”¨æˆ·åŠæ—¶æ”¶åˆ° app æ›´æ–°çš„é—®é¢˜ï¼Œå¦‚æœæ‚¨çš„é¡¹ç›®æ˜¯å¼€æºåœ¨æŸä¸ªæ‰˜ç®¡å¹³å°çš„ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±æä¾›ä¸€ç§</description>
			<content type="html"><![CDATA[

<p>å¦‚æœæ‚¨å¼€å‘çš„ app æ²¡æœ‰ä¸Šæ¶ app storeï¼Œé‚£ä¹ˆæ‚¨è‚¯å®šä¼šè€ƒè™‘å¦‚ä½•ä¿è¯ç”¨æˆ·åŠæ—¶æ”¶åˆ° app æ›´æ–°çš„é—®é¢˜ï¼Œå¦‚æœæ‚¨çš„é¡¹ç›®æ˜¯å¼€æºåœ¨æŸä¸ªæ‰˜ç®¡å¹³å°çš„ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±æä¾›ä¸€ç§ç®€å•çš„æ–¹å¼åŠ©æ‚¨å®ç° app æ£€æŸ¥æ›´æ–°çš„åŠŸèƒ½ã€‚</p>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="æ€è·¯">æ€è·¯</h1>

<p>æœ¬æ–‡æä¾›çš„æ–¹æ³•ï¼Œä¸éœ€è¦æ¶è®¾æœåŠ¡å™¨ï¼Œåªè¦åœ¨å¼€æºå¹³å°ä¸Šæ‰˜ç®¡å°±å¯ä»¥ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œå‡è®¾æ‚¨çš„ app éƒ½æ˜¯åœ¨æ‰˜ç®¡å¹³å°å‘å¸ƒï¼Œå¹¶ä¸”ä»£ç ä¹Ÿæ˜¯åŠæ—¶æ¨é€åˆ°æ‰˜ç®¡å¹³å°çš„ã€‚</p>

<p>æ¯ä¸ª xcode å·¥ç¨‹ä¸­éƒ½æœ‰ä¸€ä¸ª <code>info.plist</code> æ–‡ä»¶ï¼Œä½¿ç”¨å…¶ä¸­çš„ <code>CFBundleShortVersionString</code> é”®çš„å€¼ä½œä¸ºç‰ˆæœ¬åˆ¤æ–­ä¾æ®ï¼Œapp è¿è¡Œèµ·æ¥æœ¬èº«èƒ½è·å–è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œé€šè¿‡ç½‘ç»œä»æ‰˜ç®¡å¹³å°è·å–æœ€æ–°ç‰ˆæœ¬æºæ–‡ä»¶ä¸­çš„ <code>info.plist</code> æ–‡ä»¶ï¼Œç„¶åå¾—åˆ°æœ€æ–°ç‰ˆæœ¬å·ï¼Œä¸è‡ªèº«çš„ç‰ˆæœ¬å·å¯¹æ¯”ï¼Œå¦‚æœä¸ä¸€æ ·å°±è¯´æ˜æœ‰äº†æœ€æ–°ç‰ˆæœ¬ï¼ˆæ›´ä¸¥æ ¼çš„åˆ¤æ–­åº”è¯¥æ˜¯è¿œç«¯æ–‡ä»¶ä¸­è·å–çš„ç‰ˆæœ¬å·æ–°äº app è‡ªèº«çš„ç‰ˆæœ¬å·ï¼‰ï¼Œç„¶åé€šè¿‡æç¤ºæ¡†æé†’ç”¨æˆ·æœ‰æ–°ç‰ˆæœ¬å‘ç°ï¼Œæç¤ºæ¡†ä¸­ç»™å‡ºä¸€ä¸ªæŒ‰é’®ï¼Œå¸®åŠ©ç”¨æˆ·è·³è½¬åˆ°å¼€æºå·¥ç¨‹æœ€æ–°ç‰ˆæœ¬çš„ release é¡µé¢å³å¯ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190303111234.png" alt="" /></p>

<p><strong>æ³¨</strong>ï¼šæœ¬æ–‡æè¿°çš„å…·ä½“æ–¹æ³•ä¸é€‚ç”¨äº <strong>Xcode 11</strong> åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå› ä¸º info.plist çš„å†…å®¹æœ‰å˜åŒ–ï¼Œä¸è¿‡å¯ä»¥ç»§ç»­ä½¿ç”¨æ­¤æ–‡æè¿°çš„æ€è·¯ï¼Œä¸åŒçš„æ˜¯éœ€è¦è§£æçš„æ–‡ä»¶ä¸æ˜¯ <code>info.plist</code> è€Œæ˜¯ <code>xxxxx.xcodeproj/project.pbxproj</code> ï¼Œç‰ˆæœ¬å°±æ˜¯å…¶ä¸­çš„ <code>MARKETING_VERSION</code>ã€‚</p>

<p>è¿™é‡Œä»¥å·¥ç¨‹æ‰˜ç®¡åœ¨ github ä¸ºä¾‹ï¼Œè¯´æ˜å‡ ç‚¹æ³¨æ„çš„åœ°æ–¹ï¼š</p>

<ul>
<li><p>è¯·æ±‚çš„ <code>info.plist</code> æ–‡ä»¶é“¾æ¥å¿…é¡»æ˜¯ç›´æ¥æŒ‡å‘åŸæ–‡ä»¶çš„ï¼Œè€Œä¸æ˜¯æµè§ˆä»£ç é¡µé¢å¯¹åº”çš„é“¾æ¥ï¼Œç½‘é¡µ github å¹³å°ä¸Šæµè§ˆå·¥ç¨‹ä»£ç ï¼Œæ‰¾åˆ° <code>info.plist</code> æ–‡ä»¶ï¼Œç„¶åç‚¹å‡»å¦‚å›¾ä½ç½®çš„ <code>raw</code> æŒ‰é’®å³å¯å¾—åˆ°æºæ–‡ä»¶çš„ç›´é“¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190303111930.png" alt="" /></p></li>

<li><p>è·³è½¬æœ€æ–° release çš„é¡µé¢æ˜¯æ ¹æ® tag åè¿›è¡Œè·³è½¬çš„ï¼Œæ‰€ä»¥ tag åç§°æœ€å¥½ä¸ç‰ˆæœ¬å·å‘½åè§„åˆ™ä¸€è‡´ï¼Œå½“ç„¶ä¸ä¸€è‡´ä¹Ÿå¯ä»¥ï¼Œåªè¦æœ€ç»ˆèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥ï¼Œæ¯”å¦‚åé‡Œçš„ä¸€ä¸ªå¼€æºé¡¹ç›® <a href="https://github.com/smslit/textGO" target="_blank">textGO</a>ï¼Œå¯¹åº” tag çš„ release é¡µé¢é“¾æ¥å¯ä»¥è½»æ˜“è·å¾—ï¼š<code>https://github.com/smslit/textGO/releases/tag/v0.3</code> ï¼Œè§„åˆ™å°±æ˜¯ <code>https://github.com/smslit/textGO/releases/tag/v</code> + ç‰ˆæœ¬å·</p></li>

<li><p>ç¬¬ä¸€æ­¥ç½‘ç»œè¯·æ±‚ <code>info.plist</code> æ–‡ä»¶ä½¿ç”¨ GET è¯·æ±‚å³å¯å®Œæˆï¼Œç½‘ç»œè¯·æ±‚ç›¸å…³å†…å®¹å¯ä»¥é€šè¿‡å¦ä¸€ç¯‡æ–‡ç« äº†è§£ï¼š<a href="/2019/01/26/get_post_cocoa/" target="_blank">macOS å¼€å‘ä¹‹å®ç° HTTP çš„ GET å’Œ POST è¯·æ±‚</a></p></li>
</ul>

<h1 id="ç¤ºä¾‹">ç¤ºä¾‹</h1>

<p>ä¸‹é¢ä»¥åé‡Œçš„å¼€æºé¡¹ç›® <a href="https://github.com/smslit/textGO" target="_blank">textGO</a> ä¸ºä¾‹è¯´æ˜ä¸€ä¸‹å®ç°ã€‚</p>

<h2 id="æ›´æ–°å™¨ç±»">æ›´æ–°å™¨ç±»</h2>

<p>å› ä¸ºåé‡Œå°†é¡¹ç›®æ‰˜ç®¡åˆ°çš„æ˜¯ github å¹³å°ï¼Œæ‰€ä»¥å°è£…çš„æ›´æ–°å™¨ç±»ä»…é€‚ç”¨äº githubï¼Œå¦‚æœé€‚é…å…¶å®ƒå¹³å°åªéœ€ä¿®æ”¹ä¸¤å¤„ url çš„å¤„ç†å³å¯ã€‚æ›´æ–°å™¨ç±»ä¸º TextGoUpdater ï¼Œåœ¨æ–‡ä»¶ <code>TextGoUpdater.swift</code> ä¸­å®šä¹‰ï¼Œæ‚¨å¯ä»¥æ‰“å¼€è¿™ä¸ª<a href="https://github.com/smslit/textGO/blob/master/textGO/TextGoUpdater.swift" target="_blank">æ–‡ä»¶</a>æŸ¥çœ‹å…·ä½“å®ç°ä»£ç ã€‚</p>

<h3 id="å±æ€§">å±æ€§</h3>

<p>TextGoUpdater ç±»ä¸­å®šä¹‰äº†ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ <code>user</code>ã€<code>url</code>ã€‚</p>

<ul>
<li><code>user</code> æŒ‡çš„æ˜¯ github çš„è´¦æˆ·å</li>
<li><code>url</code> æŒ‡çš„æ˜¯ <code>info.plist</code> æ–‡ä»¶çš„ç›´é“¾</li>
</ul>

<h3 id="æ–¹æ³•">æ–¹æ³•</h3>

<ul>
<li><code>init(user:)</code> åˆå§‹åŒ–æ–¹æ³•ï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¸­æ ¹æ®æä¾›çš„ github è´¦æˆ·åå’Œå·¥ç¨‹åæ¨æ–­å‡º <code>info.plist</code> æ–‡ä»¶çš„ç›´é“¾å¹¶èµ‹ç»™ url å±æ€§</li>
<li><code>check(callback:)</code> è§¦å‘æ£€æŸ¥æ›´æ–°çš„è¿‡ç¨‹ï¼Œæ˜¯å…¬å…±æ–¹æ³•ã€‚<code>callback</code> æ˜¯ä¸ªé€ƒé€¸é—­åŒ…ï¼Œå®Œæˆç½‘ç»œè¯·æ±‚ååœ¨è¿›è¡Œæ•°æ®å¤„ç†å‰æ‰§è¡Œï¼Œä¸»è¦æ–¹ä¾¿è°ƒæ•´æ§ä»¶çš„çŠ¶æ€ã€‚</li>
<li><code>checkUpdateRequestSuccess(data:response:error:callback:)</code> å°è£…äº†ç½‘ç»œè¯·æ±‚å®Œæˆåçš„å¤„ç†è¿‡ç¨‹ï¼Œæ˜¯ç§æœ‰æ–¹æ³•ã€‚å¦å¤–ä½¿ç”¨çš„ä¸¤ä¸ª <code>tipInfo</code> æ–¹æ³•åœ¨ <code>TextGoPublic.swift</code> æ–‡ä»¶ä¸­å®šä¹‰ï¼Œç”¨æ¥æ˜¾ç¤ºæç¤ºæ¡†å‘ŠçŸ¥ç”¨æˆ·æ£€æµ‹æ›´æ–°çš„ç»“æœã€‚æ£€æµ‹åˆ°æ›´æ–°ä»¥åï¼Œä¼šæ ¹æ®ç±»çš„ user å±æ€§å’Œå·¥ç¨‹åç§°ä»¥åŠæœ€æ–°ç‰ˆæœ¬å·æ¨æ–­å‡º release é¡µé¢é“¾æ¥ã€‚</li>
</ul>

<h3 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h3>

<p>ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œä¸»è¦åˆ†ä¸¤ç§ï¼šæœ‰å›è°ƒå’Œæ²¡æœ‰å›è°ƒã€‚</p>

<h4 id="æ— å›è°ƒä½¿ç”¨">æ— å›è°ƒä½¿ç”¨</h4>

<p>å¯ä»¥åœ¨æ–‡ä»¶ <code>AppDelegate.swift</code> ä¸­çœ‹åˆ°ä½¿ç”¨æ–¹æ³•</p>

<ul>
<li><p>å®šä¹‰å±æ€§ updater</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">updater</span> <span class="p">=</span> <span class="n">TextGoUpdater</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="s">&#34;smslit&#34;</span><span class="p">)</span> <span class="p">{}</span></code></pre></div></li>

<li><p>åœ¨ <code>checkUpdate()</code> æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨ updater å®ä¾‹çš„ check æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">checkUpdate</span><span class="p">()</span> <span class="p">{</span>
<span class="n">updater</span><span class="p">.</span><span class="n">check</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span></code></pre></div></li>
</ul>

<h4 id="æœ‰å›è°ƒä½¿ç”¨">æœ‰å›è°ƒä½¿ç”¨</h4>

<ul>
<li><p>å®šä¹‰å±æ€§ updater</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">updater</span> <span class="p">=</span> <span class="n">TextGoUpdater</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="s">&#34;smslit&#34;</span><span class="p">)</span> <span class="p">{}</span></code></pre></div></li>

<li><p>åœ¨ <code>checkUpdate()</code> æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨ updater å®ä¾‹çš„ check æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">checkUpdate</span><span class="p">()</span> <span class="p">{</span>
<span class="n">updater</span><span class="p">.</span><span class="n">check</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// å®ç°å¯¹ç•Œé¢æ§ä»¶çš„è°ƒæ•´</span>
<span class="p">}</span>
<span class="p">}</span></code></pre></div></li>
</ul>

<h2 id="æ‰§è¡Œæ•ˆæœ">æ‰§è¡Œæ•ˆæœ</h2>

<p>textGO æ˜¯ä¸€ä¸ªèœå•æ å°å·¥å…·ï¼Œé€šè¿‡ç‚¹å‡»<code>æ£€æŸ¥æ›´æ–°</code>èœå•é¡¹è§¦å‘æ›´æ–°çš„æ£€æŸ¥ï¼Œä¸ºäº†æ›´å¥½çš„å±•ç¤ºæ•ˆæœï¼Œä»¥è§†é¢‘å±•ç¤ºï¼ŒåŒæ—¶ä¿®æ”¹ç‰ˆæœ¬å·æ¥æŸ¥çœ‹æœ‰æ›´æ–°å’Œæ²¡æ›´æ–°ä¸¤ç§æƒ…å†µçš„æ•ˆæœã€‚</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/check_update_simple.mp4" width="100%" controls="controls"></video>

<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>æœ¬æ–‡æ›´æ–°å™¨çš„å®ç°æ€è·¯æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯æä¾›äº†æ£€æŸ¥æ›´æ–°çš„åŠŸèƒ½ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹è¿™å°±è¶³å¤Ÿäº†ï¼Œå…¶å®è¿™ç§æ–¹æ³•ä¹Ÿèƒ½é€‚ç”¨äºæ‰˜ç®¡å¹³å°çš„ç§æœ‰é¡¹ç›®ï¼Œå¯ä»¥åœ¨å¹³å°ä¸­å…±äº«å‡ºæŸä¸ªå¯ä»¥æä¾›ç‰ˆæœ¬å·çš„æ–‡ä»¶ï¼Œå¾—åˆ°å®ƒçš„ç›´é“¾å°±å¯ä»¥ï¼Œæ€è·¯ä¸€æ ·ï¼Œæƒ³åŠæ³•æ›´æ”¹ä¸¤å¤„é“¾æ¥å°±èƒ½å®ç°ã€‚æœ€åï¼Œç¥æ‚¨æˆåŠŸï¼</p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹æœ¬åœ°åŒ–å·¥å…· bartycrouch 4 ä½¿ç”¨æ•™ç¨‹</title>
			<link>https://www.smslit.top/2019/03/01/macOS-dev-bartycrouch4-tutorial/</link>
			<pubDate>Fri, 01 Mar 2019 08:59:33 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/03/01/macOS-dev-bartycrouch4-tutorial/</guid>
			<description>å‰äº›æ—¥å­å†™äº†ä¸‰ç¯‡å…³äº macOS app æœ¬åœ°åŒ–çš„æ–‡ç« ï¼Œåœ¨æ–‡ç« ä¸­ç”¨åˆ°äº†ä¸€ä¸ªåä¸º bartycrouch çš„å·¥å…·ï¼Œå½“æ—¶åé‡Œå®‰è£…çš„ bartycrouch ç‰ˆæœ¬æ˜¯ v3.13.3ï¼Œæ˜¨å¤©å‡çº§äº† bartycrouch ç°åœ¨æ˜¯ v4.0.0 ï¼Œå‘ç°ä½¿ç”¨æ–¹</description>
			<content type="html"><![CDATA[

<p>å‰äº›æ—¥å­å†™äº†ä¸‰ç¯‡å…³äº macOS app æœ¬åœ°åŒ–çš„æ–‡ç« ï¼Œåœ¨æ–‡ç« ä¸­ç”¨åˆ°äº†ä¸€ä¸ªåä¸º bartycrouch çš„å·¥å…·ï¼Œå½“æ—¶åé‡Œå®‰è£…çš„ bartycrouch ç‰ˆæœ¬æ˜¯ v3.13.3ï¼Œæ˜¨å¤©å‡çº§äº† bartycrouch ç°åœ¨æ˜¯ v4.0.0 ï¼Œå‘ç°ä½¿ç”¨æ–¹æ³•å˜åŒ–è¿˜æŒºå¤§ï¼Œæ‰€ä»¥èµ¶å¿«åœ¨å‰é¢ä¸‰ç¯‡æ–‡ç« ä¸­æ ‡æ³¨äº†ä¸€ä¸‹ç‰ˆæœ¬ä½¿ç”¨é—®é¢˜ï¼Œæœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹ bartycrouch 4 çš„ä½¿ç”¨ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190301092140.png" alt="" /></p>

<h2 id="å¼€å‘å¹³å°">å¼€å‘å¹³å°</h2>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h2 id="bartycrouch-å‡†å¤‡">bartycrouch å‡†å¤‡</h2>

<blockquote>
<p>BartyCrouch incrementally updates your Strings files from your Code and from Interface Builder files. &ldquo;Incrementally&rdquo; means that BartyCrouch will by default keep both your already translated values and even your altered comments. Additionally you can also use BartyCrouch for machine translating from one language to 60+ other languages. Using BartyCrouch is as easy as running a few simple commands from the command line what can even be automated using a build script within your project.</p>
</blockquote>

<p><a href="https://github.com/Flinesoft/BartyCrouch" target="_blank">BartyCrouch</a></p>

<p>bartycrouch å¯ä»¥ä¾æ® interfaces æ–‡ä»¶( xib æ–‡ä»¶) å’Œä»£ç (swift ã€mã€h æ–‡ä»¶)æ¥å¢é‡æ›´æ–° strings æ–‡ä»¶ã€‚åœ¨è¿™é‡Œ <strong>å¢é‡</strong> æ˜¯æŒ‡ bartycrouch ä¼šé»˜è®¤ä¿ç•™å·²ç»ç¿»è¯‘çš„å€¼åŠæ”¹å˜äº†çš„æ³¨é‡Šã€‚å¦å¤–æ‚¨ä¹Ÿå¯ä½¿ç”¨ bartycrouch å€ŸåŠ©å¾®è½¯çš„æœåŠ¡ä»ä¸€ç§è¯­è¨€æœºå™¨ç¿»è¯‘æˆè¶…è¿‡ 60+ ç§è¯­è¨€ã€‚åœ¨å‘½ä»¤è¡Œè°ƒç”¨å‡ ä¸ªç®€å•çš„å‘½ä»¤æ‚¨å°±å¯ä»¥è½»è€Œæ˜“ä¸¾çš„ä½¿ç”¨ bartycrouchï¼Œå¦å¤–æ‚¨ä¹Ÿå¯ä»¥åœ¨ xcode çš„å·¥ç¨‹é…ç½®ä¸­æ·»åŠ è¿è¡Œè„šæœ¬è‡ªåŠ¨åŒ–ä½¿ç”¨ bartycrouch å®Œæˆæ‚¨æœŸæœ›çš„ä»»åŠ¡ã€‚</p>

<h3 id="ä¾èµ–">ä¾èµ–</h3>

<ul>
<li>Xcode 10.1+</li>
<li>Swift 4.2+</li>
<li>Xcode Command Line Tools (è¯¦è§ï¼š<a href="http://stackoverflow.com/a/9329325/3451975" target="_blank">ç‚¹æˆ‘</a>)</li>
</ul>

<h3 id="å®‰è£…æ–¹æ³•">å®‰è£…æ–¹æ³•</h3>

<p><details>
<summary>ä½¿ç”¨ <a href="https://brew.sh/" target="_blank">Homebrew</a> å®‰è£…</summary></p>

<p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯ä»¥å¾ˆå®¹æ˜“å®‰è£… bartycrouch:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">brew install bartycrouch</code></pre></div>
<p>å¦å¤–å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ›´æ–° bartycrouchï¼Œä¿è¯ä¸€ç›´ä½¿ç”¨æœ€æ–°ä¿æœ¬:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">brew upgrade bartycrouch</code></pre></div>
<p></details></p>

<p><details>
<summary>é€šè¿‡ <a href="https://github.com/yonaskolb/Mint" target="_blank">Mint</a> å®‰è£…</summary></p>

<p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥å®‰è£… bartycrouchï¼ˆç›®å‰é€šè¿‡è¿™ç§æ–¹å¼ä¼šå‡ºç°ç¼ºå°‘åŠ¨æ€åº“çš„é—®é¢˜ï¼Œä¼°è®¡å¾ˆå¿«å°±ä¼šä¿®å¤äº†ï¼Œæ‰€ä»¥å»ºè®®ä½¿ç”¨ homebrew å®‰è£…çš„æ–¹å¼ï¼‰:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mint install Flinesoft/BartyCrouch</code></pre></div>
<p></details></p>

<h2 id="bartycrouch-ä½¿ç”¨">bartycrouch ä½¿ç”¨</h2>

<p>è¿™é‡Œæé†’ä¸€ä¸‹ï¼Œå¦‚æœæ‚¨ç›´æ¥ç”¨ä¸€ä¸ªç°æœ‰çš„å·¥ç¨‹å°è¯•è¿™ä¸ªå·¥å…·çš„è¯ï¼Œä»¥é˜²ä¸‡ä¸€è¯·å…ˆç”¨ git <em>æäº¤</em> ä¸€ä¸‹æ‚¨çš„ä»£ç ï¼Œå°½é‡ä¿è¯å®‰å…¨ï¼Œå¦å¤–è¿™é‡Œå¼ºçƒˆå»ºè®®å¦‚æœç ”ç©¶æ˜ç™½æ€ä¹ˆç”¨äº†åä½¿ç”¨ä¸º xcode <a href="#åˆ›å»ºç¼–è¯‘è„šæœ¬">åˆ›å»ºç¼–è¯‘è„šæœ¬</a> çš„æ–¹å¼ä½¿ç”¨ bartycrouchã€‚</p>

<p>åœ¨å‘½ä»¤è¡Œä¸‹ï¼Œå…ˆæ‰§è¡Œä¸€ä¸‹ <code>bartycrouch -h</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash">$ bartycrouch -h

Usage: bartycrouch &lt;command&gt; <span class="o">[</span>options<span class="o">]</span>

Incrementally update <span class="p">&amp;</span> translate your Strings files from code or interface files.

Commands:
  init            Creates the default configuration file <span class="p">&amp;</span> creates a build script <span class="k">if</span> Xcode project found
  update          Update your .strings file contents with the configured tasks <span class="o">(</span>default: interfaces, code, normalize<span class="o">)</span>
  lint            Lints your .strings file contents
  <span class="nb">help</span>            Prints <span class="nb">help</span> information
  version         Prints the current version of this app</code></pre></div>
<ul>
<li><code>help</code>: æ‰“å°å¸®åŠ©ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ï¼Œ<code>bartycrouch -h</code> ç­‰åŒäº <code>bartycrouch help</code></li>
<li><code>version</code>: æ‰“å°å½“å‰ bartycrouch çš„ç‰ˆæœ¬å·</li>
</ul>

<p>ä¸‹é¢ä»¥ bartycrouch æ­£å¸¸çš„ä½¿ç”¨æµç¨‹åˆ†åˆ«è®²ä¸€ä¸‹ <code>init</code> <code>update</code> å’Œ <code>lint</code> ä¸‰ä¸ªå‘½ä»¤ã€‚</p>

<h3 id="init-å‘½ä»¤">init å‘½ä»¤</h3>

<p>è¿™ä¸ªå‘½ä»¤ç”¨äºç”Ÿæˆé’ˆå¯¹ Xcode å·¥ç¨‹çš„ bartycrouch é…ç½®æ–‡ä»¶ã€‚è¿›å…¥åˆ° xcode çš„æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash">bartycrouch init</code></pre></div>
<p>å·¥ç¨‹æ ¹ç›®å½•ä¸‹ä¼šå‡ºç°åä¸º <code>.bartycrouch.toml</code> çš„æ–‡ä»¶ã€‚</p>

<p><details><summary><code>.bartycrouch.toml</code> é»˜è®¤å†…å®¹</summary></p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[</span><span class="nx">update</span><span class="p">]</span>
<span class="nx">tasks</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;interfaces&#34;</span><span class="p">,</span> <span class="s2">&#34;code&#34;</span><span class="p">,</span> <span class="s2">&#34;transform&#34;</span><span class="p">,</span> <span class="s2">&#34;normalize&#34;</span><span class="p">]</span>

<span class="p">[</span><span class="nx">update</span><span class="p">.</span><span class="nx">interfaces</span><span class="p">]</span>
<span class="nx">path</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">defaultToBase</span> <span class="p">=</span> <span class="kc">false</span>
<span class="nx">ignoreEmptyStrings</span> <span class="p">=</span> <span class="kc">false</span>
<span class="nx">unstripped</span> <span class="p">=</span> <span class="kc">false</span>

<span class="p">[</span><span class="nx">update</span><span class="p">.</span><span class="nx">code</span><span class="p">]</span>
<span class="nx">codePath</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">localizablePath</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">defaultToKeys</span> <span class="p">=</span> <span class="kc">false</span>
<span class="nx">additive</span> <span class="p">=</span> <span class="kc">true</span>
<span class="nx">unstripped</span> <span class="p">=</span> <span class="kc">false</span>

<span class="p">[</span><span class="nx">update</span><span class="p">.</span><span class="nx">transform</span><span class="p">]</span>
<span class="nx">codePath</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">localizablePath</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">transformer</span> <span class="p">=</span> <span class="s2">&#34;foundation&#34;</span>
<span class="nx">supportedLanguageEnumPath</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">typeName</span> <span class="p">=</span> <span class="s2">&#34;BartyCrouch&#34;</span>
<span class="nx">translateMethodName</span> <span class="p">=</span> <span class="s2">&#34;translate&#34;</span>

<span class="p">[</span><span class="nx">update</span><span class="p">.</span><span class="nx">normalize</span><span class="p">]</span>
<span class="nx">path</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">sourceLocale</span> <span class="p">=</span> <span class="s2">&#34;en&#34;</span>
<span class="nx">harmonizeWithSource</span> <span class="p">=</span> <span class="kc">true</span>
<span class="nx">sortByKeys</span> <span class="p">=</span> <span class="kc">true</span>

<span class="p">[</span><span class="nx">lint</span><span class="p">]</span>
<span class="nx">path</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">duplicateKeys</span> <span class="p">=</span> <span class="kc">true</span>
<span class="nx">emptyValues</span> <span class="p">=</span> <span class="kc">true</span></code></pre></div>
<p></details></p>

<p>åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­åŒ…å«äº†å¦å¤–ä¸¤ä¸ªå‘½ä»¤( update å’Œ lint )çš„ç›¸å…³é…ç½®ï¼Œè¿™æ˜¯ bartycrouch çš„é»˜è®¤é…ç½®ï¼Œåº”è¯¥å¯ä»¥åœ¨ç»å¤§å¤šæ•°å·¥ç¨‹ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯è¿™é‡Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>

<ul>
<li><p><code>[update]</code> çš„å€¼å°±ä»£è¡¨äº†ï¼Œæ‰§è¡Œ <code>bartycrouch update</code> æ—¶è¦å®Œæˆçš„ä»»åŠ¡ï¼Œä¸æƒ³æ‰§è¡ŒæŸä¸ªä»»åŠ¡å¯ä»¥ç›´æ¥åˆ é™¤ï¼Œæ¯”å¦‚ä¸æ‰§è¡Œ <code>code</code> ä»»åŠ¡ï¼Œå¯ä»¥å†™æˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[</span><span class="nx">update</span><span class="p">]</span>
<span class="nx">tasks</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;interfaces&#34;</span><span class="p">,</span> <span class="s2">&#34;transform&#34;</span><span class="p">,</span> <span class="s2">&#34;normalize&#34;</span><span class="p">]</span></code></pre></div></li>

<li><p>æ¯ä¸ªä»»åŠ¡å­é¡¹ä¸­éƒ½åŒ…å«äº†å¯¹åº”çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä¾æ®å·¥ç¨‹éœ€è¦è¿›è¡Œè°ƒæ•´ï¼Œå…·ä½“å«ä¹‰å¯ä»¥å‚è€ƒåé¢ä»»åŠ¡çš„ä»‹ç»</p></li>

<li><p>å°½å¯èƒ½ä¸ºåŒ…å«å…³é”®å­—çš„ <code>path</code> é”®æä¾›å…·ä½“çš„è·¯å¾„åç§° (ä¾‹å¦‚ï¼š<code>codePath</code> è®¾ç½®ä¸ºåŒ…å« swift ä»£ç æ–‡ä»¶çš„ç›®å½•)</p></li>

<li><p>å¦‚æœæ‚¨çš„å·¥ç¨‹æ˜¯çº¯ swift å®ç°å¹¶ä¸”ä½¿ç”¨äº† update å‘½ä»¤çš„çš„ <a href="#transform-ä»»åŠ¡"><code>tranform</code> ä»»åŠ¡</a>ï¼Œå¯ä»¥åˆ é™¤ <code>code</code> ä»»åŠ¡</p></li>

<li><p>å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨æ”¯æŒ <code>structured-swift4</code> æ¨¡æ¿çš„ <a href="https://github.com/SwiftGen/SwiftGen#strings" target="_blank">SwiftGen</a> ï¼Œæ‚¨éœ€è¦å°† <code>[update.transform]</code> çš„ <code>transformer</code> ä» <code>foundation</code> æ”¹ä¸º <code>swiftgenStructured</code></p></li>

<li><p>å¦‚æœæ‚¨è¦ä½¿ç”¨ <code>transform</code> ä»»åŠ¡ï¼Œéœ€è¦åœ¨å·¥ç¨‹ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå‘½åä¸º <code>BartyCrouch.swift</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p></li>
</ul>

<p><details><summary><code>BartyCrouch.swift</code> ä»£ç </summary></p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">//</span>
<span class="c1">//  This file is required in order for the `transform` task of the translation helper tool BartyCrouch to work.</span>
<span class="c1">//  See here for more details: https://github.com/Flinesoft/BartyCrouch</span>
<span class="c1">//</span>

<span class="kd">import</span> <span class="nc">Foundation</span>

<span class="kd">enum</span> <span class="nc">BartyCrouch</span> <span class="p">{</span>
    <span class="kd">enum</span> <span class="nc">SupportedLanguage</span><span class="p">:</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="c1">// </span><span class="cs">TODO:</span><span class="c1"> remove unsupported languages from the following cases list &amp; add any missing languages</span>
        <span class="k">case</span> <span class="n">arabic</span> <span class="p">=</span> <span class="s">&#34;ar&#34;</span>
        <span class="k">case</span> <span class="n">chineseSimplified</span> <span class="p">=</span> <span class="s">&#34;zh-Hans&#34;</span>
        <span class="k">case</span> <span class="n">chineseTraditional</span> <span class="p">=</span> <span class="s">&#34;zh-Hant&#34;</span>
        <span class="k">case</span> <span class="n">english</span> <span class="p">=</span> <span class="s">&#34;en&#34;</span>
        <span class="k">case</span> <span class="n">french</span> <span class="p">=</span> <span class="s">&#34;fr&#34;</span>
        <span class="k">case</span> <span class="n">german</span> <span class="p">=</span> <span class="s">&#34;de&#34;</span>
        <span class="k">case</span> <span class="n">hindi</span> <span class="p">=</span> <span class="s">&#34;hi&#34;</span>
        <span class="k">case</span> <span class="n">italian</span> <span class="p">=</span> <span class="s">&#34;it&#34;</span>
        <span class="k">case</span> <span class="n">japanese</span> <span class="p">=</span> <span class="s">&#34;ja&#34;</span>
        <span class="k">case</span> <span class="n">korean</span> <span class="p">=</span> <span class="s">&#34;ko&#34;</span>
        <span class="k">case</span> <span class="n">malay</span> <span class="p">=</span> <span class="s">&#34;ms&#34;</span>
        <span class="k">case</span> <span class="n">portuguese</span> <span class="p">=</span> <span class="s">&#34;pt-BR&#34;</span>
        <span class="k">case</span> <span class="n">russian</span> <span class="p">=</span> <span class="s">&#34;ru&#34;</span>
        <span class="k">case</span> <span class="n">spanish</span> <span class="p">=</span> <span class="s">&#34;es&#34;</span>
        <span class="k">case</span> <span class="n">turkish</span> <span class="p">=</span> <span class="s">&#34;tr&#34;</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">translate</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">translations</span><span class="p">:</span> <span class="p">[</span><span class="n">SupportedLanguage</span><span class="p">:</span> <span class="nb">String</span><span class="p">],</span> <span class="n">comment</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">=</span> <span class="kc">nil</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">typeName</span> <span class="p">=</span> <span class="nb">String</span><span class="p">(</span><span class="n">describing</span><span class="p">:</span> <span class="n">BartyCrouch</span><span class="p">.</span><span class="kc">self</span><span class="p">)</span>
        <span class="kd">let</span> <span class="nv">methodName</span> <span class="p">=</span> <span class="kc">#function</span>

        <span class="bp">print</span><span class="p">(</span>
            <span class="s">&#34;Warning: [BartyCrouch]&#34;</span><span class="p">,</span>
            <span class="s">&#34;Untransformed </span><span class="si">\(</span><span class="n">typeName</span><span class="si">)</span><span class="s">.</span><span class="si">\(</span><span class="n">methodName</span><span class="si">)</span><span class="s"> method call found with key &#39;</span><span class="si">\(</span><span class="n">key</span><span class="si">)</span><span class="s">&#39; and base translations &#39;</span><span class="si">\(</span><span class="n">translations</span><span class="si">)</span><span class="s">&#39;.&#34;</span><span class="p">,</span>
            <span class="s">&#34;Please ensure that BartyCrouch is installed and configured correctly.&#34;</span>
        <span class="p">)</span>

        <span class="c1">// fall back in case something goes wrong with BartyCrouch transformation</span>
        <span class="k">return</span> <span class="s">&#34;BC: TRANSFORMATION FAILED!&#34;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p></details></p>

<ul>
<li><p>å¦‚æœæ‚¨çš„ç¬¬ä¸€è¯­è¨€ä¸æ˜¯è‹±è¯­, æ‚¨éœ€è¦å°† <code>normalize</code> ä»»åŠ¡çš„ <code>sourceLocale</code> æ”¹ä¸ºæ‚¨çš„ç¬¬ä¸€è¯­è¨€ï¼Œå€¼å‚è€ƒä¸Šé¢ä»£ç ä¸­çš„æšä¸¾ <code>SupportedLanguage</code> çš„å…ƒç´ </p></li>

<li><p>å¦‚æœæ‚¨æƒ³ä½¿ç”¨ bartycrouch çš„ç¿»è¯‘åŠŸèƒ½ï¼Œéœ€è¦å°†å¦‚ä¸‹çš„é…ç½®æ·»åŠ åˆ° <code>.bartycrouch.toml</code> ä¸­ï¼Œå¹¶ä¸”å°† <code>translate</code> æ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨ä¸­ï¼Œå…¶ä¸­æ‚¨éœ€è¦å°† <code>secret</code> çš„å€¼æ›¿æ¢æˆæ‚¨çš„ <a href="https://docs.microsoft.com/en-us/azure/cognitive-services/translator/translator-text-how-to-signup#authentication-key" target="_blank">Microsoft Translator Text API Subscription Key</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[</span><span class="nx">update</span><span class="p">.</span><span class="nx">translate</span><span class="p">]</span>
<span class="nx">path</span> <span class="p">=</span> <span class="s2">&#34;.&#34;</span>
<span class="nx">secret</span> <span class="p">=</span> <span class="s2">&#34;&lt;#Subscription Key#&gt;&#34;</span>
<span class="nx">sourceLocale</span> <span class="p">=</span> <span class="s2">&#34;en&#34;</span></code></pre></div></li>
</ul>

<h3 id="update-å‘½ä»¤">update å‘½ä»¤</h3>

<p>update å‘½ä»¤å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‡ ä¸ªä»»åŠ¡ï¼š</p>

<ul>
<li><code>interfaces</code>: ä» Storyboards &amp; XIBs æ›´æ–° <code>.strings</code> æ–‡ä»¶</li>
<li><code>code</code>: æ ¹æ®ä»£ç ä¸­çš„ <code>NSLocalizedString</code> è°ƒç”¨æ›´æ–° <code>Localizable.strings</code></li>
<li><code>transform</code>: ä»…æ”¯æŒ swift æ–‡ä»¶ï¼Œå¯ä»¥æ›¿æ¢ç‰¹å®šæ–¹æ³•çš„è°ƒç”¨æ›¿æ¢ä¸ºå¯ä»¥æä¾›å¤šç§è¯­è¨€ç¿»è¯‘çš„å•è¡Œæ–¹å¼</li>
<li><code>translate</code>: ä»æŒ‡å®šè¯­è¨€ç¿»è¯‘æˆå¤šç§è¯­è¨€å¹¶æ›¿æ¢ç»“æœåˆ° strings æ–‡ä»¶ä¸­</li>
<li><code>normalize</code>: æ ¼å¼åŒ– <code>.strings</code> æ–‡ä»¶å†…å®¹ï¼šæ’åºæˆ–è€…æ¸…æ¥šå¤šä½™å†…å®¹</li>
</ul>

<p>ä¸Šé¢å·²ç»æåˆ°è¿‡çš„ï¼Œå¯ä»¥é€šè¿‡ <code>.bartycrouch.toml</code> çš„ <code>task</code> é…ç½®è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml"><span class="p">[</span><span class="nx">update</span><span class="p">]</span>
<span class="nx">tasks</span> <span class="p">=</span> <span class="p">[</span><span class="s2">&#34;interfaces&#34;</span><span class="p">,</span> <span class="s2">&#34;code&#34;</span><span class="p">,</span> <span class="s2">&#34;transform&#34;</span><span class="p">,</span> <span class="s2">&#34;normalize&#34;</span><span class="p">]</span></code></pre></div>
<h4 id="ä»»åŠ¡é…ç½®é¡¹ä»‹ç»">ä»»åŠ¡é…ç½®é¡¹ä»‹ç»</h4>

<p><details><summary><code>interfaces</code> é…ç½®é¡¹å«ä¹‰</summary></p>

<ul>
<li><code>path</code>: æŸ¥æ‰¾ Storyboards &amp; XIB æ–‡ä»¶çš„è·¯å¾„</li>
<li><code>defaultToBase</code>: æ·»åŠ  Base translation ä½œä¸ºæ–°é”®çš„å€¼</li>
<li><code>ignoreEmptyStrings</code>: ä¸æ·»åŠ  views ä¸­æ˜¯ç©ºå€¼çš„é¡¹</li>
<li><code>unstripped</code>: ä¿ç•™ Strings æ–‡ä»¶å¼€å§‹å’Œç»“å°¾çš„ç©ºç™½å­—ç¬¦ä¸²</li>
</ul>

<p></details></p>

<p><details><summary><code>code</code> é…ç½®é¡¹å«ä¹‰</summary></p>

<ul>
<li><code>codePath</code>: æŸ¥æ‰¾ Swift ä»£ç æ–‡ä»¶çš„è·¯å¾„</li>
<li><code>localizablePath</code>: åŒ…å« <code>Localizable.strings</code> æ–‡ä»¶çš„ç›®å½•çš„çˆ¶ç›®å½•</li>
<li><code>defaultsToKeys</code>: ä¸ºæ–°é”®æ·»åŠ ä¸æ–°é”®åç§°ä¸€è‡´çš„å€¼</li>
<li><code>additive</code>: ä¸æ¸…é™¤æœªåœ¨ä»£ç ä¸­å‘ç°çš„é”®</li>
<li><code>customFunction</code>: æ›¿ä»£ <code>NSLocalizedString</code> çš„å‡½æ•°åç§°</li>
<li><code>customLocalizableName</code>: æ›¿ä»£ <code>Localizable.strings</code> çš„æ–‡ä»¶çš„åç§°</li>
<li><code>unstripped</code>: ä¿ç•™ Strings æ–‡ä»¶å¼€å§‹å’Œç»“å°¾çš„ç©ºç™½å­—ç¬¦ä¸²</li>
</ul>

<p></details></p>

<p><details><summary><code>transform</code> é…ç½®é¡¹å«ä¹‰</summary></p>

<ul>
<li><code>codePath</code>: æŸ¥æ‰¾ Swift ä»£ç æ–‡ä»¶çš„è·¯å¾„</li>
<li><code>localizablePath</code>:  åŒ…å« <code>Localizable.strings</code> æ–‡ä»¶çš„ç›®å½•çš„çˆ¶ç›®å½•</li>
<li><code>transformer</code>: æŒ‡å®šè½¬æ¢çš„æ¨¡å¼: è‹¥è°ƒç”¨ <code>NSLocalizedString</code> æ¥å£ï¼Œå€¼å°±è®¾æˆ <code>foundation</code>; è‹¥è°ƒç”¨ <code>L10n</code> å½¢å¼çš„æ¥å£ï¼Œå€¼å°±è®¾æˆ <code>swiftgenStructured</code></li>
<li><code>supportedLanguageEnumPath</code>: åŒ…å« <code>SupportedLanguage</code> æšä¸¾å®šä¹‰çš„ swift æ–‡ä»¶çš„è·¯å¾„</li>
<li><code>typeName</code>: åŒ…å« <code>SupportedLanguage</code> æšä¸¾å’Œç¿»è¯‘æ–¹æ³•çš„ç±»å‹åç§°</li>
<li><code>translateMethodName</code>: ç¿»è¯‘æ–¹æ³•çš„åç§°</li>
<li><code>customLocalizableName</code>: æ›¿ä»£ <code>Localizable.strings</code> çš„æ–‡ä»¶çš„åç§°</li>
</ul>

<p></details></p>

<p><details><summary><code>translate</code>  é…ç½®é¡¹å«ä¹‰</summary></p>

<ul>
<li><code>path</code>: æŸ¥æ‰¾ <code>.strings</code> æ–‡ä»¶çš„è·¯å¾„</li>
<li><code>secret</code>: æ‚¨çš„ <a href="https://docs.microsoft.com/en-us/azure/cognitive-services/translator/translator-text-how-to-signup#authentication-key" target="_blank">Microsoft Translator Text API Subscription Key</a>.</li>
<li><code>sourceLocale</code>: æŒ‡å®šä»å“ªç§è¯­è¨€ç¿»è¯‘æˆå…¶ä»–è¯­è¨€</li>
</ul>

<p></details></p>

<p><details><summary><code>normalize</code>  é…ç½®é¡¹å«ä¹‰</summary></p>

<ul>
<li><code>path</code>: æŸ¥æ‰¾ <code>.strings</code> æ–‡ä»¶çš„è·¯å¾„</li>
<li><code>sourceLocale</code>: æŒ‡å®šä¾ç…§å“ªç§è¯­è¨€å¯¹å…¶ä»–è¯­è¨€çš„ string æ–‡ä»¶è¿›è¡Œæ ¼å¼åŒ–</li>
<li><code>harmonizeWithSource</code>: åŒæ­¥é”®å€¼å¯¹çš„æºè¯­è¨€</li>
<li><code>sortByKeys</code>: æŒ‰ç…§å­—æ¯é¡ºåºå¯¹é”®è¿›è¡Œæ’åº</li>
</ul>

<p></details></p>

<h4 id="transform-ä»»åŠ¡">transform ä»»åŠ¡</h4>

<p>å¦‚æœé…ç½®æ–‡ä»¶ä¸­é…ç½®äº† <code>transform</code> ä»»åŠ¡(è¯¦è§ <a href="#init-å‘½ä»¤">init å‘½ä»¤</a>)å¹¶ä¸”å·²ç»åœ¨ xcode ä¸­<a href="#åˆ›å»ºç¼–è¯‘è„šæœ¬">åˆ›å»ºç¼–è¯‘è„šæœ¬</a>, åœ¨å¼€å‘ä¸­æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢ç®€åŒ–çš„æµç¨‹ç¼–å†™æœ¬åœ°åŒ–ä»£ç :</p>

<ul>
<li><p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>BartyCrouch.translate</code> æ›¿ä»£ <code>NSLocalizedString</code> æŒ‡å®šé”®ã€ç¿»è¯‘æ–¹æ³•å’Œæ³¨é‡Šï¼Œä¾‹å¦‚:</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kc">self</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="n">BartyCrouch</span><span class="p">.</span><span class="n">translate</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="s">&#34;onboarding.first-page.header-title&#34;</span><span class="p">,</span>  <span class="n">translations</span><span class="p">:</span> <span class="p">[.</span><span class="n">english</span><span class="p">:</span> <span class="s">&#34;Welcome!&#34;</span><span class="p">])</span></code></pre></div></li>

<li><p>ç¼–è¯‘åº”ç”¨çš„æ—¶å€™, BartyCrouch ä¼šè‡ªåŠ¨å‘æ‰€æœ‰çš„ <code>Localizable.strings</code> æ–‡ä»¶ä¸­æ·»åŠ æ‚¨æŒ‡å®šçš„é”®ï¼Œå¹¶ä¸”ä¸ºæŒ‡å®šè¯­è¨€çš„é”®æ·»åŠ æŒ‡å®šè¯­è¨€ç¿»è¯‘ç»“æœ</p></li>

<li><p>åŒæ—¶ BartyCrouch ä¼šè‡ªåŠ¨ä¾æ®é…ç½®ä¸­æŒ‡å®šçš„ <code>transformer</code> æ›¿æ¢ä¸Šé¢ <code>BartyCrouch.translate</code> çš„è°ƒç”¨ä¸ºå¯¹åº”çš„æ–¹æ³•</p>

<ul>
<li><p>å½“ <code>transformer</code> è®¾ç½®ä¸º <code>foundation</code>, ä¸Šé¢ <code>BartyCrouch.translate</code> çš„è°ƒç”¨ä¼šæ›¿æ¢ä¸ºå¦‚ä¸‹çš„ç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kc">self</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;onboarding.first-page.header-title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">)</span></code></pre></div></li>

<li><p>å½“ <code>transformer</code> è®¾ç½®ä¸º <code>swiftgenStructured</code>, ä¸Šé¢ <code>BartyCrouch.translate</code> çš„è°ƒç”¨ä¼šæ›¿æ¢ä¸ºå¦‚ä¸‹çš„ç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kc">self</span><span class="p">.</span><span class="n">title</span> <span class="p">=</span> <span class="n">L10n</span><span class="p">.</span><span class="n">Onboarding</span><span class="p">.</span><span class="n">FirstPage</span><span class="p">.</span><span class="n">headerTitle</span></code></pre></div></li>
</ul></li>
</ul>

<h5 id="ä½¿ç”¨-transform-çš„ä¼˜ç‚¹">ä½¿ç”¨ <code>transform</code> çš„ä¼˜ç‚¹:</h5>

<ul>
<li>ä¸ç”¨ä¸ºäº†æ·»åŠ ç¿»è¯‘çš„é”®å€¼è€Œä¸æ–­çš„åˆ‡æ¢ä¸åŒè¯­è¨€çš„ Strings æ–‡ä»¶</li>
<li>ä¸€æ—¦ä½¿ç”¨äº† SwiftGen, ä¸éœ€è¦æ‰‹åŠ¨æ›¿æ¢ <code>NSLocalizedString</code> ä¸º <code>L10n</code> çš„è°ƒç”¨äº†</li>
<li>ä¸æœºå™¨ç¿»è¯‘é…åˆä½¿å¾—åªéœ€åœ¨ä»£ç ä¸­ä½¿ç”¨ä¸€è¡Œä»£ç å°±å¯ä»¥å®ç°æ‰€æœ‰è¯­è¨€çš„ç¿»è¯‘å’Œå€¼çš„æ›¿æ¢</li>
</ul>

<h5 id="ä½¿ç”¨-transform-çš„ç¼ºç‚¹">ä½¿ç”¨ <code>transform</code> çš„ç¼ºç‚¹:</h5>

<ul>
<li>åªæ”¯æŒ swift ä»£ç è€Œä¸æ”¯æŒ Objective-C</li>
<li>åœ¨ä¸‹æ¬¡ç¼–è¯‘ä¹‹å‰ï¼Œxcode ä¼šæœ‰ä¸€äº›é”™è¯¯æç¤ºï¼Œä½†æ˜¯ä¸€ç¼–è¯‘å°±ä¼šæ²¡æœ‰äº†é”™è¯¯æç¤º</li>
<li>ç”±äº <a href="https://github.com/apple/swift-syntax" target="_blank">SwiftSyntax</a> å½“å‰<a href="https://www.jpsim.com/evaluating-swiftsyntax-for-use-in-swiftlint/" target="_blank">è¿è¡Œä¸æ˜¯ç‰¹åˆ«å¿«</a>æ‰€ä»¥çœ‹ä¸Šå»ä¸å¦‚ <code>code</code> ä»»åŠ¡å¿«é€Ÿ. (ä½†æ˜¯è¿™ä¸ªä¼šéšç€æ—¶é—´æ”¹å–„ï¼)</li>
</ul>

<h3 id="lint-å‘½ä»¤">lint å‘½ä»¤</h3>

<p>lint å‘½ä»¤å¯ä»¥æ£€æŸ¥ <code>.strings</code> æ–‡ä»¶ï¼Œä¸»è¦æœ‰ä¸‹é¢ä¸¤ä¸ªæ£€æŸ¥é¡¹:</p>

<ul>
<li><code>duplicateKeys</code>: æŸ¥æ‰¾åŒä¸€ä¸ªæ–‡ä»¶ä¸­é‡å¤çš„é”®å€¼å¯¹</li>
<li><code>emptyValues</code>: æŸ¥æ‰¾ç©ºå€¼çš„é”®å€¼å¯¹</li>
</ul>

<h3 id="åˆ›å»ºç¼–è¯‘è„šæœ¬">åˆ›å»ºç¼–è¯‘è„šæœ¬</h3>

<p>ä¸ºäº†è®© xcode å¯ä»¥ä½¿ç”¨ bartycrouch æ¥æ›´æ–°å’Œæ£€æŸ¥æ‚¨çš„ <code>.strings</code> æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸€ä¸ªç¼–è¯‘è„šæœ¬å®ç°ã€‚</p>

<p>æŒ‰ç…§ä¸‹å›¾æ‰€ç¤ºæ­¥éª¤æ·»åŠ è„šæœ¬ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190301131243.jpg" alt="" /></p>

<p><details><summary>è„šæœ¬å†…å®¹(ç‚¹æˆ‘æŸ¥çœ‹)</summary></p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash"><span class="k">if</span> which bartycrouch &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
    bartycrouch update -x
    bartycrouch lint -x
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&#34;warning: BartyCrouch not installed, download it from https://github.com/Flinesoft/BartyCrouch&#34;</span>
<span class="k">fi</span></code></pre></div>
<p></details></p>

<p>ä¸‹ä¸€æ­¥ç¡®ä¿è¿™ä¸ªè¿è¡Œè„šæœ¬åœ¨ <code>Compiling Sources</code> å’Œ <code>SwiftGen</code>(å¦‚æœä½¿ç”¨äº†çš„è¯) ä¹‹å‰è¿è¡Œï¼Œæ¯”å¦‚åœ¨ <code>Target Dependencies</code> åé¢ï¼Œåƒä¸‹å›¾è¿™æ ·ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190301131815.png" alt="" /></p>

<p>ç°åœ¨æ¯æ¬¡è¿è¡Œå·¥ç¨‹ï¼Œéƒ½ä¼šè‡ªåŠ¨çš„æ›´æ–°å’Œæ£€æŸ¥ <code>.strings</code> æ–‡ä»¶ï¼Œè€Œä¸ç”¨æ‰‹åŠ¨å¤„ç†äº†ã€‚å¦å¤–å¦‚æœå·¥ç¨‹çš„æˆå‘˜å¦‚æœæ²¡æœ‰å®‰è£… bartycrouch çš„è„šæœ¬ä¼šäº§ç”Ÿè­¦å‘Šï¼š</p>

<blockquote>
<p>warning: BartyCrouch not installed, download it from <a href="https://github.com/Flinesoft/BartyCrouch" target="_blank">https://github.com/Flinesoft/BartyCrouch</a></p>
</blockquote>

<p>å¦å¤–è¡¥å……çš„æ˜¯ï¼Œlint å’Œ update æœ‰ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°å¯ç”¨ï¼š</p>

<ul>
<li><strong><code>-v</code>, <code>--verbose</code></strong>: æ‰“å°æ›´å¤šçš„æ‰§è¡Œä¿¡æ¯</li>
<li><strong><code>-x</code>, <code>--xcode-output</code></strong>: ä»¥ xcode å…¼å®¹çš„å½¢å¼å‘ˆç°é”™è¯¯å’Œæé†’ï¼Œåœ¨ xcode ä¸­çš„è¿è¡Œè„šæœ¬ä¸­æ·»åŠ ä»¥åï¼Œä¸€æ—¦æ£€æŸ¥å‡ºé”™è¯¯æˆ–è­¦å‘Šä¼šåœ¨ xcode çš„ issue å¯¼èˆªæ ä¸­å‘ˆç°</li>
<li><strong><code>-w</code>, <code>--fail-on-warnings</code></strong>: é‡åˆ°è­¦å‘Šçš„æ—¶å€™è¿”å›å¯¹åº”ä»£ç </li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ NSTextField æ”¯æŒæ–‡æœ¬å¿«æ·é”®(äºŒ): æ’¤é”€å’Œé‡åš</title>
			<link>https://www.smslit.top/2019/02/27/macOS-dev-nstextfield-keys-undo-redo/</link>
			<pubDate>Wed, 27 Feb 2019 10:23:39 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/02/27/macOS-dev-nstextfield-keys-undo-redo/</guid>
			<description>åœ¨æ–‡ç« macOS å¼€å‘ä¹‹ NSTextField æ”¯æŒæ–‡æœ¬å¿«æ·é”®(ä¸€): åŸºæœ¬æ“ä½œä¸­æ¢è®¨äº† app å¼€å‘ä¸­é”®ç›˜äº‹ä»¶ä»¥åŠ NSTextfield æ”¯æŒåŸºæœ¬æ–‡æœ¬å¿«æ·é”®çš„å®ç°æ–¹æ³•ï¼Œæœ¬æ–‡è·Ÿåé‡Œä¸€èµ·å®ç°å¦å¤–çš„ä¸¤</description>
			<content type="html"><![CDATA[

<p>åœ¨æ–‡ç« <a href="/2019/02/25/macOS-dev-nstextfield-keys/" target="_blank">macOS å¼€å‘ä¹‹ NSTextField æ”¯æŒæ–‡æœ¬å¿«æ·é”®(ä¸€): åŸºæœ¬æ“ä½œ</a>ä¸­æ¢è®¨äº† app å¼€å‘ä¸­é”®ç›˜äº‹ä»¶ä»¥åŠ NSTextfield æ”¯æŒåŸºæœ¬æ–‡æœ¬å¿«æ·é”®çš„å®ç°æ–¹æ³•ï¼Œæœ¬æ–‡è·Ÿåé‡Œä¸€èµ·å®ç°å¦å¤–çš„ä¸¤ä¸ªæ“ä½œï¼š</p>

<ul>
<li>æ’¤é”€: <code>Command</code> + <code>z</code></li>
<li>é‡åš: <code>Shift</code> + <code>Command</code> + <code>z</code></li>
</ul>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="ç¤ºä¾‹å·¥ç¨‹">ç¤ºä¾‹å·¥ç¨‹</h1>

<p>æˆ‘ä»¬ç»§ç»­ä½¿ç”¨ <a href="/2019/02/25/macOS-dev-nstextfield-keys/" target="_blank">macOS å¼€å‘ä¹‹ NSTextField æ”¯æŒæ–‡æœ¬å¿«æ·é”®(ä¸€): åŸºæœ¬æ“ä½œ</a> ä¸­çš„ Demo å·¥ç¨‹ï¼Œç‚¹å‡»ä¸‹é¢é“¾æ¥å¯ä»¥ä¸‹è½½ï¼š</p>

<p><a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/TextFieldKeyDemo.zip" target="_blank">TextFieldKeyDemo</a></p>

<h1 id="æ·»åŠ æ’¤é”€å’Œé‡åšæ”¯æŒ">æ·»åŠ æ’¤é”€å’Œé‡åšæ”¯æŒ</h1>

<p>è¿™é‡Œå…ˆè¯´ä¸€ä¸‹æ€ä¹ˆåšï¼Œç„¶åå†è§£é‡Šã€‚</p>

<h2 id="ç¡®è®¤å‹¾é€‰-undo">ç¡®è®¤å‹¾é€‰ undo</h2>

<p>NSTextFieldæ˜¯é»˜è®¤æ”¯æŒæ’¤é”€å’Œé‡åšçš„ï¼Œæ‰“å¼€ Main.storyboard æ–‡ä»¶ï¼Œç‚¹å‡» view controller ä¸­çš„ Text Fieldï¼ŒæŒ‰å¿«æ·é”® <code>Option</code> + <code>Command</code> + 4 æ‰“å¼€ Text Field çš„ Attribute Inspector è¿™æ˜¯å°±ä¼šçœ‹åˆ° Undo æ˜¯é»˜è®¤å‹¾é€‰çš„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190227124649.png" alt="" /></p>

<h2 id="æ·»åŠ å¿«æ·é”®æ”¯æŒ">æ·»åŠ å¿«æ·é”®æ”¯æŒ</h2>

<p>æ—¢ç„¶æ”¯æŒäº† Undoï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€æŒ‰ç…§ç›¸åº”å¿«æ·é”®æ·»åŠ ç›¸åº”çš„æ“ä½œå°±å¯ä»¥äº†ï¼Œæ‰“å¼€æ–‡ä»¶ AppDelegate.swiftï¼Œå¯ä»¥çœ‹åˆ°ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å¤å†™çš„ <code>performKeyEquivalent:</code> æ–¹æ³•ï¼Œæ·»åŠ æ’¤é”€å’Œé‡åšçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">// NSTextField æ”¯æŒå¿«æ·é”®</span>
<span class="kd">extension</span> <span class="nc">NSTextField</span> <span class="p">{</span>
    <span class="n">open</span> <span class="kr">override</span> <span class="kd">func</span> <span class="nf">performKeyEquivalent</span><span class="p">(</span><span class="n">with</span> <span class="n">event</span><span class="p">:</span> <span class="n">NSEvent</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="n">modifierFlags</span><span class="p">.</span><span class="n">isDisjoint</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="p">.</span><span class="n">command</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">super</span><span class="p">.</span><span class="n">performKeyEquivalent</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="k">switch</span> <span class="n">event</span><span class="p">.</span><span class="n">charactersIgnoringModifiers</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s">&#34;a&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">selectAll</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;c&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;v&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">paste</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;x&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">cut</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;z&#34;</span><span class="p">:</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">?.</span><span class="n">undoManager</span><span class="p">?.</span><span class="n">undo</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">true</span>
        <span class="k">case</span> <span class="s">&#34;Z&#34;</span><span class="p">:</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">?.</span><span class="n">undoManager</span><span class="p">?.</span><span class="n">redo</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">true</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">super</span><span class="p">.</span><span class="n">performKeyEquivalent</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>æ·»åŠ å®Œä¸Šè¿°ä»£ç ï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Command</code> + <code>r</code> è¿è¡Œç¨‹åºï¼Œåœ¨è¿è¡Œèµ·æ¥çš„çª—å£ä¸­çš„æ–‡æœ¬æ¡†ä¸­è¾“å…¥ä¸€äº›å­—ç¬¦ï¼Œç„¶åå°è¯•æŒ‰å¿«æ·é”® <code>Command</code> + <code>z</code> å’Œ <code>Command</code> + <code>Z</code> ï¼Œæ­å–œä½ å®Œæˆäº†æ’¤é”€å’Œé‡åšæ“ä½œçš„æ·»åŠ ï¼</p>

<ul>
<li><code>Shift</code> + <code>Command</code> + <code>z</code> å¯ä»¥ç†è§£ä¸º <code>Command</code> + (<code>Shift</code> + <code>z</code>)ï¼Œè€Œ <code>Shift</code> + <code>z</code> å…¶å®å°±æ˜¯ <code>Z</code>ï¼Œæ‰€ä»¥æœ€ç»ˆè¿™ä¸ªé‡åšå¿«æ·é”®å…¶å®å°±æ˜¯ <code>Command</code> + <code>Z</code>(å¤§å†™çš„ <code>z</code>)</li>
<li>å½“æ–‡æœ¬æ¡†ç¼–è¾‘çš„æ—¶å€™å…¶å°±æ˜¯çª—å£çš„ç¬¬ä¸€å“åº”å¯¹è±¡ï¼Œè¿™é‡Œä½¿ç”¨ <code>self.window?.firstResponder</code> å°±æ˜¯è¦å¿«é€Ÿå®šä½åˆ°æ­£åœ¨ç¼–è¾‘çš„æ–‡æœ¬å¯¹è±¡ï¼Œè€Œä¸æ˜¯é€šè¿‡ NSTextField çš„å¯¹è±¡å±‚çº§å…³ç³»æŸ¥æ‰¾é”®ç›˜äº‹ä»¶çš„å“åº”å¯¹è±¡</li>
<li>åœ¨ macOS ä¸­ï¼Œæ’¤é”€å’Œé‡åšè¢«åšäº†ç»Ÿä¸€å°è£…ï¼Œç”± UndoManager ç±»è¿›è¡Œç»Ÿä¸€ç®¡ç†è¿™ä¸¤ä¸ªæ“ä½œï¼Œè€Œå¯¹äºç»§æ‰¿ NSResponder ç±»çš„å­ç±»éƒ½æ˜¯é»˜è®¤æœ‰ä¸€ä¸ª undoManager å±æ€§çš„ï¼Œç±»å‹å°±æ˜¯ UndoManagerï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºã€‚åŒæ ·ï¼ŒNSTextField ä¹Ÿä¸ä¾‹å¤–ã€‚macOS ä¸­æ–‡æœ¬å¯¹è±¡çš„æ“ä½œéƒ½æ˜¯é»˜è®¤åŒ…å« undoManager çš„ç®¡ç†çš„ä¹Ÿä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ ç›¸å…³ç®¡ç†å®ç°ã€‚</li>
</ul>

<h1 id="æ’¤é”€å’Œé‡åšçš„å®ç°åŸç†">æ’¤é”€å’Œé‡åšçš„å®ç°åŸç†</h1>

<p>ä¸Šé¢å·²ç»æåˆ° App ä¸­çš„æ’¤é”€å’Œé‡åšæ“ä½œæ˜¯ç”± UndoManager ç±»è¿›è¡Œç®¡ç†çš„ï¼Œè™½ç„¶æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•å®ç° NSTextField çš„æ’¤é”€å’Œé‡åšï¼Œä½†æ˜¯ UndoManager å®ç°åŸç†å’Œä½¿ç”¨è¿˜æ˜¯å¾—äº†è§£ä¸€ä¸‹çš„ï¼Œåé¢æœ‰éœ€æ±‚è¦åšä¸æ˜¯æ–‡æœ¬æ“ä½œçš„æ’¤é”€å’Œé‡åšåŠŸèƒ½æ—¶ä¹Ÿå°±æ›´å®¹æ˜“ä¸Šæ‰‹äº†ã€‚</p>

<h2 id="ç†è§£æ’¤é”€å’Œé‡åšæ“ä½œæµç¨‹">ç†è§£æ’¤é”€å’Œé‡åšæ“ä½œæµç¨‹</h2>

<p>UndoManager é€šè¿‡ç®¡ç†ä¸¤ä¸ªæ“ä½œæ ˆ(æ’¤é”€æ ˆå’Œé‡åšæ ˆ)çš„å‹æ ˆå’Œå¼¹æ ˆå®ç° undo å’Œ redoï¼Œä¸¤ä¸ªæ“ä½œæ ˆä¸­ä¿å­˜çš„æ˜¯æœ€å°çš„æ“ä½œè¿‡ç¨‹ï¼Œè¿™ä¸ªå°çš„æ“ä½œè¿‡ç¨‹è¢«å°è£…ä¸º NSInvocation å¯¹è±¡ï¼Œç„¶åä¿å­˜åœ¨ä¸¤ä¸ªæ ˆä¸­ï¼Œç¤ºæ„å¤§æ¦‚å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190227224058.png" alt="" /></p>

<p>NSInvocation æ˜¯ä¸€ç§åŒ…å«æ‰§è¡Œæ–¹æ³•åŠå‚æ•°çš„å¯¹è±¡ã€‚</p>

<p>æ“ä½œæµç¨‹ä¸­çš„æ“ä½œå‹æ ˆå’Œå¼¹æ ˆè¿‡ç¨‹åˆ†ä¸‰ç§æƒ…å†µï¼š</p>

<ul>
<li>æ­£å¸¸æ“ä½œæ—¶ï¼šå°†é©¬ä¸Šè¦è¿›è¡Œçš„æ­£å¸¸æ“ä½œçš„é€†æ“ä½œè¿›è¡Œå°è£…å‹å…¥æ’¤é”€æ ˆï¼Œç„¶åæ‰§è¡Œæ­£å¸¸æ“ä½œ</li>
<li>è¦æ‰§è¡Œæ’¤é”€æ“ä½œæ—¶ï¼šå…ˆä»æ’¤é”€æ ˆä¸­å¼¹å‡ºå¾—åˆ°è¦è¿›è¡Œçš„æ“ä½œï¼Œå°†è¿™ä¸€æ­¥æ“ä½œçš„é€†æ“ä½œå‹å…¥é‡åšæ ˆï¼Œç„¶åæ‰§è¡Œåˆšå¼¹å‡ºçš„æ“ä½œ</li>
<li>è¦æ‰§è¡Œé‡åšæ“ä½œæ—¶ï¼šä»é‡åšæ ˆä¸­å¼¹å‡ºå¾—åˆ°è¦è¿›è¡Œçš„æ“ä½œï¼Œå°†å…¶é€†å‘æ“ä½œçš„å°è£…å‹å…¥æ’¤é”€æ ˆï¼Œç„¶åè¿›è¡Œåˆšå¼¹å‡ºçš„æ“ä½œ</li>
</ul>

<h2 id="æ’¤é”€å’Œé‡åšæ“ä½œçš„ç®¡ç†">æ’¤é”€å’Œé‡åšæ“ä½œçš„ç®¡ç†</h2>

<h3 id="undomanager-å¯¹è±¡çš„åˆ›å»º">UndoManager å¯¹è±¡çš„åˆ›å»º</h3>

<p>å¦‚ä¸Šé¢æåˆ°çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å¯¹è±¡ä¸­éƒ½æœ‰ä¸€ä¸ªç°æˆçš„ UndoManager å¯¹è±¡å±æ€§ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªå±æ€§ undoManagerã€‚ç»§æ‰¿ NSResponder çš„å­ç±»ç”±æœ‰ï¼šNSApplicationã€NSPopoverã€NSViewã€NSViewControllerã€NSWindow å’Œ NSWindowControllerã€‚</p>

<h3 id="æ’¤é”€æ“ä½œå‹æ ˆ">æ’¤é”€æ“ä½œå‹æ ˆ</h3>

<p>è¦å°†æ“ä½œå‹å…¥æ’¤é”€æ ˆå…¶å®å°±æ˜¯ä¸€ä¸ªæ³¨å†Œæ“ä½œçš„è¿‡ç¨‹ï¼Œæœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š</p>

<ul>
<li><p><code>registerUndo(withTarget:handler:)</code> æ–¹æ³•ï¼Œæ˜¯å°†å¯¹è±¡ã€å¤„ç†ä¸€èµ·è¿›è¡Œæ³¨å†Œï¼Œä½¿ç”¨é—­åŒ…çš„å½¢å¼ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kc">self</span><span class="p">.</span><span class="n">undoManager</span><span class="p">?.</span><span class="n">registerUndo</span><span class="p">(</span><span class="n">withTarget</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">textField</span><span class="p">:</span> <span class="n">NSTextField</span><span class="p">)</span> <span class="k">in</span>
<span class="n">textField</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="s">&#34;hello&#34;</span>
<span class="p">}</span></code></pre></div></li>

<li><p><code>registerUndo(withTarget:selector:object:)</code> æ–¹æ³•æ³¨å†Œ</p></li>

<li><p>ä½¿ç”¨ <code>prepare(withInvocaionTarget:)</code> æ–¹æ³•æ³¨å†Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="k">if</span> <span class="kd">let</span> <span class="nv">target</span> <span class="p">=</span> <span class="kc">self</span><span class="p">.</span><span class="n">undoManager</span><span class="p">?.</span><span class="n">prepare</span><span class="p">(</span><span class="n">withInvocationTarget</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span> <span class="k">as</span><span class="p">?</span> <span class="n">NSTextField</span> <span class="p">{</span>
<span class="n">target</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="s">&#34;hello&#34;</span>
<span class="p">}</span></code></pre></div></li>
</ul>

<p><strong>æ³¨ï¼š</strong></p>

<p>UndoManager å¯¹è±¡çš„ undoRegistionEnabled æ˜¯ true çš„æ—¶å€™ï¼Œæ’¤é”€æ“ä½œå¯ä»¥æ³¨å†Œï¼Œä½†æ˜¯å¦‚æœæ˜¯ false å°±ä¼šç¦ç”¨æ³¨å†ŒåŠŸèƒ½ã€‚</p>

<h3 id="æ¸…é™¤æ‰€æœ‰çš„æ’¤é”€æ“ä½œ">æ¸…é™¤æ‰€æœ‰çš„æ’¤é”€æ“ä½œ</h3>

<ul>
<li><code>removeAllActions</code>: åˆ é™¤æ’¤é”€æ ˆä¸­æ‰€æœ‰çš„æ’¤é”€æ“ä½œ</li>
<li><code>removeAllActions(withTarget:)</code>: åˆ é™¤æ’¤é”€æ ˆä¸­æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰æ’¤é”€æ“ä½œ</li>
</ul>

<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼šUndoManager ä¼šå¼ºå¼•ç”¨ä¿ç•™å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ä¸€ä¸ªå¯¹è±¡è¢«åˆ é™¤çš„æ—¶å€™ä¸€å®šè¦æ¸…é™¤è¿™ä¸ªå¯¹è±¡åœ¨æ’¤é”€æ ˆä¸­çš„æ‰€æœ‰æ’¤é”€æ“ä½œã€‚</p>

<h3 id="ä¸ºæ’¤é”€æ“ä½œå‘½å">ä¸ºæ’¤é”€æ“ä½œå‘½å</h3>

<p>å¯ä»¥ä½¿ç”¨ <code>setActionName</code> ä¸ºæ’¤é”€æ“ä½œè¿›è¡Œå‘½åï¼Œè¿™æ ·åœ¨å…¨å±€èœå•ä¸­çš„ç¼–è¾‘èœå•ä¸­çš„å°±èƒ½çœ‹åˆ°æ’¤é”€å’Œé‡åšå¯¹åº”çš„å…·ä½“å®é™…çš„åŠ¨ä½œã€‚</p>

<h1 id="å®ä¾‹æ„Ÿå—æ’¤é”€å’Œé‡åšçš„å®ç°">å®ä¾‹æ„Ÿå—æ’¤é”€å’Œé‡åšçš„å®ç°</h1>

<p>è¿™é‡Œç»§ç»­ä½¿ç”¨ä¸Šé¢çš„å·¥ç¨‹ï¼Œå®ç°ä¸€ä¸ªå¯ä»¥æ’¤é”€å’Œé‡åšçš„æ•´æ•°åŠ æ³•å™¨ï¼Œå…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>

<ul>
<li>å¦å¤–æ·»åŠ ä¸¤ä¸ª Text Fieldï¼Œä¸‰ä¸ªæ–‡æœ¬æ¡†åˆ†åˆ«æ˜¯åŠ æ•°ã€è¢«åŠ æ•°å’Œç»“æœï¼Œå¹¶å°†å…¶ä½œä¸ºå±æ€§ç»‘å®šåˆ° View Controller ä¸­</li>
<li>æ·»åŠ ä¸‰ä¸ªæŒ‰é’®ï¼Œåˆ†åˆ«æ˜¯è®¡ç®—ã€æ’¤é”€å’Œé‡åšï¼ŒåŒæ ·ç»‘å®šåŠ¨ä½œåˆ° View Controller ä¸­</li>

<li><p>æ·»åŠ ä¸‰ä¸ª Action çš„å®ç°ï¼Œåœ¨æ’¤é”€å’Œé‡åšçš„å®ç°ä¸­ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„æ¨¡æ¿å®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">private</span> <span class="kd">func</span> <span class="nf">doThing</span><span class="p">()</span> <span class="p">{</span>
<span class="c1">// do the thing here</span>
<span class="p">}</span>

<span class="kd">private</span> <span class="kd">func</span> <span class="nf">undoThing</span><span class="p">()</span> <span class="p">{</span>
<span class="c1">// undo the thing here</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">undoablyDoThing</span><span class="p">()</span> <span class="p">{</span>
<span class="n">undoManager</span><span class="p">?.</span><span class="n">registerUndoWithTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="p">{</span> <span class="n">me</span> <span class="k">in</span>
    <span class="n">me</span><span class="p">.</span><span class="n">redoablyUndoThing</span><span class="p">()</span>
<span class="p">})</span>
<span class="c1">// å¯ä»¥æ·»åŠ æœ‰æ„ä¹‰çš„æ“ä½œåç§°: undoManager?.setActionName(&#34;Thing&#34;)</span>
<span class="n">doThing</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">redoablyUndoThing</span><span class="p">()</span> <span class="p">{</span>
<span class="n">undoManager</span><span class="p">?.</span><span class="n">registerUndoWithTarget</span><span class="p">(</span><span class="kc">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="p">{</span> <span class="n">me</span> <span class="k">in</span>
    <span class="n">me</span><span class="p">.</span><span class="n">undoablyDoThing</span><span class="p">()</span>
<span class="p">})</span>
<span class="c1">// å¯ä»¥æ·»åŠ æœ‰æ„ä¹‰çš„æ“ä½œåç§°: undoManager?.setActionName(&#34;Thing&#34;)</span>
<span class="n">undoThing</span><span class="p">()</span>
<span class="p">}</span></code></pre></div></li>
</ul>

<p>å¦å¤–è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œæœ€å¥½æ˜¯ä¹Ÿè¦å°†æ’¤é”€æŒ‰é’®å’Œé‡åšæŒ‰é’®ä¸ undoManager çš„ canUndo å’Œ canRedo åŒæ­¥ï¼Œå½¢å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kc">self</span><span class="p">.</span><span class="n">undoButton</span><span class="p">.</span><span class="n">isEnabled</span> <span class="p">=</span> <span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">undoManager</span><span class="p">?.</span><span class="n">canUndo</span><span class="p">)</span><span class="o">!</span>
<span class="kc">self</span><span class="p">.</span><span class="n">redoButton</span><span class="p">.</span><span class="n">isEnabled</span> <span class="p">=</span> <span class="p">(</span><span class="kc">self</span><span class="p">.</span><span class="n">undoManager</span><span class="p">?.</span><span class="n">canRedo</span><span class="p">)</span><span class="o">!</span></code></pre></div>
<p>æœ€ç»ˆå®ç°æ•ˆæœå¦‚ä¸‹è§†é¢‘ï¼Œè§†é¢‘ä¸­å¯ä»¥çœ‹åˆ° ViewController ç±»çš„å®ç°ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/undomanager.mp4" controls="controls" width="960"></video>

<p>å…·ä½“å®ç°ä»£ç å¯ä»¥å‚è€ƒ Demo æºç ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/TextFieldKeyDemo_UndoManager.zip" target="_blank">TextFieldKeyDemo_UndoManager</a></p>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>

<ul>
<li>ã€ŠmacOSåº”ç”¨å¼€å‘åŸºç¡€æ•™ç¨‹ã€‹</li>
<li><a href="https://stackoverflow.com/questions/36491789/using-Undomanager-how-to-register-undos-using-swift-closures" target="_blank">Using UndoManager, how to register undos using Swift closures</a></li>
<li><a href="https://developer.apple.com/documentation/foundation/undomanager" target="_blank">UndoManager</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ NSTextField æ”¯æŒæ–‡æœ¬å¿«æ·é”®(ä¸€): åŸºæœ¬æ“ä½œ</title>
			<link>https://www.smslit.top/2019/02/25/macOS-dev-nstextfield-keys/</link>
			<pubDate>Mon, 25 Feb 2019 10:00:05 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/02/25/macOS-dev-nstextfield-keys/</guid>
			<description>åœ¨æ—¥å¸¸ macOS å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ° NSTextField æ§ä»¶ï¼Œä½†æ˜¯ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå¼€å‘çš„åº”ç”¨æ²¡æœ‰é¡¶æ åº”ç”¨èœå•ï¼Œç¼–è¾‘æ§ä»¶ä¸­çš„æ–‡æœ¬å†…å®¹çš„æ—¶å€™ï¼ŒæŒ‰ä¸‹æ–‡æœ¬æ“ä½œå¿«æ·é”®æ— æ•ˆï¼Œè€Œå¾—</description>
			<content type="html"><![CDATA[

<p>åœ¨æ—¥å¸¸ macOS å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ° NSTextField æ§ä»¶ï¼Œä½†æ˜¯ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå¼€å‘çš„åº”ç”¨æ²¡æœ‰é¡¶æ åº”ç”¨èœå•ï¼Œç¼–è¾‘æ§ä»¶ä¸­çš„æ–‡æœ¬å†…å®¹çš„æ—¶å€™ï¼ŒæŒ‰ä¸‹æ–‡æœ¬æ“ä½œå¿«æ·é”®æ— æ•ˆï¼Œè€Œå¾—åˆ°çš„æ˜¯ç³»ç»Ÿè­¦å‘ŠéŸ³ã€‚æœ¬æ–‡å°±è·Ÿåé‡Œä¸€èµ·çœ‹ä¸€ä¸‹å¦‚ä½•è®©æ²¡æœ‰åº”ç”¨èœå•çš„ app ä¸­çš„ NSTextField æ”¯æŒå¸¸ç”¨çš„æ–‡æœ¬æ“ä½œå¿«æ·é”®ã€‚</p>

<ul>
<li>å¤åˆ¶: <code>Command</code> + <code>c</code></li>
<li>å‰ªåˆ‡: <code>Command</code> + <code>x</code></li>
<li>ç²˜è´´: <code>Command</code> + <code>v</code></li>
<li>å…¨é€‰: <code>Command</code> + <code>a</code></li>
</ul>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="é”®ç›˜äº‹ä»¶">é”®ç›˜äº‹ä»¶</h1>

<p>æ¯ä¸ª app éƒ½æœ‰è‡ªå·±çš„ä¸»å¾ªç¯çº¿ç¨‹(Main Run Loop)ï¼Œåœ¨è¿™ä¸ªå¾ªç¯ä¸­ä¼šéå†ç³»ç»Ÿçš„äº‹ä»¶æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé€ä¸€å‘ç»™å¯¹åº”çš„å“åº”å¯¹è±¡è¿›è¡Œå¤„ç†ã€‚å…·ä½“æ¥è¯´å°±æ˜¯ NSApp çš„ <code>sendAction:</code> æˆ– <code>sendEvent:</code>æ–¹æ³•å‘é€äº‹ä»¶æ¶ˆæ¯ç»™ NSWindowï¼ŒNSWindow å†åˆ†å‘ç»™å…·ä½“çš„è§†å›¾å¯¹è±¡ï¼Œæœ€åç”±ç›¸åº”çš„äº‹ä»¶å“åº”æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚å…¶ä¸­ä¸€ç§äº‹ä»¶ï¼Œå°±æ˜¯è¿™é‡Œè¦è¯´çš„<strong>é”®ç›˜äº‹ä»¶</strong>ï¼ŒNSApp å¯¹ä¸åŒçš„é”®ç›˜äº‹ä»¶å¤„ç†æ–¹å¼ä¼šä¸åŒï¼Œä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç§ï¼š</p>

<ul>
<li><strong>å¿«æ·é”®</strong>ï¼šå¦‚æœæŒ‰ä¸‹å¿«æ·é”®ï¼Œç³»ç»Ÿä¼šå…ˆå‘å½“å‰çš„<strong>æ´»åŠ¨çª—å£</strong>æˆ–<strong>èœå•</strong>å‘é€ <code>performKeyEquivalent:</code> æ¶ˆæ¯ï¼Œæ­¤æ—¶çª—å£ä¼šä¾æ¬¡éå†æ‰€æœ‰å­è§†å›¾æ§ä»¶æŒ‰ç…§å“åº”é“¾ä¼ é€’ç»™ <code>performKeyEquivalent:</code> çš„å“åº”è€…ã€‚</li>
<li><strong>æ§åˆ¶é”®</strong>ï¼šNSApp ä¼šå°†æ¶ˆæ¯è½¬å‘ç»™é”®ç›˜çª—å£ï¼Œå®Œæˆä¸åŒçš„æ§ä»¶åˆ‡æ¢æ§åˆ¶çš„åŠŸèƒ½</li>
<li><strong>å…¶å®ƒæŒ‰é”®</strong>ï¼šNSApp ä¼šå°†æ¶ˆæ¯è½¬å‘ç»™é”®ç›˜çª—å£ï¼Œçª—å£å¯¹è±¡ä¼šå…ˆå®šä½åˆ°ç¬¬ä¸€å“åº”å¯¹è±¡ï¼Œæ ¹æ®å“åº”é“¾ä¼˜å…ˆçº§å¯»æ‰¾å¯¹ keyDown é”®ç›˜äº‹ä»¶å“åº”çš„è§†å›¾å¯¹è±¡ï¼Œå¦‚æœå¯ä»¥æ‰¾åˆ°å°±ç”±ç›¸åº”å¯¹è±¡å¤„ç†ï¼Œå¦åˆ™å°±ä¼šæŒ‰ç…§ insertText æ–¹æ³•è¿›è¡Œå¤„ç†(å¦‚æœæ˜¯ä¸ªæ–‡æœ¬æ§ä»¶ï¼Œå°±ä¼šæ’å…¥ç›¸åº”é”®ç›˜æ–‡æœ¬)</li>
</ul>

<p>å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬è¦å®ç°æœ¬æ–‡çš„ä¸»é¢˜ï¼Œå…³æ³¨å¿«æ·é”®çš„å¤„ç†æµç¨‹å°±å¯ä»¥äº†ï¼Œå…¶å® NSTextField æœ‰ä¸Šè¿° <code>performKeyEquivalent:</code> æ¶ˆæ¯çš„å¤„ç†ï¼Œåªä¸è¿‡æ˜¯æ²¡æœ‰ä»»ä½•åŠŸèƒ½å®ç°è€Œå·²ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€ä¸º NSTextField å¤å†™ä¸€ä¸‹è¿™ä¸ªæ¶ˆæ¯çš„å¤„ç†å³å¯ï¼Œè¿™ä¸ªæ¶ˆæ¯çš„å¤„ç†è¿”å›å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”ç±»å‹ï¼Œè¿”å› true åˆ™æ ‡å¿—ç€æŒ‰é”®äº‹ä»¶æ¶ˆæ¯ä¼ é€’çš„ç»“æŸã€‚</p>

<h1 id="æ–°å»º-demo-å·¥ç¨‹">æ–°å»º Demo å·¥ç¨‹</h1>

<p>ä¸ºäº†æ›´å¥½çš„è¯´æ˜å®ç°æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦é€šè¿‡ä¸€ä¸ªå®é™…çš„Demoæ¼”ç¤ºï¼æ–°å»ºçš„å·¥ç¨‹åŒ…å« storyboard ï¼Œæ–°å»ºå®Œæˆåæ·»åŠ ä¸€ä¸ªæ–‡æœ¬æ¡†æ§ä»¶ï¼Œå¦‚æœæ‚¨å¯¹è¿™äº›æ“ä½œå¾ˆç†Ÿæ‚‰å¯ä»¥è·³è¿‡æœ¬å°èŠ‚ã€‚</p>

<ul>
<li><p>æ‰“å¼€ Xcodeï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Shift</code> + <code>Command</code> + <code>N</code> å°±ä¼šè§¦å‘æ–°å»ºå·¥ç¨‹çš„å¯¼èˆªçª—å£</p></li>

<li><p>é€‰æ‹© macOS -&gt; Cocoa Appï¼Œç‚¹å‡» <code>Next</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190217102918.png" alt="" /></p></li>

<li><p>å·¥ç¨‹å–åä¸º TextFieldKeyDemoï¼Œå‹¾é€‰ <code>Use Storyboards</code>ï¼Œç‚¹å‡» Next é€‰æ‹©åˆé€‚çš„ç›®å½•ï¼Œç‚¹å‡»create åˆ›å»º</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190225210558.png" alt="" /></p></li>

<li><p>è¿›å…¥å·¥ç¨‹åï¼Œå•å‡» Main.storyboard ï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Shift</code> + <code>Command</code> + <code>l</code> æ‰“å¼€æ§ä»¶é€‰æ‹©å™¨ï¼Œæœç´¢ textfield ï¼Œå°† Text Field æ‹–å…¥ ViewController ï¼Œæ°´å¹³å‚ç›´å±…ä¸­æ”¾ç½®:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190225214726.png" alt="" /></p></li>
</ul>

<h1 id="è¿è¡Œå·¥ç¨‹">è¿è¡Œå·¥ç¨‹</h1>

<h2 id="è¿è¡Œç»“æœ">è¿è¡Œç»“æœ</h2>

<p>ç‚¹å‡»å¿«æ·é”® <code>Command</code> + <code>r</code> è¿è¡Œå·¥ç¨‹ï¼Œåœ¨æ‰“å¼€çš„çª—å£ä¸­å¯ä»¥çœ‹åˆ°åˆšåˆšæ·»åŠ çš„ Text Fieldï¼Œåœ¨å…¶ä¸­è¾“å…¥ä¸€äº›æ–‡æœ¬ï¼Œç„¶åè¯•ä¸€ä¸‹å¿«ä»¶é”®ï¼Œæ¯”å¦‚å…¨é€‰ã€å¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡ï¼Œå‘ç°éƒ½æ”¯æŒã€‚</p>

<p>æ­¤æ—¶ä½ ä¼šä¸ä¼šæœ‰ç–‘é—®ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ä¸º NSTextField ç±»å¤å†™ <code>performKeyEquivalent:</code> æ–¹æ³•å‘€ï¼Œä¸ºä»€ä¹ˆæ–‡æœ¬æ¡†å°±æ”¯æŒè¿™äº›å¿«æ·é”®äº†ï¼ŒåŸå› æ˜¯æœ€ç»ˆé”®ç›˜ä¿¡æ¯æ¶ˆæ¯ä¼ ç»™äº†åº”ç”¨èœå•ï¼Œåº”ç”¨èœå•ä¸­æœ‰å…³äºæ–‡æœ¬ç¼–è¾‘çš„å¿«æ·é”®çš„å¤„ç†ï¼Œé‚£ä¹ˆé—®é¢˜åˆæ¥äº†ï¼Œä¸ºä»€ä¹ˆåº”ç”¨èœå•å°±ä¼šå¯¹ Text Field è¿›è¡Œæ“ä½œå‘¢ï¼Ÿä¸»è¦ä¸¤ç‚¹ï¼š</p>

<ul>
<li><p>èœå•æ ä¸Š<strong>ç¼–è¾‘</strong>ä¸€ç»„ä¸­çš„æ“ä½œæ­£æ˜¯å¯¹åº”æ–‡ç« ä¸€å¼€å¤´è¯´çš„å‡ ä¸ªå¿«æ·é”®ï¼Œæ¯ä¸ªæ“ä½œå¯¹åº”éƒ½ç»‘å®šäº†ä¸€ä¸ªå¯¹è±¡é‚£å°±æ˜¯ <strong>First Responder</strong>ï¼Œæ¯”å¦‚ Copy å¯¹åº”çš„ç»‘å®š actionï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190225215948.png" alt="" /></p></li>

<li><p>å½“å‰æ´»åŠ¨çª—å£ä¸­çš„ <strong>First Responder</strong> å°±æ˜¯æ–‡æœ¬æ¡†</p></li>
</ul>

<h2 id="è¯•éªŒæ“ä½œ">è¯•éªŒæ“ä½œ</h2>

<p>ç°åœ¨æ‰“å¼€å·¥ç¨‹ï¼Œæ‰“å¼€ Main.storyboard æ–‡ä»¶ï¼Œåˆ é™¤ èœå•æ ï¼Œå°±æ˜¯ä¸‹å›¾æ ‡æ³¨çš„ä¸œè¥¿ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190225220724.png" alt="" /></p>

<p>æ­¤æ—¶å†æ¬¡è¿è¡Œå·¥ç¨‹ï¼Œåœ¨æ–‡æœ¬æ¡†ä¸­å°è¯•ä½¿ç”¨å¿«æ·é”®ï¼Œä½ å°±ä¼šå‘ç°å¦‚æˆ‘ä»¬æ‰€æƒ³å¤±æ•ˆäº†ï¼</p>

<h1 id="å¿«æ·é”®åŠ æŒ">å¿«æ·é”®åŠ æŒ</h1>

<p>æœ‰æ—¶æˆ‘ä»¬å¼€å‘ app å°±æ˜¯ä¸æƒ³ä¿ç•™èœå•æ ï¼Œæ¯”å¦‚çŠ¶æ€æ å°å·¥å…·ã€‚æ‰€ä»¥ç»§ç»­ç ”ç©¶æ€ä¹ˆåœ¨æ²¡æœ‰èœå•æ çš„æƒ…å†µä¸‹è®© Text Field æ”¯æŒå¿«æ·é”®æ˜¯æœ‰å¿…è¦çš„ï¼å¾ˆè‡ªç„¶çš„æˆ‘ä»¬å°±ä¼šæƒ³åˆ°ä¸Šé¢è¯´çš„ä¸º NSTextField å¤å†™ <code>performKeyEquivalent:</code> æ–¹æ³•çš„æ–¹å¼æ¥è§£å†³ï¼</p>

<p>è¿™é‡Œç›´æ¥è´´å‡ºä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">// NSTextField è‡ªèº«æ”¯æŒå¿«æ·é”®</span>
<span class="kd">extension</span> <span class="nc">NSTextField</span> <span class="p">{</span>
    <span class="n">open</span> <span class="kr">override</span> <span class="kd">func</span> <span class="nf">performKeyEquivalent</span><span class="p">(</span><span class="n">with</span> <span class="n">event</span><span class="p">:</span> <span class="n">NSEvent</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">event</span><span class="p">.</span><span class="n">charactersIgnoringModifiers</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s">&#34;a&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">selectAll</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;c&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;v&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">paste</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">case</span> <span class="s">&#34;x&#34;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">NSApp</span><span class="p">.</span><span class="n">sendAction</span><span class="p">(</span><span class="k">#selector</span><span class="p">(</span><span class="n">NSText</span><span class="p">.</span><span class="n">cut</span><span class="p">(</span><span class="kc">_</span><span class="p">:)),</span> <span class="n">to</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">window</span><span class="p">?.</span><span class="n">firstResponder</span><span class="p">,</span> <span class="n">from</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">super</span><span class="p">.</span><span class="n">performKeyEquivalent</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>ä¸Šé¢çš„ä»£ç è´´åˆ°åˆé€‚ä½ç½®å³å¯ï¼Œæ¯”å¦‚ AppDelegate.swift æ–‡ä»¶ <strong>AppDelegate</strong> ç±»çš„åé¢ã€‚</p>

<p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æ–¹æ³•å®ç°äº†å››ä¸ªå¿«æ·é”®çš„åŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ï¼šå…¨é€‰ã€å¤åˆ¶ã€ç²˜è´´å’Œå‰ªåˆ‡ï¼Œéƒ½æ˜¯é€šè¿‡ NSApp å‘æ–‡æœ¬æ¡†æ‰€åœ¨çª—å£çš„ <strong>First Responder</strong>(ä¹Ÿå°±æ˜¯æ–‡æœ¬æ¡†è‡ªå·±) å‘èµ·ç›¸åº”è¡Œä¸ºï¼Œè€Œè¿™äº›è¡Œä¸ºæ˜¯ <strong>NStext</strong> ç±»çš„åŸºæœ¬æ–¹æ³•ã€‚å¦å¤–ï¼š</p>

<ul>
<li><code>event.charactersIgnoringModifiers</code>: é™¤å»ä¿®é¥°é”®å‰©ä½™çš„æŒ‰é”®</li>
</ul>

<blockquote>
<p><strong>charactersIgnoringModifiers</strong>: The characters generated by a key event as if no modifier key (except for Shift) applies</p>
</blockquote>

<ul>
<li>ä¿®é¥°é”®ç±»å‹ä¸º <code>NSevent:ModifierFlags</code> ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªé›†åˆï¼Œæœ‰ capsLockã€shiftã€controlã€optionã€commandã€numericPadã€helpã€function å’Œ deviceIndependentFlagsMask</li>
</ul>

<p>è¿è¡Œå·¥ç¨‹ï¼Œçª—å£ä¸­çš„ Text Field æ”¯æŒå››ä¸ªå¿«æ·é”®äº†ï¼ä½†æ˜¯æ­¤æ—¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°† <code>Command</code> é”®æ›¿æ¢ä¸º <code>Ctrl</code> æŒ‰ä¸‹å¿«æ·é”®ä¹Ÿèƒ½å®ç°ç›¸åº”æ–‡æœ¬æ“ä½œï¼Œæ‰€ä»¥åœ¨ <strong>switch</strong> è¯­å¥ä¹‹å‰åŠ ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœä¿®é¥°é”®ä¸åŒ…å« <code>Command</code> å°±æŒ‰ç…§æ­£å¸¸å“åº”ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="k">if</span> <span class="n">event</span><span class="p">.</span><span class="n">modifierFlags</span><span class="p">.</span><span class="n">isDisjoint</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="p">.</span><span class="n">command</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">super</span><span class="p">.</span><span class="n">performKeyEquivalent</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<ul>
<li><code>event.modifierFlags.isDisjoint(with: .command)</code>: åˆ¤æ–­å¿«æ·é”®ä¸­çš„ä¿®é¥°é”®(<strong>modifier</strong>)æ˜¯ä¸æ˜¯ä¸åŒ…å« Command é”®ï¼Œä¸åŒ…å«å°±è¿”å› true</li>
</ul>

<blockquote>
<p><strong>isDisjoint</strong>: Returns a Boolean value that indicates whether the set has no members in common with the given set.</p>
</blockquote>

<p>æ­¤æ—¶ï¼Œè¿˜æ˜¯ä¸å®Œç¾çš„ï¼Œå¦‚æœæŒ‰ä¸‹æ–‡æœ¬æ“ä½œå¿«æ·é”®çš„åŒæ—¶æŒ‰ä¸‹äº†å…¶å®ƒæœ‰æ•ˆä¿®é¥°é”®(æ¯”å¦‚ <code>Ctrl</code>) åŒæ ·å¯ä»¥å®Œæˆæ–‡æœ¬æ“ä½œï¼Œç›®å‰è¿˜æ²¡æƒ³åˆ°å…¶ä»–æ›´å¥½çš„å¤„ç†æ–¹å¼ï¼åé¢æœ‰æ‰€å‘ç°å°±ä¼šæ›´æ–°è¿™é‡Œï¼</p>

<p>ä¸çŸ¥é“æ‚¨ä¼šä¸ä¼šæœ‰ç–‘é—®ï¼šæ€ä¹ˆä¸æ”¯æŒæ’¤é”€å’Œé‡åšä¸¤ä¸ªå¿«æ·é”®ï¼Ÿä¸æ˜¯ä¸åšï¼Œ<strong>æ’¤é”€</strong>å’Œ<strong>é‡åš</strong> æ“ä½œå®ç°æ˜¯æŒºå¤§çš„ä¸€å—å†…å®¹ï¼Œæ‰€ä»¥æ”¾åˆ°è¿™ä¸ªä¸»é¢˜çš„ç¬¬äºŒç¯‡æ–‡ç« ä»‹ç»ã€‚</p>

<p>æœ¬æ–‡å·¥ç¨‹ä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/TextFieldKeyDemo.zip" target="_blank">TextFieldKeyDemo</a></p>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>

<ul>
<li><a href="https://www.cnblogs.com/kaymin/articles/7232475.html" target="_blank">NSTextFieldæ”¯æŒCmd+C/Vå¿«æ·é”®å¤åˆ¶ã€ç²˜è´´</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ä»£ç å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–</title>
			<link>https://www.smslit.top/2019/02/21/mac_app_international_3/</link>
			<pubDate>Thu, 21 Feb 2019 18:02:47 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/02/21/mac_app_international_3/</guid>
			<description>å¼€å‘äº†ä¸€æ¬¾å¥½ç”¨çš„ macOS app åï¼Œä¸ºäº†è®©æ›´å¤šäººçš„å°åˆ°è‡ªå·± â€œçœŸé¦™â€ çš„ä½œå“ï¼Œapp çš„å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ˜¯æœ‰å¿…è¦çš„ï¼Œapp çš„æœ¬åœ°åŒ–åˆ†ä¸‰éƒ¨æ›²è®²è§£ï¼Œæœ¬æ–‡æ˜¯ç¬¬ä¸‰éƒ¨ï¼šä»£</description>
			<content type="html"><![CDATA[

<p>å¼€å‘äº†ä¸€æ¬¾å¥½ç”¨çš„ macOS app åï¼Œä¸ºäº†è®©æ›´å¤šäººçš„å°åˆ°è‡ªå·± â€œçœŸé¦™â€ çš„ä½œå“ï¼Œapp çš„å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ˜¯æœ‰å¿…è¦çš„ï¼Œapp çš„æœ¬åœ°åŒ–åˆ†ä¸‰éƒ¨æ›²è®²è§£ï¼Œæœ¬æ–‡æ˜¯ç¬¬ä¸‰éƒ¨ï¼šä»£ç å­—ç¬¦ä¸²æœ¬åœ°åŒ–ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190221212506.jpg" alt="" /></p>

<p>ç¬¬ä¸€éƒ¨ä¼ é€é—¨ï¼š<a href="/2019/02/18/mac_app_international_1/" target="_blank">macOS å¼€å‘ä¹‹ APP åç§°æœ¬åœ°åŒ–</a></p>

<p>ç¬¬äºŒéƒ¨ä¼ é€é—¨ï¼š<a href="/2019/02/19/mac_app_international_2/" target="_blank">macOS å¼€å‘ä¹‹ storyboard æˆ– xib æœ¬åœ°åŒ–</a></p>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="å‡†å¤‡å·¥ç¨‹">å‡†å¤‡å·¥ç¨‹</h1>

<p>æœ¬æ–‡ç›´æ¥ä½¿ç”¨ä¸Šä¸€ç¯‡æ–‡ç« <a href="/2019/02/19/mac_app_international_2/" target="_blank">macOS å¼€å‘ä¹‹ storyboard æˆ– xib æœ¬åœ°åŒ–</a>çš„å·¥ç¨‹ï¼Œ<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/InternationalDemo2.zip" target="_blank">ç‚¹æˆ‘</a>ä¸‹è½½ï¼</p>

<p>ä¸ºäº†å±•ç¤ºæœ¬æ–‡è¦è®²çš„å†…å®¹ï¼Œè¿™é‡Œåˆ©ç”¨å·²æœ‰çš„ labelï¼Œå¦å¤–æ·»åŠ ä¸¤ä¸ªæŒ‰é’®æ¥åˆ‡æ¢ label çš„å†…å®¹ã€‚</p>

<h2 id="æ·»åŠ æŒ‰é’®">æ·»åŠ æŒ‰é’®</h2>

<p>æ‰“å¼€ä¸Šé¢ä¸‹è½½çš„å·¥ç¨‹ï¼Œæ‰“å¼€ <code>Main.storyboard</code> å¯ä»¥çœ‹åˆ° View controller ä¸­å·²ç»æœ‰ä¸€ä¸ª label ï¼Œæœ¬å°èŠ‚æ·»åŠ ä¸¤ä¸ªæŒ‰é’®ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„ç‚¹å‡» actionã€‚</p>

<ol>
<li><p>æŒ‰ä¸‹å¿«ä»¶é”® <code>Shift</code> + <code>Command</code> + <code>l</code> é”®ï¼Œæ‰“å¼€æ§ä»¶é€‰æ‹©å™¨ï¼Œæœç´¢æ¡†è¾“å…¥ <code>button</code> å°±ä¼šç­›é€‰å‡ºæ‰€æœ‰çš„æŒ‰é’®æ§ä»¶ï¼Œå°†å…¶ä¸­çš„ <code>Gradient Button</code> æ‹–å…¥ View Controllerï¼Œè°ƒæ•´å…¶å¤§å°ä¸º 50 * 232ï¼Œé å·¦æ”¾ç½®åˆ°åˆé€‚ä½ç½®ï¼Œæ‰“å¼€ Attributes Inspector(é€‰ä¸­æŒ‰é’®ï¼ŒæŒ‰ç»„åˆé”® <code>Option</code> + <code>Command</code> + 4)ï¼Œå…¶ä¸­å‹¾é€‰ <code>Transparent</code> ï¼ŒImage é€‰æ‹© <code>NSGoForwardTemplate</code>ï¼Œç„¶åå‹¾é€‰ <code>Refuse First Responder</code></p></li>

<li><p>åŒæ ·çš„æ–¹æ³•æ·»åŠ ç¬¬äºŒä¸ªæŒ‰é’®(æˆ–è€…ç›´æ¥å¤åˆ¶ç¬¬ä¸€ä¸ªæŒ‰é’®)ï¼Œä¸è¿‡æ˜¯é å³æ”¾ç½®ï¼ŒAttributes Inspector ä¸­æ›´æ”¹ Image ä¸º <code>NSGoBackTemplate</code>ï¼Œå…¶å®ƒè®¾ç½®ä¸ç¬¬ä¸€ä¸ªæŒ‰é’®ä¸€è‡´</p></li>

<li><p>æŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + å›è½¦é”®ä¼šæ˜¾ç¤º <code>Main.storyboard</code> ä¸­ view controller å¯¹åº”çš„ Assitant Editor å¹¶æ‰“å¼€å¯¹åº”çš„ swift æ–‡ä»¶</p></li>

<li><p>é€‰ä¸­ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼ŒæŒ‰ä½ <code>Ctrl</code> é”®ï¼Œé¼ æ ‡å·¦é”®æŒ‰ä½æ‹–åŠ¨è‡³ Assitant Editor ä¸­æ¾æ‰‹æ·»åŠ ä¸€ä¸ª Action ï¼Œåç§°ä¸º <code>previousLabel</code></p></li>

<li><p>é€‰ä¸­ç¬¬äºŒä¸ªæŒ‰é’®ï¼ŒæŒ‰ä½ <code>Ctrl</code> é”®ï¼Œé¼ æ ‡å·¦é”®æŒ‰ä½æ‹–åŠ¨è‡³ Assitant Editor ä¸­æ¾æ‰‹æ·»åŠ ä¸€ä¸ª Action ï¼Œåç§°ä¸º <code>nextLabel</code></p></li>
</ol>

<p>ä¸Šè¿°äº”æ­¥æ“ä½œï¼Œå¯å‚è€ƒå¦‚ä¸‹è§†é¢‘è¿›è¡Œï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/mac_international_add_button.mp4" controls="controls" width="720"></video>

<h2 id="æ·»åŠ -label-çš„-outlet">æ·»åŠ  Label çš„ outlet</h2>

<p>æ‰“å¼€ Main.storyboard ï¼Œé€‰ä¸­ view controller ä¸­çš„ labelï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + å›è½¦é”®ä¼šæ˜¾ç¤º <code>Main.storyboard</code> ä¸­ view controller å¯¹åº”çš„ Assitant Editor å¹¶æ‰“å¼€å¯¹åº”çš„ swift æ–‡ä»¶ï¼ŒæŒ‰ä½ <code>Ctrl</code> é”®ï¼Œåœ¨ label ä¸ŠæŒ‰ä½é¼ æ ‡å·¦é”®æ‹–åŠ¨åˆ° Assitant Editor ä¸­æ¾æ‰‹æ·»åŠ ä¸€ä¸ª outlet ï¼Œåç§°ä¸º <code>movieLabel</code>ã€‚</p>

<h2 id="æ·»åŠ æ ‡ç­¾å†…å®¹">æ·»åŠ æ ‡ç­¾å†…å®¹</h2>

<p>åœ¨ ViewController.swift çš„ ViewController ç±»ä¸­æ·»åŠ ä»¥ä¸‹å®šä¹‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">movies</span> <span class="p">=</span> <span class="p">[</span><span class="s">&#34;å¤©ç©ºä¹‹åŸ&#34;</span><span class="p">,</span> <span class="s">&#34;å¹½çµå…¬ä¸»&#34;</span><span class="p">,</span> <span class="s">&#34;é£ä¹‹è°·&#34;</span><span class="p">]</span>
<span class="kd">var</span> <span class="nv">movieIndex</span> <span class="p">=</span> <span class="mi">0</span></code></pre></div>
<p>åœ¨ ViewDidLoad æ–¹æ³•çš„ <code>super.viewDidLoad()</code> åé¢æ·»åŠ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">movieLable</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="n">movies</span><span class="p">[</span><span class="n">movieIndex</span><span class="p">]</span></code></pre></div>
<h2 id="å®Œå–„æŒ‰é’®çš„-action">å®Œå–„æŒ‰é’®çš„ action</h2>

<p>è¡¥å…… <code>previousLabel</code> å’Œ <code>nextLabel</code> çš„å®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">previousLabel</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">movieIndex</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">movieIndex</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="n">movieIndex</span> <span class="p">=</span> <span class="n">movies</span><span class="p">.</span><span class="bp">count</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="p">}</span>
    <span class="n">movieLable</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="n">movies</span><span class="p">[</span><span class="n">movieIndex</span><span class="p">]</span>
<span class="p">}</span>

<span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">nextLabel</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">movieIndex</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">movieIndex</span> <span class="o">&gt;=</span> <span class="n">movies</span><span class="p">.</span><span class="bp">count</span> <span class="p">{</span>
        <span class="n">movieIndex</span> <span class="p">=</span> <span class="mi">0</span>
    <span class="p">}</span>
    <span class="n">movieLable</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="n">movies</span><span class="p">[</span><span class="n">movieIndex</span><span class="p">]</span>
<span class="p">}</span></code></pre></div>
<h1 id="ä»£ç æœ¬åœ°åŒ–">ä»£ç æœ¬åœ°åŒ–</h1>

<p>ä»£ç ä¸­å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–éœ€è¦æ–°å»ºä¸€ä¸ªåä¸º <code>Localizable.strings</code> çš„æ–‡ä»¶ï¼Œæ–°å»ºè¿‡ç¨‹ç±»ä¼¼äº<a href="/2019/02/18/mac_app_international_1/" target="_blank">macOS å¼€å‘ä¹‹ APP åç§°æœ¬åœ°åŒ–</a> ä¸­ <code>InfoPlist.strings</code>çš„è¿‡ç¨‹ï¼Œä»£ç ä¸­çš„å­—ç¬¦ä¸²å¦‚æœéœ€è¦æœ¬åœ°åŒ–å¿…é¡»åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å®šä¹‰ã€‚</p>

<h2 id="æ·»åŠ æœ¬åœ°åŒ–æ–‡ä»¶">æ·»åŠ æœ¬åœ°åŒ–æ–‡ä»¶</h2>

<ol>
<li><p>æŒ‰ä¸‹å¿«æ·é”® <code>Command</code> + <code>n</code> æ‰“å¼€æ–°å»ºæ–‡ä»¶çš„å¯¼èˆªçª—å£ï¼Œé€‰ä¸­ macOS - Resources - Strings fileï¼Œnextï¼Œ æ›´æ”¹åç§°ä¸º <code>Localizable.strings</code></p></li>

<li><p>æ­¤æ—¶ä¼šæ‰“å¼€æ–‡ä»¶ï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Option</code> + <code>Command</code> + <code>1</code> å°±ä¼šæ‰“å¼€å…¶ file Inspectorï¼Œå¯ä»¥çœ‹åˆ°åˆ†ç»„ <code>Localization</code> ä¸­çš„ <code>Localize...</code> æŒ‰é’®ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®å°±ä¼šè·³å‡ºå¼¹çª—ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218114200.png" alt="" /></p></li>

<li><p>é€‰æ‹© <code>English</code> é€‰é¡¹ï¼Œç‚¹å‡» <code>Localize</code> å°±ä¼šå‘ç° <code>InfoPlist.strings</code> Inspector ä¸­çš„ <code>Localizations</code> åˆ†ç»„å˜æˆäº†ä¸‰ä¸ªå‹¾é€‰æ¡†ï¼Œå…¶ä¸­ <code>English</code> æ˜¯å‹¾é€‰çš„ï¼Œè¿™é‡Œä¹ŸæŠŠ Chinese å’Œ Japanese å‹¾é€‰ä¸Šï¼Œæ­¤æ—¶ä½ ä¼šå‘ç° Xcode å·¦ä¾§å·¥ç¨‹å¯¼èˆªæ  <code>InfoPlist.strings</code> å·¦ä¾§å‡ºç°äº†ä¸€ä¸ªå°ä¸‰è§’ï¼Œç‚¹å¼€å°±ä¼šå‘ç°å…¶å˜æˆäº†ä¸ä¸‰ç§è¯­è¨€å¯¹åº”çš„ä¸‰ä¸ª Strings æ–‡ä»¶ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190221201935.png" alt="" /></p></li>
</ol>

<h2 id="ä»£ç å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–">ä»£ç å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–</h2>

<p>ä»£ç ä¸­å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–éœ€è¦ä¸¤æ­¥ï¼Œä¸€æ˜¯åœ¨åˆšæ–°å»ºçš„ String æ–‡ä»¶ä¸­æ·»åŠ å­—ç¬¦ä¸²å®šä¹‰ï¼ŒäºŒæ˜¯è°ƒç”¨æ–¹æ³• <code>NSLocalizedString(forKey:, comment:)</code> æ ¹æ®å­—ç¬¦ä¸²å®šä¹‰çš„é”®è·å–å­—ç¬¦ä¸²ã€‚</p>

<h3 id="æ·»åŠ æœ¬åœ°åŒ–å­—ç¬¦ä¸²å®šä¹‰">æ·»åŠ æœ¬åœ°åŒ–å­—ç¬¦ä¸²å®šä¹‰</h3>

<p>å› ä¸ºä»£ç ä¸­åªåœ¨ <code>movies</code> åˆå§‹åŒ–ä¸­ä½¿ç”¨äº†å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å¯¹åº”è¦å®šä¹‰ä¸€ä¸‹å®ƒä»¬ï¼Œåˆ†åˆ«åœ¨ä¸‰ä¸ª Strings æ–‡ä»¶ä¸­å®šä¹‰ã€‚</p>

<ul>
<li><p>Localizable.strings (English):</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="s">&#34;movie-label-1.title&#34;</span> <span class="p">=</span> <span class="s">&#34;Laputa Castle in the Sky&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-2.title&#34;</span> <span class="p">=</span> <span class="s">&#34;Princess Mononoke&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-3.title&#34;</span> <span class="p">=</span> <span class="s">&#34;Nausicaa Of The Valley Of The Wind &#34;</span><span class="p">;</span></code></pre></div></li>

<li><p>Localizable.strings (Chinese(Simplified)):</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="s">&#34;movie-label-1.title&#34;</span> <span class="p">=</span> <span class="s">&#34;å¤©ç©ºä¹‹åŸ&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-2.title&#34;</span> <span class="p">=</span> <span class="s">&#34;å¹½çµå…¬ä¸»&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-3.title&#34;</span> <span class="p">=</span> <span class="s">&#34;é£ä¹‹è°·&#34;</span><span class="p">;</span></code></pre></div></li>

<li><p>Localizable.strings (Japanese):</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="s">&#34;movie-label-1.title&#34;</span> <span class="p">=</span> <span class="s">&#34;å¤©ç©ºã®åŸãƒ©ãƒ”ãƒ¥ã‚¿&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-2.title&#34;</span> <span class="p">=</span> <span class="s">&#34;ã‚‚ã®ã®ã‘å§«&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-3.title&#34;</span> <span class="p">=</span> <span class="s">&#34;é¢¨ã®è°·ã®ãƒŠã‚¦ã‚·ã‚«&#34;</span><span class="p">;</span></code></pre></div></li>
</ul>

<h3 id="æ›´æ–°ä»£ç ">æ›´æ–°ä»£ç </h3>

<p>ä¿®æ”¹æ·»åŠ æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¯¹åº”çš„åœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯ <code>movies</code> åˆå§‹åŒ–çš„åœ°æ–¹ï¼Œä¿®æ”¹ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">movies</span> <span class="p">=</span> <span class="p">[</span><span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;movie-label-1.title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
              <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;movie-label-2.title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
              <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;movie-label-3.title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">)]</span></code></pre></div>
<h3 id="æ•ˆæœå±•ç¤º">æ•ˆæœå±•ç¤º</h3>

<p>æ›´æ”¹ç³»ç»Ÿè¯­è¨€æŸ¥çœ‹å„è¯­è¨€çš„æ•ˆæœã€‚</p>

<ul>
<li><p>English</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190221204958.png" alt="" /></p></li>

<li><p>Chinese(Simplified)</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190221204943.png" alt="" /></p></li>

<li><p>Japanese</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190221204925.png" alt="" /></p></li>
</ul>

<h2 id="æ·»åŠ æ–°çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²">æ·»åŠ æ–°çš„æœ¬åœ°åŒ–å­—ç¬¦ä¸²</h2>

<p>åœ¨ <a href="/2019/02/19/mac_app_international_2/" target="_blank">macOS å¼€å‘ä¹‹ storyboard æˆ– xib æœ¬åœ°åŒ–</a> ä¸­æåˆ°äº†ä¸€ä¸ªå·¥å…· <a href="https://github.com/Flinesoft/BartyCrouch" target="_blank">BartyCrouch</a>ï¼Œå®ƒçš„å­å‘½ä»¤ <code>code</code> å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨æ‰«æä»£ç ä¸­è°ƒç”¨ <code>NSLocalizedString(forKey:, comment:)</code> çš„åœ°æ–¹ï¼Œå¦‚æœ <code>Localizable.strings</code> ä¸­æ²¡æœ‰çš„å­—ç¬¦ä¸²é”®ä¼šè‡ªåŠ¨è¿½åŠ ï¼Œéå¸¸æ–¹ä¾¿ï¼</p>

<p>âš ï¸ï¼š</p>

<p>bartycrouch å·²ç»å‘å¸ƒäº† <strong>4.0.0</strong>ï¼Œä½¿ç”¨æ–¹æ³•ä¸åŒï¼Œè¿™é‡Œå±•ç¤ºçš„æ–¹æ³•åªé€‚ç”¨äº bartycrouch <strong>v3.x.x</strong> ç‰ˆæœ¬ï¼Œåç»­åé‡Œä¼šå‡ºä¸€ç¯‡å…³äº bartycrouch v4.0.0 çš„ä½¿ç”¨æ•™ç¨‹ï¼Œè¯·æŒç»­å…³æ³¨<a href="https://www.smslit.top" target="_blank">åšå®¢</a> å’Œ çŸ¥ä¹ä¸“æ  <a href="https://zhuanlan.zhihu.com/c_1079349488673648640" target="_blank">macOS å¼€å‘</a>ã€‚</p>

<p>æ‰€ä»¥æˆ‘ä»¬åœ¨ä¹‹åè‹¥è¦å°†è¦ä½¿ç”¨çš„å­—ç¬¦ä¸²æœ¬åœ°åŒ–ï¼Œç›´æ¥ä½¿ç”¨ <code>NSLocalizedString(forKey:, comment:)</code> æ–¹æ³•ï¼ŒåŒæ—¶å®šä¹‰ä¸€ä¸ªæ–°çš„ key å…ˆç”¨ä¸Šï¼Œä¹‹åå»å‘½ä»¤è¡Œä½¿ç”¨ <code>bartycrouch code</code> å°±å¯ä»¥æ·»åŠ æ–°çš„å­—ç¬¦ä¸²å®šä¹‰ï¼Œåªéœ€è¦å†ä¿®æ”¹ Strings æ–‡ä»¶ä¸­æ–°åŠ é”®çš„å€¼å°±å¯ä»¥äº†ã€‚</p>

<h3 id="ä¸¾ä¾‹è¯´æ˜">ä¸¾ä¾‹è¯´æ˜</h3>

<ul>
<li><p>æ¯”å¦‚å†åœ¨ <code>movies</code> åˆå§‹åŒ–ä¸­æ–°åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä»£ç å¯å†™ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">movies</span> <span class="p">=</span> <span class="p">[</span><span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;movie-label-1.title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
          <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;movie-label-2.title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
          <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;movie-label-3.title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
          <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&#34;movie-label-4.title&#34;</span><span class="p">,</span> <span class="n">comment</span><span class="p">:</span> <span class="s">&#34;&#34;</span><span class="p">)]</span></code></pre></div></li>

<li><p>å‘½ä»¤è¡Œä¸‹åˆ‡æ¢è‡³å·¥ç¨‹æ–‡æ ¹ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash"><span class="c1"># -p æŒ‡å®šåŒ…å«å·¥ç¨‹ä»£ç æ–‡ä»¶çš„ç›®å½• ï¼Œ-l æŒ‡å®šå¯ä»¥æœåˆ° Localizable.strings æ–‡ä»¶çš„ä»£ç ç›®å½•</span>
$ bartycrouch code -p InternationalDemo -l InternationalDemo
â„¹ï¸ BartyCrouch: Successfully updated strings file<span class="o">(</span>s<span class="o">)</span> of Code files.</code></pre></div></li>

<li><p>æ‰“å¼€ä¸‰ä¸ª <code>Localizable.strings</code> æ–‡ä»¶ä¼šå‘ç°æ–°æ·»åŠ äº†ä¸€é¡¹ï¼Œå¹¶ä¸”ä¸ºæ¯ä¸€ä¸ªæ·»åŠ äº†é¢„ç½®æ³¨é‡Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="cm">/* No comment provided by engineer. */</span>
<span class="s">&#34;movie-label-4.title&#34;</span> <span class="p">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span></code></pre></div></li>

<li><p>åˆ†åˆ«ä¸ºä¸‰ä¸ª Strings æ–‡ä»¶ä¿®æ”¹å¯¹åº”æ–°åŠ é¡¹çš„å€¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="s">&#34;movie-label-4.title&#34;</span> <span class="p">=</span> <span class="s">&#34;Howl&#39;s Moving Castle&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-4.title&#34;</span> <span class="p">=</span> <span class="s">&#34;å“ˆå°”çš„ç§»åŠ¨åŸå ¡&#34;</span><span class="p">;</span>
<span class="s">&#34;movie-label-4.title&#34;</span> <span class="p">=</span> <span class="s">&#34;ãƒã‚¦ãƒ«ã®å‹•ãåŸ&#34;</span><span class="p">;</span></code></pre></div></li>
</ul>

<p>è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°ä¸åŒè¯­è¨€ä¸‹ï¼Œç¬¬å››ä¸ªç”µå½±å°±å‡ºç°äº†ï¼</p>

<h3 id="ç¼–è¯‘æ—¶æ›´æ–°">ç¼–è¯‘æ—¶æ›´æ–°</h3>

<p><a href="/2019/02/19/mac_app_international_2/" target="_blank">macOS å¼€å‘ä¹‹ storyboard æˆ– xib æœ¬åœ°åŒ–</a> ä¸­åœ¨å·¥ç¨‹ä¸­åˆ›å»ºäº† build phase è¿è¡Œè„šæœ¬ï¼Œè„šæœ¬ä¸­æ·»åŠ ä»£ç å­—ç¬¦ä¸²æœ¬åœ°åŒ–è¦æ‰§è¡Œçš„å‘½ä»¤å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash"><span class="c1"># Type a script or drag a script file from your workspace to insert its path.</span>
<span class="k">if</span> which bartycrouch &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
    bartycrouch interfaces -p .
    bartycrouch code -p . -l .
    bartycrouch lint -e -d -p .
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&#34;warning: BartyCrouch not installed, download it from https://github.com/Flinesoft/BartyCrouch&#34;</span>
<span class="k">fi</span></code></pre></div>
<p>è‡³æ­¤ï¼Œæ‚¨åº”è¯¥å­¦ä¼šå¦‚ä½•å¯¹ä»£ç ä¸­å­—ç¬¦ä¸²æœ¬åœ°åŒ–äº†å§ï¼</p>

<p>æ­¤éƒ¨åˆ†å®Œæˆåçš„å·¥ç¨‹ä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/InternationalDemo3.zip" target="_blank">InternationalDemo3</a></p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ storyboard æˆ– xib æœ¬åœ°åŒ–</title>
			<link>https://www.smslit.top/2019/02/19/mac_app_international_2/</link>
			<pubDate>Tue, 19 Feb 2019 08:53:54 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/02/19/mac_app_international_2/</guid>
			<description>å¼€å‘äº†ä¸€æ¬¾å¥½ç”¨çš„ macOS app åï¼Œä¸ºäº†è®©æ›´å¤šäººçš„å°åˆ°è‡ªå·± â€œçœŸé¦™â€ çš„ä½œå“ï¼Œapp çš„å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ˜¯æœ‰å¿…è¦çš„ï¼Œapp çš„æœ¬åœ°åŒ–åˆ†ä¸‰éƒ¨æ›²è®²è§£ï¼Œæœ¬æ–‡æ˜¯ç¬¬äºŒéƒ¨ï¼šs</description>
			<content type="html"><![CDATA[

<p>å¼€å‘äº†ä¸€æ¬¾å¥½ç”¨çš„ macOS app åï¼Œä¸ºäº†è®©æ›´å¤šäººçš„å°åˆ°è‡ªå·± â€œçœŸé¦™â€ çš„ä½œå“ï¼Œapp çš„å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ˜¯æœ‰å¿…è¦çš„ï¼Œapp çš„æœ¬åœ°åŒ–åˆ†ä¸‰éƒ¨æ›²è®²è§£ï¼Œæœ¬æ–‡æ˜¯ç¬¬äºŒéƒ¨ï¼šstoryboard æˆ– xib æœ¬åœ°åŒ–ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190219090656.jpg" alt="" /></p>

<p>ç¬¬ä¸€éƒ¨ä¼ é€é—¨ï¼š<a href="/2019/02/18/mac_app_international_1/" target="_blank">macOS å¼€å‘ä¹‹ APP åç§°æœ¬åœ°åŒ–</a></p>

<p>ç¬¬ä¸‰éƒ¨ä¼ é€é—¨ï¼š<a href="/2019/02/21/mac_app_international_3/" target="_blank">macOS å¼€å‘ä¹‹ä»£ç å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–</a></p>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="å‡†å¤‡å·¥ç¨‹">å‡†å¤‡å·¥ç¨‹</h1>

<p>æœ¬æ–‡ç›´æ¥ä½¿ç”¨ä¸Šä¸€ç¯‡æ–‡ç« <a href="/2019/02/18/mac_app_international_1/" target="_blank">macOS å¼€å‘ä¹‹ APP åç§°æœ¬åœ°åŒ–</a>çš„å·¥ç¨‹ï¼Œ<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/InternationalDemo.zip" target="_blank">ç‚¹æˆ‘</a>ä¸‹è½½ï¼</p>

<p>æ‰“å¼€å·¥ç¨‹åï¼Œä¼šçœ‹åˆ° <code>Main.storyboard</code> å·¦ä¾§æœ‰ä¸ªå°ä¸‰è§’ï¼Œç‚¹å¼€å¯ä»¥çœ‹åˆ°ï¼ŒåŒ…å«äº†ç®€ä½“ä¸­æ–‡å’Œæ—¥æ–‡çš„ä¸¤ä¸ª Strings æ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯åœ¨<a href="/2019/02/18/mac_app_international_1/#æ·»åŠ è¯­è¨€æ”¯æŒ" target="_blank">æ·»åŠ è¯­è¨€æ”¯æŒ</a> çš„æ—¶å€™æ·»åŠ ä¸Šçš„ï¼Œç‚¹å‡» <code>Main.storyboard</code> å¯ä»¥åœ¨ Inspector çš„ <code>Localization</code> åˆ†ç»„çœ‹åˆ° English æ²¡æœ‰å‹¾é€‰ï¼Œå‹¾é€‰ English ï¼Œä¼šçœ‹åˆ°æ–°å¢äº†ä¸€ä¸ª English çš„ Strings æ–‡ä»¶ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190219092044.jpg" alt="" /></p>

<p>ä¸Šé¢æåˆ°çš„ String æ–‡ä»¶åŒ…å«äº† storyboard ä¸­æ‰€æœ‰å¯è§æ§ä»¶ä¸­å­—ç¬¦ä¸²å¯¹åº”çš„å†…å®¹å®šä¹‰ï¼ŒApp è¿è¡Œçš„æ—¶å€™ä¼šæ ¹æ®ç³»ç»Ÿè¯­è¨€è¯»å–å¯¹åº”è¯­è¨€çš„å­—ç¬¦ä¸²å†…å®¹ï¼Œä»¥è¾¾åˆ° storyboard ç•Œé¢å…ƒç´ æœ¬åœ°åŒ–æ˜¾ç¤ºçš„æ•ˆæœï¼</p>

<blockquote>
<p>å¦‚æœè¦æ·»åŠ è‡ªå·±å®šä¹‰çš„ xib æ–‡ä»¶ï¼Œä¹Ÿä¼šåƒ storyboard æ–‡ä»¶ä¸€æ ·ï¼Œåœ¨ File Inspector ä¸­ä¼šæœ‰ä¸€ä¸ª Localization çš„åˆ†ç»„ï¼Œå¦‚æœæœ‰ localize&hellip; æŒ‰é’®ï¼Œç‚¹å‡»å®ƒå°±å¯ä»¥æ·»åŠ  xib çš„æ–°çš„è¯­è¨€æ”¯æŒï¼</p>
</blockquote>

<h1 id="ä¿®æ”¹-strings-æ–‡ä»¶">ä¿®æ”¹ Strings æ–‡ä»¶</h1>

<p>æ‰“å¼€ä¸Šé¢æåˆ°çš„ä¸‰ä¸ª Strigns æ–‡ä»¶ï¼š</p>

<ul>
<li>Main.Strings (English)</li>
<li>Main.Strings (Chinese(Simplified))</li>
<li>Main.Strings (Japanese)</li>
</ul>

<p>å¯ä»¥çœ‹åˆ°æ–‡ä»¶ä¸­éƒ½åŒ…å«äº†ç›¸åŒçš„å­—ç¬¦ä¸²é¡¹ï¼Œä¾‹å¦‚å…¶ä¸­çš„çª—å£æ ‡é¢˜é¡¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="cm">/* Class = &#34;NSWindow&#34;; title = &#34;Window&#34;; ObjectID = &#34;IQv-IB-iLA&#34;; */</span>
<span class="s">&#34;IQv-IB-iLA.title&#34;</span> <span class="p">=</span> <span class="s">&#34;Window&#34;</span><span class="p">;</span></code></pre></div>
<ol>
<li>å·¦ä¾§çš„ä»£è¡¨äº†å­—ç¬¦ä¸²æ ‡è¯†ï¼Œå³ä¾§æ˜¯ç›¸å¯¹åº”çš„å­—ç¬¦ä¸²å€¼ï¼Œæˆ‘ä»¬è¦å¯¹åº”è¯­è¨€ä¿®æ”¹çš„å°±æ˜¯æ¯ä¸€é¡¹çš„å³ä¾§å€¼ã€‚</li>
<li>æ¯ä¸€é¡¹åé¢å¿…é¡»æœ‰åŠè§’çš„åˆ†å·</li>

<li><p>å·¦ä¾§æ ‡è¯†ä½¿ç”¨äº†æ§ä»¶çš„ <code>ObjectID</code>ï¼Œä½¿ç”¨ç‚¹è¯­æ³•è¡¨ç¤ºå±æ€§çš„æ–¹å¼æ„æˆå­—ç¬¦ä¸²æ ‡è¯†ï¼Œå…¶ä¸­ <code>ObjectID</code> å¯ä»¥åœ¨æ§ä»¶çš„ Identity Inspector ä¸­æŸ¥çœ‹ï¼Œæ¯”å¦‚é€‰ä¸­ Main.storyboard ä¸­çš„ Window å°† Inspector åˆ‡æ¢åˆ° Identity æ ‡ç­¾é¡µå¯ä»¥åœ¨ Document åˆ†ç»„ä¸­çœ‹åˆ° Object ID æ˜¯ <code>IQv-IB-iLA&quot;</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190219112159.png" alt="" /></p></li>
</ol>

<p>ä¸‹é¢çš„å·¥ä½œå°±æ˜¯è‡ªè¡Œç¿»è¯‘å¹¶ä¿®æ”¹æ¯ä¸€é¡¹å³ä¾§çš„å€¼äº†ï¼Œå¯ä»¥ä½¿ç”¨<a href="http://translate.google.cn/" target="_blank">è°·æ­Œç¿»è¯‘</a>ååŠ©ç¿»è¯‘ã€‚</p>

<p>å°† Main.Strings (Chinese(Simplified)) å’Œ Main.Strings (Japanese) ä¸­çš„é¡¹ä¿®æ”¹å®Œæˆåå°±å¯ä»¥éªŒè¯æ•ˆæœäº†ã€‚</p>

<h1 id="æ›´æ–°-strings-æ–‡ä»¶">æ›´æ–° Strings æ–‡ä»¶</h1>

<p>è®¾è®¡çš„ storyboard å¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼Œæ‰€ä»¥ Strings æ–‡ä»¶ä¹Ÿè¦éšæ—¶æ›´æ–°ã€‚è¿™é‡Œç”¨åˆ°ä¸€ä¸ªè¾…åŠ©å·¥å…·å«åš <strong>bartycrouch</strong>:</p>

<blockquote>
<p>BartyCrouch incrementally updates your Strings files from your Code and from Interface Builder files. &ldquo;Incrementally&rdquo; means that BartyCrouch will by default keep both your already translated values and even your altered comments. Additionally you can also use BartyCrouch for machine translating from one language to 60+ other languages. Using BartyCrouch is as easy as running a few simple commands from the command line what can even be automated using a build script within your project.</p>
</blockquote>

<p><a href="https://github.com/Flinesoft/BartyCrouch" target="_blank">BartyCrouch</a></p>

<p>è¿™ä¸ªå·¥å…·ä¹Ÿèƒ½è°ƒç”¨å¾®è½¯çš„ API ååŠ©ç¿»è¯‘ã€‚</p>

<h2 id="å®‰è£…-bartycrouch">å®‰è£… bartycrouch</h2>

<p>å¯ä»¥ä½¿ç”¨ homebrew å®‰è£…è¿™ä¸ªå·¥å…·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ brew install bartycrouch</code></pre></div>
<p>âš ï¸ï¼š</p>

<p>bartycrouch å·²ç»å‘å¸ƒäº† <strong>4.0.0</strong>ï¼Œä½¿ç”¨æ–¹æ³•ä¸åŒï¼Œè¿™é‡Œå±•ç¤ºçš„æ–¹æ³•åªé€‚ç”¨äº bartycrouch <strong>v3.x.x</strong> ç‰ˆæœ¬ï¼Œåç»­åé‡Œä¼šå‡ºä¸€ç¯‡å…³äº bartycrouch v4.0.0 çš„ä½¿ç”¨æ•™ç¨‹ï¼Œè¯·æŒç»­å…³æ³¨<a href="https://www.smslit.top" target="_blank">åšå®¢</a> å’Œ çŸ¥ä¹ä¸“æ  <a href="https://zhuanlan.zhihu.com/c_1079349488673648640" target="_blank">macOS å¼€å‘</a>ã€‚</p>

<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>

<p>ä¸ºäº†éªŒè¯ä½¿ç”¨ï¼Œè¿™é‡Œåœ¨ view controller ä¸­æ·»åŠ äº†ä¸€ä¸ªæŒ‰é’®å’Œä¸€ä¸ª labelã€‚</p>

<h3 id="æ›´æ–°-interfaces">æ›´æ–° interfaces</h3>

<p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ˜¯ç”¨å…¶ä» storyboard æˆ–è€… xib æ–‡ä»¶æ›´æ–° Strings æ–‡ä»¶çš„åŠŸèƒ½ï¼Œåªéœ€è¦è°ƒç”¨å¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥å·¥ä½œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ bartycrouch interfaces -p InternationalDemo/
â„¹ï¸ BartyCrouch: Successfully updated strings file<span class="o">(</span>s<span class="o">)</span> of Storyboard or XIB file.</code></pre></div>
<p>å…¶ä¸­éœ€è¦ä½¿ç”¨ <code>-p</code> æŒ‡æ˜åŒ…å«å·¥ç¨‹æ–‡ä»¶çš„ç›®å½•ï¼Œå› ä¸ºæ­¤æ—¶å·¥ä½œç›®å½•æ˜¯åœ¨å·¥ç¨‹æ ¹ç›®å½•ä¸‹ï¼Œæ‰€ä»¥è¦æŒ‡å®šçš„ç›®å½•æ˜¯å­˜æ”¾æ–‡ä»¶çš„ <code>InternationalDemo/</code></p>

<p>æ‰§è¡Œäº†ä¸Šé¢çš„å‘½ä»¤ä»¥åï¼ŒæŸ¥çœ‹ä¸‰ä¸ª Strings æ–‡ä»¶ä¸­ç¡®å®æ–°æ·»äº†æŒ‰é’®å’Œ label çš„ç›¸å…³å­—ç¬¦ä¸²ï¼</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="cm">/* Class = &#34;NSButtonCell&#34;; title = &#34;Button&#34;; ObjectID = &#34;0A1-8b-fid&#34;; */</span>
<span class="s">&#34;0A1-8b-fid.title&#34;</span> <span class="p">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span>

<span class="cm">/* Class = &#34;NSTextFieldCell&#34;; title = &#34;Label&#34;; ObjectID = &#34;by2-mL-GsU&#34;; */</span>
<span class="s">&#34;by2-mL-GsU.title&#34;</span> <span class="p">=</span> <span class="s">&#34;&#34;</span><span class="p">;</span></code></pre></div>
<h3 id="æ£€æŸ¥-strings-æ–‡ä»¶">æ£€æŸ¥ Strings æ–‡ä»¶</h3>

<p>bartycrouch çš„å­å‘½ä»¤ lint å¯ä»¥å¸®åŠ©æ£€æŸ¥ï¼š</p>

<ul>
<li>Strings æ–‡ä»¶ä¸­é‡å¤çš„é”®å€¼ï¼Œéœ€è¦æŒ‡å®šå‘½ä»¤å‚æ•° <code>-d</code></li>
<li>æ–‡ä»¶ä¸­å€¼ä¸ºç©ºå­—ç¬¦ä¸²çš„é”®å€¼ï¼Œéœ€è¦æŒ‡å®šå‘½ä»¤å‚æ•° <code>-e</code></li>
</ul>

<p>æ¯”å¦‚æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰ç©ºå€¼çš„é”®</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ bartycrouch lint -e -p InternationalDemo

â„¹ï¸ Found empty value <span class="k">for</span> key <span class="s1">&#39;0A1-8b-fid.title&#39;</span> in file /Users/5km/Documents/workspace/macOS/InternationalDemo/InternationalDemo/zh-Hans.lproj/Main.strings.
â„¹ï¸ Found empty value <span class="k">for</span> key <span class="s1">&#39;by2-mL-GsU.title&#39;</span> in file /Users/5km/Documents/workspace/macOS/InternationalDemo/InternationalDemo/zh-Hans.lproj/Main.strings.
â„¹ï¸ Found empty value <span class="k">for</span> key <span class="s1">&#39;0A1-8b-fid.title&#39;</span> in file /Users/5km/Documents/workspace/macOS/InternationalDemo/InternationalDemo/ja.lproj/Main.strings.
â„¹ï¸ Found empty value <span class="k">for</span> key <span class="s1">&#39;by2-mL-GsU.title&#39;</span> in file /Users/5km/Documents/workspace/macOS/InternationalDemo/InternationalDemo/ja.lproj/Main.strings.
â„¹ï¸ Found empty value <span class="k">for</span> key <span class="s1">&#39;0A1-8b-fid.title&#39;</span> in file /Users/5km/Documents/workspace/macOS/InternationalDemo/InternationalDemo/en.lproj/Main.strings.
â„¹ï¸ Found empty value <span class="k">for</span> key <span class="s1">&#39;by2-mL-GsU.title&#39;</span> in file /Users/5km/Documents/workspace/macOS/InternationalDemo/InternationalDemo/en.lproj/Main.strings.
âŒ Error! <span class="m">6</span> issue<span class="o">(</span>s<span class="o">)</span> found in <span class="m">3</span> file<span class="o">(</span>s<span class="o">)</span>. Executed <span class="m">1</span> checks in <span class="m">6</span> Strings file<span class="o">(</span>s<span class="o">)</span> in total.</code></pre></div>
<p>è¿™å°±æ£€æŸ¥å‡ºåˆšåˆšæ–°åŠ çš„æŒ‰é’®å’Œ label çš„ç›¸å¯¹åº”çš„å­—ç¬¦ä¸²é…ç½®äº†ã€‚</p>

<h3 id="è‡ªåŠ¨æ›´æ–°å’Œæ£€æŸ¥">è‡ªåŠ¨æ›´æ–°å’Œæ£€æŸ¥</h3>

<p>ä¸ºäº†æ›´æ–¹ä¾¿å¿«æ·çš„æ›´æ–°å’Œæ£€æŸ¥ Strings æ–‡ä»¶ï¼Œè¿™é‡Œå¯ä»¥ä¸ºå·¥ç¨‹æ–°å»ºä¸€ä¸ª Build Phaseï¼ŒæŒ‰ç…§ä¸‹å›¾æµç¨‹æ·»åŠ ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190219142234.jpg" alt="" /></p>

<p>æ·»åŠ çš„ shell è„šæœ¬å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell"><span class="c1"># Type a script or drag a script file from your workspace to insert its path.</span>
<span class="k">if</span> which bartycrouch &gt; /dev/null<span class="p">;</span> <span class="k">then</span>
    bartycrouch interfaces -p .
    bartycrouch lint -e -d -p .
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&#34;warning: BartyCrouch not installed, download it from https://github.com/Flinesoft/BartyCrouch&#34;</span>
<span class="k">fi</span></code></pre></div>
<p>è¿è¡Œä¸€ä¸‹å·¥ç¨‹ï¼Œbuild å¤±è´¥ï¼ŒåŸå› æ˜¯ <code>bartycrouch lint</code> å‘½ä»¤æ£€æŸ¥å‡ºäº†æœ‰ç©ºå€¼å­—ç¬¦ä¸²ï¼Œä»¥åå°±æ˜¯æ¯æ¬¡ç¼–è¯‘éƒ½ä¼šæ›´æ–° Strings æ–‡ä»¶ã€‚</p>

<p>å†æŠŠæŒ‰é’®åˆ é™¤è¿è¡Œå·¥ç¨‹ï¼Œæ£€æŸ¥å‡º String æ–‡ä»¶ä¸­åªæœ‰ label ç›¸å…³çš„å­—ç¬¦ä¸²äº†ï¼Œç»™ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«æ›´æ”¹ label æ ‡ç­¾çš„å†…å®¹ã€‚</p>

<ul>
<li><p>Main.strings (English)</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="cm">/* Class = &#34;NSTextFieldCell&#34;; title = &#34;Label&#34;; ObjectID = &#34;by2-mL-GsU&#34;; */</span>
<span class="s">&#34;by2-mL-GsU.title&#34;</span> <span class="p">=</span> <span class="s">&#34;Hello, world!&#34;</span><span class="p">;</span></code></pre></div></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190219143602.png" alt="" /></p>

<ul>
<li><p>Main.strings (Chinese(Simplified))</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="cm">/* Class = &#34;NSTextFieldCell&#34;; title = &#34;Label&#34;; ObjectID = &#34;by2-mL-GsU&#34;; */</span>
<span class="s">&#34;by2-mL-GsU.title&#34;</span> <span class="p">=</span> <span class="s">&#34;ä¸–ç•Œï¼Œä½ å¥½!&#34;</span><span class="p">;</span></code></pre></div></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190219143627.png" alt="" /></p>

<ul>
<li><p>Main.strings (Japanese)</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="cm">/* Class = &#34;NSTextFieldCell&#34;; title = &#34;Label&#34;; ObjectID = &#34;by2-mL-GsU&#34;; */</span>
<span class="s">&#34;by2-mL-GsU.title&#34;</span> <span class="p">=</span> <span class="s">&#34;ã“ã‚“ã«ã¡ã¯ä¸–ç•Œ!&#34;</span><span class="p">;</span></code></pre></div></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190219143636.png" alt="" /></p>

<p>è‡³æ­¤ï¼Œè¿™ä¸€éƒ¨åˆ†å°±è®²å®Œäº†ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼</p>

<p>æ­¤éƒ¨åˆ†å®Œæˆåçš„å·¥ç¨‹ä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/InternationalDemo2.zip" target="_blank">InternationalDemo2</a></p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹ APP åç§°æœ¬åœ°åŒ–</title>
			<link>https://www.smslit.top/2019/02/18/mac_app_international_1/</link>
			<pubDate>Mon, 18 Feb 2019 09:10:02 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/02/18/mac_app_international_1/</guid>
			<description>å¼€å‘äº†ä¸€æ¬¾å¥½ç”¨çš„ macOS app åï¼Œä¸ºäº†è®©æ›´å¤šäººçš„å°åˆ°è‡ªå·± â€œçœŸé¦™â€ çš„ä½œå“ï¼Œapp çš„å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ˜¯æœ‰å¿…è¦çš„ï¼Œapp çš„æœ¬åœ°åŒ–åˆ†ä¸‰éƒ¨æ›²è®²è§£ï¼Œæœ¬æ–‡æ˜¯ç¬¬ä¸€éƒ¨ï¼ša</description>
			<content type="html"><![CDATA[

<p>å¼€å‘äº†ä¸€æ¬¾å¥½ç”¨çš„ macOS app åï¼Œä¸ºäº†è®©æ›´å¤šäººçš„å°åˆ°è‡ªå·± â€œçœŸé¦™â€ çš„ä½œå“ï¼Œapp çš„å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ˜¯æœ‰å¿…è¦çš„ï¼Œapp çš„æœ¬åœ°åŒ–åˆ†ä¸‰éƒ¨æ›²è®²è§£ï¼Œæœ¬æ–‡æ˜¯ç¬¬ä¸€éƒ¨ï¼šapp åç§°çš„æœ¬åœ°åŒ–ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218102516.jpg" alt="" /></p>

<p>ç¬¬äºŒéƒ¨ä¼ é€é—¨ï¼š<a href="/2019/02/19/mac_app_international_2/" target="_blank">macOS å¼€å‘ä¹‹ storyboard æˆ– xib æœ¬åœ°åŒ–</a></p>

<p>ç¬¬ä¸‰éƒ¨ä¼ é€é—¨ï¼š<a href="/2019/02/21/mac_app_international_3/" target="_blank">macOS å¼€å‘ä¹‹ä»£ç å­—ç¬¦ä¸²çš„æœ¬åœ°åŒ–</a></p>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="æ–°å»ºä¸€ä¸ªç©ºçš„å·¥ç¨‹">æ–°å»ºä¸€ä¸ªç©ºçš„å·¥ç¨‹</h1>

<p>ä¸ºäº†æ›´å¥½åœ°è®²è¿°æœ¬åœ°åŒ– APP åç§°ï¼Œä»¥ä¸€ä¸ª Cocoa App æ–°å·¥ç¨‹ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p>

<ol>
<li><p>æ‰“å¼€ Xcodeï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Shift</code> + <code>Command</code> + <code>N</code> å°±ä¼šè§¦å‘æ–°å»ºå·¥ç¨‹çš„å¯¼èˆªçª—å£</p></li>

<li><p>é€‰æ‹© macOS -&gt; Cocoa Appï¼Œç‚¹å‡» <code>Next</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190217102918.png" alt="" /></p></li>

<li><p>å·¥ç¨‹å–åä¸º InternationalDemoï¼Œå‹¾é€‰ <code>Use Storyboards</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218103302.jpg" alt="" /></p></li>
</ol>

<h1 id="æ·»åŠ è¯­è¨€æ”¯æŒ">æ·»åŠ è¯­è¨€æ”¯æŒ</h1>

<p>å·¥ç¨‹çš„å›½é™…åŒ–å’Œæœ¬åœ°åŒ–ä¾æ‰˜äºå„å›½è¯­è¨€çš„æ”¯æŒï¼Œæ‰€ä»¥éœ€è¦å…ˆä¸ºå·¥ç¨‹æ·»åŠ è¯­è¨€æ”¯æŒã€‚</p>

<ol>
<li>Xcode å·¦ä¾§å·¥ç¨‹å¯¼èˆªæ ï¼Œç‚¹å‡»å·¥ç¨‹ï¼Œä¼šçœ‹åˆ°å³ä¾§å·¥ç¨‹é…ç½®ä¿¡æ¯ï¼Œç‚¹å‡» <strong>PROJECT</strong> ä¸‹çš„ <code>InternationalDemo</code></li>

<li><p>åœ¨å‡ºç°çš„é…ç½®é¡¹ä¸­æœ‰ <code>Localizations</code>ï¼Œå¯ä»¥çœ‹åˆ°é»˜è®¤æ˜¯æœ‰ä¸€ä¸ª <code>English</code> çš„ï¼Œç‚¹å‡» <code>+</code> å·ä¼šå‡ºç°é€‰æ‹©è¯­è¨€çš„ä¸‹æ‹‰èœå•ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218110626.png" alt="" /></p></li>

<li><p>é€‰æ‹© <code>Chinese(Simplified)(zh-Hans)</code> å³å¯å‡ºç°æ·»åŠ ç®€ä½“ä¸­æ–‡çš„çª—å£ï¼Œç‚¹å‡» <code>Finish</code> å³å¯å®Œæˆæ·»åŠ ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218110922.png" alt="" /></p></li>

<li><p>ä¸ºäº†æ›´å¥½çš„æ¼”ç¤ºï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ“ä½œå†æ·»åŠ  <code>Janpanese(ja)</code> çš„æ”¯æŒï¼Œæœ€ç»ˆ <code>Localizations</code> è¯­è¨€å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218111319.png" alt="" /></p></li>
</ol>

<h1 id="æ·»åŠ ç›¸å…³æœ¬åœ°åŒ–æ–‡ä»¶">æ·»åŠ ç›¸å…³æœ¬åœ°åŒ–æ–‡ä»¶</h1>

<p>ä¸ºäº†å®ç° macOS ç³»ç»Ÿä¸‹ Dock æ ã€å…¨å±€èœå•æ å’Œ Finder ä¸­ app çš„åç§°å‡å¯ä»¥è·Ÿéšç³»ç»Ÿè¯­è¨€çš„è®¾ç½®æ˜¾ç¤ºå¯¹åº”è¯­è¨€çš„åç§°ï¼Œéœ€è¦åœ¨å·¥ç¨‹ä¸­æ·»åŠ ä¸€ä¸ªåä¸º <code>InfoPlist.strings</code> çš„æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæœ¬åœ°åŒ–ï¼</p>

<h2 id="æ·»åŠ -infoplist-strings">æ·»åŠ  <code>InfoPlist.strings</code></h2>

<ol>
<li><p>æŒ‰ä¸‹ç»„åˆé”® <code>Command</code> + <code>n</code> è°ƒå‡ºæ–°å»ºæ–‡ä»¶çš„å¯¼èˆªçª—å£ï¼Œæ‰¾åˆ° <code>macOS</code> -&gt; <code>Resources</code> -&gt; <code>Strings File</code>ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218112203.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <code>Next</code>ï¼Œæ›´æ”¹åç§°ä¸º <code>InfoPlist.strings</code>ï¼Œ<code>Group</code> é€‰æ‹© <code>InternationalDemo</code> æ–‡ä»¶å¤¹ï¼Œå…¶å®ƒé»˜è®¤ï¼Œç‚¹å‡» <code>Create</code> å®Œæˆæ–‡ä»¶çš„æ·»åŠ ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218112829.png" alt="" /></p></li>
</ol>

<h2 id="infoplist-strings-æ·»åŠ æœ¬åœ°åŒ–æ”¯æŒ"><code>InfoPlist.strings</code> æ·»åŠ æœ¬åœ°åŒ–æ”¯æŒ</h2>

<ol>
<li><p>é€‰ä¸­å¯¼èˆªæ ä¸­çš„ <code>InfoPlist.strings</code> ï¼ŒæŒ‰ä¸‹ç»„åˆé”® <code>Option</code> + <code>Command</code> + <code>1</code> å°±ä¼šæ˜¾ç¤º <code>InfoPlist.strings</code> çš„ Inspector</p></li>

<li><p>ä¼šçœ‹åˆ°æœ‰ä¸€é¡¹æ˜¯ <code>Localizations</code> å…¶ä¸­æœ‰ä¸ª <code>Localize...</code> æŒ‰é’®ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218113743.png" alt="" /></p></li>

<li><p>ç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œå…¶ä¸­æœ‰ä¸ªä¸‹æ‹‰èœå•æ§ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸Šé¢æ·»åŠ çš„ä¸‰ä¸ªè¯­è¨€æ”¯æŒï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218114200.png" alt="" /></p></li>

<li><p>é€‰æ‹© <code>English</code> é€‰é¡¹ï¼Œç‚¹å‡» <code>Localize</code> å°±ä¼šå‘ç° <code>InfoPlist.strings</code> Inspector ä¸­çš„ <code>Localizations</code> åˆ†ç»„å˜æˆäº†ä¸‰ä¸ªå‹¾é€‰æ¡†ï¼Œå…¶ä¸­ <code>English</code> æ˜¯å‹¾é€‰çš„ï¼Œè¿™é‡Œä¹ŸæŠŠ Chinese å’Œ Japanese å‹¾é€‰ä¸Šï¼Œæ­¤æ—¶ä½ ä¼šå‘ç° Xcode å·¦ä¾§å·¥ç¨‹å¯¼èˆªæ  <code>InfoPlist.strings</code> å·¦ä¾§å‡ºç°äº†ä¸€ä¸ªå°ä¸‰è§’ï¼Œç‚¹å¼€å°±ä¼šå‘ç°å…¶å˜æˆäº†ä¸ä¸‰ç§è¯­è¨€å¯¹åº”çš„ä¸‰ä¸ª Strings æ–‡ä»¶ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218114842.png" alt="" /></p></li>
</ol>

<h1 id="æ·»åŠ -app-åç§°é…ç½®">æ·»åŠ  App åç§°é…ç½®</h1>

<h2 id="èœå•æ -app-åç§°æœ¬åœ°åŒ–">èœå•æ  App åç§°æœ¬åœ°åŒ–</h2>

<p>è¦å®ç°èœå•æ  App åç§°æœ¬åœ°åŒ–éœ€è¦åœ¨ä¸Šé¢æ·»åŠ çš„ä¸‰ä¸ªæ–‡ä»¶ä¸­æ·»åŠ  <code>CFBundleName</code> å­—ç¬¦ä¸²ã€‚</p>

<ul>
<li><p><code>InfoPlist.strings (English)</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">CFBundleName</span> <span class="p">=</span> <span class="s">&#34;International Demo&#34;</span><span class="p">;</span></code></pre></div></li>

<li><p><code>InfoPlist.strings (Chinese(Simplified))</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">CFBundleName</span> <span class="p">=</span> <span class="s">&#34;å›½é™…åŒ–æ¼”ç¤º&#34;</span><span class="p">;</span></code></pre></div></li>

<li><p><code>InfoPlist.strings (Japanese)</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">CFBundleName</span> <span class="p">=</span> <span class="s">&#34;å›½éš›ãƒ‡ãƒ¢&#34;</span><span class="p">;</span></code></pre></div></li>
</ul>

<blockquote>
<p>æ›´æ”¹ç³»ç»Ÿè¯­è¨€è®¾ç½®ï¼Œå¯ä»¥æŸ¥çœ‹ä¸åŒè¯­è¨€è®¾ç½®ä¸‹çš„è¿è¡Œæ•ˆæœï¼Œåœ¨ç³»ç»Ÿè¯­è¨€è®¾ç½®ä¸­æ›´æ”¹äº†è¯­è¨€æ˜¯å¤§éƒ¨åˆ†ç”Ÿæ•ˆçš„ï¼Œä¸è¦å…³é—­è®¾ç½®çª—å£ï¼Œå¦åˆ™å…³é—­çš„è¯ä¼šæç¤ºé‡å¯ï¼Œå„ç±»è¯­è¨€è®¾ç½®æ£€æŸ¥ä¹‹ååœ¨æ”¹å›åŸæ¥çš„è¯­è¨€å³å¯!</p>
</blockquote>

<ul>
<li><p>è‹±æ–‡:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218121003.png" alt="" /></p></li>

<li><p>ç®€ä½“ä¸­æ–‡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218121058.png" alt="" /></p></li>

<li><p>æ—¥æ–‡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218121128.png" alt="" /></p></li>
</ul>

<h2 id="dock-æ å’Œ-finder-ä¸­-app-åç§°æœ¬åœ°åŒ–">Dock æ å’Œ Finder ä¸­ App åç§°æœ¬åœ°åŒ–</h2>

<p>å¦‚ä¸Šåœ¨ä¸‰ä¸ªæ–‡ä»¶ä¸­æ·»åŠ  <code>CFBundleDisplayName</code> å­—ç¬¦ä¸²ã€‚</p>

<ul>
<li><p><code>InfoPlist.strings (English)</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">CFBundleDisplayName</span> <span class="p">=</span> <span class="s">&#34;International Demo&#34;</span><span class="p">;</span></code></pre></div></li>

<li><p><code>InfoPlist.strings (Chinese(Simplified))</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">CFBundleDisplayName</span> <span class="p">=</span> <span class="s">&#34;å›½é™…åŒ–æ¼”ç¤º&#34;</span><span class="p">;</span></code></pre></div></li>

<li><p><code>InfoPlist.strings (Japanese)</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">CFBundleDisplayName</span> <span class="p">=</span> <span class="s">&#34;å›½éš›ãƒ‡ãƒ¢&#34;</span><span class="p">;</span></code></pre></div></li>
</ul>

<p>è¿˜å·®ä¸€æ­¥ï¼Œéœ€è¦åœ¨å·¥ç¨‹çš„ Info é…ç½®ä¸­æ·»åŠ  <code>Bundle display name</code> é¡¹ï¼š</p>

<ol>
<li>æ‰“å¼€ <code>Info.plist</code> æ–‡ä»¶</li>

<li><p>åœ¨ <code>Bundle name</code> ä¸‹æ·»åŠ  <code>Bundle display name</code> ï¼Œå€¼è®¾ç½®ä¸º <code>$(PRODUCT_NAME)</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190218124130.png" alt="" /></p></li>
</ol>

<p>å¦‚æœè¦æ£€éªŒæ•ˆæœçš„è¯ï¼Œæ›´æ”¹ç³»ç»Ÿè¯­è¨€è®¾ç½®åéœ€è¦é‡å¯æ‰èƒ½çœ‹åˆ° Dock æ å’Œ Finder ä¸­ App åç§°çš„æœ¬åœ°åŒ–é€‚åº”ã€‚</p>

<p>è‡³æ­¤ App åç§°çš„æœ¬åœ°åŒ–å°±å®ç°äº†ï¼</p>

<p>æœ¬ä¾‹ç¨‹å¯ä»è¿™é‡Œä¸‹è½½ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/InternationalDemo.zip" target="_blank">InternationalDemo</a></p>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¸­å®ç° APP çš„è‡ªé‡å¯</title>
			<link>https://www.smslit.top/2019/02/15/mac_app_restart/</link>
			<pubDate>Fri, 15 Feb 2019 13:10:30 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/02/15/mac_app_restart/</guid>
			<description>åœ¨æ—¥å¸¸ä½¿ç”¨æŸäº› app æ—¶ï¼Œæ›´æ”¹è¯­è¨€è®¾ç½®å app ä¼šæç¤ºâ€œè½¯ä»¶è¯­è¨€è®¾ç½®åœ¨é‡å¯åä¼šç”Ÿæ•ˆâ€ï¼Œæœ‰çš„è½¯ä»¶ä¹Ÿä¼šæç¤ºæ˜¯å¦ç«‹å³é‡å¯ï¼Œè¿™è¯´æ˜æˆ‘ä»¬èƒ½å®ç° app çš„è‡ªé‡å¯ï¼Œå¯¹å§ï¼é‚£</description>
			<content type="html"><![CDATA[

<p>åœ¨æ—¥å¸¸ä½¿ç”¨æŸäº› app æ—¶ï¼Œæ›´æ”¹è¯­è¨€è®¾ç½®å app ä¼šæç¤ºâ€œè½¯ä»¶è¯­è¨€è®¾ç½®åœ¨é‡å¯åä¼šç”Ÿæ•ˆâ€ï¼Œæœ‰çš„è½¯ä»¶ä¹Ÿä¼šæç¤ºæ˜¯å¦ç«‹å³é‡å¯ï¼Œè¿™è¯´æ˜æˆ‘ä»¬èƒ½å®ç° app çš„è‡ªé‡å¯ï¼Œå¯¹å§ï¼é‚£ä¹ˆæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡ä»£ç å®ç° app çš„è‡ªé‡å¯ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190217101720.jpg" alt="" /></p>

<h1 id="å®ç°å¹³å°">å®ç°å¹³å°</h1>

<ul>
<li>macOS 10.14.3</li>
<li>swift 4.2.1</li>
<li>xcode 10.1</li>
</ul>

<h1 id="æ–°å»º-cocoa-app-å·¥ç¨‹">æ–°å»º Cocoa App å·¥ç¨‹</h1>

<p>è¿™é‡Œä»¥ä¸€ä¸ªæ–°çš„ç©ºå·¥ç¨‹ä¸ºä¾‹ï¼Œæ‰€ä»¥é¦–å…ˆè¦æ–°å»ºä¸€ä¸ª <strong>Cocoa App</strong> å·¥ç¨‹ã€‚ç®€å•è¯´ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>

<ol>
<li><p>æ‰“å¼€ Xcodeï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>Shift</code> + <code>Command</code> + <code>N</code> å°±ä¼šè§¦å‘æ–°å»ºå·¥ç¨‹çš„å¯¼èˆªçª—å£</p></li>

<li><p>é€‰æ‹© macOS -&gt; Cocoa Appï¼Œç‚¹å‡» <code>Next</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190217102918.png" alt="" /></p></li>

<li><p>å·¥ç¨‹å–åä¸º RelaunchDemoï¼Œå‹¾é€‰ <code>Use Storyboards</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190217110149.png" alt="" /></p></li>
</ol>

<h1 id="æ·»åŠ é‡å¯æ¥å£">æ·»åŠ é‡å¯æ¥å£</h1>

<p>é‡å¯çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ app é€€å‡ºå‰ä½¿ç”¨æ–¹æ³• <code>NSWorkspace.shared.launchApplication</code> å¼‚æ­¥æ–°å¯åŠ¨ä¸€ä¸ª App å®ä¾‹ã€‚</p>

<h2 id="å…¬å…±å˜é‡æ ‡è®°æ˜¯å¦é‡å¯">å…¬å…±å˜é‡æ ‡è®°æ˜¯å¦é‡å¯</h2>

<p>ä¸ºäº†ä¿è¯é‡å¯æ“ä½œå’Œé€€å‡ºçš„åŒºåˆ†ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå…¬å…±å˜é‡æ¥æ ‡è®° app æ˜¯å¦éœ€è¦é‡å¯ï¼Œå¦‚æœéœ€è¦é‡å¯å†è¿›è¡Œé€€å‡ºå‰çš„ç‰¹æ®Šæ“ä½œã€‚å°†è¿™ä¸€å˜é‡å®šä¹‰åœ¨ <code>AppDelegate.swift</code> ä¸­ï¼Œè¿™é‡Œæ³¨æ„çš„æ˜¯è¦å®šä¹‰åœ¨ <code>AppDelegate</code> ç±»å¤–ï¼Œæ”¾åœ¨æ–‡ä»¶ä»£ç  <code>import Cocoa</code> åå³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">var</span> <span class="nv">toRelaunch</span> <span class="p">=</span> <span class="kc">false</span></code></pre></div>
<p>åªæ˜¯æ ‡è®°ï¼Œæ‰€ä»¥å®šä¹‰ä¸º <code>Bool</code> ç±»å‹ï¼Œåˆå§‹åŒ–é»˜è®¤å€¼ä¸º <code>false</code>ã€‚</p>

<h2 id="app-é€€å‡ºå‰çš„ç‰¹æ®Šå¤„ç†">App é€€å‡ºå‰çš„ç‰¹æ®Šå¤„ç†</h2>

<p>app é€€å‡ºå‰çš„å¤„ç†å¯ä»¥åœ¨æ–‡ä»¶ <code>AppDelegate.swift</code> çš„ <code>AppDelegate</code> ç±»çš„ <code>applicationWillTerminate</code> æ–¹æ³•ä¸­å®ç°ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="k">if</span> <span class="p">(</span><span class="n">toRelaunch</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSWorkspace</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">launchApplication</span><span class="p">(</span><span class="n">withBundleIdentifier</span><span class="p">:</span> <span class="s">&#34;top.smslit.RelaunchDemo&#34;</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="p">[</span><span class="n">NSWorkspace</span><span class="p">.</span><span class="n">LaunchOptions</span><span class="p">.</span><span class="n">async</span><span class="p">,</span>  <span class="n">NSWorkspace</span><span class="p">.</span><span class="n">LaunchOptions</span><span class="p">.</span><span class="n">newInstance</span><span class="p">],</span> <span class="n">additionalEventParamDescriptor</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">launchIdentifier</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ <code>withBundleIdentifier</code> è¦æ›´æ”¹ä¸ºæ‚¨çš„ App ç›¸åº”çš„ <code>Bundle Identifier</code> ï¼Œè¿™ä¸ªå¯ä»¥åœ¨å·¥ç¨‹é…ç½®ä¿¡æ¯çš„ <code>General</code> ä¸­æŸ¥çœ‹ã€‚ç¨‹åºå¯åŠ¨é€‰é¡¹ä½¿ç”¨çš„æ˜¯ï¼š</p>

<ul>
<li><code>NSWorkspace.LaunchOptions.async</code>ï¼šå¯åŠ¨ app å¹¶å¼‚æ­¥è¿”å›ç»“æœ</li>
<li><code>NSWorkspace.LaunchOptions.newInstance</code>ï¼šç”Ÿæˆæ–°çš„å®ä¾‹å¯¹è±¡</li>
</ul>

<h2 id="æ·»åŠ -app-é‡å¯æ¥å£">æ·»åŠ  APP é‡å¯æ¥å£</h2>

<p>é‡å¯çš„å®ç°å°±æ˜¯å°† <code>toRelaunch</code> è®¾ç½®ä¸º <code>true</code> åé€€å‡º Appï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="c1">// é‡å¯ App</span>
<span class="kd">func</span> <span class="nf">relaunchApp</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">toRelaunch</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="n">NSApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">terminate</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>å…¶å®ï¼Œåªè¦æ˜¯åœ¨ç¨‹åºé€€å‡ºå‰å°† <code>toRelaunch</code> ç½®ä¸º <code>true</code> ï¼ŒAppæ­£å¸¸é€€å‡ºçš„è¯å°±ä¼šé‡å¯ APPã€‚</p>

<h1 id="ä½¿ç”¨æŒ‰é’®éªŒè¯æ•ˆæœ">ä½¿ç”¨æŒ‰é’®éªŒè¯æ•ˆæœ</h1>

<p>ä¸ºäº†çœ‹ä¸€ä¸‹é‡å¯å®ç°çš„æ•ˆæœï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»è°ƒç”¨åˆšåˆšå®ç°çš„é‡å¯æ–¹æ³• <code>relaunchApp</code> å°±å¯ä»¥çœ‹åˆ°æˆæœï¼</p>

<h2 id="æ·»åŠ æŒ‰é’®">æ·»åŠ æŒ‰é’®</h2>

<p>æ‰“å¼€ <code>Main.storyboard</code>ï¼ŒæŒ‰ä¸‹ <code>Shift</code> + <code>Command</code> + <code>l</code> ç»„åˆé”®å°±ä¼šæ‰“å¼€æ§ä»¶åº“é€‰æ‹©å™¨ï¼Œæœç´¢æ¡†æœç´¢ buttonï¼Œæ‰¾åˆ° <code>Push Button</code>ï¼Œç‚¹å‡»æ‹–å…¥ <code>View Controller</code> çš„ä¸­å¤®ï¼Œè¿™æ ·å°±å®Œæˆäº†æŒ‰é’®çš„æ·»åŠ ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190217111640.png" alt="" /></p>

<h2 id="ç»‘å®š-action">ç»‘å®š Action</h2>

<p>ä¸‹ä¸€æ­¥ç»‘å®š Action å®ç°ç‚¹å‡»è¡Œä¸ºã€‚</p>

<ol>
<li>ç‚¹å‡» <code>View Controller</code> ï¼Œç„¶åæŒ‰ä¸‹ç»„åˆé”® <code>Option</code> + <code>Command</code> + <code>å›è½¦</code> å°±ä¼šè°ƒå‡ºè¾…åŠ©ç¼–è¾‘å™¨</li>
<li>æŒ‰ä½ <code>Ctrl</code> é”®çš„åŒæ—¶ï¼Œé¼ æ ‡å·¦é”®ç‚¹ä¸­æŒ‰é’®ä¸æ”¾ï¼Œæ‹–åŠ¨è‡³æ‰“å¼€çš„è¾…åŠ©ç¼–è¾‘å™¨ä¸­çš„ <code>View Controller</code> ç±»ä¸­ï¼Œå‡ºç° <code>Insert Action or Outlet</code> æç¤ºçš„æ—¶å€™æ¾æ‰‹ï¼Œå‡ºç°å¼¹çª—</li>
<li>åœ¨å¼¹çª—ä¸­é€‰æ‹© <code>Action</code> ï¼Œname å–ä¸º <code>toRelaunchApp</code>ï¼Œç‚¹å‡» connect å°±ä¼šåœ¨ <code>View Controller</code> ç±»ä¸­æ·»åŠ æ–¹æ³• <code>toRelaunchApp</code></li>
<li>åœ¨æ–¹æ³•ä¸­è°ƒç”¨ <code>relaunchApp</code> æ¥å£å³å¯å®ŒæˆæŒ‰é’®å¯¹åº”çš„ Action</li>
</ol>

<p>å…·ä½“æ“ä½œå‚è€ƒä¸‹é¢è§†é¢‘ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/appRelaunchAction.mp4" controls="controls" width="960"></video>

<h2 id="æŸ¥çœ‹æ•ˆæœ">æŸ¥çœ‹æ•ˆæœ</h2>

<p>ç‚¹å‡» Xcode å·¦ä¸Šè§’çš„è¿è¡ŒæŒ‰é’®æˆ–æŒ‰ä¸‹ç»„åˆé”® <code>Command</code> + <code>r</code> å°±ä¼šå¯åŠ¨ Appï¼Œåœ¨å‡ºç°çš„çª—å£ä¸­å°±ä¼šçœ‹åˆ°æˆ‘ä»¬æ·»åŠ çš„æŒ‰é’®ï¼Œç‚¹å‡»å®ƒå°±ä¼šå‘ç° App è¿›è¡Œäº†é‡å¯ï¼Œå¤§åŠŸå‘Šæˆï¼</p>

<p>ä¸‹è½½æ­¤ Demo: <a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/RelaunchDemo.zip" target="_blank">RelaunchDemo</a></p>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>

<ul>
<li><a href="https://blog.csdn.net/shagru/article/details/9770047" target="_blank">Cocoa æ€æ ·é‡æ–°å¯åŠ¨app (application relaunching)</a></li>
<li><a href="https://developer.apple.com/documentation/appkit/nsworkspace/1533335-launchapplication" target="_blank">launchApplication(withBundleIdentifier:options:additionalEventParamDescriptor:launchIdentifier:)</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>macOS å¼€å‘ä¹‹å®ç° HTTP çš„ GET å’Œ POST è¯·æ±‚</title>
			<link>https://www.smslit.top/2019/01/26/get_post_cocoa/</link>
			<pubDate>Sat, 26 Jan 2019 15:10:40 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/01/26/get_post_cocoa/</guid>
			<description>åœ¨ macOS å¼€å‘è¿‡ç¨‹ä¸­ä¼šç»å¸¸ç”¨åˆ°å¤–éƒ¨æœåŠ¡ï¼Œé€šå¸¸æ˜¯é€šè¿‡ HTTP çš„ GET å’Œ POST è¯·æ±‚è°ƒç”¨å®ƒä»¬çš„ API è·å¾—ç›®æ ‡æ•°æ®ï¼Œæœ¬ç¯‡æ–‡ç« å°±è¯´ä¸€ä¸‹å¦‚ä½•åœ¨ macOS å¼€å‘ä¸­å®ç° GET å’Œ POST è¯·æ±‚ã€‚ å¹³å° å› ä¸º swift</description>
			<content type="html"><![CDATA[

<p>åœ¨ macOS å¼€å‘è¿‡ç¨‹ä¸­ä¼šç»å¸¸ç”¨åˆ°å¤–éƒ¨æœåŠ¡ï¼Œé€šå¸¸æ˜¯é€šè¿‡ HTTP çš„ GET å’Œ POST è¯·æ±‚è°ƒç”¨å®ƒä»¬çš„ API è·å¾—ç›®æ ‡æ•°æ®ï¼Œæœ¬ç¯‡æ–‡ç« å°±è¯´ä¸€ä¸‹å¦‚ä½•åœ¨ macOS å¼€å‘ä¸­å®ç° GET å’Œ POST è¯·æ±‚ã€‚</p>

<h1 id="å¹³å°">å¹³å°</h1>

<p>å› ä¸º swift è¯­è¨€åœ¨å‘å±•æœŸï¼Œæ–°ç‰ˆæœ¬å¯èƒ½ä¼šæœ‰å†™å˜åŒ–ï¼Œä½†æ˜¯ä½¿ç”¨æ–¹æ³•åº”è¯¥ä¸ä¼šå¤§å˜ï¼Œä¸ºäº†åŠ ä»¥æ³¨æ„ï¼Œè¿™é‡Œåˆ—å‡ºå†™æœ¬æ–‡æ—¶ä½œè€…æµ‹è¯•ä»£ç çš„å¹³å°æƒ…å†µã€‚</p>

<ul>
<li>macOS 10.14.3</li>
<li>xcode 10.1</li>
<li>swift 4.2.1</li>
</ul>

<h1 id="ç½‘ç»œè¯·æ±‚">ç½‘ç»œè¯·æ±‚</h1>

<p>æœ¬æ–‡è¦è®²çš„æ˜¯ä½¿ç”¨ swift çš„ <strong>urlSession</strong> å‘é€ GET å’Œ POST è¯·æ±‚ã€‚å…ˆè®²ä¸€ä¸‹ä¸€èˆ¬çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸ºäº†æ›´æ¸…æ¥šä¸€ç‚¹ï¼Œè¿™é‡Œå…ˆç›´æ¥ç²˜ä¸Šä»£ç ã€‚</p>

<h2 id="get-è¯·æ±‚">GET è¯·æ±‚</h2>

<p>å…ˆä¸Šä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">let</span> <span class="nv">session</span> <span class="p">=</span> <span class="n">URLSession</span><span class="p">(</span><span class="n">configuration</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">url</span> <span class="p">=</span> <span class="s">&#34;http://127.0.0.1/api/&#34;</span>
<span class="kd">var</span> <span class="nv">request</span> <span class="p">=</span> <span class="n">URLRequest</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">task</span> <span class="p">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">request</span><span class="p">)</span> <span class="p">{(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">r</span> <span class="p">=</span> <span class="k">try</span> <span class="n">JSONSerialization</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">data</span><span class="p">!,</span> <span class="n">options</span><span class="p">:</span> <span class="p">[])</span> <span class="k">as</span><span class="p">!</span> <span class="n">NSDictionary</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨&#34;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">task</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span></code></pre></div>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç½‘ç»œä¼šè¯</li>
<li>åˆ›å»ºç½‘ç»œè¯·æ±‚ä½“ï¼Œé»˜è®¤å°±æ˜¯ GET è¯·æ±‚ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨ url åˆ›å»ºè¯·æ±‚å³å¯</li>
<li>åˆ©ç”¨ä¼šè¯åˆ›å»ºä¸€ä¸ªæ•°æ®ä»»åŠ¡ï¼Œåœ¨ä»»åŠ¡åˆ›å»ºä¸­å®ç°ç›¸åº”å¤„ç†ï¼Œä»£ç ä¸­æ˜¯å°†æ”¶åˆ°çš„å“åº”æ•°æ®è½¬æ¢ä¸ºå­—å…¸çš„å¤„ç†ï¼š

<ul>
<li><strong>data</strong> æ˜¯è¯·æ±‚æˆåŠŸåæ”¶åˆ°çš„å“åº”æ•°æ®</li>
<li><strong>response</strong> æ˜¯å“åº”ä½“å†…å®¹</li>
<li><strong>error</strong> æ˜¯ç½‘ç»œè¯·æ±‚ä¸­çš„é”™è¯¯ä¿¡æ¯</li>
</ul></li>
<li>æœ€åæ‰§è¡Œåˆ›å»ºçš„æ•°æ®ä»»åŠ¡</li>
</ol>

<p>å…¶ä¸­ <code>JSONSerialization.jsonObject</code> æ˜¯è§£æ json å­—ç¬¦ä¸²ä¸ºå­—å…¸æ•°æ®çš„æ–¹æ³•ã€‚</p>

<p>URLSession å…·æœ‰å•ä¾‹ <code>shared</code> ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä½¿ç”¨å•ä¾‹ç®€åŒ–æ“ä½œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">let</span> <span class="nv">url</span> <span class="p">=</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s">&#34;http://127.0.0.1/api/&#34;</span><span class="p">)</span>
<span class="n">URLSession</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="p">{</span> <span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="kd">let</span> <span class="nv">data</span> <span class="p">=</span> <span class="n">data</span> <span class="k">else</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">error</span><span class="p">?.</span><span class="n">localizedDescription</span> <span class="p">??</span> <span class="s">&#34;Unkown Error!&#34;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
    <span class="bp">print</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="n">encoding</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">))</span>
<span class="p">}.</span><span class="n">resume</span><span class="p">()</span></code></pre></div>
<p>ä¸‹é¢çš„æ‰€æœ‰è¯·æ±‚å‡å¯ä»¥ä½¿ç”¨ <code>URLSession</code> çš„å•ä¾‹ <code>shared</code> å®ç°ï¼Œä¸‹é¢å°±ä¸ä¸€ä¸€èµ˜è¿°ï¼</p>

<h2 id="post-è¯·æ±‚">POST è¯·æ±‚</h2>

<p>åŸºæœ¬æ­¥éª¤ç±»ä¼¼äº GET è¯·æ±‚ï¼Œåªæ˜¯åœ¨è¯·æ±‚ä½“ä¸Šçš„é…ç½®æœ‰æ‰€ä¸åŒï¼ŒåŸºæœ¬ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">let</span> <span class="nv">session</span> <span class="p">=</span> <span class="n">URLSession</span><span class="p">(</span><span class="n">configuration</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">url</span> <span class="p">=</span> <span class="s">&#34;http://127.0.0.1/api/&#34;</span>
<span class="kd">var</span> <span class="nv">request</span> <span class="p">=</span> <span class="n">URLRequest</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
<span class="n">request</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="s">&#34;application/x-www-form-urlencoded&#34;</span><span class="p">,</span> <span class="n">forHTTPHeaderField</span><span class="p">:</span> <span class="s">&#34;Content-Type&#34;</span><span class="p">)</span>
<span class="n">request</span><span class="p">.</span><span class="n">httpMethod</span> <span class="p">=</span> <span class="s">&#34;POST&#34;</span>
<span class="kd">let</span> <span class="nv">postData</span> <span class="p">=</span> <span class="p">[</span><span class="s">&#34;username&#34;</span><span class="p">:</span><span class="s">&#34;xxx&#34;</span><span class="p">,</span><span class="s">&#34;password&#34;</span><span class="p">:</span><span class="s">&#34;123456&#34;</span><span class="p">]</span>
<span class="kd">let</span> <span class="nv">postString</span> <span class="p">=</span> <span class="n">postData</span><span class="p">.</span><span class="n">compactMap</span><span class="p">({</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">String</span> <span class="k">in</span>
    <span class="k">return</span> <span class="s">&#34;</span><span class="si">\(</span><span class="n">key</span><span class="si">)</span><span class="s">=</span><span class="si">\(</span><span class="n">value</span><span class="si">)</span><span class="s">&#34;</span>
<span class="p">}).</span><span class="n">joined</span><span class="p">(</span><span class="n">separator</span><span class="p">:</span> <span class="s">&#34;&amp;&#34;</span><span class="p">)</span>
<span class="n">request</span><span class="p">.</span><span class="n">httpBody</span> <span class="p">=</span> <span class="n">postString</span><span class="p">.</span><span class="n">data</span><span class="p">(</span><span class="n">using</span><span class="p">:</span> <span class="p">.</span><span class="n">utf8</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">task</span> <span class="p">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">request</span><span class="p">)</span> <span class="p">{(</span><span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">r</span> <span class="p">=</span> <span class="k">try</span> <span class="n">JSONSerialization</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">data</span><span class="p">!,</span> <span class="n">options</span><span class="p">:</span> <span class="n">JSONSerialization</span><span class="p">.</span><span class="n">ReadingOptions</span><span class="p">.</span><span class="n">mutableContainers</span><span class="p">)</span> <span class="k">as</span><span class="p">!</span> <span class="n">NSDictionary</span>
        <span class="bp">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="bp">print</span><span class="p">(</span><span class="s">&#34;æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨&#34;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">task</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span></code></pre></div>
<p>æ³¨æ„ï¼š</p>

<ol>
<li>ç½‘ç»œè¯·æ±‚ä¸­ä½¿ç”¨ setValue è¿›è¡Œé…ç½®è¯·æ±‚å¤´ä¿¡æ¯</li>
<li>æ‰‹åŠ¨é…ç½®è¯·æ±‚æ–¹æ³•ä¸º <strong>POST</strong></li>
<li>ä¸Šé¢çš„ POST è¯·æ±‚æ•°æ®ä½¿ç”¨çš„ç±»å‹æ˜¯ <code>application/x-www-form-urlencoded</code>ï¼Œæ‰€ä»¥è¦å¯¹è¯·æ±‚æ•°æ®è¿›è¡Œç‰¹æ®Šå­—ç¬¦åŠ  % è¿›è¡Œç¼–ç ã€‚</li>
</ol>

<h1 id="é—®é¢˜">é—®é¢˜</h1>

<p>åœ¨ä½¿ç”¨ä¸Šé¢çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæ¯ä¸ªäººä¸åŒçš„éœ€æ±‚å¯èƒ½ä¼šé‡åˆ°ä¸åŒçš„é—®é¢˜ï¼Œè¿™é‡Œåˆ—å‡ºå¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚</p>

<h2 id="æ— æ³•è¿æ¥åˆ°ç½‘ç»œ-æ²™ç›’é˜»æ­¢">æ— æ³•è¿æ¥åˆ°ç½‘ç»œ(æ²™ç›’é˜»æ­¢)</h2>

<p>åœ¨ä½¿ç”¨ä¸Šè¿°æ–¹æ³•å‘é€è¯·æ±‚æ—¶ï¼Œé‡åˆ°äº†é”™è¯¯ï¼š</p>

<blockquote>
<p>dns A server with the specified hostname could not be found</p>
</blockquote>

<p>é€ æˆæ­¤é—®é¢˜çš„åŸå› æ˜¯å—æ²™ç›’é™åˆ¶å¯¼è‡´ï¼Œä¸¤ç§è§£å†³æ–¹æ³•ï¼š</p>

<ol>
<li>ç‚¹å‡»é¡¹ç›®å·¦ä¾§å¯¼èˆªæ ä¸­çš„é¡¹ç›®åç§°ï¼Œå³ä¾§é¡¶éƒ¨æ ‡ç­¾é€‰æ‹© <strong>Capabilities</strong> æ‰¾åˆ°ç¬¬ä¸€é¡¹ <strong>NetWork</strong> å‹¾é€‰ <strong>Incoming Connections (Server)</strong> å’Œ <strong>Outgoing Connections (Client)</strong>ï¼Œä¸»è¦æ˜¯ <strong>Outgoing Connections (Client)</strong></li>
<li>å…³é—­ App SandBox</li>
</ol>

<p>å»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ã€‚</p>

<h2 id="http-å±è”½é—®é¢˜">HTTP å±è”½é—®é¢˜</h2>

<blockquote>
<p>App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app&rsquo;s Info.plist file.</p>
</blockquote>

<p>è¿™ä¸ªé—®é¢˜æ˜¯å®‰å…¨æœºåˆ¶å¯¼è‡´çš„ï¼Œå¦‚æœè¯·æ±‚çš„ API é“¾æ¥æ˜¯ HTTP çš„è€Œä¸æ˜¯ HTTPS çš„å¯èƒ½ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œè§£å†³æ–¹æ³•æ˜¯ï¼Œåœ¨ <code>Info.plist</code> ä¸­æ·»åŠ  <code>App Transport Security Settings</code>ï¼Œåœ¨å…¶ä¸‹å†æ·»åŠ ä¸€ä¸ª <code>Allow Arbitrary Loads</code> å€¼è®¾ç½®ä¸º <code>Yes</code> å³å¯ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190223122624.png" alt="" /></p>

<h2 id="url-ç¼–ç é—®é¢˜">url ç¼–ç é—®é¢˜</h2>

<p>è¿›è¡Œè¯·æ±‚æ“ä½œä¸­ä¸¥æ ¼æŒ‰ç…§äº†ä¸Šé¢çš„æ­¥éª¤æ“ä½œï¼Œå¯æ˜¯æ”¶åˆ°çš„æ˜¯é”™è¯¯å“åº”ï¼Œæœ€åæŸ¥æ˜åŸæ¥æ˜¯ url ç¼–ç é—®é¢˜ï¼Œåé‡Œä¹‹å‰åœ¨å¼€å‘ä¸€æ¬¾å›¾ç‰‡ OCR çš„ app çš„æ—¶å€™ï¼Œéœ€è¦åœ¨ POST æ•°æ®ä¸­åŒ…å«å›¾ç‰‡ BASE64 æ•°æ®ã€‚ä½†å…¶ä¸­åŒ…å«äº†ç‰¹æ®Šå­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦éœ€è¦è¿›è¡Œ
% è½¬ç ï¼Œè¦ç¬¦åˆ <strong>RFC 3986</strong> æ ‡å‡†ï¼Œè¿™é‡Œç»™å‡ºåé‡Œçš„è§£å†³æ–¹æ³•ï¼Œæ˜¯å¯¹ <strong>String</strong> è¿›è¡Œæ‰©å±•ä¸¤ä¸ªå±æ€§ï¼Œå­—ç¬¦ä¸²è¿™ä¸¤ä¸ªå±æ€§åˆ†åˆ«å¯ä»¥å®Œæˆ url ç¼–ç å’Œè§£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">extension</span> <span class="nc">String</span> <span class="p">{</span>
    <span class="c1">//å°†åŸå§‹çš„urlç¼–ç ä¸ºåˆæ³•çš„url</span>
    <span class="kd">var</span> <span class="nv">urlEncoded</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">generalDelimitersToEncode</span> <span class="p">=</span> <span class="s">&#34;:#[]@&#34;</span> <span class="c1">// does not include &#34;?&#34; or &#34;/&#34; due to RFC 3986 - Section 3.4</span>
        <span class="kd">let</span> <span class="nv">subDelimitersToEncode</span> <span class="p">=</span> <span class="s">&#34;!$&amp;&#39;()*+,;=&#34;</span>
        <span class="kd">var</span> <span class="nv">allowedCharacterSet</span> <span class="p">=</span> <span class="n">CharacterSet</span><span class="p">.</span><span class="n">urlQueryAllowed</span>
        <span class="n">allowedCharacterSet</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">charactersIn</span><span class="p">:</span> <span class="s">&#34;</span><span class="si">\(</span><span class="n">generalDelimitersToEncode</span><span class="si">)\(</span><span class="n">subDelimitersToEncode</span><span class="si">)</span><span class="s">&#34;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">addingPercentEncoding</span><span class="p">(</span><span class="n">withAllowedCharacters</span><span class="p">:</span> <span class="n">allowedCharacterSet</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="c1">//å°†ç¼–ç åçš„urlè½¬æ¢å›åŸå§‹çš„url</span>
    <span class="kd">var</span> <span class="nv">urlDecoded</span><span class="p">:</span> <span class="nb">String</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">removingPercentEncoding</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>ä¸Šé¢çš„æ‰©å±•ä¸­ä½¿ç”¨äº†ç°æœ‰çš„ <code>addingPercentEncoding</code> æ–¹æ³•ï¼Œä½†æ˜¯ç°æœ‰çš„å­—ç¬¦é›†ä¸èƒ½å®Œå…¨å»é™¤ç‰¹æ®Šå­—ç¬¦ï¼Œæ‰€ä»¥ä½œè€…è¿™é‡Œä½¿ç”¨äº†è‡ªå·±åˆ›å»ºçš„å­—ç¬¦é›† <code>allowedCharacterSet</code>ã€‚</p>

<h2 id="ç•Œé¢åˆ·æ–°é—®é¢˜">ç•Œé¢åˆ·æ–°é—®é¢˜</h2>

<p>é€šè¿‡è¯·æ±‚è·å–äº†æ•°æ®ä»¥åï¼Œé€šå¸¸éœ€è¦æ›´æ–°ä¸€ä¸‹ç•Œé¢ä¸­çš„æ˜¾ç¤ºç»“æœï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°é—®é¢˜ï¼ä¸Šé¢çš„æ¥å£é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢è¯·æ±‚æ—¶é—´è¿‡é•¿å¯¼è‡´ç•Œé¢å¡æ­»ï¼Œè¯·æ±‚æ˜¯åœ¨æ–°çš„çº¿ç¨‹è¿›è¡Œï¼Œä½†æ˜¯ç•Œé¢æ˜¯åœ¨ä¸»çº¿ç¨‹å¤„ç†ï¼Œæ‰€ä»¥ä¸€æ—¦åœ¨è¯·æ±‚å®Œç›´æ¥å¤„ç†ç•Œé¢çš„è¯ï¼Œå°±ä¼šå¯¼è‡´ App å´©æºƒï¼Œæ‰€ä»¥è¿™é‡Œå»ºè®®ä½¿ç”¨å§”æ‰˜ä»¥åŠåœ¨å§”æ‰˜çº¿ç¨‹ä¸­ä¿®æ”¹UIï¼Œæ–¹æ³•å¦‚ä¸‹ï¼ˆè¿™é‡Œä»¥ç®€å•çš„ GET è¯·æ±‚ä¸ºä¾‹ï¼ŒPOST è¯·æ±‚ç±»ä¼¼æ“ä½œï¼‰ï¼š</p>

<ul>
<li><p>å°è£…ä¸€ä¸ªè¯·æ±‚çš„æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚å®Œæˆåå¤„ç†äº‹åŠ¡çš„å›è°ƒå‡½æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">func</span> <span class="nf">sendGetRequest</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">((</span><span class="n">Data</span><span class="p">?,</span><span class="n">URLResponse</span><span class="p">?,</span><span class="n">Error</span><span class="p">?)-&gt;</span><span class="nb">Void</span><span class="p">))</span> <span class="p">{</span>
<span class="kd">let</span> <span class="nv">session</span> <span class="p">=</span> <span class="n">URLSession</span><span class="p">(</span><span class="n">configuration</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">)</span>
<span class="kd">let</span> <span class="nv">task</span> <span class="p">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span><span class="o">!</span><span class="p">,</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="n">completionHandler</span><span class="p">)</span>
<span class="n">task</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span></code></pre></div></li>

<li><p>å®šä¹‰åˆšæ‰æ‰€è¯´çš„å›è°ƒå‡½æ•°ï¼ŒåŒ…å«å‚æ•° data, response å’Œ errorï¼Œè¿™ä¸ªå›è°ƒå¯ä»¥æ ¹æ®ä¸åŒ API åŠŸèƒ½å®šä¹‰å¤šä¸ªï¼Œä»¥ç›¸åº”åŠŸèƒ½å‘½åï¼Œæ¯”å¦‚æ˜¯è·å–å¤©æ°”ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">func</span> <span class="nf">getWeatherSuccess</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">?,</span> <span class="n">response</span><span class="p">:</span> <span class="n">URLResponse</span><span class="p">?,</span> <span class="n">error</span><span class="p">:</span> <span class="n">Error</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="p">{</span>
<span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span> <span class="p">{</span>
    <span class="c1">// è¿™é‡Œå®Œæˆ UI ç›¸å…³æ“ä½œï¼Œè°ƒç”¨ UI å¯¹è±¡æ—¶è¦åŠ ä¸Š self</span>
    <span class="c1">// æ¯”å¦‚ï¼š self.weatherLabel = &#34;...&#34;</span>
<span class="p">}</span>
<span class="p">}</span> </code></pre></div></li>

<li><p>æœ€ååœ¨è¦è¯·æ±‚æ•°æ®çš„åœ°æ–¹è°ƒç”¨ç¬¬ä¸€æ­¥å®šä¹‰çš„é€šç”¨æ–¹æ³•å³å¯ï¼Œåªéœ€æŒ‡å®šä¸åŒçš„å¤„ç†å›è°ƒå°±å¯ä»¥å®Œæˆå¤š API çš„ä¸åŒè¯·æ±‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="n">sendGetRequest</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="s">&#34;http://127.0.0.1/api&#34;</span><span class="p">,</span> <span class="n">getWeatherSuccess</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="n">response</span><span class="p">:</span><span class="n">error</span><span class="p">:))</span></code></pre></div></li>
</ul>

<h1 id="å¤©æ°”å®ä¾‹">å¤©æ°”å®ä¾‹</h1>

<p>ä¸‹é¢ä»¥ä¸€ä¸ªè·å–å¤©æ°”çš„å®ä¾‹ï¼Œè®²è§£ä¸€ä¸‹ HTTP çš„ GET è¯·æ±‚æ–¹å¼ï¼ŒPOST æ–¹å¼æŒ‰ç…§ä¸Šé¢è®²çš„æ–¹å¼åŸºæœ¬å·®ä¸å¤šå°‘ï¼Œæ— éæ˜¯åŠ äº†è¯·æ±‚æ•°æ®ï¼Œè¿™é‡Œå°±å…ˆä¸è®² POST è¯·æ±‚å®ä¾‹äº†ã€‚</p>

<p>æˆ‘ä»¬è¦åšçš„å®ä¾‹å¾ˆç®€å•ï¼Œçª—å£ä¸­æœ‰ä¸€ä¸ª push button å’Œ ä¸€ä¸ª labelï¼Œå½“ç‚¹å‡» button çš„æ—¶å€™å°±ä¼šè§¦å‘è¯·æ±‚è·å–å¤©æ°”æ•°æ®ï¼Œå¹¶å°†æ¸©åº¦æ˜¾ç¤ºåœ¨æ ‡ç­¾ä¸Šï¼Œä¸ä½œå¤æ‚çš„å¤„ç†è®²æ˜ç™½æ–¹æ³•å³å¯ã€‚</p>

<h2 id="å¤©æ°”-api">å¤©æ°” API</h2>

<p>è¿™é‡Œä½¿ç”¨<a href="https://www.sojson.com/blog/305.html" target="_blank">å…è´¹å¤©æ°”APIï¼Œå¤©æ°”JSON APIï¼Œä¸é™æ¬¡æ•°è·å–åäº”å¤©çš„å¤©æ°”é¢„æŠ¥</a>æä¾›çš„å¤©æ°”APIï¼Œå…è´¹ä½¿ç”¨ï¼Œå¯å…è´¹ä½¿ç”¨ï¼Œä¸è¿‡å…è´¹ç‰ˆæœ¬æ•°æ®å›ºå®š 8 ä¸ªå°æ—¶æ›´æ–°ä¸€æ¬¡ï¼Œè¿™å€’æ— æ‰€è°“äº†ï¼Œæˆ‘ä»¬åªæ˜¯ç”¨æ¥å­¦ä¹ å®ç° GET è¯·æ±‚è€Œå·²ã€‚</p>

<h3 id="get-è¯·æ±‚æ ¼å¼">GET è¯·æ±‚æ ¼å¼</h3>

<p>ç¤ºä¾‹è¯·æ±‚é“¾æ¥ï¼š<a href="http://t.weather.sojson.com/api/weather/city/101030100" target="_blank">http://t.weather.sojson.com/api/weather/city/101030100</a> ã€‚</p>

<p>ä¸ç”¨å†å¸¦ä»»ä½•å‚æ•°ï¼Œè¯·æ±‚æ˜¯restfullé£æ ¼ï¼Œå¯ä»¥çœ‹åˆ°é“¾æ¥æœ€åæœ‰ä¸€ä¸²æ•°å­—ï¼Œè¿™ä¸²æ•°å­—æ˜¯åŸå¸‚ç¼–ç  city_code ï¼Œä¸€ä¸ª 9 ä½æ•°å­—ï¼Œä¸Šé¢çš„ç¼–ç ä»£è¡¨çš„æ˜¯ <strong>å¤©æ´¥å¸‚</strong> ã€‚åœ°å€æ˜¯ <a href="http://t.weather.sojson.com/api/weather/city/" target="_blank">http://t.weather.sojson.com/api/weather/city/</a> å’Œ city_code çš„æ‹¼æ¥ã€‚</p>

<h3 id="åŸå¸‚ç¼–ç ">åŸå¸‚ç¼–ç </h3>

<p>åŸå¸‚ç¼–ç å¯ä»¥åœ¨ <a href="http://cdn.sojson.com/_city.json" target="_blank"><strong>_city.json</strong></a> ä¸­æŸ¥è¯¢ï¼Œæ‰“å¼€æ–‡ä»¶æŸ¥æ‰¾å³å¯ï¼Œè¿™é‡Œæˆ‘ä»¬æŸ¥è¯¢ æµå—ï¼Œå¯ä»¥æŸ¥æ‰¾åˆ°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Json" data-lang="Json"><span class="p">{</span>
  <span class="nt">&#34;_id&#34;</span><span class="p">:</span> <span class="mi">281</span><span class="p">,</span>
  <span class="nt">&#34;id&#34;</span><span class="p">:</span> <span class="mi">282</span><span class="p">,</span>
  <span class="nt">&#34;pid&#34;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
  <span class="nt">&#34;city_code&#34;</span><span class="p">:</span> <span class="s2">&#34;101120101&#34;</span><span class="p">,</span>
  <span class="nt">&#34;city_name&#34;</span><span class="p">:</span> <span class="s2">&#34;æµå—&#34;</span>
<span class="p">}</span></code></pre></div>
<p>æ‰€ä»¥æœ€ç»ˆ GET è¯·æ±‚é“¾æ¥æ˜¯ï¼š<a href="http://t.weather.sojson.com/api/weather/city/101120101" target="_blank">http://t.weather.sojson.com/api/weather/city/101120101</a></p>

<h2 id="æ–°å»º-cocoa-app-å·¥ç¨‹">æ–°å»º Cocoa APP å·¥ç¨‹</h2>

<p>ä¸ºäº†ç›´æ¥æ˜äº†è¿™é‡Œç›´æ¥æŠŠå·¥ç¨‹æ–°å»ºå’Œæ§ä»¶æ·»åŠ çš„è¿‡ç¨‹ä»¥è§†é¢‘å±•ç¤ºï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/getDemo_newProject.mp4" width="960" controls="controls">æ–°å»ºç©ºå·¥ç¨‹</video>

<h2 id="æ·»åŠ -get-è¯·æ±‚æ–¹æ³•">æ·»åŠ  GET è¯·æ±‚æ–¹æ³•</h2>

<p>æ‰“å¼€æ–‡ä»¶ <code>ViewController.swift</code> ï¼Œåœ¨ <code>ViewController</code> ä¸­æ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">class</span> <span class="nc">func</span> <span class="n">getRequest</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="nb">String</span><span class="p">,</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">((</span><span class="n">Data</span><span class="p">?,</span> <span class="n">URLResponse</span><span class="p">?,</span> <span class="n">Error</span><span class="p">?)-&gt;</span><span class="nb">Void</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nv">session</span> <span class="p">=</span> <span class="n">URLSession</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">configuration</span><span class="p">:</span> <span class="p">.</span><span class="k">default</span><span class="p">)</span>
    <span class="kd">let</span> <span class="nv">task</span> <span class="p">=</span> <span class="n">session</span><span class="p">.</span><span class="n">dataTask</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">URL</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span><span class="o">!</span><span class="p">,</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="n">completionHandler</span><span class="p">)</span>
    <span class="n">task</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
<span class="p">}</span></code></pre></div>
<h2 id="è¯·æ±‚æˆåŠŸåå¤„ç†å›è°ƒ">è¯·æ±‚æˆåŠŸåå¤„ç†å›è°ƒ</h2>

<p>å®šä¹‰ä¸€ä¸ªè¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°ï¼ŒåŒæ ·æ”¾åˆ° <code>ViewController</code> ä¸­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kd">func</span> <span class="nf">parseTemperatureForToday</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">?,</span> <span class="n">response</span><span class="p">:</span> <span class="n">URLResponse</span><span class="p">?,</span> <span class="n">error</span><span class="p">:</span> <span class="n">Error</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="p">{</span>
    <span class="n">DispatchQueue</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">async</span> <span class="p">{</span>
        <span class="k">do</span> <span class="p">{</span>
            <span class="kd">let</span> <span class="nv">r</span> <span class="p">=</span> <span class="k">try</span> <span class="n">JSONSerialization</span><span class="p">.</span><span class="n">jsonObject</span><span class="p">(</span><span class="n">with</span><span class="p">:</span> <span class="n">data</span><span class="p">!,</span> <span class="n">options</span><span class="p">:</span> <span class="p">[</span><span class="n">JSONSerialization</span><span class="p">.</span><span class="n">ReadingOptions</span><span class="p">.</span><span class="n">mutableContainers</span><span class="p">])</span> <span class="k">as</span><span class="p">!</span> <span class="n">NSDictionary</span>
            <span class="kd">let</span> <span class="nv">todayData</span> <span class="p">=</span> <span class="n">r</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">forKey</span><span class="p">:</span> <span class="s">&#34;data&#34;</span><span class="p">)</span> <span class="k">as</span><span class="p">!</span> <span class="n">NSDictionary</span>
            <span class="kd">let</span> <span class="nv">tempValue</span> <span class="p">=</span> <span class="n">todayData</span><span class="p">.</span><span class="n">value</span><span class="p">(</span><span class="n">forKey</span><span class="p">:</span> <span class="s">&#34;wendu&#34;</span><span class="p">)</span> <span class="k">as</span><span class="p">!</span> <span class="nb">String</span>
            <span class="kc">self</span><span class="p">.</span><span class="n">temperatureLabel</span><span class="p">.</span><span class="n">stringValue</span> <span class="p">=</span> <span class="n">tempValue</span> <span class="o">+</span> <span class="s">&#34; Â°C&#34;</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="bp">print</span><span class="p">(</span><span class="s">&#34;æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨&#34;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<h2 id="æŒ‰é’®ç‚¹å‡»å¤„ç†">æŒ‰é’®ç‚¹å‡»å¤„ç†</h2>

<p>æŒ‰é’®ç‚¹å‡»å°±å‘é€è¯·æ±‚ï¼Œåœ¨ <code>getTemperature</code> æ–¹æ³•ä¸­æ·»åŠ è¯·æ±‚æ–¹æ³•çš„è°ƒç”¨å³å¯å®Œæˆå®ä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Swift" data-lang="Swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">getTemperature</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// è·å–æµå—å¤©æ°”çš„ GET è¯·æ±‚é“¾æ¥</span>
    <span class="kd">let</span> <span class="nv">url</span> <span class="p">=</span> <span class="s">&#34;http://t.weather.sojson.com/api/weather/city/101120101&#34;</span>
    <span class="n">ViewController</span><span class="p">.</span><span class="n">getRequest</span><span class="p">(</span><span class="n">url</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="n">completionHandler</span><span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">parseTemperatureForToday</span><span class="p">(</span><span class="n">data</span><span class="p">:</span><span class="n">response</span><span class="p">:</span><span class="n">error</span><span class="p">:))</span>
<span class="p">}</span></code></pre></div>
<h2 id="è¿è¡Œç¤ºä¾‹">è¿è¡Œç¤ºä¾‹</h2>

<p>ç¼–è¯‘è¿è¡Œï¼Œå¯èƒ½ä¼šé‡åˆ°æœ¬æ–‡å‰é¢æåˆ°çš„<strong>HTTP è¯·æ±‚å±è”½</strong> å’Œ <strong>æ— æ³•è¿æ¥ç½‘ç»œ(æ²™ç›’é˜»æ­¢)</strong> çš„é—®é¢˜ï¼ŒæŒ‰ç…§ä¸Šé¢çš„è§£å†³æ–¹æ³•æ’å‡ºé—®é¢˜å³å¯ï¼Œæœ€ç»ˆè¿è¡Œæ•ˆæœå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190223124656.gif" alt="" /></p>

<p><strong>Demo ä¸‹è½½</strong>: <a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/GetRequestDemo.zip" target="_blank">GetRequestDemo</a></p>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>

<ul>
<li><a href="https://www.logcg.com/archives/3120.html" target="_blank">swift4 urlSession getå’Œpostç½‘ç»œè¯·æ±‚</a></li>
<li><a href="https://blog.auv.cool/2018/08/06/Swift/URLSession/" target="_blank">Swift URLSession ç½‘ç»œè¯·æ±‚</a></li>
<li><a href="https://blog.csdn.net/agonie201218/article/details/78788685" target="_blank">swift URL ç¼–ç </a></li>
<li><a href="https://www.jianshu.com/p/753831ce6adb" target="_blank">Swift4.0 å¼‚æ­¥Postè¯·æ±‚ä¸­ä½¿ç”¨å§”æ‰˜ä»¥åŠåœ¨å§”æ‰˜çº¿ç¨‹ä¸­ä¿®æ”¹UI</a></li>
<li><a href="https://stackoverflow.com/questions/31254725/transport-security-has-blocked-a-cleartext-http" target="_blank">Transport security has blocked a cleartext HTTP</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>textGO å¯ä»¥å¸®æ‚¨æå–å›¾ç‰‡ä¸­æ–‡å­—çš„app</title>
			<link>https://www.smslit.top/2019/01/22/textGO/</link>
			<pubDate>Tue, 22 Jan 2019 16:32:01 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/01/22/textGO/</guid>
			<description>textGO æ˜¯ 5km(åé‡Œ) å¼€å‘çš„ä¸€æ¬¾ ocr å·¥å…·ï¼Œç›®å‰åªå¼€å‘äº† macOS ç‰ˆï¼Œå®ƒå¯ä»¥å¸®æ‚¨å¿«é€Ÿæå–å›¾ç‰‡ä¸­çš„æ–‡å­—ï¼Œæ–¹ä¾¿æ‚¨çš„å·¥ä½œã€‚ ä¸‹è½½ ç‚¹å‡»ä¸‹é¢å›¾æ ‡ä¸‹è½½æœ€æ–°ç‰ˆï¼š ç‰¹æ€§ ä¾èµ–</description>
			<content type="html"><![CDATA[

<p>textGO æ˜¯ 5km(åé‡Œ) å¼€å‘çš„ä¸€æ¬¾ ocr å·¥å…·ï¼Œç›®å‰åªå¼€å‘äº† macOS ç‰ˆï¼Œå®ƒå¯ä»¥å¸®æ‚¨å¿«é€Ÿæå–å›¾ç‰‡ä¸­çš„æ–‡å­—ï¼Œæ–¹ä¾¿æ‚¨çš„å·¥ä½œã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/blog.png" alt="" /></p>

<h1 id="ä¸‹è½½">ä¸‹è½½</h1>

<p>ç‚¹å‡»ä¸‹é¢å›¾æ ‡ä¸‹è½½æœ€æ–°ç‰ˆï¼š</p>

<p><a href="https://github.com/smslit/textGO/releases">
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190122180342.png">
</a></p>

<h1 id="ç‰¹æ€§">ç‰¹æ€§</h1>

<ul>
<li>ä¾èµ–å¤§å…¬å¸çš„ OCR å¼•æ“ï¼Œè¯†åˆ«å‡†ç¡®ï¼Œé…ç½®è‡ªå·±çš„ api_key å’Œ secret_key è·å¾—è¶³å¤Ÿçš„å…è´¹ä½¿ç”¨æ¬¡æ•°(50000æ¬¡/æ—¥)</li>
<li>è½»é‡ï¼Œå ç”¨ç³»ç»Ÿèµ„æºå°‘</li>
<li>ä¸€æ¬¾çŠ¶æ€æ å°å·¥å…·ï¼Œæ“ä½œä¾¿æ·ï¼›è‡ªç„¶çš„æ“ä½œé€»è¾‘ï¼Œé¡ºç•…è¯†åˆ«

<ul>
<li>æˆªå›¾ OCR</li>
<li>æ‹–åŠ¨å›¾ç‰‡åˆ°çŠ¶æ€æ å›¾æ ‡è¿›è¡ŒOCR</li>
<li>è¯†åˆ«ç»“æœæ¨åˆ°ç³»ç»Ÿå‰ªåˆ‡æ¿</li>
</ul></li>
<li>ç•Œé¢å…ƒç´ è·Ÿéšç³»ç»Ÿï¼Œå®Œç¾é€‚åº” macOS ä¸‹çš„ Dark å’Œ light æ¨¡å¼</li>
</ul>

<h1 id="todo">TODO</h1>

<ul class="task-list">
<li><label><input type="checkbox" checked disabled class="task-list-item"> æ£€æŸ¥æ›´æ–°</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> å›¾ç‰‡ä¸ç»“æœå¯¹æ¯”</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> ç»“æœä¼˜åŒ–ï¼Œæ–‡æœ¬æ®µè½å¸ƒå±€</label></li>
<li><label><input type="checkbox" disabled class="task-list-item"> ç»“æœç¿»è¯‘</label></li>
</ul>

<h1 id="ä½¿ç”¨æ•™ç¨‹">ä½¿ç”¨æ•™ç¨‹</h1>

<p>ç›¸ä¿¡æ‚¨å·²ç»ä¸‹è½½äº†æœ€æ–°çš„ textGOï¼Œä¸‹é¢ç®€å•è¯´ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ã€‚</p>

<h2 id="è·å–ç™¾åº¦-ai-æ–‡å­—è¯†åˆ«åº”ç”¨çš„å¯†é’¥">è·å–ç™¾åº¦ AI æ–‡å­—è¯†åˆ«åº”ç”¨çš„å¯†é’¥</h2>

<p>å› ä¸º app è®¾è®¡çš„åˆè¡·å°±æ˜¯ï¼Œè®©ä½¿ç”¨è€…è·å¾—å‡†ç¡®çš„ OCR ç»“æœçš„åŒæ—¶ï¼Œèƒ½å¤Ÿæœ‰å°½é‡å¤šçš„ä½¿ç”¨æ¬¡æ•°ï¼Œæ‰€ä»¥ä½œè€…é¦–å…ˆé€‰æ‹©äº†ä½¿ç”¨ <a href="https://ai.baidu.com" target="_blank">ç™¾åº¦ AI</a> æä¾›çš„ OCR æœåŠ¡ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ textGO ä¹‹å‰éœ€è¦è·å–ä¸€ä¸‹å±äºæ‚¨è‡ªå·±çš„keyï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥æ¯å¤©ç‹¬ç”¨ 50000æ¬¡äº†ã€‚</p>

<h3 id="ç™¾åº¦è´¦å·">ç™¾åº¦è´¦å·</h3>

<p>é¦–å…ˆæ‚¨å¾—æœ‰ç™¾åº¦è´¦å·ï¼Œç›¸ä¿¡å¤§éƒ¨åˆ†äººéƒ½æœ‰äº†è‡ªå·±çš„ç™¾åº¦è´¦å·ï¼Œæ²¡æœ‰çš„è¯å¯ä»¥è®¿é—®<a href="https://passport.baidu.com/v2/?reg" target="_blank">ç™¾åº¦æ³¨å†Œ</a>ã€‚</p>

<h3 id="ç™¾åº¦-ai-æ§åˆ¶å°">ç™¾åº¦ AI æ§åˆ¶å°</h3>

<p>æ‰“å¼€<a href="https://ai.baidu.com" target="_blank">ç™¾åº¦ AI</a> é¦–é¡µï¼Œç‚¹å‡»å³ä¸Šè§’çš„ [æ§åˆ¶å°] æŒ‰é’®ï¼Œä½¿ç”¨æ‚¨çš„ç™¾åº¦è´¦å·ç™»å½•ï¼ŒæˆåŠŸåå°±è¿›å…¥äº†æ§åˆ¶å°ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190122172239.png" alt="" /></p>

<h3 id="åˆ›å»ºæ–‡å­—è¯†åˆ«åº”ç”¨">åˆ›å»ºæ–‡å­—è¯†åˆ«åº”ç”¨</h3>

<ol>
<li>ç‚¹å‡»æ§åˆ¶å°å·¦ä¾§çš„ <strong>æ–‡å­—è¯†åˆ«</strong> å°±ä¼šè¿›å…¥æ–‡å­—è¯†åˆ«çš„æ¦‚è§ˆé¡µé¢</li>

<li><p>å¯ä»¥çœ‹åˆ° <strong>åº”ç”¨</strong> åŒºï¼Œç‚¹å‡» åˆ›å»ºåº”ç”¨</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190122172305.png" alt="" /></p></li>

<li><p>å¡«å†™åº”ç”¨åç§°å’Œæè¿°å³å¯ï¼Œå…¶å®ƒé»˜è®¤ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190122172327.png" alt="" /></p></li>

<li><p>ç‚¹å‡»<strong>ç«‹å³åˆ›å»º</strong>ï¼Œåˆ›å»ºæˆåŠŸåå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190122172445.png" alt="" /></p></li>

<li><p>ç‚¹å‡»<strong>è¿”å›åº”ç”¨åˆ—è¡¨</strong> ï¼Œå°±èƒ½çœ‹åˆ°è‡ªå·±åˆšåˆ›å»ºçš„åº”ç”¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­ä¸»è¦å…³æ³¨çš„æ˜¯ <strong>API key</strong> å’Œ <strong>Secret Key</strong> ï¼Œåœ¨ textGO ä¸­ä¼šç”¨åˆ°ã€‚</p></li>
</ol>

<h2 id="é…ç½®-textgo">é…ç½® textGO</h2>

<ol>
<li><p>è¿è¡Œæœ€æ–°çš„ textGOï¼Œä¼šåœ¨çŠ¶æ€æ çœ‹åˆ°ä¸€ä¸ªå°logoï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190122172935.png" alt="" /></p></li>

<li><p>ç‚¹å‡»å®ƒå°±ä¼šçœ‹åˆ°èœå•é¡¹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/blog.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <strong>åå¥½è®¾ç½®</strong>ï¼Œå°±ä¼šæ‰“å¼€è®¾ç½®çª—å£ï¼Œåœ¨çª—å£ä¸­è¾“å…¥ä¸Šå°èŠ‚å¾—åˆ°çš„ <strong>API key</strong> å’Œ <strong>Secret Key</strong> åç‚¹å‡»ä¿å­˜ï¼Œæ­¤æ—¶appå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190122173257.png" alt="" /></p></li>
</ol>

<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>

<p>ç›®å‰æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œæœ€åéƒ½æ˜¯å°†ç»“æœè®¾ç½®åˆ°å‰ªåˆ‡æ¿ä¸Šï¼Œè¦ä½¿ç”¨ç»“æœï¼Œç›´æ¥åœ¨æ‚¨çš„æ–‡æ¡£ä¸­ç²˜è´´å°±è¡Œã€‚</p>

<h3 id="æˆªå›¾è¯†åˆ«">æˆªå›¾è¯†åˆ«</h3>

<p>ç›®æµ‹è¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œç›´æ¥æˆªå–å±å¹•æ¥è¯†åˆ«æˆªå›¾ä¸­çš„æ–‡å­—ï¼Œæ“ä½œå¦‚ä¸‹è§†é¢‘ï¼š</p>

<p><video controls="controls" src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/screenshotocr.mp4" height="360"></p>

<h3 id="æ‹–æ‹½å›¾ç‰‡è¯†åˆ«">æ‹–æ‹½å›¾ç‰‡è¯†åˆ«</h3>

<p>å¦å¤–ä¹Ÿå¯ä»¥æ‹–æ‹½å·²æœ‰å›¾ç‰‡æ¥è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—ï¼š</p>

<p><video controls="controls" src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/dragdropocr.mp4" height="360"></p>

<h1 id="å…¶å®ƒ">å…¶å®ƒ</h1>

<h2 id="åé¦ˆ">åé¦ˆ</h2>

<ol>
<li>å¦‚æœæ‚¨ä½¿ç”¨æ­¤ app æ—¶é‡åˆ°äº†é—®é¢˜ï¼Œè¯·åŠæ—¶ä¸ <a href="mailto:5km@smslit.cn" target="_blank">5km</a> æ²Ÿé€šï¼Œä¸€èµ·è§£å†³é—®é¢˜ï¼</li>
<li>å¦‚æœæ‚¨æœ‰ä»€ä¹ˆæ”¹è¿›å»ºè®®ä¹Ÿæ¬¢è¿æ‚¨å‘Šè¯‰ <a href="mailto:5km@smslit.cn" target="_blank">5km</a></li>
</ol>

<h2 id="æ”¯æŒ">æ”¯æŒ</h2>

<p>éå¸¸æ„Ÿè°¢æ‚¨çš„æ”¯æŒå’Œå…³æ³¨ï¼Œå¦‚æœæ‚¨å¾ˆèµèµè¿™ä¸ª app ï¼Œå¸Œæœ›ç»™æ‚¨å¸¦æ¥æ–¹ä¾¿çš„åŒæ—¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥æœ‰æ‰€å›é¦ˆï¼æ¯”å¦‚è¯·ä½œè€…å–å’–å•¡(ç‚¹å‡»ä¸‹é¢çš„ <strong>æ‰“èµä½œè€…</strong> æ‰«ç æ”¯æŒ)ï¼</p>
]]></content>
		</item>
		
		<item>
			<title>python åˆ©ç”¨ç™¾åº¦ AI å®ç° OCR</title>
			<link>https://www.smslit.top/2019/01/10/textgo_python/</link>
			<pubDate>Thu, 10 Jan 2019 15:10:32 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/01/10/textgo_python/</guid>
			<description>&lt;p&gt;å‰ä¸¤å¤©äº†è§£äº†ä¸€ä¸‹ç™¾åº¦ AIï¼Œä»–ä»¬æä¾›äº†å…è´¹çš„å›¾ç‰‡ä¸­æ–‡å­—è¯†åˆ«æ¥å£ï¼Œæ¯å¤©å¯ä»¥æä¾› 50000 æ¬¡å…è´¹çš„é€šç”¨æ–‡å­—è¯†åˆ«ï¼Œæƒ³èµ·äº†ä¹‹å‰å¸®æ°´æœ¨åšä¸€ä¸ªç½‘ç«™æ—¶ï¼Œèµ„æ–™ä¸­çš„é—®é¢˜å¤§éƒ¨åˆ†ä»¥å›¾ç‰‡çš„å½¢å¼æä¾›ï¼Œæ‰€ä»¥å½“æ—¶å°±æœ‰è¿™ä¸ªå›¾ç‰‡ OCR çš„éœ€æ±‚ï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹å¦‚ä½•ç”¨ python å€Ÿç”¨ç™¾åº¦ AI å®ç°å›¾ç‰‡çš„ OCRã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190110210442.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å‰ä¸¤å¤©äº†è§£äº†ä¸€ä¸‹ç™¾åº¦ AIï¼Œä»–ä»¬æä¾›äº†å…è´¹çš„å›¾ç‰‡ä¸­æ–‡å­—è¯†åˆ«æ¥å£ï¼Œæ¯å¤©å¯ä»¥æä¾› 50000 æ¬¡å…è´¹çš„é€šç”¨æ–‡å­—è¯†åˆ«ï¼Œæƒ³èµ·äº†ä¹‹å‰å¸®æ°´æœ¨åšä¸€ä¸ªç½‘ç«™æ—¶ï¼Œèµ„æ–™ä¸­çš„é—®é¢˜å¤§éƒ¨åˆ†ä»¥å›¾ç‰‡çš„å½¢å¼æä¾›ï¼Œæ‰€ä»¥å½“æ—¶å°±æœ‰è¿™ä¸ªå›¾ç‰‡ OCR çš„éœ€æ±‚ï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹å¦‚ä½•ç”¨ python å€Ÿç”¨ç™¾åº¦ AI å®ç°å›¾ç‰‡çš„ OCRã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190110210442.png" alt="" /></p>

<h1 id="å®ç°åˆ†æ">å®ç°åˆ†æ</h1>

<p>é˜…è¯»äº†ç™¾åº¦æä¾›çš„æ–‡ç« <a href="http://ai.baidu.com/forum/topic/show/867951" target="_blank"><strong>åªè¦10åˆ†é’Ÿ å¿«é€ŸæŒæ¡æ–‡å­—è¯†åˆ«</strong></a>ï¼ŒåŸºæœ¬å°±å¯ä»¥æ•´ç†å‡ºå®ç°çš„æ­¥éª¤äº†ï¼š</p>

<ol>
<li>åˆ›å»ºç™¾åº¦åº”ç”¨ï¼Œè·å– api_key å’Œ secret_key</li>
<li>åˆ©ç”¨ api_key å’Œ secret_key è·å– access token</li>
<li>å›¾ç‰‡è½¬ BASE64</li>
<li>åˆ©ç”¨å›¾ç‰‡BASE64ç å’Œ access token æ„å»º POST</li>
<li>å“åº”ç»“æœä¸­è§£æç»“æœ</li>
</ol>

<p>å…¶ä¸­ç¬¬ä¸€æ­¥éœ€è¦åœ¨ç™¾åº¦ AI æ§åˆ¶å°å®ç°ï¼Œæœ‰äº† api_key å’Œ secret_key å‰©ä¸‹çš„å››æ­¥å°±å¯ä»¥ç”¨ python å®ç°äº†ï¼Œæœ€ç»ˆ python ç¨‹åºè®¾è®¡æ€è·¯ï¼š</p>

<ol>
<li>æŒ‡å®šé…ç½®æ–‡ä»¶å’Œå›¾ç‰‡è·¯å¾„</li>
<li>è¯»å–é…ç½®æ–‡ä»¶ä¸­çš„ api_key å’Œ secret_key</li>
<li>åˆ¤æ–­é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰ access_token

<ul>
<li>å¦‚æœæ²¡æœ‰ï¼šåˆ©ç”¨ api_key å’Œ secret_key è·å– access_keyï¼Œå¹¶å°† access_token å†™å…¥é…ç½®æ–‡ä»¶</li>
<li>å¦‚æœæœ‰ï¼šè¯»å–é…ç½®ä¸­çš„ access_key</li>
</ul></li>
<li>å°†æŒ‡å®šå›¾ç‰‡è½¬æ¢ä¸º BASE64 ç </li>
<li>æ ¹æ® access_token å’Œ å›¾ç‰‡çš„ BASE64 ç  æ„å»º POSTï¼Œå‘é€è¯·æ±‚ï¼Œè§£æè¿”å›çš„ç»“æœ</li>
<li>æ‰“å° OCR ç»“æœ</li>
</ol>

<h1 id="ä»£ç å®ç°">ä»£ç å®ç°</h1>

<h2 id="textgo-ç±»">textGO ç±»</h2>

<p>æ ¹æ®ä¸Šé¢çš„æ€è·¯ï¼Œå°è£…äº† textGO ç±»ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">class</span> <span class="nc">TextGO</span><span class="p">:</span>
    <span class="s2">&#34;&#34;&#34; å®šä¹‰ ocr ç±» &#34;&#34;&#34;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_file</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_config</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;api_key&#34;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;secret_key&#34;</span><span class="p">)):</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;è¯·æŒ‡å®šä¸€ä¸ªåˆç†çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ä¸­è¦åŒ…å« api_key å’Œ secret_key!&#34;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
            <span class="k">return</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;access_token&#34;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">access_token</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">or</span> <span class="n">access_token</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span><span class="p">:</span>
            <span class="n">access_token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_access_token</span><span class="p">(</span>
                <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;api_key&#34;</span><span class="p">),</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;secret_key&#34;</span><span class="p">))</span>
            <span class="n">config</span><span class="p">[</span><span class="s2">&#34;access_token&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">access_token</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write_config</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;access_token&#34;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">read_config</span><span class="p">(</span><span class="n">config_file</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="s2">&#34;&#34;&#34; ä» json æ–‡ä»¶ä¸­è¯»å–é…ç½® &#34;&#34;&#34;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">config_file</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;æŒ‡å®šçš„é…ç½®æ–‡ä»¶ {config_file} ä¸å­˜åœ¨!&#34;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&#34;r&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">load_file</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">load_file</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">write_config</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34; å°†é…ç½®å†™å…¥æ–‡ä»¶ &#34;&#34;&#34;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_obj</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">f_obj</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">img_to_base64</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34; convert img to base64 data &#34;&#34;&#34;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="s2">&#34;rb&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">img_f</span><span class="p">:</span>
            <span class="n">file_data</span> <span class="o">=</span> <span class="n">img_f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">b64_data</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span><span class="n">file_data</span><span class="p">)</span>
            <span class="n">b64_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">b64_data</span><span class="p">,</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b64_str</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_access_token</span><span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">secret_key</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34; è·å–ç™¾åº¦ AI çš„æ–‡å­—è¯†åˆ« access_token &#34;&#34;&#34;</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;è·å–ç™¾åº¦ AI æ–‡å­—è¯†åˆ«çš„ Access Token ...&#34;</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&#34;https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id=</span><span class="si">%s</span><span class="s2">&amp;client_secret=</span><span class="si">%s</span><span class="s2">&#34;</span>
        <span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">Response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="n">url</span> <span class="o">%</span> <span class="p">(</span><span class="n">api_key</span><span class="p">,</span> <span class="n">secret_key</span><span class="p">))</span>
        <span class="n">body_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
        <span class="n">body_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">body_str</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">body_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;access_token&#34;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ocr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34; åˆ©ç”¨ç™¾åº¦ AI è¯†åˆ«æ–‡å­— &#34;&#34;&#34;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&#34;æ²¡æœ‰ access_token&#34;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&#34;&#34;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">f</span><span class="s2">&#34;https://aip.baidubce.com/rest/2.0/ocr/v1/accurate?access_token={self.access_token}&#34;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">:</span> <span class="s2">&#34;application/x-www-form-urlencoded&#34;</span><span class="p">}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&#34;image_type&#34;</span><span class="p">:</span> <span class="s2">&#34;BASE64&#34;</span><span class="p">,</span>
            <span class="s2">&#34;image&#34;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">img_to_base64</span><span class="p">(</span><span class="n">img</span><span class="p">),</span>
            <span class="s2">&#34;group_id&#34;</span><span class="p">:</span> <span class="s2">&#34;textGO_test&#34;</span><span class="p">,</span>
            <span class="s2">&#34;user_id&#34;</span><span class="p">:</span> <span class="s2">&#34;5km&#34;</span>
        <span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">body_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
            <span class="n">body_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">body_str</span><span class="p">)</span>
            <span class="n">words</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">body_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;words_result&#34;</span><span class="p">):</span>
                <span class="n">words</span> <span class="o">+=</span> <span class="n">line</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;words&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span>
            <span class="k">return</span> <span class="n">words</span>
        <span class="k">return</span> <span class="s2">&#34;&#34;</span></code></pre></div>
<ol>
<li>å›¾ç‰‡è½¬ç ä½¿ç”¨äº†å†…å»ºåº“ <strong>base64</strong></li>
<li>é…ç½®çš„è¯»å–å’Œå†™å…¥ä½¿ç”¨äº†åº“ <strong>json</strong></li>
<li>å‘é€ GET å’Œ POST è¯·æ±‚ä½¿ç”¨åº“ <strong>requests</strong></li>
</ol>

<h2 id="è§£æå‘½ä»¤å‚æ•°">è§£æå‘½ä»¤å‚æ•°</h2>

<p>ä¸ºäº†æ›´å¥½çš„å®ç°å‘½ä»¤å½¢å¼ï¼Œè¿™é‡Œä½¿ç”¨äº†åº“ <strong>argparse</strong>ï¼Œå°è£…äº†å‡½æ•° <code>get_args</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">def</span> <span class="nf">get_args</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">:</span>
    <span class="s2">&#34;&#34;&#34; è·å–å‘½ä»¤å‚æ•° &#34;&#34;&#34;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&#34;OCR è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—&#34;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;img&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;æŒ‡å®šè¦è¯†åˆ«çš„å›¾ç‰‡&#34;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s2">&#34;-c&#34;</span><span class="p">,</span> <span class="s2">&#34;--config&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&#34;./config.json&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;æŒ‡å®šé…ç½®æ–‡ä»¶&#34;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<h2 id="åŠŸèƒ½ä½¿ç”¨">åŠŸèƒ½ä½¿ç”¨</h2>

<p>å®šä¹‰ main å‡½æ•°ï¼Œå®ç°æ•´ä¸ªè¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="s2">&#34;&#34;&#34; ä¸»å‡½æ•° &#34;&#34;&#34;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">()</span>
    <span class="n">textGO</span> <span class="o">=</span> <span class="n">TextGO</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">textGO</span><span class="o">.</span><span class="n">ocr</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">img</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">words</span><span class="p">)</span></code></pre></div>
<p>åœ¨ä½¿ç”¨å‰è¿˜éœ€è¦æŒ‰ç…§<a href="http://ai.baidu.com/forum/topic/show/867951" target="_blank">åªè¦10åˆ†é’Ÿ å¿«é€ŸæŒæ¡æ–‡å­—è¯†åˆ«</a>ä¸­çš„æ“ä½œè·å–è‡ªå·±çš„ api_key å’Œ secret_key ï¼Œå°†ä»–ä»¬ä»¥ä¸‹é¢çš„å½¢å¼å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œå†™å…¥æ–‡ä»¶æ˜¯ <code>config.json</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span><span class="nt">&#34;api_key&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="nt">&#34;secret_key&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span><span class="p">}</span></code></pre></div>
<blockquote>
<p>å°†è‡ªå·±åº”ç”¨çš„ api_key å’Œ secret_key å¯¹åº”å¡«åˆ°ä¸Šé¢ json å†…å®¹çš„å¯¹åº”ä½ç½®ï¼</p>
</blockquote>

<p>ç„¶åè°ƒç”¨ä¸»å‡½æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></code></pre></div>
<p>æœ€ç»ˆ textGO.py çš„æ–‡ä»¶ä»£ç å°±å®Œæˆäº†ã€‚</p>

<h2 id="æµ‹è¯•åŠŸèƒ½">æµ‹è¯•åŠŸèƒ½</h2>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">python3 textGO.py -h</code></pre></div>
<p>é€šè¿‡ä¸Šè¿°å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">usage: textGO.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-c CONFIG<span class="o">]</span> img

OCR è¯†åˆ«å›¾ç‰‡ä¸­çš„æ–‡å­—

positional arguments:
  img                   æŒ‡å®šè¦è¯†åˆ«çš„å›¾ç‰‡

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -c CONFIG, --config CONFIG
                        æŒ‡å®šé…ç½®æ–‡ä»¶</code></pre></div>
<p>å‡†å¤‡ä¸€å¼ å›¾ç‰‡ï¼Œå‡å¦‚ï¼š</p>

<ul>
<li><p>å›¾ç‰‡è·¯å¾„æ˜¯ <code>~/Desktop/demo.png</code>ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190110231944.png" alt="" /></p></li>

<li><p>é…ç½®æ–‡ä»¶è·¯å¾„ä¸º <code>~/Desktop/config</code></p></li>
</ul>

<p>é‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¹¶å¾—åˆ°ç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">python3 textGO.py -c ~/Desktop/config.json ~/Desktop/demo.png
è·å–ç™¾åº¦ AI æ–‡å­—è¯†åˆ«çš„ Access Token ...
 macOS Mojave
ç‰ˆæœ¬10.14.2
 MacBook Pro<span class="o">(</span><span class="m">15</span>-inch, <span class="m">2016</span><span class="o">)</span>
å¤„ç†å™¨2.6 GHz Intel Core i7
å†…å­˜16GB2133 MHZ LPDDR3
å›¾å½¢å¡ Radeon Pro4502048MB
 Intel HD Graphics <span class="m">530</span> <span class="m">1536</span> MB
åºåˆ—å·co2 SXCQWGTFL</code></pre></div>
<h2 id="ä»£ç æ‰˜ç®¡">ä»£ç æ‰˜ç®¡</h2>

<p>ä»£ç å·²æ‰˜ç®¡è‡³ githubï¼š<a href="https://github.com/smslit/tools-with-script/tree/master/textGO" target="_blank">tools-with-script/textGO/</a></p>]]></content>
		</item>
		
		<item>
			<title>TimeGO ä¸€æ¬¾è½»é‡ç®€æ´çš„è®¡æ—¶æé†’ app</title>
			<link>https://www.smslit.top/2019/01/08/timeGO/</link>
			<pubDate>Tue, 08 Jan 2019 04:35:37 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/01/08/timeGO/</guid>
			<description>&lt;p&gt;ä¹‹å‰äº†è§£åˆ°ç•ªèŒ„å·¥ä½œæ³•ï¼Œä¸€ç›´å¯»æ‰¾ä¸€æ¬¾è½»é‡çš„ç•ªèŒ„é’Ÿçš„ macOS appï¼Œç»“æœå¸‚é¢ä¸Šçš„ app ä¸€èˆ¬éƒ½å¾ˆé‡ï¼Œå¸¦ä¸€äº›è‡ªå·±å¹¶ä¸éœ€è¦çš„åŠŸèƒ½ï¼Œå¥½ä¸å®¹æ˜“æ‰¾åˆ°ä¸€ä¸ªå« &lt;a href=&#34;https://toolinbox.net/iTimer/&#34; target=&#34;_blank&#34;&gt;iTimer&lt;/a&gt; çš„ appï¼Œç»“æœå®ƒåªåŒ…å«ä¸¤ä¸ªæ—¶é—´è®¾ç½®ï¼Œæ·»åŠ è‡ªå®šä¹‰çš„ç«Ÿç„¶æ”¶è´¹ï¼ç®—äº†ï¼ŒåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œé‚£è‡ªå·±å¼€å‘ä¸€æ¬¾å¯ä»¥ç”¨ä½œç•ªèŒ„é’Ÿçš„è®¡æ—¶æé†’ app å¾—äº†ï¼Œä¾¿æœ‰äº† &lt;strong&gt;timeGO&lt;/strong&gt;ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¹‹å‰äº†è§£åˆ°ç•ªèŒ„å·¥ä½œæ³•ï¼Œä¸€ç›´å¯»æ‰¾ä¸€æ¬¾è½»é‡çš„ç•ªèŒ„é’Ÿçš„ macOS appï¼Œç»“æœå¸‚é¢ä¸Šçš„ app ä¸€èˆ¬éƒ½å¾ˆé‡ï¼Œå¸¦ä¸€äº›è‡ªå·±å¹¶ä¸éœ€è¦çš„åŠŸèƒ½ï¼Œå¥½ä¸å®¹æ˜“æ‰¾åˆ°ä¸€ä¸ªå« <a href="https://toolinbox.net/iTimer/" target="_blank">iTimer</a> çš„ appï¼Œç»“æœå®ƒåªåŒ…å«ä¸¤ä¸ªæ—¶é—´è®¾ç½®ï¼Œæ·»åŠ è‡ªå®šä¹‰çš„ç«Ÿç„¶æ”¶è´¹ï¼ç®—äº†ï¼ŒåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œé‚£è‡ªå·±å¼€å‘ä¸€æ¬¾å¯ä»¥ç”¨ä½œç•ªèŒ„é’Ÿçš„è®¡æ—¶æé†’ app å¾—äº†ï¼Œä¾¿æœ‰äº† <strong>timeGO</strong>ã€‚</p>

<h1 id="ç®€ä»‹">ç®€ä»‹</h1>

<p>æŒç»­æ›´æ–°ä¸­ï¼</p>

<ul>
<li><p>å¯é…ç½®æ—¶é—´å’Œé€šçŸ¥ä¿¡æ¯ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹è¡¨è¾¾å¼é…ç½®è®¡æ—¶å™¨åºåˆ—ç»„åˆ
è¡¨è¾¾å¼æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma">$0+1$</pre></div>
<ol>
<li>å…¶ä¸­ 0 å’Œ 1 æ˜¯æ™®é€šè®¡æ—¶å™¨çš„ç¼–å·ï¼Œå®Œæˆåºå· 0 çš„è®¡æ—¶å™¨è®¡æ—¶ä»¥åä¼šè‡ªåŠ¨å¼€å¯åºå· 1 çš„è®¡æ—¶ã€‚</li>
<li>æŒ‡å®šçš„åºå·å¿…é¡»æ˜¯æ™®é€šè®¡æ—¶å™¨çš„ç¼–å·</li>
<li>å¯ä»¥é‡å¤ä½¿ç”¨åºå·ï¼Œæ¯”å¦‚ <strong>$0+1+0+1+0+1+0+1$</strong>ï¼Œä¼šæŒ‰ç…§è¡¨è¾¾å¼é¡ºåºæ‰§è¡Œç›¸åº”è®¡æ—¶å™¨ã€‚</li>
</ol></li>

<li><p>æ”¯æŒè¯­éŸ³æé†’ï¼Œè·Ÿéšè½¯ä»¶çš„è¯­è¨€è®¾ç½®è‡ªåŠ¨é€‰æ‹©ç›¸å…³è¯­è¨€çš„æé†’åŠ©æ‰‹ã€‚</p></li>

<li><p>çŠ¶æ€æ å°å·¥å…·ï¼Œè½»é‡ï¼Œå¯ä»¥å¿«é€Ÿæ§åˆ¶è®¡æ—¶å™¨ï¼Œè®©æ‚¨æ›´åŠ ä¸“æ³¨è‡ªå·±çš„å·¥ä½œï¼ŒçŠ¶æ€æ æ˜¾ç¤ºè¿›åº¦</p></li>

<li><p>è®¾è®¡æ¸…æ–°ï¼Œé€‚åº”ç³»ç»Ÿä¸»é¢˜ï¼ŒDark æ¨¡å¼æ˜¾ç¤ºæ›´ä½³</p></li>

<li><p>å¼€æºï¼Œå·²æ‰˜ç®¡äº githubï¼Œ<a href="https://github.com/smslit/timeGO" target="_blank">smslit/timeGO</a> å®Œå…¨å…è´¹</p></li>

<li><p>æ”¯æŒå¤šç§è¯­è¨€ï¼šç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡</p></li>
</ul>

<p>å¦‚æœæ‚¨å–œæ¬¢ï¼Œè¯·æ‚¨â€œèµ¶å¿«æ‹¿èµ°â€ï¼æœ€æ–°ç‰ˆæœ¬å¯ä»¥å» github é¡¹ç›®ä»“åº“çš„ <a href="https://github.com/smslit/timeGO/releases" target="_blank">release</a> é¡µé¢ä¸‹è½½!</p>

<h1 id="app-æˆªå›¾">App æˆªå›¾</h1>

<h2 id="å›¾æ ‡æˆªå›¾">å›¾æ ‡æˆªå›¾</h2>

<p>å›¾æ ‡è®¾è®¡çµæ„Ÿæ¥æºäº Smartisan OS ç³»ç»Ÿè‡ªå¸¦çš„æ—¶é’Ÿ appã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190108030519.png" width="128px"></p>

<h2 id="åº”ç”¨æˆªå›¾">åº”ç”¨æˆªå›¾</h2>

<ul>
<li><p>æµ…è‰²æ¨¡å¼(Aqua Mode)</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190213182802.jpg" alt="" /></p></li>

<li><p>æ·±è‰²æ¨¡å¼(Dark Aqua Mode)</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190213182843.jpg" alt="" /></p></li>
</ul>

<h1 id="æ”¯æŒ">æ”¯æŒ</h1>

<h2 id="åˆ†äº«">åˆ†äº«</h2>

<p>å¦‚æœæ‚¨è®¤ä¸ºè¿™ä¸ª app è¿˜ä¸é”™çš„è¯ï¼Œé‚£å°±åˆ†äº«ç»™æ‚¨å‘¨è¾¹çš„å°ä¼™ä¼´å§ï¼Œä¸€èµ·æ„Ÿå—åˆ†äº«çš„å¿«ä¹ï¼</p>

<h2 id="åé¦ˆ">åé¦ˆ</h2>

<p>å¦‚æœæ‚¨æœ‰ä»€ä¹ˆå»ºè®®æˆ–è€…ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ï¼Œå°±åé¦ˆä¸€ä¸‹å§ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼è¿›è¡Œåé¦ˆï¼š</p>

<ul>
<li>æ­¤é¡µé¢çš„è¯„è®ºç•™è¨€</li>
<li>app è®¾ç½®çª—å£çš„ <strong>åé¦ˆä¿¡æ¯</strong> åŠŸèƒ½</li>
<li>ç›´æ¥å‘ 5km@smslit.cn å‘é€é‚®ä»¶</li>
</ul>

<h2 id="æ‰“èµ">æ‰“èµ</h2>

<p>å¦‚æœæ‚¨å¾ˆæ¬£èµï¼Œé‚£å°±ç‚¹ä¸‹é¢çš„ <strong>èµèµæ”¯æŒ</strong> æ‰«ç è¯·æˆ‘å–å’–å•¡å§ï¼</p>

<h1 id="æ›´æ–°æ—¥å¿—">æ›´æ–°æ—¥å¿—</h1>

<h2 id="v0-3-0">v0.3.0</h2>

<h3 id="åŠŸèƒ½æ·»åŠ ">åŠŸèƒ½æ·»åŠ </h3>

<ol>
<li>å®šæ—¶å™¨é…ç½®æ”¯æŒæ–‡æœ¬ç¼–è¾‘åŸºæœ¬å¿«æ·é”®</li>
<li>å›½é™…åŒ–APPï¼Œå¹¶æ·»åŠ ç•Œé¢è¯­è¨€çš„è®¾ç½®ï¼Œæ”¯æŒè¯­è¨€ï¼š

<ul>
<li>ç®€ä½“ä¸­æ–‡</li>
<li>ç¹ä½“ä¸­æ–‡</li>
<li>è‹±æ–‡</li>
<li>æ—¥æ–‡</li>
<li>éŸ©æ–‡</li>
</ul></li>
</ol>

<h3 id="éƒ¨åˆ†è°ƒæ•´">éƒ¨åˆ†è°ƒæ•´</h3>

<ol>
<li>è¯­éŸ³æé†’è·Ÿéšç•Œé¢è¯­è¨€è®¾ç½®è°ƒæ•´å£°éŸ³ã€‚</li>
<li>è°ƒæ•´å®šæ—¶å™¨é…ç½®è¯»å–çš„å¤„ç†</li>
<li>è°ƒæ•´æ§ä»¶å¸ƒå±€</li>
</ol>

<h3 id="é—®é¢˜ä¿®å¤">é—®é¢˜ä¿®å¤</h3>

<ol>
<li>ä¿®å¤å®šæ—¶å™¨å…¬å¼è¾“å…¥ä¸€ä¸ª$ç¬¦å¼•èµ·å´©æºƒçš„é—®é¢˜</li>
<li>ä¿®å¤æ§ä»¶å¸ƒå±€é—®é¢˜</li>
<li>è§£å†³æ²¡æœ‰å®šæ—¶å™¨è®¾ç½®æ—¶ç‚¹å‡»å¼€å§‹æŒ‰é’®å´©æºƒçš„é—®é¢˜</li>
</ol>

<h2 id="v0-2-1">v0.2.1</h2>

<h3 id="åŠŸèƒ½æ·»åŠ -1">åŠŸèƒ½æ·»åŠ </h3>

<p>æ·»åŠ è¯­éŸ³æé†’æ”¯æŒï¼Œå¹¶æ·»åŠ ç›¸å…³é…ç½®é¡¹</p>

<h3 id="éƒ¨åˆ†è°ƒæ•´-1">éƒ¨åˆ†è°ƒæ•´</h3>

<ul>
<li>åˆ é™¤æ²¡å¿…è¦çš„actionè¿æ¥</li>
<li>ä¼˜åŒ–è®¾ç½®æ•°æ®æ“ä½œ</li>
<li>æ”¯æŒ macOS 10.13</li>
<li>å…³äºçª—å£æ ‡é¢˜æ é€æ˜</li>
</ul>

<h2 id="v0-2-0">v0.2.0</h2>

<h3 id="åŠŸèƒ½æ·»åŠ -2">åŠŸèƒ½æ·»åŠ </h3>

<ol>
<li><strong>çŠ¶æ€æ æ˜¾ç¤ºè®¡æ—¶å™¨è¿›åº¦</strong></li>
<li>å…³äºçª—å£æ·»åŠ é“¾æ¥</li>
<li>æ·»åŠ è®¡æ—¶å™¨çš„å¤‡æ³¨åŠŸèƒ½;</li>
<li><strong>æ·»åŠ å½©è›‹: å¯å®šä¹‰è®¡æ—¶å™¨åºåˆ—ï¼Œä»»æ„ç»„åˆå·²æœ‰æ™®é€šè®¡æ—¶å™¨</strong></li>
</ol>

<h3 id="éƒ¨åˆ†è°ƒæ•´-2">éƒ¨åˆ†è°ƒæ•´</h3>

<ol>
<li>è°ƒæ•´é€€å‡ºæŒ‰é’®åˆ°ç¬¬ä¸€å±‚å¼¹çª—ä¸­ï¼Œæ–¹ä¾¿é€€å‡º</li>
<li>åˆ é™¤æé†’ä¿¡æ¯label;  è°ƒæ•´è®¡æ—¶é€‰æ‹©å™¨çš„é¡¹ç›®æ ‡é¢˜æ ¼å¼</li>
<li>è°ƒæ•´æ–°æ·»åŠ è®¡æ—¶å™¨é»˜è®¤å¤‡æ³¨ä¸ºç©ºå­—ç¬¦ä¸²</li>
</ol>

<h3 id="é—®é¢˜ä¿®å¤-1">é—®é¢˜ä¿®å¤</h3>

<ol>
<li>ä¿®å¤è®¡æ—¶å™¨å¼€èµ·æ—¶ä»æ˜¯æ»¡è¿›åº¦çš„ bug</li>
<li>ä¿®å¤appè¿è¡Œä¹…äº†æ— æ³•å‡ºç°è¿›åº¦æ˜¾ç¤ºçš„é—®é¢˜</li>
<li>ä¿®å¤è½¯ä»¶ç‰ˆæœ¬å·æ˜¾ç¤ºä¸å…¨çš„é—®é¢˜</li>
</ol>

<h2 id="v0-1-0">v0.1.0</h2>

<ol>
<li>æ·»åŠ è®¡æ—¶å™¨é…ç½®åŠŸèƒ½</li>
<li>æ·»åŠ é¢å¤–åŠŸèƒ½ï¼šåé¦ˆå’Œå…³äº</li>
<li>ä¼˜åŒ–éƒ¨åˆ†ä»£ç å®ç°ï¼Œä¿®å¤ç¨‹åºç‰¹å®šæƒ…å†µå´©æºƒçš„é—®é¢˜</li>
</ol>

<h2 id="v0-0-0">v0.0.0</h2>

<ul>
<li>å›ºå®šçš„æ—¶é—´é€‰æ‹©</li>
<li>å€’è®¡æ—¶ç»“æŸé€šçŸ¥</li>
<li>çŠ¶æ€æ å°å·¥å…·çš„å½¢å¼è¿è¡Œ</li>
</ul>]]></content>
		</item>
		
		<item>
			<title>å¼€å‘çš„ macOS app æ‰“åŒ…ä¸ºç²¾ç¾çš„ dmg</title>
			<link>https://www.smslit.top/2019/01/06/mac_app_to_dmg/</link>
			<pubDate>Sun, 06 Jan 2019 21:06:56 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/01/06/mac_app_to_dmg/</guid>
			<description>&lt;p&gt;æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªåä¸º timeGO çš„ macOS åº”ç”¨ç¨‹åºï¼Œä¸€æ¬¾å€’è®¡æ—¶åº”ç”¨ã€‚çœ‹åˆ°ç½‘ä¸Šåˆ«äººå®¶ app çš„ dmg å®‰è£…åŒ…ï¼Œç¾å¾—å¾ˆï¼Œæœ¬æ–‡å°±ä»¥è¿™ä¸ª app ä¸ºä¾‹è¯´ä¸€ä¸‹å¦‚ä½•å°†è‡ªå·±çš„åº”ç”¨å‘å¸ƒå¹¶æ‰“åŒ…æˆå¸¦å›¾æ ‡å’Œå®‰è£…æç¤ºèƒŒæ™¯çš„ dmg å®‰è£…åŒ…ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106211429.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ªåä¸º timeGO çš„ macOS åº”ç”¨ç¨‹åºï¼Œä¸€æ¬¾å€’è®¡æ—¶åº”ç”¨ã€‚çœ‹åˆ°ç½‘ä¸Šåˆ«äººå®¶ app çš„ dmg å®‰è£…åŒ…ï¼Œç¾å¾—å¾ˆï¼Œæœ¬æ–‡å°±ä»¥è¿™ä¸ª app ä¸ºä¾‹è¯´ä¸€ä¸‹å¦‚ä½•å°†è‡ªå·±çš„åº”ç”¨å‘å¸ƒå¹¶æ‰“åŒ…æˆå¸¦å›¾æ ‡å’Œå®‰è£…æç¤ºèƒŒæ™¯çš„ dmg å®‰è£…åŒ…ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106211429.png" alt="" /></p>

<h1 id="å‘å¸ƒ-app">å‘å¸ƒ app</h1>

<p>åé‡Œä½¿ç”¨ xcode å¼€å‘ timeGO è¿™æ¬¾åº”ç”¨ï¼Œå› ä¸ºè¦ç²¾ç¾æ‰€ä»¥æœ¬èº«åº”ç”¨ä¹Ÿå¾—ç²¾ç¾å¯¹å§ï¼æ‰€ä»¥åé‡Œä¸ºåº”ç”¨å¼€å‘ä¸“é—¨è®¾è®¡äº†ç²¾ç¾çš„ appIcon (å›¾æ ‡)ï¼Œè¿™æ ·å¯¼å‡ºçš„ app ä¼šæœ‰ç²¾ç¾çš„å›¾æ ‡ã€‚å‘å¸ƒ app çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œè¯´ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„å‘å¸ƒåˆ°æœ¬åœ°çš„æ–¹å¼ã€‚</p>

<ol>
<li>xcode æ‰“å¼€åº”ç”¨å·¥ç¨‹</li>

<li><p>èœå•æ é€‰æ‹© <strong>product</strong> -&gt; <strong>Archive</strong>ï¼Œæ­¤æ—¶ xcode å°±ä¼šæ‰“åŒ…åº”ç”¨ï¼Œå®Œæˆåä¼šè·³åˆ°ç±»ä¼¼å¦‚ä¸‹çš„åŒ…ç®¡ç†çª—å£:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106212650.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <code>Distribute App</code> æŒ‰é’®ï¼Œé€‰æ‹© <code>Copy App</code>ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106212928.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <code>Next</code>ï¼Œé€‰æ‹©å¯¼å‡ºåç§°å’Œç›®å½•ï¼Œè¿™é‡Œåç§°ä½¿ç”¨é»˜è®¤ï¼Œç›®å½•é€‰æ‹© <code>Desktop</code>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106213101.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <code>Export</code> ä¹‹åï¼Œå°±ä¼šåœ¨ <code>Desktop</code> ä¸­çœ‹åˆ°ä¸€ä¸ªæ­¥éª¤4ä¸­çš„åç§°ç›¸åŒçš„ç›®å½•ï¼Œé‡Œé¢å°±æ˜¯å¯¼å‡ºçš„ app:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106213609.png" alt="" /></p></li>
</ol>

<p>ä»¥ä¸Šå°±å®Œæˆäº† app çš„å‘å¸ƒã€‚</p>

<h1 id="å‡†å¤‡ç´ æ">å‡†å¤‡ç´ æ</h1>

<p>åˆ¶ä½œ dmg å‰éœ€è¦å‡†å¤‡ app çš„å›¾æ ‡æ–‡ä»¶ icns å’ŒèƒŒæ™¯å›¾ã€‚</p>

<h2 id="app-çš„å›¾æ ‡æ–‡ä»¶">app çš„å›¾æ ‡æ–‡ä»¶</h2>

<p>è¿™é‡Œéœ€è¦çš„å›¾æ ‡æ–‡ä»¶ä¸º icns æ ¼å¼ï¼Œåé‡Œåœ¨å¼€å‘ timeGO çš„æ—¶å€™åªå‡†å¤‡äº† png æ ¼å¼çš„æ–‡ä»¶ï¼Œéš¾é“è¿˜å¾—è¿›è¡Œè½¬æ¢ä¸æˆï¼Œå…¶å®ä¸éœ€è¦ï¼ŒmacOS çš„åº”ç”¨å›¾æ ‡éƒ½æ˜¯ icns æ ¼å¼ï¼Œæ‰€ä»¥å¯ä»¥ä»åˆšåˆšå¯¼å‡ºçš„ app ä¸­è·å–è¿™ä¸ªå›¾æ ‡æ–‡ä»¶ã€‚</p>

<ol>
<li>åœ¨åˆšæ‰å¯¼å‡ºçš„ app ä¸Šå³é”®ï¼Œé€‰æ‹© <code>æ˜¾ç¤ºåŒ…å†…å®¹</code></li>
<li>æ­¤æ—¶ä¼šæ‰“å¼€æ˜¾ç¤º app å†…çš„æ–‡ä»¶ï¼Œä¾æ¬¡è¿›å…¥ <code>Contents</code> - <code>Resources</code></li>

<li><p>ä¸å‡ºæ„å¤–å°±ä¼šçœ‹åˆ°ä¸€ä¸ªæ ¼å¼ä¸º icns çš„å›¾ç‰‡æ–‡ä»¶ï¼Œå…¶æ ·å­ä¸ app çš„å›¾æ ‡ä¸€æ ·ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ icnsï¼Œå°†å…¶æ‹·è´åˆ°æ¡Œé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106215254.png" alt="" /></p></li>
</ol>

<h2 id="èƒŒæ™¯å›¾ç‰‡">èƒŒæ™¯å›¾ç‰‡</h2>

<p>ç›¸ä¿¡è¯»è€…åœ¨å®‰è£…ä¸€ä¸‹ dmg æ–‡ä»¶çš„åº”ç”¨æ—¶ï¼Œéƒ½ä¼šçŸ¥é“ï¼Œæ‰“å¼€ dmg æ–‡ä»¶åï¼Œç›®å½•ä¸­æœ‰ä¸ªèƒŒæ™¯å›¾ç‰‡æç¤ºå°† app æ‹–æ”¾åˆ° applications æ–‡ä»¶å¤¹ä¸­ï¼Œåƒ qq for macçš„ä¹Ÿæ˜¯å¦‚æ­¤ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106215921.png" alt="" /></p>

<p>æ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªè¿™æ ·çš„èƒŒæ™¯å›¾ï¼Œè‡ªå·±è®¾è®¡å°±å¥½äº†ï¼Œè¯´æ˜æ„æ€å°± OKï¼Œåé‡Œä½¿ç”¨ sketch è®¾è®¡äº†ä¸€ä¸ªç®€é™‹çš„èƒŒæ™¯å›¾( png æ ¼å¼)ï¼Œä¹Ÿæ”¾åœ¨äº†æ¡Œé¢ï¼Œåä¸º dmg.png:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106221232.png" alt="" /></p>

<h1 id="åˆ¶ä½œ-dmg">åˆ¶ä½œ dmg</h1>

<p>æŸ¥çœ‹ app ã€å‡†å¤‡çš„ icns å›¾æ ‡å’ŒèƒŒæ™¯å›¾å…±å ç©ºé—´çš„å¤§å°ï¼Œåé‡Œè¿™é‡Œæ˜¯ï¼š</p>

<table>
<thead>
<tr>
<th>æ–‡ä»¶</th>
<th>ç©ºé—´å¤§å°</th>
</tr>
</thead>

<tbody>
<tr>
<td>timeGO.app</td>
<td>çº¦13.1MB</td>
</tr>

<tr>
<td>AppIcon.icns</td>
<td>65KB</td>
</tr>

<tr>
<td>dmg.png</td>
<td>33KB</td>
</tr>

<tr>
<td>å…±è®¡</td>
<td>çº¦13.2MB(è‚¯å®šå°äº13.3MB)</td>
</tr>
</tbody>
</table>

<p>è¿™é‡Œç»Ÿè®¡ä¸‰ä¸ªæ–‡ä»¶çš„å¤§å°æ˜¯å› ä¸ºä¸€ä¼šå„¿è¦ä½¿ç”¨ã€‚</p>

<h2 id="æ–°å»ºç©ºçš„-dmg-æ–‡ä»¶">æ–°å»ºç©ºçš„ dmg æ–‡ä»¶</h2>

<ol>
<li>æ‰“å¼€ <code>ç£ç›˜å·¥å…·.app</code></li>
<li>èœå•æ ä¸­ï¼š<code>æ–‡ä»¶</code> - <code>æ–°å»ºæ˜ åƒ</code> - <code>ç©ºç™½æ˜ åƒ</code></li>

<li><p>åœ¨å‡ºæ¥çš„å¯¹è¯æ¡†ä¸­æŒ‰æ‚¨çš„éœ€æ±‚ä¿®æ”¹æ©™è‰²æ¡†åœˆèµ·æ¥çš„åœ°æ–¹ï¼Œå…¶ä¸­ç©ºé—´å¤§å°è®¾ç½®ç•¥å¤§äºä¸Šé¢æåˆ°çš„ 13.2MB å³å¯ï¼Œè¿™é‡Œè®¾ç½®ä¸º 14.5MBï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106222645.png" alt="" /></p></li>

<li><p>åˆ›å»ºå®Œæˆåå°±å¯ä»¥åœ¨æ¡Œé¢çœ‹åˆ°ç©ºç™½çš„æ˜ åƒ</p></li>
</ol>

<h2 id="æ”¾ç½®-dmg-ä¸­çš„æ–‡ä»¶">æ”¾ç½® dmg ä¸­çš„æ–‡ä»¶</h2>

<ol>
<li><p>å°†ç¬¬ä¸€èŠ‚ä¸­å¯¼å‡ºçš„ app æ–‡ä»¶ã€æ¡Œé¢ä¸Šçš„ icns æ–‡ä»¶å’ŒèƒŒæ™¯å›¾å…¨éƒ¨æ‹–è¿›æ–°å»ºçš„æ˜ åƒæ–‡ä»¶ä¸­:</p>

<p><video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2019-01-06%20_10.42.31.mp4" controls="controls" width="640px"></p></li>

<li><p>åœ¨æ˜ åƒä¸­åˆ›å»º <code>/Applications</code> çš„è½¯é“¾æ¥(åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œcd çš„ç›®å½•æ”¹ä¸ºæ‚¨å¯¹åº”æ˜ åƒæŒ‚è½½çš„ç›®å½•)</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell"><span class="nb">cd</span> /Volumes/timeGO
ln -s /Applications Applications</code></pre></div></li>
</ol>

<h2 id="é…ç½®æ˜ åƒæ–‡ä»¶çš„æ˜¾ç¤ºé€‰é¡¹">é…ç½®æ˜ åƒæ–‡ä»¶çš„æ˜¾ç¤ºé€‰é¡¹</h2>

<ol>
<li>æ‰“å¼€æ˜ åƒæŒ‚è½½ç›®å½•ï¼Œç›®å½•ä¸­ä¼šçœ‹åˆ°å››ä¸ªæ–‡ä»¶ï¼štimeGO.app, dmg.png, AppIcon.icns å’Œ Applications</li>

<li><p>ç›®å½•ä¸­å³é”®ç‚¹å‡» <code>æŸ¥çœ‹æ˜¾ç¤ºé€‰é¡¹</code>ï¼ŒæŒ‰ç…§ä¸‹å›¾æ›´æ”¹é€‰é¡¹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106230655.png" alt="" /></p></li>

<li><p>æŠŠ dmg.png æ‹–å…¥æ˜¾ç¤ºé€‰é¡¹ä¸‹é¢çš„æ¡†ä¸­ï¼Œä¸ºç›®å½•è®¾ç½®èƒŒæ™¯ï¼Œè°ƒæ•´ <code>timeGO.app</code> å’Œ <code>Applications</code> åˆ°åˆé€‚ä½ç½®</p></li>

<li><p>è°ƒæ•´çª—å£å¤§å°åˆšå¥½è¦†ç›–èƒŒæ™¯å›¾</p></li>

<li><p>åœ¨æ¡Œé¢æ˜ åƒæŒ‚è½½ç›®å½•ä¸Šå³å‡»é€‰æ‹© <code>æ˜¾ç¤ºç®€ä»‹</code>ï¼Œä¼šè·³å‡ºç›®å½•çš„ç®€ä»‹å¯¹è¯æ¡†ï¼Œæ‹–åŠ¨ç›®å½•ä¸­çš„å›¾æ ‡æ–‡ä»¶åˆ°ç®€ä»‹çª—å£å·¦ä¸Šè§’çš„ logo ä½ç½®ï¼Œå°±æŠŠæŒ‚è½½ç›®å½•çš„å›¾æ ‡ä¿®æ”¹ä¸ºåº”ç”¨å›¾æ ‡äº†</p></li>

<li><p>æœ€åéšè—å›¾æ ‡æ–‡ä»¶å’ŒèƒŒæ™¯å›¾ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell"><span class="nb">cd</span> /Volumes/timeGO
chflags hidden AppIcon.icns
chflags hidden dmg.png</code></pre></div></li>
</ol>

<p>æœ€ç»ˆæ‰“å¼€æ˜ åƒçš„æŒ‚è½½ç›®å½•ä¼šæ˜¯ç±»ä¼¼ä¸‹é¢çš„æ ·å­ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106211429.png" alt="" /></p>

<h2 id="è½¬æ¢-dmg">è½¬æ¢ dmg</h2>

<p>æœ€åä¸€æ­¥è½¬æ¢ dmg æ–‡ä»¶ï¼Œè¿™ä¸€æ­¥ä¸»è¦èµ·åˆ°çš„ä½œç”¨æ˜¯å‹ç¼©æ–‡ä»¶ï¼Œå‡å° dmg æ–‡ä»¶çš„å ç”¨ç©ºé—´ã€‚</p>

<ol>
<li>å¼¹å‡ºæŒ‚è½½çš„æ˜ åƒç›®å½•</li>
<li>æ‰“å¼€ <code>ç£ç›˜å·¥å…·.app</code></li>

<li><p>èœå•æ  - <code>æ˜ åƒ</code> - <code>è½¬æ¢</code>ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©åˆšåˆšåˆ›å»ºçš„ dmg æ–‡ä»¶ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106232643.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <code>é€‰å–</code> åï¼Œåœ¨å¼¹çª—ä¸­é…ç½®åç§°å’Œå¯¼å‡ºç›®å½•ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190106232835.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <code>è½¬æ¢</code>ï¼Œå®Œæˆåå°±çœ‹åˆ°äº†æœ€ç»ˆçš„ dmg æ–‡ä»¶äº†</p></li>
</ol>

<p>æœ€åå¯ä»¥æ‰“å¼€è¿™ä¸ª dmg éªŒè¯ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯éªšæ°”äº†ï¼</p>]]></content>
		</item>
		
		<item>
			<title>ä¸º mac è¿æ¥çš„ 2k æ˜¾ç¤ºå™¨å¼€å¯ HiDPI</title>
			<link>https://www.smslit.top/2019/01/02/mac_hidpi/</link>
			<pubDate>Wed, 02 Jan 2019 17:20:38 +0800</pubDate>
			
			<guid>https://www.smslit.top/2019/01/02/mac_hidpi/</guid>
			<description>&lt;p&gt;æœ€è¿‘å…¥æ‰‹äº† thinkvision çš„ 24å¯¸æ˜¾ç¤ºå™¨ &lt;a href=&#34;https://zhuanlan.zhihu.com/p/27516738&#34; target=&#34;_blank&#34;&gt;t24h-10&lt;/a&gt;ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©è¿™æ¬¾æ˜¾ç¤ºå™¨ï¼Œé™¤äº†å¾ˆå¥½çš„å·¥ä¸šè®¾è®¡å’Œåšå·¥å¤–ï¼Œæœ€ä¸»è¦çš„æ˜¯æ”¯æŒ type-c è¿æ¥ï¼Œç”¨æ¥æ˜¾ç¤ºçš„åŒæ—¶ï¼Œæ‰©å±•å‡ºäº† 4 ä¸ªå¸¸è§„çš„ USB3.0 æ¥å£å’Œ 1 ä¸ª 3.5mm è€³éº¦æ¥å£ï¼Œå¹¶ä¸”ä½¿ç”¨ type-c çš„è¯ï¼Œæ˜¾ç¤ºå™¨å¯ä»¥ä¸ºæˆ‘çš„ macbook pro åå‘ä¾›ç”µã€‚è™½ç„¶æ˜¯ 2k(2560*1440) çš„åˆ†è¾¨ç‡ï¼Œä½†å› ä¸ºè¿‘è·ç¦»ä½¿ç”¨è¿˜éš¾å…æœ‰é¢—ç²’æ„Ÿï¼ŒåŒæ—¶æ˜¾ç¤ºå†…å®¹ä¹Ÿä¼šåå°ï¼Œç›´è§‚æ„Ÿå—å°±æ˜¯ä¸ç»†è…»ï¼Œå¿ƒé‡Œè¿˜æ˜¯æœ‰ä¸ªç–™ç˜©ï¼è¿˜å¥½æœ€è¿‘äº†è§£åˆ° macOS ä¸Šæ‹¥æœ‰ HiDPI&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:Macbook-2K-HiDPI&#34;&gt;&lt;a href=&#34;#fn:Macbook-2K-HiDPI&#34;&gt;1&lt;/a&gt;&lt;/sup&gt; æ¸²æŸ“æŠ€æœ¯ï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹å¦‚ä½•ä¸ºè‡ªå·±çš„ 2K æ˜¾ç¤ºå™¨å¼€å¯ HiDPI å®ç° Retina çš„æ•ˆæœ&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:retina-HiDPI-htt&#34;&gt;&lt;a href=&#34;#fn:retina-HiDPI-htt&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;ã€‚&lt;/p&gt;

&lt;p&gt;é«˜PPI(ç¡¬ä»¶) + HiDPIæ¸²æŸ“(è½¯ä»¶) = æ›´ç»†è…»çš„æ˜¾ç¤ºæ•ˆæœ(retina)&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190102211703.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘å…¥æ‰‹äº† thinkvision çš„ 24å¯¸æ˜¾ç¤ºå™¨ <a href="https://zhuanlan.zhihu.com/p/27516738" target="_blank">t24h-10</a>ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©è¿™æ¬¾æ˜¾ç¤ºå™¨ï¼Œé™¤äº†å¾ˆå¥½çš„å·¥ä¸šè®¾è®¡å’Œåšå·¥å¤–ï¼Œæœ€ä¸»è¦çš„æ˜¯æ”¯æŒ type-c è¿æ¥ï¼Œç”¨æ¥æ˜¾ç¤ºçš„åŒæ—¶ï¼Œæ‰©å±•å‡ºäº† 4 ä¸ªå¸¸è§„çš„ USB3.0 æ¥å£å’Œ 1 ä¸ª 3.5mm è€³éº¦æ¥å£ï¼Œå¹¶ä¸”ä½¿ç”¨ type-c çš„è¯ï¼Œæ˜¾ç¤ºå™¨å¯ä»¥ä¸ºæˆ‘çš„ macbook pro åå‘ä¾›ç”µã€‚è™½ç„¶æ˜¯ 2k(2560*1440) çš„åˆ†è¾¨ç‡ï¼Œä½†å› ä¸ºè¿‘è·ç¦»ä½¿ç”¨è¿˜éš¾å…æœ‰é¢—ç²’æ„Ÿï¼ŒåŒæ—¶æ˜¾ç¤ºå†…å®¹ä¹Ÿä¼šåå°ï¼Œç›´è§‚æ„Ÿå—å°±æ˜¯ä¸ç»†è…»ï¼Œå¿ƒé‡Œè¿˜æ˜¯æœ‰ä¸ªç–™ç˜©ï¼è¿˜å¥½æœ€è¿‘äº†è§£åˆ° macOS ä¸Šæ‹¥æœ‰ HiDPI<sup class="footnote-ref" id="fnref:Macbook-2K-HiDPI"><a href="#fn:Macbook-2K-HiDPI">1</a></sup> æ¸²æŸ“æŠ€æœ¯ï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹å¦‚ä½•ä¸ºè‡ªå·±çš„ 2K æ˜¾ç¤ºå™¨å¼€å¯ HiDPI å®ç° Retina çš„æ•ˆæœ<sup class="footnote-ref" id="fnref:retina-HiDPI-htt"><a href="#fn:retina-HiDPI-htt">2</a></sup>ã€‚</p>

<p>é«˜PPI(ç¡¬ä»¶) + HiDPIæ¸²æŸ“(è½¯ä»¶) = æ›´ç»†è…»çš„æ˜¾ç¤ºæ•ˆæœ(retina)</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190102211703.png" alt="" /></p>

<p>æ“ä½œå¹³å°ï¼š</p>

<ul>
<li>macbook pro 15å¯¸ 2016ç‰ˆ</li>
<li>thinkvision t24h-10</li>
<li>macOS Mojave (10.14)</li>
</ul>

<h1 id="å…³é—­-sip">å…³é—­ SIP</h1>

<p>å› ä¸ºåé¢çš„é…ç½®ä¸­ä¼šéœ€è¦è°ƒæ•´ <code>/System/</code>ï¼Œ<strong>System Integrity Protection</strong>(SIP) ä¼šç¦æ­¢æ“ä½œï¼Œæ‰€ä»¥éœ€è¦ç¦ç”¨ SIPï¼Œæ¥è·å–å¯¹ <code>/System/</code> çš„æ“ä½œæƒé™ã€‚</p>

<ol>
<li>é‡å¯ macï¼Œå‡ºç°è‹¹æœ logo ä¹‹å‰æŒ‰ä½ <code>command</code> + <code>r</code> ç»„åˆé”®ï¼Œå¯åŠ¨åˆ° recovery æ¨¡å¼</li>
<li>èœå•æ -å®ç”¨å·¥å…·-ç»ˆç«¯ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£</li>
<li>è¾“å…¥å‘½ä»¤ <code>csrutil disable</code> å³å¯ç¦ç”¨ SIP<sup class="footnote-ref" id="fnref:How-to-Disable-S"><a href="#fn:How-to-Disable-S">3</a></sup></li>
<li>é‡å¯ mac è¿›å…¥ macOS æ­£å¸¸æ¨¡å¼</li>
</ol>

<h1 id="å¼€å¯-hidpi">å¼€å¯ HiDPI</h1>

<p>ä½¿ç”¨å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">sudo defaults write /Library/Preferences/com.apple.windowserver.plist DisplayResolutionEnabled -bool true</code></pre></div>
<h1 id="è·å–æ˜¾ç¤ºå™¨çš„-id">è·å–æ˜¾ç¤ºå™¨çš„ ID</h1>

<p>ä½¿ç”¨å‘½ä»¤è·å–æ˜¾ç¤ºå™¨çš„ Product ID å’Œ Vendor IDï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">ioreg -lw0 <span class="p">|</span> grep IODisplayPrefsKey</code></pre></div>
<p>æˆ‘çš„ mac è·å–çš„æ˜¾ç¤ºå™¨ä¿¡æ¯ç»“æœæ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">    <span class="p">|</span> <span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span> <span class="p">|</span>   <span class="p">|</span>       <span class="s2">&#34;IODisplayPrefsKey&#34;</span> <span class="o">=</span> <span class="s2">&#34;IOService:/AppleACPIPlatformExpert/PCI0@0/AppleACPIPCI/PEG0@1/IOPP/GFX0@0/ATY,Berbice@3/AMDFramebufferVIB/display0/AppleDisplay-30ae-61b5&#34;</span></code></pre></div>
<ol>
<li>å¤–æ¥æ˜¾ç¤ºå™¨æ ‡è®°ä¸º <code>AppleDisplay</code></li>
<li>å†…å»ºæ˜¾ç¤ºå™¨æ ‡è®°ä¸º <code>AppleBacklightDisplay</code></li>
</ol>

<p>å› ä¸ºæˆ‘åªåœ¨ç”¨å¤–æ¥æ˜¾ç¤ºå™¨ï¼Œæ‰€ä»¥åªå¾—åˆ°äº†å¤–æ¥æ˜¾ç¤ºå™¨çš„ä¿¡æ¯ï¼Œä¸Šè¿°æ ‡è®°åœ¨æ‰“å°ä¿¡æ¯çš„æœ€åå‡ºç°ã€‚</p>

<p><code>AppleDisplay</code> çš„åé¢æœ‰ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°ï¼š</p>

<ol>
<li>å‰ä¸€ä¸ªä¹Ÿå°±æ˜¯ <strong>30ae</strong> ï¼Œæ˜¯ <code>DisplayVendorID</code></li>
<li>åä¸€ä¸ªä¹Ÿå°±æ˜¯ <strong>61b5</strong>ï¼Œæ˜¯ <code>DisplayProductID</code></li>
</ol>

<h1 id="æ·»åŠ æ˜¾ç¤ºé…ç½®æ–‡ä»¶">æ·»åŠ æ˜¾ç¤ºé…ç½®æ–‡ä»¶</h1>

<p>éœ€è¦è®¿é—® <a href="https://comsysto.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/" target="_blank">SCALED RESOLUTIONS FOR YOUR MACBOOKS EXTERNAL MONITOR</a> é’ˆå¯¹è‡ªå·±çš„æ˜¾ç¤ºå™¨æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚åˆ¶ä½œæ˜¾ç¤ºé…ç½®æ–‡ä»¶ã€‚</p>

<p>æ‰“å¼€ä¸Šé¢çš„é“¾æ¥ä¼šçœ‹åˆ°å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190102215620.png" alt="" /></p>

<p>å…¶ä¸­å³è¾¹åŒºåŸŸæ¥æ›´æ”¹é…ç½®ï¼Œå·¦è¾¹æ˜¾ç¤ºé…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚</p>

<ol>
<li>ä¿®æ”¹ <code>DisplayProductName</code> åçš„å†…å®¹ç”¨æ¥æ›´æ”¹æ˜¾ç¤ºå™¨çš„åç§°ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ <code>T24H-10</code></li>
<li>ä¿®æ”¹ <code>DisplayProductID</code> ï¼Œè¿™é‡Œä¿®æ”¹ä¸ºåˆšæ‰è·å–çš„ <code>61b5</code>ï¼Œå­—æ¯éœ€è¦å°å†™</li>
<li>ä¿®æ”¹ <code>DisplayVendorID</code> ï¼Œè¿™é‡Œä¿®æ”¹ä¸ºåˆšæ‰è·å–çš„ <code>30ae</code>ï¼Œå­—æ¯éœ€è¦å°å†™</li>
<li>ä¿®æ”¹ <code>Scale Resolutions</code>ï¼Œè¿™é‡Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤çš„é…ç½®ï¼Œå¦‚æœä½ è¦æ·»åŠ è‡ªå·±çš„åˆ†è¾¨ç‡ï¼Œéœ€è¦æ³¨æ„ä¹Ÿè¦æ·»åŠ  2 å€äºç›®æ ‡åˆ†è¾¨ç‡çš„é¡¹ï¼Œè§‚å¯Ÿé»˜è®¤çš„åˆ†è¾¨ç‡é…ç½®é¡¹éƒ½æ˜¯æˆå¯¹çš„ï¼Œä¸€ä¸ªç›®æ ‡åˆ†è¾¨ç‡ï¼Œåœ¨å…¶ä¸Šæœ‰ä¸ªäºŒå€äºç›®æ ‡åˆ†è¾¨ç‡çš„é¡¹</li>
<li>ç‚¹å‡»ä¸Šå›¾å·¦è¾¹æ å³ä¸‹è§’çš„ <code>DisplayProductID-61b5</code> æŒ‰é’®ï¼ˆæŒ‰é’®åç§°ä¼šæ ¹æ® ProductId å‘½åï¼‰ï¼Œå°±ä¼šä¸‹è½½åˆ°ä¸€ä¸ªæ–‡ä»¶ <code>DisplayProductID-61b5.plist</code>(æˆ‘çš„è¿™ä¸ªæ–‡ä»¶ä¸‹è½½åˆ°äº† <code>~/Downloads</code> ä¸‹)</li>

<li><p>æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œç›®å½•åä¸º <code>DisplayVendorID-xxxx</code> ï¼Œå…¶ä¸­ <code>xxxx</code> ä¸ºä¸Šé¢æŸ¥åˆ°çš„ <code>30ae</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">mkdir DisplayVendorID-30ae</code></pre></div></li>

<li><p>é‡å‘½åä¸‹è½½åˆ°çš„é…ç½®æ–‡ä»¶(å»æ‰ .plist åç¼€)ï¼Œå¹¶æ”¾ç½®åˆ°åˆšåˆ›å»ºçš„ <code>DisplayVendorID-30ae</code> ç›®å½•ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">mv ~/Downloads/DisplayProductID-61b5.plist DisplayVendorID-30ae/DisplayProductID-61b5</code></pre></div></li>

<li><p>å°† <code>DisplayVendorID-30ae</code> ç›®å½•æ‹·è´åˆ° <code>/System/Library/Displays/Contents/Resources/Overrides/</code> ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">sudo mv DisplayVendorID-30ae /System/Library/Displays/Contents/Resources/Overrides/</code></pre></div></li>
</ol>

<p><strong>æ³¨æ„âš ï¸</strong></p>

<p>ä¸Šé¢ç¬¬ 8 å°æ­¥å¯èƒ½åœ¨æ›´æ–° macOS Catalina åæ“ä½œä¸èƒ½æˆåŠŸ(æç¤º <code>read-only file system</code>)ï¼Œè¯„è®ºåŒºæœ‰ç½‘å‹æä¾›äº†è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦ä¿®æ”¹ç³»ç»Ÿæ ¹ç›®å½•çš„æƒé™ï¼Œä½¿ç”¨ <code>mount</code> å‘½ä»¤å°†ç›®å½•ä» read-only å˜ä¸º read-writeï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo mount -uw /
killall Finder</code></pre></div>
<p><strong>åœ¨ mac é‡å¯åä¼šæ¢å¤ä¸ºåŸæœ‰çš„æƒé™ï¼Œäº²æµ‹å¯ç”¨ï¼Œæ„Ÿè°¢ç½‘å‹æä¾›è§£å†³æ–¹æ¡ˆï¼</strong></p>

<h1 id="å¼€å¯-sip">å¼€å¯ SIP</h1>

<p>ä¸ºäº†ç³»ç»Ÿå®‰å…¨è¿˜æ˜¯è¦æŠŠ SIP å¼€å¯çš„ï¼Œæ›´æ”¹ SIP éœ€è¦é‡å¯ï¼Œæ­£å¥½ä¸Šé¢çš„æ˜¾ç¤ºé…ç½®ä¹Ÿå¾—é‡å¯ç”Ÿæ•ˆã€‚</p>

<ol>
<li>é‡å¯ macï¼Œå‡ºç°è‹¹æœ logo ä¹‹å‰æŒ‰ä½ <code>command</code> + <code>r</code> ç»„åˆé”®ï¼Œå¯åŠ¨åˆ° recovery æ¨¡å¼</li>
<li>èœå•æ -å®ç”¨å·¥å…·-ç»ˆç«¯ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£</li>
<li>è¾“å…¥å‘½ä»¤ <code>csrutil enable</code> å³å¯å¼€å¯ SIP</li>
<li>é‡å¯ mac è¿›å…¥ macOS æ­£å¸¸æ¨¡å¼</li>
</ol>

<h1 id="rdm-è°ƒæ•´åˆ†è¾¨ç‡">RDM è°ƒæ•´åˆ†è¾¨ç‡</h1>

<ol>
<li>ç‚¹å‡» <a href="http://avi.alkalay.net/software/RDM/" target="_blank">http://avi.alkalay.net/software/RDM/ </a> ä¸‹è½½ RDM æœ€æ–°ç‰ˆï¼Œæ­¤æ—¶æ˜¯ v2.2</li>
<li>å®‰è£… RDM</li>

<li><p>è¿è¡Œ RDM åï¼Œèœå•æ ä¼šå‡ºç°å…¶å›¾è¡¨ï¼Œç‚¹å‡»å³å¯ä¿®æ”¹åˆ†è¾¨ç‡ï¼Œå¸¦å°é—ªç”µçš„å°±æ˜¯å¼€å¯ HiDPI çš„ï¼Œæ¯”å¦‚æˆ‘çš„å¯é€‰é¡¹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20190102223010.png" alt="" /></p></li>
</ol>

<p>æœ€ç»ˆé€‰æ‹©çš„æ˜¯ 1920 * 1080ï¼Œè¿™æ ·å­—ä½“å¤Ÿå¤§ï¼ŒåŒæ—¶æ•´ä¸ªæ˜¾ç¤ºæ•ˆæœå¤Ÿç»†è…»ï¼Œæ•ˆæœå¾ˆæ˜æ˜¾ï¼Œå¦‚æœé…ç½®ä¸º 1920*1080 çš„åˆ†è¾¨ç‡ä¸ä½¿ç”¨ HiDPI å°±ä¼šå¾ˆæ¨¡ç³Šï¼Œä½¿ç”¨äº† HiDPI å°±ä¼šç»†è…»äº†å¾ˆå¤šï¼Œå¾ˆ Retinaï¼</p>

<h1 id="å‚è€ƒ">å‚è€ƒ</h1>

<p>ä¸Šé¢çš„é…ç½®æ–¹æ³•ä¸»è¦å‚è€ƒå’Œä½¿ç”¨äº† <a href="https://comsysto.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/" target="_blank">SCALED RESOLUTIONS FOR YOUR MACBOOKS EXTERNAL MONITOR</a>ã€‚</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:Macbook-2K-HiDPI"><a href="https://zhuanlan.zhihu.com/p/36913571" target="_blank">Macbookå¤–æ¥2Kæ˜¾ç¤ºå™¨æ—¶ï¼Œå¦‚ä½•å¼€å¯HiDPI?</a> <a class="footnote-return" href="#fnref:Macbook-2K-HiDPI"><sup>[return]</sup></a></li>
<li id="fn:retina-HiDPI-htt"><a href="https://zhuanlan.zhihu.com/p/20684620?refer=ibuick" target="_blank">æœ‰å…³retinaå’ŒHiDPIé‚£ç‚¹äº‹</a> <a class="footnote-return" href="#fnref:retina-HiDPI-htt"><sup>[return]</sup></a></li>
<li id="fn:How-to-Disable-S"><a href="http://osxdaily.com/2015/10/05/disable-rootless-system-integrity-protection-mac-os-x/" target="_blank">How to Disable System Integrity Protection (rootless) in Mac OS X</a> <a class="footnote-return" href="#fnref:How-to-Disable-S"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>mac ä¸‹ä½¿ç”¨ Docker æ­å»º ubuntu ç¯å¢ƒ</title>
			<link>https://www.smslit.top/2018/12/20/docker_ubuntu_learn/</link>
			<pubDate>Thu, 20 Dec 2018 14:49:08 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/12/20/docker_ubuntu_learn/</guid>
			<description>&lt;p&gt;å­¦ä¹ ç½‘ç»œå¼€å‘è¿‡ç¨‹ä¸­ä¸æƒ³â€œæ±¡æŸ“â€macOSï¼Œè€ƒè™‘åˆ°ä¹‹åéƒ¨ç½²ç½‘ç»œåº”ç”¨ä¸»è¦æ˜¯ä¸linuxæ‰“äº¤é“ï¼Œæ‰€ä»¥å®‰è£…äº† ubuntu è™šæ‹Ÿæœºä»¥æ»¡è¶³çŸ­æœŸçš„çŸ¥è¯†å­¦ä¹ éœ€æ±‚ã€‚åé‡Œå®‰è£…äº† ubuntu è™šæ‹Ÿæœºï¼Œä¸€èˆ¬å°±æ˜¯åœ¨ mac ä¸­ ssh è¿æ¥ ubuntu è™šæ‹Ÿæœºåœ¨ç»ˆç«¯ä¸‹è¿›è¡Œæ“ä½œå­¦ä¹ ï¼Œå¯è§å®‰è£…ä¸€ä¸ªåŒ…å«å®Œæ•´GUIçš„ ubuntu æœ‰ç‚¹å¤šä½™ï¼Œè¿˜å ç”¨å¾ˆå¤šèµ„æºï¼æ‰€ä»¥æƒ³åˆ°äº†ä½¿ç”¨ docker æ¥åˆ›å»º ubuntu å®¹å™¨ç”¨æ¥å¼€å‘å­¦ä¹ ï¼Œæœ¬æ–‡å°±åˆ†äº«ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20181220150817.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å­¦ä¹ ç½‘ç»œå¼€å‘è¿‡ç¨‹ä¸­ä¸æƒ³â€œæ±¡æŸ“â€macOSï¼Œè€ƒè™‘åˆ°ä¹‹åéƒ¨ç½²ç½‘ç»œåº”ç”¨ä¸»è¦æ˜¯ä¸linuxæ‰“äº¤é“ï¼Œæ‰€ä»¥å®‰è£…äº† ubuntu è™šæ‹Ÿæœºä»¥æ»¡è¶³çŸ­æœŸçš„çŸ¥è¯†å­¦ä¹ éœ€æ±‚ã€‚åé‡Œå®‰è£…äº† ubuntu è™šæ‹Ÿæœºï¼Œä¸€èˆ¬å°±æ˜¯åœ¨ mac ä¸­ ssh è¿æ¥ ubuntu è™šæ‹Ÿæœºåœ¨ç»ˆç«¯ä¸‹è¿›è¡Œæ“ä½œå­¦ä¹ ï¼Œå¯è§å®‰è£…ä¸€ä¸ªåŒ…å«å®Œæ•´GUIçš„ ubuntu æœ‰ç‚¹å¤šä½™ï¼Œè¿˜å ç”¨å¾ˆå¤šèµ„æºï¼æ‰€ä»¥æƒ³åˆ°äº†ä½¿ç”¨ docker æ¥åˆ›å»º ubuntu å®¹å™¨ç”¨æ¥å¼€å‘å­¦ä¹ ï¼Œæœ¬æ–‡å°±åˆ†äº«ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20181220150817.png" alt="" /></p>

<p>æœ¬æ–‡å°±ä¸ä»‹ç» Docker æ˜¯ä»€ä¹ˆäº†ï¼Œä¸»è¦æè¿°æ­å»ºç¬¦åˆè‡ªå·±éœ€æ±‚çš„ ubuntu å®¹å™¨çš„è¿‡ç¨‹ã€‚</p>

<h1 id="å®¹å™¨éœ€æ±‚">å®¹å™¨éœ€æ±‚</h1>

<ul>
<li>å¯ä»¥ ssh è¿æ¥</li>
<li>åŒ…å« vimã€gitç­‰åŸºæœ¬å·¥å…·</li>
</ul>

<h1 id="å®‰è£…å’Œé…ç½®-docker">å®‰è£…å’Œé…ç½® Docker</h1>

<h2 id="ä¸‹è½½å¹¶å®‰è£…-docker">ä¸‹è½½å¹¶å®‰è£… Docker</h2>

<ol>
<li>è®¿é—®<a href="https://hub.docker.com" target="_blank"> Docker å®˜ç½‘</a> äº†è§£å’Œä¸‹è½½ Dockerï¼Œè¿™é‡Œä¹Ÿå¯ä»¥<a href="https://download.docker.com/mac/stable/Docker.dmg" target="_blank">ç‚¹æˆ‘</a>ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆçš„ Docker for mac</li>
<li>æ‰“å¼€ä¸‹è½½çš„ dmg æ–‡ä»¶ï¼Œå°† Docker æ‹–æ”¾åˆ° Application æ–‡ä»¶å¤¹ä¸­å³å¯å®Œæˆå®‰è£…</li>
<li>é¦–æ¬¡è¿è¡Œä¼šæœ‰æç¤ºè¾“å…¥å¯†ç ï¼Œç”¨æ¥è·å–å®Œæ•´çš„æ“ä½œæƒé™</li>
<li>Docker è¿è¡Œèµ·æ¥ä¼šåœ¨é¡¶æ å‡ºç°ä¸€ä¸ªå°é²¸é±¼çš„logo</li>

<li><p>å®‰è£…æˆåŠŸåï¼Œåœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹ Docker ç‰ˆæœ¬ä¼šå¾—åˆ°ä¸‹é¢ç±»ä¼¼ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash">âœ  docker --version
Docker version <span class="m">18</span>.09.0, build 4d60db4
âœ  docker-compose --version
docker-compose version <span class="m">1</span>.23.2, build 1110ad01
âœ  docker-machine --version
docker-machine version <span class="m">0</span>.16.0, build 702c267f</code></pre></div></li>
</ol>

<h2 id="é…ç½®-docker">é…ç½® Docker</h2>

<p>ç”±äºå›½å†…è®¿é—® Docker å®˜æ–¹é»˜è®¤çš„é•œåƒæºå¾ˆæ…¢ï¼Œæ‰€ä»¥éœ€è¦æ›´æ¢å›½å†…çš„é•œåƒæºè¿›è¡ŒåŠ é€Ÿï¼Œè¿™é‡Œä½¿ç”¨å®˜æ–¹æä¾›çš„ä¸€ä¸ªé•œåƒä»“åº“åœ°å€ï¼š<a href="https://registry.docker-cn.comã€‚" target="_blank">https://registry.docker-cn.comã€‚</a></p>

<ol>
<li>ç‚¹å‡»é¡¶æ å°é²¸é±¼çš„ logoï¼Œæ‰¾åˆ° <code>Preferences</code>ç‚¹å‡»è°ƒå‡º Doker é…ç½®çª—å£ï¼›</li>
<li>ç‚¹å‡» <code>Daemon</code> æŒ‰é’®ï¼Œå°±å¯ä»¥çœ‹åˆ° <code>Registry Mirrors</code> çš„é…ç½®é¡µï¼›</li>

<li><p>ç‚¹å‡» <code>+</code> å·ï¼Œæ·»åŠ ä¸Šé¢æä¾›çš„åœ°å€å³å¯ï¼Œæ·»åŠ å®Œæˆåï¼Œç‚¹å‡» <code>Apply &amp; Restart</code> ï¼Œç­‰å¾…ä¸€ä¼šå„¿ Docker é‡å¯ä¹‹åï¼Œé…ç½®å³å¯ç”Ÿæ•ˆï¼Œæœ€ç»ˆå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20181220153021.png" alt="" /></p></li>
</ol>

<h1 id="å®šåˆ¶-ubuntu-é•œåƒ">å®šåˆ¶ ubuntu é•œåƒ</h1>

<h2 id="è·å–-ubuntu-é•œåƒ">è·å– ubuntu é•œåƒ</h2>

<p>è¿è¡Œå‘½ä»¤</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash">docker pull ubuntu</code></pre></div>
<p>å°±ä¼šæ‹‰å–å®˜ç½‘ä¸Šçš„æœ€æ–° ubuntu é•œåƒï¼Œè¿™æ˜¯ä¸€ä¸ªæå…¶ç²¾ç®€çš„é•œåƒï¼Œä½œä¸ºæˆ‘ä»¬å®šåˆ¶ ubuntu é•œåƒçš„åŸºç¡€ã€‚</p>

<p>ä½¿ç”¨å‘½ä»¤ <code>docker image ls</code> å¯ä»¥æŸ¥çœ‹å½“å‰å®‰è£…çš„ Docker é•œåƒã€‚</p>

<h2 id="ubuntu-å®¹å™¨">ubuntu å®¹å™¨</h2>

<h3 id="åˆ›å»º-ubuntu-å®¹å™¨">åˆ›å»º ubuntu å®¹å™¨</h3>

<p>ä½¿ç”¨å‘½ä»¤ <code>docker run -i -t --name mineos ubuntu bash</code> å¯ä»¥åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå¯ä»¥ä½¿ç”¨ç»ˆç«¯äº¤äº’çš„ ubuntu å®¹å™¨ï¼Œå‘½ä»¤å‚æ•°è§£é‡Šï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å€¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>

<tbody>
<tr>
<td>-i</td>
<td>æ— </td>
<td>å¯ä»¥è¾“å…¥è¿›è¡Œäº¤äº’</td>
</tr>

<tr>
<td>-t</td>
<td>æ— </td>
<td>ç»ˆç«¯äº¤äº’</td>
</tr>

<tr>
<td>&ndash;name</td>
<td>mineos</td>
<td>æŒ‡å®šå®¹å™¨åç§°ä¸º mineos</td>
</tr>

<tr>
<td>ubuntu</td>
<td>æ— </td>
<td>æŒ‡å®šä½¿ç”¨é•œåƒ</td>
</tr>

<tr>
<td>bash</td>
<td>æ— </td>
<td>æŒ‡å®šå®¹å™¨å¯åŠ¨ä½¿ç”¨çš„åº”ç”¨</td>
</tr>
</tbody>
</table>

<p>ä¸Šé¢çš„å‘½ä»¤æ‰§è¡Œåï¼Œå°±ä¼šç™»é™† ubuntu å®¹å™¨çš„ bash ä¸­ï¼Œæ‰§è¡Œå‘½ä»¤<code>cat /etc/issue</code> å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬ï¼Œåé‡Œçš„ubuntuç‰ˆæœ¬æ˜¯ 18.04ã€‚æ­¤æ—¶æŒ‰å¿«æ·é”®ç»„åˆ <code>ctrl</code> + <code>d</code> å°±ä¼šé€€å‡º ubuntu å®¹å™¨ï¼Œæ­¤æ—¶å°±ä¼šåœæ­¢å®¹å™¨è¿è¡Œã€‚</p>

<h3 id="æŸ¥çœ‹å·²æœ‰å®¹å™¨">æŸ¥çœ‹å·²æœ‰å®¹å™¨</h3>

<p>ä½¿ç”¨å‘½ä»¤ <code>docker ps</code> å¯ä»¥æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨ï¼Œå¦‚æœæ­¤æ—¶æ‰§è¡Œï¼Œä¼šå‘ç°æ²¡æœ‰å®¹å™¨ä¿¡æ¯ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœæ­¢äº†åˆšæ‰åˆ›å»ºçš„å®¹å™¨ã€‚æ€ä¹ˆæŸ¥çœ‹å·²ç»å…³é—­çš„å®¹å™¨ä¿¡æ¯å‘¢ï¼Ÿä½¿ç”¨å‘½ä»¤ <code>docker ps -a</code>ï¼Œä¼šåˆ—å‡ºæ‰€æœ‰å®¹å™¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·²ç»å…³é—­çš„ã€‚æ­¤æ—¶æ‰§è¡Œï¼Œå°±ä¼šçœ‹åˆ°å·²ç»å…³é—­çš„ mineos å®¹å™¨ã€‚</p>

<h3 id="ä»¥äº¤äº’çš„å½¢å¼å¯åŠ¨å®¹å™¨">ä»¥äº¤äº’çš„å½¢å¼å¯åŠ¨å®¹å™¨</h3>

<p>æ‰§è¡Œå‘½ä»¤ <code>docker start mineos</code> å°±ä¼šå¯åŠ¨å®¹å™¨ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°æ— æ³•åƒåˆšåˆ›å»ºæ—¶ç™»é™†å®¹å™¨çš„ bashï¼Œå…ˆä½¿ç”¨å‘½ä»¤ <code>docker stop mineos</code>ï¼Œæ­¤æ—¶åŠ å…¥ <code>-i</code> å‚æ•°å¯åŠ¨å°±å¯ä»¥äº† <code>docker start -i mineos</code>ã€‚</p>

<h2 id="ubuntu-å®¹å™¨çš„åŸºæœ¬é…ç½®">ubuntu å®¹å™¨çš„åŸºæœ¬é…ç½®</h2>

<p>ç™»é™†è¿› ubuntu çš„ bash ä»¥åå°±å¯ä»¥å½“æ­£å¸¸çš„ ubuntu è¿›è¡Œä½¿ç”¨äº†ã€‚</p>

<ol>
<li>æ›´æ–°è½¯ä»¶æºä¿¡æ¯ï¼š<code>apt-get update</code></li>
<li>å› ä¸ºè¿™ä¸ª ubuntu çš„ä¾èµ–é•œåƒå¤ªç²¾ç®€äº†ï¼Œæ‰€ä»¥å¥½å¤šå·¥å…·æ²¡æœ‰å®‰è£…ï¼Œå…ˆå®‰è£…ä¸€ä¸‹ vim: <code>apt-get install vim</code></li>

<li><p>å¯ä»¥çœ‹åˆ°å®‰è£…æŒºæ…¢çš„ï¼Œä¹‹æ‰€ä»¥å…ˆå®‰è£… vim æ˜¯ä¸ºäº†å¯ä»¥ç¼–è¾‘ <code>/etc/apt/sources.list</code> æ›´æ¢ä¸ºå›½å†…è®¿é—®æ›´å¿«çš„è½¯ä»¶æºï¼Œæ¯”å¦‚å°†æ–‡ä»¶ä¸­çš„å†…å®¹æ›¿æ¢ä¸ºå¦‚ä¸‹é˜¿é‡Œäº‘çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span>
<span class="na">deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span>
<span class="na">deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span>
<span class="na">deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span>
<span class="na">deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span>
<span class="na">deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse</span>
<span class="na">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse</span>
<span class="na">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse</span>
<span class="na">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</span>
<span class="na">deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse</span></code></pre></div></li>

<li><p>é‡æ–°æ›´æ–°è½¯ä»¶æºä¿¡æ¯ï¼š<code>apt-get update</code>ï¼Œä¼šå‘ç°å¿«å¾ˆå¤š</p></li>

<li><p>é£ä¸€èˆ¬çš„å®‰è£… git å’Œ python3ï¼š<code>apt-get install git python3</code></p></li>
</ol>

<h2 id="é…ç½®-ssh">é…ç½® SSH</h2>

<p>è¿™ä¸€æ­¥ä¸»è¦æ˜¯ä¸ºäº†mac å¯ä»¥ ssh è¿æ¥ ubuntu å®¹å™¨<sup class="footnote-ref" id="fnref:Docker-SSH-docke"><a href="#fn:Docker-SSH-docke">1</a></sup>ã€‚</p>

<h3 id="å®‰è£…-openssh-server">å®‰è£… openssh-server</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">apt-get install openssh-server</code></pre></div>
<p>ç”¨äºå¼€å¯ ssh æœåŠ¡ä¾›å¤–éƒ¨è¿æ¥ã€‚</p>

<h3 id="é…ç½®-sshd">é…ç½® sshd</h3>

<p>éœ€è¦æ›´æ”¹ä¸€ä¸‹ sshd çš„é»˜è®¤é…ç½®ï¼Œç¼–è¾‘æ–‡ä»¶ <code>/etc/ssh/sshd_config</code> ï¼Œå¤§æ¦‚ä» 29 è¡Œå¼€å§‹ä¸»è¦æ›´æ”¹ä¸‰å¤„ï¼Œæ›´æ”¹åå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma">PermitRootLogin yes # å¯ä»¥ç™»å½• root ç”¨æˆ·
PubkeyAuthentication yes # å¯ä»¥ä½¿ç”¨ ssh å…¬é’¥è®¸å¯
AuthorizedKeysFile	.ssh/authorized_keys # å…¬é’¥ä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶ .ssh/authorized_keys ä¸­</pre></div>
<h3 id="é‡å¯-sshd">é‡å¯ sshd</h3>

<p>å› ä¸º ubuntu è¿‡äºç²¾ç®€ï¼Œä¸èƒ½ä½¿ç”¨ service å‘½ä»¤æ–¹ä¾¿çš„é‡å¯ sshdï¼Œè¿™é‡Œä½¿ç”¨å‘½ä»¤ <code>/etc/init.d/ssh restart</code> è¿›è¡Œé‡å¯<sup class="footnote-ref" id="fnref:Ubuntu-sshd-unre"><a href="#fn:Ubuntu-sshd-unre">2</a></sup>ï¼Œé‡å¯æ˜¯ä¸ºäº†è®©ä¸Šé¢çš„é…ç½®ç”Ÿæ•ˆã€‚</p>

<h3 id="æ·»åŠ ä¸»æœºçš„-ssh-å…¬é’¥">æ·»åŠ ä¸»æœºçš„ ssh å…¬é’¥</h3>

<p>è¿™é‡Œçš„ä¸»æœºæŒ‡çš„å°±æ˜¯ macOSï¼Œä¿è¯æ­¤æ—¶è¿˜æ˜¯åœ¨ ubuntu å®¹å™¨ä¸­ã€‚</p>

<ol>
<li>åœ¨ HOME ç›®å½•ä¸‹åˆ›å»º <code>.ssh</code> ç›®å½•ï¼š<code>mkdir ~/.ssh</code></li>
<li>æ–°å»ºæ–‡ä»¶ <code>~/.ssh/authorized_keys</code> ï¼š<code>touch ~/.ssh/authorized_keys</code></li>
<li>æ–°å¼€ä¸€ä¸ª macOS ä¸‹çš„ç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œå‘½ä»¤ <code>cat ~/.ssh/id_rsa.pub</code>ï¼Œå¤åˆ¶æ‰“å°çš„ä¸€è¡Œå…¬é’¥ä¿¡æ¯</li>
<li>å›åˆ° ubuntu å®¹å™¨ä¸­ï¼Œå°†ç¬¬ 3 æ­¥å¤åˆ¶çš„å…¬é’¥ç²˜è´´åˆ° <code>~/.ssh/authorized_keys</code> ä¸­ä¿å­˜ã€‚</li>
</ol>

<blockquote>
<p>å¦‚æœä½¿ç”¨è¿‡sshå…å¯†ç çš„ç™»é™†æ“ä½œçš„è¯ï¼Œç›¸ä¿¡æ‚¨çŸ¥é“sshçš„å¯†é’¥ç”Ÿæˆæ–¹æ³•ï¼Œå¦‚æœæ²¡äº†è§£è¿‡ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://smslit.coding.me/ownwiki/linux/kali/#ssh-keys" target="_blank">ssh-keys</a></p>
</blockquote>

<ol>
<li>æ­¤æ—¶å®Œæˆäº† SSH è®¿é—®æ”¯æŒçš„æ·»åŠ ï¼Œ<code>ctrl</code> + <code>d</code> é€€å‡ºå®¹å™¨ã€‚</li>
</ol>

<h2 id="æäº¤ä¿®æ”¹åˆ°é•œåƒ">æäº¤ä¿®æ”¹åˆ°é•œåƒ</h2>

<p>ç°åœ¨å·²ç»æ¨å‡ºåˆ°æ­£å¸¸çš„ mac ç»ˆç«¯çª—å£ä¸­äº†ï¼Œå®¹å™¨çš„ä¿®æ”¹ä¸ä¼šå½±å“åˆ°æºé•œåƒï¼Œä¸Šé¢çš„æ“ä½œæˆ‘ä»¬å·²ç»å®Œæˆäº† Ubuntu çš„åŸºæœ¬é…ç½®ï¼Œå¹¶ä¸”æ·»åŠ äº† SSH æ”¯æŒï¼Œè¿™ä¸€æ­¥æ˜¯äº§ç”Ÿæ–°çš„é•œåƒç‰ˆæœ¬ã€‚</p>

<ol>
<li>æŸ¥çœ‹åˆšåˆšæ“ä½œçš„å®¹å™¨ä¿¡æ¯ï¼Œæ‰§è¡Œå‘½ä»¤ <code>docker ps -a</code> ï¼Œå¯ä»¥çœ‹åˆ° mineos çš„çŠ¶æ€å·²ç»æ˜¯é€€å‡ºäº†ï¼Œä¸»è¦å…³æ³¨ mineos çš„ <code>CONTAINER ID</code> ï¼Œå¤åˆ¶è¿™ä¸ª ID å·ï¼Œæ¯”å¦‚ä¸º <code>e5d8c1030724</code></li>

<li><p>æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æäº¤äº§ç”Ÿ ubuntu æ–°ç‰ˆæœ¬çš„é•œåƒï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash">docker commit -m <span class="s1">&#39;add ssh&#39;</span> -a <span class="s1">&#39;5km&#39;</span> e5d8c1030724 ubuntu-ssh</code></pre></div>
<ul>
<li>-mï¼ŒæŒ‡å®šæäº¤ä¿¡æ¯</li>
<li>-aï¼ŒæŒ‡å®šæäº¤è€…</li>
<li>ä½ éœ€è¦æŠŠ e5d8c1030724 æ›¿æ¢ä¸ºæ‚¨çš„å®¹å™¨çš„ <code>CONTAINER ID</code></li>
<li>ubuntu-ssh æ˜¯æ–°é•œåƒçš„åç§°ï¼Œå¯ä»¥éšæ„æŒ‡å®š</li>
</ul></li>

<li><p>ä½¿ç”¨å‘½ä»¤ <code>docker image ls</code> å¯ä»¥æŸ¥çœ‹å½“å‰å®‰è£…çš„é•œåƒï¼Œä¸Šè¿°æ“ä½œæ­£å¸¸çš„è¯å°±ä¼šçœ‹åˆ° <code>ubuntu-ssh</code> çš„é•œåƒä¿¡æ¯</p></li>

<li><p>æ­¤æ—¶ä¹‹å‰åˆ›å»ºçš„å®¹å™¨å°±æ²¡ç”¨äº†ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ <code>docker rm mineos</code> è¿›è¡Œåˆ é™¤</p></li>
</ol>

<h1 id="æœ€ç»ˆçš„-ubuntu-å®¹å™¨">æœ€ç»ˆçš„ ubuntu å®¹å™¨</h1>

<p>æœ‰äº†å…·æœ‰ SSH æ”¯æŒçš„ ubuntu é•œåƒï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºæ–°çš„ ubuntu å®¹å™¨ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œåˆ›å»ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Bash" data-lang="Bash">docker run -d -p <span class="m">26122</span>:22 --name learn ubuntu-ssh /usr/sbin/sshd -D</code></pre></div>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å€¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>

<tbody>
<tr>
<td>-d</td>
<td>æ— </td>
<td>åå°è¿è¡Œ</td>
</tr>

<tr>
<td>-p</td>
<td>26122:22</td>
<td>ç»‘å®šä¸»æœºçš„ 26122 ç«¯å£åˆ°ubuntuå®¹å™¨çš„ 22 ç«¯å£(sshæœåŠ¡çš„é»˜è®¤ç«¯å£ä¸º 22)</td>
</tr>

<tr>
<td>&ndash;name</td>
<td>learn</td>
<td>æŒ‡å®šå®¹å™¨åç§°ä¸º learn</td>
</tr>

<tr>
<td>ubuntu-ssh</td>
<td>æ— </td>
<td>ä½¿ç”¨é•œåƒ ubuntu-ssh åˆ›å»ºå®¹å™¨</td>
</tr>

<tr>
<td>/usr/sbin/sshd -D</td>
<td>æ— </td>
<td>æŒ‡å®šå®¹å™¨å¯åŠ¨ä½¿ç”¨çš„åº”ç”¨åŠå‚æ•°</td>
</tr>
</tbody>
</table>

<p>åœ¨ macOS çš„ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ <code>ssh -p 26122 root@localhost</code> å³å¯è¿æ¥å·²ç»å¯åŠ¨çš„ ubuntu å®¹å™¨ <code>learn</code></p>

<p>ä¸ºäº†æ›´æ–¹ä¾¿çš„è¿æ¥ï¼Œå¯ä»¥ä¸ºå®¹å™¨åˆ›å»º ssh è¿æ¥çš„ä¸»æœºçŸ­åï¼Œå¾€ macOS çš„ <code>~/.ssh/config</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">Host learn</span>
    <span class="na">HostName localhost</span>
    <span class="na">User     root</span>
    <span class="na">Port     26122</span></code></pre></div>
<p>æ­¤æ—¶å°±å¯ä»¥é€šè¿‡å‘½ä»¤ <code>ssh learn</code> è¿æ¥ ubuntu å®¹å™¨ learn äº†ã€‚</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:Docker-SSH-docke"><a href="https://www.jianshu.com/p/426f0d8e6cbf" target="_blank">Docker-SSHè¿æ¥dockerå®¹å™¨</a> <a class="footnote-return" href="#fnref:Docker-SSH-docke"><sup>[return]</sup></a></li>
<li id="fn:Ubuntu-sshd-unre"><a href="https://blog.csdn.net/u013015629/article/details/70045809" target="_blank">Ubuntuä¸‹&rdquo;sshd:unrecognized service&rdquo;</a> <a class="footnote-return" href="#fnref:Ubuntu-sshd-unre"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>ubuntu ä¸‹ mysql æ‹’ç»è®¿é—®é—®é¢˜</title>
			<link>https://www.smslit.top/2018/12/19/ubuntu_mysql_permission/</link>
			<pubDate>Wed, 19 Dec 2018 20:45:52 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/12/19/ubuntu_mysql_permission/</guid>
			<description>&lt;p&gt;ä»Šå¤©åœ¨ ubuntu ä¸­å®‰è£… mysql åå‡ºç° &lt;code&gt;Access denied for user &#39;root&#39;@&#39;localhost&#39;&lt;/code&gt; é—®é¢˜ï¼Œæ•´ä¸ªå®‰è£…è¿‡ç¨‹ä¸­ä¹Ÿæ²¡æœ‰æç¤ºè¦è®¾ç½®ç”¨æˆ·å’Œå¯†ç å‘€ï¼Œå’‹å°±æ‹’ç»è®¿é—®äº†å‘¢ï¼Œæœ¬æ–‡å°±è§£å†³ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©åœ¨ ubuntu ä¸­å®‰è£… mysql åå‡ºç° <code>Access denied for user 'root'@'localhost'</code> é—®é¢˜ï¼Œæ•´ä¸ªå®‰è£…è¿‡ç¨‹ä¸­ä¹Ÿæ²¡æœ‰æç¤ºè¦è®¾ç½®ç”¨æˆ·å’Œå¯†ç å‘€ï¼Œå’‹å°±æ‹’ç»è®¿é—®äº†å‘¢ï¼Œæœ¬æ–‡å°±è§£å†³ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼</p>

<h1 id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ</h1>

<p>mysql å…·æœ‰ç”¨æˆ·å¯†ç è®¿é—®æœºåˆ¶ï¼Œå…¶å® mysql å®‰è£…åé»˜è®¤æœ‰ç”¨æˆ· <code>root</code> ï¼Œé‚£æ‹’ç»è®¿é—®ï¼Œé‚£å°±æ˜¯æ²¡æœ‰è¾“å…¥æ­£ç¡®çš„å¯†ç ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½æƒ³åˆ°çš„ä¸€ç§è§£å†³æ–¹æ¡ˆå°±æ˜¯ä¿®æ”¹å¯†ç ã€‚</p>

<h1 id="é—®é¢˜è§£å†³">é—®é¢˜è§£å†³</h1>

<h2 id="è¶Šè¿‡è®¿é—®é™åˆ¶">è¶Šè¿‡è®¿é—®é™åˆ¶</h2>

<p>è¿æ¥ä¸Š mysql åæˆ‘ä»¬æ‰èƒ½ä¿®æ”¹å¯†ç ï¼Œæ‰€ä»¥æœ‰æ²¡æœ‰ä¸€ç§å¯ä»¥ä¸´æ—¶è¶Šè¿‡è®¿é—®é™åˆ¶çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œè¦ä¸æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜å†™å•¥ï¼</p>

<ol>
<li>ç®¡ç†å‘˜æƒé™ç¼–è¾‘æ–‡ä»¶ <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>;</li>

<li><p>æ‰¾åˆ°å…¶ä¸­çš„ <code>[mysqld]</code> é…ç½®æ®µï¼Œå¤§æ¦‚ä» 27 è¡Œå¼€å§‹ï¼Œåœ¨ <code>skip-external-locking</code> (å¤§æ¦‚åœ¨39è¡Œ) ä¸‹é¢åŠ å…¥ä¸€è¡Œå†…å®¹ <code>skip-grant-tables</code>ï¼Œæœ€ç»ˆå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">...</span>
<span class="k">[mysqld]</span>
<span class="c1">#</span>
<span class="c1"># * Basic Settings</span>
<span class="c1">#</span>
<span class="na">user</span>        <span class="o">=</span> <span class="s">mysql</span>
<span class="na">pid-file</span>    <span class="o">=</span> <span class="s">/var/run/mysqld/mysqld.pid</span>
<span class="na">socket</span>      <span class="o">=</span> <span class="s">/var/run/mysqld/mysqld.sock</span>
<span class="na">port</span>        <span class="o">=</span> <span class="s">3306</span>
<span class="na">basedir</span>     <span class="o">=</span> <span class="s">/usr</span>
<span class="na">datadir</span>     <span class="o">=</span> <span class="s">/var/lib/mysql</span>
<span class="na">tmpdir</span>      <span class="o">=</span> <span class="s">/tmp</span>
<span class="na">lc-messages-dir</span> <span class="o">=</span> <span class="s">/usr/share/mysql</span>
<span class="na">skip-external-locking</span>
<span class="na">skip-grant-tables</span>
<span class="na">...</span></code></pre></div></li>

<li><p>é‡å¯ mysql æœåŠ¡ï¼Œä¸€èˆ¬å¯é€šè¿‡ä»¥ä¸‹å‘½åå®Œæˆ</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo service mysql restart</code></pre></div></li>

<li><p>æ­¤æ—¶å¯ä»¥é€šè¿‡ <code>mysql</code> å‘½ä»¤å°±å¯ä»¥è¿æ¥æ•°æ®åº“äº†</p></li>
</ol>

<h2 id="ä¿®æ”¹-root-ç”¨æˆ·å¯†ç ">ä¿®æ”¹ root ç”¨æˆ·å¯†ç </h2>

<p>åœ¨å°èŠ‚<a href="#è¶Šè¿‡è®¿é—®é™åˆ¶" target="_blank">è¶Šè¿‡è®¿é—®é™åˆ¶</a>ä¸­å·²ç»å¯ä»¥è¶Šè¿‡è®¿é—®é™åˆ¶è¿æ¥æ•°æ®åº“äº†ï¼Œä¸‹é¢è¿æ¥æ•°æ®åº“ï¼Œç”±äºæ“ä½œå‘½ä»¤æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å…ˆå‡†å¤‡ä¸€ä¸ª <code>sql</code> æ–‡ä»¶ï¼Œæœ€åæ‰§è¡Œæ–‡ä»¶ä¸­ sql å‘½ä»¤ã€‚</p>

<ol>
<li><p>å‡†å¤‡ç”¨äºä¿®æ”¹ root å¯†ç çš„ <code>setpw.sql</code> æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="n">use</span> <span class="n">mysql</span><span class="p">;</span>
<span class="k">update</span> <span class="n">mysql</span><span class="p">.</span><span class="k">user</span> <span class="k">set</span> <span class="n">authentication_string</span><span class="o">=</span><span class="n">password</span><span class="p">(</span><span class="s1">&#39;123456&#39;</span><span class="p">)</span> <span class="k">where</span> <span class="k">user</span><span class="o">=</span><span class="s1">&#39;root&#39;</span> <span class="k">and</span> <span class="k">Host</span> <span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
<span class="k">update</span> <span class="k">user</span> <span class="k">set</span> <span class="n">plugin</span><span class="o">=</span><span class="s2">&#34;mysql_native_password&#34;</span><span class="p">;</span>
<span class="n">flush</span> <span class="k">privileges</span><span class="p">;</span></code></pre></div>
<blockquote>
<p>ä¸Šé¢ä»£ç ç¬¬äºŒè¡Œä¸­çš„ <code>123456</code> å°±æ˜¯è¦ä¿®æ”¹çš„å¯†ç ï¼Œå¯†ç ä¿®æ”¹ä¸ºæ‚¨æƒ³ä½¿ç”¨çš„å¯†ç å³å¯</p>
</blockquote></li>

<li><p>æ‰§è¡Œå‘½ä»¤ <code>mysql</code> è¿æ¥æ•°æ®åº“ï¼Œç„¶åæ‰§è¡Œ mysql å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">source</span> <span class="n">setpw</span><span class="p">.</span><span class="k">sql</span></code></pre></div></li>

<li><p>ï¼ˆCTRL+D æˆ–è€… æ‰§è¡Œå‘½ä»¤ quit;ï¼‰æ–­å¼€ mysql è¿æ¥ï¼›</p></li>
</ol>

<h2 id="æ¢å¤è®¿é—®é™åˆ¶">æ¢å¤è®¿é—®é™åˆ¶</h2>

<ol>
<li><p>ç¼–è¾‘æ–‡ä»¶ <code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>ï¼Œåˆ é™¤ä¸Šé¢å°èŠ‚ä¸­åŠ ä¸Šçš„ <code>skip-grant-tables</code>;</p></li>

<li><p>é‡å¯ mysql æœåŠ¡</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo service mysql restart</code></pre></div>
<blockquote>
<p>æ‰§è¡Œå‘½ä»¤ <code>mysql -uroot -p</code> è¿æ¥æ•°æ®åº“ï¼Œè¾“å…¥è‡ªå·±çš„å¯†ç å³å¯è¿æ¥æ•°æ®åº“ï¼</p>
</blockquote></li>
</ol>]]></content>
		</item>
		
		<item>
			<title>æœ€ç®€å•çš„äººå·¥æ™ºèƒ½(çš®ä¸€ä¸‹)</title>
			<link>https://www.smslit.top/2018/12/17/simple_ai_stupid/</link>
			<pubDate>Mon, 17 Dec 2018 16:35:58 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/12/17/simple_ai_stupid/</guid>
			<description>&lt;p&gt;æœ‰æ²¡æœ‰æƒ³è¿‡å®ç°ä¸€ä¸ªäººå·¥æ™ºèƒ½é¡¹ç›®ï¼Œç°åœ¨åé‡Œå°±æ•™ä½ ç”¨ python3 å®ç°ä¸€ä¸ªæœ€ç®€å•çš„äººå·¥æ™ºéšœé¡¹ç›®ï¼Œå“¦ï¼Œä¸å¯¹ï¼Œæ˜¯äººå·¥æ™ºèƒ½é¡¹ç›®ï¼Œæ™ºèƒ½(æ™ºéšœ)è°ˆè¯æœºå™¨äººï¼Œæ®è¯´è¿™ä¸ªé¡¹ç›®ä¼°å€¼ä¸€ä¸ªäº¿&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:https-github-com&#34;&gt;&lt;a href=&#34;#fn:https-github-com&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20181217171933.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ‰æ²¡æœ‰æƒ³è¿‡å®ç°ä¸€ä¸ªäººå·¥æ™ºèƒ½é¡¹ç›®ï¼Œç°åœ¨åé‡Œå°±æ•™ä½ ç”¨ python3 å®ç°ä¸€ä¸ªæœ€ç®€å•çš„äººå·¥æ™ºéšœé¡¹ç›®ï¼Œå“¦ï¼Œä¸å¯¹ï¼Œæ˜¯äººå·¥æ™ºèƒ½é¡¹ç›®ï¼Œæ™ºèƒ½(æ™ºéšœ)è°ˆè¯æœºå™¨äººï¼Œæ®è¯´è¿™ä¸ªé¡¹ç›®ä¼°å€¼ä¸€ä¸ªäº¿<sup class="footnote-ref" id="fnref:https-github-com"><a href="#fn:https-github-com">1</a></sup>ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20181217171933.png" alt="" /></p>

<p>æ–°å»ºæ–‡ä»¶ <code>chatbot.py</code> ï¼Œå†…å®¹å¦‚ä¸‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">chat_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
    <span class="n">chat_str</span> <span class="o">=</span> <span class="n">chat_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;å—&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
    <span class="n">chat_str</span> <span class="o">=</span> <span class="n">chat_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;?&#34;</span><span class="p">,</span> <span class="s2">&#34;!&#34;</span><span class="p">)</span>
    <span class="n">chat_str</span> <span class="o">=</span> <span class="n">chat_str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;? &#34;</span><span class="p">,</span> <span class="s2">&#34;! &#34;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;å°çˆ±:&#34;</span><span class="p">,</span> <span class="n">chat_str</span><span class="p">)</span></code></pre></div>
<p>å¤§åŠŸå‘Šæˆï¼è¿è¡Œæ–‡ä»¶è¿›è¡Œç©è€:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ python3 chatbot.py
æ‚¨å¥½
å°çˆ±: æ‚¨å¥½
åœ¨å—
å°çˆ±: åœ¨
ä¼šè¯´ä¸­æ–‡å—
å°çˆ±: ä¼šè¯´ä¸­æ–‡
çœŸçš„å—?
å°çˆ±: çœŸçš„!</code></pre></div>
<p>æ€ä¹ˆæ ·ï¼Œæœ‰æ²¡æœ‰ä¸€ç§è¢«ä¾®è¾±çš„æ„Ÿè§‰ï¼Ÿä¸ç®¡æ€æ ·ï¼Œåé‡Œå°±å°†è¿™ä¸ªä¼°å€¼ä¸€äº¿çš„é¡¹ç›®äº¤ç»™ä½ äº†ï¼å¥½å¥½å‘æŒ¥ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:https-github-com"><a href="https://github.com/ruanyf/weekly/issues/158" target="_blank">å›¾ç‰‡ï¼šä¼°å€¼ä¸€ä¸ªäº¿çš„ä»£ç </a> <a class="footnote-return" href="#fnref:https-github-com"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>ç®€é™‹çš„ä¸èƒ½å†ç®€é™‹çš„ HTTP1.1 Server</title>
			<link>https://www.smslit.top/2018/11/27/simple_server/</link>
			<pubDate>Tue, 27 Nov 2018 10:48:29 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/11/27/simple_server/</guid>
			<description>&lt;p&gt;ä»Šå¤©å®ç°äº†ä¸€ä¸ªè¶…çº§ç®€é™‹çš„ HTTP/1.1 æœåŠ¡ï¼Œä½¿ç”¨ python3 å®ç°ï¼Œä¸»è¦ä¸ºäº†ç»ƒä¹  TCP é€šä¿¡å’Œç†è§£æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©å®ç°äº†ä¸€ä¸ªè¶…çº§ç®€é™‹çš„ HTTP/1.1 æœåŠ¡ï¼Œä½¿ç”¨ python3 å®ç°ï¼Œä¸»è¦ä¸ºäº†ç»ƒä¹  TCP é€šä¿¡å’Œç†è§£æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„äº¤äº’è¿‡ç¨‹ã€‚</p>

<h1 id="çŸ¥è¯†åŸºç¡€">çŸ¥è¯†åŸºç¡€</h1>

<ul>
<li>python3 çš„ tcp ç½‘ç»œé€šä¿¡: socket çš„ä½¿ç”¨ï¼›</li>
<li>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ï¼›</li>
<li>TCP é€šä¿¡ä¸­çš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ï¼›</li>
<li>ç½‘ç»œçš„é•¿è¿æ¥ä¸çŸ­è¿æ¥ï¼›</li>
<li>æ­£åˆ™è¡¨è¾¾å¼ï¼›</li>
<li>python çš„åŸºæœ¬çŸ¥è¯†åº”ç”¨ï¼šæ–‡ä»¶è¯»ã€Shebangè¿è¡Œã€å‘½ä»¤å‚æ•°è§£æ</li>
</ul>

<h1 id="å®ç°åŠŸèƒ½">å®ç°åŠŸèƒ½</h1>

<p>ä¸ºæŒ‡å®šçš„è·¯å¾„æä¾›ç®€é™‹çš„ HTTP/1.1 æœåŠ¡ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œç¬¦åˆ HTTP/1.1 çš„é•¿è¿æ¥æ”¯æŒï¼Œå¹¶ä¸”å®ç°çš„æœåŠ¡æ˜¯å•è¿›ç¨‹ã€å•çº¿ç¨‹ã€éé˜»å¡çš„ã€‚ç½‘ç»œæœåŠ¡ä¸ºäº†æé«˜å“åº”é€Ÿåº¦ï¼Œå¤šä»¥å¤šè¿›ç¨‹ã€å¤šçº¿ç¨‹å’Œåç¨‹æ–¹å¼å®ç°æœåŠ¡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å®ç°æ•ˆç‡ä»é«˜åˆ°ä½æ˜¯ï¼šåç¨‹ &gt; å¤šçº¿ç¨‹ &gt; å¤šè¿›ç¨‹ï¼Œä¸»è¦è¿˜æ˜¯å› ä¸ºèµ„æºå¼€é”€çš„é—®é¢˜ï¼Œå®é™…åº”ç”¨è¿‡ç¨‹ä¸­å¤§å¤šæ•°æƒ…å†µä¸‹ä¸»è¦ä½¿ç”¨ epoll æŠ€æœ¯å®ç°é«˜å¹¶å‘ï¼Œç®€å•æ¥è¯´æ˜¯ä¸€ç§é«˜çº§çš„å•è¿›ç¨‹ã€å•çº¿ç¨‹ã€éé˜»å¡æŠ€æœ¯ï¼Œä¾èµ–äºï¼šå†…å­˜æ˜ å°„å’Œé€šçŸ¥æœºåˆ¶ã€‚è¿™é‡Œå®ç°çš„éé˜»å¡å½¢å¼ç›¸å½“ç®€å•ï¼Œä¸ epoll ç›¸æ¯”å·®å¾ˆå¤§ä¸€æˆªã€‚</p>

<p>è¿™é‡ŒæœåŠ¡é»˜è®¤å¼€å¯åœ¨ 8080 ç«¯å£ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šç«¯å£ã€‚</p>

<h1 id="å®ç°ä»£ç ">å®ç°ä»£ç </h1>

<p>å› ä¸ºåªæ˜¯ç»ƒä¹ ï¼Œä»¥ååº”è¯¥ä¹Ÿä¸ä¼šç»´æŠ¤åŠ åŠŸèƒ½ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç²—æš´åœ°å±•ç¤ºä»£ç äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">argparse</span>


<span class="k">def</span> <span class="nf">get_args</span><span class="p">():</span>
    <span class="s2">&#34;&#34;&#34;get_args&#34;&#34;&#34;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&#34;å¼€å¯æŒ‡å®šç½‘ç«™æœåŠ¡&#34;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;-p&#34;</span><span class="p">,</span> <span class="s2">&#34;--port&#34;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">8080</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;æŒ‡å®šç½‘æœåŠ¡ç«¯å£&#34;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;site&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&#34;æŒ‡å®šç½‘ç«™è·¯å¾„&#34;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">response_to</span><span class="p">(</span><span class="n">client_socket</span><span class="p">:</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">site_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="c1"># å¤„ç†è¯·æ±‚</span>
    <span class="n">req_str</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
    <span class="n">req_lines</span> <span class="o">=</span> <span class="n">req_str</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&#34;[^/]+([^(?| )]*)&#34;</span><span class="p">,</span> <span class="n">req_lines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
    <span class="k">if</span> <span class="n">ret</span><span class="p">:</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">ret</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">file_name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">):</span>
            <span class="n">file_name</span> <span class="o">+=</span> <span class="s2">&#34;index.html&#34;</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">site_path</span> <span class="o">+</span> <span class="n">file_name</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;+&#34;</span> <span class="o">*</span> <span class="mi">50</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span> <span class="o">+</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span> <span class="o">+</span> <span class="s2">&#34;+&#34;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">f_req</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&#34;rb&#34;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="c1"># ç”Ÿæˆå“åº”</span>
        <span class="c1"># å“åº”å†…å®¹</span>
        <span class="n">response_body</span> <span class="o">=</span> <span class="s2">&#34;file is not available!&#34;</span>
        <span class="c1"># å“åº”å¤´</span>
        <span class="n">response_header</span> <span class="o">=</span> <span class="s2">&#34;HTTP/1.1 404 NOT FOUND</span><span class="se">\r\n</span><span class="s2">&#34;</span>
        <span class="n">response_header</span> <span class="o">+=</span> <span class="n">f</span><span class="s2">&#34;Content-Length:{len(response_body)}</span><span class="se">\r\n</span><span class="s2">&#34;</span>
        <span class="n">response_header</span> <span class="o">+=</span> <span class="s2">&#34;</span><span class="se">\r\n</span><span class="s2">&#34;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">(</span><span class="n">response_header</span> <span class="o">+</span> <span class="n">response_body</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span>
        <span class="c1"># å‘é€å“åº”</span>
        <span class="n">client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Not found!&#34;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">html_content</span> <span class="o">=</span> <span class="n">f_req</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">f_req</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="c1"># ç”Ÿæˆå“åº”</span>
        <span class="c1"># å“åº”å†…å®¹</span>
        <span class="n">response_body</span> <span class="o">=</span> <span class="n">html_content</span>
        <span class="c1"># å“åº”å¤´</span>
        <span class="n">response_header</span> <span class="o">=</span> <span class="s2">&#34;HTTP/1.1 200 OK</span><span class="se">\r\n</span><span class="s2">&#34;</span>
        <span class="n">response_header</span> <span class="o">+=</span> <span class="n">f</span><span class="s2">&#34;Content-Length:{len(response_body)}</span><span class="se">\r\n</span><span class="s2">&#34;</span>
        <span class="n">response_header</span> <span class="o">+=</span> <span class="s2">&#34;</span><span class="se">\r\n</span><span class="s2">&#34;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">response_header</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="o">+</span> <span class="n">response_body</span>
        <span class="c1"># å‘é€å“åº”</span>
        <span class="n">client_socket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="n">req_str</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># è·å–å‘½ä»¤å‚æ•°</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">site</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">):</span>
            <span class="n">args</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">site</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">port</span> <span class="o">&gt;=</span> <span class="mi">65535</span><span class="p">:</span>
        <span class="n">args</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="mi">8080</span>

    <span class="c1"># åˆ›å»ºå¥—æ¥å­—</span>
    <span class="n">tcp_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>

    <span class="c1"># ä¿è¯æœåŠ¡å™¨å…ˆå…³é—­å¥—æ¥å­—æ—¶ï¼Œé‡å¯ç¨‹åºå¯ä»¥ç«‹é©¬é‡å¤ä½¿ç”¨ä¸Šä¸€æ¬¡çš„é…ç½®ç«¯å£</span>
    <span class="n">tcp_socket</span><span class="o">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SO_REUSEADDR</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">tcp_socket</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1"># ç»‘å®šå¥—æ¥å­—</span>
    <span class="n">tcp_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">port</span><span class="p">))</span>

    <span class="c1"># ç›‘å¬</span>
    <span class="n">tcp_socket</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;{args.site} çš„ http æœåŠ¡å·²å¼€å¯&#34;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&#34;è®¿é—®åœ°å€: http://127.0.0.1:{args.port}&#34;</span><span class="p">)</span>

    <span class="n">client_socket_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># ç­‰å¾…</span>
            <span class="n">client_socket</span><span class="p">,</span> <span class="n">client_addr</span> <span class="o">=</span> <span class="n">tcp_socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">client_socket</span><span class="o">.</span><span class="n">setblocking</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">client_socket_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">client_socket</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">client_socket</span> <span class="ow">in</span> <span class="n">client_socket_list</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">request</span> <span class="o">=</span> <span class="n">client_socket</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">request</span><span class="p">:</span>
                    <span class="n">response_to</span><span class="p">(</span><span class="n">client_socket</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">site</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">client_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
                    <span class="n">client_socket_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">client_socket</span><span class="p">)</span>

                <span class="c1"># å…³é—­å¥—æ¥å­—</span>
    <span class="n">tcp_socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></code></pre></div>
<p>ä»£ç ä¿å­˜åˆ°æ–‡ä»¶ <code>simple_server</code> ä¸­ï¼Œä¸ºæºæ–‡ä»¶æ·»åŠ è¿è¡Œæƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ chmod +x simple_server</code></pre></div>
<h1 id="ä½¿ç”¨æ–¹æ³•">ä½¿ç”¨æ–¹æ³•</h1>

<p>å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤è·å–å¸®åŠ©ä¿¡æ¯</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ ./simple_server -h
usage: simple_server <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-p PORT<span class="o">]</span> site

å¼€å¯æŒ‡å®šç½‘ç«™æœåŠ¡

positional arguments:
  site                  æŒ‡å®šç½‘ç«™è·¯å¾„

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -p PORT, --port PORT  æŒ‡å®šç½‘æœåŠ¡ç«¯å£</code></pre></div>
<p>å¼€å¯æœåŠ¡ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æµ‹è¯•å¯¹è±¡æ˜¯æœ¬äººé™æ€åšå®¢çš„è·¯å¾„ï¼Œå¦‚æ­¤ç®€é™‹ï¼Œå±…ç„¶èƒ½ç”¨!</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ ./simple_server /Users/5km/smslit/public/ -p <span class="m">7788</span>
/Users/5km/smslit/public çš„ http æœåŠ¡å·²å¼€å¯
è®¿é—®åœ°å€: http://127.0.0.1:7788</code></pre></div>
<p>è¿™é‡Œä½¿ç”¨äº†ç«¯å£ <strong>7788</strong>ï¼Œè®¿é—®ä¸€åˆ‡ğŸ‘Œï¼Œä»€ä¹ˆï¼Ÿä½ ä¸ä¿¡ï¼Œæœ‰å›¾æœ‰çœŸç›¸çš„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/20181127111056.png" alt="" /></p>

<h1 id="åˆ†æ">åˆ†æ</h1>

<p><a href="#å®ç°åŠŸèƒ½" target="_blank">å®ç°åŠŸèƒ½</a>å°èŠ‚ä¸­æåˆ°äº†ï¼Œæœ¬æ–‡å®ç°çš„éé˜»å¡æ–¹å¼ç›¸å½“ä½çº§ï¼Œæ˜¯å¯¹å¥—æ¥å­—åˆ—è¡¨è½®è¯¢çš„æœºåˆ¶ï¼Œè¿™ç§æ–¹å¼æœ‰ä¸¤ä¸ªå¤§é—®é¢˜ï¼š</p>

<ol>
<li>å¥—æ¥å­—åˆ—è¡¨ä¸­å…ƒç´ å¢å¤šï¼Œå¯¹äºä¸€ä¸ªæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œè¿™ä¸ªåˆ—è¡¨æ˜¯åœ¨ç”¨æˆ·å±‚çš„ï¼Œæ¯æ¬¡è½®è¯¢éƒ½éœ€è¦ç”¨æˆ·å±‚å’Œç³»ç»Ÿå±‚ä¹‹é—´æ•°æ®çš„æ‹·è´ï¼Œæ‰èƒ½è®©ç³»ç»Ÿæ­£å¸¸çš„æ“ä½œç¡¬ä»¶ï¼›å½“å¥—æ¥å­—æ•°é‡åˆ°è¶³å¤Ÿå¤§æ—¶ï¼Œå¯èƒ½ä¼šå› ä¸ºæ‹·è´è€Œé€ æˆæ—¶é—´çš„æµªè´¹ï¼›</li>
<li>å½“åˆ—è¡¨ä¸­å¥—æ¥å­—æ•°é‡è¶³å¤Ÿå¤šï¼Œå¦‚æœå…¶ä¸­åªæœ‰æå°‘éƒ¨åˆ†çš„å¥—æ¥å­—éœ€è¦æ•°æ®å¤„ç†ï¼Œé‚£å…¨éƒ¨è½®è¯¢å°±ä¼šé€ æˆä¸å¿…è¦çš„æ—¶é—´æµªè´¹ï¼›</li>
</ol>

<p>è€Œä¸Šæ–‡æåˆ°çš„ epoll æ°æ°èƒ½è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥åé‡Œç”¨ epoll çš„æ–¹å¼ä¹Ÿå®ç°äº†è¿™ä¸ªæœåŠ¡ï¼Œåªæ˜¯ä¸ºäº†ç†è§£åŸç†ï¼Œæ‰€ä»¥å®ç°åŒæ ·å¾ˆç®€å•ï¼Œå¯å‚è€ƒï¼š</p>

<p><a href="https://github.com/smslit/tools-with-script/blob/master/simple_server/simple_server" target="_blank">smslit/tools_of_python/simpe_server</a></p>]]></content>
		</item>
		
		<item>
			<title>å›¾åºŠçš„é€‰æ‹©ä»ä¸ƒç‰›äº‘åˆ°è…¾è®¯äº‘</title>
			<link>https://www.smslit.top/2018/11/17/qiniu-to-tencent-bucket/</link>
			<pubDate>Sat, 17 Nov 2018 13:56:21 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/11/17/qiniu-to-tencent-bucket/</guid>
			<description>&lt;p&gt;æ˜¨å¤©æ”¶åˆ°ä¸ƒç‰›äº‘çš„é‚®ä»¶æé†’è¯´è¦å›æ”¶æˆ‘çš„ CDN æµ‹è¯•åŸŸåï¼Œåšå®¢ä¸€ç›´ä½¿ç”¨ä¸ƒç‰›äº‘çš„ bucket ä½œä¸ºå›¾åºŠï¼Œä¹Ÿå°±æ˜¯è¯´æ”¶äº†åŸŸååï¼Œå›¾ç‰‡ä»¥åŠå…¶å®ƒæ–‡ä»¶æ— æ³•è®¿é—®ï¼Œæœ€ç³Ÿç³•çš„æ˜¯ä¸ƒç‰›äº‘åå°ç®¡ç†ä¹Ÿæ— æ³•è®¿é—®æ–‡ä»¶ï¼Œè¿™æ‰æœ‰äº†æœ¬æ–‡çš„å†…å®¹ï¼Œæˆ‘è¦å°†ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨è½¬ç§»åˆ°è…¾è®¯äº‘çš„å¯¹è±¡å­˜å‚¨ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æ˜¨å¤©æ”¶åˆ°ä¸ƒç‰›äº‘çš„é‚®ä»¶æé†’è¯´è¦å›æ”¶æˆ‘çš„ CDN æµ‹è¯•åŸŸåï¼Œåšå®¢ä¸€ç›´ä½¿ç”¨ä¸ƒç‰›äº‘çš„ bucket ä½œä¸ºå›¾åºŠï¼Œä¹Ÿå°±æ˜¯è¯´æ”¶äº†åŸŸååï¼Œå›¾ç‰‡ä»¥åŠå…¶å®ƒæ–‡ä»¶æ— æ³•è®¿é—®ï¼Œæœ€ç³Ÿç³•çš„æ˜¯ä¸ƒç‰›äº‘åå°ç®¡ç†ä¹Ÿæ— æ³•è®¿é—®æ–‡ä»¶ï¼Œè¿™æ‰æœ‰äº†æœ¬æ–‡çš„å†…å®¹ï¼Œæˆ‘è¦å°†ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨è½¬ç§»åˆ°è…¾è®¯äº‘çš„å¯¹è±¡å­˜å‚¨ã€‚</p>

<h1 id="æ¢å¤ä¸ƒç‰›äº‘æ–‡ä»¶">æ¢å¤ä¸ƒç‰›äº‘æ–‡ä»¶</h1>

<p>é¦–å…ˆå¾—æ¢å¤ä¸ƒç‰›äº‘ä¸­æ–‡ä»¶çš„è®¿é—®ã€‚ä¸ƒç‰›äº‘æä¾›çš„ <a href="https://developer.qiniu.com/kodo/tools/1302/qshell" target="_blank">qshell</a> å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç®¡ç†å¯¹è±¡å­˜å‚¨ç©ºé—´ï¼Œè¿™é‡Œçš„æ€è·¯å°±æ˜¯æ–°å»ºä¸€ä¸ªå¯¹è±¡å­˜å‚¨ç©ºé—´ï¼Œå°†åŸæ¥ç”¨ä½œå›¾åºŠçš„å¯¹è±¡å­˜å‚¨ç©ºé—´ä¸­çš„æ–‡ä»¶æ‹·è´åˆ°æ–°çš„å¯¹è±¡å­˜å‚¨ç©ºé—´ä¸­ã€‚</p>

<ol>
<li><p>ä¸‹è½½ qshell</p>

<ul>
<li><p>ä¸‹è½½åˆ°æœ€æ–°çš„ qshell å‹ç¼©åŒ…æ˜¯ <code>qshell-v2.3.0.zip</code>ï¼Œè§£å‹å¾—åˆ°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">qshell-v2.3.0
â”œâ”€â”€ qshell_darwin_x64
â”œâ”€â”€ qshell_linux_x64
â”œâ”€â”€ qshell_linux_x86
â”œâ”€â”€ qshell_windows_x64.exe
â””â”€â”€ qshell_windows_x86.exe

<span class="m">0</span> directories, <span class="m">5</span> files</code></pre></div></li>

<li><p>è¿›å…¥åˆ°ç›®å½• qshell-v2.3.0 ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿å»ºç«‹è½¯è¿æ¥ <code>qshell</code>ï¼Œè¿™é‡Œä½¿ç”¨çš„ macOSï¼Œæ‰€ä»¥è½¯è¿æ¥ <code>qshell_darwin_x64</code></p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ <span class="nb">cd</span> qshell-v2.3.0
$ ln -s qshell_darwin_x64 qshell</code></pre></div></li>
</ul></li>

<li><p>ç™»å½•è´¦æˆ·</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">./qshell account &lt;AK&gt; &lt;SK&gt; &lt;username&gt;</code></pre></div>
<ul>
<li><code>&lt;AK&gt;</code> æ˜¯ app key ï¼ˆä¸ªäººä¸­å¿ƒ-&gt;å¯†é’¥ç®¡ç†ä¸­æŸ¥çœ‹ï¼‰</li>
<li><code>&lt;SK&gt;</code> æ˜¯ secret key ï¼ˆä¸ªäººä¸­å¿ƒ-&gt;å¯†é’¥ç®¡ç†ä¸­æŸ¥çœ‹ï¼‰</li>
<li><code>&lt;username&gt;</code> æ˜¯ä½ çš„ä¸ƒç‰›è´¦æˆ·å</li>
</ul></li>

<li><p>è·å–æ–‡ä»¶è¯¦ç»†åˆ—è¡¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">./qshell listbucket &lt;åŸå­˜å‚¨ç©ºé—´&gt; &gt; filelist.txt</code></pre></div>
<ul>
<li><code>&lt;åŸå­˜å‚¨ç©ºé—´&gt;</code> æ˜¯å·²ç»è¢«å›æ”¶ CDN åŸŸåçš„å¯¹è±¡ç©ºé—´çš„åç§°</li>
</ul></li>

<li><p>åˆ‡åˆ†å‡ºæ–‡ä»¶åç§°çš„åˆ—è¡¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">cat filelist.txt <span class="p">|</span> awk -F <span class="s1">&#39;\t&#39;</span> <span class="s1">&#39;{print $1}&#39;</span> &gt; list.txt</code></pre></div></li>

<li><p>å»<a href="https://portal.qiniu.com/create" target="_blank">ä¸ƒç‰›äº‘ç®¡ç†æ§åˆ¶å°</a>ï¼Œæ–°å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å­˜å‚¨ç©ºé—´ï¼Œè¿™é‡Œå‘½åä¸º <code>backup</code>ï¼Œæ–°å»ºå®Œæˆåä¼šçœ‹åˆ°ç©ºé—´åˆ†é…äº†æ–°çš„ CDN åŸŸåï¼Œä½†æ˜¯æœ‰æ•ˆæœŸåªæœ‰ä¸€ä¸ªæœˆï¼Œè¿™æ˜¯è¦æ”¾å¼ƒä¸ƒç‰›äº‘çš„ä¸»è¦åŸå› </p></li>

<li><p>å°†åŸç©ºé—´çš„æ–‡ä»¶æ‹·è´åˆ°æ–°ç©ºé—´ backup ä¸­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">./qshell batchcopy &lt;åŸå­˜å‚¨ç©ºé—´&gt; backup -i list.txt</code></pre></div>
<p>å®Œæˆåï¼Œè®¿é—®<a href="https://portal.qiniu.com/create" target="_blank">ä¸ƒç‰›äº‘ç®¡ç†æ§åˆ¶å°</a>ä¸­ backup å­˜å‚¨ç©ºé—´çš„å†…å®¹ç®¡ç†å°±å¯ä»¥çœ‹åˆ°åŸæ¥çš„æ–‡ä»¶äº†ï¼Œéƒ½å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚</p></li>
</ol>

<h1 id="ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°">ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°</h1>

<p>qshellæä¾›äº†qdownloadå¯ä»¥æ‰¹é‡ä¸‹è½½æ–‡ä»¶ï¼Œä¸è¿‡å®˜ç½‘ç»™å‡ºçš„apiæ–‡æ¡£ç‰¹åˆ«æ ‡æ³¨äº†ï¼Œè¿™ä¸ªæ¥å£é»˜è®¤æ˜¯è¦æ”¶è´¹çš„:é…ç½®ã€è¯¥åŠŸèƒ½é»˜è®¤éœ€è¦è®¡è´¹ï¼Œå¦‚æœå¸Œæœ›äº«å—10Gçš„å…è´¹æµé‡ï¼Œè¯·è‡ªè¡Œè®¾ç½®cdn_domainå‚æ•°ï¼Œå¦‚ä¸è®¾ç½®ï¼Œéœ€æ”¯ä»˜æºç«™æµé‡è´¹ç”¨ï¼Œæ— æ³•å‡å…ï¼ï¼ï¼ã€‘<sup class="footnote-ref" id="fnref:https-sjq597-git"><a href="#fn:https-sjq597-git">1</a></sup>ã€‚</p>

<p>å‘ƒã€‚ã€‚ã€‚æ–‡ä»¶éƒ½æ˜¯æœ‰å¤–é“¾çš„ï¼Œæ‰€ä»¥åé‡Œç”¨ python å†™äº†ä¸€ä¸ªä¸‹è½½ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨ç©ºé—´æ–‡ä»¶çš„å·¥å…· <a href="https://github.com/smslit/tools-with-script/tree/master/qdownload" target="_blank">qdownload</a>ã€‚</p>

<p>æ‰“å¼€<a href="https://portal.qiniu.com/create" target="_blank">ä¸ƒç‰›äº‘ç®¡ç†æ§åˆ¶å°</a>ï¼Œæ‰¾åˆ°æ–°çš„å­˜å‚¨ç©ºé—´ backup æŸ¥çœ‹ CDN åŸŸåï¼Œä½¿ç”¨ qdownload ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°:</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">./qdownload &lt;backupç©ºé—´çš„CDNåŸŸå&gt; list.txt -o pichome</code></pre></div>
<ul>
<li><code>&lt;backupç©ºé—´çš„CDNåŸŸå&gt;</code>ï¼šæ–°çš„å­˜å‚¨ç©ºé—´ backup æŸ¥çœ‹ CDN åŸŸå</li>
<li><code>list.txt</code>ï¼š<a href="#æ¢å¤ä¸ƒç‰›äº‘æ–‡ä»¶" target="_blank">æ¢å¤ä¸ƒç‰›äº‘æ–‡ä»¶</a> ä¸­ç¬¬ 4 æ­¥å¾—åˆ°çš„æ–‡ä»¶åˆ—è¡¨æ–‡ä»¶</li>
</ul>

<p>æ‰§è¡Œå®Œå‘½ä»¤ï¼Œå°±ä¼šå‘ç°æ–‡ä»¶éƒ½ä¸‹è½½åˆ°äº† <code>~/Downloads/pichome</code> ä¸‹äº†ã€‚</p>

<h1 id="å‡†å¤‡è…¾è®¯äº‘cos">å‡†å¤‡è…¾è®¯äº‘COS</h1>

<p>è…¾è®¯äº‘COS<sup class="footnote-ref" id="fnref:COS-https-cloud"><a href="#fn:COS-https-cloud">2</a></sup>æä¾›å…è´¹ç©ºé—´å’Œæ¯æœˆæœ‰é™çš„è®¿é—®æ¬¡æ•°ï¼Œä½†å¯¹äºæœ¬åšå®¢æ¥è¯´è¶³ä»¥ã€‚</p>

<ol>
<li>è®¿é—®<a href="https://console.cloud.tencent.com/cos5" target="_blank">è…¾è®¯äº‘ COS æ§åˆ¶å°</a>ï¼Œæ–°å»ºå­˜å‚¨æ¡¶ï¼Œåªéœ€æ³¨æ„æƒé™é€‰æ‹© <strong>ç§æœ‰å†™å…¬æœ‰è¯»</strong> å³å¯ã€‚</li>
<li>è®¿é—®<a href="https://console.cloud.tencent.com/cam/capi" target="_blank">äº‘APIå¯†é’¥</a>ï¼Œæ–°å»ºå¯†é’¥ï¼Œæ–°å»ºæˆåŠŸåè®°ä¸‹ <strong>SecretId</strong> å’Œ <strong>SecretKey</strong></li>

<li><p>ä¸‹è½½ <a href="https://cloud.tencent.com/document/product/436/11366" target="_blank">COSrowser</a> å·¥å…·ï¼Œä¸‹è½½åæ‰“å¼€å·¥å…·ï¼Œè¾“å…¥ç¬¬äºŒæ­¥çš„  <strong>SecretId</strong> å’Œ <strong>SecretKey</strong>ï¼Œå°±å¯ä»¥ç®¡ç†å­˜å‚¨æ¡¶é‡Œçš„æ–‡ä»¶äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/å±å¹•å¿«ç…§ 2018-11-17 ä¸‹åˆ3.03.36.png" alt="" /></p></li>
</ol>

<h1 id="ä¸ŠåºŠæ–‡ä»¶åˆ°cos">ä¸ŠåºŠæ–‡ä»¶åˆ°COS</h1>

<p>è¿›å…¥ <code>~/Downloads/pichome</code> ç›®å½•ï¼Œä¹Ÿå°±æ˜¯<a href="#ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°" target="_blank">ä¸‹è½½æ–‡ä»¶åˆ°æœ¬åœ°</a>ä¸­ä¸‹è½½æ–‡ä»¶çš„ç›®æ ‡ç›®å½•ï¼Œé€‰ä¸­æ‰€æœ‰æ–‡ä»¶æ‹–æ‹½åˆ°æ‰“å¼€çš„ <strong>COSrowser</strong> çª—å£ä¸­ï¼Œè½¯ä»¶å°±ä¼šè‡ªåŠ¨ä¸Šä¼ æ–‡ä»¶ã€‚</p>

<p>ç­‰ä¸Šä¼ å®Œæˆåï¼Œéšä¾¿æ‰¾ä¸€ä¸ªæ–‡ä»¶å³é”®é€‰ä¸­å¤åˆ¶é“¾æ¥ï¼Œå°±ä¼šå¾—åˆ°æ–‡ä»¶ä¸€ä¸ªå®Œæ•´çš„å¤–éƒ¨è®¿é—®é“¾æ¥ï¼Œåˆ†æé“¾æ¥è®°ä¸‹è¿æ¥ä¸­çš„åŸŸåã€‚</p>

<h1 id="æ›´æ–°åšå®¢æºæ–‡ä»¶ä¸­èµ„æºé“¾æ¥">æ›´æ–°åšå®¢æºæ–‡ä»¶ä¸­èµ„æºé“¾æ¥</h1>

<p>å› ä¸ºåŸæ¥ä½¿ç”¨çš„æ˜¯ä¸ƒç‰›äº‘ï¼Œä¹Ÿæ˜¯å›ºå®šä½¿ç”¨ä¸€ä¸ªåŸŸåçš„ï¼Œæ‰€æœ‰æ–‡ä»¶ä»ä¸ƒç‰›äº‘è½¬å­˜åˆ°è…¾è®¯COSï¼Œæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æ˜¯æ²¡å˜çš„ï¼Œæ‰€ä»¥åªéœ€è¦æ›¿æ¢åŸæ¥çš„åŸŸåä¸ºç°åœ¨è…¾è®¯COSåˆ†é…çš„æ–°åŸŸåå³å¯ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæ¯”å¦‚å¯ä»¥ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Sed" target="_blank">sed</a> å‘½ä»¤ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨ vscode çš„é«˜çº§æŸ¥æ‰¾æ›¿æ¢åŸŸåï¼Œåœ¨æ‰“å¼€çš„æ–‡ä»¶å¤¹ä¸‹æœç´¢æ‰€æœ‰æ–‡ä»¶ä¸­æœ‰åŸåŸŸåçš„ä½ç½®ï¼Œç„¶åå…¨éƒ¨æ›¿æ¢ä¸ºæ–°åŸŸåå³å¯ï¼š</p>

<ol>
<li>ä½¿ç”¨ vscode æ‰“å¼€åšå®¢æ–‡ç« çš„æºæ–‡ä»¶ç›®å½•ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯hugoï¼Œæ‰€ä»¥æ‰“å¼€å­˜ md æ–‡ä»¶çš„ <code>content</code> ç›®å½•</li>
<li>æŒ‰ <code>command</code> + <code>shift</code> + <code>h</code> æ‰“å¼€é«˜çº§æ›¿æ¢çš„ä¾§æ ï¼Œä¸Šç¼–è¾‘æ¡†è¾“å…¥å¾…æŸ¥æ‰¾çš„åŸåŸŸåï¼Œå°±ä¼šå¾—åˆ°æœç´¢ç»“æœ</li>
<li>æ£€æŸ¥æœç´¢ç»“æœæ²¡ä»€ä¹ˆé—®é¢˜åï¼Œä¸‹è¾¹æ¡†è¾“å…¥æ–°åŸŸåï¼Œç‚¹å‡»å…¨éƒ¨æ›¿æ¢æŒ‰é’®</li>
<li>å¯åŠ¨åšå®¢æ¸²æŸ“æœåŠ¡ï¼Œæ‰“å¼€æœ¬åœ°çš„åšå®¢ï¼Œæ‰€æœ‰çš„å›¾ç‰‡å’Œæ–‡ä»¶è®¿é—®æ­£å¸¸</li>
</ol>

<p>yeahï¼Œ Doneï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:https-sjq597-git"><a href="https://sjq597.github.io/2018/10/13/ä¸ƒç‰›æµ‹è¯•åŸŸåå›æ”¶è¿ç§»åšå®¢å›¾åºŠåˆ°è…¾è®¯äº‘/" target="_blank">ä¸ƒç‰›æµ‹è¯•åŸŸåå›æ”¶è¿ç§»åšå®¢å›¾åºŠåˆ°è…¾è®¯äº‘-æ‰¹é‡ä¸‹è½½åˆ°æœ¬åœ°</a> <a class="footnote-return" href="#fnref:https-sjq597-git"><sup>[return]</sup></a></li>
<li id="fn:COS-https-cloud">åœ¨ä¸­å›½å¤§é™†åœ°åŒºï¼Œä½¿ç”¨è…¾è®¯äº‘ COS æ ‡å‡†å­˜å‚¨çš„ç”¨æˆ·ï¼Œæ¯æœˆå¯äº«å—ä¸€å®šé‡çš„å…è´¹å­˜å‚¨å®¹é‡ã€å…è´¹æµé‡ã€å’Œå…è´¹è¯·æ±‚ã€‚â€”â€”<a href="https://cloud.tencent.com/document/product/436/6240" target="_blank">å…è´¹é¢åº¦</a> <a class="footnote-return" href="#fnref:COS-https-cloud"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>ä½¿ç”¨ matplotlib çš„ animation è®©æ•°æ®åŠ¨èµ·æ¥</title>
			<link>https://www.smslit.top/2018/11/12/matplotlib-animation/</link>
			<pubDate>Mon, 12 Nov 2018 01:22:15 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/11/12/matplotlib-animation/</guid>
			<description>&lt;p&gt;æœ€è¿‘åœ¨ç ”ç©¶æ’åºç®—æ³•ï¼Œä¸ºäº†æ›´å¥½çš„å±•ç¤ºæ’åºè¿‡ç¨‹ï¼Œå†³å®šä½¿ç”¨åŠ¨ç”»æ¼”ç¤ºï¼Œä¸“é—¨ç ”ç©¶äº† python å›¾è¡¨åº“ matplotlib çš„ animationã€‚æœ¬æ–‡ç®€å•è®²ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ matplotlib è®©ä½ æ‰‹ä¸­çš„æ•°æ®åŠ¨èµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181112154195822047625.gif&#34; alt=&#34;20181112154195822047625.gif&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ç ”ç©¶æ’åºç®—æ³•ï¼Œä¸ºäº†æ›´å¥½çš„å±•ç¤ºæ’åºè¿‡ç¨‹ï¼Œå†³å®šä½¿ç”¨åŠ¨ç”»æ¼”ç¤ºï¼Œä¸“é—¨ç ”ç©¶äº† python å›¾è¡¨åº“ matplotlib çš„ animationã€‚æœ¬æ–‡ç®€å•è®²ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ matplotlib è®©ä½ æ‰‹ä¸­çš„æ•°æ®åŠ¨èµ·æ¥ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181112154195822047625.gif" alt="20181112154195822047625.gif" /></p>

<h1 id="animated-line-plot">Animated line plot</h1>

<p>åºŸè¯ä¸å¤šè¯´ï¼Œä»¥ matplotlib å®˜æ–¹ç»™çš„ ğŸŒ° ï¼ˆ<a href="https://matplotlib.org/gallery/animation/simple_anim.html" target="_blank">Animated line plot</a>ï¼‰è¯´æ˜åŸºæœ¬çš„ä½¿ç”¨ã€‚</p>

<h2 id="ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </h2>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.animation</span> <span class="kn">as</span> <span class="nn">animation</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">line</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">init</span><span class="p">():</span>  <span class="c1"># only required for blitting to give a clean slate.</span>
    <span class="n">line</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">line</span><span class="p">,</span>


<span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="n">line</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">i</span> <span class="o">/</span> <span class="mi">100</span><span class="p">))</span>  <span class="c1"># update the data.</span>
    <span class="k">return</span> <span class="n">line</span><span class="p">,</span>


<span class="n">ani</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">init_func</span><span class="o">=</span><span class="n">init</span><span class="p">,</span> <span class="n">interval</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">blit</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">save_count</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="c1"># To save the animation, use e.g.</span>
<span class="c1">#</span>
<span class="c1"># ani.save(&#34;movie.mp4&#34;)</span>
<span class="c1">#</span>
<span class="c1"># or</span>
<span class="c1">#</span>
<span class="c1"># from matplotlib.animation import FFMpegWriter</span>
<span class="c1"># writer = FFMpegWriter(fps=15, metadata=dict(artist=&#39;Me&#39;), bitrate=1800)</span>
<span class="c1"># ani.save(&#34;movie.mp4&#34;, writer=writer)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>
<h2 id="è¿è¡Œç»“æœ">è¿è¡Œç»“æœ</h2>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/animation/animation.mp4" controls="controls" width="60%">animated line plot</video>

<p>ä¸Šé¢çš„è§†é¢‘æ˜¯ç”±ä¸Šé¢çš„ä»£ç ç”Ÿæˆï¼Œä¸è¿‡éœ€è¦å°†ä»¥ä¸‹ä»£ç ï¼ˆå³30ï½32è¡Œï¼‰å–æ¶ˆæ³¨é‡Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">matplotlib.animation</span> <span class="kn">import</span> <span class="n">FFMpegWriter</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">FFMpegWriter</span><span class="p">(</span><span class="n">fps</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">artist</span><span class="o">=</span><span class="s1">&#39;Me&#39;</span><span class="p">),</span> <span class="n">bitrate</span><span class="o">=</span><span class="mi">1800</span><span class="p">)</span>
<span class="n">ani</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&#34;movie.mp4&#34;</span><span class="p">,</span> <span class="n">writer</span><span class="o">=</span><span class="n">writer</span><span class="p">)</span></code></pre></div>
<p>å¦‚æœç³»ç»Ÿæ²¡æœ‰å®‰è£… <a href="https://www.ffmpeg.org" target="_blank">ffmpeg</a> è¿è¡Œä»£ç å¯èƒ½ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼š</p>

<blockquote>
<p>&hellip;
FileNotFoundError: [Errno 2] No such file or directory: &lsquo;ffmpeg&rsquo;: &lsquo;ffmpeg&rsquo;</p>
</blockquote>

<p>æ‰€ä»¥éœ€è¦å®‰è£… ffmpegï¼Œåé‡Œä½¿ç”¨çš„æ˜¯ macOSï¼Œæ‰€ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ brew install ffmpeg</code></pre></div>
<p>å…¶å®ƒç³»ç»Ÿå¯ä»¥ä¸‹è½½ <a href="https://www.ffmpeg.org/download.html" target="_blank">ffmpeg å®˜ç½‘</a> æä¾›çš„å®‰è£…åŒ…è¿›è¡Œå®‰è£…ã€‚</p>

<h2 id="ä»£ç åˆ†æ">ä»£ç åˆ†æ</h2>

<p>ç†è§£ä»£ç çš„å…³é”®ä¸‰ç‚¹ï¼š</p>

<ol>
<li>è·å–å›¾åƒ <code>fig</code> å’Œ åæ ‡è½´å¯¹è±¡ <code>ax</code>ï¼š<code>fig, ax = plt.subplots()</code></li>
<li>å®šä¹‰åˆå§‹åŒ–å‡½æ•° <code>init</code> å’Œæ•°æ®æ›´æ–°å‡½æ•° <code>animate</code>ï¼š

<ul>
<li>åˆå§‹åŒ–å‡½æ•°ï¼Œç”¨äºåŠ¨ç”»çš„åˆå§‹åŒ–æ“ä½œï¼Œè¿™ä¸ªå¯ä»¥ä¸ç”¨ä¸ºå¯é€‰å®šä¹‰</li>
<li>æ•°æ®æ›´æ–°å‡½æ•°ï¼Œç”¨äºå‘ŠçŸ¥ animation æ›´æ–°æ“ä½œï¼Œè¿™ä¸ªå‡½æ•°çš„å‚æ•°é»˜è®¤ä¼ å…¥çš„æ˜¯å¸§åºå·ï¼Œä½†æ˜¯å¦‚æœ <code>animation.FuncAnimation</code> æ–¹æ³•æŒ‡å®šå¯é€‰å‚æ•° <code>frames</code> ä¸ºä¸€ä¸ªåˆ—è¡¨çš„è¯ï¼Œæ›´æ–°å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å€¼ä¼šæ˜¯ç›¸åº”ç´¢å¼•ä¸‹çš„å…ƒç´ ï¼Œæ­¤æ—¶åŠ¨ç”»ç»ˆç‚¹å°±æ˜¯å–å®Œåˆ—è¡¨å…ƒç´ ï¼Œå¦‚æœä¸æŒ‡å®š <code>frames</code> åˆ™ä¼šä¸€ç›´ä¼ å…¥å¸§åºå·ä¿æŒä¸‹å»ã€‚</li>
</ul></li>
<li>è°ƒç”¨ <code>animation.FuncAnimation</code> æ–¹æ³•ï¼š

<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥å›¾åƒå¯¹è±¡ï¼Œè¿™é‡Œæ˜¯ <code>fig</code></li>
<li>ç¬¬äºŒä¸ªå‚æ•°é»˜è®¤ä¸ºæ›´æ–°å‡½æ•°ï¼Œè¿™é‡Œæ˜¯ <code>animate</code></li>
<li>å¯é€‰å‚æ•° <code>init_func</code>ï¼ŒæŒ‡å®šåˆå§‹åŒ–å‡½æ•°</li>
<li>å¯é€‰å‚æ•° <code>interval</code>ï¼ŒæŒ‡å®šå¸§é—´éš”æ—¶é—´å•ä½ <strong>ms</strong></li>
<li>å¯é€‰å‚æ•° <code>frames</code>ï¼ŒæŒ‡å®šæ›´æ–°åºåˆ—ï¼Œå¦‚æœæ˜¯ä¸ªæ•´æ•°ï¼Œåˆ™æŒ‡å®šçš„æ˜¯æ€»çš„å¸§æ•°</li>
<li>å¯é€‰å‚æ•° <code>save_count</code>ï¼ŒæŒ‡å®šä¿å­˜åŠ¨ç”»ï¼ˆgifæˆ–mp4ï¼‰çš„å¸§æ•°</li>
<li>å¯é€‰å‚æ•° <code>repeat</code>ï¼ŒæŒ‡å®šæ˜¯å¦å¾ªç¯åŠ¨ç”»</li>
<li>å¯é€‰å‚æ•° <code>blit</code>ï¼ŒæŒ‡å®šæ˜¯å¦ä¼˜åŒ–ç»˜å›¾</li>
</ul></li>
</ol>

<h2 id="åŠ¨ç”»ä¿å­˜">åŠ¨ç”»ä¿å­˜</h2>

<p><a href="#è¿è¡Œç»“æœ" target="_blank">è¿è¡Œç»“æœ</a> ä¸­è¯´æ˜äº†ä¿å­˜ mp4 çš„æ–¹æ³•ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹å¦‚ä½•ä¿å­˜ gifã€‚</p>

<p><code>ani</code> çš„ <code>save</code> æ–¹æ³•å¯ä»¥æŒ‡å®š <code>writer</code> ï¼Œè¿™é‡Œè¦ä¿å­˜ <code>gif</code> é»˜è®¤é€‰æ‹©çš„ <code>writer</code> ä¸º <code>pillow</code> ï¼Œæ‰€ä»¥éœ€è¦å®‰è£… <code>pillow</code> åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ pip3 install pillow</code></pre></div>
<p>æŒ‰ç…§å¦‚ä¸‹è°ƒç”¨æ–¹æ³•å³å¯ä¿å­˜åŠ¨ç”»ä¸º <code>gif</code>ï¼Œè¿™é‡Œä¿å­˜åŠ¨ç”»çš„å¸§æ•°æ˜¯å— <code>animation.FuncAnimation</code> çš„ <code>frames</code> å’Œ <code>save_count</code> å½±å“çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">ani</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;animation.gif&#39;</span><span class="p">,</span> <span class="n">writer</span><span class="o">=</span><span class="s1">&#39;pillow&#39;</span><span class="p">)</span></code></pre></div>
<h1 id="æŸ±çŠ¶å›¾åŠ¨èµ·æ¥">æŸ±çŠ¶å›¾åŠ¨èµ·æ¥</h1>

<p>ç›´æ¥ä¸Šä»£ç ï¼Œ<strong>æ¯”ç€è‘«èŠ¦ç”»ç“¢</strong> è®©ä½ çš„æŸ±çŠ¶å›¾èˆåŠ¨èµ·æ¥å§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">animation</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">16</span><span class="p">)]</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">+</span><span class="n">i</span><span class="o">/</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>
<span class="n">rects</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">rect</span><span class="p">,</span> <span class="n">yi</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rects</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
        <span class="n">rect</span><span class="o">.</span><span class="n">set_height</span><span class="p">(</span><span class="n">yi</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">rects</span>

<span class="n">anim</span> <span class="o">=</span> <span class="n">animation</span><span class="o">.</span><span class="n">FuncAnimation</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">animate</span><span class="p">,</span> <span class="n">frames</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">interval</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="c1"># anim.save(&#39;bar.gif&#39;, writer=&#39;pillow&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>
<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181112154200404087645.gif" alt="20181112154200404087645.gif" /></p>]]></content>
		</item>
		
		<item>
			<title>æ’åºç®—æ³•çŸ¥å¤šå°‘</title>
			<link>https://www.smslit.top/2018/11/07/algorithm-sort/</link>
			<pubDate>Wed, 07 Nov 2018 15:37:05 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/11/07/algorithm-sort/</guid>
			<description>&lt;p&gt;å¤§å­¦é‡Œå­¦çš„ç¬¬ä¸€é—¨ç¼–ç¨‹è¯­è¨€æ˜¯ c++ï¼Œc++ çš„è¯¾ç¨‹ä¸­æ¥è§¦çš„ç¬¬ä¸€ç§æ’åºç®—æ³•æ˜¯&lt;strong&gt;å†’æ³¡æ’åº&lt;/strong&gt;ï¼Œè¿™å·²ç»è¿‡å»å…«å¹´ï¼Œå¾ˆæƒ­æ„§çš„æ˜¯åˆ°ç›®å‰åªäº†è§£&lt;strong&gt;å†’æ³¡æ’åº&lt;/strong&gt;å’Œ&lt;strong&gt;æ’å…¥æ’åº&lt;/strong&gt;ä¸¤ç§ï¼Œä½œä¸ºä¸€ååˆæ ¼çš„ç¨‹åºçŒ¿ä¹Ÿåº”è¯¥äº†è§£äº†è§£å…¶å®ƒçš„æ’åºç®—æ³•å§ï¼æ‰€ä»¥å¼€æœ¬æ–‡è®°å½•æ•´ç†ç½‘ä¸Šæ‰€è°“çš„&lt;strong&gt;åå¤§æ’åºç®—æ³•&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018111115418975029904.gif&#34; alt=&#34;2018111115418975029904.gif&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å¤§å­¦é‡Œå­¦çš„ç¬¬ä¸€é—¨ç¼–ç¨‹è¯­è¨€æ˜¯ c++ï¼Œc++ çš„è¯¾ç¨‹ä¸­æ¥è§¦çš„ç¬¬ä¸€ç§æ’åºç®—æ³•æ˜¯<strong>å†’æ³¡æ’åº</strong>ï¼Œè¿™å·²ç»è¿‡å»å…«å¹´ï¼Œå¾ˆæƒ­æ„§çš„æ˜¯åˆ°ç›®å‰åªäº†è§£<strong>å†’æ³¡æ’åº</strong>å’Œ<strong>æ’å…¥æ’åº</strong>ä¸¤ç§ï¼Œä½œä¸ºä¸€ååˆæ ¼çš„ç¨‹åºçŒ¿ä¹Ÿåº”è¯¥äº†è§£äº†è§£å…¶å®ƒçš„æ’åºç®—æ³•å§ï¼æ‰€ä»¥å¼€æœ¬æ–‡è®°å½•æ•´ç†ç½‘ä¸Šæ‰€è°“çš„<strong>åå¤§æ’åºç®—æ³•</strong>ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018111115418975029904.gif" alt="2018111115418975029904.gif" /></p>

<h1 id="æ’åºç®—æ³•æ¦‚è¿°">æ’åºç®—æ³•æ¦‚è¿°</h1>

<p>ç½‘ä¸Šå¸¸è§çš„æ’åºç®—æ³•æœ‰åç§ï¼š<a href="https://zh.wikipedia.org/wiki/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F" target="_blank">å†’æ³¡æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F" target="_blank">å¿«é€Ÿæ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F" target="_blank">æ’å…¥æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F" target="_blank">å¸Œå°”æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F" target="_blank">é€‰æ‹©æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E5%A0%86%E6%8E%92%E5%BA%8F" target="_blank">å †æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F" target="_blank">å½’å¹¶æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F" target="_blank">è®¡æ•°æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E5%9F%BA%E6%95%B0%E6%8E%92%E5%BA%8F" target="_blank">åŸºæ•°æ’åº</a>ã€<a href="https://zh.wikipedia.org/wiki/%E6%A1%B6%E6%8E%92%E5%BA%8F" target="_blank">æ¡¶æ’åº</a>ã€‚</p>

<h2 id="æ’åºç®—æ³•åˆ†ç±»">æ’åºç®—æ³•åˆ†ç±»</h2>

<p>ä¸Šé¢åå¤§æ’åºç®—æ³•æŒ‰ç…§<strong>éçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åº</strong><sup class="footnote-ref" id="fnref:O-n-log-n"><a href="#fn:O-n-log-n">1</a></sup>å’Œ<strong>çº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº</strong><sup class="footnote-ref" id="fnref:-"><a href="#fn:-">2</a></sup>è¿›è¡Œåˆ†ç±»ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/Surface Pro 4 â€“ 1@2x.png" alt="" /></p>

<h2 id="æ’åºç®—æ³•å¯¹æ¯”">æ’åºç®—æ³•å¯¹æ¯”</h2>

<p>ä»<strong>æ—¶é—´å¤æ‚åº¦</strong><sup class="footnote-ref" id="fnref:n"><a href="#fn:n">3</a></sup>ã€<strong>ç©ºé—´å¤æ‚åº¦</strong><sup class="footnote-ref" id="fnref:n"><a href="#fn:n">4</a></sup>å’Œ <strong>ç¨³å®šæ€§</strong><sup class="footnote-ref" id="fnref:a-b-a-b-a-b-a-b"><a href="#fn:a-b-a-b-a-b-a-b">5</a></sup>ä¸‰æ–¹é¢å¯¹æ¯”åç§æ’åºæ–¹æ³•å¦‚ä¸‹ï¼š</p>

<style>
table th:first-of-type {
    width:75px;
}
table th:last-of-type {
    width:75px;
}
</style>

<table>
<thead>
<tr>
<th>æ’åºç®—æ³•</th>
<th>æ—¶é—´å¤æ‚åº¦(å¹³å‡)</th>
<th>æ—¶é—´å¤æ‚åº¦(æœ€å)</th>
<th>æ—¶é—´å¤æ‚åº¦(æœ€å¥½)</th>
<th>ç©ºé—´å¤æ‚åº¦(å¹³å‡)</th>
<th>ç¨³å®šæ€§</th>
</tr>
</thead>

<tbody>
<tr>
<td>å†’æ³¡æ’åº</td>
<td>$O(n^2)$</td>
<td>$O(n^2)$</td>
<td>$O(n)$</td>
<td>$O(1)$</td>
<td>ç¨³å®š</td>
</tr>

<tr>
<td>å¿«é€Ÿæ’åº</td>
<td>$O(n\log_2 n)$</td>
<td>$O(n^2)$</td>
<td>$O(n\log_2 n)$</td>
<td>$O(n\log_2 n)$</td>
<td>ä¸ç¨³å®š</td>
</tr>

<tr>
<td>æ’å…¥æ’åº</td>
<td>$O(n^2)$</td>
<td>$O(n^2)$</td>
<td>$O(n)$</td>
<td>$O(1)$</td>
<td>ç¨³å®š</td>
</tr>

<tr>
<td>å¸Œå°”æ’åº</td>
<td>$O(n^{1.3})$</td>
<td>$O(n^2)$</td>
<td>$O(n)$</td>
<td>$O(1)$</td>
<td>ä¸ç¨³å®š</td>
</tr>

<tr>
<td>é€‰æ‹©æ’åº</td>
<td>$O(n^2)$</td>
<td>$O(n^2)$</td>
<td>$O(n^2)$</td>
<td>$O(1)$</td>
<td>ä¸ç¨³å®š</td>
</tr>

<tr>
<td>å †æ’åº</td>
<td>$O(n\log_2 n)$</td>
<td>$O(n\log_2 n)$</td>
<td>$O(n\log_2 n)$</td>
<td>$O(1)$</td>
<td>ä¸ç¨³å®š</td>
</tr>

<tr>
<td>å½’å¹¶æ’åº</td>
<td>$O(n\log_2 n)$</td>
<td>$O(n\log_2 n)$</td>
<td>$O(n\log_2 n)$</td>
<td>$O(n)$</td>
<td>ç¨³å®š</td>
</tr>

<tr>
<td>è®¡æ•°æ’åº</td>
<td>$O(n+k)$</td>
<td>$O(n+k)$</td>
<td>$O(n+k)$</td>
<td>$O(n+k)$</td>
<td>ç¨³å®š</td>
</tr>

<tr>
<td>åŸºæ•°æ’åº</td>
<td>$O(n+k)$</td>
<td>$O(n^2)$</td>
<td>$O(n)$</td>
<td>$O(n+k)$</td>
<td>ç¨³å®š</td>
</tr>

<tr>
<td>æ¡¶æ’åº</td>
<td>$O(n\cdot k)$</td>
<td>$O(n \cdot k)$</td>
<td>$O(n \cdot k)$</td>
<td>$O(n+k)$</td>
<td>ç¨³å®š</td>
</tr>
</tbody>
</table>

<h1 id="å†’æ³¡æ’åº">å†’æ³¡æ’åº</h1>

<p><code>2018å¹´11æœˆ08æ—¥</code></p>

<p>å†’æ³¡æ’åºï¼ˆè‹±è¯­ï¼šBubble Sortï¼‰æ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ã€‚å®ƒé‡å¤éå†è¦æ’åºçš„æ•°åˆ—ï¼Œä¸€æ¬¡æ¯”è¾ƒä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚éå†æ•°åˆ—çš„å·¥ä½œé‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰å…ƒç´ éœ€è¦äº¤æ¢ï¼Œå³æ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•è¿›è¡Œæ—¶è¶Šå°çš„å…ƒç´ ä¼šç»äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ï¼Œæ•…å¾—â€œå†’æ³¡ä¹‹åã€‚</p>

<h2 id="å†’æ³¡æ’åºæ­¥éª¤">å†’æ³¡æ’åºæ­¥éª¤</h2>

<ol>
<li>æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚</li>
<li>å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»å¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åä¸€å¯¹ã€‚è¿™æ­¥åšå®Œåï¼Œæœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚</li>
<li>é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åä¸€ä¸ªã€‚</li>
<li>æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒä¸ºæ­¢ã€‚</li>
</ol>

<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä»¥æ•°ç»„ <code>[12, 3, 45, 65, 54, 34, 78, 9 ,10, 23]</code> æ’åºä¸ºä¾‹ï¼Œæ’åºè¿‡ç¨‹å¦‚ä»¥ä¸‹åŠ¨å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018111115418975029904.gif" alt="2018111115418975029904.gif" /></p>

<h2 id="å†’æ³¡æ’åºç¤ºä¾‹ä»£ç ">å†’æ³¡æ’åºç¤ºä¾‹ä»£ç </h2>

<p>python3 å®ç°å†’æ³¡ç®—æ³•å°è£…æˆå‡½æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">bubble_sort</span><span class="p">(</span><span class="n">numlist</span><span class="p">):</span>
    <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numlist</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">i</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
                <span class="n">numlist</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">numlist</span></code></pre></div>
<p>è¿›è¡Œæµ‹è¯•ï¼Œç®€å•æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span> <span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mi">23</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorting... {l}&#39;</span><span class="p">)</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">bubble_sort</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorted  -&gt; {l}&#39;</span><span class="p">)</span></code></pre></div>
<p>è¿è¡Œè„šæœ¬ï¼Œä¸€åˆ‡OKï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ python3 bubble.py
sorting... <span class="o">[</span><span class="m">12</span>, <span class="m">3</span>, <span class="m">45</span>, <span class="m">65</span>, <span class="m">54</span>, <span class="m">34</span>, <span class="m">78</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">23</span><span class="o">]</span>
sorted  -&gt; <span class="o">[</span><span class="m">3</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">12</span>, <span class="m">23</span>, <span class="m">34</span>, <span class="m">45</span>, <span class="m">54</span>, <span class="m">65</span>, <span class="m">78</span><span class="o">]</span></code></pre></div>
<h1 id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</h1>

<p><code>2018å¹´11æœˆ09æ—¥</code></p>

<p>å¿«é€Ÿæ’åºï¼ˆè‹±è¯­ï¼šQuicksortï¼‰ï¼Œåˆç§°åˆ’åˆ†äº¤æ¢æ’åºï¼ˆpartition-exchange sortï¼‰ï¼Œç®€ç§°å¿«æ’ï¼Œä¸€ç§æ’åºç®—æ³•ï¼Œæœ€æ—©ç”±ä¸œå°¼Â·éœå°”æå‡ºã€‚åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼Œæ’åº
$n$ ä¸ªé¡¹ç›®è¦ $O(n\log n)$ï¼ˆå¤§Oç¬¦å·ï¼‰æ¬¡æ¯”è¾ƒã€‚åœ¨æœ€åçŠ¶å†µä¸‹åˆ™éœ€è¦ $O(n^2)$ æ¬¡æ¯”è¾ƒï¼Œä½†è¿™ç§çŠ¶å†µå¹¶ä¸å¸¸è§ã€‚äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åº $\Theta (n\log n)$ é€šå¸¸æ˜æ˜¾æ¯”å…¶ä»–ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªç¯ï¼ˆinner loopï¼‰å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æ¶æ„ä¸Šå¾ˆæœ‰æ•ˆç‡åœ°è¾¾æˆã€‚</p>

<h2 id="å¿«é€Ÿæ’åºæ­¥éª¤">å¿«é€Ÿæ’åºæ­¥éª¤</h2>

<p>å¿«æ’é‡‡ç”¨å’Œå½’å¹¶æ’åºç›¸åŒçš„åˆ†è€Œæ²»ä¹‹çš„æ€æƒ³ï¼Œå°†å¾…æ’åºæ•°ç»„åˆ†æˆå·¦å³ä¸¤ä¸ªå­æ•°ç»„ï¼Œå¯¹ä¸¤éƒ¨åˆ†å­æ•°ç»„ç‹¬ç«‹æ’åºã€‚å½“å­æ•°ç»„å‡æœ‰åºæ—¶ï¼Œæ•´ä¸ªæ•°ç»„ä¹Ÿå°±æœ‰åºäº†<sup class="footnote-ref" id="fnref:Python-http-www"><a href="#fn:Python-http-www">6</a></sup>ã€‚</p>

<ol>
<li>å°†åŸå§‹æ•°ç»„ <code>data</code> éšæœºæ‰“ä¹±ï¼Œä»¥æ¶ˆé™¤å¯¹è¾“å…¥çš„ä¾èµ–ï¼ˆæœ¬æ­¥å¯é€‰ï¼‰</li>
<li>é€‰æ‹©æ•°ç»„çš„æŸä¸ªå…ƒç´ ä½œåˆ‡åˆ†å…ƒç´  <code>v</code>ï¼Œæ¯”å¦‚é¦–ä¸ªå…ƒç´  <code>data[0]</code></li>
<li>åˆ‡åˆ†æ•°ç»„

<ul>
<li>ä»å·¦å¾€å³æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºåˆ‡åˆ†å…ƒç´ vçš„å…ƒç´  <code>data[i]</code></li>
<li>ä»å³åˆ°å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºåˆ‡åˆ†å…ƒç´ vçš„å…ƒç´  <code>data[j]</code></li>
<li>äº¤æ¢ <code>data[i]</code> ä¸ <code>data[j]</code></li>
<li>é‡å¤ä»¥ä¸Šä¸‰æ­¥ç›´åˆ° <code>i &gt;= j</code></li>
<li>äº¤æ¢ <code>data[j]</code> ä¸åˆ‡åˆ†å…ƒç´  <code>data[0]</code></li>
</ul></li>
<li>é€’å½’è°ƒç”¨ï¼Œå¯¹åˆ‡åˆ†åçš„å·¦ä¾§å­æ•°ç»„è¿›è¡Œæ’åº</li>
<li>é€’å½’è°ƒç”¨ï¼Œå¯¹åˆ‡åˆ†åçš„å³ä¾§å­æ•°ç»„è¿›è¡Œæ’åº</li>
</ol>

<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä»¥æ•°ç»„ <code>[12, 3, 45, 65, 54, 34, 78, 9 ,10, 23]</code> æ’åºä¸ºä¾‹ï¼Œæ’åºè¿‡ç¨‹å¦‚ä»¥ä¸‹åŠ¨å›¾:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181111154194773939997.gif" alt="20181111154194773939997.gif" /></p>

<h2 id="å¿«é€Ÿæ’åºç¤ºä¾‹ä»£ç ">å¿«é€Ÿæ’åºç¤ºä¾‹ä»£ç </h2>

<p>python3 å®ç°å¿«é€Ÿæ’åºå°è£…æˆå‡½æ•°å¦‚ä¸‹(ä»£ç ä¸­é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä½œåˆ‡åˆ†å…ƒç´  <code>v</code>)ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python">    <span class="k">if</span> <span class="n">lo</span> <span class="o">&lt;</span> <span class="n">hi</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
        <span class="n">quicksort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
        <span class="n">quicksort</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">p</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">hi</span><span class="p">)</span>
    <span class="k">return</span>

<span class="k">def</span> <span class="nf">partition</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">):</span>
    <span class="n">pivot</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">lo</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">pivot</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">hi</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span></code></pre></div>
<p>æµ‹è¯•å®ç°çš„å¿«é€Ÿæ’åºç®—æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span> <span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mi">23</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorting... {l}&#39;</span><span class="p">)</span>
    <span class="n">quicksort</span><span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorted:    {l}&#39;</span><span class="p">)</span></code></pre></div>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ python3 quick.py
sorting... <span class="o">[</span><span class="m">12</span>, <span class="m">3</span>, <span class="m">45</span>, <span class="m">65</span>, <span class="m">54</span>, <span class="m">34</span>, <span class="m">78</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">23</span><span class="o">]</span>
sorted:    <span class="o">[</span><span class="m">3</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">12</span>, <span class="m">23</span>, <span class="m">34</span>, <span class="m">45</span>, <span class="m">54</span>, <span class="m">65</span>, <span class="m">78</span><span class="o">]</span></code></pre></div>
<h1 id="æ’å…¥æ’åº">æ’å…¥æ’åº</h1>

<p><code>2018å¹´11æœˆ10æ—¥</code></p>

<p>æ’å…¥æ’åºï¼ˆè‹±è¯­ï¼šInsertion Sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ„å»ºæœ‰åºåºåˆ—ï¼Œå¯¹äºæœªæ’åºæ•°æ®ï¼Œåœ¨å·²æ’åºåºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚æ’å…¥æ’åºåœ¨å®ç°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨ <strong>in-place</strong> æ’åºï¼ˆå³åªéœ€ç”¨åˆ° $O(1)$ çš„é¢å¤–ç©ºé—´çš„æ’åºï¼‰ï¼Œå› è€Œåœ¨ä»åå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åå¤æŠŠå·²æ’åºå…ƒç´ é€æ­¥å‘åæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚</p>

<h2 id="æ’å…¥æ’åºæ­¥éª¤">æ’å…¥æ’åºæ­¥éª¤</h2>

<p>ä¸€èˆ¬æ¥è¯´ï¼Œæ’å…¥æ’åºéƒ½é‡‡ç”¨ <strong>in-place</strong> åœ¨æ•°ç»„ä¸Šå®ç°ã€‚å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š</p>

<ol>
<li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº</li>
<li>å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</li>
<li>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®</li>
<li>é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®</li>
<li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®å</li>
<li>é‡å¤æ­¥éª¤2~5</li>
</ol>

<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä»¥æ•°ç»„ <code>[12, 3, 45, 65, 54, 34, 78, 9 ,10, 23]</code> æ’åºä¸ºä¾‹ï¼Œæ’åºè¿‡ç¨‹å¦‚ä»¥ä¸‹åŠ¨å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181111154194998895578.gif" alt="20181111154194998895578.gif" /></p>

<h2 id="æ’å…¥æ’åºç¤ºä¾‹ä»£ç ">æ’å…¥æ’åºç¤ºä¾‹ä»£ç </h2>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">insert_sort</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">data</span></code></pre></div>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span> <span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mi">23</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorting... {l}&#39;</span><span class="p">)</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">insert_sort</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorted:    {l}&#39;</span><span class="p">)</span></code></pre></div>
<p>ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ python3 insert.py
sorting... <span class="o">[</span><span class="m">12</span>, <span class="m">3</span>, <span class="m">45</span>, <span class="m">65</span>, <span class="m">54</span>, <span class="m">34</span>, <span class="m">78</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">23</span><span class="o">]</span>
sorted:    <span class="o">[</span><span class="m">3</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">12</span>, <span class="m">23</span>, <span class="m">34</span>, <span class="m">45</span>, <span class="m">54</span>, <span class="m">65</span>, <span class="m">78</span><span class="o">]</span></code></pre></div>
<h1 id="å¸Œå°”æ’åº">å¸Œå°”æ’åº</h1>

<p><code>2018å¹´11æœˆ11æ—¥</code></p>

<p>å¸Œå°”æ’åºï¼Œä¹Ÿç§°é€’å‡å¢é‡æ’åºç®—æ³•ï¼Œæ˜¯æ’å…¥æ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚å¸Œå°”æ’åºæŒ‰å…¶è®¾è®¡è€…<a href="https://zh.wikipedia.org/w/index.php?title=å”çº³å¾·.å¸Œå°”&amp;action=edit&amp;redlink=1" target="_blank">å¸Œå°”ï¼ˆDonald Shellï¼‰</a>çš„åå­—å‘½åï¼Œè¯¥ç®—æ³•ç”±1959å¹´å…¬å¸ƒã€‚å¸Œå°”æ’åºæ˜¯éç¨³å®šæ’åºç®—æ³•ã€‚å¸Œå°”æ’åºæ˜¯åŸºäºæ’å…¥æ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š</p>

<ol>
<li>æ’å…¥æ’åºåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æ’åºçš„æ•ˆç‡</li>
<li>ä½†æ’å…¥æ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½</li>
</ol>

<p>æ­¥é•¿çš„é€‰æ‹©æ˜¯å¸Œå°”æ’åºçš„é‡è¦éƒ¨åˆ†ã€‚åªè¦æœ€ç»ˆæ­¥é•¿ä¸º1ä»»ä½•æ­¥é•¿åºåˆ—éƒ½å¯ä»¥å·¥ä½œã€‚ç®—æ³•æœ€å¼€å§‹ä»¥ä¸€å®šçš„æ­¥é•¿è¿›è¡Œæ’åºã€‚ç„¶åä¼šç»§ç»­ä»¥ä¸€å®šæ­¥é•¿è¿›è¡Œæ’åºï¼Œæœ€ç»ˆç®—æ³•ä»¥æ­¥é•¿ä¸º1è¿›è¡Œæ’åºã€‚å½“æ­¥é•¿ä¸º1æ—¶ï¼Œç®—æ³•å˜ä¸ºæ™®é€šæ’å…¥æ’åºï¼Œè¿™å°±ä¿è¯äº†æ•°æ®ä¸€å®šä¼šè¢«æ’åºã€‚</p>

<p>Donald Shellæœ€åˆå»ºè®®æ­¥é•¿é€‰æ‹©ä¸º $\frac{n}{2}$ å¹¶ä¸”å¯¹æ­¥é•¿å–åŠç›´åˆ°æ­¥é•¿è¾¾åˆ°1ã€‚è™½ç„¶è¿™æ ·å–å¯ä»¥æ¯” $\mathcal {O} (n^{2})$ ç±»çš„ç®—æ³•ï¼ˆæ’å…¥æ’åºï¼‰æ›´å¥½ï¼Œä½†è¿™æ ·ä»ç„¶æœ‰å‡å°‘å¹³å‡æ—¶é—´å’Œæœ€å·®æ—¶é—´çš„ä½™åœ°ã€‚å¯èƒ½å¸Œå°”æ’åºæœ€é‡è¦çš„åœ°æ–¹åœ¨äºå½“ç”¨è¾ƒå°æ­¥é•¿æ’åºåï¼Œä»¥å‰ç”¨çš„è¾ƒå¤§æ­¥é•¿ä»ç„¶æ˜¯æœ‰åºçš„ã€‚æ¯”å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ•°åˆ—ä»¥æ­¥é•¿5è¿›è¡Œäº†æ’åºç„¶åå†ä»¥æ­¥é•¿3è¿›è¡Œæ’åºï¼Œé‚£ä¹ˆè¯¥æ•°åˆ—ä¸ä»…æ˜¯ä»¥æ­¥é•¿3æœ‰åºï¼Œè€Œä¸”æ˜¯ä»¥æ­¥é•¿5æœ‰åºã€‚å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œé‚£ä¹ˆç®—æ³•åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¼šæ‰“ä¹±ä»¥å‰çš„é¡ºåºï¼Œé‚£å°±ä¸ä¼šä»¥å¦‚æ­¤çŸ­çš„æ—¶é—´å®Œæˆæ’åºäº†<sup class="footnote-ref" id="fnref:Sedgewick-1-5-19"><a href="#fn:Sedgewick-1-5-19">7</a></sup>ã€‚</p>

<h2 id="å¸Œå°”æ’åºæ­¥éª¤">å¸Œå°”æ’åºæ­¥éª¤</h2>

<p>è¿™é‡Œæ­¥é•¿é€‰æ‹©ä¸º $\frac{n}{2}$ å¹¶ä¸”å¯¹æ­¥é•¿å–åŠç›´åˆ°æ­¥é•¿è¾¾åˆ°1çš„åºåˆ—ï¼š</p>

<p>åºåˆ—ä¸ªæ•°ä¸º $n$ï¼Œåˆå§‹åŒ–æ­¥é•¿ $stepsize = n$ã€‚</p>

<ol>
<li>å–æ–°æ­¥é•¿ä¸º $\frac{stepsize}{2}$ï¼Œå¦‚æœ $stepsize &lt; 1$ ç®—æ³•ç»“æŸ</li>
<li>ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åº</li>
<li>å–å‡ºæŒ‰ç…§æ–°æ­¥é•¿ $stepsize$ çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æ</li>
<li>å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°æŒ‰æ–°æ­¥é•¿çš„ä¸‹ä¸€ä½ç½®</li>
<li>é‡å¤æ­¥éª¤ 4ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®</li>
<li>å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®</li>
<li>é‡å¤æ­¥éª¤ 3~6ï¼Œç›´åˆ°æŒ‰ç…§æ–°æ­¥é•¿ $stepsize$ çš„æ’å…¥æ’åºç»“æŸ</li>
<li>é‡å¤ 1ï½7æ­¥éª¤</li>
</ol>

<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä»¥æ•°ç»„ <code>[12, 3, 45, 65, 54, 34, 78, 9 ,10, 23]</code> æ’åºä¸ºä¾‹ï¼Œæ’åºè¿‡ç¨‹å¦‚ä»¥ä¸‹åŠ¨å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181112154195404360778.gif" alt="20181112154195404360778.gif" /></p>

<h2 id="å¸Œå°”æ’åºç¤ºä¾‹ä»£ç ">å¸Œå°”æ’åºç¤ºä¾‹ä»£ç </h2>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">shell_sort</span><span class="p">(</span><span class="n">numlist</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numlist</span><span class="p">)</span>
    <span class="c1"># åˆå§‹æ­¥é•¿</span>
    <span class="n">stepsize</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">stepsize</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">stepsize</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
            <span class="c1"># æ¯ä¸ªæ­¥é•¿è¿›è¡Œæ’å…¥æ’åº</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">numlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">i</span>
            <span class="c1"># æ’å…¥æ’åº</span>
            <span class="k">while</span> <span class="n">j</span> <span class="o">&gt;=</span> <span class="n">stepsize</span> <span class="ow">and</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="n">stepsize</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">temp</span><span class="p">:</span>
                <span class="n">numlist</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="n">stepsize</span><span class="p">]</span>
                <span class="n">j</span> <span class="o">-=</span> <span class="n">stepsize</span>
            <span class="n">numlist</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
        <span class="c1"># å¾—åˆ°æ–°çš„æ­¥é•¿</span>
        <span class="n">stepsize</span> <span class="o">=</span> <span class="n">stepsize</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">numlist</span></code></pre></div>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span> <span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mi">23</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorting... {l}&#39;</span><span class="p">)</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">shell_sort</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorted:    {l}&#39;</span><span class="p">)</span></code></pre></div>
<p>ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ python3 shell.py
sorting... <span class="o">[</span><span class="m">12</span>, <span class="m">3</span>, <span class="m">45</span>, <span class="m">65</span>, <span class="m">54</span>, <span class="m">34</span>, <span class="m">78</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">23</span><span class="o">]</span>
sorted:    <span class="o">[</span><span class="m">3</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">12</span>, <span class="m">23</span>, <span class="m">34</span>, <span class="m">45</span>, <span class="m">54</span>, <span class="m">65</span>, <span class="m">78</span><span class="o">]</span></code></pre></div>
<h1 id="é€‰æ‹©æ’åº">é€‰æ‹©æ’åº</h1>

<p><code>2018å¹´11æœˆ12æ—¥</code></p>

<p>é€‰æ‹©æ’åºï¼ˆSelection sortï¼‰æ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŸç†å¦‚ä¸‹ã€‚é¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚</p>

<p>é€‰æ‹©æ’åºçš„ä¸»è¦ä¼˜ç‚¹ä¸æ•°æ®ç§»åŠ¨æœ‰å…³ã€‚å¦‚æœæŸä¸ªå…ƒç´ ä½äºæ­£ç¡®çš„æœ€ç»ˆä½ç½®ä¸Šï¼Œåˆ™å®ƒä¸ä¼šè¢«ç§»åŠ¨ã€‚é€‰æ‹©æ’åºæ¯æ¬¡äº¤æ¢ä¸€å¯¹å…ƒç´ ï¼Œå®ƒä»¬å½“ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå°†è¢«ç§»åˆ°å…¶æœ€ç»ˆä½ç½®ä¸Šï¼Œå› æ­¤å¯¹ $n$ ä¸ªå…ƒç´ çš„è¡¨è¿›è¡Œæ’åºæ€»å…±è¿›è¡Œè‡³å¤š $n-1$ æ¬¡äº¤æ¢ã€‚åœ¨æ‰€æœ‰çš„å®Œå…¨ä¾é äº¤æ¢å»ç§»åŠ¨å…ƒç´ çš„æ’åºæ–¹æ³•ä¸­ï¼Œé€‰æ‹©æ’åºå±äºéå¸¸å¥½çš„ä¸€ç§ã€‚</p>

<h2 id="é€‰æ‹©æ’åºæ­¥éª¤">é€‰æ‹©æ’åºæ­¥éª¤</h2>

<ol>
<li>é€‰æ‹©æœªæ’åºçš„åºçš„é¦–å…ƒç´ ä½œä¸ºä½œä¸ºæ¯”å¯¹å…ƒç´ </li>
<li>å¾€åè¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾åˆ°æœ€å°çš„å…ƒç´ ä¸é¦–ä½çš„å…ƒç´ äº’æ¢ä½ç½®</li>
<li>é‡å¤ 1ï½2 æ­¥ä¸€ç›´åˆ°åªå‰©ä¸€ä¸ªåºåˆ—</li>
</ol>

<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œè¿™é‡Œä»¥å¯¹åºåˆ— <code>[12, 3, 45, 65, 54, 34, 78, 9 ,10, 23]</code> æ’åºä¸ºä¾‹å±•ç¤ºæ’åºè¿‡ç¨‹åŠ¨ç”»å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181112154200663696412.gif" alt="20181112154200663696412.gif" /></p>

<h2 id="é€‰æ‹©æ’åºç¤ºä¾‹ä»£ç ">é€‰æ‹©æ’åºç¤ºä¾‹ä»£ç </h2>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">select_sort</span><span class="p">(</span><span class="n">numlist</span><span class="p">):</span>
    <span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numlist</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">min_index</span> <span class="o">=</span> <span class="n">i</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">numlist</span><span class="p">[</span><span class="n">min_index</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">numlist</span><span class="p">[</span><span class="n">j</span><span class="p">]:</span>
                <span class="n">min_index</span> <span class="o">=</span> <span class="n">j</span>
        <span class="k">if</span> <span class="n">min_index</span> <span class="o">!=</span> <span class="n">i</span><span class="p">:</span>
            <span class="n">numlist</span><span class="p">[</span><span class="n">min_index</span><span class="p">],</span> <span class="n">numlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">numlist</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">numlist</span><span class="p">[</span><span class="n">min_index</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">numlist</span></code></pre></div>
<p>æµ‹è¯•ä¸€ä¸‹å°è£…çš„ç®—æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">78</span><span class="p">,</span> <span class="mi">9</span> <span class="p">,</span><span class="mi">10</span><span class="p">,</span> <span class="mi">23</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorting... {l}&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;sorrted    {select_sort(l)}&#39;</span><span class="p">)</span></code></pre></div>
<p>æµ‹è¯•ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ python3 <span class="k">select</span>.py
sorting... <span class="o">[</span><span class="m">12</span>, <span class="m">3</span>, <span class="m">45</span>, <span class="m">65</span>, <span class="m">54</span>, <span class="m">34</span>, <span class="m">78</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">23</span><span class="o">]</span>
sorrted    <span class="o">[</span><span class="m">3</span>, <span class="m">9</span>, <span class="m">10</span>, <span class="m">12</span>, <span class="m">23</span>, <span class="m">34</span>, <span class="m">45</span>, <span class="m">54</span>, <span class="m">65</span>, <span class="m">78</span><span class="o">]</span></code></pre></div>
<h1 id="å †æ’åº">å †æ’åº</h1>

<h1 id="å½’å¹¶æ’åº">å½’å¹¶æ’åº</h1>

<h1 id="è®¡æ•°æ’åº">è®¡æ•°æ’åº</h1>

<h1 id="åŸºæ•°æ’åº">åŸºæ•°æ’åº</h1>

<h1 id="æ¡¶æ’åº">æ¡¶æ’åº</h1>

<p><strong>æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</strong></p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:O-n-log-n"><strong>éçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åº</strong>: é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œç”±äºå…¶æ—¶é—´å¤æ‚åº¦ä¸èƒ½çªç ´ $O(n\log n)$ ï¼Œå› æ­¤ç§°ä¸ºéçº¿æ€§æ—¶é—´æ¯”è¾ƒç±»æ’åºã€‚ <a class="footnote-return" href="#fnref:O-n-log-n"><sup>[return]</sup></a></li>
<li id="fn:-"><strong>çº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åº</strong>: ä¸é€šè¿‡æ¯”è¾ƒæ¥å†³å®šå…ƒç´ é—´çš„ç›¸å¯¹æ¬¡åºï¼Œå®ƒå¯ä»¥çªç ´åŸºäºæ¯”è¾ƒæ’åºçš„æ—¶é—´ä¸‹ç•Œï¼Œä»¥çº¿æ€§æ—¶é—´è¿è¡Œï¼Œå› æ­¤ç§°ä¸ºçº¿æ€§æ—¶é—´éæ¯”è¾ƒç±»æ’åºã€‚ <a class="footnote-return" href="#fnref:-"><sup>[return]</sup></a></li>
<li id="fn:n"><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šå¯¹æ’åºæ•°æ®çš„æ€»çš„æ“ä½œæ¬¡æ•°ã€‚åæ˜ å½“nå˜åŒ–æ—¶ï¼Œæ“ä½œæ¬¡æ•°å‘ˆç°ä»€ä¹ˆè§„å¾‹ã€‚ <a class="footnote-return" href="#fnref:n"><sup>[return]</sup></a></li>
<li id="fn:n"><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šæ˜¯æŒ‡ç®—æ³•åœ¨è®¡ç®—æœºå†…æ‰§è¡Œæ—¶æ‰€éœ€å­˜å‚¨ç©ºé—´çš„åº¦é‡ï¼Œå®ƒä¹Ÿæ˜¯æ•°æ®è§„æ¨¡nçš„å‡½æ•°ã€‚ <a class="footnote-return" href="#fnref:n"><sup>[return]</sup></a></li>
<li id="fn:a-b-a-b-a-b-a-b"><strong>ç¨³å®š</strong>ï¼šå¦‚æœaåŸæœ¬åœ¨bå‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹åaä»ç„¶åœ¨bçš„å‰é¢ã€‚<strong>ä¸ç¨³å®š</strong>ï¼šå¦‚æœaåŸæœ¬åœ¨bçš„å‰é¢ï¼Œè€Œa=bï¼Œæ’åºä¹‹å a å¯èƒ½ä¼šå‡ºç°åœ¨ b çš„åé¢ã€‚ <a class="footnote-return" href="#fnref:a-b-a-b-a-b-a-b"><sup>[return]</sup></a></li>
<li id="fn:Python-http-www"><a href="http://www.litreily.top/2018/07/07/quick-sort/#å¿«æ’åŸºæœ¬åŸç†" target="_blank"><strong>Pythonå®ç°å¿«æ’åŠå…¶å¯è§†åŒ–â€”â€”å¿«æ’åŸºæœ¬åŸç†</strong></a> <a class="footnote-return" href="#fnref:Python-http-www"><sup>[return]</sup></a></li>
<li id="fn:Sedgewick-1-5-19">å·²çŸ¥çš„æœ€å¥½æ­¥é•¿åºåˆ—æ˜¯ç”± Sedgewick æå‡ºçš„ <code>(1, 5, 19, 41, 109,...)</code>ï¼Œè¯¥åºåˆ—çš„é¡¹æ¥è‡ª $9\times 4^{i}-9\times 2^{i}+1 $ å’Œ $2^{{i+2}}\times (2^{{i+2}}-3)+1$ è¿™ä¸¤ä¸ªç®—å¼ã€‚è¿™é¡¹ç ”ç©¶ä¹Ÿè¡¨æ˜â€œæ¯”è¾ƒåœ¨å¸Œå°”æ’åºä¸­æ˜¯æœ€ä¸»è¦çš„æ“ä½œï¼Œè€Œä¸æ˜¯äº¤æ¢ã€‚â€ç”¨è¿™æ ·æ­¥é•¿åºåˆ—çš„å¸Œå°”æ’åºæ¯”æ’å…¥æ’åºè¦å¿«ï¼Œç”šè‡³åœ¨å°æ•°ç»„ä¸­æ¯”å¿«é€Ÿæ’åºå’Œå †æ’åºè¿˜å¿«ï¼Œä½†æ˜¯åœ¨æ¶‰åŠå¤§é‡æ•°æ®æ—¶å¸Œå°”æ’åºè¿˜æ˜¯æ¯”å¿«é€Ÿæ’åºæ…¢ã€‚â€”â€”<a href="https://zh.wikipedia.org/wiki/å¸Œå°”æ’åº#æ­¥é•¿åºåˆ—" target="_blank"><strong>å¸Œå°”æ’åº</strong></a> @ <a href="https://zh.wikipedia.org/wiki/Wikipedia:é¦–é¡µ" target="_blank"><strong>ç»´åŸºç™¾ç§‘</strong></a>  <a class="footnote-return" href="#fnref:Sedgewick-1-5-19"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>windows ä¸‹ python å¼€å‘åˆ©å™¨ vscode çš„é”»é€ </title>
			<link>https://www.smslit.top/2018/11/02/python-dev-in-windows/</link>
			<pubDate>Fri, 02 Nov 2018 13:02:49 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/11/02/python-dev-in-windows/</guid>
			<description>&lt;p&gt;ä¹‹å‰ä¸€ç›´æ˜¯åœ¨ macOS ä¸‹è¿›è¡Œ python å­¦ä¹ å’Œåº”ç”¨å¼€å‘ï¼Œæ²¡æƒ³åˆ°ä¼šæœ‰ä¸€å¤©ä¼šç”¨åˆ° windows è¿›è¡Œ python å¼€å‘ï¼ŒmacOSä¸‹ä½¿ç”¨ vscode åŠ  python æ’ä»¶çš„å½¢å¼ä½œä¸ºå¼€å‘åˆ©å™¨ï¼ŒåŒæ ·åœ¨ windows ä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ vscode è¿›è¡Œ python å¼€å‘ï¼Œæœ¬æ–‡å°±è®²ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ vscode æ‰“é€  python å¼€å‘åˆ©å™¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/2.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¹‹å‰ä¸€ç›´æ˜¯åœ¨ macOS ä¸‹è¿›è¡Œ python å­¦ä¹ å’Œåº”ç”¨å¼€å‘ï¼Œæ²¡æƒ³åˆ°ä¼šæœ‰ä¸€å¤©ä¼šç”¨åˆ° windows è¿›è¡Œ python å¼€å‘ï¼ŒmacOSä¸‹ä½¿ç”¨ vscode åŠ  python æ’ä»¶çš„å½¢å¼ä½œä¸ºå¼€å‘åˆ©å™¨ï¼ŒåŒæ ·åœ¨ windows ä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ vscode è¿›è¡Œ python å¼€å‘ï¼Œæœ¬æ–‡å°±è®²ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ vscode æ‰“é€  python å¼€å‘åˆ©å™¨ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/2.png" alt="" /></p>

<h1 id="å‰è¨€">å‰è¨€</h1>

<p>å‰å‡ å¤©ï¼Œåé‡Œæ‰‹è´±ä¸ºäº†æ“¦å±å¹•å¾€ macbook å±å¹•ä¸Šæ´’ä¸Šäº†æ°´å’Œæ´—æ´ç²¾ï¼Œå¯¼è‡´å±å¹•è¿›æ°´ï¼Œå¯¼è‡´å±å¹•ä¸Šå‡ºç°äº† n æ¡ç»†å°çš„æ¨ªçº¿ï¼Œæ¶²æ™¶åº”è¯¥æ˜¯æ²¡æœ‰å—æŸï¼Œå¯èƒ½æ˜¯æ’çº¿è¿›æ°´å¯¼è‡´å±å¹•æ¥æ”¶æ•°æ®å¼‚å¸¸ï¼Œä»è€Œå‡ºç°äº†æ¨ªçº¿ï¼Œç½‘ä¸Šæœäº†ä¸€ä¸‹è¯´ï¼Œè¦ç«‹é©¬å…³æœºï¼Œä¸è¦ç”¨çƒ­é£å¹ï¼Œæœ€å¥½æ˜¯æ‰”åˆ°è£…æ»¡å¹²ç‡¥å‰‚çš„ç®±å­é‡Œï¼Œç­‰å¾…ä¸¤å¤©å±å¹•ä¸­çš„æ°´è‡ªç„¶è’¸å‘å‡ºæ¥ï¼Œæ²¡æœ‰å¹²ç‡¥å‰‚å¯ä»¥ç”¨å¤§ç±³ä»£æ›¿ï¼Œæ‰€ä»¥æˆ‘ç…§åŠäº†ï¼ˆæ€ªåªæ€ªæˆ‘çš„macbookä¸ä¿ä¿®äº†ï¼‰ã€‚</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/IMG_20181102_133559R.jpg" width="360"/> 
</figure>


<p>æ²¡æœ‰ç”µè„‘äº†çš„ç¨‹åºå‘˜æ€ä¹ˆèƒ½å«ç¨‹åºå‘˜ï¼Œæ‰€å¹¸æ°´æœ¨çš„ surface pro é—²ç€ï¼Œé‚£æˆ‘å°±æ‹¿æ¥å…ˆç”¨ç€äº†ï¼Œä¹Ÿå°±æœ‰äº†ä»Šå¤©æ–‡ç« çš„ä¸»é¢˜ï¼Œåœ¨ windows 10 ä¸‹é…ç½® python å¼€å‘ç¯å¢ƒã€‚</p>

<h1 id="åˆ©å™¨æ‰“é€ ">åˆ©å™¨æ‰“é€ </h1>

<p>ç°åœ¨ä½¿ç”¨çš„å¹³å°æ˜¯è£…æœ‰ 64ä½ win10 çš„ new surface pro ï¼Œç†è®ºæœ¬æ–‡çš„æ“ä½œä¸å— windows ç‰ˆæœ¬é™åˆ¶ï¼Œåªè¦ PC ç¡¬ä»¶å¤Ÿç”¨å°±å¯ä»¥ã€‚</p>

<h2 id="å®‰è£…python">å®‰è£…python</h2>

<p>åœ¨ win10 ä¸‹é»˜è®¤æ˜¯ä¸å®‰è£… python ï¼Œæ‰€ä»¥è¿˜éœ€è¦è‡ªå·±å®‰è£… pythonã€‚</p>

<h3 id="ä¸‹è½½python3-7-1">ä¸‹è½½python3.7.1</h3>

<p>å»<a href="https://www.python.org" target="_blank">å®˜ç½‘</a>ä¸‹è½½æ”¯æŒ 64ä½ windows çš„ç‰ˆæœ¬ä¸‹è½½ï¼Œå†™æ­¤æ–‡ç« æ—¶æœ€æ–°çš„ python ç‰ˆæœ¬æ˜¯ 3.7.1 ï¼Œå»ºè®®å®‰è£…æœ€æ–°çš„ pythonã€‚è¿™é‡Œä¸‹è½½çš„æ˜¯ï¼š<a href="https://www.python.org/ftp/python/3.7.1/python-3.7.1-amd64.exe" target="_blank">Windows x86-64 executable installer</a></p>

<h3 id="å®‰è£…python3-7-1">å®‰è£…python3.7.1</h3>

<ol>
<li>è¿è¡Œä¸‹è½½åˆ°çš„å®‰è£…åŒ… <strong>python-3.7.1-amd64.exe</strong></li>

<li><p>å‹¾é€‰ <code>Add Python 3.7 to Path</code>ï¼Œè¿™ä¸€æ­¥ä¼šå°† python æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œè¿™æ ·å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ <code>python</code>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/python-install.png" alt="" /></p></li>

<li><p>ç‚¹å‡» <code>Install Now</code>å°±å¯ä»¥å¼€å¯è‡ªåŠ¨å®‰è£…çš„è¿‡ç¨‹äº†</p></li>

<li><p>æ³¨é”€é‡æ–°ç™»å½• windowsï¼Œæ˜¯ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p></li>

<li><p><code>win</code> é”® + <code>x</code>ï¼Œé€‰æ‹© <strong>å‘½ä»¤æç¤ºç¬¦</strong> æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥ <code>python</code>ï¼Œå¦‚æœå‡ºç° <code>python</code> äº¤äº’ CLI è¯´æ˜å®‰è£…æˆåŠŸï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/python-cli.png" alt="" /></p></li>
</ol>

<h2 id="å®‰è£…vscode">å®‰è£…vscode</h2>

<ol>
<li><p><a href="https://code.visualstudio.com/" target="_blank">å®˜ç½‘</a>ä¸‹è½½ <a href="https://aka.ms/win32-x64-user-stable" target="_blank">VS Code for windows</a>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/vscode-download.png" alt="" /></p></li>

<li><p>è¿è¡Œä¸‹è½½çš„å®‰è£…åŒ…ï¼Œå†™æœ¬æ–‡æ—¶ä¸‹è½½çš„æ˜¯ <strong>VSCodeUserSetup-x64-1.28.2.exe</strong></p></li>

<li><p>ä¸€è·¯æ ¹æ®è‡ªå·±çš„æƒ…å†µä¸‹ä¸€æ­¥ï¼Œè¿™é‡Œè¦è¯´çš„æ˜¯å…¶ä¸­ä¸€æ­¥é€‰æ‹©æ€§çš„å‹¾é€‰ä¸€äº›é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘å…¨éƒ¨å‹¾é€‰äº†ï¼Œæ¯”å¦‚æœ€åä¸€ä¸ªæ·»åŠ ç¯å¢ƒå˜é‡Pathçš„ï¼Œè¿™æ ·å®‰è£…å®Œæˆä»¥åå°±å¯ä»¥åœ¨å‘½ä»¤æç¤ºç¬¦çª—å£è¾“å…¥ <code>code</code> å‘½ä»¤å¯åŠ¨ VS code äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/vscode-install.png" alt="" /></p></li>

<li><p>ç»§ç»­ä¸‹ä¸€æ­¥å®‰è£…å³å¯ï¼Œå®‰è£…å®Œæˆåæ‰“å¼€é»˜è®¤åº”è¯¥æ˜¯è‹±æ–‡ç•Œé¢ï¼ˆé…ç½®ä¸ºä¸­æ–‡ç•Œé¢<a href="#é…ç½®vscodeä¸ºä¸­æ–‡ç•Œé¢" target="_blank">ç‚¹æˆ‘</a>ï¼‰</p></li>

<li><p>è¿™é‡Œåé‡Œå°† vscode ä¸»é¢˜é…ç½®ä¸ºäº† <strong>solarized dark</strong></p></li>
</ol>

<h2 id="é…ç½®vscode">é…ç½®vscode</h2>

<h3 id="å®‰è£…pythonæ’ä»¶">å®‰è£…pythonæ’ä»¶</h3>

<p>å¾®è½¯å®˜æ–¹ä¸º vscode å¼€å‘äº† pythonæ’ä»¶ï¼Œè¿™é‡Œå®‰è£…è¿™ä¸ªæ’ä»¶å°±ä¼šæä¾›å…¨é¢çš„ python IDE çš„åŠŸèƒ½äº†ã€‚</p>

<ol>
<li>æ‰“å¼€ vscodeï¼Œç‚¹å‡»çª—å£å·¦è¾¹æ‰©å±•æŒ‰é’®ï¼Œæœç´¢ <strong>python</strong> ç†è®ºä¸Šç¬¬ä¸€ä¸ªå°±æ˜¯è¦å®‰è£…çš„æ’ä»¶</li>
<li>é€‰ä¸­åä¸º <strong>Python</strong> çš„æ’ä»¶ç‚¹å‡» <strong>install</strong> æŒ‰é’®</li>
<li>å®‰è£…å®Œæˆåç‚¹å‡» <strong>reload</strong> å°±å¯æ¿€æ´»æ’ä»¶äº†</li>
</ol>

<h3 id="å®‰è£…pylintåº“">å®‰è£…pylintåº“</h3>

<p>ä¸Šè¿° <strong>Python</strong> æ’ä»¶ä¾èµ–äº python çš„åº“ <a href="https://pypi.org/project/pylint/" target="_blank">pylint</a>ï¼Œè¿™é‡Œéœ€è¦å®‰è£…ä¸€ä¸‹ã€‚</p>

<p>æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ vscode è‡ªè¡Œæ£€æŸ¥å¹¶æç¤ºå®‰è£…ï¼Œå¦ä¸€ç§æ˜¯æ‰‹åŠ¨å®‰è£…ï¼Œæ¨èä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ã€‚</p>

<h4 id="vscodeå®‰è£…pylint">vscodeå®‰è£…pylint</h4>

<ol>
<li><p>æ‰“å¼€ä¸€ä¸ª py æ–‡ä»¶ï¼Œå°±ä¼šæœ‰å¦‚ä¸‹çš„æç¤ºï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/pylint-tip.png" width="451"/> 
</figure>
</li>

<li><p>ç‚¹å‡» <strong>install</strong>ï¼Œvscodeå°±ä¼šè‡ªè¡Œè°ƒç”¨ <code>pip</code> å‘½ä»¤è¿›è¡Œæ’ä»¶å®‰è£…</p></li>
</ol>

<h4 id="æ‰‹åŠ¨å®‰è£…pylint">æ‰‹åŠ¨å®‰è£…pylint</h4>

<ol>
<li><p>åœ¨ vscode ä¸­æŒ‰ä¸‹ <code>ctrl</code> + ` ç»„åˆé”®å°±å¯ä»¥åœ¨ vscode ä¸­æ‰“å¼€ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼š</p></li>

<li><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">python -m pip install pylint</code></pre></div></li>
</ol>

<h1 id="æµ‹è¯•">æµ‹è¯•</h1>

<p>è¿™é‡Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ <code>hello.py</code>ï¼Œè¾“å…¥ä»£ç ï¼Œè¾“å…¥è¿‡ç¨‹ä¸­å°±ä¼šçœ‹åˆ° vscode ä¼šè‡ªåŠ¨æç¤ºè¡¥å…¨ï¼ŒåŒæ—¶è¿˜èƒ½æ£€æŸ¥è¯­æ³•é”™è¯¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">argparse</span>


<span class="k">def</span> <span class="nf">get_args</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;å‘æŸäººæ‰“æ‹›å‘¼&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šæ‰“æ‹›å‘¼å¯¹è±¡&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">person</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">args</span><span class="o">.</span><span class="n">person</span> <span class="o">=</span> <span class="s1">&#39;world&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;hello, {args.person}!&#39;</span><span class="p">)</span></code></pre></div>
<p>è¿™é‡Œä½¿ç”¨ <strong>argsparse</strong> åº“å®ç°äº†ä¸€ä¸ªç®€å•çš„å·¥å…·ï¼Œå¯ä»¥å‘æŒ‡å®šäººæ‰“æ‹›å‘¼ã€‚</p>

<p>åœ¨ vscode ç¼–è¾‘å™¨ä¸­çš„ä»£ç ç¼–è¾‘å™¨çš„è¡Œå·å‰é¢å¯ä»¥æ‰“æ–­ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶çš„ vscode ä¹Ÿå¯ä»¥è°ƒè¯• python ä»£ç ï¼Œæ‰“ä¸Šæ–­ç‚¹åï¼ŒæŒ‰ <code>F5</code> é”®å°±å¯ä»¥å¯åŠ¨è°ƒè¯•ï¼Œè¿è¡Œåˆ°æˆ‘ä»¬æ‰“æ–­ç‚¹çš„åœ°æ–¹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/python-breakpoint.png" alt="" /></p>

<h1 id="å…¶å®ƒ">å…¶å®ƒ</h1>

<h2 id="é…ç½®vscodeä¸ºä¸­æ–‡ç•Œé¢">é…ç½®vscodeä¸ºä¸­æ–‡ç•Œé¢</h2>

<h3 id="å®‰è£…ç®€ä½“ä¸­æ–‡è¯­è¨€åŒ…">å®‰è£…ç®€ä½“ä¸­æ–‡è¯­è¨€åŒ…</h3>

<ol>
<li>æ‰©å±•æœç´¢æ¡†æœç´¢ <strong>Chinese</strong></li>
<li>å®‰è£…åä¸º <strong>Chinese (Simplified) Language Pack for Visual Studio Code</strong> çš„æ‰©å±•</li>
</ol>

<h3 id="æ›´æ”¹vscodeç•Œé¢è¯­è¨€é…ç½®">æ›´æ”¹vscodeç•Œé¢è¯­è¨€é…ç½®</h3>

<ol>
<li><code>ctrl</code> + <code>shift</code> + <code>p</code> æ‰“å¼€ vscode å‘½ä»¤è¾“å…¥æ¡†ï¼Œè¾“å…¥ <strong>language</strong></li>
<li>é€‰æ‹© <strong>Configure Display Language</strong>ï¼Œä¼šæ‰“å¼€é…ç½®æ–‡ä»¶ <code>locale.json</code></li>

<li><p>æ›´æ”¹é…ç½®ä½ <code>zh-cn</code>ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="err">//</span> <span class="err">å®šä¹‰</span> <span class="err">VS</span> <span class="err">Code</span> <span class="err">çš„æ˜¾ç¤ºè¯­è¨€ã€‚</span>
    <span class="err">//</span> <span class="err">è¯·å‚é˜…</span> <span class="err">https://go.microsoft.com/fwlink/?LinkId=761051ï¼Œäº†è§£æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ã€‚</span>
        
    <span class="nt">&#34;locale&#34;</span><span class="p">:</span><span class="s2">&#34;zh-cn&#34;</span> <span class="err">//</span> <span class="err">æ›´æ”¹å°†åœ¨é‡æ–°å¯åŠ¨</span> <span class="err">VS</span> <span class="err">Code</span> <span class="err">ä¹‹åç”Ÿæ•ˆã€‚</span>
<span class="p">}</span></code></pre></div></li>

<li><p>é‡å¯ vscode å³å¯çœ‹åˆ°ç•Œé¢å˜æˆäº†ä¸­æ–‡</p></li>
</ol>

<h2 id="é…ç½®ä¸­æ–‡æ˜¾ç¤ºå­—ä½“">é…ç½®ä¸­æ–‡æ˜¾ç¤ºå­—ä½“</h2>

<p>ä½œä¸ºé¢œæ§æ— æ³•å¿å— vscode é»˜è®¤æ˜¾ç¤ºä¸­æ–‡ä¸ºå®‹ä½“ï¼Œå¿…é¡»é…ç½®ä¸ºå¾®è½¯é›…é»‘ã€‚</p>

<ol>
<li><code>ctrl</code> + <code>shift</code> + <code>p</code> æ‰“å¼€ vscode å‘½ä»¤è¾“å…¥æ¡†ï¼Œè¾“å…¥ <strong>setting</strong>ï¼Œé€‰æ‹© <strong>Open Settings(UI)</strong></li>
<li>åœ¨æ‰“å¼€çš„è®¾ç½®ç•Œé¢ä¸­çš„æœç´¢æ¡†ï¼Œè¾“å…¥ <strong>font</strong>ï¼Œå°±ä¼šè¿‡æ»¤å¾—åˆ°ä¸€ä¸ª <strong>Editor: font family</strong></li>

<li><p>å°†å¾®è½¯é›…é»‘æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªå­—ä½“åé¢ï¼Œè¿™æ ·ä¸ä¼šå½±å“ä»£ç çš„ç­‰å®½å­—ä½“æ˜¾ç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/img/vscode-font.png" alt="" /></p></li>
</ol>

<p>ä¼šçœ‹åˆ°ä¸­æ–‡å­—ä½“çš„æ˜¾ç¤ºä¼šç«‹é©¬ç”Ÿæ•ˆã€‚</p>

<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>æœ¬æ–‡ç®€å•ä»‹ç»äº†å¦‚ä½•åœ¨ windows ä¸‹ ä» 0 åˆ° 1 çš„æ‰“é€  vscode çš„ python å¼€å‘ç¯å¢ƒï¼Œä»æ­¤å¯ä»¥åœ¨ windows ä¸Šä½¿ç”¨ python æ’’æ¬¢äº†ï¼</p>]]></content>
		</item>
		
		<item>
			<title>python å®ç°æ–‡ä»¶æ ¡éªŒ</title>
			<link>https://www.smslit.top/2018/10/26/hashcal-python/</link>
			<pubDate>Fri, 26 Oct 2018 13:12:18 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/26/hashcal-python/</guid>
			<description>&lt;p&gt;ä»Šå¤©åˆå­¦ä¹ äº†ç‚¹ &lt;code&gt;argparse&lt;/code&gt; åº“çš„ä¸œè¥¿â€”â€”å­å‘½ä»¤å®ç°çš„æ­£ç¡®å§¿åŠ¿(å¸¸è§„æ“ä½œ)ï¼Œå€Ÿç€å®ç°ä¸€ä¸ªæ–‡ä»¶æ ¡éªŒã€æ¯”è¾ƒçš„å°å·¥å…·æ¥å·©å›ºä¸€ä¸‹åˆšå­¦åˆ°çš„å­å‘½ä»¤å®ç°ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©åˆå­¦ä¹ äº†ç‚¹ <code>argparse</code> åº“çš„ä¸œè¥¿â€”â€”å­å‘½ä»¤å®ç°çš„æ­£ç¡®å§¿åŠ¿(å¸¸è§„æ“ä½œ)ï¼Œå€Ÿç€å®ç°ä¸€ä¸ªæ–‡ä»¶æ ¡éªŒã€æ¯”è¾ƒçš„å°å·¥å…·æ¥å·©å›ºä¸€ä¸‹åˆšå­¦åˆ°çš„å­å‘½ä»¤å®ç°ã€‚</p>

<p>æœ¬æ–‡å®ç°äº†ä¸€ä¸ªåä¸º <code>hashpare</code><sup class="footnote-ref" id="fnref:hashpare-hash-ha"><a href="#fn:hashpare-hash-ha">1</a></sup> çš„å·¥å…·ï¼Œæˆ‘å·²ç»æ‰˜ç®¡åˆ° <a href="https://github.com/smslit" target="_blank">github</a> ä¸Š<a href="https://github.com/smslit/tools-with-script/tree/master/hashpare" target="_blank">tools-with-script/hashpare</a>ã€‚æ€»æ„Ÿè§‰ç›´æ¥ä¸Šä»£ç æœ‰ç‚¹ç²—æš´ï¼Œä¸‹é¢åˆ†æ­¥éª¤è®²è§£å®ç°è¿‡ç¨‹ã€‚</p>

<h1 id="è„šæœ¬å‡†å¤‡">è„šæœ¬å‡†å¤‡</h1>

<ol>
<li>æ–°å»ºæ–‡ä»¶ï¼š <code>touch hashpare</code></li>
<li>æ·»åŠ æ–‡ä»¶è¿è¡Œæƒé™ï¼š <code>chmod +x hashpare</code></li>

<li><p>æ³¨æ˜è„šæœ¬è§£é‡Šå™¨ï¼Œæ–‡ä¸­é¦–è¡Œæ·»åŠ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span></code></pre></div></li>

<li><p>æœ¬æ–‡ä¼šç”¨åˆ°ä¸‰ä¸ªå†…å»ºåº“ï¼Œåˆ†åˆ«æ˜¯ <code>os</code>ã€<code>hashlib</code>ã€<code>argparse</code>ï¼Œå¯¼å…¥å®ƒä»¬ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">argparse</span></code></pre></div>
<ul>
<li><code>os</code>: ç”¨æ¥æ“ä½œæ–‡ä»¶æˆ–ç›®å½•çš„è·¯å¾„</li>
<li><code>hashlib</code>: ç”¨æ¥è®¡ç®—æ–‡ä»¶çš„ hash å€¼</li>
<li><code>argparse</code>: ç”¨æ¥è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œæœ¬æ–‡ä¼šç”¨åˆ° <code>add_subparsers</code> æ·»åŠ å­è§£æå™¨é›†ï¼Œä»è€Œæ·»åŠ å­å‘½ä»¤<sup class="footnote-ref" id="fnref:Many-programs-sp"><a href="#fn:Many-programs-sp">2</a></sup></li>
</ul></li>
</ol>

<h1 id="è®¡ç®—æ ¡éªŒ">è®¡ç®—æ ¡éªŒ</h1>

<p>è¿™é‡Œä½¿ç”¨ <code>hashlib</code> æ¥è®¡ç®—æ–‡ä»¶çš„æ ¡éªŒç ï¼Œå°è£…å‡½æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">def</span> <span class="nf">calculate_hashvalue</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s1">&#39;sha1&#39;</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;è®¡ç®—æ–‡ä»¶æ ¡éªŒå€¼ï¼Œå¯é€‰æ ¡éªŒç®—æ³• sha1 æˆ– md5
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">if</span> <span class="n">algorithm</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="s1">&#39;md5&#39;</span><span class="p">]:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[-] ä¸æ”¯æŒæ ¡éªŒç®—æ³•: {algorithm} [-]&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">algorithm</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="n">hashobj</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">()</span> <span class="k">if</span> <span class="n">algorithm</span> <span class="o">==</span> <span class="s1">&#39;sha1&#39;</span> <span class="k">else</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">hashobj</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">algorithm</span><span class="p">,</span> <span class="n">hashobj</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span></code></pre></div>
<p>æ–¹æ³•å†…éƒ¨å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯æ ¹æ®æŒ‡å®šçš„æ ¡éªŒç®—æ³•è®¡ç®—æŒ‡å®šæ–‡ä»¶çš„æ ¡éªŒç ï¼Œå¹¶è¿”å›æ ¡éªŒç®—æ³•åç§°å’Œæ ¡éªŒç ã€‚</p>

<h1 id="è§£æå‚æ•°">è§£æå‚æ•°</h1>

<p>å°†è§£æå‚æ•°ç›¸å…³é…ç½®å’Œæ“ä½œå°è£…åˆ° <code>process_with_args</code> å‡½æ•°ä¸­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">def</span> <span class="nf">process_with_args</span><span class="p">():</span>
    <span class="s2">&#34;&#34;&#34;è§£æå‘½ä»¤è¡Œå‚æ•°
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;è®¡ç®—æ–‡ä»¶æ ¡éªŒï¼Œæ£€æŸ¥æ ¡éªŒå€¼ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶&#39;</span><span class="p">)</span>
    <span class="n">commands</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_subparsers</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;å­å‘½ä»¤&#39;</span><span class="p">)</span>
    <span class="n">check</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;check&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ£€æŸ¥æ ¡éªŒå€¼å‘½ä»¤&#39;</span><span class="p">)</span>
    <span class="n">check</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡æ˜æ–‡ä»¶è·¯å¾„&#39;</span><span class="p">)</span>
    <span class="n">check</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;hash&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šæ ¡éªŒç &#39;</span><span class="p">)</span>
    <span class="n">check</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;--algorithm&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="s1">&#39;md5&#39;</span><span class="p">],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šæ ¡éªŒç®—æ³•&#39;</span><span class="p">)</span>
    <span class="n">check</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">check_hash</span><span class="p">)</span>
    <span class="n">compare</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;compare&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶&#39;</span><span class="p">)</span>
    <span class="n">compare</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè¦æ¯”è¾ƒçš„ä¸¤ä¸ªæ–‡ä»¶&#39;</span><span class="p">)</span>
    <span class="n">compare</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;--algorithm&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="s1">&#39;md5&#39;</span><span class="p">],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šæ ¡éªŒç®—æ³•&#39;</span><span class="p">)</span>
    <span class="n">compare</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">compare_hash</span><span class="p">)</span>
    <span class="n">calculate</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">add_parser</span><span class="p">(</span><span class="s1">&#39;calculate&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®¡ç®—æ ¡éªŒç &#39;</span><span class="p">)</span>
    <span class="n">calculate</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè¦è®¡ç®—æ ¡éªŒçš„æ–‡ä»¶&#39;</span><span class="p">)</span>
    <span class="n">calculate</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;--algorithm&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sha1&#39;</span><span class="p">,</span> <span class="s1">&#39;md5&#39;</span><span class="p">],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šæ ¡éªŒç®—æ³•&#39;</span><span class="p">)</span>
    <span class="n">calculate</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">calculate_hash</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<p>ä¸Šè¿°ä»£ç å¾ˆæƒ³å¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸‰ä¸ªå­å‘½ä»¤ï¼š</p>

<ul>
<li>check: ä¸»è¦æ˜¯ç”¨æ¥æ£€éªŒæ–‡ä»¶çš„æ ¡éªŒå€¼æ˜¯ä¸æ˜¯ä¸ç»™å®šçš„æ ¡éªŒç ä¸€è‡´</li>
<li>compare: æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶çš„æ ¡éªŒå€¼ä»è€ŒéªŒè¯å†…å®¹æ˜¯å¦ä¸€è‡´</li>
<li>calculate: è®¡ç®—ç»™å®šæ–‡ä»¶çš„æ ¡éªŒç </li>
</ul>

<p>å¦å¤–ï¼Œæ¯ä¸ªå­å‘½ä»¤çš„è§£æå™¨éƒ½ç»‘å®šäº†ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œè¿™ç§æ–¹å¼æ˜¯å¤„ç†å­å‘½ä»¤æ›´åŠ æ–¹ä¾¿ã€‚</p>

<h2 id="checkå­å‘½ä»¤å¤„ç†">checkå­å‘½ä»¤å¤„ç†</h2>

<p>check å­å‘½ä»¤ç»‘å®šäº†æ–¹æ³• <code>check_hash</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">def</span> <span class="nf">check_hash</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="n">args</span><span class="o">.</span><span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
    <span class="n">algorithm</span><span class="p">,</span> <span class="n">hashvalue</span> <span class="o">=</span> <span class="n">calculate_hashvalue</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">algorithm</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">    {args.file}</span><span class="se">\n</span><span class="s1">    {algorithm}: {hashvalue}&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;ä¸€è‡´&#39;</span> <span class="k">if</span> <span class="n">hashvalue</span> <span class="o">==</span> <span class="n">args</span><span class="o">.</span><span class="n">hash</span> <span class="k">else</span> <span class="s1">&#39;ä¸ä¸€è‡´&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">    æ–‡ä»¶æ ¡éªŒç ä¸ {args.hash} {result}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></code></pre></div>
<p>è¿™ä¸ªæ–¹æ³•ä¼šæ‰“å°æ–‡ä»¶çš„åç§°å’Œæ ¡éªŒç ï¼Œæœ€ç»ˆæ‰“å°ä¸ç»™å®šæ ¡éªŒç çš„æ¯”è¾ƒç»“æœã€‚</p>

<h2 id="compareå­å‘½ä»¤å¤„ç†">compareå­å‘½ä»¤å¤„ç†</h2>

<p>compare å­å‘½ä»¤ç»‘å®šäº†æ–¹æ³• <code>compare_hash</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">def</span> <span class="nf">compare_hash</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span><span class="p">()</span>
    <span class="n">hashvalue</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">file</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="n">algorithm</span><span class="p">,</span> <span class="n">hashvalue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">calculate_hashvalue</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;    name: {filepath}</span><span class="se">\n</span><span class="s1">    {algorithm}: {hashvalue[i]}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;ä¸€è‡´&#39;</span> <span class="k">if</span> <span class="n">hashvalue</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">hashvalue</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="s1">&#39;ä¸ä¸€è‡´&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;    ä¸¤æ–‡ä»¶å†…å®¹{result}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></code></pre></div>
<p>è¿™é‡Œæœ€ç»ˆä¼šæ‰“å°ä¸¤ä¸ªæ–‡ä»¶çš„åç§°ã€æ ¡éªŒç ï¼Œä»¥åŠæœ€ç»ˆçš„æ¯”è¾ƒç»“æœã€‚</p>

<h2 id="calculateå­å‘½ä»¤å¤„ç†">calculateå­å‘½ä»¤å¤„ç†</h2>

<p>calculate å­å‘½ä»¤ç»‘å®šäº†æ–¹æ³•<code>calculate_hash</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">def</span> <span class="nf">calculate_hash</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="k">print</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">filepath</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">file</span><span class="p">:</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="n">algorithm</span><span class="p">,</span> <span class="n">hashvalue</span> <span class="o">=</span> <span class="n">calculate_hashvalue</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">algorithm</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;    name: {filepath}</span><span class="se">\n</span><span class="s1">    {algorithm}: {hashvalue}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></code></pre></div>
<p>æœ€ç»ˆä¼šæ‰“å°æ‰€æœ‰æŒ‡å®šæ–‡ä»¶çš„åç§°åŠè®¡ç®—çš„æ ¡éªŒç ã€‚</p>

<h1 id="æœ€ç»ˆå®ç°">æœ€ç»ˆå®ç°</h1>

<p>æœ€ç»ˆå®ç°éå¸¸ç®€å•ï¼Œåªéœ€è¦å¦‚ä¸‹å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">process_with_args</span><span class="p">()</span>
    <span class="n">args</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></code></pre></div>
<h1 id="æµ‹è¯•">æµ‹è¯•</h1>

<p>å·¥å…·çš„å¸®åŠ©ä¿¡æ¯å¦‚ä¸‹</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ ./hashpare -h
usage: hashpare <span class="o">[</span>-h<span class="o">]</span> <span class="o">{</span>check,compare,calculate<span class="o">}</span> ...

è®¡ç®—æ–‡ä»¶æ ¡éªŒï¼Œæ£€æŸ¥æ ¡éªŒå€¼ï¼Œæ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶

positional arguments:
  <span class="o">{</span>check,compare,calculate<span class="o">}</span>
                        å­å‘½ä»¤
    check               æ£€æŸ¥æ ¡éªŒå€¼å‘½ä»¤
    compare             æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶
    calculate           è®¡ç®—æ ¡éªŒç 

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and exit</code></pre></div>
<h2 id="æµ‹è¯•checkå­å‘½ä»¤">æµ‹è¯•checkå­å‘½ä»¤</h2>

<p>è¿™é‡Œé’ˆå¯¹ <code>README.md</code> æ–‡ä»¶è¿›è¡Œæµ‹è¯•</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="err">$</span> <span class="o">./</span><span class="n">hashpare</span> <span class="n">check</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span> <span class="mi">1234567890</span>

    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">sha1</span><span class="p">:</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span>

    <span class="err">æ–‡ä»¶æ ¡éªŒç ä¸</span> <span class="mi">1234567890</span> <span class="err">ä¸ä¸€è‡´</span>

<span class="err">$</span> <span class="o">./</span><span class="n">hashpare</span> <span class="n">check</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span> <span class="o">-</span><span class="n">a</span> <span class="n">sha1</span>

    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">sha1</span><span class="p">:</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span>

    <span class="err">æ–‡ä»¶æ ¡éªŒç ä¸</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span> <span class="err">ä¸€è‡´</span>

<span class="err">$</span> <span class="o">./</span><span class="n">hashpare</span> <span class="n">check</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span> <span class="o">-</span><span class="n">a</span> <span class="n">md5</span>

    <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">md5</span><span class="p">:</span> <span class="mi">0</span><span class="n">ea8599b24a76f586a6610bf9156b1e7</span>

    <span class="err">æ–‡ä»¶æ ¡éªŒç ä¸</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span> <span class="err">ä¸ä¸€è‡´</span></code></pre></div>
<h2 id="æµ‹è¯•compareå­å‘½ä»¤">æµ‹è¯•compareå­å‘½ä»¤</h2>

<p>é’ˆå¯¹æ–‡ä»¶ <code>README.md</code> æµ‹è¯•</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="err">$</span> <span class="o">./</span><span class="n">hashpare</span> <span class="n">compare</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span>

    <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">sha1</span><span class="p">:</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span>

    <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">sha1</span><span class="p">:</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span>

    <span class="err">ä¸¤æ–‡ä»¶å†…å®¹ä¸€è‡´</span>

<span class="err">$</span> <span class="o">./</span><span class="n">hashpare</span> <span class="n">compare</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span> <span class="o">-</span><span class="n">a</span> <span class="n">md5</span>

    <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">md5</span><span class="p">:</span> <span class="mi">0</span><span class="n">ea8599b24a76f586a6610bf9156b1e7</span>

    <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">md5</span><span class="p">:</span> <span class="mi">0</span><span class="n">ea8599b24a76f586a6610bf9156b1e7</span>

    <span class="err">ä¸¤æ–‡ä»¶å†…å®¹ä¸€è‡´</span></code></pre></div>
<h2 id="æµ‹è¯•calculateå­å‘½ä»¤">æµ‹è¯•calculateå­å‘½ä»¤</h2>

<p>è¿™é‡Œè®¡ç®— <code>README.md</code> çš„æ ¡éªŒç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Python" data-lang="Python"><span class="err">$</span> <span class="o">./</span><span class="n">hashpare</span> <span class="n">calculate</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span>

    <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">sha1</span><span class="p">:</span> <span class="n">daf0fe7a2fab819444d21b1c082e161f6d613875</span>

<span class="err">$</span> <span class="o">./</span><span class="n">hashpare</span> <span class="n">calculate</span> <span class="n">README</span><span class="o">.</span><span class="n">md</span> <span class="o">-</span><span class="n">a</span> <span class="n">md5</span>

    <span class="n">name</span><span class="p">:</span> <span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="mi">5</span><span class="n">km</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">workspace</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">tools</span><span class="o">-</span><span class="k">with</span><span class="o">-</span><span class="n">script</span><span class="o">/</span><span class="n">hashpare</span><span class="o">/</span><span class="n">README</span><span class="o">.</span><span class="n">md</span>
    <span class="n">md5</span><span class="p">:</span> <span class="mi">0</span><span class="n">ea8599b24a76f586a6610bf9156b1e7</span></code></pre></div><div class="footnotes">

<hr />

<ol>
<li id="fn:hashpare-hash-ha">ä¹‹æ‰€ä»¥å« <code>hashpare</code>, æ˜¯å› ä¸ºå·¥å…·ä½¿ç”¨ <strong>hash</strong> å€¼å¯¹æ–‡ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œå°±æ˜¯ <strong>hash compare</strong>ï¼Œåˆç§° <code>hashpare</code> <a class="footnote-return" href="#fnref:hashpare-hash-ha"><sup>[return]</sup></a></li>
<li id="fn:Many-programs-sp">Many programs split up their functionality into a number of sub-commands, for example, the svn program can invoke sub-commands like svn checkout, svn update, and svn commit&hellip;<code>ArgumentParser</code> supports the creation of such sub-commands with the <code>add_subparsers()</code> method&hellip;, <a href="https://docs.python.org/3/library/argparse.html#sub-commands" target="_blank">Sub-commands</a> <a class="footnote-return" href="#fnref:Many-programs-sp"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>python å®ç°æ–‡æœ¬æ–‡ä»¶çš„ç¼–ç æ£€æµ‹å’Œè½¬æ¢</title>
			<link>https://www.smslit.top/2018/10/25/encoding-python/</link>
			<pubDate>Thu, 25 Oct 2018 22:05:59 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/25/encoding-python/</guid>
			<description>&lt;p&gt;è®°å¾—åœ¨å‰å…¬å¸åšåµŒå…¥å¼å¼€å‘æ—¶ï¼Œæ€»æ˜¯ä¼šé‡åˆ°å› ä»£ç æ–‡ä»¶ç¼–ç ä¸å¯¹å¯¼è‡´çš„æ³¨é‡Šä¹±ç é—®é¢˜ã€‚å› ä¸ºéƒ¨é—¨é‡Œå¾ˆå¤šäººå–œæ¬¢ä½¿ç”¨ GB2312ï¼Œè€Œæˆ‘æ¯”è¾ƒå€¾å‘äºç”¨ utf-8 ç¼–ç ï¼Œæ‰€ä»¥æ¯æ¬¡åˆå¹¶ä»–ä»¬ä»£ç çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä¼šä½¿ç”¨ä¸€ä¸ª &lt;code&gt;find&lt;/code&gt; å’Œ &lt;code&gt;enca&lt;/code&gt; çš„ç»„åˆå‘½ä»¤ï¼Œå¯¹å·¥ç¨‹æ£€ç´¢å°† GB2312 çš„ &lt;code&gt;.c&lt;/code&gt; å’Œ &lt;code&gt;.h&lt;/code&gt; æ–‡ä»¶è½¬ç ä¸º &lt;code&gt;utf-8&lt;/code&gt;ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è‡ªå·±ç¼–å†™ä¸€ä¸ª python å·¥å…·å®ç°æ–‡ä»¶ç¼–ç çš„æ£€æµ‹å’Œè½¬æ¢å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œå€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ &lt;code&gt;chardet&lt;/code&gt; å°±å¯ä»¥åšåˆ°ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è®°å¾—åœ¨å‰å…¬å¸åšåµŒå…¥å¼å¼€å‘æ—¶ï¼Œæ€»æ˜¯ä¼šé‡åˆ°å› ä»£ç æ–‡ä»¶ç¼–ç ä¸å¯¹å¯¼è‡´çš„æ³¨é‡Šä¹±ç é—®é¢˜ã€‚å› ä¸ºéƒ¨é—¨é‡Œå¾ˆå¤šäººå–œæ¬¢ä½¿ç”¨ GB2312ï¼Œè€Œæˆ‘æ¯”è¾ƒå€¾å‘äºç”¨ utf-8 ç¼–ç ï¼Œæ‰€ä»¥æ¯æ¬¡åˆå¹¶ä»–ä»¬ä»£ç çš„æ—¶å€™ï¼Œé€šå¸¸æˆ‘ä¼šä½¿ç”¨ä¸€ä¸ª <code>find</code> å’Œ <code>enca</code> çš„ç»„åˆå‘½ä»¤ï¼Œå¯¹å·¥ç¨‹æ£€ç´¢å°† GB2312 çš„ <code>.c</code> å’Œ <code>.h</code> æ–‡ä»¶è½¬ç ä¸º <code>utf-8</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è‡ªå·±ç¼–å†™ä¸€ä¸ª python å·¥å…·å®ç°æ–‡ä»¶ç¼–ç çš„æ£€æµ‹å’Œè½¬æ¢å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œå€ŸåŠ©ç¬¬ä¸‰æ–¹åº“ <code>chardet</code> å°±å¯ä»¥åšåˆ°ï¼</p>

<h1 id="ç¼–ç æ“ä½œ">ç¼–ç æ“ä½œ</h1>

<p>è¦å¯¹æ–‡ä»¶ç¼–ç è½¬æ¢å‰ï¼Œå¿…é¡»ä¹Ÿè¦çŸ¥é“æºæ–‡ä»¶æ˜¯ä»€ä¹ˆç¼–ç ï¼Œæ‰€ä»¥ä¹Ÿå¾—è¿›è¡Œç¼–ç æ£€æµ‹ã€‚</p>

<h2 id="ç¼–ç æ£€æµ‹">ç¼–ç æ£€æµ‹</h2>

<p>è¿™é‡Œæ˜¯ç”¨ <code>chardet</code> åº“çš„ <code>UniversalDetector</code> ç±»å®ç°æ–‡ä»¶ç¼–ç çš„æ£€æµ‹ï¼Œåœ¨ä½¿ç”¨å‰éœ€è¦å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ pip3 install chardet</code></pre></div>
<p>æ¯”å¦‚é’ˆå¯¹ç¼–ç ä¸º <code>utf-8</code> çš„æ–‡ä»¶ <code>README.md</code>ï¼Œå¯ä»¥å¦‚ä¸‹è¿›è¡Œä»£ç æ£€æµ‹ï¼Œæ£€æµ‹çš„åŒæ—¶ä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªç½®ä¿¡åº¦è¡¨å¾æ£€æµ‹æ­£ç¡®çš„å¯ä¿¡åº¦ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">chardet.universaldetector</span> <span class="kn">import</span> <span class="n">UniversalDetector</span>

<span class="n">detector</span> <span class="o">=</span> <span class="n">UniversalDetector</span><span class="p">()</span>
<span class="n">detector</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">):</span>
    <span class="n">detector</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">each</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">detector</span><span class="o">.</span><span class="n">done</span><span class="p">:</span>
        <span class="k">break</span>
<span class="n">detector</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">fileencoding</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;encoding&#39;</span><span class="p">]</span>
<span class="n">confidence</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span></code></pre></div>
<p>å…¶ä¸­æ³¨æ„çš„æ˜¯ï¼š</p>

<ul>
<li>è¦ä»¥äºŒè¿›åˆ¶è¯»å–æ¨¡å¼æ‰“å¼€æ–‡ä»¶</li>
<li><strong>fileencoding</strong> æ˜¯ç¼–ç ï¼Œ<strong>confidence</strong> æ˜¯ç½®ä¿¡åº¦ï¼Œå–ä¹‹èŒƒå›´ 0ï½1</li>
</ul>

<h2 id="ç¼–ç è½¬æ¢">ç¼–ç è½¬æ¢</h2>

<p>æ–‡ä»¶ç¼–ç çš„è½¬æ¢å…¶å®ä½¿ç”¨æ–‡ä»¶è¯»å†™æ“ä½œå°±å¯ä»¥å®Œæˆï¼Œæ‰“å¼€æ–‡ä»¶çš„æ—¶å€™å¯ä»¥æŒ‡å®šç¼–ç ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨æºæ–‡ä»¶ç¼–ç å½¢å¼æ‰“å¼€è¯»å–å†…å®¹ï¼Œå†ä»¥æ–°çš„ç¼–ç æ‰“å¼€è¦ç”Ÿæˆçš„æ–‡ä»¶ï¼Œå°†è¯»å–å»çš„å†…å®¹å†™å…¥æ–°çš„æ–‡ä»¶ï¼Œå°±å®ç°ç¼–ç è½¬æ¢äº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">sourcefile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;gb2312&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">targetfile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></code></pre></div>
<p>å…¶ä¸­ï¼š</p>

<ul>
<li>è°ƒç”¨ open çš„æ—¶å€™æŒ‡å®š <code>error</code> å‚æ•°ä¸º <code>replace</code>ï¼Œè¯´æ˜ä¼šå°†æ ‡è®°å­—ç¬¦æ’å…¥åˆ°é”™è¯¯ä½ç½®</li>
<li>å¦‚æœä½¿ç”¨ with è¯­æ³•çš„è¯å¯èƒ½ä¼šåœ¨è¿™é‡Œå‡ºç°ä¸€ç‚¹å°é—®é¢˜ï¼Œå¦‚æœè¾“å‡ºæ–‡ä»¶è·¯å¾„ä¸åŸæ–‡ä»¶è·¯å¾„ä¸€è‡´ä¼šå‡ºç°ä¿å­˜ç¼–ç å¼‚å¸¸ï¼Œæ‰€ä»¥æ²¡æœ‰ä½¿ç”¨ with</li>
</ul>

<h1 id="å·¥å…·å®ç°">å·¥å…·å®ç°</h1>

<p>è¿™ä¸ª python è„šæœ¬å·¥å…·çš„å®ç°ä¼šç”¨åˆ°å†…å»ºåº“ <code>argparse</code> åº“ï¼ˆ<a href="/2018/09/13/python-argparse/" target="_blank">ç‚¹æˆ‘</a>äº†è§£åŸºæœ¬ç”¨æ³•ï¼‰ã€<code>os</code> åº“å’Œç¬¬ä¸‰æ–¹åº“ <code>chardet</code> åº“ã€‚</p>

<h2 id="å‡†å¤‡è„šæœ¬">å‡†å¤‡è„šæœ¬</h2>

<ol>
<li>æ–°å»ºæ–‡ä»¶ <code>encoding</code>: <code>touch encoding</code></li>
<li>æ·»åŠ è¿è¡Œæƒé™: <code>chmod +x encoding</code></li>

<li><p>æŒ‡æ˜è„šæœ¬è§£é‡Šå™¨ï¼Œæ–‡ä»¶ä¸­æ·»åŠ å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span></code></pre></div></li>

<li><p>å¯¼å…¥å¿…è¦åº“ï¼Œæ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">chardet.universaldetector</span> <span class="kn">import</span> <span class="n">UniversalDetector</span></code></pre></div></li>
</ol>

<h2 id="æ·»åŠ å‘½ä»¤å‚æ•°è§£æå‡½æ•°">æ·»åŠ å‘½ä»¤å‚æ•°è§£æå‡½æ•°</h2>

<p>å°è£…å‘½ä»¤è¡Œå‚æ•°è§£ææ“ä½œä¸ºå‡½æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getargs</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;è¿™æ˜¯ä¸€ä¸ªæ£€æµ‹æˆ–è½¬æ¢æ–‡ä»¶ç¼–ç çš„å·¥å…·&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;files&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶çš„è·¯å¾„&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-e&#39;</span><span class="p">,</span> <span class="s1">&#39;--encoding&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="n">const</span><span class="o">=</span><span class="s1">&#39;UTF-8&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;æŒ‡å®šç›®æ ‡ç¼–ç ï¼Œå¯é€‰æ‹©çš„ç¼–ç ï¼š
</span><span class="s1">ASCII, (Default) UTF-8 (with or without a BOM), UTF-16 (with a BOM),
</span><span class="s1">UTF-32 (with a BOM), Big5, GB2312/GB18030, EUC-TW, HZ-GB-2312, 
</span><span class="s1">ISO-2022-CN, EUC-JP, SHIFT_JIS, ISO-2022-JP, ISO-2022-KR, KOI8-R, 
</span><span class="s1">MacCyrillic, IBM855, IBM866, ISO-8859-5, windows-1251, ISO-8859-2, 
</span><span class="s1">windows-1250, EUC-KR, ISO-8859-5, windows-1251, ISO-8859-1, windows-1252, 
</span><span class="s1">ISO-8859-7, windows-1253, ISO-8859-8, windows-1255, TIS-620&#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--outdir&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè½¬æ¢æ–‡ä»¶çš„è¾“å‡ºç›®å½•&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td>files</td>
<td>æ–‡ä»¶è·¯å¾„</td>
<td>æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶çš„è·¯å¾„</td>
</tr>

<tr>
<td>-e, &ndash;encoding</td>
<td>ç¼–ç åç§°, é»˜è®¤ä¸º <code>UTF-8</code></td>
<td>æŒ‡å®šç›®æ ‡ç¼–ç </td>
</tr>

<tr>
<td>-o, &ndash;outdir</td>
<td>ç›®å½•è·¯å¾„</td>
<td>æŒ‡å®šè½¬æ¢æ–‡ä»¶çš„è¾“å‡ºç›®å½•</td>
</tr>
</tbody>
</table>

<h2 id="å°è£…ç¼–ç æ£€æµ‹å‡½æ•°">å°è£…ç¼–ç æ£€æµ‹å‡½æ•°</h2>

<p>ä¸ºäº†æ–¹ä¾¿å¤„ç†ï¼Œæ ¹æ® <a href="#ç¼–ç æ£€æµ‹" target="_blank">ç¼–ç æ£€æµ‹</a> å°èŠ‚ï¼Œå°è£…ç¼–ç æ£€æµ‹å‡½æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">detcect_encoding</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;æ£€æµ‹æ–‡ä»¶ç¼–ç 
</span><span class="s2">    Args:
</span><span class="s2">        detector: UniversalDetector å¯¹è±¡
</span><span class="s2">        filepath: æ–‡ä»¶è·¯å¾„
</span><span class="s2">    Return:
</span><span class="s2">        fileencoding: æ–‡ä»¶ç¼–ç 
</span><span class="s2">        confidence: æ£€æµ‹ç»“æœçš„ç½®ä¿¡åº¦ï¼Œç™¾åˆ†æ¯”
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">detector</span> <span class="o">=</span> <span class="n">UniversalDetector</span><span class="p">()</span>
    <span class="n">detector</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">):</span>
        <span class="n">detector</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="n">each</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">detector</span><span class="o">.</span><span class="n">done</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="n">detector</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">fileencoding</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;encoding&#39;</span><span class="p">]</span>
    <span class="n">confidence</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;confidence&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">fileencoding</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fileencoding</span> <span class="o">=</span> <span class="s1">&#39;unknown&#39;</span>
        <span class="n">confidence</span> <span class="o">=</span> <span class="mf">0.99</span>
    <span class="k">return</span> <span class="n">fileencoding</span><span class="p">,</span> <span class="n">confidence</span> <span class="o">*</span> <span class="mi">100</span></code></pre></div>
<p><code>UniversalDetector</code> å®ä¾‹å¯¹è±¡å®Œæˆæ£€æµ‹åï¼Œå¦‚æœä¸èƒ½è¯†åˆ«ç¼–ç ï¼Œ<code>detector.result['encoding']</code> å°±ä¼šæ˜¯ <code>None</code> ï¼Œæ‰€ä»¥è¿™é‡Œåšäº†ä¸€å®šå¤„ç†ï¼Œå¹¶ä¸”æœ€åè¿”å›çš„ç½®ä¿¡åº¦è¿™ä¸ªå€¼å–çš„æ˜¯ç™¾åˆ†æ¯”çš„å€¼ã€‚</p>

<h2 id="æœ€ç»ˆå®ç°æµç¨‹">æœ€ç»ˆå®ç°æµç¨‹</h2>

<p>åœ¨ <code>__main__</code> ä¸­å®ç°æ•´ä¸ªåŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">getargs</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">):</span>
            <span class="n">answer</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[-] æ— æ•ˆçš„å¯¼å‡ºè·¯å¾„: {args.outdir} [-]</span><span class="se">\n</span><span class="s1">è¦ç”¨è½¬ç åçš„æ–‡ä»¶ç›´æ¥æ›¿æ¢æºæ–‡ä»¶å—? y or n</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s1">&#39;y&#39;</span> <span class="ow">in</span> <span class="n">answer</span><span class="p">:</span>
                <span class="n">args</span><span class="o">.</span><span class="n">outdir</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">files</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="nb">file</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[-] æ— æ•ˆçš„æ–‡ä»¶è·¯å¾„: {file} [-]&#39;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">encoding</span><span class="p">,</span> <span class="n">confidence</span> <span class="o">=</span> <span class="n">detcect_encoding</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[+] {file}: ç¼–ç  -&gt; {encoding} (ç½®ä¿¡åº¦ {confidence}%) [+]&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">and</span> <span class="p">(</span><span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s1">&#39;unknown&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">confidence</span> <span class="o">&gt;</span> <span class="mf">0.75</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">encoding</span> <span class="o">==</span> <span class="n">encoding</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[*] {file} å·²ç»æ˜¯ {encoding} ç¼–ç äº†ï¼Œæ— éœ€è½¬æ¢ï¼[*]&#39;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">outpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="nb">file</span><span class="p">)</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">outdir</span> <span class="k">else</span> <span class="nb">file</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">outpath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[+] è½¬ç æˆåŠŸ: {file}({encoding}) -&gt; {outpath}({args.encoding}) [+]&#39;</span><span class="p">)</span></code></pre></div>
<ol>
<li>è·å–å‘½ä»¤è¡Œå‚æ•°</li>
<li>å¦‚æœå‘½ä»¤è¡Œä¸­æŒ‡å®šäº†è½¬æ¢æ–‡ä»¶è¾“å‡ºç›®å½•ï¼Œæ£€æŸ¥ç›®å½•æ˜¯å¦æœ‰æ•ˆ</li>
<li>æšä¸¾æŒ‡å®šçš„æ–‡ä»¶åˆ—è¡¨</li>
<li>é’ˆå¯¹æ–‡ä»¶ï¼Œé¦–å…ˆæ£€æŸ¥è·¯å¾„çš„æœ‰æ•ˆæ€§ï¼Œç„¶åé€šè¿‡ <code>detect_encoding</code> æ–¹æ³•è·å–ç¼–ç æ£€æµ‹ç»“æœ</li>
<li>å¦‚æœæŒ‡å®šäº†ç›®æ ‡ç¼–ç å¹¶ä¸”æ£€æµ‹çš„æ–‡ä»¶ç¼–ç ä¸æ˜¯æœªçŸ¥å’Œç½®ä¿¡åº¦é«˜äº 75% é‚£å°±è¿›è¡Œç¼–ç è½¬æ¢</li>
<li>åœ¨ç¼–ç è½¬æ¢ä¸­ï¼Œæ£€æµ‹è½¬æ¢çš„å¿…è¦æ€§</li>
<li>å¦‚æœéœ€è¦è½¬æ¢é‚£å°±æŒ‰ç…§å°èŠ‚<a href="#ç¼–ç è½¬æ¢" target="_blank">ç¼–ç è½¬æ¢</a>è¿›è¡Œç¼–ç çš„è½¬æ¢</li>
</ol>

<p>æœ€ç»ˆå®ç°å®Œæ•´çš„å·¥å…·ä»£ç ï¼Œå¯å‚è€ƒï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/encoding/encoding" target="_blank">tools-with-script/encoding/encoding</a></p>

<h1 id="æµ‹è¯•">æµ‹è¯•</h1>

<p>å®ç°äº†å·¥å…·ï¼Œå¿…é¡»æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œç”¨åˆ°äº†æ–‡ä»¶ <a href="https://github.com/smslit/tools-with-script/blob/master/encoding/gb2312.txt" target="_blank">gb2312.txt</a> å’Œæ–‡ä»¶ <a href="https://github.com/smslit/tools-with-script/blob/master/encoding/big5.txt" target="_blank">big5.txt</a>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ ./encoding -h
usage: encoding <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-e <span class="o">[</span>ENCODING<span class="o">]]</span> <span class="o">[</span>-o OUTDIR<span class="o">]</span> files <span class="o">[</span>files ...<span class="o">]</span>

è¿™æ˜¯ä¸€ä¸ªæ£€æµ‹æˆ–è½¬æ¢æ–‡ä»¶ç¼–ç çš„å·¥å…·

positional arguments:
  files                 æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶çš„è·¯å¾„

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -e <span class="o">[</span>ENCODING<span class="o">]</span>, --encoding <span class="o">[</span>ENCODING<span class="o">]</span>
                        æŒ‡å®šç›®æ ‡ç¼–ç ï¼Œå¯é€‰æ‹©çš„ç¼–ç ï¼š ASCII, <span class="o">(</span>Default<span class="o">)</span> UTF-8 <span class="o">(</span>with or without
                        a BOM<span class="o">)</span>, UTF-16 <span class="o">(</span>with a BOM<span class="o">)</span>, UTF-32 <span class="o">(</span>with a BOM<span class="o">)</span>,
                        Big5, GB2312/GB18030, EUC-TW, HZ-GB-2312, ISO-2022-CN,
                        EUC-JP, SHIFT_JIS, ISO-2022-JP, ISO-2022-KR, KOI8-R,
                        MacCyrillic, IBM855, IBM866, ISO-8859-5, windows-1251,
                        ISO-8859-2, windows-1250, EUC-KR, ISO-8859-5,
                        windows-1251, ISO-8859-1, windows-1252, ISO-8859-7,
                        windows-1253, ISO-8859-8, windows-1255, TIS-620
  -o OUTDIR, --outdir OUTDIR
                        æŒ‡å®šè½¬æ¢æ–‡ä»¶çš„è¾“å‡ºç›®å½•
$ ./encoding big5.txt gb2312.txt
<span class="o">[</span>+<span class="o">]</span> big5.txt: ç¼–ç  -&gt; Big5 <span class="o">(</span>ç½®ä¿¡åº¦ <span class="m">99</span>.0%<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> gb2312.txt: ç¼–ç  -&gt; GB2312 <span class="o">(</span>ç½®ä¿¡åº¦ <span class="m">99</span>.0%<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span>
$ ./encoding big5.txt gb2312.txt -e utf-8
<span class="o">[</span>+<span class="o">]</span> big5.txt: ç¼–ç  -&gt; Big5 <span class="o">(</span>ç½®ä¿¡åº¦ <span class="m">99</span>.0%<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> è½¬ç æˆåŠŸ: big5.txt<span class="o">(</span>Big5<span class="o">)</span> -&gt; big5.txt<span class="o">(</span>utf-8<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> gb2312.txt: ç¼–ç  -&gt; GB2312 <span class="o">(</span>ç½®ä¿¡åº¦ <span class="m">99</span>.0%<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> è½¬ç æˆåŠŸ: gb2312.txt<span class="o">(</span>GB2312<span class="o">)</span> -&gt; gb2312.txt<span class="o">(</span>utf-8<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span>
$ âœ— ./encoding big5.txt gb2312.txt
<span class="o">[</span>+<span class="o">]</span> big5.txt: ç¼–ç  -&gt; utf-8 <span class="o">(</span>ç½®ä¿¡åº¦ <span class="m">99</span>.0%<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> gb2312.txt: ç¼–ç  -&gt; utf-8 <span class="o">(</span>ç½®ä¿¡åº¦ <span class="m">99</span>.0%<span class="o">)</span> <span class="o">[</span>+<span class="o">]</span></code></pre></div>]]></content>
		</item>
		
		<item>
			<title>python å®ç°å‘½ä»¤è¡Œå·¥å…· tee</title>
			<link>https://www.smslit.top/2018/10/24/tee-Python/</link>
			<pubDate>Wed, 24 Oct 2018 17:58:19 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/24/tee-Python/</guid>
			<description>&lt;p&gt;æœ€è¿‘ï¼Œæœ‹å‹ &lt;a href=&#34;http://www.litreily.top&#34; target=&#34;_blank&#34;&gt;Litreily&lt;/a&gt; å‘è¡¨äº†æ–‡ç« &lt;a href=&#34;http://www.litreily.top/2018/09/27/tee/&#34; target=&#34;_blank&#34;&gt;LinuxæŒ‡ä»¤ - teeçš„å®ç°&lt;/a&gt; ï¼Œæ˜¯ç”¨ C è¯­è¨€å®ç°çš„ tee å‘½ä»¤ï¼Œé‚£æˆ‘å‡‘ä¸ªçƒ­é—¹ç”¨ python å®ç°ä¸€ä¸‹ä¸‹ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181025154039778364827.png&#34; alt=&#34;20181025154039778364827.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘ï¼Œæœ‹å‹ <a href="http://www.litreily.top" target="_blank">Litreily</a> å‘è¡¨äº†æ–‡ç« <a href="http://www.litreily.top/2018/09/27/tee/" target="_blank">LinuxæŒ‡ä»¤ - teeçš„å®ç°</a> ï¼Œæ˜¯ç”¨ C è¯­è¨€å®ç°çš„ tee å‘½ä»¤ï¼Œé‚£æˆ‘å‡‘ä¸ªçƒ­é—¹ç”¨ python å®ç°ä¸€ä¸‹ä¸‹ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181025154039778364827.png" alt="20181025154039778364827.png" /></p>

<h1 id="teeå‘½ä»¤">teeå‘½ä»¤</h1>

<p>macOSä¸‹ä¹Ÿæœ‰ tee å‘½ä»¤ï¼Œå¥½åƒè·Ÿ linux ä¸‹çš„æœ‰ä¸€ç‚¹ç‚¹å·®åˆ«ï¼Œè¿™ä¸ªå°èŠ‚è®²ä¸€ä¸‹ macOS ä¸‹çš„ tee å‘½ä»¤çš„ä½¿ç”¨ï¼Œæ€»è¯¥æ„Ÿå—ä¸‹å®ƒçš„åŠŸèƒ½æ‰èƒ½å®ç°å®ƒå§ï¼</p>

<h2 id="teeçš„åŠŸèƒ½">teeçš„åŠŸèƒ½</h2>

<p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ <code>man tee</code> å¯ä»¥æŸ¥çœ‹ tee çš„æ‰‹å†Œï¼Œä»‹ç»éå¸¸ç®€å•ï¼Œå½“ç„¶æ˜¯å› ä¸ºè¿™ä¸ªå‘½ä»¤åŠŸèƒ½å¾ˆç®€å•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">TEE<span class="o">(</span><span class="m">1</span><span class="o">)</span>                    BSD General Commands Manual                   TEE<span class="o">(</span><span class="m">1</span><span class="o">)</span>

NAME
     tee -- pipe fitting

SYNOPSIS
     tee <span class="o">[</span>-ai<span class="o">]</span> <span class="o">[</span>file ...<span class="o">]</span>

DESCRIPTION
     The tee utility copies standard input to standard output, making a copy in zero or more files.  The output is unbuffered.

     The following options are available:

     -a      Append the output to the files rather than overwriting them.

     -i      Ignore the SIGINT signal.

     The following operands are available:

     file  A pathname of an output file.

     The tee utility takes the default action <span class="k">for</span> all signals, except in the event of the -i option.

     The tee utility exits <span class="m">0</span> on success, and &gt;0 <span class="k">if</span> an error occurs.

STANDARDS
     The tee <span class="k">function</span> is expected to be POSIX IEEE Std <span class="m">1003</span>.2 <span class="o">(</span><span class="sb">``</span>POSIX.2<span class="s1">&#39;&#39;</span><span class="o">)</span> compatible.

BSD                              June <span class="m">6</span>, <span class="m">1993</span>                              BSD</code></pre></div>
<p>åŠŸèƒ½ç®€å•æ¥è¯´å°±æ˜¯æŠŠæ ‡å‡†è¾“å…¥ä¼ è¾“ç»™æ ‡å‡†è¾“å‡º(æ‰“å°å‡ºæ¥)çš„åŒæ—¶å°†è¾“å…¥å†…å®¹å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œè€Œåœ¨æŒ‡å®šæ–‡ä»¶çš„æ—¶å€™åŠ ä¸Š <code>-a</code> ä¼šåœ¨æ–‡ä»¶å†…å®¹çš„åŸºç¡€ä¸Šè¿½åŠ è¾“å…¥è€Œä¸æ˜¯è¦†ç›–<sup class="footnote-ref" id="fnref:tee-https-www-ib"><a href="#fn:tee-https-www-ib">1</a></sup>ã€‚</p>

<h2 id="teeçš„ä½¿ç”¨">teeçš„ä½¿ç”¨</h2>

<p>è¿˜æ˜¯å¾—å®é™…ä½¿ç”¨ä½¿ç”¨æ‰èƒ½æ„Ÿå—å®ƒçš„åŠŸèƒ½ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ tee log.txt
<span class="nb">test</span>
<span class="nb">test</span>
åŸæ¥å¦‚æ­¤
åŸæ¥å¦‚æ­¤
^C
$ cat log.txt
<span class="nb">test</span>
åŸæ¥å¦‚æ­¤
$ tee -a log.txt
ç”Ÿæ´»å¦‚æ­¤å¤šå½©
ç”Ÿæ´»å¦‚æ­¤å¤šå½©
^C
$ cat log.txt
<span class="nb">test</span>
åŸæ¥å¦‚æ­¤
ç”Ÿæ´»å¦‚æ­¤å¤šå½©
$ tee
hah
hah
^C</code></pre></div>
<ol>
<li>tee å‘½ä»¤æŒ‡å®šæ–‡ä»¶ <code>log.txt</code>ï¼Œè¾“å…¥å†…å®¹æ•²å›è½¦å°±ä¼šæ‰“å°è¾“å…¥çš„å†…å®¹ï¼Œæ¯”å¦‚ <code>test</code> å’Œ <code>åŸæ¥å¦‚æ­¤</code>ï¼ŒCTRL + c é€€å‡ºå‘½ä»¤ï¼Œç”¨ cat å‘½ä»¤æŸ¥çœ‹ <code>log.txt</code> çš„å†…å®¹ä¸è¾“å…¥çš„å†…å®¹ä¸€è‡´ã€‚</li>
<li>åŠ å…¥ <code>-a</code> é€‰é¡¹ï¼Œå°±ä¼šåœ¨æŒ‡å®šæ–‡ä»¶è¿½åŠ è¾“å…¥çš„å†…å®¹ï¼Œæ¯”å¦‚ <code>ç”Ÿæ´»å¦‚æ­¤ç²¾å½©</code>ã€‚</li>
<li>ä¸æŒ‡å®šæ–‡ä»¶çš„è¯ï¼Œåªä¼šæ‰“å°è¾“å…¥çš„å†…å®¹ã€‚</li>
</ol>

<h1 id="pythonå®ç°tee">pythonå®ç°tee</h1>

<p>è¿™é‡Œåªå®ç°ä¸Šé¢ <a href="#teeçš„ä½¿ç”¨" target="_blank">teeçš„ä½¿ç”¨</a> å°èŠ‚ä¸­æµ‹è¯•çš„åŠŸèƒ½ã€‚</p>

<h2 id="æ–‡ä»¶å‡†å¤‡">æ–‡ä»¶å‡†å¤‡</h2>

<ol>
<li>æ–°å»ºæ–‡ä»¶ï¼š<code>touch tee</code></li>
<li>ä¸ºæ–‡ä»¶æ·»åŠ è¿è¡Œæƒé™ï¼š <code>chmod +x tee</code></li>

<li><p>æ–‡ä»¶ä¸­æŒ‡æ˜è§£é‡Šå™¨ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹åˆ° <code>tee</code> æ–‡ä»¶ä¸­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span></code></pre></div></li>

<li><p>æ–‡ä»¶ä¸­å¯¼å…¥å¿…è¦çš„åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">argparse</span></code></pre></div>
<ul>
<li>sys åº“ç”¨äºæ“ä½œæ ‡å‡†è¾“å…¥è¾“å‡ºï¼›</li>
<li>argparse åº“ç”¨äºè§£æå‘½ä»¤å‚æ•°ï¼Œè¿™ä¸ªåº“çš„åŸºæœ¬ä½¿ç”¨å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  <a href="/2018/09/13/python-argparse/" target="_blank">argparse åº“çš„ä½¿ç”¨</a></li>
</ul></li>
</ol>

<h2 id="è§£æå‘½ä»¤å‚æ•°">è§£æå‘½ä»¤å‚æ•°</h2>

<p>è¿™é‡Œå°†ä½¿ç”¨ argparse åº“è§£æå‚æ•°çš„æ“ä½œå°è£…ä¸ºå‡½æ•° <code>getargs</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getargs</span><span class="p">():</span>
    <span class="s2">&#34;&#34;&#34;è·å–å‘½ä»¤å‚æ•°
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&#34;The tee utility copies standard </span><span class="se">\
</span><span class="se"></span><span class="s2">                                                input to standard output, making a </span><span class="se">\
</span><span class="se"></span><span class="s2">                                                copy in zero or more files.  The </span><span class="se">\
</span><span class="se"></span><span class="s2">                                                output is unbuffered.&#34;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--version&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s2">&#34;v 1.0.0&#34;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="s1">&#39;--append&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&#34;store_true&#34;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Append the output to the files rather than overwriting them.&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;A pathname of an output file.&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<h2 id="teeåŠŸèƒ½å®ç°">teeåŠŸèƒ½å®ç°</h2>

<p>ç›´æ¥åœ¨ <code>__main__</code> ä¸­å®ç° tee çš„åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">getargs</span><span class="p">()</span>
    <span class="n">filemode</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span> <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">append</span> <span class="k">else</span> <span class="s1">&#39;w&#39;</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">file</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">filemode</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filemode</span> <span class="ow">is</span> <span class="s1">&#39;w&#39;</span><span class="p">:</span>
            <span class="n">filemode</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ä»£ç éå¸¸ç®€å•å°±å®ç°äº† tee çš„å®Œæ•´åŠŸèƒ½ï¼Œç›´æ¥æ“ä½œ <code>sys.stdin</code> ã€<code>sys.stdout</code><sup class="footnote-ref" id="fnref:python-tee-https"><a href="#fn:python-tee-https">2</a></sup> å’Œ æ–‡ä»¶<sup class="footnote-ref" id="fnref:tee-http-outofme"><a href="#fn:tee-http-outofme">3</a></sup>å³å¯ï¼æœ€ç»ˆä»£ç å¯å‚è€ƒï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/tee/tee" target="_blank">tools-with-script/tee/tee</a>ã€‚</p>

<h1 id="æµ‹è¯•">æµ‹è¯•</h1>
<div class="highlight"><pre class="chroma"><code class="language-Shell" data-lang="Shell">$ ./tee --help
usage: tee <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-a<span class="o">]</span> <span class="o">[</span>file <span class="o">[</span>file ...<span class="o">]]</span>

The tee utility copies standard input to standard output, making a copy in
zero or more files. The output is unbuffered.

positional arguments:
  file           A pathname of an output file.

optional arguments:
  -h, --help     show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -v, --version  show program<span class="s1">&#39;s version number and exit
</span><span class="s1">  -a, --append   Append the output to the files rather than overwriting them.
</span><span class="s1">$ ./tee
</span><span class="s1">12
</span><span class="s1">12
</span><span class="s1">$ ./tee log.txt
</span><span class="s1">where
</span><span class="s1">where
</span><span class="s1">who i am
</span><span class="s1">who i am
</span><span class="s1">$ cat log.txt
</span><span class="s1">where
</span><span class="s1">who i am
</span><span class="s1">$ ./tee -a log.txt
</span><span class="s1">that&#39;</span>s good
that<span class="s1">&#39;s good
</span><span class="s1">$ cat log.txt
</span><span class="s1">where
</span><span class="s1">who i am
</span><span class="s1">that&#39;</span>s good
$ ./tee -a log.txt log1.txt
Wonderful
Wonderful
$ cat log.txt
where
who i am
that<span class="err">&#39;</span>s good
Wonderful
$ cat log1.txt
Wonderful</code></pre></div>
<p>æµ‹è¯•æ­¥éª¤è§£é‡Šå¦‚ä¸‹ï¼š</p>

<ol>
<li>æ‰“å°å¸®åŠ©ä¿¡æ¯ï¼›</li>
<li>ä¸æŒ‡å®šä»»ä½•å‚æ•°ï¼Œåªä¼šå°†æ ‡å‡†è¾“å…¥æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼›</li>
<li>æŒ‡å®šæ–‡ä»¶ <code>log.txt</code>ï¼Œæ ‡å‡†è¾“å…¥åˆ†åˆ«è¾“å…¥ <code>where</code> å’Œ <code>who i am</code>ï¼Œæ ‡å‡†è¾“å‡ºä¹Ÿåˆ†åˆ«æ‰“å°äº†ï¼›</li>
<li>æŸ¥çœ‹ <code>log.txt</code> å†…å®¹ä¸ä¸Šä¸€æ­¥çš„æ ‡å‡†è¾“å…¥ä¸€è‡´ï¼›</li>
<li>æŒ‡å®šæ–‡ä»¶ <code>log.txt</code>å¹¶æŒ‡å®šä¸ºè¿½åŠ æ¨¡å¼ï¼Œæ ‡å‡†è¾“å…¥ <code>that's good</code> ï¼Œæ ‡å‡†è¾“å‡ºæ­£å¸¸æ˜¾ç¤º <code>that's good</code>ï¼›</li>
<li>æŸ¥çœ‹ <code>log.txt</code> å†…å®¹æ˜¯åœ¨åŸæ¥çš„å†…å®¹ä¸Šè¿½åŠ äº†ä¸Šä¸€æ­¥è¾“å…¥çš„ <code>that's good</code>ï¼›</li>
<li>æŒ‡å®šä¸¤ä¸ªæ–‡ä»¶ <code>log.txt</code> å’Œ <code>log1.txt</code>ï¼Œå¹¶æŒ‡å®šä¸ºè¿½åŠ æ¨¡å¼ï¼Œæ ‡å‡†è¾“å…¥ <code>Wonderful</code>ï¼Œæ ‡å‡†è¾“å‡ºæ­£å¸¸æ‰“å°ï¼›</li>
<li>æŸ¥çœ‹ <code>log.txt</code> å†…å®¹æ˜¯åœ¨åŸæ¥çš„å†…å®¹ä¸Šè¿½åŠ äº†ä¸Šä¸€æ­¥è¾“å…¥çš„ <code>that's good</code>ï¼Œè€Œæ–°æ–‡ä»¶ <code>log1.txt</code> å†…å®¹ä¸ºä¸Šä¸€æ­¥çš„ <code>Wonderful</code>ï¼›</li>
</ol>
<div class="footnotes">

<hr />

<ol>
<li id="fn:tee-https-www-ib"><a href="https://www.ibm.com/support/knowledgecenter/zh/ssw_aix_71/com.ibm.aix.cmds5/tee.htm" target="_blank">tee å‘½ä»¤</a> <a class="footnote-return" href="#fnref:tee-https-www-ib"><sup>[return]</sup></a></li>
<li id="fn:python-tee-https"><a href="https://sparkydogx.github.io/2018/08/08/python-tee/" target="_blank">ä½¿ç”¨pythonå®ç°teeçš„æ•ˆæœ</a> <a class="footnote-return" href="#fnref:python-tee-https"><sup>[return]</sup></a></li>
<li id="fn:tee-http-outofme"><a href="http://outofmemory.cn/code-snippet/11733/achieve-tee-command" target="_blank">å®ç°teeå‘½ä»¤</a> <a class="footnote-return" href="#fnref:tee-http-outofme"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>zip æ–‡ä»¶æš´ç ´</title>
			<link>https://www.smslit.top/2018/10/23/crack-zip-hacker/</link>
			<pubDate>Tue, 23 Oct 2018 17:00:50 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/23/crack-zip-hacker/</guid>
			<description>&lt;p&gt;2007å¹´å¹´åˆï¼Œç¾å›½å¾·å…‹è¨æ–¯å·çš„å¸ƒæœ—æ–¯ç»´å°”å¸‚çš„ç¨‹åºå‘˜ Albert Castillo ååŠ©è­¦æ–¹è°ƒæŸ¥ John Craig Zimmerman æ¶‰å«Œæ‹¥æœ‰å’Œåˆ¶é€ å„¿ç«¥è‰²æƒ…ç‰©å“çš„æ¡ˆä»¶ï¼Œè€Œ Castillo å°±æ˜¯ä½¿ç”¨&lt;strong&gt;å­—å…¸å¼æ”»å‡»æŠ€æœ¯&lt;/strong&gt;&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:https-baike-baid&#34;&gt;&lt;a href=&#34;#fn:https-baike-baid&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;è§£å¯†äº†å«Œç–‘äººç”µè„‘ä¸­çš„zipå‹ç¼©æ–‡ä»¶ï¼Œä»è€Œå¾—åˆ°å„¿ç«¥è‰²æƒ…å›¾ç‰‡ç­‰è¯æ®ï¼Œå¾—ä»¥ç»“æŸæ¡ˆä»¶ã€‚æœ¬æ–‡åé‡Œå°±ç®€å•ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ python3 è¿›è¡Œå­—å…¸å¼ç ´è§£åŠ å¯†zipæ–‡ä»¶çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181022154020132354092.png&#34; alt=&#34;20181022154020132354092.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>2007å¹´å¹´åˆï¼Œç¾å›½å¾·å…‹è¨æ–¯å·çš„å¸ƒæœ—æ–¯ç»´å°”å¸‚çš„ç¨‹åºå‘˜ Albert Castillo ååŠ©è­¦æ–¹è°ƒæŸ¥ John Craig Zimmerman æ¶‰å«Œæ‹¥æœ‰å’Œåˆ¶é€ å„¿ç«¥è‰²æƒ…ç‰©å“çš„æ¡ˆä»¶ï¼Œè€Œ Castillo å°±æ˜¯ä½¿ç”¨<strong>å­—å…¸å¼æ”»å‡»æŠ€æœ¯</strong><sup class="footnote-ref" id="fnref:https-baike-baid"><a href="#fn:https-baike-baid">1</a></sup>è§£å¯†äº†å«Œç–‘äººç”µè„‘ä¸­çš„zipå‹ç¼©æ–‡ä»¶ï¼Œä»è€Œå¾—åˆ°å„¿ç«¥è‰²æƒ…å›¾ç‰‡ç­‰è¯æ®ï¼Œå¾—ä»¥ç»“æŸæ¡ˆä»¶ã€‚æœ¬æ–‡åé‡Œå°±ç®€å•ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ python3 è¿›è¡Œå­—å…¸å¼ç ´è§£åŠ å¯†zipæ–‡ä»¶çš„æ–¹æ³•ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181022154020132354092.png" alt="20181022154020132354092.png" /></p>

<h1 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h1>

<h2 id="åŠ å¯†ç çš„zipæ–‡ä»¶">åŠ å¯†ç çš„zipæ–‡ä»¶</h2>

<p>é¦–å…ˆå¾—å‡†å¤‡ä¸€ä¸ªåŠ å¯†ç çš„ zip æ–‡ä»¶ï¼Œä»¥ macOS ä¸ºä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ <code>zip</code> å‘½ä»¤è¿›è¡Œå‹ç¼©å¹¶åŠ å¯†ç ï¼Œæ¯”å¦‚è¦å°† <code>demo.md</code> å‹ç¼©ä¸º <code>demo.zip</code>ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ zip -e demo.zip demo.md
Enter password:
Verify password:
updating: demo.md <span class="o">(</span>stored <span class="m">0</span>%<span class="o">)</span></code></pre></div>
<p>è¾“å…¥å¯†ç å’Œç¡®è®¤å¯†ç ï¼Œå³å¯å®ŒæˆåŠ å¯†ç çš„å‹ç¼©ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨å¯†ç æ˜¯ 4 ä½çš„ï¼Œä¸º <strong>6556</strong>ï¼Œä¸è‡ªå·±åšå‹ç¼©åŒ…çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨å‹ç¼©çš„ zip å‹ç¼©åŒ…ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sharedemo.zip" target="_blank">demo.zip</a></p>

<h2 id="äº†è§£-zipfile-åº“">äº†è§£ zipfile åº“</h2>

<p>æœ¬æ–‡ä½¿ç”¨ zipfile åº“æ“ä½œå‹ç¼©æ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå†…å»ºçš„ python åº“ï¼Œä¸éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œè¿™ä¸€å°èŠ‚åœ¨ ipython ç¯å¢ƒä¸‹ç®€å•äº†è§£ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ã€‚å‘½ä»¤è¡Œä¸­è¾“å…¥ <code>ipython</code> å›è½¦å³å¯è¿›å…¥ python äº¤äº’ç¯å¢ƒï¼š</p>

<p>å¯¼å…¥ zipfile åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">zipfile</span></code></pre></div>
<h3 id="æ‰“å¼€å‹ç¼©åŒ…">æ‰“å¼€å‹ç¼©åŒ…</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">zFile</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="s1">&#39;demo.zip&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="è§£å‹å‹ç¼©åŒ…">è§£å‹å‹ç¼©åŒ…</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">()</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">RuntimeError</span>                              <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="mi">24</span><span class="n">da26377a5e</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">()</span>
<span class="o">...</span>
<span class="ne">RuntimeError</span><span class="p">:</span> <span class="n">File</span> <span class="o">&lt;</span><span class="n">ZipInfo</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;demo.md&#39;</span> <span class="n">filemode</span><span class="o">=</span><span class="s1">&#39;-rw-r--r--&#39;</span> <span class="n">file_size</span><span class="o">=</span><span class="mi">17</span> <span class="n">compress_size</span><span class="o">=</span><span class="mi">29</span><span class="o">&gt;</span> <span class="ow">is</span> <span class="n">encrypted</span><span class="p">,</span> <span class="n">password</span> <span class="n">required</span> <span class="k">for</span> <span class="n">extraction</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æç¤ºï¼Œå› ä¸ºæˆ‘ä»¬æµ‹è¯•ç”¨çš„ <code>demo.zip</code> æ˜¯æˆ‘ä»¬åŠ äº†å¯†ç çš„ï¼Œæ‰€ä»¥éœ€è¦å¯†ç ã€‚<code>extractall</code> æ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•° <code>pwd</code> æŒ‡æ˜å¯†ç ï¼Œç”¨æ­£ç¡®å¯†ç è¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;6556&#39;</span><span class="p">)</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span>                                 <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">4</span><span class="o">-</span><span class="n">f057151f05c2</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;6556&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">pwd</span><span class="p">:</span> <span class="n">expected</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">got</span> <span class="nb">str</span></code></pre></div>
<p>æŠ›å‡ºäº†ä¸€ä¸ª <code>TypeError</code> ç±»å‹é”™è¯¯çš„å¼‚å¸¸ï¼Œçœ‹æç¤ºæ˜¯éœ€è¦å¯†ç æ˜¯ <code>bytes</code>ï¼Œé‚£è¿›è¡Œè½¬ç <sup class="footnote-ref" id="fnref:Zipfile-Method-d"><a href="#fn:Zipfile-Method-d">2</a></sup>è¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;6556&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span></code></pre></div>
<p>æ²¡æœ‰äº†å¼‚å¸¸æˆ–é”™è¯¯æç¤ºï¼Œè¯´æ˜è§£å‹æˆåŠŸäº†ï¼æˆ‘ä»¬å†è¯•ä¸€ä¸ªé”™è¯¯å¯†ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;5555&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="ne">RuntimeError</span>                              <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="mi">260</span><span class="n">b36a163cd</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">pwd</span><span class="o">=</span><span class="s1">&#39;5555&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>

<span class="ne">RuntimeError</span><span class="p">:</span> <span class="n">Bad</span> <span class="n">password</span> <span class="k">for</span> <span class="nb">file</span> <span class="o">&lt;</span><span class="n">ZipInfo</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;demo.md&#39;</span> <span class="n">filemode</span><span class="o">=</span><span class="s1">&#39;-rw-r--r--&#39;</span> <span class="n">file_size</span><span class="o">=</span><span class="mi">17</span> <span class="n">compress_size</span><span class="o">=</span><span class="mi">29</span><span class="o">&gt;</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°å¦‚æœå¯†ç é”™è¯¯ä¼šæç¤ºå¯†ç ä¸å¯¹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨<code>try-except</code>è°ƒç”¨ <code>extractall</code> æ–¹æ³•éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œå½¢å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">zipfile</span>

<span class="n">zFile</span> <span class="o">=</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="s1">&#39;demo.zip&#39;</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">zFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">pwd</span><span class="o">=</span><span class="n">key</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;find password -&gt; {key}&#39;</span><span class="p">)</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;bad password&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="æ£€æŸ¥æ˜¯å¦åŠ å¯†">æ£€æŸ¥æ˜¯å¦åŠ å¯†</h3>

<p>æ£€æŸ¥å‹ç¼©åŒ…æ˜¯å¦åŠ å¯†è¿™ä¹Ÿæ˜¯å¿…è¦çš„ï¼Œè¿™é‡Œä½¿ç”¨ <code>infolist</code> æ–¹æ³•å¯ä»¥æŸ¥çœ‹åŠ å¯†æ–‡ä»¶ä¿¡æ¯<sup class="footnote-ref" id="fnref:How-to-check-if"><a href="#fn:How-to-check-if">3</a></sup>ï¼Œä»è€ŒçŸ¥é“æ˜¯å¦åŠ å¯†ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">zFile</span><span class="o">.</span><span class="n">infolist</span><span class="p">():</span>
    <span class="o">...</span><span class="p">:</span>     <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">flag_bits</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">:</span>
    <span class="o">...</span><span class="p">:</span>         <span class="k">print</span><span class="p">(</span><span class="s1">&#39;is encrypted&#39;</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span>
<span class="ow">is</span> <span class="n">encrypted</span></code></pre></div>
<h2 id="å¯†ç å­—å…¸">å¯†ç å­—å…¸</h2>

<p>è¿™é‡Œä½¿ç”¨ <a href="/2018/10/21/unzip-dict-hacker/" target="_blank">python3 ç”Ÿæˆå¯†ç å­—å…¸</a> ä¸€æ–‡ä¸­å®ç°çš„ <a href="https://github.com/smslit/tools-with-script/blob/master/keykey/keykey" target="_blank">keykey</a> å·¥å…·ç”Ÿæˆæ•°å­—ç»„æˆçš„4ä½å¯†ç å­—å…¸ï¼Œä½¿ç”¨keykeyå·¥å…·åœ¨å½“å‰ç›®å½•ç”Ÿæˆå¯†ç å­—å…¸æ–‡ä»¶ <code>keys.dict</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 keykey <span class="m">4</span> <span class="m">4</span> -c <span class="s1">&#39;0123456789&#39;</span> -o <span class="s1">&#39;keys.dict&#39;</span>
<span class="o">[</span>+<span class="o">]</span> å·²ç”Ÿæˆ <span class="m">4</span> ~ <span class="m">4</span> ä½å¯†ç å­—å…¸ <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> å·²ä¿å­˜å¯†ç å­—å…¸åˆ° /Users/5km/Documents/workspace/python/tools-with-script/crackzip/keys.dict <span class="o">[</span>+<span class="o">]</span></code></pre></div>
<p>æœ€ç»ˆç”Ÿæˆå¯†ç å­—å…¸æ–‡ä»¶ <a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/share/keys.dict" target="_blank"><strong>keys.dict</strong></a> ä¸­ï¼Œæ¯è¡Œä¸€ä¸ªå¯†ç ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018102315402664999086.png" alt="2018102315402664999086.png" /></p>

<h1 id="å®ç°">å®ç°</h1>

<p>æ–°å»º <code>crackzip</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ŒæŒ‡æ˜è„šæœ¬è§£é‡Šå™¨å’Œå¯¼å…¥ <code>zipfile</code> åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">argparse</span></code></pre></div>
<p>ä¸ºæ–‡ä»¶ `` æ·»åŠ è¿è¡Œæƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ chmod +x crackzip</code></pre></div>
<p>ä¸ºäº†ä½¿ç¨‹åºæ¨¡å—åŒ–ï¼Œéœ€è¦å¯¹ä¸€äº›æ“ä½œè¿›è¡Œå°è£…ã€‚</p>

<h2 id="ç ´è§£æ“ä½œ">ç ´è§£æ“ä½œ</h2>

<p>ç ´è§£æ“ä½œå°è£…å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">crackzipfile</span><span class="p">(</span><span class="n">zipFile</span><span class="p">,</span> <span class="n">password</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;å°è¯•ç ´è§£ zip æ–‡ä»¶
</span><span class="s2">    Args:
</span><span class="s2">        zipFile: å¾…è§£å‹ zip å®ä¾‹
</span><span class="s2">        password: å¯†ç 
</span><span class="s2">    Return:
</span><span class="s2">        å¦‚æœç ´è§£è§£å‹æˆåŠŸè¿”å› Trueï¼Œå¦‚æœå‡ºç°å¼‚å¸¸è¿”å› Falseï¼Œè¯´æ˜å¯†ç é”™è¯¯
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">zipFile</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="n">pwd</span><span class="o">=</span><span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf8&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">password</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span></code></pre></div>
<p>å¦‚æœå¯†ç æ­£ç¡®å°±ä¼šè¿”å›å¯†ç ï¼Œåä¹‹è¿”å› <code>None</code>ã€‚</p>

<h2 id="åˆ¤æ–­æ˜¯å¦åŠ å¯†">åˆ¤æ–­æ˜¯å¦åŠ å¯†</h2>

<p>ä½¿ç”¨ <a href="#æ£€æŸ¥æ˜¯å¦åŠ å¯†" target="_blank">æ£€æŸ¥æ˜¯å¦åŠ å¯†</a> å°èŠ‚ä¸­çš„æ–¹æ³•ï¼Œå°è£…ä¸º <code>is_encrypted</code>æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">is_encrypted</span><span class="p">(</span><span class="n">zipFile</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;æ£€æŸ¥ zip æ–‡ä»¶æ˜¯å¦åŠ å¯†
</span><span class="s2">    Args:
</span><span class="s2">        zipFile: å¾…è§£å‹ zip å®ä¾‹
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">zipFile</span><span class="o">.</span><span class="n">infolist</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">flag_bits</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span></code></pre></div>
<h2 id="è·å–å‘½ä»¤å‚æ•°">è·å–å‘½ä»¤å‚æ•°</h2>

<p>ä½¿ç”¨ <code>argparse</code> åº“è§£æå‘½ä»¤å‚æ•°ï¼Œè¿™é‡Œä¹Ÿè¿›è¡Œå°è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getargs</span><span class="p">():</span>
    <span class="s2">&#34;&#34;&#34; è·å–å‘½ä»¤è¡Œå‚æ•°
</span><span class="s2">    Return:
</span><span class="s2">        è¿”å›å‘½ä»¤è¡Œå‚æ•°è§£æç»“æœ
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;æš´åŠ›ç ´è§£ zip æ–‡ä»¶çš„å¯†ç &#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;zfile&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡æ˜è¦ç ´è§£çš„ zip æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯å¤šä¸ª&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;dict&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šä½¿ç”¨çš„å¯†ç è¯å…¸&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<p>é…ç½®äº†ä¸¤ä¸ªå ä½å‚æ•°ï¼Œè°ƒç”¨å‘½ä»¤æ—¶ï¼Œå¿…é¡»æŒ‡å®š zip æ–‡ä»¶å’Œå¯†ç å­—å…¸æ–‡ä»¶ã€‚</p>

<h2 id="ä¸»å‡½æ•°">ä¸»å‡½æ•°</h2>

<p>æ•´ä¸ªç ´è§£æµç¨‹å°è£…åˆ° <code>main</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">getargs</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">zfile</span><span class="p">)</span> <span class="k">as</span> <span class="n">zFile</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_encrypted</span><span class="p">(</span><span class="n">zFile</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;{args.zfile} æœªåŠ å¯†ï¼&#39;</span><span class="p">)</span>
            <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">dict</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">password</span> <span class="o">=</span> <span class="n">crackzipfile</span><span class="p">(</span><span class="n">zFile</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">password</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[+] å¯†ç æ˜¯ {password} [+]&#39;</span><span class="p">)</span>
                    <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span></code></pre></div>
<p>é¦–å…ˆè·å–å‘½ä»¤å‚æ•°ï¼Œå› ä¸ºè¦ç”¨åˆ° zip æ–‡ä»¶å’Œå¯†ç å­—å…¸æ–‡ä»¶çš„è·¯å¾„ï¼Œæ‰“å¼€ zip æ–‡ä»¶ï¼Œç„¶ååˆ¤æ–­æ˜¯å¦æ˜¯åŠ å¯†çš„ï¼Œå¦‚æœä¸æ˜¯åŠ å¯†çš„å°±æ‰“å°æç¤ºä¿¡æ¯ï¼Œå¹¶ç»“æŸç¨‹åºï¼›å¦‚æœæ˜¯åŠ å¯†çš„ï¼Œå°±è¯»å–å¯†ç å­—å…¸ä¸­çš„å¯†ç å°è¯•è§£å‹ï¼Œå¦‚æœæ‰¾åˆ°æ­£ç¡®å¯†ç ï¼Œæ‰“å°ä¿¡æ¯å¹¶ç»“æŸç¨‹åºã€‚</p>

<p>ç›´æ¥åœ¨æ‰§è¡Œ <code>main</code> å³å¯è¿è¡Œç¨‹åºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></code></pre></div>
<p>å®Œæ•´ä»£ç å‚è€ƒï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/crackzip/crackzip" target="_blank">tools-with-script/crackzip/crackzip</a></p>

<h1 id="æµ‹è¯•">æµ‹è¯•</h1>

<p>ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåŠ å¯†çš„ zip æ–‡ä»¶ <code>demo.zip</code> å’Œä¸€ä¸ªæ²¡æœ‰åŠ å¯†çš„ zip æ–‡ä»¶ <code>demo1.zip</code>ï¼Œæµ‹è¯•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./crackzip -h
usage: crackzip <span class="o">[</span>-h<span class="o">]</span> zfile dict

æš´åŠ›ç ´è§£ zip æ–‡ä»¶çš„å¯†ç 

positional arguments:
  zfile       æŒ‡æ˜è¦ç ´è§£çš„ zip æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯å¤šä¸ª
  dict        æŒ‡å®šä½¿ç”¨çš„å¯†ç è¯å…¸

optional arguments:
  -h, --help  show this <span class="nb">help</span> message and <span class="nb">exit</span>
$ ./crackzip demo.zip keys.dict
<span class="o">[</span>+<span class="o">]</span> å¯†ç æ˜¯ <span class="m">6556</span> <span class="o">[</span>+<span class="o">]</span>
$ ./crackzip demo1.zip keys.dict
demo1.zip æœªåŠ å¯†ï¼</code></pre></div>
<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>é€šè¿‡ä½¿ç”¨ zipfile åº“å’Œ argparse åº“ç®€å•å®ç°äº†ç ´è§£ zip æ–‡ä»¶å¯†ç çš„å·¥å…·ï¼Œä¹Ÿç®€å•äº†è§£äº†å­—å…¸å¼ç ´è§£å¯†ç çš„åŸºæœ¬åŸç†ï¼Œè¿™ç§ç ´è§£åŸç†é€‚ç”¨å¤§éƒ¨åˆ†çš„å¯†ç ç ´è§£å·¥ä½œï¼Œä½†æœ‰æ—¶ä¹Ÿå¿…é¡»è€ƒè™‘æ‰€éœ€æ—¶é—´çš„åˆç†æ€§ã€‚</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:https-baike-baid">å­—å…¸å¼æ”»å‡»æ˜¯ä¸€ç§ç ´è§£å¯†ç çš„æ–¹æ³•ã€‚æ˜¯æŒ‡åœ¨ç ´è§£å¯†ç æˆ–å¯†é’¥æ—¶ï¼Œé€ä¸€å¿è¯•ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸ä¸­çš„å•è¯æˆ–çŸ­è¯­çš„æ”»å‡»æ–¹å¼ã€‚â€”â€”<a href="https://baike.baidu.com/item/å­—å…¸å¼æ”»å‡»" target="_blank"><strong>å­—å…¸å¼æ”»å‡»æŠ€æœ¯</strong></a> <a class="footnote-return" href="#fnref:https-baike-baid"><sup>[return]</sup></a></li>
<li id="fn:Zipfile-Method-d"><a href="https://stackoverflow.com/questions/33577116/zipfile-method-doesnt-works" target="_blank">Zipfile Method doesn&rsquo;t works</a> <a class="footnote-return" href="#fnref:Zipfile-Method-d"><sup>[return]</sup></a></li>
<li id="fn:How-to-check-if"><a href="https://stackoverflow.com/questions/12038446/how-to-check-if-a-zip-file-is-encrypted-using-pythons-standard-library-zipfile" target="_blank">How to check if a zip file is encrypted using python&rsquo;s standard library zipfile?</a> <a class="footnote-return" href="#fnref:How-to-check-if"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>python3 ç”Ÿæˆå¯†ç å­—å…¸</title>
			<link>https://www.smslit.top/2018/10/21/unzip-dict-hacker/</link>
			<pubDate>Sun, 21 Oct 2018 06:58:33 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/21/unzip-dict-hacker/</guid>
			<description>&lt;p&gt;é»‘å®¢ç ´è§£å¯†ç é€šå¸¸ä¼šç”¨åˆ°å¯†ç å­—å…¸&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:https-baike-baid&#34;&gt;&lt;a href=&#34;#fn:https-baike-baid&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼Œç½‘ä¸Šä¼šçœ‹åˆ°å„ç§å„æ ·çš„å¯†ç ç”Ÿæˆå™¨ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±ä¸€èµ·ç”¨ python3 å®ç°ä¸€ä¸ªç®€å•çš„å¯†ç ç”Ÿæˆå™¨å§ï¼Œå°±å«å®ƒ &lt;strong&gt;keykey&lt;/strong&gt; å§ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181021154012962176683.png&#34; alt=&#34;20181021154012962176683.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>é»‘å®¢ç ´è§£å¯†ç é€šå¸¸ä¼šç”¨åˆ°å¯†ç å­—å…¸<sup class="footnote-ref" id="fnref:https-baike-baid"><a href="#fn:https-baike-baid">1</a></sup>ï¼Œç½‘ä¸Šä¼šçœ‹åˆ°å„ç§å„æ ·çš„å¯†ç ç”Ÿæˆå™¨ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±ä¸€èµ·ç”¨ python3 å®ç°ä¸€ä¸ªç®€å•çš„å¯†ç ç”Ÿæˆå™¨å§ï¼Œå°±å«å®ƒ <strong>keykey</strong> å§ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181021154012962176683.png" alt="20181021154012962176683.png" /></p>

<p>æœ¬æ–‡å®ç°çš„å¯†ç ç”Ÿæˆå™¨ï¼Œéå¸¸ç®€å•å’Œæš´åŠ›ï¼Œå…¶å®å°±æ˜¯ç©·ä¸¾<sup class="footnote-ref" id="fnref:Python-https-www"><a href="#fn:Python-https-www">2</a></sup>ï¼Œå“ˆå“ˆå“ˆï¼</p>

<h1 id="çŸ¥è¯†ç‚¹">çŸ¥è¯†ç‚¹</h1>

<ul>
<li><a href="https://docs.python.org/3.7/library/itertools.html#module-itertools" target="_blank">itertools</a>ï¼Œæ˜¯ python å†…å»ºåº“ï¼Œæä¾›äº†å¾ˆå¤šæ“ä½œè¿­ä»£å¯¹è±¡çš„å‡½æ•°æ¥å£ï¼Œæœ¬æ–‡ç”Ÿæˆå¯†ç ä¸»è¦ç”¨åˆ°çš„å°±æ˜¯ <code>product</code> æ–¹æ³•ã€‚</li>
<li><a href="https://docs.python.org/3.7/library/argparse.html#module-argparse" target="_blank">argparse</a>ï¼Œè¿™æ˜¯ç”¨äºè§£æå‘½ä»¤å‚æ•°çš„åº“ï¼Œpython å†…å»ºçš„ï¼Œ<a href="/2018/09/13/python-argparse/" target="_blank">argparse åº“çš„ä½¿ç”¨</a> ä»‹ç»äº†åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥äº†è§£ä¸‹ã€‚</li>
</ul>

<h1 id="å®ç°">å®ç°</h1>

<p>å› ä¸ºæš´åŠ›ç”Ÿæˆå¯†ç æ˜¯å¾ˆç®€å•çš„æ“ä½œï¼Œæ‰€ä»¥åªéœ€è·Ÿç€åé‡Œæ“ä½œå°±æ˜ç™½æ€ä¹ˆå®ç°äº†ã€‚</p>

<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>

<p>æœ¬æ–‡å®ç°ä½¿ç”¨çš„éƒ½æ˜¯ python3 å†…å»ºåº“ï¼Œæ‰€ä»¥ä¸éœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹åº“ã€‚</p>

<ol>
<li>æ–°å»ºè„šæœ¬æ–‡ä»¶<code>keykey</code>ï¼š <code>touch keykey</code></li>
<li>èµ‹äºˆæ–‡ä»¶è¿è¡Œæƒé™ï¼š<code>chmod +x keykey</code></li>

<li><p>ä¸ºè„šæœ¬æ–‡ä»¶æ³¨æ˜pythonè§£é‡Šå™¨ï¼Œæ–‡ä»¶ä¸­æ·»åŠ å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span></code></pre></div></li>

<li><p>å¯¼å…¥éœ€è¦ç”¨åˆ°çš„åº“ï¼Œæ–‡ä»¶ä¸­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">itertools</span></code></pre></div></li>
</ol>

<h2 id="ç”Ÿæˆå¯†ç åˆ—è¡¨">ç”Ÿæˆå¯†ç åˆ—è¡¨</h2>

<p>ä¸‹ä¸€æ­¥å®ç°å¯†ç åˆ—è¡¨ç”Ÿæˆçš„æ–¹æ³• <code>getkeyslist</code>ï¼Œæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getkeyslist</span><span class="p">(</span><span class="n">minlength</span><span class="p">,</span> <span class="n">maxlength</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="s1">&#39;0123456789&#39;</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;ç”Ÿæˆ minlength ~ maxlength ä½å¯†ç åˆ—è¡¨ï¼Œå¹¶è¿”å›åˆ—è¡¨
</span><span class="s2">    Args:
</span><span class="s2">        minlength: å¯†ç æœ€å°ä½æ•°
</span><span class="s2">        maxlength: å¯†ç æœ€å¤§ä½æ•°
</span><span class="s2">        choices: å€™é€‰å­—ç¬¦ï¼Œå¯†ç ä½¿ç”¨çš„å­—ç¬¦ä»å€™é€‰å­—ç¬¦ä¸­å¾—åˆ°
</span><span class="s2">    Returns:
</span><span class="s2">        keyslist: å¯†ç åˆ—è¡¨
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">if</span> <span class="n">choices</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">choices</span> <span class="o">=</span> <span class="s1">&#39;0123456789&#39;</span>
    <span class="n">keyslist</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">minlength</span><span class="p">,</span> <span class="n">maxlength</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">keyiter</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span><span class="n">choices</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">keyiter</span><span class="p">]</span>
        <span class="n">keyslist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[+] å·²ç”Ÿæˆ {minlength} ~ {maxlength} ä½å¯†ç å­—å…¸ [+]&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">keyslist</span></code></pre></div>
<p>å…¶ä¸­:</p>

<ul>
<li><p><code>itertools.product(choices, repeat=i)</code> ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¿­ä»£å™¨æ¯æ¬¡è¿­ä»£ä¼šä» <code>choices</code> ä¸­æå–å­—ç¬¦ç»„æˆåŒ…å« <code>i</code> ä¸ªå­—ç¬¦çš„ tuple ï¼Œæ¯ä¸ª tuple ä¸­çš„å…ƒç´ ä¸ºå•ä¸ªå­—ç¬¦ï¼Œå¦‚ä¸‹çš„æ ·å­ï¼Œè¿­ä»£å™¨ä¼šæšä¸¾æ‰€æœ‰å¯èƒ½çš„ <code>i</code> ä¸ªå­—ç¬¦ç»„åˆã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">)</span></code></pre></div></li>

<li><p><code>[''.join(c)+'\n' for c in keyiter]</code> ä¼šä½¿ç”¨å­—ç¬¦ä¸²çš„ <code>join</code> æ–¹æ³•å°†è¿­ä»£ç”Ÿæˆçš„ tuple ä¸­çš„å­—ç¬¦ç»ƒæˆå­—ç¬¦ä¸²ç”Ÿæˆé•¿åº¦ä¸º ä¸Šè¿°çš„ <code>i</code> é•¿åº¦çš„å¯†ç ã€‚</p></li>

<li><p>for å¾ªç¯æ˜¯ä¸ºäº†ç”Ÿæˆä½æ•°åœ¨ minlength ~ maxlength ä¹‹é—´å·¦å³å¯èƒ½çš„ç»„åˆçš„å¯†ç ã€‚</p></li>
</ul>

<h2 id="ä¿å­˜å¯†ç åˆ—è¡¨">ä¿å­˜å¯†ç åˆ—è¡¨</h2>

<p>ç”Ÿæˆäº†å¯†ç åˆ—è¡¨è¿˜éœ€è¦ä¿å­˜çš„ï¼Œæ‰€ä»¥å°è£…ä¸€ä¸ªä¿å­˜å¯†ç åˆ—è¡¨çš„å‡½æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">save_keys_dict</span><span class="p">(</span><span class="n">keyslist</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;ä¿å­˜å¯†ç å­—å…¸
</span><span class="s2">    Args:
</span><span class="s2">        keyslist: å¯†ç åˆ—è¡¨
</span><span class="s2">        outfile: è¦ä¿å­˜çš„å¯†ç å­—å…¸æ–‡ä»¶
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">homepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">)</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">homepath</span><span class="p">,</span> <span class="s1">&#39;Desktop/keys.txt&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">outfile</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">keys</span> <span class="ow">in</span> <span class="n">keyslist</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">writelines</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;[+] å·²ä¿å­˜å¯†ç å­—å…¸åˆ° {outfile} [+]&#39;</span><span class="p">)</span></code></pre></div>
<p>è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå°±æ˜¯ä½¿ç”¨ <code>with</code> è¯­æ³•å®ç°å®‰å…¨çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œå°†å¯†ç åˆ—è¡¨å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼Œä¸ºäº†é˜²æ­¢æŒ‡å®šæ–‡ä»¶ä¸ºç©ºï¼Œè¿™é‡Œä¼šä½¿ç”¨ <code>~/Desktop/keys.txt</code> ã€‚</p>

<h2 id="è·å–å‘½ä»¤å‚æ•°">è·å–å‘½ä»¤å‚æ•°</h2>

<p>ä½¿ç”¨ <code>argparse</code> åº“è§£æå‘½ä»¤å‚æ•°ï¼Œè¿™é‡Œå°†ç›¸å…³æ“ä½œå°è£…åˆ°å‡½æ•° <code>getargs</code> ä¸­ï¼Œæœ€ç»ˆè¿”å›å‚æ•°ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getargs</span><span class="p">():</span>
    <span class="s2">&#34;&#34;&#34;è·å–å‘½ä»¤å‚æ•°
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;ç”¨äºç”ŸæˆæŒ‡å®šé•¿åº¦å’Œå­—ç¬¦ç©ºé—´çš„å¯†ç å­—å…¸&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;minlength&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;ç”¨äºæŒ‡å®šç”Ÿæˆå¯†ç çš„æœ€å°ä½æ•°&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;maxlength&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;ç”¨äºæŒ‡å®šç”Ÿæˆå¯†ç çš„æœ€å¤§ä½æ•°&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--outfile&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šå­—å…¸æ–‡ä»¶çš„ä¿å­˜è·¯å¾„&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span class="s1">&#39;--choices&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;0123456789&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šå­—ç¬¦ä¸²ï¼Œå¯†ç ä¸­çš„å­—ç¬¦ä»å­—ç¬¦ä¸²ä¸­é€‰æ‹©ï¼Œé»˜è®¤ä¸º &#34;0123456789&#34;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<p>å‘½ä»¤å‚æ•°è®¾è®¡è¯¦æƒ…å¦‚ä¸‹è¡¨ï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>ç±»å‹</th>
<th>æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td>minlength</td>
<td>int</td>
<td>ç”¨äºæŒ‡å®šç”Ÿæˆå¯†ç çš„æœ€å°ä½æ•°</td>
</tr>

<tr>
<td>maxlength</td>
<td>int</td>
<td>ç”¨äºæŒ‡å®šç”Ÿæˆå¯†ç çš„æœ€å¤§ä½æ•°</td>
</tr>

<tr>
<td>-o, &ndash;outfile</td>
<td>æ–‡ä»¶è·¯å¾„</td>
<td>æŒ‡å®šå­—å…¸æ–‡ä»¶çš„ä¿å­˜è·¯å¾„</td>
</tr>

<tr>
<td>-c, &ndash;choices</td>
<td>å­—ç¬¦ä¸²</td>
<td>æŒ‡å®šå­—ç¬¦ä¸²ï¼Œå¯†ç ä¸­çš„å­—ç¬¦ä»å­—ç¬¦ä¸²ä¸­é€‰æ‹©ï¼Œé»˜è®¤ä¸º &ldquo;0123456789&rdquo;</td>
</tr>
</tbody>
</table>

<h2 id="mainå®ç°">mainå®ç°</h2>

<p>æœ€ç»ˆæ•´åˆä¸€ä¸‹ï¼Œå®ç° mainï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">getargs</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">minlength</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="n">maxlength</span><span class="p">:</span>
        <span class="n">keyslist</span> <span class="o">=</span> <span class="n">getkeyslist</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">minlength</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">maxlength</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">keyslist</span> <span class="o">=</span> <span class="n">getkeyslist</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">maxlength</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">minlength</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
    <span class="n">save_keys_dict</span><span class="p">(</span><span class="n">keyslist</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">outfile</span><span class="p">)</span></code></pre></div>
<p>å…¶ä¸­ï¼Œ <code>if</code> æ˜¯ä¸ºäº†é˜²æ­¢ <code>minlength</code> æ¯” <code>minlength</code> å¤§çš„æƒ…å†µã€‚</p>

<p>å®Œæ•´ä»£ç å‚è€ƒï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/keykey/keykey" target="_blank">tools-with-script/keykey/keykey</a></p>

<h1 id="ä½¿ç”¨">ä½¿ç”¨</h1>

<h2 id="è·å–å·¥å…·å¸®åŠ©ä¿¡æ¯">è·å–å·¥å…·å¸®åŠ©ä¿¡æ¯</h2>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$  ./keykey -h
usage: keykey <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-o OUTFILE<span class="o">]</span> <span class="o">[</span>-c CHOICES<span class="o">]</span> minlength maxlength

ç”¨äºç”ŸæˆæŒ‡å®šé•¿åº¦å’Œå­—ç¬¦ç©ºé—´çš„å¯†ç å­—å…¸

positional arguments:
  minlength             ç”¨äºæŒ‡å®šç”Ÿæˆå¯†ç çš„æœ€å°ä½æ•°
  maxlength             ç”¨äºæŒ‡å®šç”Ÿæˆå¯†ç çš„æœ€å¤§ä½æ•°

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -o OUTFILE, --outfile OUTFILE
                        æŒ‡å®šå­—å…¸æ–‡ä»¶çš„ä¿å­˜è·¯å¾„
  -c CHOICES, --choices CHOICES
                        æŒ‡å®šå­—ç¬¦ä¸²ï¼Œå¯†ç ä¸­çš„å­—ç¬¦ä»å­—ç¬¦ä¸²ä¸­é€‰æ‹©ï¼Œé»˜è®¤ä¸º <span class="s2">&#34;0123456789&#34;</span></code></pre></div>
<h2 id="ç”Ÿæˆ-4-6-ä½æ•°å­—å¯†ç ">ç”Ÿæˆ 4ï½6 ä½æ•°å­—å¯†ç </h2>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./keykey <span class="m">4</span> <span class="m">6</span>
<span class="o">[</span>+<span class="o">]</span> å·²ç”Ÿæˆ <span class="m">4</span> ~ <span class="m">6</span> ä½å¯†ç å­—å…¸ <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> å·²ä¿å­˜å¯†ç å­—å…¸åˆ° /Users/5km/Desktop/keys.txt <span class="o">[</span>+<span class="o">]</span>
$ head -n <span class="m">5</span> /Users/5km/Desktop/keys.txt
<span class="m">0000</span>
<span class="m">0001</span>
<span class="m">0002</span>
<span class="m">0003</span>
<span class="m">0004</span></code></pre></div>
<h2 id="æŒ‡å®šå¯†ç å­—å…¸ä¿å­˜æ–‡ä»¶">æŒ‡å®šå¯†ç å­—å…¸ä¿å­˜æ–‡ä»¶</h2>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./keykey <span class="m">4</span> <span class="m">6</span> -o keys.txt
<span class="o">[</span>+<span class="o">]</span> å·²ç”Ÿæˆ <span class="m">4</span> ~ <span class="m">6</span> ä½å¯†ç å­—å…¸ <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> å·²ä¿å­˜å¯†ç å­—å…¸åˆ° /Users/5km/Documents/workspace/python/tools-with-script/keykey/keys.txt <span class="o">[</span>+<span class="o">]</span>
$ head -n <span class="m">5</span> keys.txt
<span class="m">0000</span>
<span class="m">0001</span>
<span class="m">0002</span>
<span class="m">0003</span>
<span class="m">0004</span></code></pre></div>
<h2 id="æŒ‡å®šå¯†ç å¯é€‰æ‹©å­—ç¬¦">æŒ‡å®šå¯†ç å¯é€‰æ‹©å­—ç¬¦</h2>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./keykey <span class="m">4</span> <span class="m">6</span> -o keys.txt -c <span class="s1">&#39;asdfghjkl&#39;</span>
<span class="o">[</span>+<span class="o">]</span> å·²ç”Ÿæˆ <span class="m">4</span> ~ <span class="m">6</span> ä½å¯†ç å­—å…¸ <span class="o">[</span>+<span class="o">]</span>
<span class="o">[</span>+<span class="o">]</span> å·²ä¿å­˜å¯†ç å­—å…¸åˆ° /Users/5km/Documents/workspace/python/tools-with-script/keykey/keys.txt <span class="o">[</span>+<span class="o">]</span>
$ head -n <span class="m">5</span> keys.txt
aaaa
aaas
aaad
aaaf
aaag</code></pre></div>
<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>ä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œåˆ°ç›®å‰å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„å¯†ç å­—å…¸ç”Ÿæˆå™¨ã€‚æœ¬æ–‡å¤ä¹ äº† <code>itertools</code> å’Œ <code>argparse</code> çš„çŸ¥è¯†å’Œéƒ¨åˆ†ä½¿ç”¨æ–¹æ³•ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:https-baike-baid">å¯†ç å­—å…¸ï¼Œæ˜¯é…åˆå¯†ç ç ´è¯‘è½¯ä»¶æ‰€ä½¿ç”¨çš„ã€‚å¯†ç å­—å…¸é‡ŒåŒ…æ‹¬è®¸å¤šäººä»¬ä¹ æƒ¯æ€§è®¾ç½®çš„å¯†ç ï¼Œè¿™æ ·å¯ä»¥æé«˜å¯†ç ç ´è¯‘è½¯ä»¶çš„å¯†ç ç ´è¯‘æˆåŠŸç‡å’Œå‘½ä¸­ç‡ï¼Œç¼©çŸ­å¯†ç ç ´è¯‘çš„æ—¶é—´ã€‚â€”â€” <a href="https://baike.baidu.com/item/å¯†ç å­—å…¸" target="_blank">å¯†ç å­—å…¸</a> <a class="footnote-return" href="#fnref:https-baike-baid"><sup>[return]</sup></a></li>
<li id="fn:Python-https-www"><a href="https://www.jianshu.com/p/3efd3197ab35" target="_blank">Python - è‡ªå¯¼è‡ªæ¼” å¯†ç å­—å…¸æš´åŠ›ç ´è§£</a> <a class="footnote-return" href="#fnref:Python-https-www"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>å›¾ä¸­è—(cÃ¡ng)è¯­</title>
			<link>https://www.smslit.top/2018/10/20/codeimg-python/</link>
			<pubDate>Sat, 20 Oct 2018 10:09:31 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/20/codeimg-python/</guid>
			<description>&lt;p&gt;ä»Šå¤©åˆ†äº«ä¸€ä¸ªå¥½ç©å·¥å…·ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å¾€å›¾ç‰‡ä¸­è—å…¥ä¿¡æ¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»è—æœ‰ä¿¡æ¯çš„å›¾ç‰‡ä¸­å°†ä¿¡æ¯æ‰¾å‡ºæ¥ã€‚ä¸“ä¸šåè¯çš„è¯ï¼Œè¿™å«å›¾ç‰‡éšå†™æŠ€æœ¯ï¼Œä½†æ— æ‰€è°“äº†ï¼Œæˆ‘ä»¬çŸ¥é“æ˜¯å’‹å›äº‹å„¿å°±å¥½ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ python3 å®ç°è¿™ä¸ªå·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181020154000344643954.png&#34; alt=&#34;20181020154000344643954.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©åˆ†äº«ä¸€ä¸ªå¥½ç©å·¥å…·ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å¾€å›¾ç‰‡ä¸­è—å…¥ä¿¡æ¯ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä»è—æœ‰ä¿¡æ¯çš„å›¾ç‰‡ä¸­å°†ä¿¡æ¯æ‰¾å‡ºæ¥ã€‚ä¸“ä¸šåè¯çš„è¯ï¼Œè¿™å«å›¾ç‰‡éšå†™æŠ€æœ¯ï¼Œä½†æ— æ‰€è°“äº†ï¼Œæˆ‘ä»¬çŸ¥é“æ˜¯å’‹å›äº‹å„¿å°±å¥½ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ python3 å®ç°è¿™ä¸ªå·¥å…·ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181020154000344643954.png" alt="20181020154000344643954.png" /></p>

<h1 id="åŸç†">åŸç†</h1>

<p>åœ¨å®ç°å·¥å…·ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹åŸç†ã€‚</p>

<h2 id="éšå†™æœ¯">éšå†™æœ¯</h2>

<blockquote>
<p>éšå†™æœ¯æ˜¯ä¸€é—¨å…³äºä¿¡æ¯éšè—çš„æŠ€å·§ä¸ç§‘å­¦ï¼Œæ‰€è°“ä¿¡æ¯éšè—æŒ‡çš„æ˜¯ä¸è®©é™¤é¢„æœŸçš„æ¥æ”¶è€…ä¹‹å¤–çš„ä»»ä½•äººçŸ¥æ™“ä¿¡æ¯çš„ä¼ é€’äº‹ä»¶æˆ–è€…ä¿¡æ¯çš„å†…å®¹ã€‚</p>

<p>â€”â€” <a href="https://zh.wikipedia.org/wiki/éšå†™æœ¯" target="_blank">éšå†™æœ¯</a> <a href="https://zh.wikipedia.org/wiki/Wikipedia:é¦–é¡µ" target="_blank">@ç»´åŸºç™¾ç§‘</a></p>
</blockquote>

<p>å¯ä»¥ç±»æ¯”ä¸€ä¸‹æ— çº¿ç”µï¼Œæ— çº¿ç”µä¼ é€’ä¿¡æ¯çš„åŸç†å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºï¼šå‘å°„ç«¯åœ¨è½½æ³¢ä¸Šæ³¨å…¥é«˜é¢‘ä¿¡å·ï¼Œè€Œæ¥æ”¶ç«¯æ”¶åˆ°ä¿¡å·åè§£æè½½æ³¢ä¸Šçš„é«˜é¢‘ä¿¡å·ï¼Œä»è€Œå®ç°ä¿¡æ¯çš„æ— çº¿ä¼ è¾“ï¼Œå…¶ä¸­è½½æ³¢çš„æ³¢é•¿è¿œå¤§äºè½½å…¥ä¿¡å·çš„æ³¢é•¿ã€‚åŒç†å›¾ç‰‡éšå†™æœ¯ä¸­å›¾ç‰‡å°±æ˜¯ä¿¡æ¯è½½ä½“æ–‡ä»¶ï¼Œè½½ä½“æ–‡ä»¶ï¼ˆcover fileï¼‰ç›¸å¯¹éšç§˜æ–‡ä»¶çš„å¤§å°ï¼ˆæŒ‡æ•°æ®å«é‡ï¼Œä»¥æ¯”ç‰¹è®¡ï¼‰è¶Šå¤§ï¼Œéšè—åè€…å°±è¶ŠåŠ å®¹æ˜“ã€‚</p>

<h2 id="æ•°æ®å­˜å‚¨">æ•°æ®å­˜å‚¨</h2>

<p>è¿™é‡Œé€‰æ‹©ä½å›¾å›¾ç‰‡ä½œä¸ºè½½ä½“ï¼Œä¸€å¼ 8ä½RGBçš„ JPG ä½å›¾ä¸­çš„ä¸€ä¸ªåƒç´ åŒ…å« Rã€Gã€B ä¸‰ä¸ªé€šé“çš„æ•°å€¼ï¼Œæ¯ä¸ªé€šé“æ•°å€¼ä¸º8ä½æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ <code>0b00000000</code>ï½<code>0b11111111</code> çš„æ•°å€¼ï¼Œæƒ³è±¡ä¸€ä¸‹å…¶ä¸­ä¸€ä¸ªé€šé“ï¼Œå°±ä»¥ R é€šé“æ¥è®²ï¼Œ<code>0b11101111</code> å’Œ <code>0b11101110</code> åªæ˜¯æœ€ä½ä½ä¸ä¸€æ ·ï¼Œå®é™…å›¾ç‰‡çš„è¡¨ç°ä¸Šï¼Œè¿™ç§å·®åˆ«è‚‰çœ¼å‡ ä¹æ˜¯æ— æ³•å¯Ÿè§‰çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨æ¯ä¸ªé€šé“çš„æœ€ä½ä½æ¥å­˜å‚¨ 1bit çš„æ•°æ®æ˜¯å¯è¡Œçš„<sup class="footnote-ref" id="fnref:https-zh-wikiped"><a href="#fn:https-zh-wikiped">1</a></sup>ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181020154001752117286.png" alt="20181020154001752117286.png" /></p>

<p>å¦‚æ­¤çš„è¯æ¯ä¸ªåƒç´ ä¸‰ä¸ªé€šé“å…±å¯ä»¥å­˜å‚¨ 3 bitsï¼Œé‚£å¦‚æœåƒ png å›¾ç‰‡ä¸€æ ·å†å¤šä¸€ä¸ª Alpha é€šé“ï¼ˆé€æ˜é€šé“ï¼‰ï¼Œå°±å¯ä»¥å­˜å‚¨ 4 bitsï¼Œä¸¤ä¸ªåƒç´ å°±å¯ä»¥å­˜å‚¨ä¸€ä¸ªå­—èŠ‚ï¼Œæ–¹ä¾¿å¤„ç†ã€‚å¦å¤–æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¿™é‡Œå­˜å‚¨å’Œè¯»å–å­—èŠ‚æ•°æ®å‡é‡‡ç”¨ <a href="https://baike.baidu.com/item/Little-Endian/4118225?fr=aladdin" target="_blank"><strong>Little-Endian</strong></a>æ–¹å¼<sup class="footnote-ref" id="fnref:BIG-ENDIAN"><a href="#fn:BIG-ENDIAN">2</a></sup>ï¼Œåé¢å†™ç¨‹åºçš„æ—¶å€™è¦æ¸…æ¥šï¼</p>

<h1 id="å®ç°">å®ç°</h1>

<p>åœ¨ <code>messageimage.py</code> æ–‡ä»¶ä¸­ä¸ºå›¾ç‰‡å¤„ç†å®ç°ä¸€ä¸ªç±» <code>MessageImage</code> ï¼Œç„¶åç¼–å†™ä¸€ä¸ª python è„šæœ¬å‘½ä»¤è¡Œå·¥å…·ï¼Œä¿å­˜ä¸ºæ–‡ä»¶ <code>codeimg</code>ã€‚</p>

<h2 id="messageimage-ç±»"><strong>MessageImage</strong> ç±»</h2>

<p>æœ¬æ–‡å®ç°çš„ç±»ä¸­ï¼Œæ¶‰åŠäº† <strong>pillow</strong> åº“çš„ä½¿ç”¨ï¼Œå­—ç¬¦ä¸²çš„ç¼–ç è½¬æ¢ç­‰çŸ¥è¯†ã€‚</p>

<h3 id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ</h3>

<p>å°èŠ‚ <a href="#æ•°æ®å­˜å‚¨" target="_blank">åŸç†-æ•°æ®å­˜å‚¨</a> ä¸­ä»‹ç»äº†éšå†™ä¿¡æ¯åœ¨å›¾ç‰‡ä¸­çš„å­˜å‚¨æ–¹å¼ï¼Œæ•°æ®å†™å…¥å’Œè¯»å–è¦å‚è€ƒè¿™ä¸ªåŸç†ï¼Œä½†æ˜¯è¿™é‡Œè¿˜éœ€è¦è€ƒè™‘ä¸¤ä¸ªé—®é¢˜ï¼Œé’ˆå¯¹è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œåˆ†åˆ«æå‡ºè§£å†³æ–¹æ³•ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä»£ç å®ç°çš„é—®é¢˜äº†ã€‚</p>

<h4 id="å›¾ç‰‡æ²¡æœ‰alphaé€šé“é—®é¢˜">å›¾ç‰‡æ²¡æœ‰alphaé€šé“é—®é¢˜</h4>

<p>å¯¹äºä¸å«é€æ˜é€šé“çš„ä½å›¾å›¾ç‰‡ï¼ˆæ¯”å¦‚jpgï¼‰æ¥è¯´ï¼Œå°‘ä¸€ä¸ª Alpha é€šé“ï¼Œé‚£ä¹ˆ <a href="#æ•°æ®å­˜å‚¨" target="_blank">åŸç†-æ•°æ®å­˜å‚¨</a> æåˆ°çš„å››é€šé“å­˜å‚¨æ–¹æ¡ˆæ˜¾ç„¶ç¼ºå°‘é€šé“ï¼Œå…¶å®è§£å†³å¾ˆç®€å•ï¼Œåªéœ€è¦ä½¿ç”¨ <strong>pillow</strong> åº“å°† jpg å›¾ç‰‡æ•°æ®è½¬æ¢ä¸ºå¸¦ alpha é€šé“çš„æ•°æ®å³å¯è¿›è¡Œï¼Œå¯ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•è½¬æ¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;demo.jpg&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGBA&#39;</span><span class="p">)</span></code></pre></div>
<p>ç›´æ¥è½¬æ¢ä¸º RGBA æ¨¡å¼å³å¯ã€‚</p>

<h4 id="æ€ä¹ˆåˆ¤æ–­å›¾ç‰‡æœ‰æ²¡æœ‰éšå†™ä¿¡æ¯é—®é¢˜">æ€ä¹ˆåˆ¤æ–­å›¾ç‰‡æœ‰æ²¡æœ‰éšå†™ä¿¡æ¯é—®é¢˜</h4>

<p>ä¸ºäº†åˆ¤æ–­å›¾ç‰‡æœ‰æ²¡æœ‰éšå†™ä¿¡æ¯ï¼Œè¿™é‡Œè®¾è®¡ä¸€ä¸ªå­—èŠ‚æ•°æ®åŒ…å­˜å‚¨åè®®ï¼Œåè®®å¾ˆç®€å•ï¼Œå¦‚ä¸‹è¡¨ï¼š</p>

<table>
<thead>
<tr>
<th>head</th>
<th>length</th>
<th>data</th>
</tr>
</thead>

<tbody>
<tr>
<td>0x5555AAAA</td>
<td>æ•°æ®é•¿åº¦</td>
<td>æ•°æ®</td>
</tr>

<tr>
<td>å  4 å­—èŠ‚</td>
<td>å  4 å­—èŠ‚</td>
<td>å  length å­—èŠ‚</td>
</tr>
</tbody>
</table>

<p>æœ€å¼€å§‹çš„4ä¸ªå­—èŠ‚ä¸ºæ ‡è®°ï¼Œå†ä¹‹åçš„å››å­—èŠ‚è¡¨ç¤ºå›¾ç‰‡ä¸­ä¿¡æ¯çš„å­—èŠ‚æ•°ç›®ï¼Œä¹‹ååˆ™æ˜¯ length ä¸ªå­—èŠ‚çš„ä¸»è¦æ•°æ®ã€‚æ‰€ä»¥åˆ¤æ–­æœ‰æ²¡æœ‰éšå†™ä¿¡æ¯çš„æµç¨‹åº”è¯¥æ˜¯ï¼š</p>

<ol>
<li>ä»å›¾ç‰‡ä¸­å‰16ä¸ªåƒç´ æ•°æ®ä¸­ï¼Œè§£æå‡º8ä¸ªå­—èŠ‚ï¼›</li>
<li>åˆ¤æ–­å‰4ä¸ªå­—èŠ‚ä¸é¢„è®¾çš„ head æ˜¯ä¸æ˜¯ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™è¯´æ˜æœ‰éšå†™ä¿¡æ¯ï¼›</li>
</ol>

<p>å½“ç„¶ï¼Œhead æ˜¯å¯ä»¥ä»»æ„å®šä¹‰çš„ï¼Œé€šè¿‡æ­¤æ–¹æ³•ï¼Œåˆ¤æ–­æœ‰æ²¡æœ‰éšå†™ä¿¡æ¯å‡ºé”™çš„æ¦‚ç‡ä¸ºï¼š</p>

<p>$$
p = \frac{1}{2^{32}} = 0.000000000232831
$$</p>

<h3 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h3>

<ol>
<li><p>è¿™é‡Œä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“æ˜¯å›¾ç‰‡å¤„ç†åº“ <strong>pillow</strong>ï¼Œå®‰è£…å¾ˆç®€å•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pip3 install pillow</code></pre></div></li>

<li><p>æ–°å»ºæ–‡ä»¶ <code>messageimage.py</code></p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ touch messageimage</code></pre></div></li>

<li><p>å¯¼å…¥éœ€è¦çš„åº“ï¼Œå‘æ–‡ä»¶ <code>messageimage.py</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span></code></pre></div></li>

<li><p>å£°æ˜ç±» MessageImageï¼Œæ–‡ä»¶ <code>messageimage.py</code> ä¸­æ·»åŠ :</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">MessageImage</span><span class="p">:</span>
    <span class="s2">&#34;&#34;&#34; MessageImage ç±»
</span><span class="s2">    åˆå§‹åŒ–åŠ è½½å›¾ç‰‡æˆ–è€…æ‰‹åŠ¨æ‰“å¼€å›¾ç‰‡ï¼Œå°†éšå†™ä¿¡æ¯å†™å…¥å›¾ç‰‡ï¼Œä¹Ÿå¯ä»¥è§£æå›¾ç‰‡ä¸­çš„éšå†™ä¿¡æ¯
</span><span class="s2">    Attributes:
</span><span class="s2">        image: æ‰“å¼€å›¾ç‰‡çš„ Image ç±»å‹å¯¹è±¡
</span><span class="s2">        pkghead: å†™å…¥å›¾ç‰‡éšå†™ä¿¡æ¯çš„å¤´æ ‡è®°ï¼Œå¯ä»¥åˆå§‹åŒ–æ—¶èµ‹å€¼
</span><span class="s2">    &#34;&#34;&#34;</span></code></pre></div>
<p>å‰©ä¸‹çš„å°±æ˜¯æ·»åŠ ç±»çš„æ–¹æ³•äº†ã€‚</p></li>
</ol>

<h3 id="å…¬å…±æ–¹æ³•å®ç°">å…¬å…±æ–¹æ³•å®ç°</h3>

<p>ä¸ºç±»å®ç°ä¸‹é¢å‡ ä¸ªå…¬å…±æ–¹æ³•ï¼š</p>

<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æè¿°</th>
<th>å‚æ•°</th>
<th>è¿”å›å€¼</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>__init__(self, imgpath, pkghead=None)</code></td>
<td>åˆå§‹åŒ–ç±»ï¼Œç”Ÿæˆ MessageImage å®ä¾‹</td>
<td><strong>imgpath</strong>ï¼šå›¾ç‰‡è·¯å¾„ï¼›<strong>pkghead</strong>ï¼šè‡ªå®šä¹‰åè®®å¤´</td>
<td>æ— </td>
</tr>

<tr>
<td><code>encode(self, info, save=True, show=False)</code></td>
<td>å°†æŒ‡å®šçš„éšå†™ä¿¡æ¯å†™å…¥å›¾ç‰‡</td>
<td><strong>info</strong>ï¼šéšå†™ä¿¡æ¯ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼›<strong>save</strong>ï¼šæ§åˆ¶æ˜¯å¦å°†å†™å…¥ä¿¡æ¯çš„å›¾ç‰‡è¿›è¡Œä¿å­˜(é»˜è®¤ <strong>True</strong>)ï¼›<strong>show</strong>ï¼šæ§åˆ¶æ˜¯å¦åœ¨å†™å…¥ä¿¡æ¯åæ˜¾ç¤ºç»“æœå›¾ç‰‡(é»˜è®¤ <strong>False</strong>)</td>
<td>å†™å…¥æˆåŠŸå°±è¿”å› <strong>True</strong>ï¼Œå¤±è´¥è¿”å› <strong>False</strong></td>
</tr>

<tr>
<td><code>decode(self)</code></td>
<td>è§£æå›¾ç‰‡ä¸­çš„éšå†™ä¿¡æ¯</td>
<td>æ— </td>
<td>å¦‚æœè§£ææˆåŠŸï¼Œè¿”å›éšå†™ä¿¡æ¯ï¼Œå…¶å®ƒæƒ…å†µè¿”å› <strong>None</strong></td>
</tr>

<tr>
<td><code>open(self, imgpath)</code></td>
<td>æ‰“å¼€æŒ‡å®šå›¾ç‰‡ï¼Œè½¬æ¢æ•°æ®ä¸º RGBA æ¨¡å¼æ•°æ®èµ‹ç»™å±æ€§ <strong>image</strong></td>
<td><strong>imgpath</strong>ï¼šå›¾ç‰‡è·¯å¾„</td>
<td>æ— </td>
</tr>

<tr>
<td><code>freespace(self)</code></td>
<td>è®¡ç®—å›¾ç‰‡ä¸­å¯ç”¨ç©ºé—´ï¼Œå•ä½ byte</td>
<td>æ— </td>
<td>è¿”å›å¯ç”¨ç©ºé—´å¤§å°ï¼Œå•ä½å­—èŠ‚</td>
</tr>

<tr>
<td><code>sethead(self, pkghead)</code></td>
<td>è®¾ç½®åè®®å¤´</td>
<td><strong>pkghead</strong>ï¼šè‡ªå®šä¹‰åè®®å¤´</td>
<td>æ— </td>
</tr>
</tbody>
</table>

<h4 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h4>

<p>ç±»çš„åˆå§‹åŒ–ï¼Œä¸»è¦æ˜¯æ ¹æ®æŒ‡å®šå›¾ç‰‡å’ŒæŒ‡å®šå­˜å‚¨åè®®å¤´åˆå§‹åŒ–åŸºæœ¬å±æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imgpath</span><span class="p">,</span> <span class="n">pkghead</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">imgpath</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">imgpath</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">if</span> <span class="n">pkghead</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pkghead</span> <span class="o">=</span> <span class="n">pkghead</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pkghead</span> <span class="o">=</span> <span class="mh">0x5555AAAA</span></code></pre></div>
<p>ä¸Šè¿°æ“ä½œä¸­ç”¨åˆ°äº† <a href="#openæ–¹æ³•" target="_blank"><strong>open</strong></a> æ–¹æ³•ã€‚</p>

<h4 id="encodeæ–¹æ³•">encodeæ–¹æ³•</h4>

<p>encode æ–¹æ³•çš„æ€è·¯ä¾èµ–äº <a href="#æ•°æ®å­˜å‚¨" target="_blank">åŸç†-æ•°æ®å­˜å‚¨</a> å’Œ <a href="#é—®é¢˜åˆ†æ" target="_blank">é—®é¢˜åˆ†æ</a>ï¼Œå®ç°æ€è·¯ä¸ºï¼š</p>

<ol>
<li>ä½¿ç”¨ç§æœ‰æ–¹æ³• <a href="#__pack" target="_blank">__pack</a> æ‰“åŒ…æŒ‡å®šçš„éšå†™ä¿¡æ¯ï¼Œå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„åè®®æŠ¥æ•°æ®ï¼›</li>
<li><a href="#__putdata" target="_blank">__putdata</a> å°†åè®®åŒ…æ•°æ®å†™å…¥å›¾ç‰‡æ•°æ®ï¼Œå¾—åˆ°æ–°çš„å›¾ç‰‡æ•°æ®ï¼›</li>
</ol>

<p>å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">encode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡ä¸ºç©ºï¼Œè¯·è°ƒç”¨å®ä¾‹çš„ open æ–¹æ³•æ‰“å¼€ä¸€å¼ å›¾ç‰‡ï¼&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="n">pkgbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__pack</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">__putdata</span><span class="p">(</span><span class="n">pkgbytes</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">save</span><span class="p">:</span>
        <span class="n">pathlist</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imgpath</span><span class="p">)</span>
        <span class="n">newpath</span> <span class="o">=</span> <span class="n">pathlist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;_code&#39;</span> <span class="o">+</span> <span class="s1">&#39;.png&#39;</span>
        <span class="k">print</span><span class="p">(</span><span class="n">newpath</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">newpath</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">True</span></code></pre></div>
<h5 id="pack">__pack</h5>

<p>è¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯æŒ‰ç…§ <a href="#æ€ä¹ˆåˆ¤æ–­å›¾ç‰‡æœ‰æ²¡æœ‰éšå†™ä¿¡æ¯é—®é¢˜" target="_blank">æ€ä¹ˆåˆ¤æ–­å›¾ç‰‡æœ‰æ²¡æœ‰éšå†™ä¿¡æ¯é—®é¢˜</a> å°èŠ‚ä¸­æåˆ°çš„åè®®è¿›è¡Œæ‰“åŒ…ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">__pack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">info</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    æ‰“åŒ…æ•°æ®ï¼Œè½¬æ¢ä¸ºå¾…å†™å…¥å›¾ç‰‡çš„å­—èŠ‚æ•°æ®ç»„ï¼Œå¹¶è¿”å›
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">tagbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pkghead</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;little&#39;</span><span class="p">)</span>
    <span class="n">databytes</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
    <span class="n">lengthbytes</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">databytes</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;little&#39;</span><span class="p">)</span>
    <span class="n">pkgbytes</span> <span class="o">=</span> <span class="n">tagbytes</span> <span class="o">+</span> <span class="n">lengthbytes</span> <span class="o">+</span> <span class="n">databytes</span>
    <span class="k">return</span> <span class="n">pkgbytes</span></code></pre></div>
<p>è¿™é‡Œæœ‰ä¸¤ç‚¹å…³é”®ï¼š</p>

<ul>
<li><p>ä½¿ç”¨ <code>int</code> çš„ <code>to_bytes</code> æ–¹æ³•ï¼Œå°†æ•´æ•°è½¬æ¢æˆ 4 å­—èŠ‚æ•°ç»„<sup class="footnote-ref" id="fnref:int-bytes-https"><a href="#fn:int-bytes-https">3</a></sup></p></li>

<li><p>ä½¿ç”¨ <code>utf8</code> ç¼–ç æ–¹å¼å°†æŒ‡å®šéšå†™ä¿¡æ¯è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„<sup class="footnote-ref" id="fnref:Python-https-blo"><a href="#fn:Python-https-blo">4</a></sup></p></li>
</ul>

<h5 id="putdata">__putdata</h5>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">__putdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pkgbytes</span><span class="p">):</span>
    <span class="n">pixels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">getdata</span><span class="p">())</span>
    <span class="n">freespace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">freespace</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pkgbytes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">freespace</span><span class="p">:</span>  <span class="c1"># è¶…å‡ºå…¨éƒ¨æ•°æ®ç©ºé—´ï¼Œ æŠ›å‡ºå¼‚å¸¸</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&#34;é”™è¯¯: ä¸èƒ½è½½å…¥è¶…è¿‡ &#34;</span> <span class="o">+</span> <span class="n">freespace</span> <span class="o">+</span> <span class="s2">&#34; å­—èŠ‚çš„æ•°æ®åˆ°å›¾ç‰‡ä¸­ã€‚&#34;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">byte</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pkgbytes</span><span class="p">):</span>
        <span class="n">_index</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">index</span>
        <span class="n">pixels</span><span class="p">[</span><span class="n">_index</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([(</span><span class="n">v</span> <span class="o">&amp;</span> <span class="mh">0xFE</span><span class="p">)</span> <span class="o">|</span> <span class="p">(((</span><span class="n">byte</span> <span class="o">&amp;</span> <span class="mh">0x0F</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span>  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pixels</span><span class="p">[</span><span class="n">_index</span><span class="p">])])</span>
        <span class="n">_index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">pixels</span><span class="p">[</span><span class="n">_index</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([(</span><span class="n">v</span> <span class="o">&amp;</span> <span class="mh">0xFE</span><span class="p">)</span> <span class="o">|</span> <span class="p">(((</span><span class="n">byte</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span>  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pixels</span><span class="p">[</span><span class="n">_index</span><span class="p">])])</span>
    <span class="n">newimg</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">newimg</span><span class="o">.</span><span class="n">putdata</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">newimg</span></code></pre></div>
<p>ç®€å•è¯´ä¸€ä¸‹ä¸Šé¢å®ç°çš„è¿‡ç¨‹ï¼š</p>

<ol>
<li>å¾—åˆ°åŒ…å«åƒç´ æ•°æ®çš„åˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨çš„å…ƒç´ æ˜¯ <code>tuple</code>ï¼Œ<code>tuple</code> åŒ…å«çš„å››ä¸ªæ•°æ®å°±æ˜¯å¯¹åº”åƒç´ çš„ Rã€Gã€Bã€A å››ä¸ªé€šé“çš„æ•°å€¼ï¼›</li>
<li>ä¸ºäº†å¤„ç†å¾…å†™å…¥æ•°æ®è¶…è¿‡å›¾ç‰‡å¯å­˜ç©ºé—´çš„æƒ…å†µï¼Œè¿™é‡Œè°ƒç”¨ <a href="#freespaceæ–¹æ³•" target="_blank">freespace</a> è·å–å¯ç”¨ç©ºé—´ä¸å¾…å†™æ•°æ®å¤§å°æ¯”è¾ƒï¼Œå¦‚æœè¶…å‡ºå°±å‘èµ·å¼‚å¸¸ï¼</li>

<li><p>å¦‚æœç©ºé—´è¶³å¤Ÿï¼Œå°±å°†éšå†™æ•°æ®å†™å…¥åˆ°åƒç´ æ•°æ®ä¸­ï¼Œè¿™ä¸€éƒ¨åˆ†å®ç°åœ¨ <code>for</code> å¾ªç¯ä¸­ï¼Œæšä¸¾éšå†™æ•°æ®ä¸­çš„å­—èŠ‚ï¼Œæ¯ä¸ªå­—èŠ‚éœ€è¦å†™å…¥ä¸¤ä¸ªåƒç´ æ•°æ®ï¼Œä½ä½åœ¨å‰åŸåˆ™ï¼Œè¿™é‡Œè§£é‡Šä¸€ä¸‹ä¸‹é¢çš„è¯­å¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="nb">tuple</span><span class="p">([(</span><span class="n">v</span> <span class="o">&amp;</span> <span class="mh">0xFE</span><span class="p">)</span> <span class="o">|</span> <span class="p">(((</span><span class="n">byte</span> <span class="o">&amp;</span> <span class="mh">0x0F</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span>  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pixels</span><span class="p">[</span><span class="n">_index</span><span class="p">])])</span>
<span class="nb">tuple</span><span class="p">([(</span><span class="n">v</span> <span class="o">&amp;</span> <span class="mh">0xFE</span><span class="p">)</span> <span class="o">|</span> <span class="p">(((</span><span class="n">byte</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">i</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span>  <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pixels</span><span class="p">[</span><span class="n">_index</span><span class="p">])])</span></code></pre></div>
<ul>
<li><code>i</code> å’Œ <code>v</code> åˆ†åˆ«æ˜¯åƒç´ æ•°æ®ä¸­é€šé“æ•°æ®çš„ç´¢å¼•å’Œå€¼ï¼›</li>
<li><code>v &amp; 0xFE</code> ï¼šå°†é€šé“æ•°æ®çš„æœ€ä½ä½ç½®0ï¼›</li>
<li><code>((byte &amp; 0x0F) &gt;&gt; i) &amp; 0x01</code> ï¼šè·å–å¾…å†™å…¥å­—èŠ‚ä½4ä½ä¸­çš„æ¯ä¸€ä½æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ° 0 æˆ– 1</li>
<li><code>((byte &gt;&gt; 4) &gt;&gt; i) &amp; 0x01</code> ï¼šè·å–å¾…å†™å…¥å­—èŠ‚é«˜4ä½ä¸­çš„æ¯ä¸€ä½æ•°æ®ï¼Œæœ€ç»ˆå¾—åˆ° 0 æˆ– 1</li>
</ul></li>

<li><p>æ ¹æ®å†™å…¥éšå†™ä¿¡æ¯å›¾ç‰‡æ•°æ®åˆ›å»ºæ–°çš„å›¾ç‰‡å¯¹è±¡èµ‹å€¼ç»™å±æ€§ <code>image</code></p></li>
</ol>

<h4 id="decodeæ–¹æ³•">decodeæ–¹æ³•</h4>

<p>è¿™ä¸ªæ–¹æ³•ç”¨æ¥è§£æå›¾ç‰‡ä¸­çš„éšå†™ä¿¡æ¯ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡ä¸ºç©ºï¼Œè¯·è°ƒç”¨å®ä¾‹çš„ open æ–¹æ³•æ‰“å¼€ä¸€å¼ å›¾ç‰‡ï¼&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>        
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__unpack</span><span class="p">()</span></code></pre></div>
<p>ç›´æ¥å…³é”®æ˜¯è°ƒç”¨äº†è§£åŒ…å‡½æ•° <a href="#__unpack" target="_blank">__unpack</a>ï¼Œè¿”å›çš„æ˜¯å®ƒçš„ç»“æœã€‚</p>

<h5 id="unpack">__unpack</h5>

<p>ç”¨äºä»å›¾ç‰‡ä¸­æ£€æŸ¥æ˜¯å¦åŒ…å«éšå†™æ•°æ®å¹¶è§£æéšå†™æ•°æ®ï¼Œå®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">__unpack</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">pkgbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getdata</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    <span class="n">pkghead</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">pkgbytes</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;little&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pkghead</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">pkghead</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">pkgbytes</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;little&#39;</span><span class="p">)</span>
        <span class="n">pkgbytes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getdata</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span> <span class="o">+</span> <span class="n">length</span><span class="p">)</span>
        <span class="n">info</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pkgbytes</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">info</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">None</span></code></pre></div>
<ol>
<li>é¦–å…ˆé€šè¿‡ <a href="#__getdata" target="_blank">__getdata</a> æ–¹æ³•ä»å›¾ç‰‡æ•°æ®ä¸­è·å–å­˜å‚¨çš„å‰8ä¸ªå­—èŠ‚æ•°æ®ï¼›</li>
<li>ä½¿ç”¨ <code>int</code> çš„ <code>from_bytes</code> æ–¹æ³•<sup class="footnote-ref" id="fnref:https-python3-co"><a href="#fn:https-python3-co">5</a></sup>å¾—åˆ°å‰4ä¸ªå­—èŠ‚ä»£è¡¨çš„åè®®å¤´ï¼›</li>
<li>æ¯”è¾ƒè¯»å–çš„åè®®å¤´æ˜¯å¦ä¸é¢„è®¾çš„åè®®å¤´ä¸€è‡´ï¼Œè‹¥ä¸€è‡´åˆ™è¿›è¡Œä¸‹é¢çš„æ­¥éª¤ï¼Œè‹¥ä¸ä¸€è‡´åˆ™è¿”å›ç»“æœ <code>None</code></li>
<li>åŒæ ·ä½¿ç”¨ <code>int</code> çš„ <code>from_bytes</code> æ–¹æ³•ä»ä¹‹åçš„4ä¸ªå­—èŠ‚å¾—åˆ°éšå†™æ•°æ®çš„é•¿åº¦ï¼›</li>
<li>æ ¹æ®é•¿åº¦è°ƒç”¨ <a href="#__getdata" target="_blank">__getdata</a> æ–¹æ³•ä»å›¾ç‰‡ä¸­è·å–éšå†™æ•°æ®ï¼›</li>
<li>å°†å¾—åˆ°çš„å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºç¼–ç ä¸º <code>utf8</code> çš„å­—ç¬¦ä¸²ï¼›</li>
</ol>

<h5 id="getdata">__getdata</h5>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">__getdata</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
    <span class="n">pixels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">getdata</span><span class="p">())</span>
    <span class="n">pkgbytes</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
        <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">v</span> <span class="o">&amp;</span> <span class="mh">0x01</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pixels</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="p">]])</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">r</span> <span class="o">|</span> <span class="p">(</span><span class="n">g</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span>
        <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">v</span> <span class="o">&amp;</span> <span class="mh">0x01</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pixels</span><span class="p">[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]])</span>
        <span class="n">v</span> <span class="o">|=</span> <span class="p">(</span><span class="n">r</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">g</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">a</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">)</span>
        <span class="n">pkgbytes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;little&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">pkgbytes</span>  </code></pre></div>
<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥ä»å›¾ç‰‡æ•°æ®ä¸­è·å–åƒç´ å­˜å‚¨çš„ä½æ•°æ®å¹¶ç»„æˆå­—èŠ‚æ•°æ®ã€‚å…¶ä¸­ï¼š</p>

<ul>
<li><code>start</code>ï¼šè¦è¯»å–å­—èŠ‚çš„å¼€å§‹ä½ç½®</li>
<li><code>stop</code>ï¼šè¦è¯»å–å­—èŠ‚çš„ç»“æŸä½ç½®</li>
</ul>

<p>æ‰€ä»¥å®ç°ä¸­ï¼Œ<code>for</code> çš„æ¯ä¸€æ¬¡å¾ªç¯è¯»å–ä¸¤ä¸ªåƒç´ ç‚¹æ•°æ®ï¼Œç»„å¾—ä¸€ä¸ªå­—èŠ‚æ•°æ®ï¼Œä¸Šè¿°ä»£ç ç¬¬ 5 å’Œç¬¬ 7 è¡Œä»£ç ï¼Œå¾—åˆ°çš„æ˜¯æ¯ä¸ªé€šé“çš„æœ€ä½ä½æ•°å€¼ã€‚ç¬¬ 9 è¡Œä»£ç å°†å¾—åˆ°çš„æ•°å€¼è½¬æ¢ä¸ºå•å­—èŠ‚æ•°æ®ã€‚</p>

<h4 id="openæ–¹æ³•">openæ–¹æ³•</h4>

<p>è¿™ä¸ªæ–¹æ³•ç”¨æ¥æ‰“å¼€æ–°çš„å›¾ç‰‡è·å– RGBA æ¨¡å¼çš„å›¾ç‰‡æ•°æ®è¦†ç›–åŸæ¥çš„å±æ€§ <code>image</code>ï¼Œå¹¶è®°å½•å›¾ç‰‡è·¯å¾„åˆ°å±æ€§ <code>imgpath</code>ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python">    <span class="k">def</span> <span class="nf">open</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imgpath</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">imgpath</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;RGBA&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">imgpath</span> <span class="o">=</span> <span class="n">imgpath</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">None</span></code></pre></div>
<h4 id="freespaceæ–¹æ³•">freespaceæ–¹æ³•</h4>

<p>è¿™ä¸ªæ–¹æ³•ç”¨æ¥è®¡ç®—å›¾ç‰‡å¯å­˜éšå†™æ•°æ®çš„ç©ºé—´å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">freespace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">    æŸ¥çœ‹å›¾ç‰‡å­˜å‚¨éšè—æ•°æ®çš„å¯ç”¨ç©ºé—´ï¼Œå•ä½ byte
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡ä¸ºç©ºï¼Œè¯·è°ƒç”¨å®ä¾‹çš„ open æ–¹æ³•æ‰“å¼€ä¸€å¼ å›¾ç‰‡ï¼&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">size</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span></code></pre></div>
<p>åƒç´ ä¸ªæ•°çš„ä¸€åŠå°±æ˜¯å¯å­˜æ•°æ®çš„ç©ºé—´å¤§å°ï¼Œå› ä¸ºä¸¤ä¸ªåƒç´ å­˜ä¸€ä¸ªå­—èŠ‚æ•°æ®ã€‚</p>

<h4 id="setheadæ–¹æ³•">setheadæ–¹æ³•</h4>

<p>æœ‰æ—¶å¯èƒ½éœ€è¦è‡ªå®šä¹‰åè®®å¤´ï¼Œæ‰€ä»¥è®¾è®¡è¿™ä¸ªæ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">sethead</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pkghead</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">pkghead</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pkghead</span> <span class="o">=</span> <span class="n">pkghead</span></code></pre></div>
<h3 id="ç±»æµ‹è¯•">ç±»æµ‹è¯•</h3>

<p>æœ€ç»ˆå®ç°äº† <code>MessageImage</code> ç±»ã€‚éœ€è¦æµ‹è¯•ä¸€ä¸‹ï¼Œæ·»åŠ ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">mi</span> <span class="o">=</span> <span class="n">MessageImage</span><span class="p">(</span><span class="s1">&#39;demo.png&#39;</span><span class="p">)</span>
    <span class="n">mi</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ä½ å¥½ï¼Œä¸–ç•Œï¼hello, world!&#39;</span><span class="p">)</span>
    <span class="n">mi</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;demo_code.png&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">mi</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span></code></pre></div>
<p>è¿™é‡Œä»¥å›¾ç‰‡ <a href="https://github.com/smslit/tools-with-script/blob/master/codeimg/demo.png" target="_blank">demo.png</a> ä¸ºä¾‹ï¼Œå¦‚æœæœ€ç»ˆæ‰“å°äº†è§£æç»“æœï¼Œå°±è¯´æ˜ <code>MessageImage</code> ç±»æå®šäº†ï¼Œç±»ä¼¼äºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python messageimage.py
demo_code.png ä½ å¥½ï¼Œä¸–ç•Œï¼hello, world!</code></pre></div>
<p>å®Œæ•´ä»£ç å‚è€ƒ <a href="https://github.com/smslit/tools-with-script/blob/master/codeimg/messageimage.py" target="_blank">tools-with-script/codeimg/messageimage.py</a></p>

<h2 id="å‘½ä»¤è¡Œå·¥å…·">å‘½ä»¤è¡Œå·¥å…·</h2>

<p>æœ‰äº† MessageImage ç±»ï¼Œå‘½ä»¤è¡Œå·¥å…·å°±å¥½å®ç°äº†ã€‚</p>

<h3 id="å‡†å¤‡å·¥ä½œ-1">å‡†å¤‡å·¥ä½œ</h3>

<ol>
<li>æ–°å»ºæ–‡ä»¶ï¼š<code>touch codeimg</code>ï¼Œå¹¶ä¸ºæ–‡ä»¶æ·»åŠ è¿è¡Œæƒé™ <code>chmod +x codeimg</code></li>

<li><p>æ–‡ä»¶æ·»åŠ ä»¥ä¸‹å†…å®¹æŒ‡å®šè¿è¡Œè§£é‡Šå™¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span></code></pre></div></li>

<li><p>è¿™é‡Œä½¿ç”¨ MessageImage ç±»å’Œ argparseï¼Œéœ€è¦å¯¼å…¥åº“ï¼Œæ–‡ä»¶æ·»åŠ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">messageimage</span> <span class="kn">import</span> <span class="n">MessageImage</span></code></pre></div></li>
</ol>

<h3 id="è·å–å‚æ•°æ–¹æ³•">è·å–å‚æ•°æ–¹æ³•</h3>

<p>å°è£…è·å–å‘½ä»¤è¡Œå‚æ•°çš„æ–¹æ³•ä¸º <code>getargs</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getargs</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&#34;ä¸ºå›¾ç‰‡å†™å…¥éšè—ä¿¡æ¯ï¼Œæˆ–è€…ä»åŒ…å«éšè—ä¿¡æ¯çš„å›¾ç‰‡ä¸­è·å–ä¿¡æ¯ã€‚&#34;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;command&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;encode&#39;</span><span class="p">,</span> <span class="s1">&#39;decode&#39;</span><span class="p">,</span> <span class="s1">&#39;check&#39;</span><span class="p">],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šå­å‘½ä»¤ã€‚encode -&gt; å¾€å›¾ç‰‡ä¸­å†™å…¥éšè—ä¿¡æ¯ï¼›decode -&gt; è¯»å–å›¾ç‰‡ä¸­çš„éšè—ä¿¡æ¯ï¼›check -&gt; æŸ¥çœ‹å›¾ç‰‡å¯å­˜ç©ºé—´(å•ä½ byte)&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--info&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè¦å†™å…¥çš„éšè—ä¿¡æ¯ï¼Œå­å‘½ä»¤ä¸º encode æ—¶æœ‰æ•ˆ&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;imgpath&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè¦å¤„ç†çš„å›¾ç‰‡&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<p>è®¾ç½®ä¸‰ä¸ªå­å‘½ä»¤ï¼š</p>

<ul>
<li>encode : å¾€å›¾ç‰‡ä¸­å†™å…¥éšè—ä¿¡æ¯ï¼›</li>
<li>decode : è¯»å–å›¾ç‰‡ä¸­çš„éšè—ä¿¡æ¯ï¼›</li>
<li>check : æŸ¥çœ‹å›¾ç‰‡å¯å­˜ç©ºé—´(å•ä½ byte)</li>
</ul>

<p><code>imgpath</code> å›¾ç‰‡è·¯å¾„æ˜¯å¿…é¡»å‚æ•°ã€‚</p>

<h3 id="å‚æ•°å¤„ç†">å‚æ•°å¤„ç†</h3>

<p>æœ€ç»ˆè„šæœ¬çš„å¤„ç†å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">getargs</span><span class="p">()</span>
    <span class="n">mi</span> <span class="o">=</span> <span class="n">MessageImage</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">imgpath</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;encode&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">info</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">info</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;è¯·è¾“å…¥è¦éšè—çš„ä¿¡æ¯ï¼š&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mi</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">info</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å·²å†™å…¥éšè—ä¿¡æ¯ï¼&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;decode&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è§£æåˆ°éšè—ä¿¡æ¯ï¼š{mi.decode()}&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;check&#39;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;å›¾ç‰‡å¯ç”¨ç©ºé—´ {mi.freespace()} bytes&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;ä¸æ”¯æŒ {args.command} å‘½ä»¤&#39;</span><span class="p">)</span></code></pre></div>
<p>å¤§åŠŸå‘Šæˆï¼å‘½ä»¤è¡Œå·¥å…·çš„ä»£ç å‚è€ƒï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/codeimg/codeimg" target="_blank">tools-with-script/codeimg/codeimg</a></p>

<h1 id="æµ‹è¯•">æµ‹è¯•</h1>

<p>åŒæ ·ä»¥<a href="https://github.com/smslit/tools-with-script/blob/master/codeimg/demo.png" target="_blank">demo.png</a> ä¸ºä¾‹ï¼Œæµ‹è¯•è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="err">$</span> <span class="o">./</span><span class="n">codeimg</span> <span class="n">encode</span> <span class="n">demo</span><span class="o">.</span><span class="n">png</span> <span class="o">-</span><span class="n">i</span> <span class="s1">&#39;https://www.smslit.top&#39;</span>
<span class="n">demo_code</span><span class="o">.</span><span class="n">png</span> <span class="err">å·²å†™å…¥éšè—ä¿¡æ¯ï¼</span>
<span class="err">$</span> <span class="o">./</span><span class="n">codeimg</span> <span class="n">decode</span> <span class="n">demo_code</span><span class="o">.</span><span class="n">png</span>
<span class="err">è§£æåˆ°éšè—ä¿¡æ¯ï¼š</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">smslit</span><span class="o">.</span><span class="n">top</span>
<span class="err">$</span> <span class="o">./</span><span class="n">codeimg</span> <span class="n">check</span> <span class="n">demo</span><span class="o">.</span><span class="n">png</span>
<span class="err">å›¾ç‰‡å¯ç”¨ç©ºé—´</span> <span class="mi">381024</span> <span class="nb">bytes</span>
<span class="err">$</span> <span class="o">./</span><span class="n">codeimg</span> <span class="o">-</span><span class="n">h</span>
<span class="n">usage</span><span class="p">:</span> <span class="n">codeimg</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">-</span><span class="n">i</span> <span class="n">INFO</span><span class="p">]</span> <span class="p">{</span><span class="n">encode</span><span class="p">,</span><span class="n">decode</span><span class="p">,</span><span class="n">check</span><span class="p">}</span> <span class="n">imgpath</span>

<span class="err">ä¸ºå›¾ç‰‡å†™å…¥éšè—ä¿¡æ¯ï¼Œæˆ–è€…ä»åŒ…å«éšè—ä¿¡æ¯çš„å›¾ç‰‡ä¸­è·å–ä¿¡æ¯ã€‚</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="p">{</span><span class="n">encode</span><span class="p">,</span><span class="n">decode</span><span class="p">,</span><span class="n">check</span><span class="p">}</span>
                        <span class="err">æŒ‡å®šå­å‘½ä»¤ã€‚</span><span class="n">encode</span> <span class="o">-&gt;</span> <span class="err">å¾€å›¾ç‰‡ä¸­å†™å…¥éšè—ä¿¡æ¯ï¼›</span><span class="n">decode</span> <span class="o">-&gt;</span> <span class="err">è¯»å–å›¾ç‰‡ä¸­çš„éšè—ä¿¡æ¯ï¼›</span><span class="n">check</span>
                        <span class="o">-&gt;</span> <span class="err">æŸ¥çœ‹å›¾ç‰‡å¯å­˜ç©ºé—´</span><span class="p">(</span><span class="err">å•ä½</span> <span class="n">byte</span><span class="p">)</span>
  <span class="n">imgpath</span>               <span class="err">æŒ‡å®šè¦å¤„ç†çš„å›¾ç‰‡</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="nb">exit</span>
  <span class="o">-</span><span class="n">i</span> <span class="n">INFO</span><span class="p">,</span> <span class="o">--</span><span class="n">info</span> <span class="n">INFO</span>  <span class="err">æŒ‡å®šè¦å†™å…¥çš„éšè—ä¿¡æ¯ï¼Œå­å‘½ä»¤ä¸º</span> <span class="n">encode</span> <span class="err">æ—¶æœ‰æ•ˆ</span></code></pre></div>
<h1 id="æ€»ç»“">æ€»ç»“</h1>

<p>æœ¬æ–‡å®ç°äº†å›¾ç‰‡éšå†™æœ¯çš„åŸºæœ¬åŠŸèƒ½ï¼Œè¿‡ç¨‹ä¸­ç†Ÿæ‚‰äº†pillow åº“ã€ argparse åº“çš„åŸºæœ¬ä½¿ç”¨ä»¥åŠç±»çš„ç¼–å†™ï¼ŒåŒæ—¶è¿˜äº†è§£äº†å­—èŠ‚ä¸å­—ç¬¦ä¸²ã€å­—èŠ‚ä¸æ•´å‹æ•°æ®çš„ç›¸äº’è½¬æ¢ã€‚</p>

<p>å¦‚æœæ‚¨è§‰å¾—æœ¬æ–‡å†™çš„è¿˜ä¸é”™ï¼Œè¯·æŒç»­å…³æ³¨ <a href="https://www.smslit.top" target="_blank">https://www.smslit.top</a>ï¼Œåé¢è¿˜ä¼šæœ‰å¥½ç©çš„ä¸œè¥¿åˆ†äº«ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:https-zh-wikiped">æ›´æ­£å¼ä¸€ç‚¹åœ°è¯´ï¼Œä½¿éšå†™çš„ä¿¡æ¯éš¾ä»¥æ¢æµ‹çš„ï¼Œä¹Ÿå°±æ˜¯ä¿è¯â€œæœ‰æ•ˆè½½è·â€ï¼ˆéœ€è¦è¢«éšè”½çš„ä¿¡å·ï¼‰å¯¹â€œè½½ä½“â€ï¼ˆå³åŸå§‹çš„ä¿¡å·ï¼‰çš„è°ƒåˆ¶å¯¹è½½ä½“çš„å½±å“çœ‹èµ·æ¥ï¼ˆç†æƒ³çŠ¶å†µä¸‹ç”šè‡³åœ¨ç»Ÿè®¡ä¸Šï¼‰å¯ä»¥å¿½ç•¥ã€‚è¿™å°±æ˜¯è¯´ï¼Œè¿™ç§æ”¹å˜åº”è¯¥æ— æ³•ä¸è½½ä½“ä¸­çš„å™ªå£°åŠ ä»¥åŒºåˆ«ã€‚ä»ä¿¡æ¯è®ºçš„è§‚ç‚¹æ¥çœ‹ï¼Œè¿™å°±æ˜¯è¯´ä¿¡é“çš„å®¹é‡å¿…é¡»å¤§äºä¼ è¾“â€œè¡¨é¢ä¸Šâ€çš„ä¿¡å·çš„éœ€æ±‚ã€‚è¿™å°±å«åšä¿¡é“çš„å†—ä½™ã€‚ã€Œæ¥è‡ª<a href="https://zh.wikipedia.org/wiki/éšå†™æœ¯" target="_blank"><strong>éšå†™æœ¯</strong></a>ã€ <a class="footnote-return" href="#fnref:https-zh-wikiped"><sup>[return]</sup></a></li>
<li id="fn:BIG-ENDIAN">ï¼ˆå°å­—èŠ‚åºã€ä½å­—èŠ‚åºï¼‰,å³ä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œé«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚ ä¸ä¹‹å¯¹åº”çš„æ˜¯ï¼š<strong>BIG-ENDIAN</strong>ï¼ˆå¤§å­—èŠ‚åºã€é«˜å­—èŠ‚åºï¼‰ <a class="footnote-return" href="#fnref:BIG-ENDIAN"><sup>[return]</sup></a></li>
<li id="fn:int-bytes-https"><a href="https://www.delftstack.com/zh/howto/python/how-to-convert-int-to-bytes-in-python-2-and-python-3/" target="_blank">å¦‚ä½•å°†æ•´å‹intè½¬æ¢ä¸ºå­—èŠ‚bytes</a> <a class="footnote-return" href="#fnref:int-bytes-https"><sup>[return]</sup></a></li>
<li id="fn:Python-https-blo"><a href="https://blog.csdn.net/idealcitier/article/details/80007598" target="_blank">Pythonå®ç°å­—ç¬¦ä¸²ä¸å­—èŠ‚ä¹‹é—´çš„ç›¸äº’è½¬æ¢</a> <a class="footnote-return" href="#fnref:Python-https-blo"><sup>[return]</sup></a></li>
<li id="fn:https-python3-co"><a href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c03/p05_pack_unpack_large_int_from_bytes.html" target="_blank">å­—èŠ‚åˆ°å¤§æ•´æ•°çš„æ‰“åŒ…ä¸è§£åŒ…</a> <a class="footnote-return" href="#fnref:https-python3-co"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>ä¸€èµ·ä½¿ç”¨ pipenv</title>
			<link>https://www.smslit.top/2018/10/18/pipenv/</link>
			<pubDate>Thu, 18 Oct 2018 10:53:36 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/18/pipenv/</guid>
			<description>&lt;p&gt;ä»Šå¤©åé‡Œç»™å¤§å®¶æ¨èä¸€ä¸ª python å·¥å…·ï¼Œå®ƒå°±æ˜¯ python å®˜æ–¹æ¨èçš„åŒ…ç®¡ç†å·¥å…· &lt;a href=&#34;https://pypi.org/project/pipenv/&#34; target=&#34;_blank&#34;&gt;pipenv&lt;/a&gt;ã€‚è¿™ä¸ªå·¥å…·ä¼šåå…«èˆ¬æ­¦è‰ºï¼Œ virtualenvã€pyenv å’Œ pip ä¸‰è€…çš„åŠŸèƒ½é›†äºä¸€èº«ï¼Œå¯è°“æ˜¯é«˜æ‰‹ä¸­çš„é«˜æ‰‹äº†ï¼Œæ‰€ä»¥ï¼ŒæŒæ§äº†å®ƒç›¸ä¿¡ä½ ä¼šè½»æ¾å¾ˆå¤šï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181018153983543930207.png&#34; alt=&#34;20181018153983543930207.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©åé‡Œç»™å¤§å®¶æ¨èä¸€ä¸ª python å·¥å…·ï¼Œå®ƒå°±æ˜¯ python å®˜æ–¹æ¨èçš„åŒ…ç®¡ç†å·¥å…· <a href="https://pypi.org/project/pipenv/" target="_blank">pipenv</a>ã€‚è¿™ä¸ªå·¥å…·ä¼šåå…«èˆ¬æ­¦è‰ºï¼Œ virtualenvã€pyenv å’Œ pip ä¸‰è€…çš„åŠŸèƒ½é›†äºä¸€èº«ï¼Œå¯è°“æ˜¯é«˜æ‰‹ä¸­çš„é«˜æ‰‹äº†ï¼Œæ‰€ä»¥ï¼ŒæŒæ§äº†å®ƒç›¸ä¿¡ä½ ä¼šè½»æ¾å¾ˆå¤šï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181018153983543930207.png" alt="20181018153983543930207.png" /></p>

<h2 id="èº«ä¸–ä¸æŠ€èƒ½">èº«ä¸–ä¸æŠ€èƒ½</h2>

<p>ä¸çŸ¥é“å¤§å®¶æ™“ä¸æ™“å¾— python ç•Œå¾ˆæœ‰åçš„åŠ±å¿—å‹ç”· <a href="https://www.kennethreitz.org" target="_blank">Kenneth Reitz</a>ï¼Œå¦‚æœä½ ä¸çŸ¥é“ä»–çš„è¯ï¼Œé‚£ä½ ä¸€å®šçŸ¥é“ <strong>requests</strong> åº“å§ï¼Œæ²¡é”™ï¼Œ<strong>requests</strong> åº“çš„ä½œè€…å°±æ˜¯ <a href="https://www.kennethreitz.org" target="_blank">Kenneth Reitz</a>ï¼Œæ˜¯ä»–å¼€å‘äº†ç”¨äºåˆ›å»ºå’Œç®¡ç† python è™šæ‹Ÿç¯å¢ƒçš„å·¥å…· pipenvã€‚</p>

<p>pipenv èƒ½å¤Ÿè‡ªåŠ¨ä¸ºé¡¹ç›®åˆ›å»ºå’Œç®¡ç†è™šæ‹Ÿç¯å¢ƒï¼Œä» Pipfile æ–‡ä»¶ä¸­æ·»åŠ æˆ–è€…åˆ é™¤åŒ…ï¼ŒåŒæ—¶ç”Ÿæˆ Pipfile.lock æ–‡ä»¶æ¥é”å®šå®‰è£…åŒ…çš„ç‰ˆæœ¬å’Œä¾èµ–ä¿¡æ¯ï¼Œé¿å…æ„å»ºé”™è¯¯ã€‚å®ƒè§£å†³äº†ä»¥ä¸‹é—®é¢˜<sup class="footnote-ref" id="fnref:Pipenv-Python-ht"><a href="#fn:Pipenv-Python-ht">1</a></sup>ï¼š</p>

<ul>
<li>ä¸ç”¨å†å•ç‹¬ä½¿ç”¨ virtualenvã€pyenv å’Œ pip äº†ï¼Œç°åœ¨å®ƒä»¬ç»“åˆåˆ°äº†ä¸€èµ·ã€‚</li>
<li>ä¸ç”¨å†ç»´æŠ¤ requirement.txt äº†ï¼Œä½¿ç”¨ Pipfile å’Œ Pipfile.lock æ¥ä»£æ›¿ã€‚</li>
<li>å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨å¤šä¸ª python ç‰ˆæœ¬ã€‚</li>
<li>åœ¨å®‰è£…çš„ pyenv æ¡ä»¶ä¸‹ï¼Œå¯ä»¥è‡ªåŠ¨å®‰è£…éœ€è¦çš„ python ç‰ˆæœ¬ã€‚</li>
<li>å®‰å…¨ï¼Œå¹¿æ³›åœ°ä½¿ç”¨ Hash æ ¡éªŒï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ›éœ²å®‰å…¨æ¼æ´ã€‚</li>
<li>éšæ—¶æŸ¥çœ‹å›¾å½¢åŒ–çš„ä¾èµ–å…³ç³»ã€‚</li>
</ul>

<h2 id="å®‰è£…åŠé…ç½®">å®‰è£…åŠé…ç½®</h2>

<h3 id="å®‰è£…">å®‰è£…</h3>

<p>è¿™é‡Œæ¨èä½¿ç”¨ pip å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pip install pipenv</code></pre></div>
<h3 id="é…ç½®">é…ç½®</h3>

<p>æˆ‘ä»¬çŸ¥é“æœ‰äº› python å·¥å…·å‘½ä»¤è¡Œä¸‹é»˜è®¤ä¸æ”¯æŒè¡¥å…¨ï¼Œpipenv ä¹Ÿä¸ä¾‹å¤–ï¼Œå¦‚æœå°†ä¸‹é¢çš„å†…å®¹æ·»åŠ åˆ° <code>.bashrc</code> æˆ– <code>.zshrc</code> ä¸­å°±å¯ä»¥å®ç° pipenv å‘½ä»¤çš„è¡¥å…¨äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>pipenv --completion<span class="k">)</span><span class="s2">&#34;</span></code></pre></div>
<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>

<p>æœ¬èŠ‚ä»¥ä¸€ä¸ªå·¥ç¨‹ä¸ºä¾‹å±•ç¤ºæ“ä½œæµç¨‹ï¼Œä»è€Œè¯´æ˜ pipenv çš„ä½¿ç”¨ã€‚</p>

<h3 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ">åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h3>

<ol>
<li><p>æ–°å»ºå·¥ç¨‹</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ mkdir myproject
$ <span class="nb">cd</span> myproject</code></pre></div></li>

<li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install</code></pre></div>
<p>æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤ï¼Œå°±ä¼šå‘ç°ç›®å½•ä¸‹å‡ºç° <code>Pipfile</code> å’Œ <code>Pipfile.lock</code> ä¸¤ä¸ªæ–‡ä»¶ï¼Œå®ƒä»¬ä¸»è¦è®°å½•åŒ…çš„å®‰è£…ä¿¡æ¯ï¼Œä¸Šé¢çš„å‘½ä»¤ä¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç‰ˆæœ¬çš„ python åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œå¦‚æœè¦ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬å¯ä»¥æŒ‡å®š <code>--two</code> ã€ <code>--three</code> å‚æ•°æŒ‡å®šä½¿ç”¨ 2.x ç‰ˆæœ¬è¿˜æ˜¯ 3.x ç‰ˆæœ¬ï¼Œå½¢å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install --three</code></pre></div>
<p>ä¹Ÿå¯ä»¥ç›´æ¥æŒ‡å®šè¯¦ç»†ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># pipenv install --python 3</span>
<span class="c1"># pipenv install --python 2.7.15</span>
$ pipenv install --python <span class="m">3</span>.7</code></pre></div></li>
</ol>

<h3 id="ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†">ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†</h3>

<h4 id="å®‰è£…åŒ…">å®‰è£…åŒ…</h4>

<p>å¯ä»¥ä½¿ç”¨ <code>pipenv install åŒ…å</code> å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼Œæ¯”å¦‚è¿™é‡Œå®‰è£… <code>requests</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install requests</code></pre></div>
<p>å®‰è£…è¿‡ç¨‹ä¸­ï¼Œ<code>Pipfile</code> ä¼šè®°å½•åŒ…å®‰è£…çš„ä¿¡æ¯å’Œä½¿ç”¨çš„å®‰è£…æºï¼Œåç§°ã€ç‰ˆæœ¬å·ç­‰ã€‚æ‰€ä»¥ <code>Pipfile</code> å¯ä»¥è·Ÿè¸ªåŒ…çš„ç®¡ç†ä¿¡æ¯ï¼Œå¯ä»¥åœ¨ä¸åˆ«äººåˆ†äº«é¡¹ç›®çš„æ—¶å€™ï¼Œå®ç°ä¸€è‡´çš„å¼€å‘ç¯å¢ƒã€‚è€Œ <code>Pipfile.lock</code> ä¸­åŒ…å«ç³»ç»Ÿä¿¡æ¯ï¼Œæ‰€æœ‰å·²å®‰è£…åŒ…çš„ä¾èµ–åŒ…åŠå…¶ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»¥åŠæ‰€æœ‰å®‰è£…åŒ…åŠå…¶ä¾èµ–åŒ…çš„ Hash æ ¡éªŒä¿¡æ¯ã€‚</p>

<h5 id="æŒ‡å®šç‰ˆæœ¬å®‰è£…">æŒ‡å®šç‰ˆæœ¬å®‰è£…</h5>

<p>è¿™é‡Œä»¥å®‰è£…ç‰ˆæœ¬ä¸º1.22çš„ <code>urllib3</code> ä¸ºä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv install <span class="nv">urllib3</span><span class="o">==</span><span class="m">1</span>.22</code></pre></div>
<h5 id="å®‰è£…å¼€å‘ç‰ˆæœ¬åŒ…">å®‰è£…å¼€å‘ç‰ˆæœ¬åŒ…</h5>

<p>åœ¨å®‰è£…å‘½ä»¤çš„åŸºç¡€ä¸Šä½¿ç”¨ <code>--dev</code> å‚æ•°å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv install httpie --dev</code></pre></div>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ <code>Pipfile</code> çš„å†…å®¹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰åŒæ­¥è®°å½•åŒ…çš„å®‰è£…ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[[source]]</span>
<span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://pypi.org/simple&#34;</span>
<span class="na">verify_ssl</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&#34;pypi&#34;</span>

<span class="k">[packages]</span>
<span class="na">requests</span> <span class="o">=</span> <span class="s">&#34;*&#34;</span>
<span class="na">&#34;urllib3&#34;</span> <span class="o">=</span> <span class="s">&#34;==1.22&#34;</span>

<span class="k">[dev-packages]</span>
<span class="na">httpie</span> <span class="o">=</span> <span class="s">&#34;*&#34;</span>

<span class="k">[requires]</span>
<span class="na">python_version</span> <span class="o">=</span> <span class="s">&#34;3.7&#34;</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°å¼€å‘ç‰ˆæœ¬çš„åŒ…ä¿¡æ¯åœ¨ <code>[dev-packages]</code> èŠ‚ç‚¹è®°å½•ï¼Œè€Œæ­£å¸¸çš„åŒ…åœ¨ <code>[packages]</code> èŠ‚ç‚¹è®°å½•ï¼ŒåŒæ—¶ä¹Ÿèƒ½çœ‹åˆ° <code>urllib3</code> ç¡®å®æ˜¯ 1.22 ç‰ˆæœ¬çš„ã€‚</p>

<h5 id="åŒ…åŒæ­¥">åŒ…åŒæ­¥</h5>

<p>æœ‰äº† <code>Pipfile.lock</code> å°±å¯ä»¥åœ¨ä¸€ä¸ªæ–°çš„ç›®å½•ä¸‹æ­å»ºä¸€è‡´çš„ python å¼€å‘ç¯å¢ƒäº†ï¼Œä½¿ç”¨ <code>pipenv syns</code> å‘½ä»¤å°±ä¼šè¯»å– <code>Pipfile.lock</code> åŒ…ä¿¡æ¯è¿›è¡Œç¬¬ä¸‰æ–¹åŒ…çš„æ‰¹é‡å®‰è£…äº†ã€‚</p>

<h5 id="æ›´æ”¹å®‰è£…æº">æ›´æ”¹å®‰è£…æº</h5>

<p>æœ‰æ—¶å®‰è£…åŒ…æ—¶æ¯”è¾ƒæ…¢ï¼Œä¸ºäº†å¿«é€Ÿä¸€ç‚¹å¯ä»¥æ›´æ”¹ä¸ºå›½å†…çš„åŒ…å®‰è£…æºï¼Œæ›´æ”¹ <code>pipfile</code> ä¸­çš„ <code>source</code> é…ç½®å³å¯ï¼Œä¸»è¦æ˜¯ <strong>url</strong> ï¼Œæ¯”å¦‚æ›´æ”¹ä¸ºé˜¿é‡Œæºï¼Œå¯ä»¥ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[[source]]</span>
<span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://mirrors.aliyun.com/pypi/simple&#34;</span>
<span class="na">verify_ssl</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&#34;aliyun&#34;</span></code></pre></div>
<h4 id="å¸è½½åŒ…">å¸è½½åŒ…</h4>

<p>å¯ä»¥ä½¿ç”¨ <code>pipenv uninstall</code> å‘½ä»¤å¸è½½ç¬¬ä¸‰æ–¹åŒ…ï¼Œæ¯”å¦‚è¦å¸è½½åˆšåˆšå®‰è£…çš„ <code>httpie</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv uninstall httpie</code></pre></div>
<p>æ­¤æ—¶çœ‹ä¸€ä¸‹ <code>Pipfile</code> å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æ²¡æœ‰äº† <code>httpie</code> çš„è®°å½•ä¿¡æ¯äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[[source]]</span>
<span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://pypi.org/simple&#34;</span>
<span class="na">verify_ssl</span> <span class="o">=</span> <span class="s">true</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">&#34;pypi&#34;</span>

<span class="k">[packages]</span>
<span class="na">requests</span> <span class="o">=</span> <span class="s">&#34;*&#34;</span>
<span class="na">&#34;urllib3&#34;</span> <span class="o">=</span> <span class="s">&#34;==1.22&#34;</span>

<span class="k">[dev-packages]</span>

<span class="k">[requires]</span>
<span class="na">python_version</span> <span class="o">=</span> <span class="s">&#34;3.7&#34;</span></code></pre></div>
<p>å¦‚æœæƒ³æŠŠæ‰€æœ‰çš„åŒ…éƒ½å¸è½½ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv uninstall --all</code></pre></div>
<p>å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨ <code>clean</code> å‘½ä»¤æ¸…é™¤ <code>Pipfile.lock</code> ä¸­æ²¡æœ‰è®°å½•çš„åŒ…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv clean</code></pre></div>
<h4 id="æ›´æ–°åŒ…">æ›´æ–°åŒ…</h4>

<p>æ›´æ–°ä¸€ä¸ªå…·ä½“çš„åŒ…å¾ˆç®€å•ï¼Œæ¯”å¦‚è¦æ›´æ–° <code>urllib3</code> ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv update urllib3</code></pre></div>
<p>å¦‚æœæƒ³æ›´æ–°æ‰€æœ‰çš„åŒ…ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv update</code></pre></div>
<h4 id="æŸ¥çœ‹åŒ…å®‰è£…ä¿¡æ¯">æŸ¥çœ‹åŒ…å®‰è£…ä¿¡æ¯</h4>

<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¸…æ™°æœ‰å±‚æ¬¡çš„æŸ¥çœ‹åŒ…çš„å®‰è£…ä¾èµ–ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv graph
<span class="nv">Pygments</span><span class="o">==</span><span class="m">2</span>.2.0
<span class="nv">requests</span><span class="o">==</span><span class="m">2</span>.19.1
  - certifi <span class="o">[</span>required: &gt;<span class="o">=</span><span class="m">2017</span>.4.17, installed: <span class="m">2018</span>.10.15<span class="o">]</span>
  - chardet <span class="o">[</span>required: &gt;<span class="o">=</span><span class="m">3</span>.0.2,&lt;<span class="m">3</span>.1.0, installed: <span class="m">3</span>.0.4<span class="o">]</span>
  - idna <span class="o">[</span>required: &gt;<span class="o">=</span><span class="m">2</span>.5,&lt;<span class="m">2</span>.8, installed: <span class="m">2</span>.7<span class="o">]</span>
  - urllib3 <span class="o">[</span>required: &gt;<span class="o">=</span><span class="m">1</span>.21.1,&lt;<span class="m">1</span>.24, installed: <span class="m">1</span>.22<span class="o">]</span></code></pre></div>
<h4 id="æ£€æŸ¥åŒ…å®Œæ•´æ€§">æ£€æŸ¥åŒ…å®Œæ•´æ€§</h4>

<p>æœ‰äº›æ—¶å€™éœ€è¦æ£€æŸ¥ä¸€ä¸‹åŒ…çš„å®Œæ•´æ€§ï¼Œæ®è¯´å¯ä»¥ä¾æ® <code>PEP 508</code> æ£€æŸ¥å®‰å…¨æ¼æ´ï¼Œæ„Ÿè§‰å¾ˆé«˜ç«¯çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv check
Checking PEP <span class="m">508</span> requirements...
Passed!
Checking installed package safety...
All good!</code></pre></div>
<h3 id="å…¶å®ƒæ“ä½œ">å…¶å®ƒæ“ä½œ</h3>

<h4 id="ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒä¸­çš„-python">ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒä¸­çš„ python</h4>

<p>æ¯”å¦‚ï¼Œç›®å½•ä¸­æœ‰ä¸ªæ–‡ä»¶ <code>demo.py</code> ï¼Œå¦‚æœæƒ³ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒä¸­çš„ python è¿è¡Œè¿™ä¸ªæ–‡ä»¶æ€ä¹ˆåŠï¼Ÿå¯ä»¥ä½¿ç”¨ <code>pipenv run</code> æ¯”å¦‚è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv run python demo.py</code></pre></div>
<p>ä¹Ÿå¯ä»¥è¿™æ ·æ‰§è¡Œ <code>pip</code> å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv run pip list</code></pre></div>
<h4 id="è¿›å…¥æˆ–é€€å‡ºè™šæ‹Ÿç¯å¢ƒ">è¿›å…¥æˆ–é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h4>

<p>æ‰§è¡Œå‘½ä»¤ <code>pipenv shell</code> ä¾¿å¯è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼Œåœ¨ç¯å¢ƒä¸­ä½¿ç”¨çš„ python å°±æ˜¯è™šæ‹Ÿç¯å¢ƒä¸­çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv shell
Launching subshell in virtual environmentâ€¦
. /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
$ . /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
<span class="o">(</span>myproject-NwwHp4QU<span class="o">)</span> $</code></pre></div>
<p>åœ¨è™šæ‰§ç¯å¢ƒä¸­æ‰§è¡Œå‘½ä»¤ <code>exit</code> æˆ–è€…ä½¿ç”¨å¿«æ·é”® <code>CTRL</code> + <code>d</code> ä¾¿å¯é€€å‡ºè™šæ‹Ÿç¯å¢ƒã€‚</p>

<h4 id="æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒå®‰è£…ç›®å½•">æŸ¥çœ‹è™šæ‹Ÿç¯å¢ƒå®‰è£…ç›®å½•</h4>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv --venv
/Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU</code></pre></div>
<h4 id="æŸ¥çœ‹å·¥ç¨‹æ ¹ç›®å½•">æŸ¥çœ‹å·¥ç¨‹æ ¹ç›®å½•</h4>

<p>æœ‰æ—¶éœ€è¦æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„è™šæ‹Ÿç¯å¢ƒå¯¹åº”çš„å·¥ç¨‹æ ¹ç›®å½•ï¼Œä½¿ç”¨å‘½ä»¤ <code>pipenv --where</code> å³å¯æŸ¥çœ‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv --where
/Users/5km/Desktop/myproject</code></pre></div>
<h4 id="ç¯å¢ƒå˜é‡">ç¯å¢ƒå˜é‡</h4>

<p>åœ¨è™šæ‹Ÿå¼€å‘ç¯å¢ƒä¸­ï¼Œæ“ä½œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¹¶ä¸å½±å“ç³»ç»Ÿçš„ç¯å¢ƒï¼Œè¿™æ˜¯è™šæ‹Ÿç¯å¢ƒçš„æœ€é‡è¦ä½œç”¨ï¼Œæœ‰æ—¶å€™ä¹Ÿéœ€è¦ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒå˜é‡ï¼Œè€Œä¸æ˜¯å­˜åœ¨äºç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­ã€‚åªéœ€è¦åœ¨å·¥ç¨‹æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å£°æ˜ç¯å¢ƒå˜é‡å³å¯ï¼Œæ¯”å¦‚æƒ³æ·»åŠ ä¸€ä¸ªå˜é‡ <code>FLASK_KEY</code> å€¼ä¸º <code>NONE</code>ï¼Œå¯ä»¥å°† <code>FLASK_KEY=NONE</code> æ”¾åˆ° <code>.env</code> ä¸­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">echo</span> <span class="s2">&#34;FLASK_KEY=NONE&#34;</span> &gt; .env</code></pre></div>
<p>é‡æ–°è¿›å…¥è™šæ‹Ÿç¯å¢ƒåï¼Œå°±ä¼šè‡ªåŠ¨åŠ è½½ <code>.env</code> ä¸­çš„ç¯å¢ƒå˜é‡ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv shell
Launching subshell in virtual environmentâ€¦
 . /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
$ . /Users/5km/.local/share/virtualenvs/myproject-NwwHp4QU/bin/activate
<span class="o">(</span>myproject-NwwHp4QU<span class="o">)</span> $ <span class="nb">echo</span> <span class="nv">$FLASK_KEY</span>
NONE</code></pre></div>
<p><strong>æ³¨æ„ï¼š</strong></p>

<p>åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œä½¿ç”¨ <code>pip</code> å®‰è£…ç¬¬ä¸‰åŒ…æ˜¯å®‰è£…åœ¨è™šæ‹Ÿç¯å¢ƒä¸­çš„ï¼Œä½†æ˜¯ä¸ä¼šè®°å½•åˆ° <code>Pipfile</code> ä¸­ï¼Œè™šæ‹Ÿç¯å¢ƒä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>pipenv install</code> å®‰è£…ç¬¬ä¸‰æ–¹åŒ…ï¼Œæ­¤æ—¶ä»ä¼šè®°å½•åœ¨ <code>Pipfile</code> å’Œ <code>Pipfile.lock</code> ä¸­ã€‚</p>

<h2 id="é—®é¢˜">é—®é¢˜</h2>

<h3 id="module-object-is-not-callable-é—®é¢˜">&lsquo;module&rsquo; object is not callable é—®é¢˜</h3>

<p>ä½¿ç”¨å‘½ä»¤ <code>pipenv install</code> å®‰è£…è½¯ä»¶åŒ…çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šé‡åˆ° <strong>TypeError: &lsquo;module&rsquo; object is not callable</strong> é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸º pip ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜å¯¼è‡´çš„ï¼Œå¯ä»¥åœ¨ç›¸åº”çš„å·¥ç¨‹å†…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… 18.0 ç‰ˆæœ¬çš„ pip ä¸´æ—¶è§£å†³<sup class="footnote-ref" id="fnref:Running-pipenv-g"><a href="#fn:Running-pipenv-g">2</a></sup>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv run pip install <span class="nv">pip</span><span class="o">==</span><span class="m">18</span>.0</code></pre></div>
<p>è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯åœ¨æœ¬æ–‡ç« å‘è¡¨çš„æ—¶å€™åˆšå‡ºç°çš„ï¼Œå¯èƒ½ä¼šéšç€ pipenv çš„å‡çº§å¾—åˆ°ç›¸åº”è§£å†³ã€‚</p>

<h3 id="valueerror-unknown-locale-utf-8-é—®é¢˜">ValueError: unknown locale: UTF-8 é—®é¢˜</h3>

<p>è¿™ä¸ªé—®é¢˜è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œåªéœ€æŒ‡å®šç¯å¢ƒå˜é‡å³å¯ï¼Œå¯ä»¥å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° <code>.bashrc</code> æˆ– <code>.zshrc</code> ä¸­è§£å†³<sup class="footnote-ref" id="fnref:ValueError-unkno"><a href="#fn:ValueError-unkno">3</a></sup>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">export</span> <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8
<span class="nb">export</span> <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8</code></pre></div>
<h3 id="lock-updating-å¾ˆæ…¢çš„é—®é¢˜">Lock updating å¾ˆæ…¢çš„é—®é¢˜</h3>

<p>åœ¨ä½¿ç”¨ <code>pipenv install</code> å®‰è£…åŒ…æœ€åï¼Œä¼šè¿›è¡Œä¸€æ¬¡ lock æ“ä½œï¼Œä½†æ˜¯ lock æ“ä½œå¥‡æ…¢æ— æ¯”ï¼Œ æœä¸æƒ³ç­‰å¾…æ¼«é•¿(æˆ–è€…æ˜¯æ°¸ä¹…)çš„æ—¶é—´ï¼Œå¯ä»¥åœ¨æ¯æ¬¡å®‰è£…åŒ…æ“ä½œçš„æ—¶å€™æ·»åŠ å‚æ•° <code>--skip-lock</code> è¿›è¡Œè·³è¿‡<sup class="footnote-ref" id="fnref:Lock-updating-is"><a href="#fn:Lock-updating-is">4</a></sup>ï¼Œå½¢å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pipenv install requests --skip-lock</code></pre></div>
<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡ç®€å•ä»‹ç»äº† pipenv çš„å®‰è£…å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¸Œæœ›æ‚¨è¯»äº†æœ¬æ–‡èƒ½æ„Ÿå—åˆ°è¿™ä¸ªå·¥å…·çš„æ–¹ä¾¿ä¹‹å¤„ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:Pipenv-Python-ht"><a href="https://juejin.im/post/5b31ba8851882574e808e555" target="_blank">Pipenv â€“ è¶…å¥½ç”¨çš„ Python åŒ…ç®¡ç†å·¥å…·</a> <a class="footnote-return" href="#fnref:Pipenv-Python-ht"><sup>[return]</sup></a></li>
<li id="fn:Running-pipenv-g"><a href="https://github.com/pypa/pipenv/issues/2871" target="_blank">Running pipenv gives TypeError: &lsquo;module&rsquo; object is not callable #2871</a> <a class="footnote-return" href="#fnref:Running-pipenv-g"><sup>[return]</sup></a></li>
<li id="fn:ValueError-unkno"><a href="https://github.com/pypa/pipenv/issues/187" target="_blank">ValueError: unknown locale: UTF-8 #187</a> <a class="footnote-return" href="#fnref:ValueError-unkno"><sup>[return]</sup></a></li>
<li id="fn:Lock-updating-is"><a href="https://github.com/pypa/pipenv/issues/1914#issuecomment-378846926" target="_blank">Lock updating is very slow #1914</a> <a class="footnote-return" href="#fnref:Lock-updating-is"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>python3 å®ç°Markdownè½¬htmlå°å·¥å…·</title>
			<link>https://www.smslit.top/2018/10/16/md2html_python/</link>
			<pubDate>Tue, 16 Oct 2018 17:44:29 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/16/md2html_python/</guid>
			<description>&lt;p&gt;å†™åšå®¢æ–‡ç« ä¸€ç›´ä½¿ç”¨ &lt;a href=&#34;http://www.markdown.cn&#34; target=&#34;_blank&#34;&gt;markdown&lt;/a&gt;ï¼Œ&lt;a href=&#34;http://www.markdown.cn&#34; target=&#34;_blank&#34;&gt;markdown&lt;/a&gt; æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ ‡è®°è¯­è¨€ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºå¾…æ ¼å¼çš„ç®€å•æ–‡æ¡£ã€‚&lt;a href=&#34;https://typora.io&#34; target=&#34;_blank&#34;&gt;typra&lt;/a&gt; æ˜¯ä¸€æ¬¾è·¨å¹³å°è€Œä¸”è®¾è®¡æä½³çš„ markdown å†™ä½œå·¥å…·ã€‚markdown æœ¬è´¨ä¸Šç®—æ˜¯ç®€åŒ–ç‰ˆçš„ htmlã€‚é‚£ä¹ˆï¼Œå¦‚ä½•è‡ªå·±ç¼–å†™ä¸€ä¸ª &lt;a href=&#34;http://www.markdown.cn&#34; target=&#34;_blank&#34;&gt;markdown&lt;/a&gt; è½¬æ¢å·¥å…·å‘¢ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä¸€èµ·ç”¨python3 å®ç°ä¸€ä¸ª markdown è½¬ html çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æµè§ˆå™¨æŸ¥çœ‹ html å°±èƒ½çœ‹åˆ°å¸¦æ ¼å¼çš„æ–‡ç« äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181018153983700396678.png&#34; alt=&#34;20181018153983700396678.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å†™åšå®¢æ–‡ç« ä¸€ç›´ä½¿ç”¨ <a href="http://www.markdown.cn" target="_blank">markdown</a>ï¼Œ<a href="http://www.markdown.cn" target="_blank">markdown</a> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ ‡è®°è¯­è¨€ï¼Œå¯ä»¥å¿«é€Ÿåˆ›å»ºå¾…æ ¼å¼çš„ç®€å•æ–‡æ¡£ã€‚<a href="https://typora.io" target="_blank">typra</a> æ˜¯ä¸€æ¬¾è·¨å¹³å°è€Œä¸”è®¾è®¡æä½³çš„ markdown å†™ä½œå·¥å…·ã€‚markdown æœ¬è´¨ä¸Šç®—æ˜¯ç®€åŒ–ç‰ˆçš„ htmlã€‚é‚£ä¹ˆï¼Œå¦‚ä½•è‡ªå·±ç¼–å†™ä¸€ä¸ª <a href="http://www.markdown.cn" target="_blank">markdown</a> è½¬æ¢å·¥å…·å‘¢ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä¸€èµ·ç”¨python3 å®ç°ä¸€ä¸ª markdown è½¬ html çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨æµè§ˆå™¨æŸ¥çœ‹ html å°±èƒ½çœ‹åˆ°å¸¦æ ¼å¼çš„æ–‡ç« äº†ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181018153983700396678.png" alt="20181018153983700396678.png" /></p>

<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>

<p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¦å®‰è£…ä¸€äº›ç¬¬ä¸‰æ–¹åº“ã€‚</p>

<h2 id="python3-markdown-åº“">python3-markdown åº“</h2>

<p><a href="https://pypi.org/project/Markdown/" target="_blank"><strong>markdown</strong></a> åº“æ˜¯ç”¨æ¥ç¼–è¯‘æ¸²æŸ“ markdown æ–‡ä»¶çš„ï¼Œè¿™æ˜¯å’±ç¼–å†™è½¬æ¢å·¥å…·çš„æ ¸å¿ƒã€‚</p>

<h3 id="å®‰è£…">å®‰è£…</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install markdown</code></pre></div>
<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>

<p>åœ¨è¿™é‡Œåªä½¿ç”¨ markdown æ–¹æ³•ï¼Œå¯ä»¥å°† markdwon æ–‡æœ¬è½¬æ¢ä¸º html æ ¼å¼çš„æ–‡æœ¬ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">markdown</span>

<span class="n">markdownText</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;# æµ‹è¯•
</span><span class="s1">- æ— åºåˆ—è¡¨1
</span><span class="s1">- æ— åºåˆ—è¡¨2
</span><span class="s1">&#39;&#39;&#39;</span>

<span class="k">print</span><span class="p">(</span><span class="n">markdown</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">markdownText</span><span class="p">,</span> <span class="n">output_format</span><span class="o">=</span><span class="s1">&#39;html5&#39;</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;extra&#39;</span><span class="p">]))</span></code></pre></div>
<p>ä¸Šè¿°ä»£ç ï¼Œä¼šæ‰“å°è½¬æ¢å‡ºæ¥çš„ html æ ¼å¼çš„æ–‡æœ¬ã€‚</p>

<h3 id="æ³¨æ„">æ³¨æ„</h3>

<ol>
<li>markdwon æ–¹æ³•è¿”å›çš„ç»“æœæ˜¯ html æ–‡æœ¬ï¼Œä½†ä¸åŒ…å«å¤´ä¿¡æ¯ <code>&lt;head&gt;</code>ï¼Œæ‰€ä»¥åé¢å¦‚æœä½¿ç”¨çš„è¯åº”è¯¥ç»™ç»“æœåŠ ä¸Šï¼Œä¿è¯htmlæ–‡æœ¬çš„å…¼å®¹æ€§ï¼›</li>
<li>markdwon æ–¹æ³•å¯ä»¥æŒ‡å®šè¾“å‡ºæ ¼å¼ï¼Œæ¯”å¦‚æŒ‰ç…§ <strong>html5</strong> çš„æ ¼å¼è½¬æ¢ï¼›</li>
<li>markdwon æ–¹æ³•é»˜è®¤ä¸è¯†åˆ«ä»£ç é«˜äº®è¯­æ³•ï¼Œå¯ä»¥æŒ‰ç…§ä¸Šè¿°æ¼”ç¤ºä»£ç ä¸­çš„æ–¹å¼æŒ‡å®š <code>extensions</code> ä¸º <code>['extra']</code><sup class="footnote-ref" id="fnref:python3-markdown"><a href="#fn:python3-markdown">1</a></sup>ï¼›</li>
</ol>

<h2 id="beautifulsoup4-åº“å’Œ-html5lib-åº“">beautifulsoup4 åº“å’Œ html5lib åº“</h2>

<p>è¿™é‡Œå®‰è£… html5lib åº“ï¼Œä¸»è¦æ˜¯ä½¿ç”¨ <a href="https://pypi.org/project/beautifulsoup4/" target="_blank">beautifulsoup4</a> åº“çš„ <code>prettify</code> æ–¹æ³•çš„æ—¶å€™ä¾èµ– html5lib åº“ã€‚</p>

<h3 id="å®‰è£…-1">å®‰è£…</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install beautifulsoup4 html5lib</code></pre></div>
<h3 id="ä½¿ç”¨-1">ä½¿ç”¨</h3>

<p>beautifulsoup4 åº“å¯ä»¥è¿‡æ»¤åˆ†æ html æ–‡æœ¬çš„èŠ‚ç‚¹ä¿¡æ¯å’Œå…¶å®ƒ html æ–‡æœ¬çš„å¤„ç†ï¼Œå¤šç”¨äºçˆ¬è™«åº”ç”¨ï¼Œè¿™é‡Œä½¿ç”¨åˆ° beautifulsoup4 åº“çš„ç¾åŒ– html æ–‡æœ¬çš„æ–¹æ³•ï¼ŒæŒ‰ç…§ <code>html5lib</code> çš„æ–¹å¼ï¼Œç®€å•å‚è€ƒå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">rawHtml</span> <span class="o">=</span> <span class="s1">&#39;&lt;head&gt;&lt;meta charset=&#34;utf-8&#34; /&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Hello&lt;/h1&gt;&lt;p&gt;hello, world!&lt;/p&gt;&lt;/body&gt;&#39;</span>
<span class="n">prettyHtml</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">rawHtml</span><span class="p">,</span> <span class="s1">&#39;html5lib&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span></code></pre></div>
<p>ä¸»è¦æ˜¯ç”¨äºå°† html æ–‡æœ¬æ ¼å¼åŒ–ï¼Œå¤„ç†çš„æ›´ç¾è§‚æ˜“è¯»ã€‚</p>

<h2 id="å®ç°">å®ç°</h2>

<p>æœ‰äº†ä¸Šé¢å®‰è£…çš„ markdown åº“ï¼Œè¦å®ç° markdown è½¬ html çš„å°å·¥å…·å°±å˜å¾—ç®€å•äº†è®¸å¤šï¼Œå°±ä¸éœ€è¦è‡ªå·±ç¼–å†™ markdown è¯­æ³•è§£æå™¨äº†ã€‚å®ç°æ€è·¯å¾ˆç®€å•ï¼Œç¼–å†™ä¸€ä¸ªç±» Markdown2Htmlï¼Œç„¶åç¼–å†™ä¸€ä¸ªpythonè„šæœ¬å½¢å¼çš„å‘½ä»¤è„šæœ¬è°ƒç”¨ç±»æ–¹æ³•å®ç°æ–‡ä»¶è½¬æ¢ã€‚</p>

<h3 id="markdown2html-ç±»">Markdown2Html ç±»</h3>

<ol>
<li>è¿™ä¸ªç±»åœ¨æ–‡ä»¶ markdown2html.py ä¸­å®ç°ï¼Œæ‰€ä»¥é¦–å…ˆè¦æ–°å»ºè¿™ä¸ªæ–‡ä»¶ã€‚</li>

<li><p>å¯¼å…¥è¦ç”¨åˆ°çš„åº“</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">markdown</span>
<span class="kn">import</span> <span class="nn">os.path</span> <span class="kn">as</span> <span class="nn">op</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span> </code></pre></div></li>

<li><p>å®šä¹‰ç±»åŠåˆå§‹åŒ–å‡½æ•°ï¼Œå› ä¸ºæœ€ç»ˆè½¬æ¢è¦ç”Ÿæˆ html æ–‡ä»¶ï¼Œé‚£ä¹ˆå¿…ç„¶å¯ä»¥ä½¿ç”¨ css æ–‡ä»¶æ§åˆ¶æ ·å¼ï¼Œæ‰€ä»¥è¿™é‡Œåˆå§‹åŒ–å‡½æ•°å¯ä¼ å…¥ä¸€ä¸ªæŒ‡å®š css æ–‡ä»¶é…ç½®æ ·å¼ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Markdown2Html</span><span class="p">:</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cssfile</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="s1">&#39;&#39;&#39;
</span><span class="s1">        åˆå§‹åŒ– Markdown2Html ç±»ï¼Œå¯ä¼ å…¥ç‰¹å®š css æ–‡ä»¶ä½œä¸ºæ ·å¼
</span><span class="s1">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">headTag</span> <span class="o">=</span> <span class="s1">&#39;&lt;head&gt;&lt;meta charset=&#34;utf-8&#34; /&gt;&lt;/head&gt;&#39;</span>
        <span class="k">if</span> <span class="n">cssfile</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">cssfile</span><span class="p">)</span></code></pre></div>
<p>åˆå§‹åŒ–ä¸­å®šä¹‰çš„ <code>headTag</code> ä¸»è¦æ˜¯ç”¨äºå®Œå–„ markdwon åº“å¾—åˆ°çš„ html æ–‡æœ¬ï¼Œ<code>&lt;head&gt;</code> ä¸­é¢„ç•™äº† css æ ·å¼æ–‡æœ¬çš„ä½ç½®ã€‚<code>setStyle</code> æ–¹æ³•ä¸»è¦å¤„ç†ä¼ å…¥çš„ css æ–‡ä»¶ï¼Œå…·ä½“è§ä¸‹ä¸€æ­¥ã€‚</p></li>

<li><p>å®ç° Markdown2Html ç±»çš„ <code>setStyle</code> æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">setStyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cssfile</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;
</span><span class="s1">    è®¾ç½®æ ·å¼è¡¨æ–‡ä»¶
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">cssfile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">headTag</span> <span class="o">=</span> <span class="s1">&#39;&lt;head&gt;&lt;meta charset=&#34;utf-8&#34; /&gt;&lt;/head&gt;&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cssfile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">css</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">headTag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headTag</span><span class="p">[:</span><span class="o">-</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="s1">&#39;&lt;style  type=&#34;text/css&#34;&gt;{css}&lt;/style&gt;&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">headTag</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">:]</span></code></pre></div>
<p><code>setStyle</code> æ–¹æ³•ä¼ å…¥ cssfile å‚æ•°ï¼Œå¦‚æœä¸ºç©ºï¼Œè¯´æ˜ä¸æŒ‡å®šæ ·å¼ï¼Œå°† html æ–‡æœ¬é¢„ç•™å¤´ä¿¡æ¯è®¾ç½®ä¸ºåˆå§‹åŒ–çŠ¶æ€ï¼Œå¦‚æœè®¾ç½®äº† css æ–‡ä»¶ï¼Œé‚£ä¹ˆç”¨ css æ–‡ä»¶å†…å®¹ç”Ÿæˆæ–°çš„ <code>head</code> ä¿¡æ¯ã€‚</p></li>

<li><p>å®ç° markdown è½¬æ¢ä¸º html çš„æ–¹æ³• <code>convert</code>ï¼Œè¿™é‡Œè®¾è®¡æ–¹æ³•ï¼Œå¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œå…ˆçœ‹å®ç°ï¼Œåè§£é‡Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">infile</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">prettify</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;
</span><span class="s1">    è½¬æ¢æ–‡ä»¶
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">op</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">infile</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;è¯·è¾“å…¥æ­£ç¡®çš„ markdown æ–‡ä»¶è·¯å¾„ï¼&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">outfile</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">outfile</span> <span class="o">=</span> <span class="n">op</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">infile</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.html&#39;</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">markdownText</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">rawhtml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">headTag</span> <span class="o">+</span> <span class="n">markdown</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="n">markdownText</span><span class="p">,</span> <span class="n">output_format</span><span class="o">=</span><span class="s1">&#39;html5&#39;</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;extra&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">prettify</span><span class="p">:</span>
        <span class="n">prettyHtml</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">rawhtml</span><span class="p">,</span> <span class="s1">&#39;html5lib&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">prettyHtml</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">rawhtml</span><span class="p">)</span></code></pre></div>
<p>è¿™é‡Œé¦–å…ˆåˆ¤æ–­æŒ‡å®šçš„è¾“å…¥æ–‡ä»¶è·¯å¾„å¯¹åº”æ˜¯ä¸æ˜¯æ–‡ä»¶ï¼Œç„¶åæ£€æŸ¥è¾“å‡ºæ–‡ä»¶æœ‰æ²¡æœ‰æŒ‡å®šï¼Œä¹‹åè¯»å– markdown æ–‡ä»¶è·å– markdown æ–‡æœ¬ï¼Œè°ƒç”¨ markdown åº“çš„ markdown æ–¹æ³•å°† markdown æ–‡æœ¬è½¬æ¢ä¸º html5 æ ¼å¼çš„ html æ–‡æœ¬ï¼Œå¹¶æ·»åŠ å‡†å¤‡å¥½çš„å¤´ä¿¡æ¯ï¼Œæœ€ååˆ¤æ–­æ˜¯å¦éœ€è¦ç¾åŒ–ç”Ÿæˆçš„ html æ–‡æœ¬ï¼Œå¦‚æœæ˜¯ï¼Œå°±å…ˆç¾åŒ–ï¼Œå†å†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ç›´æ¥å°†ç»“æœå†™å…¥åˆ°æŒ‡å®šè¾“å‡ºæ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°æ–‡ä»¶æ“ä½œä¸­éƒ½æŒ‡æ˜äº†æ–‡ä»¶ç¼–ç ä¸º <code>utf8</code> ï¼Œæ˜¯ä¸ºäº†ä¿è¯è·¨å¹³å°ç¼–ç ç»Ÿä¸€ï¼Œæé«˜å…¼å®¹æ€§ã€‚</p></li>

<li><p>ç¼–å†™ä»¥ä¸‹ä»£ç è¿›è¡Œæµ‹è¯•ï¼ŒåŒçº§ç›®å½•ä¸‹å­˜å‚¨çš„ <code>github.css</code> æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡ŒæŒ‡å®š cssæ–‡ä»¶ è½¬æ¢ <code>README.md</code> æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">m2h</span> <span class="o">=</span> <span class="n">Markdown2Html</span><span class="p">(</span><span class="s1">&#39;github.css&#39;</span><span class="p">)</span>
    <span class="n">m2h</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;./README.md&#39;</span><span class="p">,</span> <span class="s1">&#39;./README.html&#39;</span><span class="p">)</span></code></pre></div>
<p>è¿è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">python3 markdown2html.py</code></pre></div>
<p>ç»“æœï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181016153970548190814.png" alt="20181016153970548190814.png" /></p>

<p>Markdown2Html ç±»å®Œæˆï¼</p>

<p>å®Œæ•´ä»£ç å‚è€ƒï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/m2h/markdown2html.py" target="_blank">tools-with-script/m2h/markdown2html.py</a></p></li>
</ol>

<h3 id="è„šæœ¬">è„šæœ¬</h3>

<p>æœ‰äº†ä¸Šé¢çš„ Markdown2Html ç±»ï¼Œç°åœ¨å¯ä»¥ç¼–å†™è„šæœ¬å‘½ä»¤äº†ã€‚</p>

<h4 id="å‡†å¤‡æ–‡ä»¶">å‡†å¤‡æ–‡ä»¶</h4>

<ol>
<li><p>æ–°å»ºåä¸º <code>m2h</code> çš„æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ŒæŒ‡æ˜è„šæœ¬è§£é‡Šå™¨ä¸º <code>python3</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span></code></pre></div></li>

<li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸ºæ–‡ä»¶æ·»åŠ è¿è¡Œæƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">chmod +x ./m2h</code></pre></div>
<p>è¿™æ ·å°±å¯ä»¥åƒæ‰§è¡Œå‘½ä»¤ä¸€æ ·è°ƒç”¨å·¥å…·äº†ã€‚</p></li>
</ol>

<h4 id="è„šæœ¬å®ç°">è„šæœ¬å®ç°</h4>

<h5 id="å¯¼å…¥å¿…è¦åº“">å¯¼å…¥å¿…è¦åº“</h5>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">from</span> <span class="nn">markdown2html</span> <span class="kn">import</span> <span class="n">Markdown2Html</span></code></pre></div>
<h5 id="å‘½ä»¤å‚æ•°">å‘½ä»¤å‚æ•°</h5>

<p>ä½œä¸ºä¸€ä¸ªåˆæ ¼çš„æ–‡ä»¶è½¬æ¢å‘½ä»¤å·¥å…·ï¼Œæœ€èµ·ç è¦æœ‰ä¸€ä¸ªå ä½å‚æ•°ï¼Œç”¨æ¥æŒ‡å®šå¾…è½¬æ¢çš„ markdown æ–‡ä»¶ã€‚å¦å¤–ï¼Œè¿˜è¦è®¾è®¡ä¸€ä¸ªå¯é€‰å‚æ•°ç”¨æ¥æŒ‡å®šè¦ä½¿ç”¨çš„ css æ ·å¼æ–‡ä»¶ï¼Œç”¨æ¥æŒ‡å®šè½¬æ¢åçš„ä¸»é¢˜ï¼Œæœ‰æ—¶å€™éœ€è¦å°†æ‰€æœ‰çš„è½¬æ¢æ–‡ä»¶ç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œæ‰€ä»¥è¿˜è¦æœ‰ä¸€ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šè¿™ä¸ªè·¯å¾„ã€‚æœ€ç»ˆè®¾è®¡çš„å‚æ•°å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td>infiles</td>
<td>æŒ‡å®š markdown æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯å¤šä¸ª md æ–‡ä»¶</td>
</tr>

<tr>
<td>&ndash;style, -s</td>
<td>æŒ‡å®šè¦ä½¿ç”¨çš„ css æ–‡ä»¶</td>
</tr>

<tr>
<td>&ndash;outdir, -o</td>
<td>æŒ‡å®šæ–‡ä»¶è¾“å‡ºç›®å½•</td>
</tr>
</tbody>
</table>

<p>è¿™é‡Œä½¿ç”¨ python3 çš„å®˜æ–¹åº“ <a href="https://docs.python.org/3/library/argparse.html" target="_blank">argparse</a> æ¥å®ç°å‘½ä»¤å‚æ•°çš„è¿‡æ»¤ï¼Œå¯ä»¥é˜…è¯» <a href="/2018/09/13/python-argparse/" target="_blank">argparse åº“çš„ä½¿ç”¨</a> äº†è§£è¿™ä¸ªåº“çš„åŸºæœ¬ä½¿ç”¨ï¼Œå°†å‚æ•°è¿‡æ»¤å°è£…ä¸ºå‡½æ•° <code>getArgs</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_args</span><span class="p">():</span>
    <span class="s1">&#39;&#39;&#39;
</span><span class="s1">    è·å–å‘½ä»¤å‚æ•°
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s1">&#39;--style&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè¦ä½¿ç”¨çš„ css æ ·å¼ï¼Œcssæ–‡ä»¶è·¯å¾„&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--outdir&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®š html æ–‡ä»¶è¾“å‡ºç›®å½•&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;infiles&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè¦è½¬æ¢çš„ markdown æ–‡ä»¶ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<p>å…¶ä¸­ <code>infiles</code> å‚æ•°æŒ‡å®š<code>nargs='+'</code>ï¼Œå¯ä»¥å¾—åˆ°çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤§äºæˆ–ç­‰äº1ä¸ªæ–‡ä»¶è·¯å¾„çš„åˆ—è¡¨<sup class="footnote-ref" id="fnref:python-argparse"><a href="#fn:python-argparse">2</a></sup>ã€‚å‡½æ•°è¿”å›çš„å°±æ˜¯è¿‡æ»¤åå¾—åˆ°çš„å‚æ•°ä¿¡æ¯ã€‚</p>

<h5 id="æœ€ç»ˆå®ç°è¿‡ç¨‹">æœ€ç»ˆå®ç°è¿‡ç¨‹</h5>

<p>å…ˆè´´å‡ºä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">()</span>
    <span class="n">m2h</span> <span class="o">=</span> <span class="n">Markdown2Html</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">style</span><span class="p">:</span>
        <span class="n">m2h</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">style</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">mdfile</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">infiles</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æ–°å»ºç›®å½• {args.outdir}&#39;</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">mdfile</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.html&#39;</span>
            <span class="n">outfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">while</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">outfile</span><span class="p">):</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">mdfile</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">f</span><span class="s1">&#39;_{count}.html&#39;</span>
                <span class="n">outfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">outdir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
                <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">mdfile</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;.html&#39;</span>
        <span class="n">m2h</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">mdfile</span><span class="p">,</span> <span class="n">outfile</span><span class="o">=</span><span class="n">outfile</span><span class="p">,</span> <span class="n">prettify</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;{mdfile} å·²è½¬æ¢å®Œæˆï¼Œä¿å­˜ä¸º{outfile}&#39;</span><span class="p">)</span></code></pre></div>
<p><code>m2h</code>æ–‡ä»¶å®Œæ•´ä»£ç ï¼Œå‚è€ƒ<a href="https://github.com/smslit/tools-with-script/blob/master/m2h/m2h" target="_blank">tools-with-script/m2h/m2h</a>ã€‚</p>

<p>é¦–å…ˆè·å–è¿‡æ»¤å‚æ•°ï¼Œä¹‹åå£°æ˜ <code>Markdown2Html</code> ç±»çš„ä¸€ä¸ªå®ä¾‹ <code>m2h</code>ï¼Œå¦‚æœæ‰§è¡Œå‘½ä»¤ä¸­æŒ‡å®šäº†æ ·å¼æ–‡ä»¶ï¼Œå°±ä¸ºå®ä¾‹è®¾ç½®è¿™ä¸ª css æ–‡ä»¶ã€‚æšä¸¾å¾…è½¬æ¢æ–‡ä»¶åˆ—è¡¨ä¸­çš„æ–‡ä»¶ï¼Œå¤„ç†æ–‡ä»¶åˆ†ä»¥ä¸‹å‡ æ­¥ï¼š</p>

<ol>
<li><p>åˆ¤æ–­æ˜¯å¦æŒ‡å®šäº†ç»Ÿä¸€çš„è¾“å‡ºç›®å½•</p>

<ul>
<li><p>å¦‚æœæŒ‡å®šç»Ÿä¸€è¾“å‡ºç›®å½•ï¼šæ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨å°±æ–°å»ºç›®å½•ï¼›ç”Ÿæˆ html æ–‡ä»¶çš„è·¯å¾„åç§°ï¼Œä¸ºäº†é˜²æ­¢è¾“å‡ºåˆ°ç»Ÿä¸€è·¯å¾„æ˜¯å‡ºç°é‡åè€Œè¦†ç›–æ–‡ä»¶ï¼Œè¿™é‡Œåªè¦å‘ç°æ–‡ä»¶å­˜åœ¨å°±å¢åŠ åç¼€åºå·ï¼›</p></li>

<li><p>å¦‚æœæ²¡æœ‰æŒ‡å®šç»Ÿä¸€è¾“å‡ºç›®å½•ï¼šç›´æ¥ç”Ÿæˆç›¸åº”çš„ html è¾“å‡ºæ–‡ä»¶çš„è·¯å¾„å³å¯ï¼›</p></li>
</ul></li>

<li><p>è°ƒç”¨å®ä¾‹ <code>m2h</code> çš„ <code>convert</code> æ–¹æ³•ï¼ŒæŒ‡å®š markdownæ–‡ä»¶å’Œè¾“å‡ºæ–‡ä»¶ï¼Œè¿›è¡Œè½¬æ¢ã€‚</p></li>
</ol>

<h5 id="æµ‹è¯•">æµ‹è¯•</h5>

<p>å‘½ä»¤ä½¿ç”¨å¸®åŠ©ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$  ./m2h -h
usage: m2h <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s STYLE<span class="o">]</span> <span class="o">[</span>-o OUTDIR<span class="o">]</span> infiles <span class="o">[</span>infiles ...<span class="o">]</span>

positional arguments:
  infiles               æŒ‡å®šè¦è½¬æ¢çš„ markdown æ–‡ä»¶ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ª

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -s STYLE, --style STYLE
                        æŒ‡å®šè¦ä½¿ç”¨çš„ css æ ·å¼ï¼Œcssæ–‡ä»¶è·¯å¾„
  -o OUTDIR, --outdir OUTDIR
                        æŒ‡å®š html æ–‡ä»¶è¾“å‡ºç›®å½•</code></pre></div>
<p>æˆ‘è¿™é‡ŒåŒçº§ç›®å½•å’Œä¸Šä¸€å±‚ç›®å½•å„æœ‰ä¸€ä¸ª <code>README.md</code> æ–‡ä»¶ï¼Œè¿™é‡Œå°è¯•è½¬æ¢å¹¶è¾“å‡ºåˆ°åŒçº§ç›®å½•ä¸‹çš„ <code>output</code> ç›®å½•ä¸‹ï¼Œæ³¨æ„ç°åœ¨ <code>output</code> ç›®å½•å¹¶ä¸å­˜åœ¨ï¼Œå¹¶æŒ‡å®š <code>github.css</code> ä½œä¸ºæ ·å¼æ–‡ä»¶ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./m2h README.md ../README.md -s github.css -o ./output
æ–°å»ºç›®å½• ./output
README.md å·²è½¬æ¢å®Œæˆï¼Œä¿å­˜ä¸º./output/README.html
../README.md å·²è½¬æ¢å®Œæˆï¼Œä¿å­˜ä¸º./output/README_1.html</code></pre></div>
<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡å­¦ä¹ äº† markdown åº“çš„ä½¿ç”¨ï¼ŒåŒæ—¶ç»ƒä¹ äº†ç±»çš„ç¼–å†™å’Œä½¿ç”¨ã€‚å·¥å…·çš„å®Œæ•´æ–‡ä»¶è§ï¼š<a href="https://github.com/smslit/tools-with-script/tree/master/m2h" target="_blank">m2h</a></p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:python3-markdown"><a href="https://blog.csdn.net/zrools/article/details/51860533" target="_blank">python3-markdown è§£æåå¼•å·ä»£ç å—ä¸ä»£ç é«˜äº®</a> <a class="footnote-return" href="#fnref:python3-markdown"><sup>[return]</sup></a></li>
<li id="fn:python-argparse"><a href="https://codeday.me/bug/20170705/32423.html" target="_blank">python â€“ argparseé€‰é¡¹ç”¨äºä¼ é€’åˆ—è¡¨ä½œä¸ºé€‰é¡¹</a> <a class="footnote-return" href="#fnref:python-argparse"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>python3 ç®€å•å®ç°éªŒè¯ç è¯†åˆ«å™¨</title>
			<link>https://www.smslit.top/2018/10/12/verification_code_chars/</link>
			<pubDate>Fri, 12 Oct 2018 14:59:37 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/12/verification_code_chars/</guid>
			<description>&lt;p&gt;ç¼–å†™çˆ¬è™«æ€»è¯¥è¦è¿‡éªŒè¯ç è¯†åˆ«è¿™ä¸ªåï¼Œä»Šå¤©ç”¨python3ç®€å•å®ç°ä¸€ä¸ªéªŒè¯ç è¯†åˆ«å™¨ã€‚å…¶å®ä¸»è¦æ˜¯å®è·µï¼Œæœ€åæ•ˆæœä¹Ÿä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œå¯¹äºå¤æ‚çš„éªŒè¯ç ï¼Œè¿˜æ˜¯åŠ›ä¸ä»å¿ƒçš„ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181012153933272275283.png&#34; alt=&#34;20181012153933272275283.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ç¼–å†™çˆ¬è™«æ€»è¯¥è¦è¿‡éªŒè¯ç è¯†åˆ«è¿™ä¸ªåï¼Œä»Šå¤©ç”¨python3ç®€å•å®ç°ä¸€ä¸ªéªŒè¯ç è¯†åˆ«å™¨ã€‚å…¶å®ä¸»è¦æ˜¯å®è·µï¼Œæœ€åæ•ˆæœä¹Ÿä¸æ˜¯ç‰¹åˆ«å¥½ï¼Œå¯¹äºå¤æ‚çš„éªŒè¯ç ï¼Œè¿˜æ˜¯åŠ›ä¸ä»å¿ƒçš„ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181012153933272275283.png" alt="20181012153933272275283.png" /></p>

<p>å¼€å§‹ä¹‹å‰ï¼Œæé†’â°ï¼Œåº”è¯¥æ˜¯ä¸­é—´æœ‰äº›å¤„ç†ä¸å¯¹ï¼Œé€ æˆç»“æœä¸ç†æƒ³ï¼Œä¸è¿‡æœ¬æ–‡çš„æ€è·¯æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºå‚è€ƒçš„<a href="https://www.shiyanlou.com/courses/364" target="_blank">å®éªŒæ¥¼ â€”â€” python ç ´è§£éªŒè¯ç </a>ï¼</p>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>å…¶å®å·²ç»æœ‰å¾ˆå¤šç°æˆçš„pythonåº“å¯ä»¥ç”¨äºè¯†åˆ«éªŒè¯ç äº†ï¼Œæ¯”å¦‚ï¼š<strong>pytesseract</strong> å’Œ <strong>tesseract_ocr</strong>ï¼Œæœ¬æ–‡ä¹Ÿè¦è‡ªå·±å®ç°ä¸€ç§æ–¹æ³•ï¼Œæœ€ç»ˆåšä¸€ä¸ªå¯ä»¥ä½¿ç”¨ä¸‰ç§æ–¹æ³•çš„éªŒè¯ç è¯†åˆ«å™¨ã€‚</p>

<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>

<p>åœ¨å¼€å§‹ä¹‹å‰éœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œå®‰è£…å¿…è¦çš„åº“å’Œå‡†å¤‡ç‹¬ç«‹çš„å¼€å‘ç¯å¢ƒã€‚</p>

<ul>
<li>pipenv</li>
<li>pytesseract</li>
<li>tesseract_ocr</li>
<li>pillow</li>
</ul>

<p>è¿™é‡Œä½¿ç”¨ç‹¬ç«‹çš„pythonç¯å¢ƒè¿›è¡Œå¼€å‘ï¼Œç”¨åˆ°äº†<strong>pipenv</strong></p>

<ol>
<li><p>é¦–å…ˆå®‰è£… <strong>pipenv</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install pipenv</code></pre></div></li>

<li><p>ä¸ºå½“å‰å·¥ç¨‹æ¿€æ´»ç‹¬ç«‹çš„pythonç¯å¢ƒï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv install</code></pre></div></li>

<li><p>è¿›å…¥pipenvçš„ç‹¬ç«‹ç¯å¢ƒï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pipenv shell</code></pre></div>
<p>è¿›å…¥åä¼šçœ‹åˆ°å‘½ä»¤è¡Œæ¯æ¡å‘½ä»¤è¾“å…¥å‰å¤šäº†ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œå½¢å¦‚<code>(pin2chars-E2eD5P-4)</code></p></li>

<li><p>åœ¨å®‰è£…å’Œä½¿ç”¨åº“ <strong>pytesseract</strong> å’Œ <strong>tesseract_ocr</strong> ä¹‹å‰éœ€è¦å®‰è£… <strong>tesseract</strong>ï¼š</p>

<ul>
<li>macOSä¸‹ï¼š<code>brew install tesseract</code></li>
<li>å…¶å®ƒç³»ç»Ÿï¼Œæ ¹æ®è‡ªå·±ç³»ç»Ÿçš„åŒ…å®‰è£…æ–¹æ³•å®‰è£…ï¼›</li>
</ul></li>

<li><p>ç„¶åä½¿ç”¨ <code>pip3</code> å®‰è£…åº“ï¼ˆåº“ä¼šå®‰è£…åœ¨å½“å‰çš„æ¿€æ´»ç¯å¢ƒä¸­ï¼‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install pipenv pytesseract tesseract_ocr pillow</code></pre></div></li>
</ol>

<h2 id="pytesseract-å’Œ-tesseract-ocr-åº“-python3-ç ´è§£éªŒè¯ç -https-www-jianshu-com-p-ff2ce797cf70">pytesseract å’Œ tesseract_ocr åº“<sup class="footnote-ref" id="fnref:python3-https-ww"><a href="#fn:python3-https-ww">1</a></sup></h2>

<p><strong>pytesseract</strong> å’Œ <strong>tesseract_ocr</strong> åº“éƒ½åŸºäºå·¥å…· <strong>tesseract</strong>ï¼Œè¿™ä¸¤ä¸ªåº“åªéœ€å„è‡ªè°ƒç”¨ä¸€ä¸ªæ–¹æ³•å°±èƒ½å®ç°éªŒè¯ç çš„è¯†åˆ«ï¼Œéå¸¸ç®€å•ã€‚ä¸‹é¢ä½¿ç”¨ ipython çœ‹ä¸€ä¸‹ä½¿ç”¨æ–¹æ³•ï¼Œè¿™é‡Œå‡†å¤‡ä¸€ä¸ªéªŒè¯ç å›¾ç‰‡ <code>code.gif</code> ä½œä¸ºè¯†åˆ«å¯¹è±¡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181013153938827799704.gif" alt="20181013153938827799704.gif" /></p>

<h3 id="pytesseract-åº“è¯†åˆ«éªŒè¯ç ">pytesseract åº“è¯†åˆ«éªŒè¯ç </h3>

<p>ä½¿ç”¨åº“ä¸­çš„ <code>image_to_string</code> æ–¹æ³•ä¼ å…¥å›¾ç‰‡çš„è·¯å¾„ï¼Œæ¯”å¦‚ä¸Šé¢çš„å›¾ç‰‡ <code>code.gif</code> ä¸ºä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="o">(</span>pin2chars-E2eD5P-4<span class="o">)</span> âœ  pin2chars git:<span class="o">(</span>master<span class="o">)</span> âœ— ipython
Python <span class="m">3</span>.7.0 <span class="o">(</span>default, Sep <span class="m">18</span> <span class="m">2018</span>, <span class="m">18</span>:47:08<span class="o">)</span>

In <span class="o">[</span><span class="m">1</span><span class="o">]</span>: import pytesseract

In <span class="o">[</span><span class="m">2</span><span class="o">]</span>: pytesseract.image_to_string<span class="o">(</span><span class="s1">&#39;code.gif&#39;</span><span class="o">)</span>
Out<span class="o">[</span><span class="m">2</span><span class="o">]</span>: <span class="s1">&#39;7S9T9Jâ€™&#39;</span></code></pre></div>
<p>å›¾åƒç»è¿‡äºŒå€¼åŒ–å¤„ç†çš„è¯å¯èƒ½æ•ˆæœæ›´å¥½ä¸€äº›ã€‚</p>

<h3 id="tesseract-ocr-åº“è¯†åˆ«éªŒè¯ç ">tesseract_ocr åº“è¯†åˆ«éªŒè¯ç </h3>

<p>ä½¿ç”¨åº“ä¸­çš„ <code>text_for_filename</code> æ–¹æ³•ä¼ å…¥å›¾ç‰‡çš„è·¯å¾„ï¼Œæ¯”å¦‚ä¸Šé¢çš„å›¾ç‰‡ <code>code.gif</code> ä¸ºä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="o">(</span>pin2chars-E2eD5P-4<span class="o">)</span> âœ  pin2chars git:<span class="o">(</span>master<span class="o">)</span> âœ— ipython
Python <span class="m">3</span>.7.0 <span class="o">(</span>default, Sep <span class="m">18</span> <span class="m">2018</span>, <span class="m">18</span>:47:08<span class="o">)</span>

In <span class="o">[</span><span class="m">1</span><span class="o">]</span>: import tesseract_ocr

In <span class="o">[</span><span class="m">2</span><span class="o">]</span>: tesseract_ocr.text_for_filename<span class="o">(</span><span class="s1">&#39;code.gif&#39;</span><span class="o">)</span>
Warning. Invalid resolution <span class="m">0</span> dpi. Using <span class="m">70</span> instead.
Out<span class="o">[</span><span class="m">2</span><span class="o">]</span>: <span class="s1">&#39;7S9T9Jâ€™&#39;</span></code></pre></div>
<p>å›¾åƒç»è¿‡äºŒå€¼åŒ–å¤„ç†çš„è¯å¯èƒ½æ•ˆæœæ›´å¥½ä¸€äº›ã€‚</p>

<h2 id="è‡ªå®ç°åº“-pin-cracker">è‡ªå®ç°åº“ pin_cracker</h2>

<p>è‡ªå®ç°æ–¹æ³•çš„æ€è·¯ï¼šå…ˆäºŒå€¼åŒ–å›¾ç‰‡ï¼Œç„¶ååˆ†å‰²å›¾ç‰‡çš„å•ä¸ªå­—ç¬¦å›¾ç‰‡æ•°æ®ï¼Œæœ€ååˆ©ç”¨å‘é‡ç©ºé—´è¯†åˆ«æ–¹æ³•å¾—åˆ°å­—ç¬¦ã€‚</p>

<p>å¯¼å…¥å¿…è¦åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span></code></pre></div>
<h3 id="äºŒå€¼åŒ–å›¾ç‰‡">äºŒå€¼åŒ–å›¾ç‰‡</h3>

<p>æ–°å»ºæ–‡ä»¶ <code>pin_cracker.py</code>ï¼Œè‡ªå®ç°åº“çš„ä»£ç å‡å­˜åœ¨æ­¤æ–‡ä»¶ä¸­ã€‚è§‚å¯Ÿåˆ°éªŒè¯ç å›¾ç‰‡ä¸­ï¼Œå­—ç¬¦ä½ç½®å¯¹åº”åƒç´ é¢œè‰²æ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œå¯ä»¥å…ˆæ‰¾åˆ°åƒç´ é¢œè‰²æœ€å¤šçš„é¢œè‰²ï¼Œåˆ—å‡ºæ¥ï¼Œé€‰æ‹©å™¨å…¶ä¸­æ­£ç¡®çš„åƒç´ å€¼ä½œä¸ºé˜ˆå€¼ã€‚</p>

<p>å…ˆå°†å›¾ç‰‡ç°åº¦åŒ–ï¼Œè¿™æ ·æ¯ä¸ªåƒç´ ç‚¹çš„å–å€¼èŒƒå›´å°±æ˜¯ <strong>[0, 255]</strong> äº†ï¼Œå–å¾—åƒç´ åˆ†å¸ƒç›´æ–¹å›¾æ•°æ®:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_binary_image</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;å¾—åˆ°äºŒå€¼åŒ–å›¾ç‰‡æ•°æ®&#39;&#39;&#39;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&#34;P&#34;</span><span class="p">)</span>
    <span class="n">his</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">histogram</span><span class="p">()</span>
    <span class="n">his_10</span> <span class="o">=</span> <span class="p">[(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span><span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">his</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">his_10</span><span class="p">)</span></code></pre></div>
<p>å¾—åˆ°ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span>
    <span class="o">(</span><span class="m">255</span>, <span class="m">625</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">212</span>, <span class="m">365</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">220</span>, <span class="m">186</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">219</span>, <span class="m">135</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">169</span>, <span class="m">132</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">227</span>, <span class="m">116</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">213</span>, <span class="m">115</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">234</span>, <span class="m">21</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">205</span>, <span class="m">18</span><span class="o">)</span>, 
    <span class="o">(</span><span class="m">184</span>, <span class="m">15</span><span class="o">)</span>
<span class="o">]</span></code></pre></div>
<p>é€‰æ‹©å…¶ä¸­ <strong>220</strong> å’Œ <strong>227</strong> å€¼ä½œä¸ºé˜ˆå€¼ã€‚æœ€ç»ˆå®ç°å°è£…ä¸ºå‡½æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_binary_image</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;å¾—åˆ°äºŒå€¼åŒ–å›¾ç‰‡æ•°æ®&#39;&#39;&#39;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&#34;P&#34;</span><span class="p">)</span>
    <span class="c1"># his = img.histogram()</span>
    <span class="c1"># his_10 = [(j, k) for j,k in sorted(enumerate(his), key=lambda x:x[1], reverse = True)[:10]]</span>
    <span class="c1"># print(his_10)</span>
    
    <span class="n">threshold</span> <span class="o">=</span> <span class="p">[</span><span class="mi">213</span><span class="p">,</span> <span class="mi">219</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">227</span><span class="p">]</span>
    <span class="n">binary_img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&#34;P&#34;</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">pix</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">pix</span> <span class="ow">in</span> <span class="n">threshold</span><span class="p">:</span>
                <span class="c1"># these are the numbers to get</span>
                <span class="n">binary_img</span><span class="o">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">binary_img</span></code></pre></div>
<p>è¯•ä¸€ä¸‹æ•ˆæœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">bimg</span> <span class="o">=</span> <span class="n">get_binary_image</span><span class="p">(</span><span class="s1">&#39;code.gif&#39;</span><span class="p">)</span>
<span class="n">bimg</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>
<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/201810131539388080128.png" alt="201810131539388080128.png" /></p>

<h3 id="åˆ†å‰²å›¾ç‰‡">åˆ†å‰²å›¾ç‰‡</h3>

<p>å›¾ç‰‡æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ç®€å•çš„çºµå‘åˆ‡å‰²å¾—åˆ°æ¯ä¸ªå­—ç¬¦çš„åƒç´ èŒƒå›´ï¼Œä¸€åˆ—ä¸€åˆ—åœ°åˆ¤æ–­åƒç´ å€¼ï¼Œå…¨æ˜¯1é‚£å°±ä¸æ˜¯å­—ç¬¦åŒºï¼Œæœ€ç»ˆå°è£…å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">slice_image</span><span class="p">(</span><span class="n">bimg</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;é€šè¿‡ä¼ å…¥çš„äºŒå€¼åŒ–å›¾ç‰‡æ•°æ®è¿›è¡Œçºµå‘åˆ‡å›¾ï¼Œå¾—åˆ°æ¯ä¸ªå­—ç¬¦çš„åˆ†å‰²å›¾ï¼Œå¹¶è¿”å›å›¾ç‰‡æ•°é‡&#39;&#39;&#39;</span>
    <span class="n">letters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">foundletter</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">letter_start</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">letter_end</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bimg</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">pixelist</span> <span class="o">=</span> <span class="p">[</span><span class="n">bimg</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bimg</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
        <span class="n">has_p</span> <span class="o">=</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">pixelist</span>
        <span class="k">if</span> <span class="n">foundletter</span> <span class="o">==</span> <span class="bp">False</span> <span class="ow">and</span> <span class="n">has_p</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">foundletter</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">letter_start</span> <span class="o">=</span> <span class="n">x</span>
        <span class="k">if</span> <span class="n">foundletter</span> <span class="o">==</span> <span class="bp">True</span> <span class="ow">and</span> <span class="n">has_p</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="n">foundletter</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">letter_end</span> <span class="o">=</span> <span class="n">x</span>
            <span class="n">letters</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">letter_start</span><span class="p">,</span> <span class="n">letter_end</span><span class="p">))</span>
    
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">letter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">letters</span><span class="p">):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">bimg</span><span class="o">.</span><span class="n">crop</span><span class="p">((</span><span class="n">letter</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">letter</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bimg</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;{index}.gif&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">letters</span><span class="p">)</span></code></pre></div>
<h3 id="å‘é‡ç©ºé—´">å‘é‡ç©ºé—´</h3>

<p>è¿™é‡Œä½¿ç”¨å‘é‡ç©ºé—´æœç´¢å¼•æ“æ¥åšå­—ç¬¦è¯†åˆ«ï¼Œå®ƒå…·ä¹Ÿæœ‰ä¼˜ç‚¹ä¹Ÿæœ‰ç¼ºç‚¹<sup class="footnote-ref" id="fnref:python-https-www"><a href="#fn:python-https-www">2</a></sup>:</p>

<p>ä¼˜ç‚¹ï¼š</p>

<ul>
<li>ä¸éœ€è¦å¤§é‡çš„è®­ç»ƒè¿­ä»£</li>
<li>ä¸ä¼šè®­ç»ƒè¿‡åº¦</li>
<li>å¯ä»¥éšæ—¶åŠ å…¥/ç§»é™¤é”™è¯¯çš„æ•°æ®æŸ¥çœ‹æ•ˆæœ</li>
<li>å¾ˆå®¹æ˜“ç†è§£å’Œä»£ç å®ç°</li>
<li>æä¾›åˆ†çº§ç»“æœï¼Œå¯ä»¥æŸ¥çœ‹æœ€æ¥è¿‘çš„å¤šä¸ªåŒ¹é…</li>
<li>å¯¹äºæ— æ³•è¯†åˆ«çš„ä¸œè¥¿åªè¦åŠ å…¥åˆ°æœç´¢å¼•æ“ä¸­ï¼Œé©¬ä¸Šå°±èƒ½è¯†åˆ«</li>
</ul>

<p>ç¼ºç‚¹ï¼š</p>

<ul>
<li>åˆ†ç±»é€Ÿåº¦æ…¢äºç¥ç»ç½‘ç»œåˆ†ç±»</li>
<li>æ‰¾ä¸åˆ°è‡ªå·±çš„æ–¹æ³•è§£å†³é—®é¢˜</li>
</ul>

<p>é˜…è¯»<a href="http://ondoc.logand.com/d/2697/pdf" target="_blank">Basic Vector Space Search Engine Theory</a> å¯ä»¥äº†è§£å‘é‡ç©ºé—´æœç´¢å¼•æ“åŸç†ã€‚æ‹¿æ–‡ç« é‡Œçš„ä¾‹å­é€šä¿—è®²ï¼šè¦é‡åŒ–æ–‡æ¡£çš„ç›¸ä¼¼åº¦ï¼Œå¯ä»¥æ¯”è¾ƒ2ç¯‡æ–‡æ¡£æ‰€ä½¿ç”¨çš„ç›¸åŒå•è¯æ•°é‡ï¼Œè¶Šå¤šçš„è¯ä¸¤ç¯‡æ–‡ç« å°±è¶Šç›¸ä¼¼ï¼å•è¯å¤ªå¤šäº†ä¹Ÿä¸è¦ç´§ï¼Œå¯ä»¥é€‰æ‹©å‡ ä¸ªå…³é”®å•è¯ï¼Œé€‰æ‹©çš„å•è¯åˆè¢«ç§°ä½œç‰¹å¾ï¼Œæ¯ä¸€ä¸ªç‰¹å¾å°±å¥½æ¯”ç©ºé—´ä¸­çš„ä¸€ä¸ªç»´åº¦ï¼ˆx,y,zç­‰ï¼‰ï¼Œä¸€ç»„ç‰¹å¾å°±æ˜¯ä¸€ä¸ªçŸ¢é‡ï¼Œæ¯ä¸€ä¸ªæ–‡æ¡£æˆ‘ä»¬å°±èƒ½å¾—åˆ°è¿™ä¹ˆä¸€ä¸ªçŸ¢é‡ï¼Œåªè¦è®¡ç®—çŸ¢é‡ä¹‹é—´çš„å¤¹è§’å°±èƒ½å¾—åˆ°æ–‡ç« çš„ç›¸ä¼¼åº¦äº†ã€‚</p>

<p>å…ˆå®ç°ä¸€ä¸ªå‘é‡ç©ºé—´ç±»ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">VectorCompare</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">magnitude</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concordance</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;çŸ¢é‡å¤§å°&#34;&#34;&#34;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">concordance</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">count</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">relation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">concordance1</span><span class="p">,</span> <span class="n">concordance2</span><span class="p">):</span>
        <span class="s2">&#34;&#34;&#34;çŸ¢é‡ä¹‹é—´çš„å¤¹è§’çš„coså€¼&#34;&#34;&#34;</span>
        <span class="n">topvalue</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">word</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">concordance1</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">concordance2</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
                <span class="n">topvalue</span> <span class="o">+=</span> <span class="n">count</span> <span class="o">*</span> <span class="n">concordance2</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">topvalue</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span><span class="p">(</span><span class="n">concordance1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">magnitude</span><span class="p">(</span><span class="n">concordance2</span><span class="p">))</span></code></pre></div>
<p>å®šä¹‰ä¸€ä¸ªå°†å›¾ç‰‡è½¬æ¢ä¸ºå‘é‡çš„æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">build_vector</span><span class="p">(</span><span class="n">im</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;å°†å›¾ç‰‡è½¬æ¢ä¸ºçŸ¢é‡&#39;&#39;&#39;</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">im</span><span class="o">.</span><span class="n">getdata</span><span class="p">():</span>
        <span class="n">vector</span><span class="p">[</span><span class="n">count</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">vector</span></code></pre></div>
<h3 id="å»ºç«‹æ ·æœ¬åº“">å»ºç«‹æ ·æœ¬åº“</h3>

<p>éœ€è¦å–å¤§é‡éªŒè¯ç å›¾ç‰‡æå–å•ä¸ªå­—ç¬¦å›¾ç‰‡ä½œä¸ºè®­ç»ƒé›†åˆï¼Œè¿™ä¸€éƒ¨åˆ†å·¥ä½œå¯ä»¥åˆ©ç”¨ <a href="#äºŒå€¼åŒ–å›¾ç‰‡" target="_blank">äºŒå€¼åŒ–å›¾ç‰‡</a> å’Œ <a href="#åˆ†å‰²å›¾ç‰‡" target="_blank">åˆ†å‰²å›¾ç‰‡</a> æè¿°çš„æ–¹æ³•ï¼Œå¯¹æœé›†åˆ°çš„éªŒè¯ç è¿›è¡Œå¤„ç†çš„å¾—åˆ°å•ä¸ªå­—ç¬¦çš„å›¾ç‰‡ï¼Œæœ€ç»ˆå¾—åˆ°ä»¥ä¸‹å­—ç¬¦é›†å¯¹åº”çš„è®­ç»ƒé›†åˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">charset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="s1">&#39;9&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">]</span></code></pre></div>
<p>è¿™é‡Œå°±ä¸æ¼”ç¤ºæ€ä¹ˆè§åº“äº†ï¼Œå¯ä»¥ä½¿ç”¨<a href="https://www.shiyanlou.com/teacher/8834" target="_blank">å®éªŒæ¥¼è€å¸ˆekCit </a>å»ºç«‹å¥½çš„æ ·æœ¬åº“ï¼š<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/blog/pin_cracker/iconset.zip" target="_blank">iconset</a></p>

<p>ä»æ ·æœ¬åº“ä¸­å»ºç«‹è®­ç»ƒæ•°æ®é›†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">load_iconset</span><span class="p">(</span><span class="n">iconset</span><span class="p">,</span> <span class="n">dir_path</span><span class="o">=</span><span class="s1">&#39;./iconset&#39;</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;åŠ è½½è®­ç»ƒé›†æ•°æ®&#39;&#39;&#39;</span>
    <span class="n">imageset</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">iconset</span><span class="p">:</span>
        <span class="n">letter_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">letter</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">letter_dir</span><span class="p">):</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="s1">&#39;.gif&#39;</span> <span class="ow">in</span> <span class="n">img</span><span class="p">:</span>
                <span class="n">img_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">letter_dir</span><span class="p">,</span> <span class="n">img</span><span class="p">)</span>
                <span class="n">letter_image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">img_path</span><span class="p">)</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">build_vector</span><span class="p">(</span><span class="n">letter_image</span><span class="p">))</span>
                <span class="n">imageset</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">letter</span><span class="p">:</span> <span class="n">temp</span><span class="p">})</span>
    
    <span class="k">return</span> <span class="n">imageset</span></code></pre></div>
<h3 id="è®­ç»ƒè¯†åˆ«">è®­ç»ƒè¯†åˆ«</h3>

<p>æœ‰äº†æ ·æœ¬åº“å°±å¯ä»¥è¿›è¡Œè®­ç»ƒè¯†åˆ«äº†ï¼Œä¸‹é¢æ˜¯å®ç°ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">guess_image_by</span><span class="p">(</span><span class="n">imageset</span><span class="p">,</span> <span class="n">bimg</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;æ ¹æ®æ ·æœ¬æ•°æ®è¯†åˆ«&#39;&#39;&#39;</span>
    <span class="n">guess</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">VectorCompare</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">slice_image</span><span class="p">(</span><span class="n">bimg</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">imageset</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">guess</span><span class="o">.</span><span class="n">append</span><span class="p">((</span> <span class="n">v</span><span class="o">.</span><span class="n">relation</span><span class="p">(</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">build_vector</span><span class="p">(</span><span class="n">img</span><span class="p">)),</span> <span class="n">x</span><span class="p">))</span>
        <span class="n">guess</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">yield</span> <span class="n">guess</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></code></pre></div>
<h3 id="è¯†åˆ«å‡½æ•°">è¯†åˆ«å‡½æ•°</h3>

<p>ç»¼åˆä¸Šè¿°ï¼Œç¼–å†™è¯†åˆ«æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">image_to_string</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">bimg</span> <span class="o">=</span> <span class="n">get_binary_image</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">iconset</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">,</span> <span class="s1">&#39;8&#39;</span><span class="p">,</span> <span class="s1">&#39;9&#39;</span><span class="p">,</span>
        <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;t&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span>
    <span class="p">]</span>
    <span class="n">imageset</span> <span class="o">=</span> <span class="n">load_iconset</span><span class="p">(</span><span class="n">iconset</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">guess_tuple</span> <span class="ow">in</span> <span class="n">guess_image_by</span><span class="p">(</span><span class="n">imageset</span><span class="p">,</span> <span class="n">bimg</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">+=</span> <span class="n">guess_tuple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">s</span></code></pre></div>
<h3 id="æµ‹è¯•">æµ‹è¯•</h3>

<p>ç¼–å†™ä¸»å‡½æ•°å†…å®¹:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">image_to_string</span><span class="p">(</span><span class="s1">&#39;code.gif&#39;</span><span class="p">))</span></code></pre></div>
<p>æœ€ç»ˆè„šæœ¬å†…å®¹å‚è€ƒï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/pin2chars/pin_cracker.py" target="_blank">tools-with-script/pin2chars/pin_cracker.py</a></p>

<p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pin_cracker.py
777ttt</code></pre></div>
<p>æ­å–œæˆ‘ï¼Œä»¥å¤±è´¥å‘Šç»ˆï¼Œå´©æºƒã€‚ä¸è¿‡æ€è·¯æ˜¯å¯¹çš„ï¼Œä¸çŸ¥é“å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œå…ˆä¸ç ”ç©¶äº†ï¼Œä¸»è¦ç›®çš„è¿˜æ˜¯ç»ƒä¹ pythonç¼–ç¨‹ï¼Œæœ‰æ—¶é—´å†è¯´å§ï¼</p>

<h2 id="ç¼–å†™éªŒè¯ç è¯†åˆ«å™¨">ç¼–å†™éªŒè¯ç è¯†åˆ«å™¨</h2>

<h3 id="å®ç°">å®ç°</h3>

<p>ç»¼åˆä¸Šé¢ç¬¬ä¸‰æ–¹åº“å’Œè‡ªå·±å®ç°çš„åº“ï¼Œpython3 å®ç°ä¸€ä¸ªå‘½ä»¤è¡Œå°å·¥å…·ï¼Œæ–°å»ºåä¸º <code>pin2chars</code> çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">pin_cracker</span>
<span class="kn">import</span> <span class="nn">pytesseract</span>
<span class="kn">import</span> <span class="nn">tesseract_ocr</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>


<span class="k">def</span> <span class="nf">get_args</span><span class="p">():</span>
    <span class="s1">&#39;&#39;&#39;å¾—åˆ°å‘½ä»¤å‚æ•°
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="s2">&#34;--method&#34;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;é€‰æ‹©æ–¹æ³•è¿›è¡ŒéªŒè¯ç çš„è¯†åˆ«:  0. ä½¿ç”¨ pin_cracker åº“æ–¹æ³•è¯†åˆ«éªŒè¯ç ; 1. ä½¿ç”¨ pytesseract åº“æ–¹æ³•è¯†åˆ«éªŒè¯ç ; 2. ä½¿ç”¨ tesseract_ocr åº“æ–¹æ³•è¯†åˆ«éªŒè¯ç ;&#39;</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;imgfile&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šè¦è¯†åˆ«çš„éªŒè¯ç å›¾ç‰‡&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">init_methods</span><span class="p">():</span>
    <span class="s1">&#39;&#39;&#39;åˆå§‹åŒ–æ–¹æ³•åˆ—è¡¨
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">pin_cracker</span><span class="o">.</span><span class="n">image_to_string</span><span class="p">,</span>
            <span class="s1">&#39;tip&#39;</span><span class="p">:</span> <span class="s1">&#39;pin_cracker åº“çš„è¯†åˆ«ç»“æœï¼š&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">pytesseract</span><span class="o">.</span><span class="n">image_to_string</span><span class="p">,</span>
            <span class="s1">&#39;tip&#39;</span><span class="p">:</span> <span class="s1">&#39;pytesseract åº“çš„è¯†åˆ«ç»“æœï¼š&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="n">tesseract_ocr</span><span class="o">.</span><span class="n">text_for_filename</span><span class="p">,</span>
            <span class="s1">&#39;tip&#39;</span><span class="p">:</span> <span class="s1">&#39;tesseract_ocr åº“çš„è¯†åˆ«ç»“æœï¼š&#39;</span>
        <span class="p">}</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">methods</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">get_args</span><span class="p">()</span>
    <span class="n">methods</span> <span class="o">=</span> <span class="n">init_methods</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">imgfile</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;.gif&#39;</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">imgfile</span><span class="p">:</span> <span class="c1"># é¿å… tesseract è¯»å– gif å›¾ç‰‡å‡ºé—®é¢˜</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;b_code.png&#39;</span>
            <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">imgfile</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">args</span><span class="o">.</span><span class="n">imgfile</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="k">print</span><span class="p">(</span><span class="n">methods</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">method</span><span class="p">][</span><span class="s1">&#39;tip&#39;</span><span class="p">],</span> <span class="n">methods</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">method</span><span class="p">][</span><span class="s1">&#39;method&#39;</span><span class="p">](</span><span class="n">args</span><span class="o">.</span><span class="n">imgfile</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;è¯·ç»™å®šæœ‰æ•ˆå›¾ç‰‡è·¯å¾„ï¼&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="æµ‹è¯•-1">æµ‹è¯•</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="o">(</span>pin2chars-E2eD5P-4<span class="o">)</span> âœ  pin2chars git:<span class="o">(</span>master<span class="o">)</span> âœ— ./pin2chars -m<span class="o">=</span><span class="m">0</span> code.gif
pin_cracker åº“çš„è¯†åˆ«ç»“æœï¼š 777ttt
<span class="o">(</span>pin2chars-E2eD5P-4<span class="o">)</span> âœ  pin2chars git:<span class="o">(</span>master<span class="o">)</span> âœ— ./pin2chars -m<span class="o">=</span><span class="m">1</span> code.gif
pytesseract åº“çš„è¯†åˆ«ç»“æœï¼š 7S9T9Jâ€™
<span class="o">(</span>pin2chars-E2eD5P-4<span class="o">)</span> âœ  pin2chars git:<span class="o">(</span>master<span class="o">)</span> âœ— ./pin2chars -m<span class="o">=</span><span class="m">2</span> code.gif
Info in pixReadStreamPng: converting <span class="o">(</span>cmap + alpha<span class="o">)</span> <span class="o">==</span>&gt; RGBA
Info in pixReadStreamPng: converting <span class="m">8</span> bpp cmap with <span class="nv">alpha</span> <span class="o">==</span>&gt; RGBA
Warning. Invalid resolution <span class="m">0</span> dpi. Using <span class="m">70</span> instead.
tesseract_ocr åº“çš„è¯†åˆ«ç»“æœï¼š 7S9T9Jâ€™</code></pre></div>
<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡å®ç°äº†ä¸€ä¸ªç®€å•çš„éªŒè¯ç è¯†åˆ«å™¨ï¼Œä½¿ç”¨äº†ä¸‰ä¸ªæ–¹æ³•ï¼Œå‰ä¸¤ç§ä½¿ç”¨ç°æœ‰åº“ï¼Œåä¸€ç§ä½¿ç”¨äº†åˆ†å‰²å›¾ç‰‡ + å‘é‡è¯†åˆ«çš„æ–¹å¼ç®€å•å®ç°äº†éªŒè¯ç çš„è¯†åˆ«ï¼Œé€šè¿‡æœ¬æ–‡ç†Ÿæ‚‰äº† <strong>argparse</strong>ã€<strong>pillow</strong> ç­‰åº“çš„ä½¿ç”¨ï¼Œé€šè¿‡å®è·µç»ƒä¹ äº†pythonçš„åŸºæœ¬ä½¿ç”¨ï¼ŒPeaceï¼è¿™é‡Œçš„æ–¹æ³•æ˜æ˜¾å¤„ç†ä¸äº†æ›´åŠ å¤æ‚çš„éªŒè¯ç ï¼Œè¦æƒ³æå‡æ–¹æ³•çš„é€‚åº”æ€§ï¼Œè¿˜å¾—å¢åŠ æ–°çš„åˆ¤åˆ«æ–¹æ³•ï¼Œåç»­æœ‰æ—¶é—´çš„è¯å†ç ”ç©¶å§ã€‚</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:python3-https-ww"><a href="https://www.jianshu.com/p/ff2ce797cf70" target="_blank">python3 ç ´è§£éªŒè¯ç </a> <a class="footnote-return" href="#fnref:python3-https-ww"><sup>[return]</sup></a></li>
<li id="fn:python-https-www"><a href="https://www.shiyanlou.com/courses/364" target="_blank">å®éªŒæ¥¼ â€”â€” python ç ´è§£éªŒè¯ç </a> <a class="footnote-return" href="#fnref:python-https-www"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>stm32å¼€å‘æ–°æ–¹å¼-platformioçš„IDE</title>
			<link>https://www.smslit.top/2018/10/10/vscode-pio-ide/</link>
			<pubDate>Wed, 10 Oct 2018 16:25:37 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/10/vscode-pio-ide/</guid>
			<description>&lt;p&gt;&lt;a href=&#34;http://platformio.org/&#34; target=&#34;_blank&#34;&gt;platformio&lt;/a&gt;æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ç‰©è”ç½‘å¼€å‘çš„ç”Ÿæ€ç¯å¢ƒï¼Œ&lt;a href=&#34;https://code.visualstudio.com&#34; target=&#34;_blank&#34;&gt;VS Code&lt;/a&gt; è¿™æ¬¾å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨è¾…ä»¥ &lt;strong&gt;PlatformIO IDE&lt;/strong&gt; æ’ä»¶å°±å¯ä»¥åŒ–èº«ä¸ºä¸€æ¬¾å¼ºå¤§çš„MCUå¼€å‘ç¯å¢ƒï¼Œæ”¯æŒç»å¤§å¤šæ•°æµè¡Œçš„å•ç‰‡æœºå¹³å°ï¼Œæ¯”å¦‚ä»Šå¤©è¦è®¨è®ºçš„ stm32 ç³»åˆ—å•ç‰‡æœºã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018101015391609436627.png&#34; alt=&#34;2018101015391609436627.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p><a href="http://platformio.org/" target="_blank">platformio</a>æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„ç‰©è”ç½‘å¼€å‘çš„ç”Ÿæ€ç¯å¢ƒï¼Œ<a href="https://code.visualstudio.com" target="_blank">VS Code</a> è¿™æ¬¾å¼ºå¤§çš„æ–‡æœ¬ç¼–è¾‘å™¨è¾…ä»¥ <strong>PlatformIO IDE</strong> æ’ä»¶å°±å¯ä»¥åŒ–èº«ä¸ºä¸€æ¬¾å¼ºå¤§çš„MCUå¼€å‘ç¯å¢ƒï¼Œæ”¯æŒç»å¤§å¤šæ•°æµè¡Œçš„å•ç‰‡æœºå¹³å°ï¼Œæ¯”å¦‚ä»Šå¤©è¦è®¨è®ºçš„ stm32 ç³»åˆ—å•ç‰‡æœºã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018101015391609436627.png" alt="2018101015391609436627.png" /></p>

<h2 id="æµ‹è¯•ç¯å¢ƒåŠå·¥å…·">æµ‹è¯•ç¯å¢ƒåŠå·¥å…·</h2>

<ol>
<li>æœ¬æ–‡è®²è§£ä½¿ç”¨çš„ç³»ç»Ÿå¹³å°æ˜¯ macOS 10.14ï¼Œå…¶å®ƒå¹³å°æ¯”å¦‚ linuxã€windows æ­¥éª¤å’Œæ“ä½œåŸºæœ¬ç±»ä¼¼ï¼›</li>
<li>stm32 å¼€å‘æ¿æ˜¯ä»¥stm32f103c8t6ä¸ºæ ¸å¿ƒçš„æœ€å°ç³»ç»Ÿæ¿ï¼›</li>
<li>stm32 èŠ¯ç‰‡è°ƒè¯•å™¨ä½¿ç”¨çš„æ˜¯ stlink v2ï¼›</li>
</ol>

<h2 id="platformio-ide-æ­å»º">platformio IDE æ­å»º</h2>

<ol>
<li>ä¸‹è½½å¯¹åº”å¹³å°çš„<a href="https://code.visualstudio.com" target="_blank">VS Code</a>ï¼Œè¿™é‡Œä¸‹è½½ mac ç‰ˆçš„ï¼Œä¸‹è½½å®Œæˆåå®‰è£…å³å¯ï¼›
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153916303585687.jpg" alt="20181010153916303585687.jpg" /></li>
<li>æ‰“å¼€ vs code ï¼Œç‚¹å‡»å·¦ä¾§ç¬¬äº”ä¸ªæŒ‰é’®ï¼Œæ˜¾ç¤ºæ’ä»¶ç®¡ç†ç•Œé¢ï¼Œæœç´¢æ’ä»¶ <strong>PlatformIO IDE</strong>ï¼Œå¹¶å®‰è£…æ­¤æ’ä»¶ï¼›
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153916446822188.png" alt="20181010153916446822188.png" />
å®‰è£…è¿‡ç¨‹è€å¿ƒç­‰å¾…ï¼ŒæˆåŠŸåä¼šæœ‰æç¤ºï¼</li>
</ol>

<h2 id="platformio-ide-ç®€ä»‹">platformio IDE ç®€ä»‹</h2>

<p>é‡æ–°æ‰“å¼€å®‰è£…å¥½æ’ä»¶çš„ VS Code ï¼Œä¼šçœ‹åˆ°å·¦ä¸‹è§’å¤šäº†ä¸€ä¸ªå°æˆ¿å­logoæ ·å¼çš„æŒ‰é’®ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®å°±ä¼šæ‰“å¼€ Platformio ä¸»é¡µï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153916512699587.png" alt="20181010153916512699587.png" /></p>

<p>å¯ä»¥çœ‹åˆ°ä¸»é¡µä¸­æœ€é¡¶ç«¯åŒ…å«äº†ä¸€ä¸ªå¯¼èˆªæ ï¼Œæœ‰ç”¨çš„å°±æ˜¯å‰è¿›åé€€çš„æŒ‰é’®å’Œè´¦æˆ·ç›¸å…³çš„äº¤äº’å…ƒç´ ï¼Œæ•´ä¸ªä¸»é¡µå…¶å®æ˜¯Platformioåœ¨æœ¬åœ°å¼€å¯äº†ä¸€ä¸ªwebåº”ç”¨ï¼ˆç±»ä¼¼äºä¸€ä¸ªç®€å•çš„å°ç½‘ç«™ï¼‰ï¼ŒåŒ…å«äº†Homeã€Accountã€Librariesã€Boardsã€Platformså’ŒDeviceså…­ä¸ªæ ‡ç­¾é¡µï¼Œä¸‹é¢åˆ†åˆ«ç®€å•è¯´æ˜ä¸€ä¸‹ã€‚</p>

<h3 id="home-æ ‡ç­¾é¡µ">Home æ ‡ç­¾é¡µ</h3>

<p>è¿›å…¥Platformio çš„ä¸»é¡µæ˜¾ç¤ºçš„å°±æ˜¯ Home æ ‡ç­¾é¡µï¼Œæ ‡ç­¾é¡µå†…ä»ä¸Šåˆ°ä¸‹å¯ä»¥ä¾æ¬¡çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p>

<ol>
<li><code>Show at startup</code> çš„å¤é€‰æ¡†ï¼Œå‹¾ä¸Šåï¼Œæ¯æ¬¡å¯åŠ¨ vs code å°±ä¼šå¯åŠ¨è¿™ä¸ªä¸»é¡µï¼›</li>
<li><code>Quick Access</code> ä¸‹æœ‰å››ä¸ªæ“ä½œæŒ‰é’®ï¼Œåˆ†åˆ«æ˜¯ï¼š

<ul>
<li><strong>New Project</strong>ï¼šç”¨äºæ–°å»ºå·¥ç¨‹ï¼›</li>
<li><strong>Import Arduino Project</strong>ï¼šç”¨äºå¯¼å…¥ç”µè„‘ä¸­å·²ç»å­˜åœ¨çš„ Arduino å·¥ç¨‹ï¼›</li>
<li><strong>Open Project</strong>ï¼šç”¨äºæ‰“å¼€å·²ç»å­˜åœ¨çš„ Platformio å·¥ç¨‹ï¼›</li>
<li><strong>Project Examples</strong>ï¼šç”¨äºæ‰“å¼€æœ¬æœºå·²ç»å®‰è£…çš„å•ç‰‡æœºå¹³å°çš„ä¾‹ç¨‹å·¥ç¨‹ï¼›</li>
</ul></li>
<li><code>Recent News</code>ï¼šæ˜¾ç¤ºæœ€æ–° Platformio ä¿¡æ¯ï¼›</li>
</ol>

<h3 id="account-æ ‡ç­¾é¡µ">Account æ ‡ç­¾é¡µ</h3>

<p>è¿™ä¸ªæ ‡ç­¾é¡µç”¨äºç®¡ç†è´¦æˆ·ä¿¡æ¯ï¼Œé¦–æ¬¡æ‰“å¼€çš„æ—¶å€™ï¼Œæ˜¯ç”¨æˆ·ç™»å½•é¡µé¢ï¼Œå½“ç™»å½•å·²æœ‰çš„ Platformio è´¦æˆ·åï¼Œå°±ä¼šæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯å’Œå¯†ç çš„ç›¸å…³æ“ä½œï¼Œè¿™é‡Œå°±ä¸ç»†è®²äº†ï¼</p>

<h3 id="libraries-æ ‡ç­¾é¡µ">Libraries æ ‡ç­¾é¡µ</h3>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153917108391128.png" alt="20181010153917108391128.png" /></p>

<p>Libraries æ ‡ç­¾é¡µæ˜¯ç®¡ç†åº“çš„æ¥å£ï¼Œè¿™é‡Œåªç®€å•è¯´æ˜ä¸€ä¸‹ï¼Œåé¢å¦‚æœæœ‰æ—¶é—´å°±å†™ä¸€ç¯‡æ–‡ç« è¯¦ç»†è®²è§£ä¸€ä¸‹åº“ç®¡ç†ã€‚ä¸»è¦åŒ…å«å››ä¸ªæ ‡ç­¾é¡µï¼š</p>

<ol>
<li><p>Registry æ ‡ç­¾é¡µ</p>

<p>è¿™ä¸ªé¡µé¢æ˜¯æœ‰ä¸€ä¸ªæœç´¢æ¡†ï¼Œæœç´¢æ¡†å†…æ²¡æœ‰å†…å®¹çš„æ—¶å€™ï¼Œä¼šåœ¨æœç´¢æ¡†ä¸‹é¢æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„åº“ï¼Œæœç´¢æ¡†ä¸­è¾“å…¥å…³é”®è¯å°±ä¼šè¿‡æ»¤æ˜¾ç¤ºç›¸å…³çš„åº“ã€‚</p>

<p>ç‚¹å‡»æƒ³è¦å®‰è£…çš„åº“ï¼Œå°±ä¼šè¿›å…¥è¿™ä¸ªåº“çš„è¯¦ç»†é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢é‡Œæœ‰å®‰è£…æŒ‰é’®ã€ä¾‹ç¨‹ã€ä½¿ç”¨æ–¹æ³•ç­‰æ“ä½œæ¥å£ã€‚</p></li>

<li><p>Installed æ ‡ç­¾é¡µ</p>

<p>è¿™é‡Œä¸»è¦å±•ç¤ºæœ¬æœºå·²ç»å®‰è£…çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p></li>

<li><p>Built-in æ ‡ç­¾é¡µ</p>

<p>è¿™é‡Œæ˜¾ç¤ºå·²å®‰è£…å¹³å°å†…ç½®çš„åº“ã€‚</p></li>

<li><p>Updates æ ‡ç­¾é¡µ</p>

<p>å±•ç¤ºéœ€è¦æ›´æ–°çš„åº“ã€‚</p></li>
</ol>

<h3 id="boards-æ ‡ç­¾é¡µ">Boards æ ‡ç­¾é¡µ</h3>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153917351153178.png" alt="20181010153917351153178.png" /></p>

<p>è¿™ä¸ªæ ‡ç­¾é¡µç”¨æ¥å±•ç¤º Platformio æ”¯æŒçš„å¼€å‘æ¿åˆ—è¡¨ï¼Œæœ€ä¸Šæ–¹çš„æœç´¢æ¡†å†…å¯ä»¥è¾“å…¥å…³é”®è¯è¿‡æ»¤æ˜¾ç¤ºç›¸å…³çš„å¼€å‘æ¿ï¼Œæ¯”å¦‚è¾“å…¥ <strong>Arduino</strong> å°±ä¼šæ˜¾ç¤ºArduinoçš„å¼€å‘æ¿ã€‚</p>

<p>åˆ—è¡¨ä¸­æ¯ä¸ªæ¡ç›®æ˜¾ç¤ºä¸€ä¸ªå¼€å‘æ¿ï¼ŒåŒ…å«ä¿¡æ¯ï¼š</p>

<table>
<thead>
<tr>
<th>é¡¹ç›®</th>
<th>å«ä¹‰</th>
</tr>
</thead>

<tbody>
<tr>
<td>Name</td>
<td>å¼€å‘æ¿åç§°</td>
</tr>

<tr>
<td>Platform</td>
<td>å¯¹åº”çš„å•ç‰‡æœºå¹³å°</td>
</tr>

<tr>
<td>Frameworks</td>
<td>æ”¯æŒçš„å¼€å‘æ¡†æ¶</td>
</tr>

<tr>
<td>MCU</td>
<td>å¯¹åº”çš„å•ç‰‡æœºå‹å·</td>
</tr>

<tr>
<td>FRQ</td>
<td>å•ç‰‡æœºå·¥ä½œä¸»é¢‘(Mhz)</td>
</tr>

<tr>
<td>ROM</td>
<td>å•ç‰‡æœºçš„å­˜å‚¨</td>
</tr>

<tr>
<td>RAM</td>
<td>å•ç‰‡æœºå†…å­˜</td>
</tr>

<tr>
<td>Extra</td>
<td>å…¶å®ƒä¿¡æ¯</td>
</tr>
</tbody>
</table>

<h3 id="platforms-æ ‡ç­¾é¡µ">Platforms æ ‡ç­¾é¡µ</h3>

<p>è¿™ä¸ªæ ‡ç­¾é¡µç”¨æ¥ç®¡ç†å¹³å°æ”¯æŒï¼Œæ¯”å¦‚æˆ‘çš„è¿™é‡Œå®‰è£…äº†ä¸¤ä¸ªå•ç‰‡æœºå¹³å°çš„æ”¯æŒï¼š</p>

<ul>
<li>Atmel AVR</li>
<li>ST STM32</li>
</ul>

<p>è¿™ä¸¤ä¸ªæ¡ç›®å¯ä»¥ç‚¹è¿›å»æŸ¥çœ‹å¹³å°è¯¦ç»†ä¿¡æ¯å’Œå¯¹å¹³å°è¿›è¡Œä¸€å®šæ“ä½œã€‚æ ‡ç­¾é¡µå†…è¿˜åŒ…å«æ‰€æœ‰çš„åµŒå…¥å¼ã€æ¡Œé¢å¹³å°çš„ç›¸å…³ç®¡ç†é¡¹ï¼ŒåŒæ—¶ä¹Ÿæœ‰æ¡†æ¶å±•ç¤ºçš„æ ‡ç­¾é¡µï¼Œå¯ä»¥é€šè¿‡è¿™é‡Œçš„æ¯ä¸ªæ¡ç›®äº†è§£å¯¹åº”æ¡†æ¶çš„ä¿¡æ¯å’Œä½¿ç”¨æ–¹æ³•ã€‚</p>

<h3 id="devices-æ ‡ç­¾é¡µ">Devices æ ‡ç­¾é¡µ</h3>

<p>è¿™é‡Œæ˜¾ç¤ºè¿æ¥ç”µè„‘çš„ç¡¬ä»¶è®¾å¤‡ï¼Œæ¯”å¦‚ä¸²å£ã€æ•°å­—é€»è¾‘è®¾å¤‡å’Œç½‘ç»œè®¾å¤‡ã€‚</p>

<h2 id="ä½¿ç”¨-platformio-ide">ä½¿ç”¨ Platformio IDE</h2>

<p>è¿™é‡Œä»¥åˆ›å»º ST STM32 å¹³å°çš„ stm32f103c8t6 èŠ¯ç‰‡å·¥ç¨‹ä¸ºä¾‹ï¼Œè®²è§£ä¸€ä¸‹å·¥ç¨‹çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚</p>

<h3 id="æ–°å»ºå·¥ç¨‹">æ–°å»ºå·¥ç¨‹</h3>

<ol>
<li>æ‰“å¼€ Platformio çš„ä¸»é¡µï¼Œç‚¹å‡» <code>New Projects</code>ï¼›</li>

<li><p>åœ¨å·¥ç¨‹æ–°å»ºçª—å£ä¸­ï¼Œé…ç½®å¦‚ä¸‹åˆ›å»ºåä¸º <strong>blink</strong> çš„å·¥ç¨‹ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153917456152478.png" alt="20181010153917456152478.png" />
æœ€åç‚¹å‡» <strong>Finish</strong> ï¼Œç­‰å¾…ç‰‡åˆ»å·¥ç¨‹å°±ä¼šåˆ›å»ºå®Œæˆã€‚</p>

<p>è¿™é‡Œæš‚æ—¶é€‰æ‹©ä½¿ç”¨æ¡†æ¶ä¸º <code>Arduino</code>ï¼Œstm32è¿˜å¯ä»¥é€‰æ‹©å…¶å®ƒæ¡†æ¶ï¼Œè¿™é‡Œå…ˆæŒ–ä¸ªå‘ï¼Œç­‰æœ‰æ—¶é—´ä¸“é—¨å†™ä¸€ä¸‹é’ˆå¯¹stm32å…¶å®ƒæ¡†æ¶çš„ä½¿ç”¨ã€‚</p></li>
</ol>

<h3 id="å·¥ç¨‹ç•Œé¢ä»‹ç»">å·¥ç¨‹ç•Œé¢ä»‹ç»</h3>

<p>æ–°å»ºå·¥ç¨‹åï¼Œå°±ä¼šæ‰“å¼€ç›¸åº”çš„å·¥ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153917478980641.png" alt="20181010153917478980641.png" /></p>

<h4 id="æ–‡ä»¶ç»“æ„">æ–‡ä»¶ç»“æ„</h4>

<p>çª—å£å·¦ä¾§é»˜è®¤æ˜¾ç¤ºçš„æ˜¯èµ„æºç®¡ç†å™¨ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°æ–‡ä»¶ç»“æ„ã€‚</p>

<ol>
<li><code>.pioenvs</code> æ–‡ä»¶å¤¹ï¼šå­˜æ”¾ç¼–è¯‘äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶å’Œæœ€åç”Ÿæˆçš„æ‰§è¡Œæ–‡ä»¶;</li>
<li><code>lib</code> æ–‡ä»¶å¤¹ï¼šå­˜æ”¾åº“æ–‡ä»¶ï¼›</li>
<li><code>src</code> æ–‡ä»¶å¤¹ï¼šå­˜æ”¾æºæ–‡ä»¶ï¼Œå…¶å†…éƒ¨é»˜è®¤ç”Ÿæˆåä¸º <code>main.cpp</code> çš„æºæ–‡ä»¶ï¼›</li>
<li><code>platformio.ini</code>ï¼šå·¥ç¨‹çš„é…ç½®æ–‡ä»¶</li>
</ol>

<h4 id="å·¥å…·æ ">å·¥å…·æ </h4>

<p>åœ¨å·¥ç¨‹çª—å£çš„å·¦ä¸‹æ–¹ä¼šçœ‹åˆ°å¤šå‡ºæ¥çš„ä¸€äº›æŒ‰é’®ï¼Œè¿™å°±æ˜¯å·¥ç¨‹çš„å·¥å…·æ ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018101015391752644261.png" alt="2018101015391752644261.png" /></p>

<p>ä¾æ¬¡è¯´æ˜è¿™å‡ ä¸ªå¿«æ·æŒ‰é’®çš„ä½œç”¨ï¼š</p>

<ol>
<li>ä¸»é¡µæŒ‰é’®ï¼šå‰é¢å·²ç»æåˆ°è¿‡æ˜¯æ‰“å¼€ Platformio ä¸»é¡µçš„æŒ‰é’®</li>
<li>ç¼–è¯‘æŒ‰é’®ï¼šå°å¯¹å·ï¼Œç‚¹å‡»åä¼šç¼–è¯‘å½“å‰æ¿€æ´»çš„å·¥ç¨‹</li>
<li>çƒ§å†™æŒ‰é’®ï¼šå‘å³çš„å°ç®­å¤´ï¼Œè§¦å‘ç¨‹åºçƒ§å†™çš„è¿‡ç¨‹</li>
<li>è¿œç¨‹çƒ§å†™æŒ‰é’®ï¼šå°äº‘æœµï¼Œè§¦å‘è¿œç¨‹çƒ§å†™ç¨‹åºçš„è¿‡ç¨‹</li>
<li>æ¸…ç†æŒ‰é’®ï¼šå°åƒåœ¾æ¡¶ï¼Œç”¨äºæ¸…ç†ç¼–è¯‘è¿‡ç¨‹ç”Ÿæˆçš„æ–‡ä»¶</li>
<li>æµ‹è¯•æŒ‰é’®ï¼šå°çƒ§ç“¶ï¼Œæµ‹è¯•å·¥ç¨‹ï¼Œå…è´¹ç‰ˆçš„Platformioå—é™ä¸èƒ½ç”¨ï¼›</li>
<li>è¿è¡Œä»»åŠ¡æŒ‰é’®ï¼šå°æœ¬å­ï¼Œä¼šè·³å‡ºæ“ä½œèœå•ï¼ŒåŒ…å«ç¼–è¯‘ã€çƒ§å†™ã€è°ƒè¯•ç­‰æ“ä½œï¼›</li>
<li>ä¸²å£ç›‘è§†å™¨æŒ‰é’®ï¼šå°æ’å¤´ï¼Œç‚¹å‡»åä¼šå¯åŠ¨å‘½ä»¤è¡Œçš„ä¸²å£ç›‘è§†åŠ©æ‰‹ï¼›</li>
<li>ç»ˆç«¯æŒ‰é’®ï¼šå°å‘½ä»¤è¡Œï¼Œç‚¹å‡»åæ–°å»ºä¸€ä¸ªç»ˆç«¯çª—å£ï¼›</li>
</ol>

<h4 id="å¿«æ·æ“ä½œæ ">å¿«æ·æ“ä½œæ </h4>

<p>ç‚¹å‡»çª—å£å·¦ä¾§çš„åšåä¸€ä¸ªlogoä¹Ÿå°±æ˜¯å°èš‚èšå¤´ï¼Œå°±ä¼šå‡ºç°é’ˆå¯¹å·¥ç¨‹çš„å¿«æ·æ“ä½œï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153917672863905.png" alt="20181010153917672863905.png" /></p>

<p>æ ¹æ®å­—é¢æ„æ€å°±çŸ¥é“ç›¸åº”å¿«æ·æ“ä½œæ˜¯ä»€ä¹ˆç”¨é€”äº†ï¼Œè¿™é‡Œå°±ä¸åšä»‹ç»äº†ã€‚</p>

<h3 id="ç¼–å†™ä»£ç ">ç¼–å†™ä»£ç </h3>

<p>srcæ–‡ä»¶å¤¹ä¸‹ä¸ºæºæ–‡ä»¶ï¼Œæ›´æ”¹æºæ–‡ä»¶ <code>main.cpp</code> çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#define LED_PIN PB0 </span><span class="c1">// åé‡Œä½¿ç”¨çš„æœ€å°ç³»ç»Ÿæ¿æ¿ä¸ŠLEDè¿æ¥çš„æ˜¯PB0
</span><span class="c1"></span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_PIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ç¼–å†™ä»£ç è¿‡ç¨‹ä¸­å°±ä¼šæ„Ÿå—åˆ°å¼ºå¤§çš„ä»£ç æç¤ºåŠŸèƒ½ï¼Œå†™ä»£ç ä»æ­¤ä¸€é©¬å¹³å·ï¼Œå„ç§666ï¼åŒæ—¶ä¹Ÿæ”¯æŒä»£ç è·³è½¬ï¼Œæ¯”å¦‚è·³è½¬åˆ°å‡½æ•°å®šä¹‰ï¼Œå¯ä»¥æŒ‰ä½ <code>command</code> é”®ï¼ˆlinuxå’Œwindowä¸‹æ˜¯ <code>ctrl</code> é”®ï¼‰ç„¶åé¼ æ ‡å·¦é”®å•å‡»å°±å¯ä»¥è·³è½¬ï¼Œæ„Ÿå—ç©ºé—´ç©¿æ¢­çš„å¿«æ„Ÿï¼</p>

<h3 id="ç¼–è¯‘ç¨‹åº">ç¼–è¯‘ç¨‹åº</h3>

<p>è¿™ä¸ªæ“ä½œå¾ˆç®€å•ï¼Œç‚¹å‡»å·¥å…·æ ä¸­çš„ç¼–è¯‘æŒ‰é’®å³å¯è§¦å‘ç¼–è¯‘ï¼Œç¼–è¯‘ä¿¡æ¯ä¼šåœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­æ˜¾ç¤ºï¼Œåˆæ¬¡ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šå¾ˆæ…¢ï¼Œé‚£æ˜¯å› ä¸º Platformio æ ¹æ®å·¥ç¨‹é…ç½®ä¸‹è½½å¯¹åº”çš„å¹³å°æ”¯æŒæ–‡ä»¶ï¼ŒåŒ…å«äº†é…ç½®çš„æ¡†æ¶ã€ç¼–è¯‘å·¥å…·ã€è°ƒè¯•å·¥å…·ç­‰ç­‰ï¼Œå› ä¸ºè¿™æ˜¯å›½å¤–çš„æœåŠ¡ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå¾ˆæ…¢ï¼Œè€å¿ƒç­‰å¾…å³å¯ï¼Œç¼–è¯‘å®Œæˆåï¼Œä¼šå‡ºç°å¦‚ä¸‹ç±»ä¼¼ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&gt; Executing task: platformio run &lt;

Processing genericSTM32F103C8 <span class="o">(</span>platform: ststm32<span class="p">;</span> board: genericSTM32F103C8<span class="p">;</span> framework: arduino<span class="o">)</span>
...
Compiling .pioenvs/genericSTM32F103C8/src/main.cpp.o
...
Compiling .pioenvs/genericSTM32F103C8/FrameworkArduino/wirish_time.cpp.o
Archiving .pioenvs/genericSTM32F103C8/libFrameworkArduino.a
Indexing .pioenvs/genericSTM32F103C8/libFrameworkArduino.a
Linking .pioenvs/genericSTM32F103C8/firmware.elf
Checking size .pioenvs/genericSTM32F103C8/firmware.elf
Building .pioenvs/genericSTM32F103C8/firmware.bin
Memory Usage -&gt; http://bit.ly/pio-memory-usage
DATA:    <span class="o">[==</span>        <span class="o">]</span>  <span class="m">15</span>.3% <span class="o">(</span>used <span class="m">3136</span> bytes from <span class="m">20480</span> bytes<span class="o">)</span>
PROGRAM: <span class="o">[==</span>        <span class="o">]</span>  <span class="m">21</span>.6% <span class="o">(</span>used <span class="m">14188</span> bytes from <span class="m">65536</span> bytes<span class="o">)</span>
<span class="o">============================</span> <span class="o">[</span>SUCCESS<span class="o">]</span> Took <span class="m">3</span>.33 <span class="nv">seconds</span> <span class="o">============================</span>

ç»ˆç«¯å°†è¢«ä»»åŠ¡é‡ç”¨ï¼ŒæŒ‰ä»»æ„é”®å…³é—­ã€‚</code></pre></div>
<p>è§¦å‘ç¼–è¯‘è¿˜å¯ä»¥ä½¿ç”¨å¿«æ·æ“ä½œæ ä¸­çš„ <code>build</code>æ“ä½œã€‚</p>

<h3 id="ä¸Šä¼ ç¨‹åº">ä¸Šä¼ ç¨‹åº</h3>

<p>åé‡Œä½¿ç”¨çš„æ˜¯ stm32f103c8t6 çš„æœ€å°ç³»ç»Ÿæ¿ï¼Œç»è°ƒè¯•å™¨ stlink v2 è¿æ¥ç”µè„‘ï¼Œç‚¹å‡»å·¥å…·æ çš„çƒ§å†™æŒ‰é’®ï¼ˆæˆ–è€…å¿«æ·æ“ä½œæ çš„ <code>Upload</code> æ“ä½œï¼‰ï¼Œå³å¯çœ‹åˆ°è·³å‡ºçš„ç»ˆç«¯ä¸­æ˜¾ç¤ºä¸Šä¼ è¿‡ç¨‹ä¸­æ‰“å°çš„ä¿¡æ¯ï¼Œè¿™é‡Œå°±ä¸åˆ—å‡ºæ¥äº†ã€‚</p>

<p>çƒ§å†™è¿‡ç¨‹ä¸­ï¼Œstlink v2 è°ƒè¯•å™¨çš„æŒ‡ç¤ºç¯ä¼šæœ‰æ‰€ååº”ï¼Œå®Œæˆåï¼Œæœ€å°ç³»ç»Ÿæ¿çš„ç¨‹åºå°±ä¼šè¿è¡Œï¼Œå°±ä¼šçœ‹åˆ°æ¿ä¸Šçš„LEDé—ªåŠ¨äº†èµ·æ¥ï¼Œè¯´æ˜çƒ§å†™æˆåŠŸï¼</p>

<h3 id="è°ƒè¯•ç¨‹åº">è°ƒè¯•ç¨‹åº</h3>

<p>å¾ˆå¯æƒœï¼å…è´¹ç‰ˆï¼ˆç¤¾åŒºç‰ˆï¼‰PlatformIO çš„è°ƒè¯•åŠŸèƒ½å—é™ï¼Œæ‰€ä»¥ä¸èƒ½æ­£å¸¸è¿›è¡Œç¨‹åºè°ƒè¯•ï¼Œè‹¥æƒ³æ­£å¸¸ä½¿ç”¨ï¼Œéœ€è¦è®¢é˜…Plusç‰ˆã€‚ä½œä¸ºä¸€ä¸ªå‹¤ä¿­èŠ‚çº¦çš„äººæ€ä¹ˆå¯èƒ½è¦èŠ±è¿™ä»½é’±å‘¢ï¼é‚£æ€ä¹ˆåŠå‘¢ï¼ä¸è¦ç´§ï¼ŒVS codeä¸­æœ‰æ¬¾æ’ä»¶å«åš <strong>Cortex Debug</strong>ï¼Œç¨ä½œé…ç½®å°±èƒ½è¿›è¡Œæ­£å¸¸çš„å·¥ç¨‹è°ƒè¯•å•¦ï¼</p>

<h4 id="openocd-æ·»åŠ è‡³ç³»ç»Ÿç¯å¢ƒå˜é‡">openocd æ·»åŠ è‡³ç³»ç»Ÿç¯å¢ƒå˜é‡</h4>

<p>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨openocdå¼€å¯è°ƒè¯•æœåŠ¡ï¼Œè‹¥è¦ä½¿ç”¨æ­¤æ–¹å¼è¿›è¡Œè°ƒè¯•ï¼Œ <strong>Cortex Debug</strong> èƒ½è‡ªåŠ¨è°ƒç”¨ç¯å¢ƒå˜é‡ä¸­èƒ½æ‰¾åˆ°çš„openocdï¼Œä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œéœ€è¦å°†openocdæ·»åŠ è‡³ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼ŒPlatformio å·²ç»è‡ªåŠ¨å®‰è£…äº†ç¼–è¯‘è°ƒè¯•å·¥å…·ã€‚</p>

<p>åœ¨ç”¨æˆ·ç›®å½•ä¸‹åº”è¯¥ä¼šæ‰¾åˆ°æ–‡ä»¶å¤¹ <code>.platformio</code> ï¼Œä¼šä»ä¸‹é¢çš„æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ° openocd è¿è¡Œæ–‡ä»¶ï¼ˆwindowsä¸‹æ˜¯openocd.exeï¼Œç›®å½•å¯èƒ½æœ‰æ‰€ä¸åŒï¼‰ï¼š</p>

<p><code>/Users/5km/.platformio/packages/tool-openocd/bin</code></p>

<ul>
<li><p>å¯¹äºlinuxæˆ–è€…macOSä½¿ç”¨è€…</p>

<ul>
<li><p>è‹¥ä½¿ç”¨çš„å‘½ä»¤è¡Œshellæ˜¯zshï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">echo</span> <span class="s1">&#39;export PATH=&#34;/Users/5km/.platformio/packages/tool-openocd/bin:$PATH&#34;&#39;</span> &gt; ~/.zshrc</code></pre></div></li>

<li><p>è‹¥ä½¿ç”¨çš„å‘½ä»¤è¡Œshellæ˜¯bashï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ ç¯å¢ƒå˜é‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">echo</span> <span class="s1">&#39;export PATH=&#34;/Users/5km/.platformio/packages/tool-openocd/bin:$PATH&#34;&#39;</span> &gt; ~/.bashrc</code></pre></div></li>
</ul></li>

<li><p>windowsç”¨æˆ·ï¼Œæ‰¾åˆ°ç›¸åº”ç›®å½•ä»¥åï¼ŒæŒ‰ç…§ç½‘ä¸Šçš„æ–¹æ³•ï¼Œå°†ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­å°±å¯ä»¥äº†</p></li>
</ul>

<p>æ·»åŠ å®Œæˆåï¼Œå¯åŠ¨ä¸€ä¸ªå‘½ä»¤è¡Œï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¦‚æœæ‰“å°äº†ç‰ˆæœ¬ä¿¡æ¯è¯´æ˜æ·»åŠ æˆåŠŸï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ openocd -v
GNU MCU Eclipse <span class="m">64</span>-bits Open On-Chip Debugger <span class="m">0</span>.10.0+dev-00392-gbe9ef0b0 <span class="o">(</span><span class="m">2018</span>-01-12-16:51<span class="o">)</span>
Licensed under GNU GPL v2
For bug reports, <span class="nb">read</span>
	http://openocd.org/doc/doxygen/bugs.html</code></pre></div>
<h4 id="å®‰è£…-cortex-debug-æ’ä»¶">å®‰è£… <strong>Cortex Debug</strong> æ’ä»¶</h4>

<p>VS code æ’ä»¶ç®¡ç†å™¨ä¸­æœç´¢ <strong>Cortex Debug</strong> ï¼Œå®‰è£…å³å¯ã€‚</p>

<h4 id="ä¼˜åŒ–ç¼–è¯‘é€‰é¡¹">ä¼˜åŒ–ç¼–è¯‘é€‰é¡¹</h4>

<p>ç¨‹åºè°ƒè¯•ï¼Œéœ€è¦ç¼–è¯‘çš„æ—¶å€™ç”Ÿæˆç¬¦å·åº“ï¼Œæ‰€ä»¥éœ€è¦ä¸ºå·¥ç¨‹é…ç½®ä¸­æ·»åŠ ç”Ÿæˆç¬¦å·åº“çš„æ”¯æŒï¼Œå·¥ç¨‹é…ç½® <code>platformio.ini</code> ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">build_flags</span> <span class="o">=</span> <span class="s">
</span><span class="s">    -g</span></code></pre></div>
<p>æœ€ç»ˆé…ç½®å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[env:genericSTM32F103C8]</span>
<span class="na">platform</span> <span class="o">=</span> <span class="s">ststm32</span>
<span class="na">board</span> <span class="o">=</span> <span class="s">genericSTM32F103C8</span>
<span class="na">framework</span> <span class="o">=</span> <span class="s">arduino</span>
<span class="na">build_flags</span> <span class="o">=</span> <span class="s">
</span><span class="s">    -g</span></code></pre></div>
<p>é‡æ–°ç¼–è¯‘ä¸€éï¼</p>

<h4 id="æ·»åŠ è°ƒè¯•é…ç½®">æ·»åŠ è°ƒè¯•é…ç½®</h4>

<ol>
<li><p>VS Code èœå•æ â€”â€”è°ƒè¯•â€”â€”æ·»åŠ é…ç½®ï¼›</p></li>

<li><p>é€‰æ‹© <code>{} Cortex Debug: OpenOCD</code> å³å¯æ·»åŠ é…ç½®ï¼›</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153918052073191.png" alt="20181010153918052073191.png" /></p></li>

<li><p>æ›´æ”¹é…ç½®ï¼Œå‚è€ƒ <a href="https://marcelball.ca/projects/cortex-debug/cortex-debug-launch-configurations/#OpenOCD%20GDB%20Server%20(" title="servertype&quot;:%20&quot;openocd" target="_blank">Cortex-Debug Launch Configurations</a>) æ·»åŠ å’Œè°ƒæ•´ <code>.vscode/launch.json</code> æ–‡ä»¶çš„éƒ¨åˆ†é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.2.0&#34;</span><span class="p">,</span>
    <span class="nt">&#34;configurations&#34;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;cortex-debug&#34;</span><span class="p">,</span>
            <span class="nt">&#34;request&#34;</span><span class="p">:</span> <span class="s2">&#34;launch&#34;</span><span class="p">,</span>
            <span class="nt">&#34;servertype&#34;</span><span class="p">:</span> <span class="s2">&#34;openocd&#34;</span><span class="p">,</span>
            <span class="nt">&#34;cwd&#34;</span><span class="p">:</span> <span class="s2">&#34;${workspaceRoot}&#34;</span><span class="p">,</span>
            <span class="nt">&#34;executable&#34;</span><span class="p">:</span> <span class="s2">&#34;${workspaceRoot}/.pioenvs/genericSTM32F103C8/firmware.elf&#34;</span><span class="p">,</span>
            <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;Debug (OpenOCD)&#34;</span><span class="p">,</span>
            <span class="nt">&#34;device&#34;</span><span class="p">:</span> <span class="s2">&#34;STM32F103C8&#34;</span><span class="p">,</span>
            <span class="nt">&#34;configFiles&#34;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&#34;interface/stlink.cfg&#34;</span><span class="p">,</span>
                <span class="s2">&#34;target/stm32f1x.cfg&#34;</span>
            <span class="p">],</span>
            <span class="nt">&#34;runToMain&#34;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span></code></pre></div>
<p>å…¶ä¸­ï¼Œ</p>

<ul>
<li><code>executeable</code> é…ç½®ä¸ºå·¥ç¨‹ä¸­ç”Ÿæˆçš„ <strong>elf</strong> æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™ä¸ªéœ€è¦è‡ªè¡Œæ›´æ”¹ä¸ºè‡ªå·±å·¥ç¨‹çš„</li>
<li><code>device</code> æŒ‡å®šèŠ¯ç‰‡å‹å·ï¼Œè°ƒè¯•å™¨ä¼šè‡ªè¡Œé€‰æ‹© <strong>svd</strong> æ–‡ä»¶ï¼Œä»¥ä¾¿æ­£ç¡®æ˜¾ç¤ºå¤–è®¾å¯„å­˜å™¨çš„æ­£ç¡®ä¿¡æ¯</li>
<li><code>configFiles</code> é…ç½®ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æ¥å£é…ç½®ï¼Œä¸€ä¸ªæ˜¯è°ƒè¯•ç›®æ ‡ï¼ˆèŠ¯ç‰‡ï¼‰çš„é…ç½®æ–‡ä»¶</li>
<li><code>runToMain</code> è®¾ç½®ä¸ºtrueï¼Œå¯åŠ¨è°ƒè¯•åä¼šè¿è¡Œåˆ° <strong>main</strong> å…¥å£åœæ­¢</li>
</ul></li>
</ol>

<h4 id="è¿›è¡Œè°ƒè¯•">è¿›è¡Œè°ƒè¯•</h4>

<p>ç‚¹å‡» VS Code çª—å£å·¦ä¾§çš„è°ƒè¯•æŒ‰é’®ï¼Œåˆ‡æ¢è‡³è°ƒè¯•ç•Œé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153918105576989.png" alt="20181010153918105576989.png" /></p>

<p>æ©™è‰²åœˆå†…çš„ä¸‹æ‹‰èœå•å¯ä»¥é€‰æ‹©è°ƒè¯•é…ç½®ï¼Œæ ¹æ®åç§°(å¯¹åº”ä¸Šé¢é…ç½®ä¿¡æ¯ä¸­çš„ <code>name</code> )é€‰æ‹©åˆšåˆšæ·»åŠ çš„é…ç½®ï¼Œå•å‡»å…¶å·¦è¾¹çš„ç»¿è‰²ä¸‰è§’æŒ‰é’®ï¼ˆä¿è¯ç”µè„‘ç»stlinkè¿æ¥åˆ°äº†æœ€å°ç³»ç»Ÿæ¿ä¸Šï¼‰ï¼Œå³å¯å¯åŠ¨è°ƒè¯•è¿‡ç¨‹ï¼š</p>

<p>å¯åŠ¨è°ƒè¯•åé»˜è®¤åœåœ¨ç¨‹åºæœ€å¼€å§‹çš„åœ°æ–¹ï¼Œèƒ½å¤Ÿçœ‹åˆ°çª—å£æœ€ä¸Šæ–¹å‡ºç°äº†ä¸€ä¸ªè°ƒè¯•å·¥å…·æ ï¼Œ åŒ…å«äº†åŸºæœ¬çš„æ‰§è¡Œæ“ä½œï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153918158198422.png" alt="20181010153918158198422.png" /></p>

<p>ä¾æ¬¡æ˜¯ç»§ç»­æ‰§è¡Œã€å•æ­¥ã€å•æ­¥è¿›å…¥ã€å•æ­¥è·³å‡ºã€é‡æ–°è¿è¡Œå’Œåœæ­¢æ“ä½œæŒ‰é’®ã€‚</p>

<p>å¯ä»¥æ‰“å¼€ <code>main.cpp</code> æ–‡ä»¶ï¼Œåœ¨ä»£ç è¡Œå·å·¦ä¾§ç‚¹å‡»å¯ä»¥æ·»åŠ æˆ–åˆ é™¤æ–­ç‚¹ã€‚åœ¨ <code>pinMode(LED_PIN, OUTPUT);</code> æ·»åŠ æ–­ç‚¹ï¼Œç‚¹å‡»ç»§ç»­æ‰§è¡ŒæŒ‰é’®ï¼Œè¿è¡Œè‡³æ–­ç‚¹å¤„ï¼Œç„¶åç‚¹å‡»å•æ­¥è¿›å…¥æŒ‰é’®ï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181010153918191850308.png" alt="20181010153918191850308.png" /></p>

<p>å¯ä»¥çœ‹åˆ°çª—å£å·¦ä¾§éƒ¨åˆ†èƒ½å¤ŸæŸ¥çœ‹å˜é‡ï¼ŒåŒ…å«å±€éƒ¨ã€å…¨å±€å˜é‡ï¼›è¿˜å¯ä»¥æ·»åŠ å˜é‡ç›‘è§†ï¼›å†ä¸‹é¢å°±æ˜¯è°ƒç”¨å †æ ˆï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°å‡½æ•°çš„è°ƒç”¨å±‚æ¬¡ã€‚</p>

<p>è¿˜å¯ä»¥çœ‹åˆ°ä¸€ä¸ª <strong>CORTEX PERIPHERALS</strong> çš„æ ‡ç­¾ï¼Œç‚¹å¼€åä¼šçœ‹åˆ°å¦‚ä¸‹å›¾æ©™è‰²æ¡†å†…çš„å¤–è®¾å¯„å­˜å™¨çš„ä¿¡æ¯ï¼Œæ–¹ä¾¿è°ƒè¯•ç¨‹åºï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181012153931904181209.png" alt="20181012153931904181209.png" /></p>

<p>ä»¥ä¸Šçœ‹æ¥æ»¡è¶³äº†åŸºæœ¬çš„è°ƒè¯•åŠŸèƒ½äº†ï¼Œå¤§åŠŸå‘Šæˆï¼</p>

<h4 id="one-more-thing">one more thing</h4>

<p>å…¶å®è°ƒè¯•è¿™å—å„¿æœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒPlatformioæ¯”è¾ƒéœ¸é“ï¼Œå½“ä½ å…³é—­å·¥ç¨‹é‡æ–°æ‰“å¼€åï¼Œå®ƒä¼šè‡ªåŠ¨æŠŠ <code>launch.json</code> ä¸­çš„é…ç½®æ›´æ”¹ä¸º Platformio çš„è°ƒè¯•é…ç½®ï¼Œæ‰€ä»¥æ¯æ¬¡æ‰“å¼€å·¥ç¨‹åéœ€è¦è‡ªè¡Œæ·»åŠ  <strong>Cortex Debug</strong> çš„é…ç½®ï¼ˆè§<a href="#æ·»åŠ è°ƒè¯•é…ç½®" target="_blank">æ·»åŠ è°ƒè¯•é…ç½®</a>ï¼‰ï¼Œç›®å‰è¿˜æ²¡æƒ³åˆ°å¾ˆå¥½çš„è§£å†³æ–¹æ³•ï¼Œæƒ³åˆ°åä¼šæ›´æ–°åœ¨æ­¤ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡è®²äº† PlatformIO IDE çš„å®‰è£…ä»¥åŠåŸºæœ¬çš„ä½¿ç”¨ï¼Œæ»¡è¶³äº†stm32ç³»åˆ—å•ç‰‡æœºçš„åŸºæœ¬å¼€å‘éœ€æ±‚ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>PUBG &amp; ROE, See you later</title>
			<link>https://www.smslit.top/2018/10/02/pubg_roe_bye/</link>
			<pubDate>Tue, 02 Oct 2018 23:24:41 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/10/02/pubg_roe_bye/</guid>
			<description>&lt;p&gt;ä»Šå¹´å…«æœˆåˆï¼Œç¬¬ä¸€æ¬¡çœŸæ­£çš„ç©PCå¤§å‹æ¸¸æˆï¼Œä»¥å‰ä¹Ÿå°±ç©ä¸ª &lt;strong&gt;æ„¤æ€’çš„å°é¸Ÿ&lt;/strong&gt; è¿™ç§å°æ¸¸æˆï¼Œåƒé¸¡ï¼ˆç»åœ°æ±‚ç”Ÿï¼šå¤§é€ƒæ€&lt;PUBG&gt;ï¼‰æ­£ğŸ”¥ï¼Œå’±ä¹Ÿæºå’Œæºå’Œï¼Œæ‰€ä»¥æ—¢æ˜¯PCç«¯æ¸¸æˆèœé¸Ÿï¼Œåˆæ˜¯PUBGä¸“ä¸šå¿«é€’å‘˜ã€‚9æœˆåº•è…¾è®¯æ— é™æ³•åˆ™ï¼ˆROEï¼‰åœ¨steamä¸Šä¸Šå¸‚äº†ï¼Œä½œä¸ºä¸€ä¸ªåˆæ ¼çš„å¥½å¥‡å®å®ï¼Œæˆ‘å½“ç„¶è¦å»é‡Œé¢æ»‘æ»‘â„ï¸å•¦ï¼Œæ‰€ä»¥ä¹Ÿç®—ç©è¿‡ROEäº†ï¼ŒæŠ€æœ¯ä¾æ—§çƒ‚çš„ä¸€ç¬”ã€‚å—¯&amp;hellip;&amp;hellip;å¯æ˜¯å½“åˆåŠ¿å¿…è¦ç»ƒå¾—â€œèµ°ä½éªšã€åˆšå¼ºçŒ›ã€çˆ†å¤´å‡†â€çš„å†³å¿ƒéšç€å¿ƒå¢ƒçš„å˜åŒ–å·²ç»æ…¢æ…¢æ·¡å»ï¼Œæ‰€ä»¥å‘€ï¼Œå¼€æ­¤æ–‡ç¥­å¥ è¿™å³å°†é€å»çš„ &lt;strong&gt;Game Pleasure&lt;/strong&gt;ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181002153849597149140.jpg&#34; alt=&#34;20181002153849597149140.jpg&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¹´å…«æœˆåˆï¼Œç¬¬ä¸€æ¬¡çœŸæ­£çš„ç©PCå¤§å‹æ¸¸æˆï¼Œä»¥å‰ä¹Ÿå°±ç©ä¸ª <strong>æ„¤æ€’çš„å°é¸Ÿ</strong> è¿™ç§å°æ¸¸æˆï¼Œåƒé¸¡ï¼ˆç»åœ°æ±‚ç”Ÿï¼šå¤§é€ƒæ€<PUBG>ï¼‰æ­£ğŸ”¥ï¼Œå’±ä¹Ÿæºå’Œæºå’Œï¼Œæ‰€ä»¥æ—¢æ˜¯PCç«¯æ¸¸æˆèœé¸Ÿï¼Œåˆæ˜¯PUBGä¸“ä¸šå¿«é€’å‘˜ã€‚9æœˆåº•è…¾è®¯æ— é™æ³•åˆ™ï¼ˆROEï¼‰åœ¨steamä¸Šä¸Šå¸‚äº†ï¼Œä½œä¸ºä¸€ä¸ªåˆæ ¼çš„å¥½å¥‡å®å®ï¼Œæˆ‘å½“ç„¶è¦å»é‡Œé¢æ»‘æ»‘â„ï¸å•¦ï¼Œæ‰€ä»¥ä¹Ÿç®—ç©è¿‡ROEäº†ï¼ŒæŠ€æœ¯ä¾æ—§çƒ‚çš„ä¸€ç¬”ã€‚å—¯&hellip;&hellip;å¯æ˜¯å½“åˆåŠ¿å¿…è¦ç»ƒå¾—â€œèµ°ä½éªšã€åˆšå¼ºçŒ›ã€çˆ†å¤´å‡†â€çš„å†³å¿ƒéšç€å¿ƒå¢ƒçš„å˜åŒ–å·²ç»æ…¢æ…¢æ·¡å»ï¼Œæ‰€ä»¥å‘€ï¼Œå¼€æ­¤æ–‡ç¥­å¥ è¿™å³å°†é€å»çš„ <strong>Game Pleasure</strong>ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181002153849597149140.jpg" alt="20181002153849597149140.jpg" /></p>

<h2 id="ç¼˜èµ·">ç¼˜èµ·</h2>

<p>è¯´èµ·æ¥ï¼Œæˆ‘ç©PUBGçš„ç¼˜èµ·è¿˜æ˜¯æ¯”è¾ƒå¥‡æ€ªçš„ï¼Œæœ¬äººè¿‡å»æ¯”è¾ƒç—´è¿·äºçº¢ç™½æœºğŸ®NESğŸ®æ¸¸æˆï¼Œmacbookä¸Šå®‰è£…äº†ä¸ªå¼€æºçš„æ¨¡æ‹Ÿå™¨ <a href="https://github.com/OpenEmu/OpenEmu" target="_blank"><strong>OpenEMU</strong></a>ï¼Œä¸“é—¨ç©è¿™äº›åƒç´ æ¸¸æˆã€‚å½“ç„¶è¿™ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯æˆ‘æ²¡æ–™åˆ°è¢«å¼Ÿå¼Ÿå¸¦ç€ç©èµ·äº†æ‰‹æœºç‰ˆçš„PUBGâ€”â€”<strong>ç»åœ°æ±‚ç”Ÿï¼šåˆºæ¿€æˆ˜åœº</strong>ã€‚éšåå°±é—²ç€çš„æ—¶å€™å°±ä¼šç©ä¸ªå‡ å±€ï¼Œéå¸¸å–œæ¬¢è¿™ä¸ªæ¸¸æˆï¼Œå…¥é—¨ç®€å•ï¼Œæ“ä½œä¹Ÿä¸å¤æ‚ï¼Œæ›´ä¸éœ€è¦è®°ä¸€äº›äººç‰©å±æ€§ä»€ä¹ˆçš„ï¼ˆæ›¾è¢«æœ‹å‹å¸¦ç€ç©ã€Šé­”å…½ä¸–ç•Œã€‹ï¼Œæ„Ÿè§‰éœ€è¦çŸ¥é“çš„ä¸œè¥¿å¤ªå¤šï¼Œç©çš„ä¹è¶£éƒ½æœ¨æœ‰äº†ï¼‰ï¼Œç™¾äººæŠ¢ç‰©èµ„è¿›åœˆæ±‚ç”Ÿçš„æ¨¡å¼éå¸¸å¸å¼•æˆ‘ï¼Œé¦–å…ˆå¯¹è¿™æ¬¾æ¸¸æˆæˆ‘å°±æœ‰äº†å¥½æ„Ÿï¼</p>

<p>ä¹‹å‰åœ¨é¼ä¿¡å·¥ä½œçš„æ—¶å€™ï¼Œå°±å¬ä¸€äº›åŒäº‹æœ‹å‹è¯´åƒé¸¡åƒé¸¡ä»€ä¹ˆçš„ï¼Œå½“æ—¶ä¹Ÿæ²¡èµ·å¤šå¤§çš„å…´è¶£ï¼Œæ²¡æƒ³åˆ°ç©äº†æ‰‹æœºç‰ˆçš„è¿˜æŒºå¥½ç©ï¼é‚£åº”è¯¥ä¹Ÿä¼šæœ‰PCç‰ˆçš„å–½ï¼Œç½‘ä¸Šäº†è§£è¿‡åï¼ŒåŸæ¥æ˜¯steamå¹³å°çš„æ¸¸æˆï¼Œåªæœ‰PCç‰ˆï¼Œæœ¨æœ‰macç‰ˆï¼Œå¥½çº ç»“ï¼Œæ€ä¹ˆåŠï¼Œæˆ‘çœŸæƒ³ä½“éªŒä¸€ä¸‹ï¼Œå“ˆå“ˆï¼Œå¹¸å¥½æˆ‘ä¹‹å‰åšäº†ä¸€ä¸ªæˆ‘çš„macbookçš„ç§»åŠ¨ç¡¬ç›˜ç‰ˆçš„ <a href="https://en.wikipedia.org/wiki/Windows_To_Go" target="_blank"><strong>WTG</strong></a>ï¼Œå¯åŠ¨è¿›å…¥ WTG çš„ç³»ç»Ÿï¼Œå®‰è£…steamï¼Œæ¯«ä¸çŠ¹è±«çš„èŠ±98å¤§æ´‹ä¹°äº†è¿™æ¬¾æ¸¸æˆï¼Œå¹¶å®‰è£…äº†ã€‚æˆ‘ä¹°çš„macbookæ˜¯16ç‰ˆçš„15å¯¸å¸¦touchbarç‰ˆæœ¬çš„åŸºç¡€æ¬¾ï¼Œæ‰€ä»¥æ‹¥æœ‰ç‹¬ç«‹æ˜¾å¡ï¼Œå‹‰å¼ºæ˜¯å¯ä»¥ç©è¿™æ¬¾æ¸¸æˆçš„ï¼</p>

<p>ç¬¬ä¸€æ¬¡ç©ï¼Œæœ‰äº†æ‰‹æœºç‰ˆæ¸¸æˆçš„åŸºç¡€ï¼Œå¯¹äºåŸºæœ¬æµç¨‹ã€åœ°åŒºæ ·è²Œå’Œæªæ¢°çŸ¥è¯†éƒ½æœ‰ä¸€å®šåŸºç¡€ï¼Œè¿˜æ˜¯æŒºé¡ºåˆ©çš„è‹Ÿè¿›äº†å‰20ï¼Œ<strong>but</strong>ï¼Œè§äº†äººå¿…æ­»ï¼Œè¢«äººæ‰“äº†éƒ½ä¸çŸ¥é“æ•Œæ–¹åœ¨å“ªå„¿ï¼Œä¸€å¼€å§‹ç©è¿™ä¸ªæ¸¸æˆå°±æ™‹å‡ä¸ºåˆæ ¼çš„ <strong>å¿«é€’å‘˜</strong>ï¼Œå¶å°”è½åœ°æˆä¸ªç›’å­ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181003153849926392053.jpg" alt="20181003153849926392053.jpg" /></p>

<h2 id="å‘å±•">å‘å±•</h2>

<p>éšç€å¯¹æ¸¸æˆçš„å…³æ³¨çš„å¢åŠ ï¼Œä»¥åŠä¸å‘å°å’ŒåŒå­¦æœ‹å‹çš„äº¤æµï¼Œäº†è§£åˆ°å¾ˆå¤šPUBGçš„äº‹æƒ…ï¼Œæ…¢æ…¢çš„è‡ªå·±ä¹Ÿç»ƒå°±äº†å¬å£°è¾¨ä½ï¼Œæªæ³•ä¾æ—§ä¸å‡†ä½†æ˜¯æ¯”ä»¥å‰ç¨³äº†ï¼Œæœ€èµ·ç ä¸æ˜¯åˆšå¼€å§‹çš„ä¸€æ‰«å†²å¤©äº†ï¼ŒğŸ˜…ï¼</p>

<p>æ…¢æ…¢çš„æˆ‘çŸ¥é“äº†å›½å†…çš„4AMã€OMGç­‰æˆ˜é˜Ÿï¼Œä¹ŸçŸ¥é“äº†lion_kkã€éŸ¦ç¥ã€17shouå’Œshroudç­‰å¤§ç¥ï¼Œå¶å°”ä¼šçœ‹ä»–ä»¬çš„æ¸¸æˆå½•æ’­è§†é¢‘ï¼Œæ„Ÿè§‰ä¸ä»–ä»¬ç›¸æ¯”ï¼Œæˆ‘ç®€ç›´å°±æ˜¯èœé¸Ÿä¸­çš„çŸ®çŸ¬ç©·ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181003153849866765466.jpg" alt="20181003153849866765466.jpg" /></p>

<p>æ—¶ä¸æ—¶çš„è¿˜è®©å‘å°å¸¦å¸¦æˆ‘ï¼Œç»“æœæœ€åçš„ç»“è®ºå°±æ˜¯ï¼Œæˆ‘å‘å°è§‰å¾—æ›´æˆ‘ä¸€èµ·ç©PUBGçš„åŒäººæ¨¡å¼ï¼Œå°±åƒæ˜¯ç©1.5äººæ¨¡å¼ä¸€æ ·ï¼Œæœ‰ä¸€æ¬¡å°´å°¬åˆ°æƒ³æ”¾çƒŸæ•‘ä»–ï¼Œç»“æœæ”¾å‡ºğŸ”¥ï¼ŒæŠŠä»–çƒ§æ­»äº†ã€‚ç¬‘å½’ç¬‘ï¼Œæˆ‘è¿˜æ˜¯æƒ³å°½å¿«æé«˜è‡ªå·±çš„æŠ€æœ¯å‘€ï¼ŒçœŸçš„ä¸æƒ³è¢«å˜²ç¬‘ï¼æ‰€ä»¥æˆ‘æœ‰ç©ºå°±ä¼šçœ‹shroudçš„è§†é¢‘ï¼Œå­¦ä¼šäº†ä¸€äº›éªšèµ°ä½ï¼Œæ…¢æ…¢çš„ä¹Ÿæœ‰äº†ä¸€å®šè§‚å¯Ÿæ„è¯†ï¼Œæªæ³•è¿›æ­¥é¾Ÿé€Ÿã€‚å¾—ç›Šäºå‘å°çš„æŒ‡ç‚¹ï¼Œå¼€é•œæ“ä½œå˜é¡ºç•…äº†å¾ˆå¤šï¼Œæ…¢æ…¢è‡ªå·±å¿ƒé‡Œç«‹ä¸‹äº†ä¸€ä¸ªç›®æ ‡ï¼Œèƒ½åœ¨æ¯”èµ›ä¸­åˆšå¼ºæ€æ­»äººã€‚</p>

<p>å…³æ³¨æ¸¸æˆåˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼å¾®åšã€twitteræˆ‘éƒ½å…³æ³¨äº†PUBGï¼Œæ²¡æœ‰æ›´æ–°ç»´æŠ¤ï¼Œæˆ‘éƒ½å¾ˆå…´å¥‹ï¼ŒçœŸçš„å¾ˆå–œæ¬¢è¿™æ¬¾æ¸¸æˆï¼ä¸ºäº†æ›´å¥½çš„å‘æŒ¥macbookçš„æ€§èƒ½ï¼Œæˆ‘è¿˜æ˜¯å®‰è£…äº†bootcampçš„windowsï¼Œwindowsä¸­å®‰è£…äº†æ¸¸æˆã€‚</p>

<p>æ…¢æ…¢ä»å‘å°å£ä¸­çŸ¥é“ï¼Œè…¾è®¯åšäº†ä¸€æ¬¾ä»¿åƒé¸¡çš„æ¸¸æˆï¼Œå«åšæ— é™æ³•åˆ™ï¼ˆROEï¼‰ï¼Œæˆ‘ä¹Ÿæ…¢æ…¢å…³æ³¨ï¼Œä¸€å¼€å§‹çš„æ—¶å€™ï¼ŒROEåªæœ‰æ³°æœï¼Œä½†ä¸Šä¸ªæœˆï¼Œä¹Ÿå°±æ˜¯9æœˆ19æ—¥ï¼Œé›ªåœ°ç‰ˆçš„ROEä¸Šçº¿steamäº†ï¼Œæˆ‘ä¹Ÿç¬¬ä¸€æ—¶é—´ä½“éªŒäº†ä¸€æŠŠï¼Œè¿˜è·Ÿå‘å°ä¸€èµ·ç©äº†ï¼Œéå¸¸æœ‰æ„æ€çš„æ˜¯å¯ä»¥æ»‘é›ªã€æ»‘ç¿”å’Œæ”€å²©ï¼Œä¸€äº›ç»†èŠ‚åšçš„æŒºå¥½ï¼Œæ¯”å¦‚æ¯’åœˆæˆäº†æš´é£é›ªå’Œé›ªå´©é€ æˆçš„ä½æ¸©ä¼¤å®³ã€äººç‰©å¯ä»¥æè„¸ã€ä½æ¸©ä¹Ÿä¼šå½±å“æªæ¢°å’Œè½½å…·çš„æ€§èƒ½ç­‰ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20181003153849944180371.jpg" alt="20181003153849944180371.jpg" /></p>

<h2 id="æ·¡å»">æ·¡å»</h2>

<p>ç©PUBGå¿«ä¸¤ä¸ªæœˆäº†ï¼Œæœ‰ä¸€å®šæˆæœï¼šæ•²é”®ç›˜çš„æ‰‹é€Ÿæé«˜äº†ï¼Œå­¦ä¼šäº†ä¸€äº›èµ°ä½ï¼Œæªæ³•æé«˜äº†ä¸€ä¸¢ä¸¢ç­‰ï¼Œä½†æ…¢æ…¢æ¸¸æˆç©çš„ä¸å¤šäº†ï¼ŒåŸæ¥é‚£ç§å¼ºçƒˆçš„è¦ç»ƒå¥½è‡ªå·±æŠ€æœ¯çš„å†³å¿ƒè¶Šæ¥è¶Šå°äº†ï¼Œå½’ç»“æœ‰ä»¥ä¸‹åŸå› å§ï¼š</p>

<ul>
<li>è‡ªå·±è€æˆç›’å­ï¼Œä¿¡å¿ƒä¸§å¤±ï¼Œå¤±å»äº†åŸæœ‰çš„æ–—å¿—</li>
<li>æ°´æœ¨å…¶å®ä¸å–œæ¬¢æˆ‘ç©æ¸¸æˆï¼Œæˆ‘ä¹Ÿæ…¢æ…¢å…‹åˆ¶ï¼Œç©çš„å˜å°‘äº†</li>
<li>è‡ªå·±ä¸€ä¸ªäººç©æœ‰ç‚¹æ— è¶£ï¼ŒåŒå­¦æœ‹å‹ç»å¸¸å‡‘ä¸èµ·æ¥ä¸€èµ·ç©ï¼Œæ…¢æ…¢å˜å¾—æ²¡æ„æ€</li>
<li>å‰é¢ç¡®å®ç©æ¸¸æˆåˆ†ç²¾åŠ›äº†ï¼Œè¿˜æ˜¯å¾—æŠŠå¿ƒæ€æ”¾åˆ°æ­£äº‹å„¿ä¸Šï¼Œç©æ¸¸æˆåªä½œæ”¾æ¾ï¼Œä¸ä¼šç—´è¿·äº†</li>
<li>å¦‚æœä»Šå¤©å°±æ˜¯æˆ‘çš„æœ€åä¸€å¤©ï¼Œæˆ‘ä¼šé€‰æ‹©é™ªå®¶äººï¼Œè€Œä¸æ˜¯è‡ªå·±æ‰“æ¸¸æˆ</li>
</ul>

<p>æ‰€ä»¥ä»Šæ™šæ¯…ç„¶å†³ç„¶çš„æŠŠä¸­é€”å®‰è£…çš„bootcampçš„windowsåˆ†åŒºåˆ æ‰äº†ï¼Œä»¥åæ¡ä»¶å…è®¸äº†ä¹°ä¸ªæ¸¸æˆä¸»æœºå†ç©å§ï¼å†ä¼šï¼Œ<strong>PUBG</strong> å’Œ <strong>ROE</strong>ï¼</p>]]></content>
		</item>
		
		<item>
			<title>macOSä¸‹lldbé‡åˆ°_remove_dead_weakrefçš„Import_Error</title>
			<link>https://www.smslit.top/2018/09/30/lldb_weakref_error/</link>
			<pubDate>Sun, 30 Sep 2018 12:01:47 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/30/lldb_weakref_error/</guid>
			<description>&lt;p&gt;ä»Šå¤©ä½¿ç”¨lldbé‡åˆ°äº†_weakrefçš„Import_Erroré—®é¢˜ï¼Œæ‰¾äº†å¾ˆä¹…æ‰æ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ³•ï¼Œå¼€æ­¤æ–‡åˆ†äº«ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;$ lldb
&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;lldb&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; script
Traceback &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;most recent call last&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;:
  File &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;lt;input&amp;gt;&amp;#34;&lt;/span&gt;, line &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;, in &amp;lt;module&amp;gt;
  File &lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/Cellar/python/2.7.15/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py&amp;#34;&lt;/span&gt;, line &lt;span class=&#34;m&#34;&gt;52&lt;/span&gt;, in &amp;lt;module&amp;gt;
    import weakref
  File &lt;span class=&#34;s2&#34;&gt;&amp;#34;/usr/local/Cellar/python/2.7.15/Frameworks/Python.framework/Versions/2.7/lib/python2.7/weakref.py&amp;#34;&lt;/span&gt;, line &lt;span class=&#34;m&#34;&gt;14&lt;/span&gt;, in &amp;lt;module&amp;gt;
    from _weakref import &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;
ImportError: cannot import name _remove_dead_weakref
Python Interactive Interpreter. To exit, &lt;span class=&#34;nb&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;quit()&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;exit()&amp;#39;&lt;/span&gt; or Ctrl-D.&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©ä½¿ç”¨lldbé‡åˆ°äº†_weakrefçš„Import_Erroré—®é¢˜ï¼Œæ‰¾äº†å¾ˆä¹…æ‰æ‰¾åˆ°åˆé€‚çš„è§£å†³æ–¹æ³•ï¼Œå¼€æ­¤æ–‡åˆ†äº«ä¸€ä¸‹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ lldb
<span class="o">(</span>lldb<span class="o">)</span> script
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&#34;&lt;input&gt;&#34;</span>, line <span class="m">1</span>, in &lt;module&gt;
  File <span class="s2">&#34;/usr/local/Cellar/python/2.7.15/Frameworks/Python.framework/Versions/2.7/lib/python2.7/copy.py&#34;</span>, line <span class="m">52</span>, in &lt;module&gt;
    import weakref
  File <span class="s2">&#34;/usr/local/Cellar/python/2.7.15/Frameworks/Python.framework/Versions/2.7/lib/python2.7/weakref.py&#34;</span>, line <span class="m">14</span>, in &lt;module&gt;
    from _weakref import <span class="o">(</span>
ImportError: cannot import name _remove_dead_weakref
Python Interactive Interpreter. To exit, <span class="nb">type</span> <span class="s1">&#39;quit()&#39;</span>, <span class="s1">&#39;exit()&#39;</span> or Ctrl-D.</code></pre></div>
<p>çœ‹åˆ°é”™è¯¯æç¤ºä¸­æœ‰ä¸ªå…³é”®å­—æ®µ <code>/usr/local/Cellar/python/2.7.15</code> ï¼Œæˆ‘ä»¬çŸ¥é“macOSä¸‹ <strong>homebrew</strong> å®‰è£…è½¯ä»¶åˆ° <code>/usr/local/Cellar</code> ç›®å½•ä¸‹ï¼Œæ‰€ä»¥çŒœæµ‹æ˜¯ä¸æ˜¯è‡ªå·±å®‰è£…çš„ <strong>python2.7.15</strong> çš„é—®é¢˜ã€‚</p>

<p>é‚£å°è¯•å¸è½½å·²å®‰è£…çš„ <strong>python2.7.15</strong>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">brew uninstall python@2</code></pre></div>
<p>ç»“æœå¾—åˆ°æé†’ï¼š</p>
<div class="highlight"><pre class="chroma">Error: Refusing to uninstall /usr/local/Cellar/python@2/2.7.15_1
because it is required by mongodb, which is currently installed.
You can override this and force removal with:
  brew uninstall --ignore-dependencies python@2</pre></div>
<p>å“å‘€ï¼Œå¾—åˆ°æç¤ºæœ‰ä¾èµ–é—®é¢˜ï¼Œæ²¡äº‹å„¿ï¼å…ˆæŒ‰ç…§ <code>brew uninstall --ignore-dependencies python@2</code> å¼ºåˆ¶å¸è½½çœ‹çœ‹æ˜¯ä¸æ˜¯è¿™ä¸ªç‰ˆæœ¬pythonä¸lldbä¸å…¼å®¹ï¼Œå¸è½½åï¼Œè¿è¡Œlldbï¼Œæœç„¶æ²¡æœ‰é”™è¯¯äº†ï¼</p>

<p>çœ‹æ¥çœŸçš„æ˜¯ç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘è¿˜å¿…é¡»å®‰è£… <strong>python2.7.15</strong>ï¼Œå› ä¸º <strong>mongodb</strong> ä¾èµ–æœ€æ–°çš„è¿™ä¸ªç‰ˆæœ¬çš„pythonï¼Œè¿˜å¿…é¡»å®‰è£…è¿™ä¸ªç‰ˆæœ¬pythonï¼Œæ€ä¹ˆåŠï¼Ÿ</p>

<p>æ±‚åŠ©googleï¼Œæ‰¾åˆ°æ–¹æ³•ï¼Œå¼ºåˆ¶ <strong>lldb</strong> æŒ‰ç…§ç³»ç»Ÿçš„ bin ç¯å¢ƒè¿è¡Œâ€”â€”<code>PATH=/usr/bin /usr/bin/lldb</code><sup class="footnote-ref" id="fnref:homebrew-Python"><a href="#fn:homebrew-Python">1</a></sup>ï¼Œå°±ä¸ä¼šå‡ºç°é—®é¢˜äº†ã€‚</p>

<p>æ¯æ¬¡è¿™æ ·è¿è¡Œ <strong>lldb</strong> å¤ªéº»çƒ¦äº†ï¼Œä½•ä¸ <strong>alias</strong> ä¸€ä¸‹ï¼Œåœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="c1"># å¦‚æœæ‚¨ä½¿ç”¨bashï¼Œæ‰§è¡Œï¼š</span>
<span class="c1"># echo &#39;alias lldb=&#34;PATH=/usr/bin /usr/bin/lldb&#34;&#39; &gt;&gt; ~/.bashrc</span>
<span class="c1"># å¦‚æœæ‚¨ä½¿ç”¨zshï¼Œæ‰§è¡Œï¼š</span>
<span class="nb">echo</span> <span class="s1">&#39;alias lldb=&#34;PATH=/usr/bin /usr/bin/lldb&#34;&#39;</span> &gt;&gt; ~/.zshrc</code></pre></div>
<p>å¼€å¯ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œè¿è¡Œ <code>lldb</code> æ²¡æœ‰å¼‚å¸¸ï¼ŒDoneï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:homebrew-Python"><a href="http://qaru.site/questions/1690278/strange-mixing-of-system-homebrew-python-with-lldb" target="_blank">Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ½Ğ¾Ğµ ÑĞ¼ĞµÑˆĞ¸Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ + homebrew Python Ñ LLDB</a> <a class="footnote-return" href="#fnref:homebrew-Python"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>python3å®ç°å›¾ç‰‡è½¬æ¢ä¸ºå­—ç¬¦ç”»</title>
			<link>https://www.smslit.top/2018/09/14/image2charspic/</link>
			<pubDate>Fri, 14 Sep 2018 17:04:01 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/14/image2charspic/</guid>
			<description>&lt;p&gt;è®°å¾—ä¹‹å‰çœ‹åˆ°è¿‡æœ‰äººåšäº†ä¸€ä¸ªå°å·¥å…·ï¼Œå¯ä»¥å°†å›¾ç‰‡ç”¨å­—ç¬¦å±•ç¤ºå‡ºæ¥ï¼Œå°±æ˜¯æ‰€è°“çš„ &lt;strong&gt;å­—ç¬¦ç”»&lt;/strong&gt; äº†ï¼Œä»Šå¤©å’±ä¹Ÿç”¨python3å®ç°è¿™ä¹ˆä¸€ä¸ªæœ‰è¶£çš„å°å·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180914153691718315759.png&#34; alt=&#34;20180914153691718315759.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è®°å¾—ä¹‹å‰çœ‹åˆ°è¿‡æœ‰äººåšäº†ä¸€ä¸ªå°å·¥å…·ï¼Œå¯ä»¥å°†å›¾ç‰‡ç”¨å­—ç¬¦å±•ç¤ºå‡ºæ¥ï¼Œå°±æ˜¯æ‰€è°“çš„ <strong>å­—ç¬¦ç”»</strong> äº†ï¼Œä»Šå¤©å’±ä¹Ÿç”¨python3å®ç°è¿™ä¹ˆä¸€ä¸ªæœ‰è¶£çš„å°å·¥å…·ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180914153691718315759.png" alt="20180914153691718315759.png" /></p>

<h2 id="åŸç†">åŸç†</h2>

<p>é¦–å…ˆç†ä¸€ä¸‹æ€è·¯ï¼š</p>

<ol>
<li>ç”¨å­—ç¬¦ç”»å›¾ï¼Œå…¶å®å°±æ˜¯ç”¨å­—ç¬¦æ›¿ä»£åƒç´ ç‚¹ï¼Œæ‰€ä»¥å¾—æœ‰ä¸€ä¸ªå­—ç¬¦è¡¨ï¼›</li>
<li>å­—ç¬¦æ˜¯åå¤§çš„ä¸ºäº†æ›´å¥½çš„å‘ˆç°å­—ç¬¦ç”»çš„çŠ¶æ€ï¼Œè¿˜åº”è¯¥è°ƒæ•´å›¾ç‰‡å¤§å°ä¸ºæ›´ä½åƒç´ ï¼Œæ¯”å¦‚80*80</li>
<li>ä¸€å¹…å›¾ç‰‡ä¸€èˆ¬æƒ…å†µä¸‹å°±æ˜¯RGBä½å›¾ï¼Œä½†æ˜¯çº¯æ–‡æœ¬å­—ç¬¦æ²¡æœ‰è‰²å½©å¯è¨€ï¼Œæ‰€ä»¥éœ€è¦å°†å›¾ç‰‡è½¬æ¢ä¸ºç°åº¦å›¾ï¼›</li>
<li>ç°åº¦å›¾ä¸€èˆ¬æ—¶8ä½ï¼Œå–å€¼èŒƒå›´ä¼šæ˜¯0ï½255ï¼Œ255çš„å€¼æ˜¯ç™½è‰²ï¼Œæ‰€ä»¥å­—ç¬¦è¡¨æ˜¯ç©ºæ ¼æ•ˆæœä¼šå¥½ä¸€äº›ï¼›</li>
<li>è¿™é‡Œä½¿ç”¨åŠè§’å­—ç¬¦ä½œä¸ºåŸºæœ¬å…ƒç´ ï¼Œä¸ºäº†æ˜¯å­—ç¬¦ç”»æ›´è§„æ•´ï¼Œä½¿ç”¨ä¸¤ä¸ªä¸€æ ·çš„åŠè§’å­—ç¬¦ä»£æ›¿ä¸€ä¸ªåƒç´ ï¼Œå­—ç¬¦è¡¨é‡Œçš„å…ƒç´ ä½ä¸¤ä¸ªä¸€æ ·çš„å­—ç¬¦ï¼›</li>
<li>éœ€è¦å»ºç«‹å›¾ç‰‡ç°åº¦å€¼ä¸å­—ç¬¦è¡¨çš„æ˜ å°„å…³ç³»ï¼Œè¿™é‡Œä½¿ç”¨ç°åº¦å€¼æ˜ å°„è¡¨ç´¢å¼•å–å­—ç¬¦ï¼Œå¯ç”¨ä»¥ä¸‹å…¬å¼è®¡ç®—ç´¢å¼•ï¼š
$$
index = gray / 256 * length
$$

<ul>
<li><strong>index</strong>: å…ƒç´ ç´¢å¼•</li>
<li><strong>gray</strong>: åƒç´ ç‚¹çš„ç°åº¦å€¼</li>
<li><strong>length</strong>: å­—ç¬¦è¡¨çš„é•¿åº¦</li>
</ul></li>
</ol>

<h2 id="å®ç°æ€è·¯">å®ç°æ€è·¯</h2>

<p>æœ¬æ–‡ç›®æ ‡æ˜¯è®¾è®¡ä¸€ä¸ªå‘½ä»¤è¡Œå°å·¥å…·ï¼Œä½¿ç”¨å‘½ä»¤çš„æ—¶å€™ï¼Œéœ€è¦åˆ¶å®šå›¾ç‰‡çš„è·¯å¾„ï¼Œå¯ä»¥æŒ‡å®šå®½é«˜å’Œä¿å­˜ç›®å½•ï¼ŒæŒ‡å®šæŒ‰ç…§ä¸Šè¿°åŸç†ï¼Œå®ç°æ€è·¯ä¹Ÿå°±éå¸¸æ˜äº†ï¼š</p>

<ol>
<li>å»ºç«‹å­—ç¬¦è¡¨ï¼›</li>
<li>è·å–æŒ‡å®šçš„å‘½ä»¤å‚æ•°ï¼š

<ul>
<li>å›¾ç‰‡è·¯å¾„ï¼›</li>
<li>å›¾ç‰‡å®½é«˜ï¼›</li>
<li>å­—ç¬¦ç”»ä¿å­˜è·¯å¾„ï¼›</li>
</ul></li>
<li>è¯»å–å›¾ç‰‡ï¼ŒæŒ‰ç…§æŒ‡å®šå°ºå¯¸è½¬æ¢å›¾ç‰‡å¤§å°ï¼›</li>
<li>å°†å›¾ç‰‡è½¬æ¢ä¸ºç°åº¦å›¾ï¼›</li>
<li>æŒ‰è¡Œè¯»å–åƒç´ ç°åº¦å€¼è·å–å­—ç¬¦è¿½åŠ åˆ°ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œæ¯è¯»ä¸€è¡Œè¿½åŠ ä¸€ä¸ªæ¢è¡Œï¼›</li>
<li>ä¿å­˜ç»“æœå­—ç¬¦ä¸²ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼›</li>
</ol>

<p>æ ¹æ®ä¸Šè¿°æ€è·¯ï¼Œä¼šä½¿ç”¨ä»¥ä¸‹åº“ï¼š</p>

<ul>
<li><strong>pillow</strong>ï¼šå¤„ç†å›¾ç‰‡å¹¶è·å–å›¾ç‰‡æ•°æ®ï¼›</li>
<li><strong>argparse</strong>ï¼šæ”¾ä¾¿è¿‡æ»¤å‘½ä»¤å‚æ•°ï¼Œæ¯”å¦‚æŒ‡å®šå›¾ç‰‡ã€ä¿å­˜ç›®å½•ï¼Œå®½é«˜ç­‰</li>
</ul>

<h2 id="å®ç°è¿‡ç¨‹">å®ç°è¿‡ç¨‹</h2>

<h3 id="å®‰è£…åº“">å®‰è£…åº“</h3>

<p><strong>argparse</strong> åº“æ˜¯å®˜æ–¹åº“ï¼Œä¸ç”¨å®‰è£…ï¼Œè¿™é‡Œåªéœ€å®‰è£… <strong>pillow</strong> åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pip3 install pillow</code></pre></div>
<p><strong>æ³¨ï¼š</strong>
å¯ä»¥é˜…è¯» <a href="/2018/09/13/python-argparse/" target="_blank"><strong>argparse åº“çš„ä½¿ç”¨</strong></a> äº†è§£ <strong>argparse</strong> åº“çš„ä½¿ç”¨ï¼</p>

<h3 id="å®ç°">å®ç°</h3>

<h4 id="å‡†å¤‡æ–‡ä»¶">å‡†å¤‡æ–‡ä»¶</h4>

<p>åˆ›å»ºæ–‡ä»¶ <strong>img2ascii</strong>ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/local/bin/python3</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">argparse</span></code></pre></div>
<p>ç¬¬ä¸€è¡ŒæŒ‡æ˜è„šæœ¬è§£é‡Šå™¨çš„è·¯å¾„ï¼Œåä¸¤è¡Œå¯¼å…¥æ‰€éœ€åº“ï¼Œç„¶åä¸ºæ–‡ä»¶æŒ‡å®šæ‰§è¡Œæƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ chmod +x img2ascii</code></pre></div>
<p>è¿™æ ·å°±å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰§è¡Œè„šæœ¬äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./img2ascii</code></pre></div>
<h4 id="æ·»åŠ å‚æ•°è§£æå®ç°">æ·»åŠ å‚æ•°è§£æå®ç°</h4>

<p>æ·»åŠ å››ä¸ªå‚æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;æ­¤å·¥å…·å¯ä»¥å°†å›¾ç‰‡è½¬æ¢ä¸ºå­—ç¬¦ç”»ã€‚&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;å¾…è½¬æ¢çš„å›¾ç‰‡è·¯å¾„&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--output&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æŒ‡å®šç”Ÿæˆå­—ç¬¦ç”»çš„ä¿å­˜è·¯å¾„&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-W&#39;</span><span class="p">,</span> <span class="s1">&#39;--width&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;å¯ä»¥é€šè¿‡æ­¤å‚æ•°æŒ‡å®šå›¾ç‰‡è½¬æ¢å¤§å°åˆ°ä¸€å®šå®½åº¦ï¼Œå•ä½ï¼šåƒç´ ï¼Œé»˜è®¤å€¼ï¼š80&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-H&#39;</span><span class="p">,</span> <span class="s1">&#39;--height&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;å¯ä»¥é€šè¿‡æ­¤å‚æ•°æŒ‡å®šå›¾ç‰‡è½¬æ¢å¤§å°åˆ°ä¸€å®šé«˜åº¦ï¼Œå•ä½ï¼šåƒç´ ï¼Œé»˜è®¤å€¼ï¼š80&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>


<span class="n">IMG</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">file</span>
<span class="n">WIDTH</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">width</span>
<span class="n">HEIGHT</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">height</span>
<span class="n">OUTPUT</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">output</span></code></pre></div>
<h4 id="ç”Ÿæˆå­—ç¬¦è¡¨">ç”Ÿæˆå­—ç¬¦è¡¨</h4>

<p>æ„å»ºéœ€è¦çš„å­—ç¬¦è¡¨ï¼Œå…¶å®è¿™ä¸ªè¡¨é‡Œçš„å­—ç¬¦å¯ä»¥ä»»æ„æ·»åŠ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">ascii_chars</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s2">&#34;aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ!@#$%^&amp;*()_+|?&gt;&lt;.,:;~`1234567890 &#34;</span><span class="p">)</span>
<span class="n">ascii_table</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ascii_chars</span><span class="p">]</span>
<span class="n">TABLE_LENGTH</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ascii_table</span><span class="p">)</span></code></pre></div>
<h4 id="åˆ›å»ºæ˜ å°„å‡½æ•°">åˆ›å»ºæ˜ å°„å‡½æ•°</h4>

<p>æ˜ å°„å‡½æ•°ç”¨äºè·å–å¯¹åº”åƒç´ ç‚¹ä¸Šåº”è¯¥æ”¾ç½®çš„å­—ç¬¦ä¸²ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">getChars</span><span class="p">(</span><span class="n">gray</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">gray</span> <span class="o">==</span> <span class="mi">255</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;  &#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ascii_table</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">gray</span> <span class="o">/</span> <span class="mi">256</span>  <span class="o">*</span> <span class="n">TABLE_LENGTH</span><span class="p">)]</span></code></pre></div>
<h4 id="æ‰“å¼€å›¾åƒå¹¶ç°åº¦åŒ–">æ‰“å¼€å›¾åƒå¹¶ç°åº¦åŒ–</h4>

<p>ä½¿ç”¨ <strong>pillow</strong> åº“æ‰“å¼€å›¾ç‰‡ï¼Œå°†å›¾ç‰‡è½¬æ¢ä¸ºç°åº¦å›¾ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">IMG</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="n">WIDTH</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">),</span> <span class="n">Image</span><span class="o">.</span><span class="n">NEAREST</span><span class="p">)</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">im</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
<span class="n">txt</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span></code></pre></div>
<h4 id="ç”Ÿæˆå­—ç¬¦ç”»">ç”Ÿæˆå­—ç¬¦ç”»</h4>

<p>é€šè¿‡è¯»å–æ¯ä¸ªåƒç´ ç‚¹çš„ç°åº¦å€¼ï¼Œè·å–æ›¿ä»£å­—ç¬¦ä¸²ï¼Œç”Ÿæˆå­—ç¬¦ç”»ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">HEIGHT</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">):</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">im</span><span class="o">.</span><span class="n">getpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)))</span>
        <span class="n">txt</span> <span class="o">+=</span> <span class="n">getChars</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>
    <span class="n">txt</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span></code></pre></div>
<h4 id="å¯¼å‡ºå­—ç¬¦ç”»æ–‡ä»¶">å¯¼å‡ºå­—ç¬¦ç”»æ–‡ä»¶</h4>

<p>å°†ç”Ÿæˆçš„å­—ç¬¦ç”»å­—ç¬¦ä¸²ä»¥æ–‡ä»¶çš„å½¢å¼ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">OUTPUT</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">OUTPUT</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;output.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span></code></pre></div>
<p><strong>æ³¨ï¼š</strong></p>

<p><a href="https://github.com/smslit/tools-with-script/blob/master/img2ascii/img2ascii" target="_blank"><strong>ç‚¹æˆ‘</strong></a> æŸ¥çœ‹å®Œæ•´ä»£ç ï¼</p>

<h3 id="æµ‹è¯•æ•ˆæœ">æµ‹è¯•æ•ˆæœ</h3>

<p>è¿™é‡Œä»¥å›¾ç‰‡ <a href="https://www.smslit.top/android-chrome-512x512.png" target="_blank"><strong>android-chrome-512x512.png</strong></a> ä¸ºä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./img2ascii android-chrome-512x512.png</code></pre></div>
<p>è¿™æ—¶ä¼šçœ‹åˆ°å›¾ç‰‡åŒçº§ç›®å½•ä¸‹å‡ºç° <strong>output.txt</strong> ï¼Œæ‰“å¼€åå°±ä¼šçœ‹åˆ°å­—ç¬¦ç”»äº†ï¼Œå°è¯•åŠ å…¥å®½é«˜å‚æ•°çš„æŒ‡å®šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./img2ascii android-chrome-512x512.png -W <span class="m">20</span> -H <span class="m">20</span></code></pre></div>
<p>å¾—åˆ°å¦‚ä¸‹å­—ç¬¦ç”»ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180914153693707997013.png" alt="20180914153693707997013.png" /></p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ç»ˆäºå®Œæˆäº†ä¸€ä¸ªç®€å•çš„å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¾—åˆ°å›¾ç‰‡å¯¹åº”çš„å­—ç¬¦ç”»ï¼Œåº”è¯¥æœ‰æ›´å¥½çš„å®ç°æ–¹å¼ï¼Œå¦‚æœä»¥åå‘ç°ä¼šç»§ç»­åœ¨åšå®¢ä¸­åˆ†äº«ï¼Œæ¬¢è¿æŒç»­å…³æ³¨ï¼</p>]]></content>
		</item>
		
		<item>
			<title>argparse åº“çš„ä½¿ç”¨</title>
			<link>https://www.smslit.top/2018/09/13/python-argparse/</link>
			<pubDate>Thu, 13 Sep 2018 15:16:37 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/13/python-argparse/</guid>
			<description>&lt;p&gt;å¦‚æœæ‚¨æ¥è§¦è¿‡å‘½ä»¤è¡Œçš„è¯ï¼Œä¸€å®šæ„Ÿå—è¿‡å‘½ä»¤å·¥å…·çš„ä½¿ç”¨ï¼Œä¼šæœ‰ä¸ªå‚æ•°çš„æ¦‚å¿µï¼Œæ¯”å¦‚ä»¥åˆ—è¡¨çš„å½¢å¼åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰å¯è§æ–‡ä»¶ï¼š&lt;code&gt;ls -l&lt;/code&gt;ã€‚è¿›è¡Œpythonå¼€å‘çš„æ—¶å€™ï¼Œä¹Ÿè®¸æœ€ç»ˆä¼šä»¥å‘½ä»¤è¡Œå·¥å…·çš„å½¢å¼å·¥ä½œï¼Œå¯èƒ½éœ€è¦å¯¹å‘½ä»¤å‚æ•°è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ &lt;code&gt;sys.argv&lt;/code&gt; è·å–å‘½ä»¤è¾“å…¥çš„å‚æ•°åˆ—è¡¨ï¼Œè¿›è¡Œåˆ†æåˆ¤æ–­åšç›¸åº”å¤„ç†ï¼Œä½†éšç€å‚æ•°é¡¹å¢å¤šï¼Œè¿™ç§æ–¹å¼ä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œè€Œæœ¬æ–‡å°†è¦ä»‹ç»çš„ &lt;strong&gt;argparse&lt;/strong&gt; åº“ï¼Œä¼šä½¿å‚æ•°çš„ç®¡ç†å˜å¾—ä¼˜é›…ï¼Œä¸‹é¢ä¸€èµ·çœ‹ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨å§ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å¦‚æœæ‚¨æ¥è§¦è¿‡å‘½ä»¤è¡Œçš„è¯ï¼Œä¸€å®šæ„Ÿå—è¿‡å‘½ä»¤å·¥å…·çš„ä½¿ç”¨ï¼Œä¼šæœ‰ä¸ªå‚æ•°çš„æ¦‚å¿µï¼Œæ¯”å¦‚ä»¥åˆ—è¡¨çš„å½¢å¼åˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰å¯è§æ–‡ä»¶ï¼š<code>ls -l</code>ã€‚è¿›è¡Œpythonå¼€å‘çš„æ—¶å€™ï¼Œä¹Ÿè®¸æœ€ç»ˆä¼šä»¥å‘½ä»¤è¡Œå·¥å…·çš„å½¢å¼å·¥ä½œï¼Œå¯èƒ½éœ€è¦å¯¹å‘½ä»¤å‚æ•°è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>sys.argv</code> è·å–å‘½ä»¤è¾“å…¥çš„å‚æ•°åˆ—è¡¨ï¼Œè¿›è¡Œåˆ†æåˆ¤æ–­åšç›¸åº”å¤„ç†ï¼Œä½†éšç€å‚æ•°é¡¹å¢å¤šï¼Œè¿™ç§æ–¹å¼ä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œè€Œæœ¬æ–‡å°†è¦ä»‹ç»çš„ <strong>argparse</strong> åº“ï¼Œä¼šä½¿å‚æ•°çš„ç®¡ç†å˜å¾—ä¼˜é›…ï¼Œä¸‹é¢ä¸€èµ·çœ‹ä¸€ä¸‹æ€ä¹ˆä½¿ç”¨å§ï¼</p>

<p>æœ¬æ–‡å°±ä¸ç”¨è§£é‡Šè¿™ä¸ªå‚æ•°çš„æ¦‚å¿µäº†å§ï¼Œç›¸ä¿¡æ‚¨å¯¹å‚æ•°è¿™ä¸ªæ¦‚å¿µæœ‰äº†è‡ªå·±çš„æ„Ÿå—ï¼Œå¼€å‘ä¸€ä¸ªå±äºè‡ªå·±çš„å‘½ä»¤å·¥å…·ä¸€å®šå¾ˆé…·ï¼ŒLet&rsquo;s do it!</p>

<h2 id="åˆæ­¥æ„Ÿå—">åˆæ­¥æ„Ÿå—</h2>

<p>æœ¬æ–‡ä»¥python3å¼€å‘ä¸ºä¾‹ï¼Œä»¥ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹å¼€å§‹ï¼Œåˆ›å»ºæ–‡ä»¶ <strong>pug.py</strong> ï¼Œä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span></code></pre></div>
<p>æˆ‘ä»¬è¿è¡Œåˆæ­¥æ„Ÿå—ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py
$ python3 pug.py --help
usage: pug.py <span class="o">[</span>-h<span class="o">]</span>

optional arguments:
  -h, --help  show this <span class="nb">help</span> message and <span class="nb">exit</span>
$ python3 pug.py --verbose
usage: pug.py <span class="o">[</span>-h<span class="o">]</span>
pug.py: error: unrecognized arguments: --verbose
$ python3 pug.py foo
usage: pug.py <span class="o">[</span>-h<span class="o">]</span>
pug.py: error: unrecognized arguments: foo</code></pre></div>
<p>çœ‹çœ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p>

<ul>
<li>ç›´æ¥è¿è¡Œæ–‡ä»¶ï¼Œä¸åŠ ä»»ä½•å‚æ•°ï¼Œæ²¡æœ‰ä»»ä½•å¤„ç†ï¼›</li>
<li>ç¬¬äºŒæ¬¡æ‰§è¡ŒåŠ äº†å‚æ•° <strong>&ndash;help</strong> ä¼šæ‰“å°ä¸€å®šçš„å¸®åŠ©ä¿¡æ¯ï¼Œè¿™ä¸ªå¸®åŠ©ä¿¡æ¯ä¸­å¯ä»¥çœ‹åˆ° <strong>&ndash;help</strong>å¯ä»¥ç®€å†™ä¸º <strong>-h</strong>ï¼›</li>
<li>ç¬¬ä¸‰æ¬¡å’Œç¬¬å››æ¬¡æ‰§è¡Œä½¿ç”¨äº†ä¸æ”¯æŒçš„å‚æ•°ï¼Œæ‰“å°äº†é”™è¯¯æé†’ï¼›</li>
</ul>

<p><strong>parser.parse_args()</strong> å°±æ˜¯å‚æ•°è§£æçš„è¿‡ç¨‹ã€‚</p>

<h2 id="positional-arguments-çš„ä½¿ç”¨">Positional arguments çš„ä½¿ç”¨</h2>

<p><strong>Positional arguments</strong> æ€ä¹ˆç¿»è¯‘æ¯”è¾ƒå¥½å‘¢ï¼Ÿçœ‹åˆ°ç½‘ä¸Šæœ‰äººå«å®ƒ <strong>å®šä½å‚æ•°</strong>ï¼Œæˆ‘å’‹è§‰å¾—å«å®ƒ <strong>å ä½å‚æ•°</strong> ä¼šæ¯”è¾ƒè´´åˆ‡å‘¢ï¼Œæ— æ‰€è°“äº†ï¼Œè¿˜æ˜¯ç”¨å®ƒæœ¬å <strong>Positional arguments</strong> å§ï¼</p>

<p>æ›´æ”¹pug.pyä»£ç ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;echo&#34;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">echo</span><span class="p">)</span></code></pre></div>
<p>æ‰§è¡Œçœ‹çœ‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="nb">echo</span>
pug.py: error: the following arguments are required: <span class="nb">echo</span>
$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="nb">echo</span>

positional arguments:
  <span class="nb">echo</span>

optional arguments:
  -h, --help  show this <span class="nb">help</span> message and <span class="nb">exit</span>
$ python3 pug.py yeah
yeah</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°åœ¨æ–¹æ³• <strong>add_argument</strong> çš„å¸®åŠ©ä¸‹ <strong>echo</strong> æˆåŠŸä¸Šä½ï¼Œä½¿ç”¨å‘½ä»¤æ—¶å¿…é¡»ä¸ºechoä½ç½®ä¸Šè¾“ä¸Šç‚¹ä»€ä¹ˆï¼Œå®ƒæ‰ç½¢ä¼‘ï¼Œè¿™é‡Œå¯ä»¥ç®€å•åœ°è®¤ä¸ºechoæ˜¯ä¸€ä¸ªå¿…é¡»èµ‹å€¼çš„å˜é‡ã€‚ä¼¼ä¹å°‘äº†ç‚¹è¿™ä¸ªå‚æ•°çš„å¸®åŠ©ä¿¡æ¯ï¼Œä¸è¦ç´§ï¼æœ‰æ–¹æ³• <strong>add_argument</strong> çš„åŠ æŒå•¥éƒ½ä¸æ€•ï¼Œæ­¤æ–¹æ³•æœ‰ä¸ªå‚æ•° <strong>help</strong>ï¼Œä¸ºå…¶æŒ‡å®šå†…å®¹å°±å¯ä»¥å¡«å……å¸®åŠ©ä¿¡æ¯äº†ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;echo&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;å­¦æ‚¨è¯´è¯ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">echo</span><span class="p">)</span></code></pre></div>
<p>è¿è¡Œçœ‹çœ‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="nb">echo</span>

positional arguments:
  <span class="nb">echo</span>        å­¦æ‚¨è¯´è¯ï¼

optional arguments:
  -h, --help  show this <span class="nb">help</span> message and exit</code></pre></div>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¸èƒ½è®©pugå¤ªè°ƒçš®ï¼Œå¾—å¹²ç‚¹å®ç”¨çš„äº‹ï¼Œæ¯”å¦‚è®©å®ƒç®—æ•°ï¼Œé‚£å°±è®©å®ƒç®—ä¸€ä¸ªæŒ‡å®šæ•´æ•°çš„å¹³æ–¹å§ï¼Œä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span></code></pre></div>
<p>æ‰§è¡Œä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py <span class="m">2</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&#34;pug.py&#34;</span>, line <span class="m">5</span>, in &lt;module&gt;
    print<span class="o">(</span>args.square**2<span class="o">)</span>
TypeError: unsupported operand type<span class="o">(</span>s<span class="o">)</span> <span class="k">for</span> ** or pow<span class="o">()</span>: <span class="s1">&#39;str&#39;</span> and <span class="s1">&#39;int&#39;</span></code></pre></div>
<p>å‡ºé”™å•¦ï¼ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºå‚æ•°é»˜è®¤éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå°ç‹—å­pugè‚¯å®šä¸ä¼šè®¡ç®—å­—ç¬¦ä¸²çš„å¹³æ–¹å§ï¼<strong>add_argument</strong> æ–¹æ³•æ­¤æ—¶ç¬‘äº†ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œå®ƒå¯ä»¥ä¸ºæ‚¨æŒ‰ç±»å‹è§£æè¿™ä¸ªå‚æ•°çš„å€¼ï¼Œåªéœ€æŒ‡å®šæ–¹æ³•çš„å‚æ•° <strong>type</strong> å°±å¯ä»¥äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">square</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span></code></pre></div>
<p>è¯•ä¸€ä¸‹æ•ˆæœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py <span class="m">2</span>
<span class="m">4</span>
$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> square

positional arguments:
  square      æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼

optional arguments:
  -h, --help  show this <span class="nb">help</span> message and exit</code></pre></div>
<p>å°ç‹—å­pugå¯ä»¥çš„ï¼</p>

<h2 id="optional-arguments-çš„ä½¿ç”¨">Optional arguments çš„ä½¿ç”¨</h2>

<p>ä¸‹é¢ä¸€èµ·çœ‹ä¸€ä¸‹å¯é€‰å‚æ•°ï¼ˆ<strong>Optional arguments</strong>ï¼‰çš„ä½¿ç”¨ã€‚</p>

<p>ä»£ç æ›´æ”¹ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;æˆ‘ç¡ç€äº†(-_-)zzzï¼Œåˆ«æ‰“æ…æˆ‘ï¼&#39;</span><span class="p">)</span></code></pre></div>
<p>çœ‹ä¸€ä¸‹å°ç‹—å­æœ‰å¤šæ‡’ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--sleep SLEEP<span class="o">]</span>

optional arguments:
  -h, --help     show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --sleep SLEEP  è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼
$ python3 pug.py --sleep <span class="m">1</span>
æˆ‘ç¡ç€äº†<span class="o">(</span>-_-<span class="o">)</span>zzzï¼Œåˆ«æ‰“æ…æˆ‘ï¼</code></pre></div>
<p>ç®€å•æ¥è¯´ï¼Œå¯¹äºç¡è§‰ï¼Œè¦ä¹ˆç¡ç€è¦ä¹ˆæ²¡ç¡ï¼Œåº”è¯¥æ˜¯äºŒå€¼ï¼Œé‚£å¯ä»¥é™åˆ¶è¿™ä¸ªå‚æ•° <strong>&ndash;sleep</strong> è¦ä¹ˆ <strong>True</strong> è¦ä¹ˆ <strong>False</strong>ï¼Œæ–¹æ³• <strong>add_argument</strong> æä¾›äº†è®¾ç½®å‚æ•° <strong>action</strong> ï¼Œè®¾ç½®å…¶ä¸º <strong>store_true</strong> å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;æˆ‘ç¡ç€äº†(-_-)zzzï¼Œåˆ«æ‰“æ…æˆ‘ï¼&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œä¸æƒ³ç¡è§‰ï¼&#39;</span><span class="p">)</span></code></pre></div>
<p>é€—ä¸€ä¸‹å°ç‹—å­pugï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--sleep<span class="o">]</span>

optional arguments:
  -h, --help  show this <span class="nb">help</span> message and <span class="nb">exit</span>
  --sleep     è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼
$ python3 pug.py --sleep <span class="m">1</span>
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--sleep<span class="o">]</span>
pug.py: error: unrecognized arguments: <span class="m">1</span>
$ python3 pug.py --sleep
æˆ‘ç¡ç€äº†<span class="o">(</span>-_-<span class="o">)</span>zzzï¼Œåˆ«æ‰“æ…æˆ‘ï¼
$ python3 pug.py
æˆ‘å¾ˆæ¸…é†’ï¼Œä¸æƒ³ç¡è§‰ï¼</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œå‘½ä»¤æ—¶ï¼Œå¦‚æœæŒ‡å®šå‚æ•° <strong>&ndash;sleep</strong>ï¼Œé‚£ä¹ˆè¿™ä¸ªå‚æ•°å€¼å°±ä¸º <strong>True</strong>ï¼Œ å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆå‚æ•°å€¼ä¸º <strong>False</strong>ã€‚å¦‚æœæ‚¨äº†è§£å‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨ä¸€å®šä¼šé—®ï¼šçŸ­å‚æ•°çš„å®ç°ä¼šæ˜¯æ€æ ·çš„ï¼Ÿå…¶å®å¾ˆç®€å•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;æˆ‘ç¡ç€äº†(-_-)zzzï¼Œåˆ«æ‰“æ…æˆ‘ï¼&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œä¸æƒ³ç¡è§‰ï¼&#39;</span><span class="p">)</span></code></pre></div>
<p>å«å°ç‹—å­pugè¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s<span class="o">]</span>

optional arguments:
  -h, --help   show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -s, --sleep  è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼
$ python3 pug.py -s
æˆ‘ç¡ç€äº†<span class="o">(</span>-_-<span class="o">)</span>zzzï¼Œåˆ«æ‰“æ…æˆ‘ï¼</code></pre></div>
<h2 id="positional-arguments-å’Œ-optional-arguments-ç»“åˆä½¿ç”¨">Positional arguments å’Œ Optional arguments ç»“åˆä½¿ç”¨</h2>

<p>è®©å°ç‹—å­ç¡ç€è§‰ç®—æ•°ä¼šæ˜¯å’‹æ ·çš„ï¼Œè¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æˆ‘ç¡ç€äº†(-_-)zzzéƒ½èƒ½ç®—æ•°ï¼š{answer}ï¼&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š{answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>è®©å°ç‹—å­åš£å¼ åš£å¼ ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py -s <span class="m">3</span>
æˆ‘ç¡ç€äº†<span class="o">(</span>-_-<span class="o">)</span>zzzéƒ½èƒ½ç®—æ•°ï¼š9ï¼
$ python3 pug.py <span class="m">3</span>
æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š9!
$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s<span class="o">]</span> square

positional arguments:
  square       æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼

optional arguments:
  -h, --help   show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -s, --sleep  è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼</code></pre></div>
<p>å°ç‹—å­å¾ˆå‰å®³å‘€ï¼Œç¡ç€è§‰éƒ½ç»™ç®—å‡ºç»“æœæ¥äº†ï¼Œé‚£å°ç‹—å­ç¡è§‰ä¹Ÿåˆ†çŠ¶æ€çš„å§ï¼Œç†Ÿç¡å’ŒåŠç¡åŠé†’çŠ¶æ€åº”è¯¥ä¼šä¸ä¸€æ ·ï¼Œçœ‹ä¸€ä¸‹ä¼šæ€ä¹ˆæ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š{answer}ï¼&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š{answer}!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š{answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>é‚£æˆ‘ä»¬è€ƒä¸€ä¸‹å°ç‹—å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py <span class="m">3</span> -s
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s SLEEP<span class="o">]</span> square
pug.py: error: argument -s/--sleep: expected one argument
$ python3 pug.py <span class="m">3</span> -s <span class="m">1</span>
åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š9!
$ python3 pug.py <span class="m">3</span> -s <span class="m">2</span>
è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š9ï¼
$ python3 pug.py <span class="m">3</span> -s <span class="m">0</span>
æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š9!
$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s SLEEP<span class="o">]</span> square

positional arguments:
  square                æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -s SLEEP, --sleep SLEEP
                        è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼
$ python3 pug.py <span class="m">3</span>
æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š9!</code></pre></div>
<p>ç®€ç›´äº†ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œpugç¡è§‰çŠ¶æ€å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®šå…¶å®ƒå¯èƒ½æ²¡æœ‰å¿…è¦å˜›ï¼Œèƒ½ä¸èƒ½å¯¹å€¼è¿›è¡Œé™åˆ¶å‘¢ï¼Ÿå½“ç„¶å¯ä»¥å•¦ï¼Œæ·»åŠ å‚æ•°æ—¶ç»™å®š <strong>choices</strong> å°±å¯ä»¥å•¦ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š{answer}ï¼&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š{answer}!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š{answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>çœ‹ä¸€ä¸‹æ•ˆæœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py <span class="m">3</span> -s <span class="m">0</span>
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s <span class="o">{</span><span class="m">1</span>,2<span class="o">}]</span> square
pug.py: error: argument -s/--sleep: invalid choice: <span class="m">0</span> <span class="o">(</span>choose from <span class="m">1</span>, <span class="m">2</span><span class="o">)</span>
$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s <span class="o">{</span><span class="m">1</span>,2<span class="o">}]</span> square

positional arguments:
  square                æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -s <span class="o">{</span><span class="m">1</span>,2<span class="o">}</span>, --sleep <span class="o">{</span><span class="m">1</span>,2<span class="o">}</span>
                        è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼</code></pre></div>
<p>æ•ˆæœè¿˜å¯ä»¥ï¼Œç°åœ¨å°è¯•å¦ä¸€ç§ç©æ³•ï¼Œå…ˆçœ‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š{answer}ï¼&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š{answer}!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š{answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>å†çœ‹ä¸€ä¸‹ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py <span class="m">3</span> -s
åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š9!
$ python3 pug.py <span class="m">3</span> -ss
è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š9ï¼
$ python3 pug.py <span class="m">3</span> -sss
æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š9!
$ python3 pug.py <span class="m">3</span>
æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š9!</code></pre></div>
<p>å¥½åƒç¬¬ä¸‰æ¡æœ‰ç‚¹é—®é¢˜å“ˆï¼Œä¿®å¤ä¸€ä¸‹è¿™ä¸ªbugï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š{answer}ï¼&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š{answer}!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š{answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>å†çœ‹ä¸€ä¸‹è¿™æ¬¡æ˜¯ä¸æ˜¯æ›´å¥½äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py <span class="m">3</span> -s
åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š9!
$ python3 pug.py <span class="m">3</span> -ss
è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š9ï¼
$ python3 pug.py <span class="m">3</span> -sss
è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š9ï¼
$ python3 pug.py <span class="m">3</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&#34;pug.py&#34;</span>, line <span class="m">7</span>, in &lt;module&gt;
    <span class="k">if</span> args.sleep &gt;<span class="o">=</span> <span class="m">2</span>:
TypeError: <span class="s1">&#39;&gt;=&#39;</span> not supported between instances of <span class="s1">&#39;NoneType&#39;</span> and <span class="s1">&#39;int&#39;</span></code></pre></div>
<p>å“å‘€ï¼Œå¥½åƒæœ€åä¸€ä¸ªè®©å°ç‹—å­ç‚¸é”…äº†ï¼Œç¨å¾®ä¿®ç†ä¸€ä¸‹å®ƒï¼ˆç»™å‚æ•°æŒ‡å®šé»˜è®¤å€¼ï¼‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>
<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è™½ç„¶æˆ‘ç¡çš„å¾ˆæ­»ï¼Œä½†æˆ‘çš„è€³æœµå¥½åƒè¿˜æŒºå¥½ä½¿çš„çš„ï¼Œç”¨è€³æœµéƒ½èƒ½ç®—çš„ï¼š{answer}ï¼&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;åŠç¡åŠé†’çš„æˆ‘å½“ç„¶å¬å¾—æ¸…ä½ è¯´ä»€ä¹ˆï¼Œå¾ˆç®€å•çš„é¢˜å˜›ï¼š{answer}!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š{answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>çœ‹ä¸€ä¸‹æ˜¯å¦æ­£å¸¸äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py <span class="m">3</span>
æˆ‘å¾ˆæ¸…é†’ï¼Œç»“æœæ˜¯ï¼š9!</code></pre></div>
<p>OKay! æ•ˆæœä¸é”™ï¼Œå°ç‹—å­ä¿®ç‚¼å¾—ä¸é”™äº†ï¼</p>

<h2 id="äº’æ–¥å‚æ•°">äº’æ–¥å‚æ•°</h2>

<p>æœ‰çš„æ—¶å€™å°ç‹—å­çš„è¡Œä¸ºæ˜¯äº’æ–¥çš„ï¼Œæ¯”å¦‚ç¡ç€è§‰çš„æ—¶å€™ä¸èƒ½è·³èˆï¼Œè·³èˆçš„æ—¶å€™æ²¡æœ‰åœ¨ç¡è§‰ï¼Œæ‰€ä»¥å‘€ï¼Œæœ‰çš„æ—¶å€™è¿˜éœ€è¦äº’æ–¥å‚æ•°çš„ä½¿ç”¨ã€‚</p>

<p>ä½¿ç”¨èµ·æ¥å¹¶ä¸å¤æ‚ï¼Œä¸°å¯Œä¸€ä¸‹æˆ‘ä»¬çš„å°ç‹—å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s1">&#39;--dance&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;å¥½å¼€å¿ƒï¼Œè®©æˆ‘è·³ä¼šå„¿èˆï¼&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;ç¡è§‰çš„æˆ‘ä¾ç„¶ç»™åŠ›ï¼Œ{args.square} çš„å¹³æ–¹æ˜¯ {answer}!&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">dance</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è·³èˆçš„æ—¶å€™ï¼Œæˆ‘çš„å¤§è„‘éå¸¸æ´»è·ƒï¼Œæ‰€ä»¥ï¼Œ{args.square} çš„å¹³æ–¹æ˜¯ {answer}!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;{args.square} çš„å¹³æ–¹æ˜¯ {answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>ç°åœ¨å°ç‹—å­ç‚¹äº†æ–°æŠ€èƒ½ï¼Œå±•ç¤ºä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s <span class="p">|</span> -d<span class="o">]</span> square

positional arguments:
  square       æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼

optional arguments:
  -h, --help   show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -s, --sleep  è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼
  -d, --dance  å¥½å¼€å¿ƒï¼Œè®©æˆ‘è·³ä¼šå„¿èˆï¼
$ python3 pug.py <span class="m">5</span>
<span class="m">5</span> çš„å¹³æ–¹æ˜¯ <span class="m">25</span>!
$ python3 pug.py -s <span class="m">5</span>
ç¡è§‰çš„æˆ‘ä¾ç„¶ç»™åŠ›ï¼Œ5 çš„å¹³æ–¹æ˜¯ <span class="m">25</span>!
$ python3 pug.py -d <span class="m">5</span>
è·³èˆçš„æ—¶å€™ï¼Œæˆ‘çš„å¤§è„‘éå¸¸æ´»è·ƒï¼Œæ‰€ä»¥ï¼Œ5 çš„å¹³æ–¹æ˜¯ <span class="m">25</span>!
$ python3 pug.py -d -s <span class="m">5</span>
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s <span class="p">|</span> -d<span class="o">]</span> square
pug.py: error: argument -s/--sleep: not allowed with argument -d/--dance</code></pre></div>
<p>å¯¹äº†ï¼Œæˆ‘ä»¬åº”è¯¥è®©å°ç‹—å­å¯ä»¥è‡ªæˆ‘ä»‹ç»ï¼Œåœ¨åˆå§‹åŒ–å‚æ•°åˆ†æå™¨çš„æ—¶å€™æ·»åŠ æè¿°å°±å¥½äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">argparse</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;æˆ‘æ˜¯ä¸€åªå¿«ä¹çš„å“ˆå·´ç‹—ï¼Œæˆ‘ä¼šç®—æ•´æ•°çš„å¹³æ–¹å“¦ï¼è€Œä¸”è·³ç€èˆæˆ–è€…ç¡ç€è§‰çš„æ—¶å€™æˆ‘ä¾ç„¶å¯ä»¥å‘¢ï¼&#39;</span><span class="p">)</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-s&#39;</span><span class="p">,</span> <span class="s2">&#34;--sleep&#34;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼&#39;</span><span class="p">)</span>
<span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="s1">&#39;--dance&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;å¥½å¼€å¿ƒï¼Œè®©æˆ‘è·³ä¼šå„¿èˆï¼&#39;</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&#34;square&#34;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">answer</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">square</span> <span class="o">**</span> <span class="mi">2</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;ç¡è§‰çš„æˆ‘ä¾ç„¶ç»™åŠ›ï¼Œ{args.square} çš„å¹³æ–¹æ˜¯ {answer}!&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">dance</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;è·³èˆçš„æ—¶å€™ï¼Œæˆ‘çš„å¤§è„‘éå¸¸æ´»è·ƒï¼Œæ‰€ä»¥ï¼Œ{args.square} çš„å¹³æ–¹æ˜¯ {answer}!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;{args.square} çš„å¹³æ–¹æ˜¯ {answer}!&#39;</span><span class="p">)</span></code></pre></div>
<p>è®©å®ƒå¥½å¥½çš„è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹è‡ªå·±å§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 pug.py -h
usage: pug.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-s <span class="p">|</span> -d<span class="o">]</span> square

æˆ‘æ˜¯ä¸€åªå¿«ä¹çš„å“ˆå·´ç‹—ï¼Œæˆ‘ä¼šç®—æ•´æ•°çš„å¹³æ–¹å“¦ï¼è€Œä¸”è·³ç€èˆæˆ–è€…ç¡ç€è§‰çš„æ—¶å€™æˆ‘ä¾ç„¶å¯ä»¥å‘¢ï¼

positional arguments:
  square       æ‚¨è¯´ä¸ªæ•°ï¼Œæˆ‘å°±èƒ½å‘Šè¯‰æ‚¨è¿™ä¸ªæ•°çš„å¹³æ–¹ï¼

optional arguments:
  -h, --help   show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -s, --sleep  è®©æˆ‘ç¡ä¼šå„¿ï¼Œå›°æ­»äº†ï¼
  -d, --dance  å¥½å¼€å¿ƒï¼Œè®©æˆ‘è·³ä¼šå„¿èˆï¼</code></pre></div>
<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ä½œè€…å¸Œæœ›æ‚¨é€šè¿‡ä¸å°å“ˆå·´ç‹—çš„ç©è€ï¼Œå¾ˆå¿«å­¦ä¼š <strong>argparse</strong> åº“çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿè¦åƒå®ƒä¸€æ ·å¿«ä¹æ‰å¥½ï¼(â—â€¿â—‘)</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
<li><a href="https://docs.python.org/3.7/howto/argparse.html" target="_blank">Argparse Tutorial</a></li>
<li><a href="http://blog.xiayf.cn/2013/03/30/argparse/" target="_blank">argparse - å‘½ä»¤è¡Œé€‰é¡¹ä¸å‚æ•°è§£æï¼ˆè¯‘ï¼‰</a></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>AZW3 æ ¼å¼ç”µå­ä¹¦è½¬æ¢ä¸º MOBI æ ¼å¼ä¿æŒåŸæœ‰æ’ç‰ˆæ ¼å¼</title>
			<link>https://www.smslit.top/2018/09/12/convert-ebook/</link>
			<pubDate>Wed, 12 Sep 2018 00:20:28 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/12/convert-ebook/</guid>
			<description>&lt;p&gt;å‰äº›å¤©å†™çš„æ–‡ç«  &lt;a href=&#34;https://www.smslit.top/2018/09/06/kindle-deDRM-to-mobi/&#34; target=&#34;_blank&#34;&gt;ã€Šè®©kindleç”µå­ä¹¦ä¸å—DRMç¦é”¢ã€‹&lt;/a&gt; ä¸­å°†kindleä¸­çš„azw3æ ¼å¼ç”µå­ä¹¦å»é™¤äº†DRMï¼Œå¹¶è½¬æ¢æ ¼å¼ä¸ºmobiæ ¼å¼ï¼Œè¿™æ ·å°±èƒ½å¯¼å…¥æˆ‘çš„ &lt;strong&gt;ireader plus&lt;/strong&gt; é˜…è¯»å™¨äº†ã€‚ä½†æ˜¯è¿™äº›å¤©å‘ç°ï¼Œç”¨calibreè½¬æ¢çš„ä¹¦ç±æŠŠåŸæœ‰æ’ç‰ˆæ ¼å¼æ”¹å˜äº†æŒºå¤šï¼Œæ‰€ä»¥ç½‘ä¸Šæœç´¢äº†è§£å†³æ–¹æ³•ï¼Œæ‰¾åˆ°æ–‡ç« ã€Šå°† AZW3 æ ¼å¼è½¬æ¢ä¸º MOBI æ ¼å¼å¹¶ä¿æŒåŸæœ‰æ’ç‰ˆæ ¼å¼ã€‹&lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:AZW3-MOBI-https&#34;&gt;&lt;a href=&#34;#fn:AZW3-MOBI-https&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;ï¼ŒæŒ‰ç…§æ–¹æ³•å°è¯•ï¼Œæœç„¶æœ€å¤§é™åº¦çš„ä¿ç•™äº†æ’ç‰ˆæ ¼å¼ï¼Œç°åˆ†äº«è¯¦ç»†æ“ä½œè¿‡ç¨‹ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å‰äº›å¤©å†™çš„æ–‡ç«  <a href="/2018/09/06/kindle-deDRM-to-mobi/" target="_blank">ã€Šè®©kindleç”µå­ä¹¦ä¸å—DRMç¦é”¢ã€‹</a> ä¸­å°†kindleä¸­çš„azw3æ ¼å¼ç”µå­ä¹¦å»é™¤äº†DRMï¼Œå¹¶è½¬æ¢æ ¼å¼ä¸ºmobiæ ¼å¼ï¼Œè¿™æ ·å°±èƒ½å¯¼å…¥æˆ‘çš„ <strong>ireader plus</strong> é˜…è¯»å™¨äº†ã€‚ä½†æ˜¯è¿™äº›å¤©å‘ç°ï¼Œç”¨calibreè½¬æ¢çš„ä¹¦ç±æŠŠåŸæœ‰æ’ç‰ˆæ ¼å¼æ”¹å˜äº†æŒºå¤šï¼Œæ‰€ä»¥ç½‘ä¸Šæœç´¢äº†è§£å†³æ–¹æ³•ï¼Œæ‰¾åˆ°æ–‡ç« ã€Šå°† AZW3 æ ¼å¼è½¬æ¢ä¸º MOBI æ ¼å¼å¹¶ä¿æŒåŸæœ‰æ’ç‰ˆæ ¼å¼ã€‹<sup class="footnote-ref" id="fnref:AZW3-MOBI-https"><a href="#fn:AZW3-MOBI-https">1</a></sup>ï¼ŒæŒ‰ç…§æ–¹æ³•å°è¯•ï¼Œæœç„¶æœ€å¤§é™åº¦çš„ä¿ç•™äº†æ’ç‰ˆæ ¼å¼ï¼Œç°åˆ†äº«è¯¦ç»†æ“ä½œè¿‡ç¨‹ï¼</p>

<p>æœ¬æ–‡çš„æ–¹æ³•è¿‡ç¨‹å¾ˆç®€å•ï¼š</p>

<ol>
<li>ä½¿ç”¨ä¸“é—¨çš„å·¥å…· <strong>KindleUnpack</strong> å¯¹ç”µå­ä¹¦æ–‡ä»¶è§£åŒ…ï¼›</li>
<li>ä½¿ç”¨ <strong>KindleGen</strong> å¯¹è§£åŒ…æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ç”Ÿæˆmobiç”µå­ä¹¦æ–‡ä»¶ï¼›</li>
</ol>

<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2>

<p>æ“ä½œä¹‹å‰ï¼Œéœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œã€‚æ“ä½œå¹³å°æ˜¯ macOS ç³»ç»Ÿï¼Œæ‰€ä»¥ä¸‹é¢çš„æ“ä½œæ˜¯é’ˆå¯¹ macOSçš„ã€‚</p>

<h3 id="azw3æ ¼å¼ç”µå­ä¹¦æ–‡ä»¶">azw3æ ¼å¼ç”µå­ä¹¦æ–‡ä»¶</h3>

<p>ç”µå­ä¹¦æ–‡ä»¶è·å–æ–¹å¼æœ‰å¤šç§ï¼Œå¯ä»¥åƒ <a href="/2018/09/06/kindle-deDRM-to-mobi/#è·å–ç”µå­ä¹¦" target="_blank">ã€Šè®©kindleç”µå­ä¹¦ä¸å—DRMç¦é”¢ã€‹- è·å–ç”µå­ä¹¦</a> ä¸­ä»kindleä¸­è·å–ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±æ’°å†™çš„ä¹¦ç±ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯åˆ«äººèµ äºˆçš„ã€‚</p>

<h3 id="è§£åŒ…å·¥å…·kindleunpack">è§£åŒ…å·¥å…·KindleUnpack</h3>

<p>KindleUnpack ï¼ˆåŸ mobiunpackï¼‰æ˜¯ä¸€æ¬¾ç”¨ Python å†™æˆçš„å°ç¨‹åºï¼Œå®ƒå¯ä»¥ç”¨æ¥æå– Kindle ç”µå­ä¹¦å¦‚ mobiã€azw3 ç­‰æ ¼å¼æ–‡ä»¶ä¸­çš„ HTML å†…å®¹ã€å›¾åƒä»¥åŠå…ƒæ•°æ®æ–‡ä»¶ï¼Œå¹¶èƒ½æŠŠè¿™äº›æ–‡ä»¶æŒ‰ç…§ KindleGen ç”Ÿæˆç”µå­ä¹¦çš„æ ‡å‡†å’Œå½¢å¼æ”¾ç½®<sup class="footnote-ref" id="fnref:KindleUnpack-Kin"><a href="#fn:KindleUnpack-Kin">2</a></sup>ã€‚æ”¯æŒè·¨å¹³å°ï¼Œæœ‰å››ç§ç‰ˆæœ¬ï¼š</p>

<ul>
<li>å¸¦ç•Œé¢çš„ pyw æ ¼å¼ Python è„šæœ¬ï¼š <a href="http://www.mobileread.com/forums/attachment.php?attachmentid=139470&amp;d=1434875606" target="_blank">KindleUnpack-080.zip</a></li>
<li>æ”¯æŒæ‹–æ”¾æ“ä½œçš„ AppleScript ç‰ˆæœ¬ï¼š<a href="http://www.mobileread.com/forums/attachment.php?attachmentid=139469&amp;d=1434875606" target="_blank">KindleUnpack v0.80.app.zip</a></li>
<li>ä»…æ”¯æŒ mobi æ–‡ä»¶çš„å•æ–‡ä»¶è„šæœ¬ï¼š<a href="http://www.mobileread.com/forums/attachment.php?attachmentid=89514&amp;d=1342902594" target="_blank">mobiunpack 32.py.zip</a></li>
<li>ä¾é™„äº Calibre è¿è¡Œçš„æ’ä»¶ç‰ˆæœ¬ï¼š<a href="http://www.mobileread.com/forums/attachment.php?attachmentid=141815&amp;d=1441654208" target="_blank">kindle_unpack_v0812_plugin.zip</a></li>
</ul>

<p>è¿™é‡Œä½¿ç”¨ <a href="http://www.mobileread.com/forums/attachment.php?attachmentid=139469&amp;d=1434875606" target="_blank"><strong>æ”¯æŒæ‹–æ”¾æ“ä½œçš„ AppleScript ç‰ˆæœ¬</strong></a>ï¼Œä¸‹è½½å®Œæˆåè§£å‹ä¼šå¾—åˆ°å¦‚ä¸‹çš„appï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180912153668507496280.png" alt="20180912153668507496280.png" /></p>

<h3 id="äºšé©¬é€Šå®˜æ–¹ç”µå­ä¹¦è½¬æ¢å·¥å…·kindlegen">äºšé©¬é€Šå®˜æ–¹ç”µå­ä¹¦è½¬æ¢å·¥å…·KindleGen</h3>

<p>KindleGen æ˜¯ä¸€æ¬¾å…è´¹çš„ç”µå­ä¹¦æ ¼å¼è½¬æ¢å·¥å…·ï¼Œéœ€è¦ä½¿ç”¨å‘½ä»¤è¡Œæ“ä½œï¼Œä¹Ÿæ˜¯äºšé©¬é€Šå”¯ä¸€å®˜æ–¹æ”¯æŒçš„æ–‡ä»¶è½¬æ¢å·¥å…·ï¼Œå®ƒå¯é€šè¿‡å®ƒæŠŠ HTMLã€XHTML æˆ– IDPF 2.0 æ ¼å¼ï¼ˆå¸¦æœ‰ XML.opf æè¿°æ–‡ä»¶çš„ HTML å†…å®¹æ–‡ä»¶ï¼‰çš„æºæ–‡ä»¶åˆ›å»ºä¸ºé€‚åˆ Kindle é˜…è¯»çš„ç”µå­ä¹¦æ ¼å¼<sup class="footnote-ref" id="fnref:KindleGen-https"><a href="#fn:KindleGen-https">3</a></sup>ã€‚</p>

<p>æ”¯æŒä¸‰å¤§å¹³å°ï¼Œä½†æœ‰äººåˆ¶ä½œäº†macOSä¸‹çš„å›¾å½¢ç•Œé¢çš„ç‰ˆæœ¬ï¼š<a href="http://pan.baidu.com/s/1qYu0V28" target="_blank">Mac OS X ç‰ˆï¼ˆv2.9 å¸¦ç•Œé¢ï¼‰</a>ï¼Œä¸‹è½½åè§£å‹å¾—åˆ°ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180912153668453011199.png" alt="20180912153668453011199.png" /></p>

<h2 id="ç”µå­ä¹¦è§£åŒ…">ç”µå­ä¹¦è§£åŒ…</h2>

<p>è§£åŒ…éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†azw3ç”µå­ä¹¦æ–‡ä»¶æ‹–æ‹½åˆ°ä¸Šé¢ä¸‹è½½çš„KindleUnpackä¸Šï¼Œå°±ä¼šè‡ªåŠ¨è§£åŒ…ï¼Œæœ€ç»ˆåœ¨ç”µå­ä¹¦æ–‡ä»¶åŒçº§ç›®å½•ä¸‹ç”Ÿæˆä»¥ç”µå­ä¹¦åç§°å‘½åçš„æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢ä¼šå¾—åˆ°å¦‚ä¸‹ç›®å½•å±‚çº§çš„å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">.
â”œâ”€â”€ HDImages
â”œâ”€â”€ mobi7
â”‚Â Â  â””â”€â”€ Images
â”‚Â Â      ...
â””â”€â”€ mobi8
    â”œâ”€â”€ Flask Web å¼€å‘å®æˆ˜.epub
    â”œâ”€â”€ META-INF
    â”‚Â Â  â””â”€â”€ container.xml
    â”œâ”€â”€ OEBPS
    â”‚Â Â  â”œâ”€â”€ Fonts
    â”‚Â Â  â”œâ”€â”€ Images
    â”‚Â Â  â”‚Â Â  â””â”€â”€ ...
    â”‚Â Â  â”œâ”€â”€ Styles
    â”‚Â Â  â”‚Â Â  â””â”€â”€ style0001.css
    â”‚Â Â  â”œâ”€â”€ Text
    â”‚Â Â  â”‚Â Â  â””â”€â”€ ...
    â”‚Â Â  â”œâ”€â”€ content.opf
    â”‚Â Â  â””â”€â”€ toc.ncx
    â””â”€â”€ mimetype</code></pre></div>
<h2 id="è½¬åŒ–ç”µå­ä¹¦">è½¬åŒ–ç”µå­ä¹¦</h2>

<p>æ‰“å¼€è§£å‹çš„åˆ°çš„KindleGençš„appï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180912153668574549309.png" alt="20180912153668574549309.png" /></p>

<p>çª—å£æç¤ºæ‹–æ‹½æ–‡ä»¶åˆ°çª—å£ä¸­è¿›è¡Œå¤„ç†ï¼Œå¾…æ‹–æ‹½çš„æ–‡ä»¶æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>

<ul>
<li><strong>mobi8</strong> ç›®å½•ä¸‹çš„ epub æ ¼å¼æ–‡ä»¶ï¼Œå¦‚ä¸Šé¢æ“ä½œçš„åˆ°çš„ <strong>Flask Web å¼€å‘å®æˆ˜.epub</strong>ï¼›</li>
<li><strong>mobi8/OEBPS</strong> ç›®å½•ä¸‹çš„ <strong>content.opf</strong> æ–‡ä»¶ï¼›</li>
</ul>

<p>æ‹–æ‹½ä¸Šé¢ä»»æ„ä¸€ä¸ªæ–‡ä»¶åˆ°çª—å£ä¸­ç­‰å¾…ä¸€æ®µæ—¶é—´åå‡èƒ½å¾—åˆ°è½¬æ¢åçš„mobiç”µå­ä¹¦æ–‡ä»¶ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180912153668598068955.png" alt="20180912153668598068955.png" /></p>

<p>ç”Ÿæˆçš„æ–‡ä»¶åœ¨æ‰€æ‹–æ‹½æ–‡ä»¶çš„åŒçº§ç›®å½•ä¸­ï¼Œæ¯”å¦‚æ‹–æ‹½çš„epubæ–‡ä»¶ï¼Œé‚£ä¹ˆmobiæ–‡ä»¶å°±åœ¨ç›®å½• <strong>mobi8</strong> ä¸­ï¼›å¦‚æœæ‹–æ‹½çš„ <strong>content.opf</strong>ï¼Œé‚£ä¹ˆ mobi æ–‡ä»¶å°±åœ¨ <strong>mobi8/OEBPS</strong> ä¸­ã€‚</p>

<p>è‡³æ­¤å·²ç»å®Œæˆç”µå­ä¹¦çš„è½¬æ¢ï¼Œå¯¼å…¥æˆ‘çš„ <strong>ireader plus</strong> ï¼Œæœç„¶å¥æ•ˆï¼Œ ^ ^ ï¼</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>å¦‚æœæ‚¨å’Œå°ç¼–æˆ‘ä¸€æ ·æ˜¯å¼ºè¿«ç—‡ï¼Œå¯¹æ ¼å¼ååˆ†çœ‹é‡ï¼Œé‚£ä¹ˆæœ¬æ–‡å¯¹æ‚¨åº”è¯¥æ˜¯æœ‰ç”¨çš„ã€‚æœ€åæ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œæœ‰ä»€ä¹ˆæƒ³æ³•è¦äº¤æµçš„è¯å¯ä»¥åœ¨ä¸‹é¢ç•™è¨€ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:AZW3-MOBI-https"><a href="https://bookfere.com/post/102.html" target="_blank">å°† AZW3 æ ¼å¼è½¬æ¢ä¸º MOBI æ ¼å¼å¹¶ä¿æŒåŸæœ‰æ’ç‰ˆæ ¼å¼</a> <a class="footnote-return" href="#fnref:AZW3-MOBI-https"><sup>[return]</sup></a></li>
<li id="fn:KindleUnpack-Kin"><a href="https://bookfere.com/tools#ku" target="_blank">KindleUnpack â€“ æ‹†è§£ Kindle ç”µå­ä¹¦æ–‡ä»¶çš„åˆ©å™¨</a> <a class="footnote-return" href="#fnref:KindleUnpack-Kin"><sup>[return]</sup></a></li>
<li id="fn:KindleGen-https"><a href="https://bookfere.com/tools#KindleGen" target="_blank">äºšé©¬é€Šå®˜æ–¹ç”µå­ä¹¦è½¬æ¢å·¥å…·KindleGen</a> <a class="footnote-return" href="#fnref:KindleGen-https"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>pythonå¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“</title>
			<link>https://www.smslit.top/2018/09/11/regex-python/</link>
			<pubDate>Tue, 11 Sep 2018 16:53:07 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/11/regex-python/</guid>
			<description>&lt;p&gt;pythonå¼€å‘ï¼Œç»å¸¸éœ€è¦ä»å­—ç¬¦ä¸²ä¸­æå–å…³é”®ä¿¡æ¯ï¼Œè¿™ä¸ªæå–è¿‡ç¨‹å¤šåŠä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å®ç°ï¼Œå¼€æœ¬æ–‡æ¥è®°å½•å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿æ—¥åç»­ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180911153665750929978.png&#34; alt=&#34;20180911153665750929978.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>pythonå¼€å‘ï¼Œç»å¸¸éœ€è¦ä»å­—ç¬¦ä¸²ä¸­æå–å…³é”®ä¿¡æ¯ï¼Œè¿™ä¸ªæå–è¿‡ç¨‹å¤šåŠä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å®ç°ï¼Œå¼€æœ¬æ–‡æ¥è®°å½•å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿æ—¥åç»­ç”¨ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180911153665750929978.png" alt="20180911153665750929978.png" /></p>

<table>
<thead>
<tr>
<th>ä¿¡æ¯</th>
<th align="center">è¡¨è¾¾å¼</th>
</tr>
</thead>

<tbody>
<tr>
<td>éè´Ÿæ•´æ•°</td>
<td align="center">^\d+$</td>
</tr>

<tr>
<td>æ­£æ•´æ•°</td>
<td align="center">^[0-9]*[1-9][0-9]*$</td>
</tr>

<tr>
<td>éæ­£æ•´æ•°</td>
<td align="center">^((-\d+)|(0+))$</td>
</tr>

<tr>
<td>è´Ÿæ•´æ•°</td>
<td align="center">^-[0-9]*[1-9][0-9]*$</td>
</tr>

<tr>
<td>æ•´æ•°</td>
<td align="center">^-?\d+$</td>
</tr>

<tr>
<td>éè´Ÿæµ®ç‚¹æ•°</td>
<td align="center">^\d+\.?\d+$</td>
</tr>

<tr>
<td>æ­£æµ®ç‚¹æ•°</td>
<td align="center">^((0-9)+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)$</td>
</tr>

<tr>
<td>éæ­£æµ®ç‚¹æ•°</td>
<td align="center">^((-\d+\.\d+)?)|(0+(\.0+)?))$</td>
</tr>

<tr>
<td>è´Ÿæµ®ç‚¹æ•°</td>
<td align="center">^(-((æ­£æµ®ç‚¹æ•°æ­£åˆ™å¼)))$</td>
</tr>

<tr>
<td>è‹±æ–‡å­—ç¬¦ä¸²</td>
<td align="center">^[A-Za-z]+$</td>
</tr>

<tr>
<td>è‹±æ–‡å¤§å†™ä¸²</td>
<td align="center">^[A-Z]+$</td>
</tr>

<tr>
<td>è‹±æ–‡å°å†™ä¸²</td>
<td align="center">^[a-z]+$</td>
</tr>

<tr>
<td>è‹±æ–‡å­—ç¬¦æ•°å­—ä¸²</td>
<td align="center">^[A-Za-z0-9]+$</td>
</tr>

<tr>
<td>è‹±æ•°å­—åŠ ä¸‹åˆ’çº¿ä¸²</td>
<td align="center">^\w+$</td>
</tr>

<tr>
<td>E-mailåœ°å€</td>
<td align="center">^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$</td>
</tr>

<tr>
<td>URL</td>
<td align="center">^[a-zA-Z]+://(\w+(-\w+)*)(\.(\w+(-\w+)*))*(\?\s*)?$</td>
</tr>

<tr>
<td>URL</td>
<td align="center">^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&amp;_~`@[\]\&lsquo;:+!]*([^&lt;&gt;\&ldquo;\&ldquo;])* $</td>
</tr>

<tr>
<td>é‚®æ”¿ç¼–ç </td>
<td align="center">^[1-9]\d{5}$</td>
</tr>

<tr>
<td>ä¸­æ–‡</td>
<td align="center">^[\u0391-\uFFE5]+$</td>
</tr>

<tr>
<td>ç”µè¯å·ç </td>
<td align="center">^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$</td>
</tr>

<tr>
<td>æ‰‹æœºå·ç </td>
<td align="center">^((\(\d{2,3}\))|(\d{3}\-))?13\d{9}$</td>
</tr>

<tr>
<td>åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)</td>
<td align="center">^\x00-\xff</td>
</tr>

<tr>
<td>åŒ¹é…é¦–å°¾ç©ºæ ¼</td>
<td align="center">(^\s*)|(\s*$)ï¼ˆåƒvbscripté‚£æ ·çš„trimå‡½æ•°ï¼‰</td>
</tr>

<tr>
<td>åŒ¹é…HTMLæ ‡è®°</td>
<td align="center">&lt;(.*)&gt;.*&lt;\/\1&gt;|&lt;(.*)\/&gt;</td>
</tr>

<tr>
<td>åŒ¹é…ç©ºè¡Œ</td>
<td align="center">\n[\s| ]*\r</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„ç½‘ç»œé“¾æ¥</td>
<td align="center">(h|H)(r|R)(e|E)(f|F)  *=  *(&rsquo;|&rdquo;)?(\w|\\|\/|\.)+(&rsquo;|&ldquo;|  *|&gt;)?</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„é‚®ä»¶åœ°å€</td>
<td align="center">\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„å›¾ç‰‡é“¾æ¥</td>
<td align="center">(s|S)(r|R)(c|C)  *=  *(&rsquo;|&rdquo;)?(\w|\\|\/|\.)+(&rsquo;|&ldquo;|  *|&gt;)?</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„IPåœ°å€</td>
<td align="center">(\d+)\.(\d+)\.(\d+)\.(\d+)</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„ä¸­å›½æ‰‹æœºå·ç </td>
<td align="center">(86)\*0\*13\d{9}</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„ä¸­å›½å›ºå®šç”µè¯å·ç </td>
<td align="center">(\(\d{3,4}\)|\d{3,4}-|\s)?\d{8}</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„ä¸­å›½ç”µè¯å·ç ï¼ˆåŒ…æ‹¬ç§»åŠ¨å’Œå›ºå®šç”µè¯ï¼‰</td>
<td align="center">(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„ä¸­å›½é‚®æ”¿ç¼–ç </td>
<td align="center">[1-9]{1}(\d+){5}</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„æµ®ç‚¹æ•°ï¼ˆå³å°æ•°ï¼‰</td>
<td align="center">(-?\d*)\.?\d+</td>
</tr>

<tr>
<td>æå–ä¿¡æ¯ä¸­çš„ä»»ä½•æ•°å­—</td>
<td align="center">(-?\d*)(\.\d+)?</td>
</tr>

<tr>
<td>IP</td>
<td align="center">(\d+)\.(\d+)\.(\d+)\.(\d+)</td>
</tr>

<tr>
<td>ç”µè¯åŒºå·</td>
<td align="center">/^0\d{2,3}$/</td>
</tr>

<tr>
<td>è…¾è®¯QQå·</td>
<td align="center">^[1-9]*[1-9][0-9]*$</td>
</tr>

<tr>
<td>å¸å·(å­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿)</td>
<td align="center">^[a-zA-Z][a-zA-Z0-9_]{4,15}$</td>
</tr>

<tr>
<td>ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŠä¸‹åˆ’çº¿</td>
<td align="center">^[\u4e00-\u9fa5_a-zA-Z0-9]+$</td>
</tr>

<tr>
<td>åŒ¹é…ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼</td>
<td align="center">[\u4e00-\u9fa5]</td>
</tr>

<tr>
<td>åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)</td>
<td align="center">[^\x00-\xff]</td>
</tr>

<tr>
<td>åŒ¹é…ç©ºè¡Œçš„æ­£åˆ™è¡¨è¾¾å¼</td>
<td align="center">\n[\s| ]*\r</td>
</tr>

<tr>
<td>åŒ¹é…HTMLæ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼</td>
<td align="center">/&lt;(.*)&gt;.*&lt;\/\1&gt;|&lt;(.*) \/&gt;/</td>
</tr>

<tr>
<td>sqlè¯­å¥</td>
<td align="center">^(select|drop|delete|create|update|insert).*$</td>
</tr>

<tr>
<td>åŒ¹é…é¦–å°¾ç©ºæ ¼çš„æ­£åˆ™è¡¨è¾¾å¼</td>
<td align="center">(^\s*)|(\s*$)</td>
</tr>

<tr>
<td>åŒ¹é…Emailåœ°å€çš„æ­£åˆ™è¡¨è¾¾å¼</td>
<td align="center">\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*</td>
</tr>
</tbody>
</table>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p><a href="http://thman.lofter.com/post/2311ca_100dff6" target="_blank">pythonï¼šå¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æ€»ç»“</a></p>]]></content>
		</item>
		
		<item>
			<title>Phantomjså¤±æ§ - Element is not currently visible</title>
			<link>https://www.smslit.top/2018/09/07/phantomjs-element-invisible/</link>
			<pubDate>Fri, 07 Sep 2018 16:50:29 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/07/phantomjs-element-invisible/</guid>
			<description>&lt;p&gt;ä»Šå¤©å†™ä¸€ä¸ªçˆ¬è™«ï¼Œä½¿ç”¨ &lt;a href=&#34;https://www.seleniumhq.org&#34; target=&#34;_blank&#34;&gt;&lt;strong&gt;selenium&lt;/strong&gt;&lt;/a&gt;(å¯ä»¥æ“çºµæµè§ˆå™¨çš„pythonåº“)æ“æ§phantomjså‡ºäº†é—®é¢˜ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Element is not currently visible and may not be manipulated exception&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è·å–çš„å…ƒç´ ä¸å¯è§æ˜¯ä»€ä¹ˆé¬¼ï¼Œæ“æ§å…¶å®ƒæµè§ˆå™¨å´æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶äº†ä¸€ä¸‹ï¼Œç°åˆ†äº«è§£å†³æ–¹æ³•ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©å†™ä¸€ä¸ªçˆ¬è™«ï¼Œä½¿ç”¨ <a href="https://www.seleniumhq.org" target="_blank"><strong>selenium</strong></a>(å¯ä»¥æ“çºµæµè§ˆå™¨çš„pythonåº“)æ“æ§phantomjså‡ºäº†é—®é¢˜ï¼š</p>

<blockquote>
<p>Element is not currently visible and may not be manipulated exception</p>
</blockquote>

<p>è·å–çš„å…ƒç´ ä¸å¯è§æ˜¯ä»€ä¹ˆé¬¼ï¼Œæ“æ§å…¶å®ƒæµè§ˆå™¨å´æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œç ”ç©¶äº†ä¸€ä¸‹ï¼Œç°åˆ†äº«è§£å†³æ–¹æ³•ã€‚</p>

<h2 id="é—®é¢˜ç°è±¡">é—®é¢˜ç°è±¡</h2>

<p>è·å–ä¸€ä¸ªå¼¹çª—ä¸Šçš„èŠ‚ç‚¹ï¼Œæ“ä½œèŠ‚ç‚¹æ—¶å‡ºäº†é—®é¢˜ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="n">checkallbtn</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element_by_css_selector</span><span class="p">(</span><span class="s1">&#39;input[title=&#34;å…¨éƒ¨&#34;]&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">checkallbtn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
<span class="o">---------------------------------------------------------------------------</span>
<span class="n">ElementNotVisibleException</span>                <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">8</span><span class="n">ff787fdd7d7</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
<span class="o">----&gt;</span> <span class="mi">1</span> <span class="n">checkallbtn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>

<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">selenium</span><span class="o">/</span><span class="n">webdriver</span><span class="o">/</span><span class="n">remote</span><span class="o">/</span><span class="n">webelement</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">click</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
     <span class="mi">78</span>     <span class="k">def</span> <span class="nf">click</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
     <span class="mi">79</span>         <span class="s2">&#34;&#34;&#34;Clicks the element.&#34;&#34;&#34;</span>
<span class="o">---&gt;</span> <span class="mi">80</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_execute</span><span class="p">(</span><span class="n">Command</span><span class="o">.</span><span class="n">CLICK_ELEMENT</span><span class="p">)</span>
     <span class="mi">81</span>
     <span class="mi">82</span>     <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="o">...</span>

<span class="n">ElementNotVisibleException</span><span class="p">:</span> <span class="n">Message</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;errorMessage&#34;</span><span class="p">:</span><span class="s2">&#34;Element is not currently visible and may not be manipulated&#34;</span><span class="p">,</span><span class="s2">&#34;request&#34;</span><span class="p">:{</span><span class="s2">&#34;headers&#34;</span><span class="p">:{</span><span class="s2">&#34;Accept&#34;</span><span class="p">:</span><span class="s2">&#34;application/json&#34;</span><span class="p">,</span><span class="s2">&#34;Accept-Encoding&#34;</span><span class="p">:</span><span class="s2">&#34;identity&#34;</span><span class="p">,</span><span class="s2">&#34;Content-Length&#34;</span><span class="p">:</span><span class="s2">&#34;81&#34;</span><span class="p">,</span><span class="s2">&#34;Content-Type&#34;</span><span class="p">:</span><span class="s2">&#34;application/json;charset=UTF-8&#34;</span><span class="p">,</span><span class="s2">&#34;Host&#34;</span><span class="p">:</span><span class="s2">&#34;127.0.0.1:51891&#34;</span><span class="p">,</span><span class="s2">&#34;User-Agent&#34;</span><span class="p">:</span><span class="s2">&#34;selenium/3.14.0 (python mac)&#34;</span><span class="p">},</span><span class="s2">&#34;httpVersion&#34;</span><span class="p">:</span><span class="s2">&#34;1.1&#34;</span><span class="p">,</span><span class="s2">&#34;method&#34;</span><span class="p">:</span><span class="s2">&#34;POST&#34;</span><span class="p">,</span><span class="s2">&#34;post&#34;</span><span class="p">:</span><span class="s2">&#34;{</span><span class="se">\&#34;</span><span class="s2">id</span><span class="se">\&#34;</span><span class="s2">: </span><span class="se">\&#34;</span><span class="s2">:wdc:1536311901172</span><span class="se">\&#34;</span><span class="s2">, </span><span class="se">\&#34;</span><span class="s2">sessionId</span><span class="se">\&#34;</span><span class="s2">: </span><span class="se">\&#34;</span><span class="s2">ddbffb50-b27e-11e8-b0df-c57be7bc1c52</span><span class="se">\&#34;</span><span class="s2">}&#34;</span><span class="p">,</span><span class="s2">&#34;url&#34;</span><span class="p">:</span><span class="s2">&#34;/click&#34;</span><span class="p">,</span><span class="s2">&#34;urlParsed&#34;</span><span class="p">:{</span><span class="s2">&#34;anchor&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;query&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;file&#34;</span><span class="p">:</span><span class="s2">&#34;click&#34;</span><span class="p">,</span><span class="s2">&#34;directory&#34;</span><span class="p">:</span><span class="s2">&#34;/&#34;</span><span class="p">,</span><span class="s2">&#34;path&#34;</span><span class="p">:</span><span class="s2">&#34;/click&#34;</span><span class="p">,</span><span class="s2">&#34;relative&#34;</span><span class="p">:</span><span class="s2">&#34;/click&#34;</span><span class="p">,</span><span class="s2">&#34;port&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;host&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;password&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;user&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;userInfo&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;authority&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;protocol&#34;</span><span class="p">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;source&#34;</span><span class="p">:</span><span class="s2">&#34;/click&#34;</span><span class="p">,</span><span class="s2">&#34;queryKey&#34;</span><span class="p">:{},</span><span class="s2">&#34;chunks&#34;</span><span class="p">:[</span><span class="s2">&#34;click&#34;</span><span class="p">]},</span><span class="s2">&#34;urlOriginal&#34;</span><span class="p">:</span><span class="s2">&#34;/session/ddbffb50-b27e-11e8-b0df-c57be7bc1c52/element/:wdc:1536311901172/click&#34;</span><span class="p">}}</span>
<span class="n">Screenshot</span><span class="p">:</span> <span class="n">available</span> <span class="n">via</span> <span class="n">screen</span></code></pre></div>
<h2 id="æ’æŸ¥é—®é¢˜">æ’æŸ¥é—®é¢˜</h2>

<p>è¿™éƒ¨åˆ†ä¸»è¦æè¿°é—®é¢˜æ’æŸ¥è¿‡ç¨‹ï¼Œä¸æ„Ÿå…´è¶£å¯ä»¥<a href="#è§£å†³æ–¹æ³•" target="_blank">ç‚¹æˆ‘</a>è·³è¿‡ã€‚</p>

<ol>
<li><p>é¦–å…ˆç¡®è®¤äº†ä¸€ä¸‹ï¼Œè·å–å…ƒç´ ä½¿ç”¨çš„ <strong>CSSé€‰æ‹©å™¨</strong> æ²¡æœ‰é—®é¢˜ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">checkallbtn</span> <span class="o">=</span> <span class="n">browser</span><span class="o">.</span><span class="n">find_element_by_css_selector</span><span class="p">(</span><span class="s1">&#39;#cityDiv #winCanton li label input[title=&#34;å…¨éƒ¨&#34;]&#39;</span><span class="p">)</span></code></pre></div></li>

<li><p>å†ç”¨phantomjsæˆªä¸ªå›¾çœ‹çœ‹æ­¤æ—¶æ¸²æŸ“çŠ¶æ€ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180907153631208080986.jpg" alt="20180907153631208080986.jpg" /></p>

<p>è·å–çš„å…ƒç´ å°±æ˜¯å›¾ç‰‡ä¸­å¤®å¼¹çª—ä¸Šçš„å…ƒç´ ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°å›¾ä¸­æœ€ä¸Šé¢æœ‰ä¸ªé˜´å½±åŒºï¼Œ<strong>Element is not currently visible</strong> æ„æ€ä¼šä¸ä¼šæ˜¯å¼¹çª—åœ¨å¯è§èŒƒå›´ä»¥å¤–ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¸ªé˜´å½±åŒºåº”è¯¥ä»£è¡¨çª—å£ï¼Œä¸ºä»€ä¹ˆåœ¨chromeä¸­è®¿é—®çš„æ—¶å€™ï¼Œå¼¹çª—å°±èƒ½æ­£ç¡®æ˜¾ç¤ºåˆ°chromeçª—å£ä¸­å¤®çš„ï¼Œå¥½å¥‡æ€ªï¼</p></li>

<li><p>æœç´¢è¿™ä¸ªé—®é¢˜ï¼Œæ‰¾åˆ°äº†é“¾æ¥<a href="https://github.com/ariya/phantomjs/issues/11637" target="_blank">Element is not currently visible and may not be manipulated exception</a>ï¼Œçœ‹æ¥å¾ˆå¤šäººé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œçœ‹åˆ°æœ‰ä¸ªäººè¯´ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180907153631255285279.png" alt="20180907153631255285279.png" /></p>

<p>çœ‹æ¥æ˜¯seleniumæ“æ§çš„æµè§ˆå™¨çª—å£å¤§å°çš„é—®é¢˜ã€‚</p></li>

<li><p>æŸ¥çœ‹ä¸€ä¸‹æ­¤æ—¶æµè§ˆå™¨çš„çª—å£å¤§å°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">browser</span><span class="o">.</span><span class="n">get_window_size</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="p">{</span><span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">}</span></code></pre></div>
<p>çª—å£å¥½å°ï¼Œçœ‹æ¥æ˜¯è¿™ä¸ªé—®é¢˜ã€‚</p></li>
</ol>

<h2 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h2>

<p>æ ¹æ®ä¸Šé¢é—®é¢˜æ’æŸ¥åŸºæœ¬æ‰¾åˆ°åŸå› ï¼Œæ˜¯è¢«æ“æ§æµè§ˆå™¨çª—å£å¤§å°ä¸åˆé€‚å¯¼è‡´å¼¹çª—æ˜¾ç¤ºåœ¨å¯è§†åŒºå¤–ï¼Œè§£å†³åŠæ³•æ˜¾è€Œæ˜“è§ï¼Œæ›´æ”¹ä¸€ä¸ªåˆé€‚çš„çª—å£å¤§å°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">browser</span><span class="o">.</span><span class="n">set_window_size</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
<span class="n">In</span> <span class="p">[</span><span class="mi">12</span><span class="p">]:</span> <span class="n">checkallbtn</span><span class="o">.</span><span class="n">click</span><span class="p">()</span></code></pre></div>
<p>åˆå®¶æ¬¢ä¹ï¼Œæ²¡æœ‰å‡ºç°é—®é¢˜ (^_^)vã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p><a href="https://github.com/ariya/phantomjs/issues/11637" target="_blank">Element is not currently visible and may not be manipulated exception</a></p>]]></content>
		</item>
		
		<item>
			<title>è®©kindleç”µå­ä¹¦ä¸å—DRMç¦é”¢</title>
			<link>https://www.smslit.top/2018/09/06/kindle-deDRM-to-mobi/</link>
			<pubDate>Thu, 06 Sep 2018 12:04:02 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/06/kindle-deDRM-to-mobi/</guid>
			<description>&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153620800099678.png&#34; alt=&#34;20180906153620800099678.png&#34; /&gt;&lt;/p&gt;

&lt;p&gt;æ˜¨å¤©åœ¨äºšé©¬é€Šè´­ä¹°äº†å…³æ³¨å¾ˆä¹…çš„æ–°ä¹¦ï¼Œç”µå­ç‰ˆçš„ï¼Œä¸´æ—¶ä½¿ç”¨æ°´æœ¨çš„ &lt;strong&gt;kindle voyage&lt;/strong&gt; è¿›è¡Œé˜…è¯»ï¼Œå±å¹•ç•¥å°å‘€ï¼Œæˆ‘æœ‰ä¸€ä¸ª &lt;strong&gt;ireader&lt;/strong&gt; ç”µçº¸ä¹¦é˜…è¯»å™¨ï¼Œå±å¹•æ˜¯6.8å¯¸çš„ï¼Œæ¯”kindleå¤§ä¸€æ•´åœˆï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸ç”¨å®ƒæ¥é˜…è¯»å‘¢ï¼ˆireaderå¹³å°æ²¡æœ‰ä¸Šè¿™æœ¬æ–°ä¹¦ï¼‰ï¼é—®é¢˜æ¥äº†ï¼Œkindleä¸­çš„ç”µå­ä¹¦å— &lt;a href=&#34;https://en.wikipedia.org/wiki/Digital_rights_management&#34; target=&#34;_blank&#34;&gt;&lt;strong&gt;DRM&lt;/strong&gt;&lt;/a&gt; ä¿æŠ¤ï¼Œå¯¼å‡ºçš„ç”µå­ä¹¦æ–‡ä»¶ä¸èƒ½ç”¨å…¶å®ƒé˜…è¯»å™¨ä¸­æ‰“å¼€ï¼Œç»è¿‡æ¢ç´¢ï¼Œæ‰¾åˆ°äº†å»é™¤ &lt;strong&gt;DRM&lt;/strong&gt; å¹¶è½¬æ¢å¯¼å‡º&lt;a href=&#34;https://en.wikipedia.org/wiki/EPUB&#34; target=&#34;_blank&#34;&gt;epub&lt;/a&gt; æˆ– &lt;a href=&#34;https://en.wikipedia.org/wiki/Mobi&#34; target=&#34;_blank&#34;&gt;mobi&lt;/a&gt; ç”µå­ä¹¦çš„æ–¹æ³•ï¼Œæœ¬æ–‡åˆ†äº«ä¸€ä¸‹è¿™ä¸€æˆæœï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153620800099678.png" alt="20180906153620800099678.png" /></p>

<p>æ˜¨å¤©åœ¨äºšé©¬é€Šè´­ä¹°äº†å…³æ³¨å¾ˆä¹…çš„æ–°ä¹¦ï¼Œç”µå­ç‰ˆçš„ï¼Œä¸´æ—¶ä½¿ç”¨æ°´æœ¨çš„ <strong>kindle voyage</strong> è¿›è¡Œé˜…è¯»ï¼Œå±å¹•ç•¥å°å‘€ï¼Œæˆ‘æœ‰ä¸€ä¸ª <strong>ireader</strong> ç”µçº¸ä¹¦é˜…è¯»å™¨ï¼Œå±å¹•æ˜¯6.8å¯¸çš„ï¼Œæ¯”kindleå¤§ä¸€æ•´åœˆï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸ç”¨å®ƒæ¥é˜…è¯»å‘¢ï¼ˆireaderå¹³å°æ²¡æœ‰ä¸Šè¿™æœ¬æ–°ä¹¦ï¼‰ï¼é—®é¢˜æ¥äº†ï¼Œkindleä¸­çš„ç”µå­ä¹¦å— <a href="https://en.wikipedia.org/wiki/Digital_rights_management" target="_blank"><strong>DRM</strong></a> ä¿æŠ¤ï¼Œå¯¼å‡ºçš„ç”µå­ä¹¦æ–‡ä»¶ä¸èƒ½ç”¨å…¶å®ƒé˜…è¯»å™¨ä¸­æ‰“å¼€ï¼Œç»è¿‡æ¢ç´¢ï¼Œæ‰¾åˆ°äº†å»é™¤ <strong>DRM</strong> å¹¶è½¬æ¢å¯¼å‡º<a href="https://en.wikipedia.org/wiki/EPUB" target="_blank">epub</a> æˆ– <a href="https://en.wikipedia.org/wiki/Mobi" target="_blank">mobi</a> ç”µå­ä¹¦çš„æ–¹æ³•ï¼Œæœ¬æ–‡åˆ†äº«ä¸€ä¸‹è¿™ä¸€æˆæœï¼</p>

<p>æœ¬æ–‡æ“ä½œæ˜¯åœ¨macä¸‹å®Œæˆçš„ï¼Œwindowsä¸‹çš„æ“ä½œå¯ä»¥ç±»æ¯”ï¼Œåªæœ‰ä¸€äº›æ–‡ä»¶è·¯å¾„ä¸å¤ªä¸€æ ·ï¼Œæ“ä½œæ­¥éª¤è¿˜æ˜¯åŸºæœ¬ä¸€è‡´çš„ï¼</p>

<h2 id="è·å–ç”µå­ä¹¦">è·å–ç”µå­ä¹¦</h2>

<p>è¿™é‡Œè®²è§£ä¸¤ç§æ–¹æ³•è·å–ç”µå­ä¹¦æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸€èˆ¬ä¸º <strong>awz</strong> ã€<strong>awz3</strong> æ ¼å¼ï¼Œå…¶å®å¯ä»¥ç›´æ¥USBè¿æ¥kindleç”µçº¸ä¹¦è·å–ï¼Œä½†æ˜¯æœ€æ–°çš„ç”µçº¸ä¹¦æ”¹æˆäº† <strong>kfz</strong> æ ¼å¼ï¼Œå¯èƒ½è¿™ä¸ªæ–‡ä»¶å¹¶ä¸æ˜¯å®Œæ•´çš„ç”µå­ä¹¦æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œä¸æ¨èé€šè¿‡kindleè®¾å¤‡å¯¼å‡ºã€‚æ¨èä½¿ç”¨çš„ä¸¤ç§æ–¹æ³•ï¼š</p>

<ul>
<li>é€šè¿‡kindleç”µè„‘å®¢æˆ·ç«¯è·å–ç”µå­ä¹¦æ–‡ä»¶ï¼›</li>
<li>å»äºšé©¬é€Šç½‘ç«™ä¸‹è½½ç”µå­ä¹¦æ–‡ä»¶ï¼›</li>
</ul>

<p>å½“ç„¶ä¸Šè¿°å®ç°æ˜¯å»ºç«‹åœ¨æ‚¨å·²ç»è´­ä¹°æ­¤ç”µå­ä¹¦çš„åŸºç¡€ä¸Šçš„ã€‚</p>

<h3 id="ç”µè„‘å®¢æˆ·ç«¯è·å–">ç”µè„‘å®¢æˆ·ç«¯è·å–</h3>

<h4 id="å®‰è£…å®¢æˆ·ç«¯">å®‰è£…å®¢æˆ·ç«¯</h4>

<ol>
<li><p>è®¿é—® <a href="https://www.amazon.com/kindle-dbs/fd/kcp" target="_blank">https://www.amazon.com/kindle-dbs/fd/kcp</a> ä¸‹è½½å®¢æˆ·ç«¯ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622073189036.jpg" alt="20180906153622073189036.jpg" /></p></li>

<li><p>macçš„è¯ä¼šå¾—åˆ°ä¸€ä¸ªdmgæ–‡ä»¶ï¼Œæ‰“å¼€åå°† <strong>kindle.app</strong> æ‹–å…¥ <strong>applications</strong> æ–‡ä»¶å¤¹å³å¯å®Œæˆå®‰è£…</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622083965152.png" alt="20180906153622083965152.png" /></p></li>

<li><p>å¯åŠ¨ <strong>Kindle.app</strong> ï¼Œç™»å½•è‡ªå·±çš„äºšé©¬é€Šè´¦å·ï¼Œå°±å¯ä»¥çœ‹åˆ°è‡ªå·±å·²è´­ä¹¦å•ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622106031221.png" alt="20180906153622106031221.png" /></p></li>

<li><p>åœ¨å¾…å¯¼å‡ºç”µå­ä¹¦çš„å°é¢ä¸Šå³é”®å•å‡»ï¼Œå¯ä»¥çœ‹åˆ° <code>ä¸‹è½½</code>ï¼Œå•å‡»å³å¯ä¸‹è½½åˆ°æœ¬åœ°ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018090615362212568184.png" alt="2018090615362212568184.png" /></p></li>

<li><p>å¯åŠ¨ç»ˆç«¯ï¼ˆmacä¸‹çš„å‘½ä»¤è¡Œå·¥å…·ï¼‰ï¼Œè¾“å…¥å‘½ä»¤</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">open ~/Library/Application<span class="se">\ </span>Support/Kindle/My<span class="se">\ </span>Kindle<span class="se">\ </span>Content/ </code></pre></div>
<p>æ­¤æ—¶ä¼šæ‰“å¼€ä¸€ä¸ªfinderçª—å£ï¼Œä½ ä¼šæ‰¾åˆ°åˆšä¸‹è½½ç”µå­ä¹¦å¯¹åº”çš„ <strong>awz</strong> æ–‡ä»¶ï¼Œå°†å…¶æ‹·è´åˆ°æ¡Œé¢å¤‡ç”¨ã€‚</p></li>
</ol>

<h3 id="äºšé©¬é€Šç½‘ç«™è·å–">äºšé©¬é€Šç½‘ç«™è·å–</h3>

<ol>
<li><p>è®¿é—®ç½‘å€ <a href="https://www.amazon.cn/hz/mycd/myx#/home/content/booksAll/dateDsc/" target="_blank">https://www.amazon.cn/hz/mycd/myx#/home/content/booksAll/dateDsc/</a>ï¼Œç™»å½•è‡ªå·±çš„äºšé©¬é€Šè´¦æˆ·ï¼Œå°±èƒ½çœ‹åˆ°è‡ªå·±è´­ä¹°çš„ä¹¦å•ï¼Œç±»ä¼¼ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153621988176856.png" alt="20180906153621988176856.png" /></p></li>

<li><p>å¯ä»¥çœ‹åˆ°æ¯ä¸€é¡¹çš„ <code>æ“ä½œ</code> åˆ—ä¸­åŒ…å«ä¸€ä¸ªä¸‰ä¸ªå°ç‚¹çš„æŒ‰é’®ï¼Œç‚¹å‡»å¾…å¯¼å‡ºç”µå­ä¹¦çš„è¿™ä¸ªæŒ‰é’®ï¼Œèƒ½çœ‹åˆ°ä¸€äº›æ“ä½œé¡¹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622005546113.png" alt="20180906153622005546113.png" /></p></li>

<li><p>ç‚¹å‡» <code>é€šè¿‡ç”µè„‘ä¸‹è½½USBä¼ è¾“</code>ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªè·³çª—ï¼Œé€‰æ‹©å¯¹åº”çš„kindleè®¾å¤‡ï¼Œç‚¹å‡» <code>ä¸‹è½½</code> å°±å¯ä»¥ä¸‹è½½åˆ°ç”µå­ä¹¦æ–‡ä»¶äº†</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622023195517.png" alt="20180906153622023195517.png" /></p>

<p>ç†è®ºä¸Šä¸‹è½½çš„æ–‡ä»¶åº”è¯¥æ˜¯ä¸€ä¸ª <strong>awz3</strong> æ–‡ä»¶ï¼Œå°†å…¶æ‹·è´åˆ°æ¡Œé¢å¤‡ç”¨ã€‚</p></li>
</ol>

<h2 id="å®‰è£…calibreå’Œdedrmæ’ä»¶">å®‰è£…Calibreå’ŒDeDRMæ’ä»¶</h2>

<h3 id="å®‰è£…-calibre">å®‰è£… <strong>Calibre</strong></h3>

<ol>
<li><p>è®¿é—® <a href="https://calibre-ebook.com/download" target="_blank">https://calibre-ebook.com/download</a> ä¸‹è½½ Calibreï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622219216546.png" alt="20180906153622219216546.png" /></p></li>

<li><p>macä¸‹è½½å¾—åˆ°ä¸€ä¸ªdmgæ–‡ä»¶ï¼Œå¦‚ <strong>calibre-3.30.0.dmg</strong>ï¼Œæ‰“å¼€åï¼Œå°† <strong>Calibre.app</strong> æ‹–å…¥ <strong>Applications</strong> å³å¯å®Œæˆå®‰è£…</p></li>

<li><p>åˆæ¬¡å¯åŠ¨ Calibre ä¼šå‡ºç°é…ç½®çª—å£ï¼Œç›¸ä¿¡æ‚¨èƒ½è‡ªå·±æå®šï¼Œå®Œæˆåå°±ä¼šçœ‹åˆ°ä¸»çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622239713512.png" alt="20180906153622239713512.png" /></p></li>
</ol>

<h3 id="å®‰è£…-dedrm-æ’ä»¶">å®‰è£… <strong>DeDRM</strong> æ’ä»¶</h3>

<ol>
<li><p>è®¿é—®<a href="https://github.com/apprenticeharper/DeDRM_tools/releases" target="_blank">apprenticeharper/DeDRM_tools</a>ä¸‹è½½æœ€æ–°æ’ä»¶ï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯ <strong>DeDRM_tools_6.6.1.zip</strong></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622271157232.png" alt="20180906153622271157232.png" /></p></li>

<li><p>è§£å‹ä¸‹è½½çš„æ’ä»¶åˆ°æ¡Œé¢å¤‡ç”¨ï¼›</p></li>

<li><p>å¯åŠ¨ Calibreï¼Œä¾æ¬¡æ‰¾åˆ° <strong>èœå•æ </strong> - <strong>åå¥½é€‰é¡¹</strong> - <strong>è°ƒæ•´calibreæ“ä½œæ–¹å¼</strong>ï¼Œå¾—åˆ°çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622255682731.png" alt="20180906153622255682731.png" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622303928379.png" alt="20180906153622303928379.png" /></p></li>

<li><p>ç‚¹å‡»çª—å£å·¦ä¸‹è§’çš„ <strong>æ’ä»¶</strong> ï¼Œä¼šå¯åŠ¨æ’ä»¶ç®¡ç†çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622314086532.png" alt="20180906153622314086532.png" /></p></li>

<li><p>ç‚¹å‡»å³ä¸‹è§’çš„ <strong>ä»æ–‡ä»¶åŠ è½½æ’ä»¶</strong>ï¼ŒæŒ‰ç…§ä¸‹å›¾ä»ä¸Šé¢è§£å‹åˆ°æ¡Œé¢çš„æ’ä»¶æ‰¾åˆ°æ’ä»¶é€‰æ‹©ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622340325039.png" alt="20180906153622340325039.png" /></p></li>

<li><p>æ­¤æ—¶ä¼šæç¤ºæœ‰é£é™©é—®æ˜¯å¦ç»§ç»­å®‰è£…ï¼Œé€‰æ‹© <strong>æ˜¯</strong> å³å¯</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622381263863.png" alt="20180906153622381263863.png" /></p>

<p>ç„¶åä¼šæé†’éœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆï¼Œç‚¹å‡» <strong>ç¡®å®š</strong></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622381873868.png" alt="20180906153622381873868.png" /></p>

<p>å¯ä»¥çœ‹åˆ°æ’ä»¶å·²ç»å®‰è£…æˆåŠŸï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622383489537.png" alt="20180906153622383489537.png" /></p>

<p>ç‚¹å‡»å·¦ä¸‹è§’çš„ <strong>åº”ç”¨</strong>ã€‚</p></li>

<li><p>åŒå‡»ä¸Šå›¾ä¸­åˆšå®‰è£…çš„æ’ä»¶ï¼Œä¼šè·³å‡ºé…ç½®çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622469077974.png" alt="20180906153622469077974.png" /></p></li>

<li><p>å•å‡»ç¬¬ä¸€ä¸ª <strong>eInk kindle books</strong>ï¼Œä¼šè·³å‡ºkindleè®¾å¤‡ä¸²å·çš„ç®¡ç†çª—å£ï¼Œç‚¹å‡» <code>+</code> æŒ‰é’®ï¼Œæ·»åŠ æ‚¨kindleè®¾å¤‡çš„ä¸²å·ï¼Œä¸€è·¯ç¡®å®šå³å¯é…ç½®å®Œæˆï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622497256903.png" alt="20180906153622497256903.png" /></p>

<p><strong>æ³¨ï¼š</strong> <a href="https://bookfere.com/post/200.html" target="_blank">ç‚¹æˆ‘</a> äº†è§£å¦‚ä½•å¾—åˆ°kindleè®¾å¤‡ä¸²å·ã€‚</p></li>
</ol>

<h2 id="è½¬æ¢ç”µå­ä¹¦">è½¬æ¢ç”µå­ä¹¦</h2>

<p>æœ‰äº†ä¸Šé¢çš„å‡†å¤‡å·¥ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥å¤„ç†ç”µå­ä¹¦æ–‡ä»¶äº†ã€‚</p>

<h3 id="dedrm">DeDRM</h3>

<p>å¯åŠ¨ <strong>Calibre</strong>ï¼Œæ‹–åŠ¨æ¡Œé¢ä¸Šçš„ç”µå­ä¹¦æ–‡ä»¶åˆ° <strong>Calibre</strong> ä¸»çª—å£ä¸­ï¼Œä¸»çª—å£ä¸­å°±ä¼šå‡ºç°è¿™æœ¬ä¹¦ï¼ŒåŒå‡»å®ƒï¼Œå¦‚æœèƒ½é˜…è¯»ï¼Œè¯´æ˜å·²å®ŒæˆDeDRMï¼Œä¸‹é¢å°±å¯ä»¥è½¬æ¢æ ¼å¼äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018090615362252841670.png" alt="2018090615362252841670.png" /></p>

<h3 id="è½¬æ¢ç”µå­ä¹¦-1">è½¬æ¢ç”µå­ä¹¦</h3>

<p>æˆ‘çš„ireaderé˜…è¯»å™¨å¯è¯†åˆ«mobiæˆ–è€…epubï¼Œè¿™é‡Œä»¥å°†ç”µå­ä¹¦å¯¼å‡ºä¸ºmobiä¸ºä¾‹ã€‚</p>

<ol>
<li><p>é€‰ä¸­ä¸»çª—å£çš„ç”µå­ä¹¦ï¼Œå•å‡»å·¥å…·æ ä¸­çš„ç¬¬äºŒä¸ªæŒ‰é’® <strong>è½¬æ¢ä¹¦ç±</strong>ï¼Œä¼šå¾—åˆ°é…ç½®çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622552212554.png" alt="20180906153622552212554.png" /></p></li>

<li><p>ä½¿ç”¨é»˜è®¤é…ç½®å°±okï¼Œå½“ç„¶æ‚¨ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹ï¼Œç„¶åç‚¹å‡»å³ä¸‹è§’çš„ <strong>ç¡®å®š</strong> æŒ‰é’®å³å¯å¯åŠ¨è½¬æ¢ä»»åŠ¡ï¼Œå®Œæˆè½¬æ¢å Calibre ä¼šæé†’å®Œæˆï¼›</p></li>

<li><p>å®Œæˆåï¼Œå³å‡»ä¸»çª—å£çš„ç”µå­ä¹¦æ¡ç›®ï¼Œå¯ä»¥çœ‹åˆ°æ“ä½œèœå•ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180906153622564761740.png" alt="20180906153622564761740.png" /></p></li>

<li><p>é€‰æ‹© <strong>æ‰“å¼€æ‰€åœ¨ç›®å½•</strong> å°±ä¼šæ‰“å¼€ä¸€ä¸ªfinderçª—å£ï¼Œè½¬æ¢å®Œæˆçš„mobiçš„å°±åœ¨é‡Œé¢äº†ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥å¯¼å…¥åˆ°æˆ‘çš„ireaderä¸­é˜…è¯»å•¦ï¼ŒÂ·çš†å¤§æ¬¢å–œï¼</p></li>
</ol>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p><a href="https://www.epubor.com/3-ways-to-remove-drm-from-kindle-books.html" target="_blank">3 Ways to Remove DRM from Kindle Books</a></p>

<h2 id="æé†’">æé†’</h2>

<p>æœ¬æ–‡æ“ä½œåªæ˜¯ä¸ºäº†è‡ªå·±æ–¹ä¾¿ï¼Œç”µå­ä¹¦æ¯•ç«Ÿè‡ªå·±è´­ä¹°äº†ï¼Œæƒ³æ‹¥æœ‰æ›´å¤šæŒæ§æƒæ²¡ä»€ä¹ˆé”™ï¼Œä½†æ˜¯ä¸ºäº†å°Šé‡ä½œè€…çš„åŠ³åŠ¨æˆæœè¿˜æ˜¯æé†’å¤§å®¶è½¬æ¢äº†è‡ªå·±è´­ä¹°äº†çš„ç”µå­ä¹¦åï¼Œä¸è¦éšä¾¿ä¼ é˜…ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>chromeç½‘é¡µé•¿æˆªå›¾ç¥æŠ€</title>
			<link>https://www.smslit.top/2018/09/05/chrome-screenshot/</link>
			<pubDate>Wed, 05 Sep 2018 16:48:03 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/09/05/chrome-screenshot/</guid>
			<description>&lt;p&gt;ç›¸ä¿¡å¤§å®¶éƒ½æœ‰è¿‡è¦å¯¹ç½‘é¡µè¿›è¡Œé•¿æˆªå›¾çš„æ—¶å€™ï¼Œä¸çŸ¥é“å¤§å®¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæƒ³å¿…å¤§éƒ¨åˆ†çš„å¯èƒ½è¿˜æ˜¯å®‰è£…æµè§ˆå™¨æ’ä»¶å§ï¼Œå½“ç„¶è¿˜å¯èƒ½æ˜¯æ¯”è¾ƒå¥‡è‘©çš„å¯èƒ½â€”â€”ç”¨pythonå®ç°ï¼Œå¦‚ &lt;a href=&#34;https://www.smslit.top/2018/06/27/spider-practice-page-screenshot/&#34; target=&#34;_blank&#34;&gt;çˆ¬è™«å®è·µä¹‹ç½‘é¡µé•¿æˆªå›¾&lt;/a&gt;ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§ä¸ç”¨å®‰è£…æ’ä»¶ã€ä¸ç”¨å†™ä»£ç çš„æ–¹å¼ï¼Œåªéœ€è¦ä¸€ä¸ªchromeå°±èƒ½æå®šï¼Œä¸€èµ·æ¥æ„Ÿå—chromeçš„å¼ºå¤§ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ç›¸ä¿¡å¤§å®¶éƒ½æœ‰è¿‡è¦å¯¹ç½‘é¡µè¿›è¡Œé•¿æˆªå›¾çš„æ—¶å€™ï¼Œä¸çŸ¥é“å¤§å®¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæƒ³å¿…å¤§éƒ¨åˆ†çš„å¯èƒ½è¿˜æ˜¯å®‰è£…æµè§ˆå™¨æ’ä»¶å§ï¼Œå½“ç„¶è¿˜å¯èƒ½æ˜¯æ¯”è¾ƒå¥‡è‘©çš„å¯èƒ½â€”â€”ç”¨pythonå®ç°ï¼Œå¦‚ <a href="/2018/06/27/spider-practice-page-screenshot/" target="_blank">çˆ¬è™«å®è·µä¹‹ç½‘é¡µé•¿æˆªå›¾</a>ã€‚æœ¬æ–‡ä»‹ç»ä¸€ç§ä¸ç”¨å®‰è£…æ’ä»¶ã€ä¸ç”¨å†™ä»£ç çš„æ–¹å¼ï¼Œåªéœ€è¦ä¸€ä¸ªchromeå°±èƒ½æå®šï¼Œä¸€èµ·æ¥æ„Ÿå—chromeçš„å¼ºå¤§ï¼</p>

<h2 id="åˆæ¢">åˆæ¢</h2>

<p>å…ˆç®€å•é€šè¿‡ä¸€ä¸ªä¾‹å­ä»‹ç»è¿™ä¸ªåŠŸèƒ½çš„ä½¿ç”¨ï¼Œæ¯”å¦‚æˆªå–æœ¬åšå®¢é¦–é¡µ<a href="https://www.smslit.top" target="_blank">https://www.smslit.top</a>ã€‚ç”¨chromeæ‰“å¼€è¿™ä¸ªç½‘é¡µï¼Œä¸‹é¢åªéœ€ç®€å•çš„ä¸‰éƒ¨å°±å¯ä»¥å¾—åˆ°é•¿æˆªå›¾ï¼š</p>

<ol>
<li><p>è°ƒå‡º <strong>æ£€æŸ¥</strong> çª—å£ï¼Œå¦‚ä¸‹æ©™è‰²è¦†ç›–åŒºï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180905153613901782059.jpg" alt="20180905153613901782059.jpg" /></p>

<p>è°ƒå‡ºæ–¹å¼æœ‰ä¸¤ç§ï¼š</p>

<ul>
<li>å³å‡»ç½‘é¡µç©ºç™½å¤„ï¼Œç‚¹å‡» <strong>æ£€æŸ¥</strong></li>
<li>å¿«æ·é”®è°ƒå‡º

<ul>
<li>å¦‚æœæ‚¨ä½¿ç”¨ <strong>windows</strong>ï¼ŒæŒ‰ä¸‹ <code>ctrl</code> + <code>alt</code> + <code>i</code>;</li>
<li>å¦‚æœæ‚¨ä½¿ç”¨ <strong>macOS</strong>ï¼ŒæŒ‰ä¸‹  <code>command</code> + <code>option</code> + <code>i</code>;</li>
</ul></li>
</ul></li>

<li><p>è°ƒå‡ºå‘½ä»¤å…¥å£ï¼š</p>

<ul>
<li>å¦‚æœæ‚¨ä½¿ç”¨ <strong>windows</strong>ï¼ŒæŒ‰ä¸‹ <code>ctrl</code> + <code>shift</code> + <code>p</code>;</li>
<li>å¦‚æœæ‚¨ä½¿ç”¨ <strong>mac</strong>ï¼ŒæŒ‰ä¸‹ <code>command</code> + <code>shift</code> + <code>p</code>;
<br /></li>
</ul>

<p>å¦‚ä¸‹ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180905153613951944214.png" alt="20180905153613951944214.png" /></p></li>

<li><p>è¾“å…¥å‘½ä»¤ <code>screenshot</code>ï¼Œä½ ä¼šå‘ç°æœ‰ä¸‰ä¸ªæˆªå›¾æ–¹å¼ï¼Œé•¿æˆªå›¾å°±æ˜¯ <code>Capture full size screenshot</code>ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180905153613971810921.png"
         alt="20180905153613971810921.png" width="480px"/> 
</figure>


<p>å•å‡» <code>capture fullsize screenshot</code> å°±å¯ä»¥å¾—åˆ°é•¿æˆªå›¾äº†ã€‚</p></li>
</ol>

<h2 id="å®šåˆ¶å°ºå¯¸æˆªå›¾">å®šåˆ¶å°ºå¯¸æˆªå›¾</h2>

<p>ä¸Šä¸€èŠ‚ä¸­æœ‰æ²¡æœ‰æ„Ÿå—åˆ°chromeæˆªå›¾çš„ä¾¿æ·æ€§å‘¢ï¼Ÿå¦‚æœæ‚¨æƒ³æ›´è¿›ä¸€æ­¥å¾—åˆ°ä¸åŒçš„æ˜¾ç¤ºå°ºå¯¸çš„é¡µé¢ï¼Œè¯·æ‚¨ç»§ç»­é˜…è¯»ä¸‹é¢çš„å†…å®¹ï¼Œå¦‚æœä¸Šé¢çš„æ“ä½œå·²ç»æ»¡è¶³æ‚¨çš„éœ€è¦ï¼Œæœ¬èŠ‚å¯ç•¥è¿‡ã€‚</p>

<p>è¿˜æ˜¯ä»¥<a href="https://www.smslit.top" target="_blank">https://www.smslit.top</a>ä¸ºä¾‹ï¼Œå…ˆä½¿ç”¨chromeæ‰“å¼€é¡µé¢ã€‚</p>

<ol>
<li>è°ƒå‡º <strong>æ£€æŸ¥</strong> çª—å£ï¼Œå¦‚ä¸Šã€‚</li>

<li><p>ç‚¹å‡»ä¸‹å›¾æ©™è‰²æ ‡æ³¨çš„æŒ‰é’®ï¼Œ</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180905153614043330795.png" alt="20180905153614043330795.png" /></p>

<p>å¯ä»¥çœ‹åˆ°é¡µé¢å°ºå¯¸å˜åŒ–ï¼ŒåŒæ—¶é¡µé¢ä¸Šæ–¹å¤šå‡ºä¸€ä¸ªå·¥å…·æ ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180905153614054638208.png" alt="20180905153614054638208.png" /></p></li>

<li><p>å•å‡»æ–°å‡ºç°å·¥å…·æ æœ€å·¦ä¾§çš„ä¸‹æ‹‰åˆ—è¡¨ï¼Œé€‰æ‹©æ»¡æ„çš„è®¾å¤‡å°ºå¯¸ï¼Œæˆ–è€…è‡ªå®šä¹‰ï¼Œæ¯”å¦‚æˆ‘é€‰æ‹© <strong>iphone X</strong>ï¼Œé¡µé¢ä¼šæœ‰æ‰€å˜åŒ–ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180905153614074799871.png" alt="20180905153614074799871.png" /></p></li>

<li><p>æ­¤æ—¶å•å‡»æ–°å‡ºç°å·¥å…·æ æœ€å³ä¾§çš„èœå•æŒ‰é’®ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªåŠŸèƒ½èœå•ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180905153614104986640.png" alt="20180905153614104986640.png" /></p></li>

<li><p>é€‰æ‹©å…¶ä¸­çš„ <code>Capture full size screenshot</code> å°±å¯ä»¥å¾—åˆ°æƒ³è¦çš„é•¿æˆªå›¾äº†ã€‚</p></li>
</ol>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ç»è¿‡æœ¬æ–‡æƒ³å¿…æ‚¨å·²ç»æŒæ¡é•¿æˆªå›¾è¿™ä¸€ç¥æŠ€ï¼Œå¦‚æœæ‚¨ä¸€ç›´ä¹ æƒ¯ä½¿ç”¨chromeï¼Œè¿™åº”è¯¥æ˜¯æ‚¨éœ€è¦çš„ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>ç³–è±†å¹¿åœºèˆè§†é¢‘ä¸‹è½½</title>
			<link>https://www.smslit.top/2018/07/15/tangdou-video/</link>
			<pubDate>Sun, 15 Jul 2018 22:24:33 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/15/tangdou-video/</guid>
			<description>&lt;p&gt;å›åˆ°è€å®¶æ€»ä¼šé¢ä¸´å„ç§å¥‡è‘©çš„éœ€æ±‚ï¼Œè£…ç³»ç»Ÿã€ä¸‹æ­Œã€ä¿®ç”µè„‘ã€ä¿®ç”µå™¨ï¼Œæˆ‘å†…å¿ƒæ˜¯å´©æºƒçš„ï¼Œå®¶äººå’Œä¹¡äº²ä»¬ä¹ŸçœŸæ˜¯â€œçƒ­æƒ…â€ï¼æœ€è¿‘å‡ å¹´ï¼Œä¹¡é•‡æ–‡åŒ–ä¸­åˆå¤šäº†æµè¡Œçš„å¹¿åœºèˆï¼Œæ‰€ä»¥æˆ‘åˆæ‹…è´Ÿèµ·ç»™äººä¸‹è½½å¹¿åœºèˆè§†é¢‘çš„é‡ä»»ã€‚ä»Šå¤©å°±ç®€å•è¯´ä¸€ä¸‹å¦‚ä½•ä¸‹è½½ç³–è±†å¹¿åœºèˆä¸­çš„è§†é¢‘ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å›åˆ°è€å®¶æ€»ä¼šé¢ä¸´å„ç§å¥‡è‘©çš„éœ€æ±‚ï¼Œè£…ç³»ç»Ÿã€ä¸‹æ­Œã€ä¿®ç”µè„‘ã€ä¿®ç”µå™¨ï¼Œæˆ‘å†…å¿ƒæ˜¯å´©æºƒçš„ï¼Œå®¶äººå’Œä¹¡äº²ä»¬ä¹ŸçœŸæ˜¯â€œçƒ­æƒ…â€ï¼æœ€è¿‘å‡ å¹´ï¼Œä¹¡é•‡æ–‡åŒ–ä¸­åˆå¤šäº†æµè¡Œçš„å¹¿åœºèˆï¼Œæ‰€ä»¥æˆ‘åˆæ‹…è´Ÿèµ·ç»™äººä¸‹è½½å¹¿åœºèˆè§†é¢‘çš„é‡ä»»ã€‚ä»Šå¤©å°±ç®€å•è¯´ä¸€ä¸‹å¦‚ä½•ä¸‹è½½ç³–è±†å¹¿åœºèˆä¸­çš„è§†é¢‘ã€‚</p>

<p>è¿™ä¸ï¼Œè¿™æ¬¡å›è€å®¶ï¼Œè€å¦ˆè®©ç»™ä¸‹è½½ä¸€ä¸‹åˆ«äººå¾®ä¿¡åˆ†äº«ç»™å¥¹çš„å¹¿åœºèˆè§†é¢‘ï¼Œè™½ç„¶å†…å¿ƒæ˜¯æ‹’ç»çš„ï¼Œä½†æˆ‘è¿˜æ˜¯æ¥ä¸‹äº†è¿™ä¸ªä»»åŠ¡ã€‚æˆ‘æŠŠåˆ«äººåˆ†äº«ç»™è€å¦ˆçš„ä¿¡æ¯è½¬å‘ç»™æˆ‘è‡ªå·±ï¼Œç ”ç©¶ä¸€ä¸‹æ€ä¹ˆä¸‹è½½ï¼Œä¹Ÿå°±æœ‰äº†ç°åœ¨è¿™ç¯‡æ–‡ç« ï¼å¯¹äºæˆ‘çš„æ¢ç´¢è¿‡ç¨‹æ— æ„Ÿæƒ³ç›´æ¥çœ‹æ–¹æ³•çš„åŒå­¦å¯ä»¥ç‚¹<a href="#æ–¹æ³•" target="_blank">æˆ‘</a>ã€‚</p>

<h2 id="æ¢ç´¢">æ¢ç´¢</h2>

<p>è€å¦ˆä¸€å…±å…«æ¡å¹¿åœºèˆå…±äº«é“¾æ¥ï¼Œè¿™ä¹ˆå¤šï¼Œéšä¾¿æ‰“å¼€ä¸€ä¸ªçœ‹ä¸€ä¸‹ï¼åŸæ¥æ˜¯ç³–è±†å¹¿åœºèˆçš„å°ç¨‹åºï¼Œæ‰“å¼€å°±å¼€å§‹æ’­æ”¾å¯¹åº”çš„è§†é¢‘ï¼Œæ‰¾äº†ä¸€ä¼šå„¿ä¹Ÿæ²¡å‘ç°æœ‰ä»€ä¹ˆä¸‹è½½çš„åœ°æ–¹ï¼Œé‚£å°±googleä¸€ä¸‹å§ï¼Œç®€ç›´äº†ï¼Œ<a href="http://www.tangdou.com" target="_blank">ç³–è±†å¹¿åœºèˆ</a>è¿˜æœ‰è‡ªå·±çš„ç½‘ç«™ï¼Œå‰å®³äº†ï¼Œå¹¿åœºèˆï¼åœ¨ç³–è±†å¹¿åœºèˆä¸­éšä¾¿æ‰“å¼€ä¸€ä¸ªè§†é¢‘ï¼ŒåŸæ¥æ˜¯ä¸€ä¸ªFLASHè§†é¢‘ç½‘ç«™ï¼Œå»æ­»å§ï¼ˆæˆ‘å·²ç»å¸è½½æ‰äº†Adobe Flash Playerï¼‰ï¼Œä¸èƒ½æ’­æ”¾ï¼ä½†æ˜¯èµ«ç„¶çœ‹åˆ°å‡ ä¸ªå­—ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180715153166773944403.png" width="50%"/> 
</figure>


<p>å˜¿å˜¿ï¼Œä»¥æˆ‘çš„å°¿æ€§ï¼Œæˆ‘æ˜¯åšå†³ä¸ä¼šä¸ºäº†è¿™ä¹ˆå°çš„äº‹æƒ…ä¸‹è¿™ä¸ªappçš„ï¼Œæ‰€ä»¥ç»§ç»­æ¢ç´¢ï¼Œå‘ç°äº†ä¸€ä¸ªä¸“é—¨è§£æè§†é¢‘çš„å·¥å…·ç½‘ç«™<a href="https://www.parsevideo.com/" target="_blank">è§†é¢‘è§£æç½‘</a>ï¼Œè¿™é‡Œå¯è§£æçš„å¹³å°å¥½å¤šï¼Œä¹Ÿæ”¯æŒç³–è±†çš„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180715153166810969671.png" alt="20180715153166810969671.png" /></p>

<p>å½“ç„¶è¦å°è¯•ä¸€ä¸‹å•¦ï¼Œæˆ‘è¯•äº†ä¸€ä¸ªç³–è±†è§†é¢‘ï¼Œå‘ç°è¾“å…¥é“¾æ¥ç‚¹å‡»è§£ææŒ‰é’®ä»¥åï¼Œè¿‡äº†ä¸€ä¼šå„¿ä¸‹é¢å‡ºç°äº†ä¸¤ä¸ªé“¾æ¥ï¼Œåˆ†äº†ä¸¤ç§æ¸…æ™°åº¦çš„é“¾æ¥ï¼Œå“‡å¡ï¼Œå¥½åƒå¯ç”¨ï¼Œ<strong>BUT</strong> ï¼Œè¯•äº†ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªå’Œç¬¬nä¸ªï¼Œå¥½åƒéƒ½ä¸è¡Œäº†ï¼Œå‡ºç°äº†ä¿¡æ¯ï¼š</p>

<blockquote>
<p>æ•°æ®è·å–å¤±è´¥ï¼Œæ¬¢è¿åŠ å…¥ç½‘ç«™åº•éƒ¨QQç¾¤æäº¤é”™è¯¯ä¿¡æ¯ï¼</p>
</blockquote>

<p>ç®—äº†ï¼Œæ²¡å¿…è¦äº†ï¼Œè¿™æ—¶æƒ³èµ·äº†ï¼šæ‰‹æœºæ—¢ç„¶èƒ½çœ‹ï¼Œå°¤å…¶æ˜¯iOSå¹³å°çš„ï¼Œé‚£ä¹ˆè¯´æ˜ä¸æ”¯æŒflashçš„å¹³å°ä¹Ÿå¯ä»¥æ­£å¸¸è§‚çœ‹ï¼Œé‚£ä¹ˆä¸€å®šåœ¨è§‚çœ‹çš„æ—¶å€™ä¸€å®šå¯ä»¥å¾—åˆ°è§†é¢‘é“¾æ¥ã€‚</p>

<p>ç°åœ¨æµè§ˆå™¨å‡å¯ä»¥æ¨¡æ‹Ÿä¸åŒæµè§ˆå™¨è¿›è¡Œæ¸²æŸ“ç½‘é¡µï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æŒ‰ç…§iphoneçš„safariæ¨¡å¼æ¸²æŸ“ï¼Œæ‰“å¼€äº†ä¸€ä¸ªè§†é¢‘ï¼Œæœç„¶å¯ä»¥å¾—åˆ°é“¾æ¥å¹¶è¿›è¡Œè§†é¢‘ä¸‹è½½ï¼Œå…·ä½“è¿‡ç¨‹è§<a href="#æ–¹æ³•" target="_blank">æ–¹æ³•</a>ã€‚</p>

<h2 id="æ–¹æ³•">æ–¹æ³•</h2>

<p>è¿™é‡Œçš„æµ‹è¯•å¹³å°ï¼š</p>

<ul>
<li>macOS 10.13.5</li>
<li>æµè§ˆå™¨ï¼šsafari</li>
</ul>

<p><strong>Tipï¼š</strong></p>

<p>ä¸åŒæµè§ˆå™¨è™½ç„¶æ“ä½œæœ‰æ‰€å·®å¼‚ï¼Œä½†æ˜¯åº”è¯¥éƒ½ä¼šæ”¯æŒæ¨¡æ‹Ÿç§»åŠ¨è®¾å¤‡æ¸²æŸ“çš„ï¼Œæ‰€ä»¥ä¾æ®ä¸‹é¢æ–¹æ³•è¿›è¡Œç›¸åº”ç±»æ¯”æ“ä½œä¹Ÿèƒ½è¾¾åˆ°ç›¸åŒæ•ˆæœã€‚</p>

<h3 id="é”å®šè§†é¢‘">é”å®šè§†é¢‘</h3>

<p><a href="http://www.tangdou.com" target="_blank">ç³–è±†ç½‘</a>æ”¯æŒæœç´¢åŠŸèƒ½ï¼Œä¸€èˆ¬å®¶é‡Œäººéƒ½ä¼šä¸‹è½½çŸ¥é“æ­Œåç­‰å…·ä½“ä¿¡æ¯çš„å¹¿åœºèˆè§†é¢‘ï¼Œæ¯”å¦‚å°ç¨‹åºåˆ†äº«çš„ç³–è±†å¹¿åœºèˆè§†é¢‘éƒ½ä¼šæ˜¾ç¤ºè§†é¢‘çš„å…·ä½“æ ‡é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç”¨è¿™äº›å…³é”®ä¿¡æ¯æœç´¢è§†é¢‘ï¼Œæ¯”å¦‚å¾®ä¿¡å…±äº«ä¿¡æ¯ä¸­çš„è¿™ä¸ªï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180715153166927119248.png" width="80%"/> 
</figure>


<p>æ‰€ä»¥å¯ä»¥æœç´¢ã€Œ<strong>ä¸½ä¸½è‡ªç”±å¹¿åœºèˆã€Šæ‹¥æŠ±ä½ ç¦»å»ã€‹</strong>ã€ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180715153166945860086.png" alt="20180715153166945860086.png" /></p>

<p>å¾—åˆ°æœç´¢ç»“æœï¼Œå¾ˆå®¹æ˜“å°±èƒ½æ‰¾åˆ°æˆ‘ä»¬çš„ç›®æ ‡è§†é¢‘ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180715153166972665100.png" alt="20180715153166972665100.png" /></p>

<h3 id="è·å–é“¾æ¥">è·å–é“¾æ¥</h3>

<p>æ‰“å¼€ä¸Šé¢æ‰¾åˆ°çš„è§†é¢‘åï¼Œåœ¨ <strong>èœå•æ </strong> - <strong>å¼€å‘</strong> - <strong>ç”¨æˆ·ä»£ç†</strong> ä¸­æ‰¾åˆ°ç›¸åº”ä»£ç†ï¼Œæˆ‘ç”¨çš„æ˜¯ <strong>Safariæµè§ˆå™¨-iOS11.0-iPhone</strong>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180715153167010664947.png" alt="20180715153167010664947.png" /></p>

<p>æ­¤æ—¶å°±å¯ä»¥ä»¥iphoneä¸Šsafariçš„æ–¹å¼æ‰“å¼€é“¾æ¥ï¼Œç­‰å‡ ç§’é’Ÿè¿‡å»å¹¿å‘Šï¼Œå°±å¯ä»¥çœ‹åˆ°html5è§†é¢‘ï¼Œå³é”®å•å‡»è§†é¢‘åŒºå°±èƒ½çœ‹åˆ°æ‹·è´è§†é¢‘åœ°å€ï¼Œå¾—åˆ°åœ°å€å¯ä»¥ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„æ–¹å¼ä¸‹è½½ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180715153167032317400.png" alt="20180715153167032317400.png" /></p>

<h3 id="è§†é¢‘ä¸‹è½½">è§†é¢‘ä¸‹è½½</h3>

<p>å¾—åˆ°é“¾æ¥ä»¥åï¼Œå¯ä»¥åˆ©ç”¨ä¸‹è½½å·¥å…·ä¸‹è½½ï¼Œæ¯”å¦‚è¿…é›·ã€Aria2ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æµè§ˆå™¨è‡ªå¸¦ä¸‹è½½å™¨ï¼Œè¿™é‡Œä»¥æµè§ˆå™¨ä¸‹è½½ä¸ºä¾‹è®²ä¸€ä¸‹ã€‚</p>

<p>æ–°æ ‡ç­¾é¡µæ‰“å¼€é“¾æ¥åï¼Œä¼šå‡ºç°htmlè§†é¢‘æ’­æ”¾å†…å®¹ï¼Œåœ¨è§†é¢‘åŒºåŒæ ·å³é”®å•å‡»å°±èƒ½çœ‹åˆ° <strong>ä¸‹è½½è§†é¢‘ä¸º</strong> ï¼Œç‚¹å‡»åæ›´æ”¹æ–‡ä»¶åä¿å­˜å³å¯ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180716153167074790691.jpg" alt="20180716153167074790691.jpg" /></p>

<h2 id="æœ€å">æœ€å</h2>

<p>æ–¹å¼ç•¥ <strong>low</strong>ï¼Œä½†è¿˜ç®—æœ‰æ•ˆï¼Œä»¥æ­¤æ–‡è®°å½•æ–¹æ³•ï¼Œæ–¹ä¾¿ä»¥åå›è€å®¶ç»§ç»­åšä¹‰å·¥ï¼</p>]]></content>
		</item>
		
		<item>
			<title>platformioä¸²å£ç›‘è§†å™¨åŠŸèƒ½</title>
			<link>https://www.smslit.top/2018/07/11/platformio-command-device/</link>
			<pubDate>Wed, 11 Jul 2018 23:28:08 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/11/platformio-command-device/</guid>
			<description>&lt;p&gt;ä»Šå¤©æ”¶åˆ°äº†å‰äº›å¤©ä¹°çš„&lt;a href=&#34;https://store.arduino.cc/arduino-leonardo-with-headers&#34; target=&#34;_blank&#34;&gt;Arduino Leonardo&lt;/a&gt;ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„ç¨‹åºæµ‹è¯•äº†ä¸€ä¸‹åŸºæœ¬çš„LED blinkyå’Œä¸²å£é€šä¿¡ï¼Œæœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ &lt;strong&gt;platformio&lt;/strong&gt; ç›‘è§† Arduinoçš„ä¸²å£æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180711153132350560223.jpg&#34; alt=&#34;20180711153132350560223.jpg&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©æ”¶åˆ°äº†å‰äº›å¤©ä¹°çš„<a href="https://store.arduino.cc/arduino-leonardo-with-headers" target="_blank">Arduino Leonardo</a>ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„ç¨‹åºæµ‹è¯•äº†ä¸€ä¸‹åŸºæœ¬çš„LED blinkyå’Œä¸²å£é€šä¿¡ï¼Œæœ¬æ–‡ç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ <strong>platformio</strong> ç›‘è§† Arduinoçš„ä¸²å£æ•°æ®ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180711153132350560223.jpg" alt="20180711153132350560223.jpg" /></p>

<p>é¢„è­¦ï¼šå¦‚æœæ‚¨å¯¹æ“ä½œå‘½ä»¤è¡Œä¸æ„Ÿå†’ï¼Œé‚£ä¹ˆæœ¬ç¯‡æ–‡ç« ä¸é€‚åˆæ‚¨çš„å£å‘³ï¼Œä¸è¿‡çœ‹çœ‹äº†è§£ä¸€ä¸‹ä¹Ÿä¸é”™ï¼</p>

<p>æœ¬æ–‡æµ‹è¯•æ¡ä»¶ï¼š</p>

<ul>
<li>ç”µè„‘æ“ä½œç³»ç»Ÿ -&gt; <strong>macOS</strong></li>
<li>ä½¿ç”¨å·¥å…· -&gt; <strong>platformio</strong></li>
<li>å¼€å‘æ¿ -&gt; <strong>Arduino Leonardo</strong></li>
</ul>

<h2 id="æµ‹è¯•ç¨‹åº">æµ‹è¯•ç¨‹åº</h2>

<p>æœ¬äººå–œæ¬¢ä½¿ç”¨vimï¼Œæ‰€ä»¥ä½¿ç”¨æ–‡ç«  <a href="/2017/08/15/platformio-vim/" target="_blank">vimä¹Ÿæ˜¯platformioçš„IDE</a> ä¸­çš„æ–¹æ³•æ–°å»ºå·¥ç¨‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">mkdir leonardo_play <span class="o">&amp;&amp;</span> <span class="nb">cd</span> leonardo_play
pio init --ide vim --board leonardo</code></pre></div>
<p>å®Œæˆå·¥ç¨‹çš„æ–°å»ºåï¼Œä¸ºäº†æ–¹ä¾¿æ„å»ºç¨‹åºå’Œä¸Šä¼ ç¨‹åºåˆ°å¼€å‘æ¿ <strong>Arduino Leonardo</strong>ï¼Œè¿™é‡Œè¿˜æ–°å»ºæ–‡ä»¶ <code>Makefile</code>ï¼Œå†…å®¹ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">all</span><span class="o">:</span>
	platformio -f -c vim run

<span class="nf">upload</span><span class="o">:</span>
	platformio -f -c vim run --target upload

<span class="nf">clean</span><span class="o">:</span>
	platformio -f -c vim run --target clean

<span class="nf">program</span><span class="o">:</span>
	platformio -f -c vim run --target program

<span class="nf">uploadfs</span><span class="o">:</span>
	platformio -f -c vim run --target uploadfs

<span class="nf">update</span><span class="o">:</span>
	platformio -f -c vim update
</code></pre></div>
<p>æ·»åŠ æµ‹è¯•æºç  <code>src/main.cpp</code>ï¼Œä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;Led on!</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;Led off!</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">900</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ä¸Šè¿°ä»£ç ä¸»è¦å®ç°LEDç®¡è„šå’Œä¸²å£çš„åˆå§‹åŒ–ï¼Œåœ¨ä¸»å¾ªç¯ä¸­ï¼Œæ¯ä¸€ç§’LEDé—ªåŠ¨ä¸€æ¬¡ï¼ŒæœŸé—´ä¸²å£ä¼šå‘é€LEDçŠ¶æ€ã€‚ä»¥æ­¤ä»£ç æ¥æµ‹è¯•æ–°æ”¶åˆ°çš„å¼€å‘æ¿ï¼Œè¿˜æœ‰ä»‹ç»æœ¬æ–‡çš„ä¸»é¢˜ï¼Œä¸²å£æ•°æ®ç›‘è§†å™¨åŠŸèƒ½ã€‚</p>

<p>è¿æ¥ <strong>Arduino Leonardo</strong> å’Œ ç”µè„‘ï¼Œç¼–è¯‘å·¥ç¨‹å¹¶ä¸Šä¼ ç¨‹åºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">make all <span class="o">&amp;&amp;</span> make upload</code></pre></div>
<p>ç¨‹åºä¸Šä¼ æˆåŠŸåçœ‹åˆ°ï¼Œæ¿è½½ledå¼€å§‹é—ªåŠ¨ï¼Œè¯´æ˜ç¨‹åºåŸºæœ¬è¿è¡Œäº†ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/platform/command/device/blinky.mp4" width="100%" controls="controls" loop="loop"></video>

<p>ä¸‹é¢æˆ‘ä»¬åªéœ€è¦çœ‹ä¸€ä¸‹ï¼Œä¸²å£æ˜¯å¦æ‰“å°äº†LEDçŠ¶æ€ã€‚</p>

<h2 id="device-å‘½ä»¤"><code>device</code>å‘½ä»¤</h2>

<p>è¿™ä¸ªå‘½ä»¤ç”¨æ¥æ§åˆ¶è®¾å¤‡ï¼Œå¸¸ç”¨çš„åŠŸèƒ½å°±æ˜¯ç›‘è§†è®¾é…é€šè¿‡ä¸²å£å‘é€çš„æ•°æ®ï¼Œæˆ–å‘è®¾å¤‡å‘é€ä¸²å£æ•°æ®ã€‚ä¸²å£ç”¨çš„å¾ˆå¤šï¼Œæ‰€ä»¥è¿™é‡Œåªæ‹¿ä¸²å£æ¥åˆ†äº«ç»éªŒã€‚</p>

<p>æ‰§è¡Œå‘½ä»¤ï¼ŒæŸ¥çœ‹ä¸€ä¸‹å¸®åŠ©ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  leonardo pio device -h
Usage: pio device <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...

Options:
  -h, --help  Show this message and exit.

Commands:
  list     List devices
  monitor  Monitor device <span class="o">(</span>Serial<span class="o">)</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªå­å‘½ä»¤ï¼š</p>

<ul>
<li><strong>list</strong> : åˆ—å‡ºæ‰€æœ‰å¯ç”¨è®¾å¤‡ï¼›</li>
<li><strong>monitor</strong> : ç›‘è§†ä¸²å£è®¾å¤‡ï¼›</li>
</ul>

<h3 id="åˆ—å‡ºå¯ç”¨è®¾å¤‡">åˆ—å‡ºå¯ç”¨è®¾å¤‡</h3>

<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pio device list</code></pre></div>
<p>æ­¤æ—¶å°±ä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨å¤§çš„ä¸²å£æ¥å£ï¼Œæˆ‘çš„æ˜¯è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  leonardo pio device list
/dev/cu.SOC
-----------
Hardware ID: n/a
Description: n/a

/dev/cu.MALS
------------
Hardware ID: n/a
Description: n/a

/dev/cu.Bluetooth-Incoming-Port
-------------------------------
Hardware ID: n/a
Description: n/a

/dev/cu.yeAirPods-WirelessiAP-1
-------------------------------
Hardware ID: n/a
Description: n/a

/dev/cu.usbmodem1441
--------------------
Hardware ID: USB VID:PID<span class="o">=</span><span class="m">2341</span>:8036 <span class="nv">LOCATION</span><span class="o">=</span><span class="m">20</span>-6
Description: Arduino Leonardo</code></pre></div>
<p>èƒ½å¤Ÿçœ‹åˆ°ï¼Œ <strong>Arduino Leonardo</strong> å¯¹åº”çš„ä¸²å£åº”è¯¥æ˜¯ <code>/dev/cu.usbmodem1441</code>ã€‚</p>

<h3 id="å¼€å¯ç›‘è§†å™¨">å¼€å¯ç›‘è§†å™¨</h3>

<p><code>pio device monitor [ARGS]</code> å°±èƒ½å¼€å¯ç›‘è§†å™¨<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>ï¼Œ<code>ARGS</code> å¦‚æœæ²¡æœ‰ï¼Œå°±ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼Œä¸²å£ç›‘è§†ç›¸å…³çš„<code>ARGS</code>ç›¸å…³å¸¸ç”¨é¡¹ä½¿ç”¨ä¿¡æ¯å¦‚ä¸‹è¡¨ï¼š</p>

<table>
<thead>
<tr>
<th align="center">å‚æ•°</th>
<th align="center">é»˜è®¤å€¼</th>
<th align="center">å‚æ•°æ ‡è¯†</th>
<th align="left">å¯é€‰å€¼</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">æ³¢ç‰¹ç‡</td>
<td align="center">9600</td>
<td align="center">-b, &ndash;baud</td>
<td align="left">2400ã€4800ã€9600ã€19200ã€115200ç­‰ç­‰</td>
</tr>

<tr>
<td align="center">ç«¯å£</td>
<td align="center">è‡ªåŠ¨è¯†åˆ«</td>
<td align="center">-p, &ndash;port</td>
<td align="left"><code>pio devcie list</code>åˆ—å‡ºçš„è®¾å¤‡åœ°å€</td>
</tr>

<tr>
<td align="center">æ ¡éªŒä½</td>
<td align="center">N</td>
<td align="center">&ndash;parity</td>
<td align="left"><code>N</code>, <code>E</code>, <code>O</code>, <code>S</code>, <code>M</code></td>
</tr>

<tr>
<td align="center">ç¼–ç </td>
<td align="center">UTF-8</td>
<td align="center">&ndash;encoding</td>
<td align="left"><code>hexlify</code>, <code>UTF-8</code></td>
</tr>

<tr>
<td align="center">å›æ˜¾</td>
<td align="center">off</td>
<td align="center">&ndash;echo</td>
<td align="left">æ— è®¾ç½®å€¼</td>
</tr>
</tbody>
</table>

<p>è¿˜æœ‰å¾ˆå¤šå…¶å®ƒå‚æ•°é¡¹å¯ä»¥è®¾ç½®ï¼Œè¿™é‡Œåˆ—å‡ºçš„åªæ˜¯å¸¸ç”¨çš„ã€‚ä¸åŠ  <code>ARGS</code> åªæ‰§è¡Œ <code>pio device monitor</code> å¯ä»¥è‡ªåŠ¨è¯†åˆ«å’ŒåŒ¹é…å‚æ•°ï¼Œå…¶å®åœ¨è¿™é‡Œæ‰§è¡Œäº†æ— å‚æ•°çš„å‘½ä»¤å°±å¯ä»¥æ­£å¸¸çœ‹åˆ° <strong>Arduino Leonardo</strong> çš„æ‰“å°ä¿¡æ¯äº†ã€‚</p>

<h4 id="æŒ‡å®šç«¯å£">æŒ‡å®šç«¯å£</h4>

<p>æœ‰æ—¶ï¼Œå‘½ä»¤ä¸èƒ½è‡ªå·±è¯†åˆ«ç«¯å£ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æŒ‡å®šä¸€ä¸ªç‰¹å®šç«¯å£ï¼Œè¿™é¡¹å‚æ•°å…¶å®ä¹Ÿå¯ä»¥é…ç½®åˆ° <code>platformio.ini</code> æ–‡ä»¶ä¸­ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼<sup class="footnote-ref" id="fnref:2"><a href="#fn:2">2</a></sup>ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å‰é¢æåˆ°çš„ç«¯å£ <code>/dev/cu.usbmodem1441</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">pio device monitor -p /dev/cu.usbmodem1441</code></pre></div>
<h4 id="é€šä¿¡é€Ÿç‡">é€šä¿¡é€Ÿç‡</h4>

<p>å†³å®šé€šä¿¡é€Ÿç‡çš„å‚æ•°æ˜¯ <strong>æ³¢ç‰¹ç‡</strong> ï¼Œç¨‹åºä¸­æˆ‘ä»¬è®¾ç½®äº†æ³¢ç‰¹ç‡ä¸º <code>115200</code>ï¼ŒåŒæ ·è¿™ä¸ªå‚æ•°ä¹Ÿæ”¯æŒé…ç½®åˆ°æ–‡ä»¶ <code>platformio.ini</code> ä¸­ä»¥ä½œé»˜è®¤å€¼<sup class="footnote-ref" id="fnref:2"><a href="#fn:2">2</a></sup>ã€‚å¦‚æœåœ¨å‘½ä»¤ä¸­çš„è¯ï¼Œå¯ä»¥è¿™æ ·æŒ‡å®šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">pio device monitor -p /dev/consoleu.usbmodem1441 -b <span class="m">115200</span></code></pre></div>
<h4 id="æ ¡éªŒä½">æ ¡éªŒä½</h4>

<p>åœ¨ä¸²å£é€šä¿¡ä¸­ï¼Œä¸ºäº†æé«˜ä¸²å£æ•°æ®å‰§çš„å‡†ç¡®æ€§ï¼Œä¼šä½¿ç”¨æ ¡éªŒä½ï¼Œå¸¸ç”¨çš„æ˜¯å¥‡å¶æ ¡éªŒï¼Œå¥‡æ ¡éªŒæ˜¯ <strong>odd</strong>ï¼Œæ‰€ä»¥å¯¹åº”å€¼ä¸º <code>O</code>ï¼Œå¶æ ¡éªŒæ˜¯ <strong>even</strong>ï¼Œå¯¹åº” <code>E</code>ï¼Œé»˜è®¤æ— æ ¡éªŒ <strong>None</strong>ï¼Œå¯¹åº” <code>N</code>ï¼Œå¦‚æœè¦æŒ‡å®šå¶æ ¡éªŒä½ï¼Œè¿™æ ·åšï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">pio device monitor --patity E</code></pre></div>
<h4 id="ç¼–ç ">ç¼–ç </h4>

<p>è¿™ä¸ªç¼–ç çš„åŠŸèƒ½ç±»ä¼¼äºwindowsä¸‹å¥½å¤šä¸²å£åŠ©æ‰‹ä¸­çš„æ–‡æœ¬/äºŒè¿›åˆ¶é€‰æ‹©çš„åŠŸèƒ½ï¼Œé»˜è®¤ä¸²å£åŠ©æ‰‹å¼€å¯ä»¥åä¼šæŒ‰ç…§Asciiå­—ç¬¦æ˜¾ç¤ºæ‰“å°æ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  leonardo pio device monitor --echo
--- Miniterm on /dev/cu.usbmodem1441  <span class="m">9600</span>,8,N,1 ---
--- Quit: Ctrl+C <span class="p">|</span> Menu: Ctrl+T <span class="p">|</span> Help: Ctrl+T followed by Ctrl+H ---
Led on!
Led off!
Led on!
Led off!</code></pre></div>
<p>è°ƒè¯•ç¨‹åºçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šéœ€è¦ä¸²å£é€šä¿¡æ”¶å‘äºŒè¿›åˆ¶æ•°æ®ï¼Œå°¤å…¶æ˜¯ä½¿ç”¨ä¸€å®šé€šä¿¡åè®®çš„æƒ…å†µä¸‹ï¼Œæ­¤æ—¶æƒ³çœ‹äºŒè¿›åˆ¶å½¢å¼çš„æ•°æ®ï¼Œä½¿ç”¨å‘½ä»¤çš„æ—¶å€™éœ€è¦æŒ‡å®š <code>--encoding</code> ä¸º <code>hexlify</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  leonardo pio device monitor --encoding hexlify
--- Miniterm on /dev/cu.usbmodem1441  <span class="m">9600</span>,8,N,1 ---
--- Quit: Ctrl+C <span class="p">|</span> Menu: Ctrl+T <span class="p">|</span> Help: Ctrl+T followed by Ctrl+H ---
4C <span class="m">65</span> <span class="m">64</span> <span class="m">20</span> 6F 6E <span class="m">21</span> 0A 4C <span class="m">65</span> <span class="m">64</span> <span class="m">20</span> 6F <span class="m">66</span> <span class="m">66</span> <span class="m">21</span> 0A</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æ‰“å°ç»“æœå°±æ˜¯åŸæ¥å­—ç¬¦ä¸²å¯¹åº”çš„Asciiç äº†ï¼</p>

<h4 id="æ•°æ®å›æ˜¾">æ•°æ®å›æ˜¾</h4>

<p>ä¸»è¦ç”¨äºå‘é€æ•°æ®çš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µæ˜¯ä¸ä¼šæ˜¾ç¤ºå‘é€çš„å­—ç¬¦æˆ–æ•°æ®çš„ï¼Œå½“å¼€å¯å›æ˜¾æ—¶å°±èƒ½æ˜¾ç¤ºå‘é€çš„æ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  leonardo pio device monitor --echo
--- Miniterm on /dev/cu.usbmodem1441  <span class="m">9600</span>,8,N,1 ---
--- Quit: Ctrl+C <span class="p">|</span> Menu: Ctrl+T <span class="p">|</span> Help: Ctrl+T followed by Ctrl+H ---
Led off!
Led on!
Led off!
Led on!
yLed off!
yyyyyLed on!</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æˆ‘å‘äº†å¥½å¤š <strong>y</strong>ï¼Œåœ¨å¼€å¯ä¸²å£ç›‘è§†åï¼Œåœ¨é”®ç›˜ä¸ŠæŒ‰æŒ‰é”®å°±ä¼šå‘é€æŒ‰é”®å¯¹åº”çš„å­—ç¬¦ï¼Œåœ¨äºŒè¿›åˆ¶æ¨¡å¼(hexlify)ä¸‹æ—¶ï¼Œåªè¯†åˆ«åå…­è¿›åˆ¶ç ç„¶åå‘é€ã€‚</p>

<h4 id="ä¸´æ—¶é…ç½®">ä¸´æ—¶é…ç½®</h4>

<p><code>device</code>å‘½ä»¤ä½¿ç”¨çš„æ˜¯ <a href="https://gist.github.com/bewest/4632563" target="_blank">miniterm</a>ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¸­å¯ä»¥ä¸´æ—¶é…ç½®ä¸€äº›å‚æ•°ï¼Œå¼€å¯ç›‘è§†å™¨åå¯ä»¥æŒ‰å¿«æ·é”® <code>CTRL</code>+<code>T</code> <code>CTRL</code> + <code>H</code>å°±ä¼šæ‰“å°å¸®åŠ©ä¿¡æ¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">--- pySerial <span class="o">(</span><span class="m">3</span>.4<span class="o">)</span> - miniterm - <span class="nb">help</span>
---
--- Ctrl+C   Exit program
--- Ctrl+T   Menu escape key, followed by:
--- Menu keys:
---    Ctrl+T  Send the menu character itself to remote
---    Ctrl+C  Send the <span class="nb">exit</span> character itself to remote
---    Ctrl+I  Show info
---    Ctrl+U  Upload file <span class="o">(</span>prompt will be shown<span class="o">)</span>
---    Ctrl+A  encoding
---    Ctrl+F  edit filters
--- Toggles:
---    Ctrl+R  RTS   Ctrl+D  DTR   Ctrl+B  BREAK
---    Ctrl+E  <span class="nb">echo</span>  Ctrl+L  EOL
---
--- Port settings <span class="o">(</span>Ctrl+T followed by the following<span class="o">)</span>:
---    p          change port
---    <span class="m">7</span> <span class="m">8</span>        <span class="nb">set</span> data bits
---    N E O S M  change parity <span class="o">(</span>None, Even, Odd, Space, Mark<span class="o">)</span>
---    <span class="m">1</span> <span class="m">2</span> <span class="m">3</span>      <span class="nb">set</span> stop bits <span class="o">(</span><span class="m">1</span>, <span class="m">2</span>, <span class="m">1</span>.5<span class="o">)</span>
---    b          change baud rate
---    x X        disable/enable software flow control
---    r R        disable/enable hardware flow control</code></pre></div>
<p>æ ¹æ®å¸®åŠ©ä¿¡æ¯è¿›è¡Œæ“ä½œå³å¯ä¿®æ”¹é€šä¿¡å‚æ•°ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡ä¸»è¦åˆ†äº«äº† <code>platformio</code> çš„ä¸²å£ç›‘è§†åŠŸèƒ½ï¼Œç¨‹åºè®¾è®¡ä¸­å°‘ä¸äº†ä¸²å£çš„ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªåŠŸèƒ½ä¸€å®šæ˜¯éå¸¸éœ€è¦çš„ï¼Œå°¤å…¶æ˜¯å¯¹äºå–œæ¬¢ä½¿ç”¨ CLI çš„ç«¥é‹ï¼Œå¸Œæœ›æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1"><a href="http://docs.platformio.org/en/latest/userguide/cmd_device.html" target="_blank">platformio device</a>
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
<li id="fn:2"><a href="http://docs.platformio.org/en/latest/projectconf/section_env_monitor.html" target="_blank"> Project Configuration File platformio.ini - Monitor options</a>
 <a class="footnote-return" href="#fnref:2"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>hugoåšå®¢æ·»åŠ è¯„è®ºç³»ç»ŸValine</title>
			<link>https://www.smslit.top/2018/07/08/hugo-valine/</link>
			<pubDate>Sun, 08 Jul 2018 17:01:05 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/08/hugo-valine/</guid>
			<description>&lt;p&gt;åšå®¢å·²ç»åŸºæœ¬ä» &lt;a href=&#34;https://hexo.io&#34; target=&#34;_blank&#34;&gt;hexo&lt;/a&gt; è¿ç§»åˆ° &lt;a href=&#34;https://gohugo.io/&#34; target=&#34;_blank&#34;&gt;hugo&lt;/a&gt; ï¼Œå¯¹ä½¿ç”¨çš„ &lt;a href=&#34;https://github.com/olOwOlo/hugo-theme-even&#34; target=&#34;_blank&#34;&gt;Even&lt;/a&gt; ä¸»é¢˜éå¸¸æ»¡æ„ï¼Œè™½è‡ªå¸¦äº†è¯„è®ºç³»ç»Ÿ &lt;a href=&#34;https://github.com/imsun/gitment&#34; target=&#34;_blank&#34;&gt;gitment&lt;/a&gt; çš„æ”¯æŒï¼Œä½†æ›´å–œæ¬¢è¿ç§»ä¹‹å‰åœ¨hexoåšå®¢ä¸­ä½¿ç”¨çš„ä¸€ä¸ªéå¸¸æ¸…æ–°çš„è¯„è®ºç³»ç»Ÿï¼Œé‚£å°±æ˜¯ &lt;a href=&#34;https://valine.js.org/&#34; target=&#34;_blank&#34;&gt;valine&lt;/a&gt;ï¼Œæœ¬æ–‡å°±è®²ä¸€ä¸‹å¦‚ä½•åœ¨ &lt;a href=&#34;https://github.com/olOwOlo/hugo-theme-even&#34; target=&#34;_blank&#34;&gt;Even&lt;/a&gt; ä¸­æ·»åŠ  &lt;a href=&#34;https://valine.js.org/&#34; target=&#34;_blank&#34;&gt;Valine&lt;/a&gt; çš„æ”¯æŒã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åšå®¢å·²ç»åŸºæœ¬ä» <a href="https://hexo.io" target="_blank">hexo</a> è¿ç§»åˆ° <a href="https://gohugo.io/" target="_blank">hugo</a> ï¼Œå¯¹ä½¿ç”¨çš„ <a href="https://github.com/olOwOlo/hugo-theme-even" target="_blank">Even</a> ä¸»é¢˜éå¸¸æ»¡æ„ï¼Œè™½è‡ªå¸¦äº†è¯„è®ºç³»ç»Ÿ <a href="https://github.com/imsun/gitment" target="_blank">gitment</a> çš„æ”¯æŒï¼Œä½†æ›´å–œæ¬¢è¿ç§»ä¹‹å‰åœ¨hexoåšå®¢ä¸­ä½¿ç”¨çš„ä¸€ä¸ªéå¸¸æ¸…æ–°çš„è¯„è®ºç³»ç»Ÿï¼Œé‚£å°±æ˜¯ <a href="https://valine.js.org/" target="_blank">valine</a>ï¼Œæœ¬æ–‡å°±è®²ä¸€ä¸‹å¦‚ä½•åœ¨ <a href="https://github.com/olOwOlo/hugo-theme-even" target="_blank">Even</a> ä¸­æ·»åŠ  <a href="https://valine.js.org/" target="_blank">Valine</a> çš„æ”¯æŒã€‚</p>

<blockquote>
<p>Valine - ä¸€æ¬¾å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„æ— åç«¯è¯„è®ºç³»ç»Ÿã€‚</p>

<p>Valine è¯ç”Ÿäº2017å¹´8æœˆ7æ—¥ï¼Œæ˜¯ä¸€æ¬¾åŸºäºLeancloudçš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„æ— åç«¯è¯„è®ºç³»ç»Ÿã€‚</p>

<p>ç†è®ºä¸Šæ”¯æŒä½†ä¸é™äºé™æ€åšå®¢ï¼Œç›®å‰å·²æœ‰Hexoã€Jekyllã€Typechoç­‰åšå®¢ç¨‹åºåœ¨ä½¿ç”¨Valineã€‚</p>

<p><a href="https://valine.js.org" target="_blank">@Valine</a></p>
</blockquote>

<p>æ‰€ä»¥ï¼Œç†è®ºä¸Šå®ƒä¹Ÿæ˜¯æ”¯æŒ <strong>Hugo</strong> çš„ï¼Œ å®è·µè¯æ˜ï¼Œç¡®å®å¦‚æ­¤ã€‚å…¶ç‰¹æ€§å¦‚ä¸‹ï¼š</p>

<ul>
<li>å¿«é€Ÿ</li>
<li>å®‰å…¨</li>
<li>Emoji ğŸ˜‰</li>
<li>æ— åç«¯å®ç°</li>
<li>MarkDown å…¨è¯­æ³•æ”¯æŒ</li>
<li>è½»é‡æ˜“ç”¨(~15kb gzipped)</li>
<li>æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡ v1.2.0-beta1+</li>
</ul>

<p>è¿™ä¹ˆå¥½çš„è¯„è®ºç³»ç»Ÿï¼Œå€¼å¾—å®£ä¼ ï¼Œå¸Œæœ›çœ‹åˆ°æ­¤æ–‡ç« çš„ç«¥é‹ï¼Œä¹Ÿæ”¯æŒä¸€ä¸‹ <a href="https://valine.js.org/#æèµ " target="_blank">Valine</a>ã€‚ä¸‹é¢å°±è®²ä¸€ä¸‹æˆ‘æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ·»åŠ  <a href="https://valine.js.org" target="_blank">Valine</a> æ”¯æŒçš„ã€‚</p>

<p><strong>Tips:</strong></p>

<ul>
<li>æ•´ä¸ªè¿‡ç¨‹ï¼Œæ˜¯ä»¥<strong>Even</strong>ä¸»é¢˜ä¸ºä¾‹çš„ï¼Œå…¶å®ƒä¸»é¢˜æ“ä½œå¤§åŒå°å¼‚ã€‚</li>
<li>é…ç½®ä¹‹å‰åº”è¯¥å…ˆé˜…è¯»<a href="https://valine.js.org/quickstart.html" target="_blank">Valineå¿«é€Ÿå¼€å§‹</a></li>
</ul>

<h2 id="leancloudç›¸å…³é…ç½®">Leancloudç›¸å…³é…ç½®</h2>

<p>è¯„è®ºç³»ç»Ÿä¾èµ–äºleancloudï¼Œæ‰€ä»¥éœ€è¦å…ˆåœ¨leancloudä¸­è¿›è¡Œç›¸å…³çš„å‡†å¤‡å·¥ä½œã€‚</p>

<ul>
<li><a href="https://leancloud.cn/dashboard/login.html#/signin" target="_blank">ç™»å½•</a> æˆ– <a href="https://leancloud.cn/dashboard/login.html#/signup" target="_blank">æ³¨å†Œ</a> LeanCloud</li>
<li>ç™»å½•æˆåŠŸåï¼Œè¿›å…¥åå°ç‚¹å‡»å·¦ä¸Šè§’çš„åˆ›å»ºåº”ç”¨ï¼š
<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180708153104380829479.png" width="80%"/> 
</figure>
</li>
<li>åˆ›å»ºå¥½åº”ç”¨ï¼Œè¿›å…¥åº”ç”¨ï¼Œå·¦è¾¹æ æ‰¾åˆ° <strong>è®¾ç½®</strong> ï¼Œç„¶åç‚¹å‡» <strong>åº”ç”¨Key</strong>ï¼Œæ­¤æ—¶è®°å½•å‡ºç°çš„ <strong>App ID</strong> å’Œ <strong>App Key</strong>ï¼Œåé¢é…ç½®æ–‡ä»¶ä¸­ä¼šç”¨åˆ°ï¼š
<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180708153104457148134.png"/> 
</figure>
</li>
<li>å› ä¸ºè¯„è®ºå’Œæ–‡ç« é˜…è¯»æ•°ç»Ÿè®¡ä¾èµ–äºå­˜å‚¨ï¼Œæ‰€ä»¥è¿˜éœ€è¦å»ºç«‹ä¸¤ä¸ªæ–°çš„å­˜å‚¨ <code>Class</code>ï¼Œå·¦è¾¹æ æ‰¾åˆ°å¹¶ç‚¹å‡» <strong>å­˜å‚¨</strong>ï¼Œç‚¹å‡» <strong>åˆ›å»ºClass</strong>:
<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180708153104475972323.png" width="80%"/> 
</figure>
</li>
<li>åˆ›å»ºä¸¤ä¸ªå­˜å‚¨Classï¼Œåˆ†åˆ«å‘½åä¸º: <code>Counter</code> å’Œ <code>Comment</code>;</li>
<li>è¿˜éœ€è¦ä¸ºåº”ç”¨æ·»åŠ å®‰å…¨åŸŸåï¼Œå·¦è¾¹æ ç‚¹å‡» <strong>è®¾ç½®</strong>ï¼Œæ‰¾åˆ° <strong>å®‰å…¨ä¸­å¿ƒ</strong>ï¼Œç‚¹å‡»åä¼šçœ‹åˆ° <strong>å®‰å…¨åŸŸå</strong> è®¾ç½®æ¡†ï¼Œè¾“å…¥åšå®¢ä½¿ç”¨çš„åŸŸåï¼Œç‚¹å‡»ä¿å­˜å³å¯ï¼š
<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180708153104592457270.png"/> 
</figure>
</li>
</ul>

<h2 id="config-tomlæ·»åŠ å‚æ•°">config.tomlæ·»åŠ å‚æ•°</h2>

<p>ä¸ºäº†ä½¿é…ç½®æ›´çµæ´»ï¼Œå°† <strong>Valine</strong> ä¸­å¤§éƒ¨åˆ†åˆå§‹åŒ–å‚æ•°é¡¹å‡è®¾ç½®ä¸ºé…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°é¡¹ï¼Œåœ¨ <strong>config.toml</strong> çš„é€‚å½“ä½ç½®ï¼Œæ¯”å¦‚æˆ‘çš„æ–‡ä»¶ä¸­ <strong>[params.gitment]</strong> çš„ä¸‹é¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml">  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">gitment</span><span class="p">]</span>          <span class="c"># Gitment is a comment system based on GitHub issues. see https://github.com/imsun/gitment</span>
    <span class="nx">owner</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>              <span class="c"># Your GitHub ID</span>
    <span class="nx">repo</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>               <span class="c"># The repo to store comments</span>
    <span class="nx">clientId</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>           <span class="c"># Your client ID</span>
    <span class="nx">clientSecret</span> <span class="p">=</span> <span class="s2">&#34;&#34;</span>       <span class="c"># Your client secret</span>

  <span class="c"># è¿™é‡Œæ·»åŠ Valineçš„ç›¸å…³å‚æ•°</span></code></pre></div>
<p>æ·»åŠ  <strong>Valine</strong> å‚æ•°é¡¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-toml" data-lang="toml">  <span class="c"># Valine.</span>
  <span class="c"># You can get your appid and appkey from https://leancloud.cn</span>
  <span class="c"># more info please open https://valine.js.org</span>
  <span class="p">[</span><span class="nx">params</span><span class="p">.</span><span class="nx">valine</span><span class="p">]</span>
    <span class="nx">enable</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="nx">appId</span> <span class="p">=</span> <span class="s1">&#39;ä½ çš„appId&#39;</span>
    <span class="nx">appKey</span> <span class="p">=</span> <span class="s1">&#39;ä½ çš„appKey&#39;</span>
    <span class="nx">notify</span> <span class="p">=</span> <span class="kc">false</span>  <span class="c"># mail notifier , https://github.com/xCss/Valine/wiki</span>
    <span class="nx">verify</span> <span class="p">=</span> <span class="kc">false</span> <span class="c"># Verification code</span>
    <span class="nx">avatar</span> <span class="p">=</span> <span class="s1">&#39;mm&#39;</span> 
    <span class="nx">placeholder</span> <span class="p">=</span> <span class="s1">&#39;è¯´ç‚¹ä»€ä¹ˆå§...&#39;</span>
    <span class="nx">visitor</span> <span class="p">=</span> <span class="kc">true</span></code></pre></div>
<p>ä¸Šé¢å‡ é¡¹å†…å®¹çš„å«ä¹‰ï¼Œè¿™é‡Œç®€å•ä¸€è¯´ï¼Œå…·ä½“è¿˜æ˜¯è¦çœ‹ <a href="https://valine.js.org/configuration.html" target="_blank">Valineå®˜ç½‘ä¸­é…ç½®ç›¸å…³çš„å†…å®¹</a>ï¼š</p>

<table>
<thead>
<tr>
<th align="center">å‚æ•°</th>
<th align="left">ç”¨é€”</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">enable</td>
<td align="left">è¿™æ˜¯ç”¨äºä¸»é¢˜ä¸­é…ç½®çš„ï¼Œä¸æ˜¯å®˜æ–¹Valineçš„å‚æ•°ï¼Œ<strong>true</strong>æ—¶æ§åˆ¶å¼€å¯æ­¤è¯„è®ºç³»ç»Ÿ</td>
</tr>

<tr>
<td align="center">appId</td>
<td align="left">è¿™æ˜¯åœ¨ <a href="https://leancloud.cn/" target="_blank">leancloud</a> åå°åº”ç”¨ä¸­è·å–çš„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„ <strong>App ID</strong></td>
</tr>

<tr>
<td align="center">appKey</td>
<td align="left">è¿™æ˜¯åœ¨ <a href="https://leancloud.cn/" target="_blank">leancloud</a> åå°åº”ç”¨ä¸­è·å–çš„ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æåˆ°çš„ <strong>App Key</strong></td>
</tr>

<tr>
<td align="center">notify</td>
<td align="left">ç”¨äºæ§åˆ¶æ˜¯å¦å¼€å¯é‚®ä»¶é€šçŸ¥åŠŸèƒ½ï¼Œå…·ä½“å‚è€ƒ<a href="https://github.com/xCss/Valine/wiki/Valine-è¯„è®ºç³»ç»Ÿä¸­çš„é‚®ä»¶æé†’è®¾ç½®" target="_blank">é‚®ä»¶æé†’é…ç½®</a></td>
</tr>

<tr>
<td align="center">verify</td>
<td align="left">ç”¨äºæ§åˆ¶æ˜¯å¦å¼€å¯è¯„è®ºéªŒè¯ç åŠŸèƒ½</td>
</tr>

<tr>
<td align="center">avatar</td>
<td align="left">ç”¨äºé…ç½®è¯„è®ºé¡¹ä¸­ç”¨æˆ·å¤´åƒæ ·å¼ï¼Œæœ‰å¤šç§é€‰æ‹©ï¼šmm, identicon, monsterid, wavatar, retro, hideã€‚è¯¦ç»†å‚è€ƒï¼š<a href="https://valine.js.org/avatar.html" target="_blank">å¤´åƒé…ç½®</a></td>
</tr>

<tr>
<td align="center">placehoder</td>
<td align="left">è¯„è®ºæ¡†çš„æç¤ºç¬¦</td>
</tr>

<tr>
<td align="center">visitor</td>
<td align="left">æ§åˆ¶æ˜¯å¦å¼€å¯æ–‡ç« é˜…è¯»æ•°çš„ç»Ÿè®¡åŠŸèƒ½i, è¯¦æƒ…é˜…è¯»<a href="https://valine.js.org/visitor.html" target="_blank">æ–‡ç« é˜…è¯»æ•°ç»Ÿè®¡</a></td>
</tr>
</tbody>
</table>

<h2 id="ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶">ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶</h2>

<p>ä¸»è¦æ˜¯ä¿®æ”¹ä¸»é¢˜ä¸­è¯„è®ºç›¸å…³çš„å¸ƒå±€æ–‡ä»¶ <code>themes/even/layouts/partials/comments.html</code>ï¼ŒæŒ‰ç…§ <a href="https://valine.js.org/quickstart.html" target="_blank">Valineå¿«é€Ÿå¼€å§‹</a> æ·»åŠ  <strong>Valine</strong> ç›¸å…³ä»£ç ï¼Œæ‰¾åˆ°ä»¥ä¸‹ä½ç½®ï¼Œå¤§æ¦‚55ï½81è¡Œçš„ä½ç½®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">  <span class="c">&lt;!-- gitment --&gt;</span>
  {{- if .Site.Params.gitment.enable -}}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;comments-gitment&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="c">&lt;!--è¿™é‡Œçœç•¥äº†éƒ¨åˆ†ä»£ç --&gt;</span>
  <span class="p">&lt;</span><span class="nt">noscript</span><span class="p">&gt;</span>Please enable JavaScript to view the <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://github.com/imsun/gitment&#34;</span><span class="p">&gt;</span>comments powered by gitment.<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">noscript</span><span class="p">&gt;</span>
  {{- end }}

  <span class="c">&lt;!--è¿™ä¸ªä½ç½®æ·»åŠ Valineç›¸å…³ä»£ç --&gt;</span></code></pre></div>
<p>æ·»åŠ çš„ <strong>Valine</strong> è¯„è®ºçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">  <span class="c">&lt;!-- valine --&gt;</span>
  {{- if .Site.Params.valine.enable -}}
  <span class="c">&lt;!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ --&gt;</span>
  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;{{ .URL | relURL }}&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;leancloud_visitors&#34;</span> <span class="na">data-flag-title</span><span class="o">=</span><span class="s">&#34;{{ .Title }}&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;post-meta-item-text&#34;</span><span class="p">&gt;</span>æ–‡ç« é˜…è¯»é‡ <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;leancloud-visitors-count&#34;</span><span class="p">&gt;</span>1000000<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;vcomments&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;//cdn1.lncld.net/static/js/3.0.4/av-min.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;//unpkg.com/valine/dist/Valine.min.js&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p">&gt;</span>
    <span class="k">new</span> <span class="nx">Valine</span><span class="p">({</span>
        <span class="nx">el</span><span class="o">:</span> <span class="s1">&#39;#vcomments&#39;</span> <span class="p">,</span>
        <span class="nx">appId</span><span class="o">:</span> <span class="s1">&#39;{{ .Site.Params.valine.appId }}&#39;</span><span class="p">,</span>
        <span class="nx">appKey</span><span class="o">:</span> <span class="s1">&#39;{{ .Site.Params.valine.appKey }}&#39;</span><span class="p">,</span>
        <span class="nx">notify</span><span class="o">:</span> <span class="p">{{</span> <span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">valine</span><span class="p">.</span><span class="nx">notify</span> <span class="p">}},</span> 
        <span class="nx">verify</span><span class="o">:</span> <span class="p">{{</span> <span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">valine</span><span class="p">.</span><span class="nx">verify</span> <span class="p">}},</span> 
        <span class="nx">avatar</span><span class="o">:</span><span class="s1">&#39;{{ .Site.Params.valine.avatar }}&#39;</span><span class="p">,</span> 
        <span class="nx">placeholder</span><span class="o">:</span> <span class="s1">&#39;{{ .Site.Params.valine.placeholder }}&#39;</span><span class="p">,</span>
        <span class="nx">visitor</span><span class="o">:</span> <span class="p">{{</span> <span class="p">.</span><span class="nx">Site</span><span class="p">.</span><span class="nx">Params</span><span class="p">.</span><span class="nx">valine</span><span class="p">.</span><span class="nx">visitor</span> <span class="p">}}</span>
    <span class="p">});</span>
  <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  {{- end }}</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ä¸Šè¿°ä»£ç ä¸­å¼•ç”¨äº†é…ç½®æ–‡ä»¶ä¸­çš„ç›¸å…³å‚æ•°ï¼Œè¿™æ ·ä»¥åä¿®æ”¹é…ç½®å°±ä¸ç”¨ä¿®æ”¹ä»£ç äº†ï¼Œåªéœ€è¦æ”¹é…ç½®æ–‡ä»¶ <code>config.toml</code>ï¼Œå¦å¤–æ³¨æ„åˆ°çš„æ˜¯ï¼Œæˆ‘ä¹Ÿæ·»åŠ äº†æ–‡ç« é˜…è¯»æ•°ç»Ÿè®¡çš„æ˜¾ç¤ºå†…å®¹ã€‚å°†é…ç½®æ–‡ä»¶ä¸­ <strong>valine</strong> é…ç½®çš„ <code>eanble</code> è®¾ç½®ä¸º <code>true</code> ï¼Œæœ¬åœ°æµ‹è¯•ä¸€ä¸‹ï¼Œæ­£å¸¸çš„è¯ï¼Œæ‰“å¼€ä¸€ç¯‡æ–‡ç« ä¼šçœ‹åˆ°ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180708153104555886981.png"/> 
</figure>


<p>æ­¤æ—¶ï¼Œç”Ÿæˆé™æ€åšå®¢æ–‡ä»¶ï¼Œéƒ¨ç½²åˆ°è‡ªå·±çš„æ‰˜ç®¡å¹³å°ï¼Œæ­£å¸¸çš„è¯æ‰“å¼€åšå®¢ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œå°±å¯ä»¥çœ‹åˆ°æ­£å¸¸çš„æ–‡ç« è®¡æ•°å’Œè¯„è®ºæ¡†äº†ï¼Œæ­¤æ—¶éšä¾¿è¯„è®ºä¸€æ¡ï¼ŒéªŒè¯ä¸€ä¸‹ï¼Œè¯„è®ºå¦‚æœæˆåŠŸï¼Œå¯ä»¥å»leancloudåå°çœ‹ä¸€ä¸‹ <code>Comment</code> å’Œ <code>Counter</code>å­˜å‚¨ä¸­æ–°åŠ äº†ç›¸åº”ç½‘å€çš„æ¡ç›®ã€‚</p>

<h2 id="å®Œå–„è¯„è®ºé€šçŸ¥">å®Œå–„è¯„è®ºé€šçŸ¥</h2>

<p><strong>Valine</strong> è¯„è®ºé‚®ä»¶æé†’åŠŸèƒ½ä¸å¤ªå¥å…¨ï¼Œé€šçŸ¥é‚®ä»¶ä¸­æ²¡æœ‰æ–‡ç« ç›´è¾¾é“¾æ¥ï¼Œ<strong>Valine</strong> å®˜ç½‘ä¸­æä¾›äº†è¯„è®ºç³»ç»Ÿç¬¬ä¸‰æ–¹åŠŸèƒ½æ‰©å±•<a href="https://github.com/zhaojun1998/Valine-Admin" target="_blank">Valine</a>é“¾æ¥ï¼ŒæŒ‰ç…§é“¾æ¥ä¸­çš„è¯´æ˜ï¼Œéå¸¸è¯¦ç»†çš„æ­¥éª¤ï¼Œä¸€æ­¥æ­¥å¾ˆå®¹æ˜“å®ç°å®Œå¤‡çš„è¯„è®ºç³»ç»Ÿåå°ç®¡ç†ä»¥åŠé‚®ä»¶æé†’åŠŸèƒ½ï¼Œéƒ¨åˆ†é«˜çº§é…ç½®<a href="https://github.com/zhaojun1998/Valine-Admin/blob/master/é«˜çº§é…ç½®.md#è‡ªå®šä¹‰é‚®ä»¶æœåŠ¡å™¨" target="_blank">ç‚¹æˆ‘</a>äº†è§£ï¼Œè¿™é‡Œç®€å•åˆ—ä¸¾æ­¥éª¤å¦‚ä¸‹ï¼š</p>

<ul>
<li>è¿›å…¥leancloudåå°ç›¸å…³åº”ç”¨ï¼Œ<strong>äº‘å¼•æ“</strong> ä¸­éƒ¨ç½²é“¾æ¥ä¸­å¯¹åº”çš„ä»£ç ï¼›</li>
<li>æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ï¼›</li>
<li><strong>äº‘å¼•æ“</strong> â€”â€” <strong>è®¾ç½®</strong> â€”â€” <strong>Webä¸»æœºåŸŸå</strong>ï¼Œç„¶åè¿›å…¥ <strong>å­˜å‚¨</strong> â€”â€” <strong>_User</strong> æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œåªéœ€ Userï¼Œpasswordï¼Œemail ä¸‰ä¸ªä¿¡æ¯å³å¯ï¼Œä¸ºäº†å®‰å…¨emailå¿…é¡»æ˜¯ç¬¬äºŒæ­¥ä¸­è®¾ç½®çš„å‘é€é‚®ç®± <strong>SMTP_USER</strong> æˆ–ç«™é•¿é‚®ç®± <strong>TO_EMAIL</strong>;æ­¤æ—¶å¯ä»¥ä½¿ç”¨å®šä¹‰çš„ä¸»æœºåŸŸåç™»å½•åå°ç®¡ç†ç³»ç»Ÿäº†ï¼Œç”¨æˆ·åä¸ºåˆšè®¾ç½®çš„é‚®ç®±ï¼›</li>
<li>LeanCloud ä¼‘çœ ç­–ç•¥çš„è¯ï¼Œæˆ‘è‡ªå·±æœ‰ä¸€ä¸ªVPSï¼Œæ‰€ä»¥åœ¨VPSä¸­è®¾ç½®äº†å®šæ—¶ä»»åŠ¡å»å”¤é†’æˆ‘çš„leancloudåº”ç”¨ï¼Œè¿œç¨‹ç™»å½•VPSç³»ç»Ÿï¼Œæ‰§è¡Œå‘½ä»¤<code>crontab -e</code> å³å¯ä½¿ç”¨vimç¼–è¾‘ä»»åŠ¡ï¼Œå¡«å…¥å†…å®¹<code>*/20 7-23 * * * curl https://ä½ é…ç½®çš„åŸŸåå‰ç¼€.leanapp.cn</code>ï¼Œä»»åŠ¡ä¸­æ›¿æ¢è‡ªå·±çš„ä¸»æœºåŸŸåï¼Œä¿å­˜å³å¯ç”Ÿæ•ˆï¼›</li>
</ul>

<p>ç™»å½•ä¸Šé¢ä¸»æœºåŸŸåè¿›å…¥åå°ç…ä¸€ç…ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018070815310476526255.png" width="480"/> 
</figure>


<p>æˆ‘è‡ªå·±æ²™å‘äº†ä¸€æ¡è¯„è®ºï¼Œè¿›å…¥åå°åå¯ä»¥çœ‹åˆ°ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180708153104781462098.png"/> 
</figure>


<p>åŒæ—¶ï¼Œæˆ‘ä¹Ÿæ”¶åˆ°äº†é€šçŸ¥é‚®ä»¶ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180708153104796086245.png"/> 
</figure>


<p>è‡³æ­¤å®Œæˆäº† <strong>Valine</strong> è¯„è®ºç³»ç»Ÿçš„æ·»åŠ å’Œå®Œå–„ï¼Œå–æ¯å’–å•¡â˜•ï¸åº†ç¥ä¸€ä¸‹ï¼</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
<li><a href="https://valine.js.org" target="_blank">Valine</a></li>
<li><a href="https://github.com/zhaojun1998/Valine-Admin" target="_blank">Valine-Admin</a></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>hexoåšå®¢è¿ç§»åˆ°hugo</title>
			<link>https://www.smslit.top/2018/07/07/hexo2hugo/</link>
			<pubDate>Sat, 07 Jul 2018 21:31:38 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/07/hexo2hugo/</guid>
			<description>&lt;p&gt;å‰æ®µæ—¶é—´äº†è§£äº†ä¸€ä¸‹ &lt;a href=&#34;https://gohugo.io&#34; target=&#34;_blank&#34;&gt;hugo&lt;/a&gt;ï¼Œå‘ç°äº†å…¶ä¸€ä¸ªéå¸¸çªå‡ºçš„ä¼˜ç‚¹ï¼Œé‚£å°±æ˜¯å¿«ï¼Œæ®è¯´&lt;strong&gt;5000ç¯‡æ–‡ç« æ¸²æŸ“åªéœ€è¦6sçš„æ—¶é—´&lt;/strong&gt;ã€‚é˜…è¯»å®˜æ–¹æ–‡æ¡£è¿›ä¸€æ­¥äº†è§£äº†ä¸€ä¸‹ï¼Œä½¿ç”¨ä¸Šä¸hexoæ¨¡å¼ç±»ä¼¼ï¼ŒåŠ ä¸Šä¹Ÿæœ‰éå¸¸å¤šçš„ä¸»é¢˜ï¼Œå†è€ƒè™‘åˆ°åæœŸæ–‡ç« ä¼šä¸æ–­å¢å¤šï¼Œå†³å®šæ”¾å¼ƒhexoä½¿ç”¨hugoï¼Œæ¯•ç«Ÿç°åœ¨90+ç¯‡æ–‡ç« ï¼Œhexoæ¸²æŸ“ä¸€éç«Ÿç„¶éœ€è¦8s+ï¼Œå”èƒ½å¿ï¼Œå“¥ä¸èƒ½å¿ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´äº†è§£äº†ä¸€ä¸‹ <a href="https://gohugo.io" target="_blank">hugo</a>ï¼Œå‘ç°äº†å…¶ä¸€ä¸ªéå¸¸çªå‡ºçš„ä¼˜ç‚¹ï¼Œé‚£å°±æ˜¯å¿«ï¼Œæ®è¯´<strong>5000ç¯‡æ–‡ç« æ¸²æŸ“åªéœ€è¦6sçš„æ—¶é—´</strong>ã€‚é˜…è¯»å®˜æ–¹æ–‡æ¡£è¿›ä¸€æ­¥äº†è§£äº†ä¸€ä¸‹ï¼Œä½¿ç”¨ä¸Šä¸hexoæ¨¡å¼ç±»ä¼¼ï¼ŒåŠ ä¸Šä¹Ÿæœ‰éå¸¸å¤šçš„ä¸»é¢˜ï¼Œå†è€ƒè™‘åˆ°åæœŸæ–‡ç« ä¼šä¸æ–­å¢å¤šï¼Œå†³å®šæ”¾å¼ƒhexoä½¿ç”¨hugoï¼Œæ¯•ç«Ÿç°åœ¨90+ç¯‡æ–‡ç« ï¼Œhexoæ¸²æŸ“ä¸€éç«Ÿç„¶éœ€è¦8s+ï¼Œå”èƒ½å¿ï¼Œå“¥ä¸èƒ½å¿ï¼</p>

<p>æœ¬æ–‡ä¸æ˜¯æ•™ç¨‹ï¼Œåªæ˜¯è®°å½•è¿‡ç¨‹ï¼æ˜¯çš„ï¼Œè¿™å°±æ˜¯ä¸€æ°´æ–‡ï¼Œxxçš„æµæ°´è´¦ï¼</p>

<h2 id="hugo">Hugo</h2>

<blockquote>
<p>Hugo is a fast and modern static site generator written in Go, and designed to make website creation fun again.</p>

<p>@Hugo <a href="https://gohugo.io/about/what-is-hugo/" target="_blank">What is Hugo</a></p>
</blockquote>

<p>Hugoæ˜¯Goè¯­è¨€å®ç°çš„ï¼Œè¿™å¯èƒ½å°±æ˜¯å…¶åšåˆ°ç¥é€Ÿçš„åŸå› ã€‚</p>

<h3 id="å®‰è£…">å®‰è£…</h3>

<p>Hugoä¸ä¾èµ–ä»»ä½•è¿è¡Œåº“å’Œç¨‹åºï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´ç‹¬ç«‹çš„è¿è¡Œç¨‹åºã€‚åœ¨macOSä¸‹å®‰è£…å¾ˆç®€å•ï¼Œä½¿ç”¨homebrewå°±å¯ä»¥è½»æ¾å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">brew install hugo</code></pre></div>
<p>å®‰è£…å®Œæˆå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ç‰ˆæœ¬å·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">hugo version</code></pre></div>
<h3 id="åˆ›å»ºç«™ç‚¹">åˆ›å»ºç«™ç‚¹</h3>

<p>ä¸‹é¢å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„åšå®¢ç«™ç‚¹ï¼Œæˆ‘ç»§ç»­å«smslitï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">hugo new site smslit
<span class="nb">cd</span> smslit
ls -l</code></pre></div>
<p>æ­¤æ—¶ä¼šçœ‹åˆ°å‡ºç°æ–°çš„ç›®å½• <code>smslit</code> ï¼Œè¿›å…¥æ­¤ç›®å½•ä¼šçœ‹åˆ°å¦‚ä¸‹æ–‡ä»¶ç»“æ„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180707153097244537665.png" alt="20180707153097244537665.png" /></p>

<p>ä¸Šé¢æ–‡ä»¶åŠç›®å½•ä¸hexoåšå®¢çš„å¯¹åº”å…³ç³»æ˜¯ï¼š</p>

<table>
<thead>
<tr>
<th align="center">hugoç›®å½•</th>
<th align="center">hexoç›®å½•</th>
<th align="left">ä½œç”¨</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">content</td>
<td align="center">source</td>
<td align="left">å­˜å‚¨åšæ–‡çš„mdæ–‡ä»¶ï¼Œhexoä¸­çš„_post,_draft,å„è‡ªå®šä¹‰çš„é¡µé¢ç›®å½•å…¶å®å¯¹åº”åˆ°hugoä¸­çš„è¯ï¼Œéƒ½æ˜¯åœ¨contentä¸‹çš„</td>
</tr>

<tr>
<td align="center">config.toml</td>
<td align="center"><strong>_config.yaml</strong></td>
<td align="left">ç”¨äºé…ç½®ç«™ç‚¹ä¸­å„é¡¹å‚æ•°</td>
</tr>

<tr>
<td align="center">themes</td>
<td align="center">themes</td>
<td align="left">å­˜æ”¾ä¸»é¢˜</td>
</tr>

<tr>
<td align="center">static</td>
<td align="center">source</td>
<td align="left">hugoä¸­çš„staticç›®å½•ä¸­å­˜æ”¾ä¸€äº›å¸¸è§„é™æ€æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯åšå®¢ä¸­å¼•ç”¨çš„å›¾ç‰‡ã€æ–‡ä»¶ä¹Ÿå¯ä»¥æ˜¯è‡ªæ·»åŠ çš„ä»»æ„æ–‡ä»¶ï¼Œæœ€ç»ˆæ¸²æŸ“éƒ½ä¼šæ”¾åˆ°ç«™ç‚¹çš„æ ¹ç›®å½•</td>
</tr>

<tr>
<td align="center">public</td>
<td align="center">public</td>
<td align="left">å­˜æ”¾æ¸²æŸ“åçš„ç«™ç‚¹é™æ€æ–‡ä»¶</td>
</tr>

<tr>
<td align="center">layout</td>
<td align="center">æ— </td>
<td align="left">å­˜æ”¾è‡ªå®šä¹‰çš„æ ·å¼å¸ƒå±€æ–‡ä»¶ï¼Œä¼˜å…ˆçº§é«˜äºä¸»é¢˜ä¸­çš„åŒåæ–‡ä»¶ï¼Œæ–¹ä¾¿ä¿®æ”¹ä¸»é¢˜æ ·å¼</td>
</tr>
</tbody>
</table>

<h4 id="ä¸»é¢˜">ä¸»é¢˜</h4>

<p>æˆ‘é€‰æ‹©äº† <a href="https://github.com/olOwOlo/hugo-theme-even" target="_blank">Even</a>ä¸»é¢˜ï¼Œå®‰è£…å¾ˆç®€å•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">git clone https://github.com/olOwOlo/hugo-theme-even themes/even
cp themes/even/exampleSite/config.toml .</code></pre></div>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œä¸»è¦æ˜¯æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œå®šåˆ¶å’Œä¿®æ”¹ï¼š</p>

<ul>
<li>ä¿®æ”¹èœå•æ é¡¹ä¸åŸhexoåšå®¢ä¸­çš„ä¸€è‡´ï¼›</li>
<li>ä¿®æ”¹ç›¸åº”çš„ç¤¾äº¤ç½‘ç»œé“¾æ¥ï¼›</li>
<li>ä½¿èƒ½gitment</li>
</ul>

<p>&hellip;</p>

<p>æ‰§è¡Œå‘½ä»¤ï¼Œæ¸²æŸ“ç«™ç‚¹å¹¶åœ¨æœ¬åœ°éƒ¨ç½²ï¼š</p>
<div class="highlight"><pre class="chroma">hugo server</pre></div>
<p>æ‰“å¼€é“¾æ¥ <a href="127.0.0.1:1313" target="_blank">127.0.0.1:1313</a>ï¼Œçœ‹åˆ°äº†é™æ€åšå®¢çš„æ ·å­ï¼Œç‚¹ç‚¹å„é¡¹é“¾æ¥ï¼Œä¸æ­£ç¡®çš„ç›¸åº”è°ƒæ•´ã€‚</p>

<h4 id="æ–°å»ºæ–‡ç« ">æ–°å»ºæ–‡ç« </h4>

<p>ä½¿ç”¨ä¸»é¢˜ä¸€å®šè¦çœ‹ä¸€ä¸‹ä¸»é¢˜ä¸­çš„æ ·ä¾‹ç«™ç‚¹ï¼Œæ–‡ç« å†…å®¹ç®¡ç†æ–¹å¼è¦ä¸æ ·ä¾‹ä¸€è‡´ï¼Œæ‰€ä»¥æŸ¥çœ‹ <code>themes/even/exampleSite/content</code>ä¸­çš„ç›®å½•ï¼Œæˆ‘æ˜¯ç›´æ¥cpè¿‡æ¥çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">cp -r themes/even/exampleSite/content/* content</code></pre></div>
<p>åˆ æ‰postä¸­çš„æ–‡ç« ï¼Œç„¶åæ–°å»ºäº†ä¸é…ç½®æ–‡ä»¶ä¸­èœå•æ ä¸€è‡´çš„ç›®å½•ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„index.mdæ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  smslit tree content
content
â”œâ”€â”€ about
â”‚Â Â  â””â”€â”€ index.md
â”œâ”€â”€ drip
â”‚Â Â  â””â”€â”€ index.md
â””â”€â”€ post</code></pre></div>
<p>å°† <code>about/index.md</code>(å¯¹åº”èœå•é¡¹â€”â€”å…³äº) å’Œ <code>drip/index.md</code>(å¯¹åº”èœå•é¡¹â€”â€”æœ­è®°) å†…å®¹æ›´æ”¹ä¸ºhexoåšå®¢ä¸­ç›¸åº”æ–‡ä»¶çš„å†…å®¹ï¼Œè°ƒæ•´å†…å®¹ä¸­çš„ä¸å…¼å®¹æ ‡ç­¾é¡¹ã€‚</p>

<p>ä½¿ç”¨å‘½ä»¤æ–°å»ºä¸€ç¯‡åšæ–‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  smslit hugo new post/hello.md</code></pre></div>
<p>æ­¤æ—¶ï¼Œæœ¬åœ°éƒ¨ç½²æŸ¥çœ‹åšå®¢ï¼Œå‘ç°èœå•é¡¹<strong>å…³äº</strong>å’Œ<strong>æœ­è®°</strong>æ­£å¸¸æ˜¾ç¤ºå†…å®¹ï¼Œä½†æ˜¯æ²¡æœ‰å‘ç°æ–°åŠ çš„æ–‡ç« ã€‚</p>

<p>æ‰“å¼€æ–‡ä»¶ï¼Œä¼šå‘ç°å¤´ä¿¡æ¯ä¸­æœ‰ä¸€é¡¹ <code>draft</code> å€¼ä¸º <code>true</code>ï¼Œè¯´æ˜æ–°å»ºçš„æ–‡ä»¶å½’ä¸ºè‰ç¨¿ï¼ŒåŸæ¥æ˜¯hugoéƒ¨ç½²å’Œç”Ÿæˆé™æ€ç«™ç‚¹æ–‡ä»¶çš„æ—¶å€™ä¼šæ ¹æ®mdæ–‡ä»¶ä¸­çš„ <code>draft</code> å€¼æ¥åˆ¤æ–­æ˜¯å¦æ¸²æŸ“ï¼Œæ²¡æœ‰æ­¤é¡¹å†…å®¹è®¤ä¸ºæ˜¯ <code>false</code> ,ä¹Ÿå°±æ˜¯æ·»åŠ æ¸²æŸ“ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥å°† <code>draft</code>é¡¹çš„å€¼æ”¹ä¸º <code>false</code> æˆ–è€…ç›´æ¥åˆ æ‰ï¼Œå†æ¬¡å°è¯•éƒ¨ç½²ï¼Œå¯ä»¥åœ¨ <a href="127.0.0.1:1313" target="_blank">127.0.0.1:1313</a>ä¸­çœ‹åˆ°æ–°åŠ çš„æ–‡ç« ã€‚</p>

<h2 id="è¿ç§»åšæ–‡">è¿ç§»åšæ–‡</h2>

<p>è¿ç§»åšæ–‡ä¸»è¦é¢ä¸´ä¸¤ä¸ªé—®é¢˜ï¼š</p>

<ul>
<li>mdæ–‡ä»¶å¤´ä¿¡æ¯(Front Matter)æ ¼å¼æœ‰åŒºåˆ«ï¼›</li>
<li>hexoå’Œhugoçš„éƒ¨åˆ†æ ‡ç­¾è¯­è¨€ä¸å…¼å®¹ï¼Œæ¯”å¦‚hexoçš„<code>{% image %}</code>ï¼›</li>
</ul>

<h3 id="æ–‡ç« å¤´ä¿¡æ¯">æ–‡ç« å¤´ä¿¡æ¯</h3>

<p>åœ¨hugoä¸­æ–‡ä»¶çš„å¤´ä¿¡æ¯æœ‰ä¸‰ç§æ ¼å¼å¯é€‰ï¼šyamlã€tomlå’Œjsonã€‚è¿™ä¸ªå¯ä»¥åœ¨ <code>config.toml</code>ä¸­é…ç½®ï¼Œä¸ºäº†è¿ç§»æ–¹ä¾¿ï¼Œæ‰€ä»¥é€‰æ‹©äº†hexoä¸­åšæ–‡ä½¿ç”¨çš„yamlæ ¼å¼ã€‚æ€»ç»“åšæ–‡ä¸å…¼å®¹ç‚¹å¦‚ä¸‹ï¼š</p>

<ul>
<li>æ–‡ä»¶åï¼Œåœ¨hugoä¸­ä¸ç”¨åŒ…å«æ—¥æœŸï¼›</li>
<li>ä¸åŒ…å«<strong>layout</strong>é¡¹ï¼›</li>
<li>hugoä¸­<strong>date</strong>é¡¹çš„æ ¼å¼æ˜¯ï¼š<strong>2018-07-05T00:00:00+08:00</strong></li>
<li>hugoä¸­<strong>tags</strong>å’Œ<strong>categories</strong>çš„æ ¼å¼æœ‰ä¸¤ç§ï¼Œä¸å…¼å®¹hexoä¸­å¤šæ ‡ç­¾æ—¶åªä½¿ç”¨<code>,</code>åˆ†éš”çš„æ–¹å¼ï¼›</li>
</ul>

<p>æ ¹æ®ä¸Šè¿°å››é¡¹çš„ä¸åŒï¼Œç¼–å†™äº†pythonè„šæœ¬æ‰¹é‡å¤„ç†æ–‡ç« ï¼š<a href="https://github.com/smslit/tools-with-script/blob/master/hexo2hugo/hexo2hugo.py" target="_blank">hexo2hugo.py</a></p>

<h3 id="æ ‡ç­¾è¯­è¨€ä¸å…¼å®¹">æ ‡ç­¾è¯­è¨€ä¸å…¼å®¹</h3>

<p>è¿™ä¸ªé—®é¢˜ï¼Œç”¨pythonè„šæœ¬æ‰¹å¤„ç†çš„è¯æ¯”è¾ƒä¸å€¼å¾—äº†ï¼Œæ¯”è¾ƒä½¿ç”¨ç‰¹æ®Šçš„hexoæ ‡ç­¾çš„åœ°æ–¹å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œæ‰€ä»¥ï¼Œå¯ä»¥ä½¿ç”¨grepå‘½ä»¤å¸®åŠ©å¯»æ‰¾åŒ…å« <code>{%</code>çš„mdæ–‡ä»¶ï¼Œç„¶åæ‰“å¼€ç›¸åº”æ–‡ä»¶ä¿®æ”¹ä¸ºhugoä¸‹å¯¹åº”æ ¼å¼å°±å¯ä»¥äº†ã€‚</p>

<h3 id="å…¶å®ƒé—®é¢˜">å…¶å®ƒé—®é¢˜</h3>

<p>ä¸Šé¢ä¸¤ä¸ªé—®é¢˜è§£å†³åï¼Œå°†æ–‡ç« æ”¾åˆ° <code>content/post</code>ä¸‹ï¼Œæœ¬åœ°éƒ¨ç½²æŸ¥çœ‹ï¼Œæ‰€æœ‰çš„æ–‡ç« å‡æ­£å¸¸å‡ºç°äº†ï¼Œä½†æ˜¯ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ–‡ç« åˆ—è¡¨ä¸­çš„é¢„è§ˆå†…å®¹å¹¶æ²¡æœ‰æŒ‰ç…§ <code>&lt;!--more--&gt;</code> æ ‡è®°åˆ†ç•Œæ˜¾ç¤ºï¼Œåæ¥å‘ç°åŸæ¥æ˜¯æ ‡è®°çš„æ ¼å¼ä¸å¯¹ï¼Œæ–‡ç« ä¸­çš„æ ‡è®°ä¸º <code>&lt;!-- more --&gt;</code>ï¼Œ<strong>more</strong> ä¸¤è¾¹å¤šäº†ä¸¤ä¸ªç©ºæ ¼ï¼Œhugoåªè¯†åˆ«ä¸å¸¦ç©ºæ ¼çš„ <strong>more</strong> æ ‡è®°ï¼Œä¸ºæ­¤ç¼–å†™äº†pythonè„šæœ¬<a href="https://github.com/smslit/tools-with-script/blob/master/hexo2hugo/format_more_tag.py" target="_blank">format_more_tag.py</a>è¿›è¡Œæ‰¹å¤„ç†ï¼Œè§£å†³ï¼</p>

<h2 id="å‘å¸ƒ">å‘å¸ƒ</h2>

<p>æˆ‘çš„åšå®¢æ˜¯éƒ¨ç½²åˆ°<a href="https://coding.net" target="_blank">coding</a>çš„ï¼Œå›½å†…è®¿é—®æ¯”è¾ƒå¿«ï¼Œä¸éƒ¨ç½²åˆ°githubæ— å¼‚ï¼Œä¸è¿‡æ¯”è¾ƒå¥½çš„æ˜¯ï¼Œcodingä¸­çš„pagesæœåŠ¡å¯ä»¥å¼ºåˆ¶ä½¿ç”¨<code>https</code>ï¼ŒğŸ˜ï¼hugoæ²¡æœ‰åƒhexoä¸€æ ·ä¸“é—¨çš„éƒ¨ç½²å‘½ä»¤ï¼Œæ‰€ä»¥æˆ‘ç¼–å†™äº†ä¸€ä¸ªéƒ¨ç½²è„šæœ¬ï¼Œåœ¨ä½¿ç”¨è„šæœ¬å‰éœ€è¦åšä»¥ä¸‹å·¥ä½œï¼š</p>

<ul>
<li>å°†é™æ€æ–‡ä»¶çš„ä»“åº“cloneåˆ°æœ¬åœ°ï¼Œæ¯”å¦‚åˆ°<code>~/Downloads</code>ç›®å½•ï¼Œä»“åº“ç›®å½•æœ€å¥½æ˜¯è®¾ç½®æˆéšè—ç›®å½•ï¼Œç›®å½•ååŠ ä¸ª.å³å¯ï¼›</li>
<li>è¿›å…¥<code>~/Downloads/.smslit</code>ä¸­ï¼Œåˆ æ‰æ‰€æœ‰é™¤äº†.gitçš„æ–‡ä»¶ï¼Œå°†hugoåšå®¢ä¸­publicç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶cpåˆ°<code>~/Downloads/.smslit</code>ä¸‹ï¼Œæäº¤ä¸€ä¸‹ä¿®æ”¹ï¼Œå¹¶æ¨åˆ°codingä¸­ï¼Œç­‰åˆ°codingçš„pagesæœåŠ¡å®Œæˆæ¸²æŸ“ï¼Œè®¿é—®<a href="https://www.smslit.top" target="_blank">https://www.smslit.top </a>ï¼Œå·²ç»æˆä¸ºæœ¬åœ°hugoæ¸²æŸ“çš„æ ·å­ï¼Œè¯´æ˜å·²ç»æ‰“é€šé€šé“ï¼›</li>

<li><p>åœ¨ç›®å½•<code>/usr/local/bin</code>ä¸‹åˆ›å»ºè„šæœ¬æ–‡ä»¶ <code>deploy</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="c1"># ~/smslitç›®å½•ä¸ºhugoç«™ç‚¹ç›®å½•</span>
<span class="nb">cd</span> ~/smslit

<span class="c1"># ~/Downloads/.hogoç›®å½•ä¸ºæœ¬åœ°é™æ€æ–‡ä»¶çš„gitä»“åº“</span>
cp -r ~/Downloads/.hugo/.git public

<span class="nb">echo</span> <span class="s1">&#39;Generating Web Pages...&#39;</span>
hugo

<span class="nb">cd</span> public
git add .
git commit -m <span class="s1">&#39;update pages&#39;</span>

<span class="nb">echo</span> <span class="s1">&#39;Deploy the pages&#39;</span>
git push

rm -rf ~/Downloads/.hugo/
mkdir ~/Downloads/.hugo
mv ~/smslit/public/.git ~/Downloads/.hugo/
<span class="nb">echo</span> <span class="s1">&#39;Done, have a good time!&#39;</span></code></pre></div></li>

<li><p>ä¸ºè„šæœ¬<code>/usr/local/bin/deploy</code>æ·»åŠ æ‰§è¡Œæƒé™ï¼š<code>chmod +x /usr/local/bin/deploy</code></p></li>
</ul>

<p>å®Œæˆä¸Šè¿°å·¥ä½œï¼Œé‡æ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤å°±å¯ä»¥è‡ªåŠ¨æ¸²æŸ“å¹¶æäº¤é™æ€æ–‡ä»¶ä¿®æ”¹äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">deploy</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé™æ€ç«™ç‚¹æ–‡ä»¶ç”Ÿæˆé€Ÿåº¦å¾ˆå¿«ï¼ŒåŸæ¥hexoéœ€è¦8s+ï¼Œç°åœ¨åªéœ€è¦300+ms:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">                   <span class="p">|</span> ZH-CN
+------------------+-------+
  Pages            <span class="p">|</span>   <span class="m">254</span>
  Paginator pages  <span class="p">|</span>    <span class="m">13</span>
  Non-page files   <span class="p">|</span>     <span class="m">0</span>
  Static files     <span class="p">|</span>   <span class="m">264</span>
  Processed images <span class="p">|</span>     <span class="m">0</span>
  Aliases          <span class="p">|</span>    <span class="m">73</span>
  Sitemaps         <span class="p">|</span>     <span class="m">1</span>
  Cleaned          <span class="p">|</span>     <span class="m">0</span>

Total in <span class="m">376</span> ms</code></pre></div>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p><a href="https://gohugo.io/documentation/" target="_blank">Hugo Documentation</a></p>]]></content>
		</item>
		
		<item>
			<title>pythonå®ç°å›¾ç‰‡çš„æŠ–éŸ³æ•ˆæœ</title>
			<link>https://www.smslit.top/2018/07/04/python-practice-douyin/</link>
			<pubDate>Wed, 04 Jul 2018 21:01:38 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/04/python-practice-douyin/</guid>
			<description>&lt;p&gt;å‰ä¸¤ç¯‡æ–‡ç«  &lt;a href=&#34;https://www.smslit.top/2018/07/03/affinity-photo-douyin/&#34; target=&#34;_blank&#34;&gt;Affinity Photoç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦&lt;/a&gt;  å’Œ &lt;a href=&#34;https://www.smslit.top/2018/07/03/sketch-practice-douyin/&#34; target=&#34;_blank&#34;&gt;Sketchç»ƒä¹ ç¨¿ä¹‹ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦&lt;/a&gt; ç ”ç©¶äº†å¦‚ä½•ç”¨è®¾è®¡è½¯ä»¶ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦ï¼Œæœ¬ç¯‡æ–‡ç« å°†è¯´ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨pythonå°†æ™®é€šå›¾ç‰‡å¤„ç†æˆæŠ–éŸ³æ•ˆæœï¼Œç”šè‡³åˆ¶ä½œgifåŠ¨å›¾ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å‰ä¸¤ç¯‡æ–‡ç«  <a href="/2018/07/03/affinity-photo-douyin/" target="_blank">Affinity Photoç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦</a>  å’Œ <a href="/2018/07/03/sketch-practice-douyin/" target="_blank">Sketchç»ƒä¹ ç¨¿ä¹‹ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦</a> ç ”ç©¶äº†å¦‚ä½•ç”¨è®¾è®¡è½¯ä»¶ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦ï¼Œæœ¬ç¯‡æ–‡ç« å°†è¯´ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨pythonå°†æ™®é€šå›¾ç‰‡å¤„ç†æˆæŠ–éŸ³æ•ˆæœï¼Œç”šè‡³åˆ¶ä½œgifåŠ¨å›¾ã€‚</p>

<h2 id="åŸºæœ¬åŸç†">åŸºæœ¬åŸç†</h2>

<p><a href="/2018/07/03/sketch-practice-douyin/" target="_blank">Sketchç»ƒä¹ ç¨¿ä¹‹ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦</a> ä¸­è®²è¿°äº†æŠ–éŸ³æ•ˆæœçš„åŸç†ï¼Œé¢†åŸŸå†…å¯èƒ½æœ‰äººç§°è¿™ç§æ•ˆæœä¸ºçº¢è“æº¢å‡ºæ•ˆæœã€‚æŒ‰ç…§å‰é¢æ–‡ç« ä¸­çš„æè¿°ï¼Œè¿™é‡Œä»¥ä¸€å¼ å›¾ç‰‡ä¸ºä¾‹ç®€å•å†è®²ä¸€ä¸‹åŸç†ã€‚</p>

<p>ä¸€å¼ æ­£å¸¸çš„ä½å›¾ï¼Œä¸€èˆ¬ <code>jpg</code> å›¾ç‰‡é¢œè‰²æ–¹æ¡ˆä¸º <code>RGB</code>ï¼Œè€Œ <code>png</code>å›¾ç‰‡é™¤äº† <code>RGB</code>è‰²å½©é€šé“è¿˜æœ‰ <code>A</code>é€šé“æ§åˆ¶é€æ˜ï¼Œä¸è¿‡è‰²å½©é…ç½®è¿˜æ˜¯ä¸€è‡´çš„ï¼Œä»¥æ‰‹ä¸Šçš„å›¾ç‰‡ <code>glasses.jpg</code> ä¸ºä¾‹ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180704153070171769240.jpg" alt="" /></p>

<p>å»æ‰ <code>GB</code> ä¸¤é€šé“çš„å›¾ç‰‡å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180704153070201122889.jpg" alt="" /></p>

<p>å»æ‰ <code>R</code> é€šé“çš„å›¾ç‰‡å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180704153070208255951.jpg" alt="" /></p>

<p>å¦‚æœä¹‹é—´å°†ä¸¤å¼ å›¾ä»¥ç›¸åŠ çš„æ–¹å¼è¿›è¡Œæ··åˆï¼Œå°±ä¼šå¾—åˆ°åŸå›¾ï¼Œå³ç¬¬ä¸€å¼ æ­£å¸¸çš„å›¾ç‰‡ã€‚å¦‚æœå»æ‰ <code>R</code> é€šé“çš„å›¾ç‰‡åœ¨å»æ‰ <code>GB</code> é€šé“çš„å›¾ç‰‡ä¸Šæ–¹ï¼Œå¹¶ä¸”å‘ä¸Šå’Œå‘å·¦é”™å¼€10pxï¼Œå°±ä¼šå¾—åˆ°æŠ–éŸ³æ•ˆæœçš„å›¾ç‰‡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180704153070293737860.jpg" alt="" /></p>

<h2 id="å®ç°å›¾ç‰‡æŠ–éŸ³æ•ˆæœ">å®ç°å›¾ç‰‡æŠ–éŸ³æ•ˆæœ</h2>

<p>ä½¿ç”¨python3ä¸ºå›¾ç‰‡æ·»åŠ æŠ–éŸ³æ•ˆæœ</p>

<h3 id="åº“å®‰è£…">åº“å®‰è£…</h3>

<p>éœ€è¦ç”¨åˆ°ä¸¤ä¸ªåº“ï¼Œä¸€ä¸ªæ˜¯ <strong>pillow</strong> ç”¨æ¥è¯»å†™å›¾ç‰‡æ•°æ®ï¼Œå¦ä¸€ä¸ªæ˜¯ <strong>numpy</strong> ç”¨æ¥å¤„ç†å›¾ç‰‡æ•°æ®è½¬æ¢æˆçš„çš„çŸ©é˜µæ•°æ®ï¼Œä½¿ç”¨ <strong>pip3</strong> å®‰è£…å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install pillow
pip3 install numpy</code></pre></div>
<p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œ <code>pip3 list</code> ä¼šåˆ—å‡ºå®‰è£…çš„åŒ…ï¼Œæ£€æŸ¥æ˜¯å¦å®Œæˆå®‰è£…ã€‚</p>

<h3 id="åº“çš„æ“ä½œ">åº“çš„æ“ä½œ</h3>

<h4 id="pillow">pillow</h4>

<p>æœ¬æ–‡ä¸»è¦ç”¨åˆ°åº“ä¸­çš„ <strong>Image</strong> æ¨¡å—ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span></code></pre></div>
<p>ä½¿ç”¨ <strong>Image</strong> æ¨¡å—çš„ <code>open</code> æ–¹æ³•å¯ä»¥æ‰“å¼€å›¾ç‰‡å¾—åˆ°å›¾ç‰‡åŸç”Ÿæ•°æ®ï¼Œç±»å‹ä¸º <code>PIL.JpegImagePlugin.JpegImageFile</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">image_data</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;picname.jpg&#39;</span><span class="p">)</span></code></pre></div>
<p>ä¸Šè¿°å¯¹è±¡æœ‰ä¸¤ä¸ªå¸¸ç”¨çš„æ–¹æ³•ï¼š</p>

<ul>
<li>show() : æ˜¾ç¤ºå›¾ç‰‡ï¼Œæ¯”å¦‚<code>image_data.show()</code></li>
<li>save(path): æŒ‰ç…§æŒ‡å®šè·¯å¾„ä¿å­˜å›¾ç‰‡ï¼Œæ¯”å¦‚<code>image_data.save(path)</code></li>
</ul>

<h4 id="numpy">numpy</h4>

<p>è¿™é‡Œä¸»è¦ä½¿ç”¨<strong>numpy</strong> åº“çš„çŸ©é˜µæ“ä½œï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯¹çŸ©é˜µè¿›è¡Œåˆ‡ç‰‡æ“ä½œï¼Œä¸ <strong>matlab</strong> ä¸­çš„æ“ä½œæå…¶ç±»ä¼¼ï¼Œé¦–å…ˆå¯¼å…¥åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span></code></pre></div>
<p><code>np.array()</code> æ–¹æ³•å¯ä»¥å°†ä¸Šé¢ <code>PIL.JpegImagePlugin.JpegImageFile</code> å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹çŸ©é˜µæ•°æ®ï¼Œç”Ÿæˆçš„çŸ©é˜µä¸ºä¸‰ç»´çŸ©é˜µï¼Œå‰ä¸¤ç»´åº¦ä¸ºé«˜å®½åƒç´ ç‚¹åæ ‡ï¼Œç¬¬ä¸‰ç»´åº¦ä¸º <code>RGB</code> ä¸‰é€šé“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è½¬æ¢å¾—åˆ°çš„çŸ©é˜µæ•°æ®ç±»å‹ä¸º <code>numpy.uint8</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">img_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">image_data</span><span class="p">)</span></code></pre></div>
<p>ä¸Šé¢çš„æ“ä½œå¯ä»¥é€†å‘è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯å°† <strong>img_array</strong> è½¬æ¢ä¸º <code>PIL.JpegImagePlugin.JpegImageFile</code> å¯¹è±¡ï¼Œéœ€è¦ä¾èµ–äº <strong>Image</strong> çš„å¦ä¸€ä¸ªæ–¹æ³• <code>fromarray(array)</code></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span></code></pre></div>
<p>å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨åˆ‡ç‰‡æ“ä½œå¤„ç†å›¾ç‰‡çŸ©é˜µæ•°æ®ä¸­ä¸‰ä¸ªé€šé“çš„æ•°æ®ï¼Œæ¯”å¦‚å°† <code>R</code> é€šé“çš„æ•°æ®è®¾ç½®ä¸º0:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">img_array</span><span class="p">[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span></code></pre></div>
<p>å¦å¤–è¿˜éœ€è¦ç”¨åˆ°çŸ©é˜µå¤åˆ¶çš„æ–¹æ³• <code>numpy.copy(array)</code>ï¼Œä¼šå¾—åˆ° <strong>array</strong> çš„å¤åˆ¶å¯¹è±¡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">img_other</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span></code></pre></div>
<h3 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h3>

<ul>
<li><p>å¯¼å…¥ä¸¤ä¸ªåº“</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span></code></pre></div></li>

<li><p>æ‰“å¼€æŒ‡å®šå›¾ç‰‡ï¼Œè¿™é‡Œä»¥ <code>glasses.jpg</code> ä¸ºä¾‹ï¼Œè½¬æ¢å¾—åˆ°å›¾ç‰‡çŸ©é˜µæ•°æ®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">img_data</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;glasses.jpg&#39;</span><span class="p">)</span>
<span class="n">img_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img_data</span><span class="p">)</span></code></pre></div></li>

<li><p>å¤åˆ¶å¾—åˆ°ä¸¤ä¸ªæ–°çš„çŸ©é˜µï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">img_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span>
<span class="n">img_bg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span></code></pre></div></li>

<li><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ä¿è¯å¾—åˆ°æ•°æ®ä¿å­˜åçš„å›¾ç‰‡è¿˜æ˜¯åŸå›¾ç‰‡çš„å°ºå¯¸ï¼Œè¿™é‡Œåªå¯¹æœ‰é”™ä½ç›¸åŠ éƒ¨åˆ†çš„åƒç´ ç‚¹è¿›è¡Œå»é€šé“æ“ä½œï¼Œè¿™é‡Œè®¡åˆ’å°† <strong>img_gb</strong> å‘ä¸Šå‘å·¦é”™ä½10pxï¼Œé‚£ä¹ˆåªéœ€å¤„ç† <strong>img_gb</strong> å®½å’Œé«˜çº¬åº¦ä¸Šç¬¬ 11px åˆ°æœ€åçš„åƒç´ ç‚¹çš„ <code>R</code> é€šé“æ•°æ®ä¸º0ï¼ŒåŒæ—¶ <strong>img_r</strong> å®½å’Œé«˜çº¬åº¦ä¸Šä»ç¬¬0åˆ°å€’æ•°ç¬¬11ä¸ªåƒç´ ç‚¹çš„ <code>GB</code> é€šé“æ•°æ®ä¸º0:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># å»GBä¸¤é€šé“æ•°æ®</span>
<span class="n">img_r</span><span class="p">[:</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c1"># å»é™¤Ré€šé“æ•°æ®</span>
<span class="n">img_gb</span><span class="p">[</span><span class="mi">10</span><span class="p">:,</span> <span class="mi">10</span><span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span></code></pre></div></li>

<li><p>å°†ä¸¤ä¸ªçŸ©é˜µæ•°æ®é”™ä½ç›¸åŠ ä¿å­˜åˆ° <strong>img_array</strong> ä¸­ï¼Œå³ <strong>img_r</strong> çš„ <code>[:-10,:-10,:]</code> æ•°æ®ä¸ <strong>img_gb</strong> çš„ <code>[10:, 10:, :]</code>æ•°æ®ç›¸åŠ ï¼Œèµ‹å€¼ç»™ <strong>img_array</strong> çš„ <code>[:-10, :10, :]</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">img_array</span><span class="p">[:</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">img_r</span><span class="p">[:</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="p">:]</span> <span class="o">+</span> <span class="n">img_gb</span><span class="p">[</span><span class="mi">10</span><span class="p">:,</span> <span class="mi">10</span><span class="p">:,</span> <span class="p">:]</span></code></pre></div></li>

<li><p>ä»çŸ©é˜µæ•°æ®åˆ›å»º <code>PIL.JpegImagePlugin.JpegImageFile</code> å¯¹è±¡ï¼Œå¹¶ä¿å­˜å’Œæ˜¾ç¤ºå›¾ç‰‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;glasses_douyin.jpg&#39;</span><span class="p">)</span>
<span class="n">image</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div></li>
</ul>

<p>æœ€ç»ˆå¾—åˆ°å›¾ç‰‡å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180704153070669239617.jpg" alt="20180704153070669239617.jpg" /></p>

<h2 id="åˆ›å»ºgifåŠ¨å›¾">åˆ›å»ºgifåŠ¨å›¾</h2>

<p>ä¸Šé¢æˆ‘ä»¬å®ç°äº†æ™®é€šå›¾ç‰‡æ·»åŠ æŠ–éŸ³æ•ˆæœï¼Œé‚£ä¹ˆæƒ³ä¸æƒ³çœ‹ä¸€ä¸‹é”™ä½ä¸åŒå¤§å°çš„æŠ–éŸ³æ•ˆæœçš„å˜åŒ–å‘¢ï¼Ÿå¯ä»¥åˆ›å»ºä¸åŒé”™ä½ä¸‹çš„é™æ€æŠ–éŸ³æ•ˆæœå›¾ï¼Œç„¶åç”¨é™æ€å›¾åˆ›å»ºgifåŠ¨å›¾ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œè¡ŒåŠ¨ï¼</p>

<h3 id="åº“å®‰è£…-1">åº“å®‰è£…</h3>

<p>è¿™é‡Œåˆ›å»ºgifåŠ¨å›¾ï¼Œä½¿ç”¨åˆ° <strong>imageio</strong> åº“ï¼ŒåŒæ ·å¯ä»¥ä½¿ç”¨ <strong>pip3</strong> å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install imageio</code></pre></div>
<p>ä½¿ç”¨ <strong>imageio</strong> æ¨¡å—çš„ <code>mimsave()</code> æ–¹æ³•ç”Ÿæˆ gif åŠ¨å›¾ï¼Œæ¯”è¾ƒç®€å•ï¼Œåˆ©ç”¨æ–¹æ³•å°è£…å¾—åˆ° <code>create_gif</code> å‡½æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">create_gif</span><span class="p">(</span><span class="n">image_list</span><span class="p">,</span> <span class="n">gif_name</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;åˆ›å»ºgifå›¾ç‰‡
</span><span class="s1">    :param image_list: å›¾ç‰‡åç§°åˆ—è¡¨
</span><span class="s1">    :type image_list: list
</span><span class="s1">    :param gif_name: gifå›¾ç‰‡è·¯å¾„
</span><span class="s1">    :type gif_name: unicodeå­—ç¬¦ä¸²
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Creating ã€Œ{gif_name}ã€from {image_list} ...&#39;</span><span class="p">)</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">image_name</span> <span class="ow">in</span> <span class="n">image_list</span><span class="p">:</span>
        <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">imageio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">image_name</span><span class="p">))</span>
    <span class="n">imageio</span><span class="o">.</span><span class="n">mimsave</span><span class="p">(</span><span class="n">gif_name</span><span class="p">,</span> <span class="n">frames</span><span class="p">,</span> <span class="s1">&#39;GIF&#39;</span><span class="p">,</span> <span class="n">duration</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Saved {gif_name}!&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="å°è£…æŠ–éŸ³æ•ˆæœæ·»åŠ å‡½æ•°">å°è£…æŠ–éŸ³æ•ˆæœæ·»åŠ å‡½æ•°</h3>

<p>ä¸ºäº†æ›´æ–¹ä¾¿å¾—åˆ°ä¸åŒé”™ä½å°ºå¯¸ä¸‹çš„é™æ€æŠ–éŸ³æ•ˆæœå›¾ï¼Œè¿™é‡Œå°è£…ä¸Šé¢çš„å®ç°ï¼Œå¾—åˆ°ä»¥ä¸‹å‡½æ•°æ¥å£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">convert_douyin_image</span><span class="p">(</span><span class="n">pic_path</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;ä¸ºæ™®é€šå›¾ç‰‡æ·»åŠ çº¢è“æº¢å‡ºä½ç§»æ•ˆæœï¼ŒæŠ–éŸ³appæ•ˆæœ
</span><span class="s1">    :param pic_path: å›¾ç‰‡è·¯å¾„
</span><span class="s1">    :type pic_path: unicodeå­—ç¬¦ä¸²
</span><span class="s1">    :param offset: çº¢è“ä½ç§»å¤§å°ï¼Œå•ä½åƒç´ ï¼Œé»˜è®¤å€¼æ˜¯10
</span><span class="s1">    :return r_pic_path: è¿”å›è½¬æ¢å›¾ç‰‡çš„è·¯å¾„
</span><span class="s1">    :rtype: unicodeå­—ç¬¦ä¸²
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pic_path</span><span class="p">):</span>
        <span class="n">pic_name</span><span class="p">,</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">pic_path</span><span class="p">)</span>
        <span class="n">pic_path_new</span> <span class="o">=</span> <span class="n">pic_name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span> <span class="o">+</span> <span class="n">extension</span>
        <span class="n">img_data</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">pic_path</span><span class="p">)</span>
        <span class="n">img_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">img_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">img_r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span>
            <span class="n">img_gb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span>
            <span class="n">img_r</span><span class="p">[:</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">img_gb</span><span class="p">[</span><span class="n">offset</span><span class="p">:,</span> <span class="n">offset</span><span class="p">:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">img_array</span><span class="p">[:</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">img_r</span><span class="p">[:</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="p">:</span><span class="o">-</span><span class="n">offset</span><span class="p">,</span> <span class="p">:]</span> <span class="o">+</span> <span class="n">img_gb</span><span class="p">[</span><span class="n">offset</span><span class="p">:,</span> <span class="n">offset</span><span class="p">:,</span> <span class="p">:]</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">img_array</span><span class="p">)</span>
        <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">pic_path_new</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Saved {pic_path_new}!&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pic_path_new</span></code></pre></div>
<p>æ¥å£ä¸­ï¼Œå¯¹ offset ä¸º 0 æ—¶åšäº†å¤„ç†ï¼Œç›´æ¥ä¿å­˜åŸå›¾ï¼Œæœ€ç»ˆå‡½æ•°è¿”å›ä¿å­˜çš„å›¾ç‰‡è·¯å¾„ï¼Œæ–¹ä¾¿ç”Ÿæˆå›¾ç‰‡è·¯å¾„åˆ—è¡¨ç”¨äºç”Ÿæˆgifã€‚</p>

<h3 id="æ•´ä½“å®ç°">æ•´ä½“å®ç°</h3>

<p>å¯¼å…¥å¿…è¦åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">imageio</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span></code></pre></div>
<p>è¿™é‡Œå®šä¹‰ä¸€ä¸ªå›¾ç‰‡è·¯å¾„ï¼Œæ–¹ä¾¿æŒ‡å®šå¾…å¤„ç†å›¾ç‰‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">PIC_PATH</span> <span class="o">=</span> <span class="s1">&#39;glasses.jpg&#39;</span></code></pre></div>
<p>æœ€åï¼Œå…ˆå¾—åˆ°é”™ä½[0, 2, 4, 6, 8, 10]px çš„é™æ€æŠ–éŸ³æ•ˆæœå›¾å’Œå›¾ç‰‡è·¯å¾„åˆ—è¡¨ï¼Œä¸ºäº†æ˜¯åŠ¨å›¾è¿è´¯ï¼Œå¤„ç†åˆ—è¡¨ä¸­å…ƒç´ æŒ‰ç…§é”™ä½å°ºå¯¸ä¸º [0, 2, 4, 6, 8, 10, 8, 6, 4, 2, 0]pxï¼Œç„¶åæ ¹æ® <strong>PIC_PATH</strong> å¾—åˆ° gifå›¾ç‰‡ä¿å­˜è·¯å¾„ï¼Œè°ƒç”¨ <strong>create_gif</strong> å‡½æ•°ç”Ÿæˆgifï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">pic_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="n">pic_path</span> <span class="o">=</span> <span class="n">convert_douyin_image</span><span class="p">(</span><span class="n">PIC_PATH</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pic_path</span><span class="p">:</span>
            <span class="n">pic_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pic_path</span><span class="p">)</span>
    <span class="n">temp_l</span> <span class="o">=</span> <span class="nb">list</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">pic_list</span><span class="p">)</span>
    <span class="n">temp_l</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="n">pic_list</span> <span class="o">=</span> <span class="n">pic_list</span> <span class="o">+</span> <span class="n">temp_l</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">p_name</span><span class="p">,</span> <span class="n">p_ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">PIC_PATH</span><span class="p">)</span>
    <span class="n">gif_name</span> <span class="o">=</span> <span class="n">PIC_PATH</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">p_ext</span><span class="p">,</span> <span class="s1">&#39;.gif&#39;</span><span class="p">)</span>
    <span class="n">create_gif</span><span class="p">(</span><span class="n">pic_list</span><span class="p">,</span> <span class="n">gif_name</span><span class="p">)</span></code></pre></div>
<p>æœ€ç»ˆå¾—åˆ°çš„gifå›¾ç‰‡æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180704153070846317421.gif" alt="20180704153070846317421.gif" /></p>

<p>å®Œæ•´æºç å‚è€ƒ:</p>

<p><a href="https://github.com/smslit/tools-with-script/blob/master/douyin/douyin.py" target="_blank">https://github.com/smslit/tools-with-script/blob/master/douyin/douyin.py </a></p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
<li><a href="https://blog.csdn.net/guduruyu/article/details/77540445" target="_blank">gifåŠ¨æ€å›¾çš„è§£æä¸åˆæˆ</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/37923938" target="_blank">ç”¨Pythonç»™å›¾ç‰‡åŠ ä¸ŠæŠ–éŸ³æ•ˆæœ</a></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Affinity Photo ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦</title>
			<link>https://www.smslit.top/2018/07/03/affinity-photo-douyin/</link>
			<pubDate>Tue, 03 Jul 2018 17:59:56 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/03/affinity-photo-douyin/</guid>
			<description>&lt;p&gt;ä¸Šä¸€ç¯‡æ–‡ç«  &lt;a href=&#34;https://www.smslit.top/2018/07/03/sketch-practice-douyin/&#34; target=&#34;_blank&#34;&gt;sketchç»ƒä¹ ç¨¿ä¹‹æŠ–éŸ³éŸ³ç¬¦&lt;/a&gt; ä¸­ä»‹ç»äº†ç»˜åˆ¶æŠ–éŸ³æ•ˆæœçš„åŸç†ï¼Œæ ¹æ®åŸç†å…¶å®ä¹Ÿå¯ä»¥ç”¨å…¶å®ƒå·¥å…·ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦ï¼Œæ¯”å¦‚PSã€Affinity Photoã€‚æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨&lt;a href=&#34;https://affinity.serif.com/zh-cn/photo/&#34; target=&#34;_blank&#34;&gt;Affinity Photo&lt;/a&gt;ç»˜åˆ¶ä¸Šä¸€ç¯‡åšæ–‡ä¸­å¤§çš„æŠ–éŸ³éŸ³ç¬¦ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¸Šä¸€ç¯‡æ–‡ç«  <a href="/2018/07/03/sketch-practice-douyin/" target="_blank">sketchç»ƒä¹ ç¨¿ä¹‹æŠ–éŸ³éŸ³ç¬¦</a> ä¸­ä»‹ç»äº†ç»˜åˆ¶æŠ–éŸ³æ•ˆæœçš„åŸç†ï¼Œæ ¹æ®åŸç†å…¶å®ä¹Ÿå¯ä»¥ç”¨å…¶å®ƒå·¥å…·ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦ï¼Œæ¯”å¦‚PSã€Affinity Photoã€‚æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨<a href="https://affinity.serif.com/zh-cn/photo/" target="_blank">Affinity Photo</a>ç»˜åˆ¶ä¸Šä¸€ç¯‡åšæ–‡ä¸­å¤§çš„æŠ–éŸ³éŸ³ç¬¦ã€‚</p>

<p><a href="https://affinity.serif.com/zh-cn/photo/" target="_blank">Affinity Photo</a>æ˜¯ä¸€æ¬¾å¤„ç†å›¾ç‰‡çš„è½¯ä»¶ï¼Œå·²ç»å¼€å§‹åœ¨æ’¼åŠ¨PSçš„åœ°ä½ï¼Œæœ¬äººå¯¹PSåªæ˜¯èœé¸Ÿçº§çš„è®¤è¯†ï¼Œä¸è¿‡å¯ä»¥å¾ˆæ˜æ˜¾çœ‹å‡ºï¼ŒAffinity Photoæ¯”PSæ›´ç°ä»£ä¸€äº›ï¼Œæ›´è½»é‡ä¸€äº›ï¼Œè¯¥æœ‰çš„åŠŸèƒ½ä¹Ÿéƒ½æœ‰ï¼Œç”šè‡³ç®—æ³•å’Œæ“ä½œæ›´ä¼˜ï¼Œæ¯”å¦‚æ‰£æ¯›å‘ã€å…‰ç…§ç‰¹æ•ˆç­‰ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ä¼˜åŠ¿å°±æ˜¯è½¯ä»¶æˆæƒï¼Œè´­ä¹°ä¸€æ¬¡å¯ä»¥æˆæƒ5å°è®¾å¤‡ç»ˆç”Ÿæ”¯æŒå…è´¹å‡çº§ï¼Œè€ŒPSç”Ÿæ€ç¯å¢ƒçš„é—®é¢˜ï¼Œå›½å†…æ— æ³•è®¢é˜…æ­£ç‰ˆï¼Œç›—ç‰ˆPSè¿˜æ˜¯å±…å¤šï¼Œè¿™çœ‹ç”¨æˆ·è‡ªå·±çš„è®¤è¯†äº†ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„é€‰æ‹©ï¼å¦å¤–ä½œä¸ºä¸€ä¸ªé¢œæ§ï¼Œåé‡Œä¹Ÿæ˜¯è§‰å¾—Affinity Photoæ›´ä½³ã€‚</p>

<p>æ‰¯è¿œäº†ï¼Œå›æ¥ä¸€èµ·ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦ã€‚</p>

<h2 id="åŸç†å›æƒ³">åŸç†å›æƒ³</h2>

<p>å†ç®€å•è¯´ä¸€ä¸‹åŸç†ï¼Œåˆ©ç”¨äº†å¯¹åŸå›¾è‰²å½©é€šé“çš„å¤„ç†å’Œæ··åˆå®ç°æŠ–éŸ³æ™•çœ©çš„æ•ˆæœï¼Œä¸€å¼ å›¾åªç”¨<code>R</code>é€šé“ï¼Œä¸€å¼ å›¾åªç”¨<code>G</code>å’Œ<code>B</code>é€šé“ï¼Œç„¶åå°†ä¸¤å›¾ä»¥<code>ç›¸åŠ </code>çš„æ–¹å¼æ··åˆï¼Œä¸¤å›¾é‡åˆæ„æˆåŸå›¾ï¼Œä¸€æ—¦æœ‰é”™ä½å°±ä¼šå‡ºç°æŠ–éŸ³çš„æ•ˆæœã€‚</p>

<h2 id="ç»˜åˆ¶">ç»˜åˆ¶</h2>

<p>ä¸ºäº†æ›´ç›´æ¥å±•ç¤ºç»˜åˆ¶è¿‡ç¨‹ï¼Œè¿™é‡Œç›´æ¥å½•åˆ¶äº†ç»˜åˆ¶è¿‡ç¨‹ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/affinity/douyin/douyin.mp4" controls="controls" width="100%">Affinity Photo ç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦</video>]]></content>
		</item>
		
		<item>
			<title>sketchç»ƒä¹ ç¨¿ä¹‹æŠ–éŸ³éŸ³ç¬¦</title>
			<link>https://www.smslit.top/2018/07/03/sketch-practice-douyin/</link>
			<pubDate>Tue, 03 Jul 2018 15:36:43 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/03/sketch-practice-douyin/</guid>
			<description>&lt;p&gt;å‰äº›å¤©çœ‹äº†æ–‡ç« &lt;a href=&#34;https://zhuanlan.zhihu.com/p/37923938&#34; target=&#34;_blank&#34;&gt;ç”¨Pythonç»™å›¾ç‰‡åŠ ä¸ŠæŠ–éŸ³æ•ˆæœ&lt;/a&gt;æ˜ç™½äº†æŠ–éŸ³æ•ˆæœçš„åŸç†ï¼Œæ‰€ä»¥æœ‰äº†æœ¬æ–‡çš„ç»ƒä¹ ï¼Œç”¨sketchç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180703153058590031266.png&#34; alt=&#34;20180703153058590031266.png&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å‰äº›å¤©çœ‹äº†æ–‡ç« <a href="https://zhuanlan.zhihu.com/p/37923938" target="_blank">ç”¨Pythonç»™å›¾ç‰‡åŠ ä¸ŠæŠ–éŸ³æ•ˆæœ</a>æ˜ç™½äº†æŠ–éŸ³æ•ˆæœçš„åŸç†ï¼Œæ‰€ä»¥æœ‰äº†æœ¬æ–‡çš„ç»ƒä¹ ï¼Œç”¨sketchç»˜åˆ¶æŠ–éŸ³éŸ³ç¬¦ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180703153058590031266.png" alt="20180703153058590031266.png" /></p>

<p><a href="https://www.sketchapp.com" target="_blank">sketch</a>è¿™ä¸ªå¼ºå¤§çš„è®¾è®¡å·¥å…·å°±ä¸åœ¨è¿™é‡Œä»‹ç»äº†ï¼Œæœ¬æ–‡é‡ç‚¹æ˜¯è®²ä¸€ä¸‹æŠ–éŸ³æ•ˆæœçš„åŸç†å’Œå¦‚ä½•ç»˜åˆ¶æŠ–éŸ³æ•ˆæœçš„ğŸµã€‚</p>

<h2 id="æŠ–éŸ³æ•ˆæœçš„åŸç†">æŠ–éŸ³æ•ˆæœçš„åŸç†</h2>

<p>æŠ–éŸ³æ•ˆæœåˆ©ç”¨äº†å›¾ç‰‡çš„é¢œè‰²æ··åˆé€šé“çš„å¤„ç†ä»¥åŠæ˜¾ç¤ºçš„åŸç†<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup>ï¼Œç›®å‰å›¾ç‰‡å¤šé€‰ç”¨RGBï¼Œåƒpngå›¾ç‰‡è¿˜åŒ…å«äº†alphaé€šé“ä¸»è¦æ§åˆ¶é€æ˜ï¼Œè¿™é‡Œåªå…³å¿ƒRGBä¸‰ä¸ªé€šé“ï¼š<strong>red</strong> ã€<strong>green</strong> å’Œ <strong>blue</strong>ã€‚è§‚çœ‹ä¸Šé¢æŠ–éŸ³éŸ³ç¬¦çš„å›¾ç‰‡å¯ä»¥çœ‹åˆ°æ˜¯ä¸¤ä¸ªéŸ³ç¬¦å æ”¾ç›¸åŠ å¾—åˆ°çš„ã€‚</p>

<p>å…¶å®ä¸Šé¢çš„ä¸¤ä¸ªéŸ³ç¬¦æœ¬æ¥éƒ½æ˜¯ç™½è‰²ï¼Œåªæ˜¯é’è‰²çš„éŸ³ç¬¦å…³é—­äº†<code>R</code>é€šé“ï¼ŒåŠ<code>R</code>é€šé“è®¾ç½®ä¸ºäº†0:</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sketch/douyin/qing.mp4" controls="controls" width="100%">é’è‰²</video>

<p>çº¢è‰²çš„éŸ³ç¬¦åŒæ ·çš„é“ç†æ˜¯å…³é—­äº†<code>G</code>å’Œ<code>B</code>é€šé“ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sketch/douyin/red.mp4" controls="controls" width="100%">çº¢è‰²</video>

<p>ç„¶åæ¥ç€éœ€è¦ä¿®æ”¹é’è‰²åœ†å›¾å±‚åˆ°çº¢è‰²åœ†å›¾å±‚çš„ä¸Šæ–¹ï¼Œç„¶åä¿®æ”¹é’åœ†çš„å¡«å……çš„æ··åˆæ–¹å¼ä¸ºï¼š<code>screen</code><sup class="footnote-ref" id="fnref:2"><a href="#fn:2">2</a></sup>ï¼Œå±å¹•çš„æ··åˆæ–¹å¼çš„æ•ˆæœä¸å‰é¢æåˆ°çš„æ–‡ç« ä¸­æ‰€è¯´çš„ç›¸åŠ ä¸€è‡´ï¼Œç„¶åå°†é’è‰²åœ†å½¢æ‹–åŠ¨ä¸çº¢è‰²åœ†å½¢é‡å ï¼Œä¼šå‘ç°é‡å éƒ¨åˆ†æ˜¯ç™½è‰²çš„ï¼Œä¸æŠ–éŸ³éŸ³ç¬¦æ•ˆæœä¸€è‡´ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sketch/douyin/screen.mp4" controls="controls" width="100%">é‡å </video>

<p>è¿™æ ·æˆ‘ä»¬å°±çŸ¥é“äº†æŠ–éŸ³æ•ˆæœçš„åŸç†ï¼Œè¿™ä¸ªåŸç†é’ˆå¯¹äºå¤æ‚çš„å›¾ç‰‡ä¸€æ ·é€‚ç”¨ã€‚</p>

<h2 id="åˆ†æéŸ³ç¬¦">åˆ†æéŸ³ç¬¦</h2>

<p>æŠ–éŸ³éŸ³ç¬¦çš„åŸºæœ¬å…ƒç´ æ˜¯ä¸¤ä¸ªä¸€æ ·çš„éŸ³ç¬¦ï¼Œsketchå…·æœ‰å‡ ä½•å¸ƒå°”è¿ç®—çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸‹é¢åˆ†è§£ä¸€ä¸‹éŸ³ç¬¦çš„ç»“æ„ï¼Œå°±å¯ä»¥ç†æ¸…éŸ³ç¬¦ç»˜åˆ¶æ­¥éª¤ã€‚</p>

<p>å¯ä»¥ç®€å•çš„å°†éŸ³ç¬¦çœ‹æˆä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>

<ul>
<li>ä¸Šé¢éŸ³ç¬¦å°¾å·´çš„ <sup>1</sup>&frasl;<sub>4</sub> åœ†ç¯</li>
<li>ä¸­é—´çš„çŸ©å½¢</li>
<li>ä¸‹é¢çš„ <sup>3</sup>&frasl;<sub>4</sub> åœ†ç¯</li>
</ul>

<p>å°±åƒè¿™æ ·ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180703153058885065459.png" alt="20180703153058885065459.png" /></p>

<p>ä¸‹é¢åªéœ€åˆ†æä¸‰ä¸ªéƒ¨åˆ†æ€ä¹ˆç”»å³å¯ã€‚</p>

<h3 id="1-4-åœ†ç¯"><sup>1</sup>&frasl;<sub>4</sub> åœ†ç¯</h3>

<p>è¿™ä¸ªå¯ä»¥ä¸ç”¨ç›´æ¥ç”»åœ†ç¯ï¼Œå¯ä»¥ç»˜åˆ¶çŸ©å½¢ç„¶åå–ä¸€ä¸ªç‚¹åšåœ†è§’å¤„ç†å°±èƒ½å¾—åˆ°ä¸€ä¸ªæ‰‡å½¢ï¼Œç„¶åå¤åˆ¶æ‰‡å½¢ç¼©å°å°ºå¯¸ä¸ºåŸæ¥çš„ <sup>1</sup>&frasl;<sub>2</sub> ï¼Œç„¶åå¯¹ä¸¤ä¸ªæ‰‡å½¢åš <strong>å‡ ä½•ç›¸å‡</strong> å¤„ç†å°±å¯ä»¥äº†ã€‚</p>

<h3 id="3-4-åœ†ç¯"><sup>3</sup>&frasl;<sub>4</sub> åœ†ç¯</h3>

<ul>
<li>ç»˜åˆ¶æ•´åœ†ç¯ï¼šç»˜åˆ¶ä¸¤ä¸ªåœ†ï¼Œè¿™é‡Œå¯ä»¥è®¾è®¡å°åœ†çš„ç›´å¾„ä¸ºå¤§åœ†çš„ <sup>1</sup>&frasl;<sub>3</sub> ï¼Œç„¶åå¯¹ä¸¤ä¸ªåœ†åš <strong>å‡ ä½•å¸ƒå°”ç›¸å‡</strong> æ“ä½œå³å¯ï¼›</li>
<li>è£åˆ‡åœ†ç¯ï¼šç»˜åˆ¶è¾¹é•¿ä¸ºåœ†ç¯åŠå¾„å¤§å°çš„çŸ©å½¢ï¼Œæ”¾ç½®åˆ°åœ†ç¯å³ä¸Šè§’ï¼Œç„¶åè¿›è¡Œ <strong>å‡ ä½•å¸ƒå°”ç›¸å‡</strong> æ“ä½œï¼›</li>
</ul>

<h2 id="çŸ©å½¢">çŸ©å½¢</h2>

<p>ç»˜åˆ¶çŸ©å½¢ï¼Œå°ºå¯¸æ³¨æ„ä¸€ä¸‹å°±å¯ä»¥ï¼Œå®½åº¦åº”è¯¥è¦ä¸ <sup>3</sup>&frasl;<sub>4</sub> åœ†ç¯çš„å®½åº¦ä¸€è‡´ï¼Œé•¿åº¦çš„è¯ï¼Œä¸ºäº†æ›´è‡ªç„¶ä¸€ç‚¹ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹©ä¸ <sup>3</sup>&frasl;<sub>4</sub> åœ†ç¯å¤–ç›´å¾„ä¸€è‡´ã€‚</p>

<h2 id="sketchç»˜åˆ¶">sketchç»˜åˆ¶</h2>

<p>sketchç‰ˆæœ¬æ˜¯50.2</p>

<h3 id="ç»˜åˆ¶ç”»æ¿">ç»˜åˆ¶ç”»æ¿</h3>

<p>æ‰“å¼€sketchï¼ŒæŒ‰å¿«æ·é”® <code>a</code>ï¼Œå¯ä»¥è°ƒå‡ºç”»æ¿é€‰æ‹©ç•Œé¢ï¼Œè¿™é‡Œé€‰æ‹©<code>Responsive Web</code>åˆ†ç»„çš„<code>Desktop</code>ç”»æ¿ï¼Œ1024*1024ï¼Œé…ç½®ç”»æ¿èƒŒæ™¯è‰²ä¸ºé»‘è‰²ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180703153058970475514.png" alt="20180703153058970475514.png" /></p>

<h3 id="ç»˜åˆ¶-3-4-åœ†ç¯">ç»˜åˆ¶ <sup>3</sup>&frasl;<sub>4</sub> åœ†ç¯</h3>

<ul>
<li>æŒ‰ <code>o</code> é”®ï¼Œç„¶åæŒ‰ä½ <code>Shift</code> æ‹–åŠ¨æ·»åŠ åœ†å½¢ï¼Œç›´å¾„ä¸º<strong>360px</strong>ï¼›</li>
<li>å¤åˆ¶ç²˜è´´å¾—åˆ°å¦ä¸€ä¸ªåœ†å½¢ï¼Œè°ƒæ•´ç›´å¾„ä¸º <strong>120px</strong> ï¼›</li>
<li>è°ƒæ•´å°åœ†ä½ç½®ä½¿å°åœ†å’Œå¤§åœ†åŒå¿ƒï¼›</li>
<li>é€‰ä¸­ä¸¤ä¸ªåœ†ï¼Œç‚¹å‡»å·¥å…·æ çš„ <code>subtract</code> å¸ƒå°”ç›¸å‡å¤„ç†ï¼Œå¾—åˆ°ä¸€ä¸ªå¤–ç» <strong>360px</strong> å†…å¾„ <strong>120</strong> çš„åœ†ç¯ï¼›</li>
<li>æŒ‰ <code>r</code> é”®ï¼Œç„¶åæŒ‰ä½ <code>Shift</code> æ‹–åŠ¨åˆ›å»ºè¾¹é•¿ <strong>180px</strong> çš„æ­£æ–¹å½¢ï¼›</li>
<li>æ‹–åŠ¨æ­£æ–¹å½¢åˆ°åœ†ç¯çš„å³ä¸Šè§’ä½¿æ­£æ–¹å½¢æ­£å¥½å  <sup>1</sup>&frasl;<sub>4</sub> ï¼›</li>
<li>é€‰ä¸­åœ†ç¯å’Œæ­£æ–¹å½¢ï¼Œç‚¹å‡»å·¥å…·æ  <code>subtract</code> å¸ƒå°”ç›¸å‡å¤„ç†ï¼Œæœ€ç»ˆå¾—åˆ° <sup>3</sup>&frasl;<sub>4</sub> åœ†ç¯ï¼›</li>
</ul>

<p>æ•´ä¸ªæ“ä½œè¿‡ç¨‹å‚è€ƒä¸‹æ–¹è§†é¢‘ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sketch/douyin/bigRing.mp4" controls="controls" width="100%">3/4åœ†ç¯</video>

<h3 id="ç»˜åˆ¶-1-4-åœ†ç¯">ç»˜åˆ¶ <sup>1</sup>&frasl;<sub>4</sub> åœ†ç¯</h3>

<ul>
<li>æŒ‰ä¸‹<code>r</code>é”®ï¼ŒæŒ‰ä½ <code>Shift</code>é”®æ‹–åŠ¨æ·»åŠ è¾¹é•¿ <strong>240px</strong> çš„æ­£æ–¹å½¢ï¼›</li>
<li>åŒå‡»æ­£æ–¹å½¢è¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼Œå•å‡»é€‰ä¸­å·¦ä¸‹è§’çš„ç‚¹ï¼Œæ·»åŠ åœ†è§’ <strong>240px</strong>ï¼Œè¿™æ˜¯å¾—åˆ°ä¸€ä¸ª1/4æ‰‡å½¢ï¼›</li>
<li>å¤åˆ¶ç²˜è´´å‡ºä¸€ä¸ªæ–°çš„æ‰‡å½¢ï¼Œè°ƒæ•´å°ºå¯¸ä¸º <strong>120px</strong> x <strong>120px</strong>;</li>
<li>æ‹–åŠ¨å°æ‰‡å½¢åˆ°å¤§æ‰‡å½¢çš„å³ä¸Šè§’å¯¹é½è¾¹ç¼˜ï¼›</li>
<li>é€‰ä¸­ä¸¤ä¸ªæ‰‡å½¢ï¼Œç‚¹å‡»å·¥å…·æ çš„ <code>subtract</code>å·¥å…·è¿›è¡Œå‡ ä½•å¸ƒå°”ç›¸å‡ï¼Œå¾—åˆ° <sup>1</sup>&frasl;<sub>4</sub> åœ†ç¯ï¼›</li>
</ul>

<p>å…·ä½“æ“ä½œå‚è€ƒï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sketch/douyin/smalRing.mp4" controls="controls" width="100%"> 1/4 åœ†ç¯</video>

<h3 id="ç»˜åˆ¶çŸ©å½¢">ç»˜åˆ¶çŸ©å½¢</h3>

<p>æŒ‰ä¸‹ <code>r</code> é”®ï¼Œæ‹–åŠ¨ç»˜åˆ¶å®½ <strong>120px</strong>, é«˜ <strong>360px</strong> çš„çŸ©å½¢ï¼Œè¿™ä¸ªå°±ä¸éœ€è¦æ¼”ç¤ºè§†é¢‘äº†ã€‚</p>

<h3 id="ç»„åˆéŸ³ç¬¦">ç»„åˆéŸ³ç¬¦</h3>

<ul>
<li>é€‰ä¸­æ‹–åŠ¨çŸ©å½¢ä¸ <sup>3</sup>&frasl;<sub>4</sub> åœ†ç¯æœä¸Šçš„å¼€å£å¯¹é½ï¼›</li>
<li>é€‰ä¸­ <sup>1</sup>&frasl;<sub>4</sub> åœ†ç¯ä¸Šè¾¹çº¿ä¸çŸ©å½¢çš„ä¸Šè¾¹çº¿å¯¹é½ï¼›</li>
<li>é€‰ä¸­ä¸‰ä¸ªå›¾å½¢ï¼Œç‚¹å‡»å·¥å…·æ çš„ <code>Union</code> å¸ƒå°”ç»„åˆæŒ‰é’®ï¼Œè¿›è¡Œç»„åˆå¾—åˆ°éŸ³ç¬¦ï¼›</li>
<li>é€‰ä¸­éŸ³ç¬¦ï¼Œå±æ€§æ ä¸­å‹¾æ‰<code>board</code>ï¼Œè°ƒæ•´<code>fill</code>é¢œè‰²ä¸ºç™½è‰²ï¼›</li>
<li>å°†éŸ³ç¬¦è°ƒæ•´åˆ°ç”»å¸ƒæ­£ä¸­é—´ï¼›</li>
</ul>

<p>å…·ä½“è¿‡ç¨‹å‚è€ƒï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sketch/douyin/yinfu.mp4" controls="controls" width="100%">éŸ³ç¬¦</video>

<h3 id="æŠ–éŸ³å§">æŠ–éŸ³å§</h3>

<p>æ¥å§ï¼Œä¸€èµ·æŠ–éŸ³ï¼</p>

<ul>
<li>å¤åˆ¶éŸ³ç¬¦ï¼Œç²˜è´´å¾—åˆ°æ–°çš„éŸ³ç¬¦ï¼›</li>
<li>è°ƒæ•´ä¸‹å±‚éŸ³ç¬¦çš„å¡«å……é¢œè‰²ä¸º <code>#FF0000</code>ï¼Œå³çº¯çº¢è‰²ï¼›</li>
<li>è°ƒæ•´ä¸Šå±‚éŸ³ç¬¦çš„å¡«å……é¢œè‰²ä¸º <code>#00FFFF</code>ï¼Œå³é’è‰²ï¼›</li>
<li>é€‰ä¸­é’è‰²éŸ³ç¬¦ï¼ŒæŒ‰ç…§æœ€å¼€å§‹çš„åŸç†ï¼Œé€‰æ‹©æ··åˆæ–¹å¼ä¸º: <code>screen</code>ï¼›</li>
<li>è°ƒæ•´é’è‰²éŸ³ç¬¦çš„ä½ç½®å‘å·¦å‘å³å„ <strong>10px</strong>ï¼Œæœ€ç»ˆå°±çœ‹åˆ°äº†æŠ–éŸ³éŸ³ç¬¦äº†ï¼›</li>
</ul>

<p>å°±åƒè¿™æ ·ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/sketch/douyin/douyin.mp4" controls="controls" width="100%">æŠ–éŸ³éŸ³ç¬¦</video>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1"><a href="https://zhuanlan.zhihu.com/p/37923938" target="_blank">ç”¨Pythonç»™å›¾ç‰‡åŠ ä¸ŠæŠ–éŸ³æ•ˆæœ</a>
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
<li id="fn:2"><a href="https://cdn2.jianshu.io/p/ec2040bdfbfe" target="_blank">Sketchå›¾å±‚æ··åˆæ¨¡å¼ï¼ˆBlendingï¼‰è¯¦è§£</a>
 <a class="footnote-return" href="#fnref:2"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>pythonç”¨æ³•ä¹‹å­—ç¬¦ä¸²æ‹¼æ¥å’Œåˆ—è¡¨ç”Ÿæˆ</title>
			<link>https://www.smslit.top/2018/07/01/python-basic-joinstr-gerneratelist/</link>
			<pubDate>Sun, 01 Jul 2018 00:25:27 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/07/01/python-basic-joinstr-gerneratelist/</guid>
			<description>&lt;p&gt;ä»Šå¤©èŠä¸€ä¸‹pythonç”¨æ³•çš„æŠ€å·§å’Œæ€è€ƒï¼šå­—ç¬¦ä¸²çš„æ‹¼æ¥æ–¹æ³•å’Œåˆ—è¡¨çš„ç”ŸæˆæŠ€å·§ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©èŠä¸€ä¸‹pythonç”¨æ³•çš„æŠ€å·§å’Œæ€è€ƒï¼šå­—ç¬¦ä¸²çš„æ‹¼æ¥æ–¹æ³•å’Œåˆ—è¡¨çš„ç”ŸæˆæŠ€å·§ã€‚</p>

<h2 id="åˆ—è¡¨ç”Ÿæˆ">åˆ—è¡¨ç”Ÿæˆ</h2>

<p>å¦‚æœè®©ä½ ç”Ÿæˆä»0ï½1000çš„å¹³æ–¹ç»„æˆçš„åˆ—è¡¨ï¼Œä½ ä¼šæœ‰å‡ ç§å®ç°æ–¹æ³•ï¼Œç°åœ¨æˆ‘çŸ¥é“çš„å¯ä»¥å½’ç»“ä¸ºä¸¤ç§ï¼š</p>

<ul>
<li>åˆ—è¡¨ç”Ÿæˆå¼ï¼›</li>
<li>å¾ªç¯è¿½åŠ ï¼›</li>
</ul>

<h3 id="å¾ªç¯è¿½åŠ ">å¾ªç¯è¿½åŠ </h3>

<p>å…ˆè¯´ä¸€ä¸‹<strong>å¾ªç¯è¿½åŠ </strong>ï¼Œè¿™ç§å…¶å®å°±æ˜¯æ¯”è¾ƒç›´ç™½çš„ä»cè¯­è¨€ä¸­è¿‡æ¸¡æ¥çš„å®ç°æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span></code></pre></div>
<h3 id="åˆ—è¡¨ç”Ÿæˆå¼">åˆ—è¡¨ç”Ÿæˆå¼</h3>

<p>è€Œåˆ—è¡¨ç”Ÿæˆå¼åªéœ€è¦ä¸€è¡Œä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">)]</span></code></pre></div>
<h3 id="å¯¹æ¯”">å¯¹æ¯”</h3>

<p>ä¸‹é¢å’±ç¼–å†™ä¸€ç»„æµ‹è¯•è„šæœ¬å¯¹æ¯”ä¸€ä¸‹è¿™ä¸¤ç§æ–¹å¼è€—æ—¶ï¼Œåˆ†åˆ«æµ‹è¯•ç”¨ä¸¤ç§æ–¹å¼ç”ŸæˆåŒä¸€åˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨ä»¥0å¼€å§‹ä»¥æŒ‡å®šæ•°å­—ç»“æŸï¼Œæµ‹è¯•æ‰€ç”¨ç»“æŸç‚¹ä¸ºä»¥ä¸‹æ•°å­—ï¼š</p>
<div class="highlight"><pre class="chroma">[200, 400, 600, 800, 1000, 1200, 1400, 1600, 1800, 2000]</pre></div>
<p>æµ‹ç®—è€—æ—¶ä½¿ç”¨<code>timeit</code>æ¨¡å—ï¼Œæœ€ç»ˆå¾—åˆ°ä¸¤ç§æ–¹æ³•ä¸‹æ‰€ç”¨è€—æ—¶ï¼Œç»˜åˆ¶ç›¸åº”å¯¹æ¯”æ›²çº¿ï¼Œç¼–å†™è„šæœ¬æ–‡ä»¶ï¼Œå†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/local/bin/python3</span>

<span class="kn">import</span> <span class="nn">timeit</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="k">def</span> <span class="nf">loop_generate_list</span><span class="p">(</span><span class="n">end</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;å¾ªç¯ç”Ÿæˆ
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">end</span><span class="p">):</span>
        <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">generate_list</span><span class="p">(</span><span class="n">end</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;åˆ—è¡¨ç”Ÿæˆå¼
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">end</span><span class="p">)]</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">end_num</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="mi">200</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)]</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="p">[</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;loop_generate_list(</span><span class="si">%d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="s1">&#39;from __main__ import loop_generate_list&#39;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span> <span class="o">/</span> <span class="mi">500</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">end_num</span><span class="p">]</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="p">[</span><span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;generate_list(</span><span class="si">%d</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="s1">&#39;from __main__ import generate_list&#39;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span> <span class="o">/</span> <span class="mi">500</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">end_num</span><span class="p">]</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s2">&#34;all&#34;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">end_num</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&#34;For-loop&#34;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">end_num</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&#34;list-generate&#34;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;the end number of list&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Escaped Time(s)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>
<p>æ‰§è¡Œè„šæœ¬ä»¥åä¼šå¾—åˆ°ä»¥ä¸‹æ›²çº¿ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180630153037143746732.png" alt="20180630153037143746732.png" /></p>

<p>è€—æ—¶æ•°æ®å¦‚ä¸‹ï¼š</p>

<p>åˆ—è¡¨   | å¾ªç¯æ–¹å¼è€—æ—¶(s)        | åˆ—è¡¨ç”Ÿæˆå¼è€—æ—¶(s)
&mdash;&mdash;-|&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;|
0~199  | 7.943870799499565e-05  | 5.8151310004177506e-05
0~399  | 0.00015830999000172598 | 0.00011730378400534392
0~599  | 0.00023279044800437988 | 0.00018087501599802635
0~799  | 0.0003016821240016725  | 0.00025029307800286915
0~999  | 0.00037272097000095526 | 0.00030559123599960004
0~1199 | 0.000465159749990562   | 0.00036801772599574177
0~1399 | 0.0005052312600018923  | 0.0004436784459976479
0~1599 | 0.0005855820479919203  | 0.0004932414859940763
0~1799 | 0.0006699951940099709  | 0.0005555873200064525
0~1999 | 0.0007183871679881122  | 0.0006266429160023108</p>

<p>ç»¼ä¸Šç»“æœï¼Œåˆ—è¡¨ç”Ÿæˆå¼éä½†å†™æ³•ç®€å•ï¼Œè€Œä¸”æ‰§è¡Œé€Ÿåº¦ä¹Ÿæ˜¯æ¯”æ‰‹åŠ¨å¾ªç¯æ·»åŠ å¿«ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ç§è¯­æ³•å¥½ç³–äº†ï¼Œå»ºè®®éƒ½ä½¿ç”¨<strong>åˆ—è¡¨ç”Ÿæˆå¼</strong>ç”Ÿæˆè‡ªå·±æƒ³è¦çš„åˆ—è¡¨ã€‚</p>

<h2 id="æ‹¼æ¥å­—ç¬¦ä¸²">æ‹¼æ¥å­—ç¬¦ä¸²</h2>

<p>å­—ç¬¦ä¸²çš„æ‹¼æ¥åœ¨<code>python</code>ä¸­å¾ˆçµæ´»ï¼Œæ—¢å¯ä»¥ç”¨<code>+</code>è¿ç®—ç¬¦ï¼Œåˆå¯ä»¥ç”¨æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œè¿˜èƒ½ç”¨<code>join</code>å‡½æ•°ï¼Œé‚£æˆ‘ä»¬ç”¨å“ªä¸€ä¸ªæ¯”è¾ƒå¥½å‘¢ï¼Œè¿™é‡Œå’±å…ˆå…³å¿ƒä¸€ä¸‹æ‰§è¡Œé€Ÿåº¦ï¼Œæ‰€ä»¥å°±åƒç¬¬ä¸€èŠ‚ä¸­ä¸€æ ·æ¯”è¾ƒä¸€ä¸‹å“ªç§é€Ÿåº¦æ›´å¿«ï¼</p>

<h3 id="å·æ‹¼æ¥"><code>+</code>å·æ‹¼æ¥</h3>

<p>æ¯”å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">hello</span> <span class="o">=</span> <span class="s1">&#39;hello, &#39;</span> <span class="o">+</span> <span class="s1">&#39;Monkey!&#39;</span> <span class="o">+</span> <span class="s1">&#39;Let</span><span class="se">\&#39;</span><span class="s1">t&#39;</span> <span class="o">+</span> <span class="s1">&#39;Do&#39;</span> <span class="o">+</span> <span class="s1">&#39;it&#39;</span></code></pre></div>
<h3 id="å·æ‹¼æ¥-1"><code>%</code>å·æ‹¼æ¥</h3>

<p>ç±»ä¼¼äºcåº“ä¸­çš„<code>sprintf</code></p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">hello</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%s%s%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;hello, &#39;</span><span class="p">,</span> <span class="s1">&#39;Monkey! &#39;</span><span class="p">,</span> <span class="s1">&#39;Let</span><span class="se">\&#39;</span><span class="s1">t &#39;</span><span class="p">,</span> <span class="s1">&#39;Do &#39;</span><span class="p">,</span> <span class="s1">&#39;it!&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="formatæ–¹æ³•æ‹¼æ¥">formatæ–¹æ³•æ‹¼æ¥</h3>

<p>æ˜¯python2.6ä¸­å‡ºç°çš„ç”¨æ¥æ›¿ä»£<code>%</code>æ‹¼æ¥å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">hello</span> <span class="o">=</span> <span class="s1">&#39;{}{}{}{}{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;hello, &#39;</span><span class="p">,</span> <span class="s1">&#39;Monkey! &#39;</span><span class="p">,</span> <span class="s1">&#39;Let</span><span class="se">\&#39;</span><span class="s1">t &#39;</span><span class="p">,</span> <span class="s1">&#39;Do &#39;</span><span class="p">,</span> <span class="s1">&#39;it!&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="f-string-æ–¹å¼æ‹¼æ¥"><code>f-string</code>æ–¹å¼æ‹¼æ¥</h3>

<p><code>f-string</code>å…¨ç§°Formatted String Literalsï¼Œä¹Ÿå°±æ˜¯å­—é¢é‡æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œè¿™æ˜¯python3.6å¼•å…¥çš„ï¼Œç”¨æ³•ç±»ä¼¼äºå‰é¢<code>%</code>å·æ‹¼æ¥å’Œ<code>format</code>æ–¹æ³•</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">str_l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hello, &#39;</span><span class="p">,</span> <span class="s1">&#39;Monkey! &#39;</span><span class="p">,</span> <span class="s1">&#39;Let</span><span class="se">\&#39;</span><span class="s1">t &#39;</span><span class="p">,</span> <span class="s1">&#39;Do &#39;</span><span class="p">,</span> <span class="s1">&#39;it!&#39;</span><span class="p">]</span>
<span class="n">hello</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;{str_l[0]}{str_l[1]}{str_l[2]}{str_l[3]}{str_l[4]}&#39;</span></code></pre></div>
<p>å¯ä»¥è¯´è¿™ç§æ–¹å¼éå¸¸å¼ºå¤§ï¼Œä¼šæ‰§è¡Œ<code>{}</code>ä¸­çš„å†…å®¹ï¼Œå°†ç»“æœä½œä¸ºæ›¿ä»£é¡¹ï¼Œæ”¾ç½®åˆ°ç›¸åº”ä½ç½®ã€‚</p>

<h3 id="join-å‡½æ•°æ‹¼æ¥"><code>join</code>å‡½æ•°æ‹¼æ¥</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">hello</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;hello, &#39;</span><span class="p">,</span> <span class="s1">&#39;Monkey! &#39;</span><span class="p">,</span> <span class="s1">&#39;Let</span><span class="se">\&#39;</span><span class="s1">t &#39;</span><span class="p">,</span> <span class="s1">&#39;Do &#39;</span><span class="p">,</span> <span class="s1">&#39;it!&#39;</span><span class="p">])</span></code></pre></div>
<h3 id="å¯¹æ¯”-1">å¯¹æ¯”</h3>

<p>åŒæ ·ä½¿ç”¨<code>timeit</code>æ¨¡å—è¯„ä¼°è¿ç®—æ—¶é—´, è¿™æ¬¡çœ‹ä¸€ä¸‹æ¯ç§æ–¹æ³•æ‰§è¡Œ100000æ¬¡ç”¨çš„æ—¶é—´ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/local/bin/python3</span>
<span class="kn">import</span> <span class="nn">timeit</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&#34;hello = &#39;hello, &#39; + &#39;Monkey!&#39; + &#39;Just&#39; + &#39;Do&#39; + &#39;it&#39;&#34;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;+è¿ç®—ç¬¦æ‹¼æ¥ï¼š&#39;</span><span class="p">,</span> <span class="n">t1</span><span class="p">)</span>
<span class="n">t2</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&#34;hello = &#39;</span><span class="si">%s%s%s%s%s</span><span class="s2">&#39; % (&#39;hello, &#39;, &#39;Monkey! &#39;, &#39;Just &#39;, &#39;Do &#39;, &#39;it!&#39;)&#34;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;%æ“ä½œç¬¦æ‹¼æ¥ï¼š&#39;</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span>
<span class="n">t3</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&#34;hello = &#39;{}{}{}{}{}&#39;.format(&#39;hello, &#39;, &#39;Monkey! &#39;, &#39;Just &#39;, &#39;Do &#39;, &#39;it!&#39;)&#34;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Formatæ–¹æ³•æ‹¼æ¥ï¼š&#39;</span><span class="p">,</span> <span class="n">t3</span><span class="p">)</span>
<span class="n">t4</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&#34;str_l = [&#39;hello, &#39;, &#39;Monkey! &#39;, &#39;Just&#39; , &#39;Do &#39;, &#39;it!&#39;];hello = f&#39;{str_l[0]}{str_l[1]}{str_l[2]}{str_l[3]}{str_l[4]}&#39;&#34;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;f-stringæ–¹æ³•æ‹¼æ¥ï¼š&#39;</span><span class="p">,</span> <span class="n">t4</span><span class="p">)</span>
<span class="n">t5</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s2">&#34;hello = &#39;&#39;.join([&#39;hello, &#39;, &#39;Monkey! &#39;, &#39;Just &#39;, &#39;Do &#39;, &#39;it!&#39;])&#34;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;joinæ–¹æ³•ï¼š&#39;</span><span class="p">,</span> <span class="n">t5</span><span class="p">)</span></code></pre></div>
<p>ç»“æœæ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">+è¿ç®—ç¬¦æ‹¼æ¥ï¼š <span class="m">0</span>.0016716789978090674
%æ“ä½œç¬¦æ‹¼æ¥ï¼š <span class="m">0</span>.02950063199386932
Formatæ–¹æ³•æ‹¼æ¥ï¼š <span class="m">0</span>.054942579998169094
f-stringæ–¹æ³•æ‹¼æ¥ï¼š <span class="m">0</span>.03282728197518736
joinæ–¹æ³•ï¼š <span class="m">0</span>.022729617019649595</code></pre></div>
<p>å¯ä»¥çœ‹å‡ºå°è§„æ¨¡æ‹¼æ¥çŸ­å­—ç¬¦ä¸²æ—¶ï¼Œä½¿ç”¨<code>+</code>æ‹¼æ¥æ›´å¿«é€Ÿç›´æ¥ã€‚</p>

<p>ä½†æ˜¯å½“éœ€è¦å¤§è§„æ¨¡æ‹¼æ¥å¾ˆå¤šé•¿å­—ç¬¦ä¸²æ—¶ï¼Œä¼šæ˜¯ä»€ä¹ˆæƒ…å†µå‘¢ï¼Ÿæ­¤æ—¶å‰é¢è¯´çš„ä¸­é—´ä¸‰ä¸ªç±»ä¼¼äºæ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼ä¸å¤ªé€‚åˆè¿ç»­åˆå¹¶å¤§é‡å­—ç¬¦ä¸²ï¼Œè¦å®ç°è¦ä¹ˆä»£ç é•¿è€Œç²—æš´ï¼Œè¦ä¹ˆå®ç°ä»£ç çŸ­ä½†ä¸é«˜æ•ˆã€‚</p>

<p>é‚£ä¹ˆå°±æ¯”è¾ƒä¸€ä¸‹å…¶ä½™ä¸¤ç§æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/local/bin/python3</span>
<span class="kn">import</span> <span class="nn">timeit</span>

<span class="k">def</span> <span class="nf">test_add_str</span><span class="p">():</span>
    <span class="n">hello</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
        <span class="n">hello</span> <span class="o">+=</span> <span class="s1">&#39;hello, every body! Welcom here for our pretty moment! Thanks for that!</span><span class="se">\n</span><span class="s1">&#39;</span>

<span class="k">def</span> <span class="nf">test_join_str</span><span class="p">():</span>
    <span class="n">str_test</span> <span class="o">=</span> <span class="s1">&#39;hello, every body! Welcom here for our pretty moment! Thanks for that!</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="n">str_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">str_test</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10000</span><span class="p">)]</span>
    <span class="n">hello</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">str_list</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;test_add_str()&#39;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="s1">&#39;from __main__ import test_add_str&#39;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;+è¿ç®—ç¬¦æ‹¼æ¥ï¼š&#39;</span><span class="p">,</span> <span class="n">t1</span><span class="p">)</span>
    <span class="n">t2</span> <span class="o">=</span> <span class="n">timeit</span><span class="o">.</span><span class="n">timeit</span><span class="p">(</span><span class="s1">&#39;test_join_str()&#39;</span><span class="p">,</span> <span class="n">setup</span><span class="o">=</span><span class="s1">&#39;from __main__ import test_join_str&#39;</span><span class="p">,</span> <span class="n">number</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;joinæ–¹æ³•ï¼š&#39;</span><span class="p">,</span> <span class="n">t2</span><span class="p">)</span></code></pre></div>
<p>å¯¹æ¯”ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">+è¿ç®—ç¬¦æ‹¼æ¥ï¼š <span class="m">0</span>.0019161234499915736
joinæ–¹æ³•ï¼š <span class="m">0</span>.00045332342000619974</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°<code>join</code>æ–¹æ³•çš„ä¼˜åŠ¿æ›´æ˜æ˜¾ã€‚ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„ç»“æœå‘¢ï¼Ÿå…¶å®æ˜¯ä¸¤ä¸ªæ–¹æ³•çš„æœºåˆ¶ä¸ä¸€æ ·ï¼Œ<code>+</code>è¿ç®—ç¬¦æ‹¼æ¥çš„æ–¹æ³•æ˜¯æ¯æ¬¡æ‹¼æ¥éƒ½ä¼šç”Ÿæˆæ–°çš„å‰¯æœ¬ï¼Œæ‹¼æ¥ä¸€æ¬¡å°±æœ‰ä¸€æ¬¡å¤åˆ¶æ“ä½œï¼›è€Œ<code>join</code>æ–¹æ³•æ˜¯æ ¹æ®åˆ—è¡¨å…ˆé¢„ä¼°ç©ºé—´ï¼Œåé¢åªéœ€å¤åˆ¶æ¯æ¬¡è¦æ‹¼æ¥çš„å­—ç¬¦ä¸²å°±å¥½äº†ï¼Œæ‰€ä»¥åƒè¿™ç§è§„æ¨¡å¤§ä¸”æ•°é‡å¤šçš„å­—ç¬¦ä¸²æ‹¼æ¥è¿˜æ˜¯é€‰<code>join</code>æ–¹æ³•æ¯”è¾ƒåˆé€‚ã€‚</p>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>å½“æ‹¼æ¥å­—ç¬¦ä¸²çŸ­ä¸”å°‘çš„æ—¶å€™ä½¿ç”¨<code>+</code>å·æ‹¼æ¥ä¼šæ˜¯æ›´å¿«çš„å®ç°ï¼Œå¦å¤–<code>f-string</code>çš„æ–¹å¼å¯èƒ½ä¼šæ¯”è¾ƒçµæ´»ï¼Œè€Œå½“æ‹¼æ¥å­—ç¬¦ä¸²å˜é•¿æˆ–è€…æ•°é‡å¢å¤šçš„è¯ï¼Œè¿˜æ˜¯ä½¿ç”¨<code>join</code>æ•ˆç‡æ›´é«˜ã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒï¼š</h2>

<ul>
<li><a href="https://docs.python.org/3/library/timeit.html#module-timeit" target="_blank">timeit</a></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#list" target="_blank">list</a></li>
<li><a href="https://docs.python.org/3/library/stdtypes.html#str" target="_blank">str</a></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>macOSåº”ç”¨å¼€å‘åŸºç¡€ä¹‹Popover</title>
			<link>https://www.smslit.top/2018/06/29/macOS-dev-basic-NSPopover/</link>
			<pubDate>Fri, 29 Jun 2018 15:20:04 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/06/29/macOS-dev-basic-NSPopover/</guid>
			<description>&lt;p&gt;macä¸­å®‰è£…äº†ä¸€ä¸ªå«&lt;a href=&#34;http://paper.meiyuan.in&#34; target=&#34;_blank&#34;&gt;pap.er&lt;/a&gt;çš„appï¼Œç”¨æ¥ä¸‹è½½å’Œç®¡ç†æ¡Œé¢å£çº¸ï¼Œå£çº¸èµ„æºè´¨é‡å¾ˆé«˜å¹ºï¼Œappä¸ä½†å¾ˆè½»é‡(ä»…æœ‰5MB)è€Œä¸”è®¾è®¡ç²¾ç¾ï¼Œè¿˜å…è´¹çš„(æˆ‘è¿™ç®—åœ¨å¸®ä»–ä»¬åšæ¨å¹¿å—^_^ï¼Œå¥½çš„ä¸œè¥¿å°±åº”è¯¥æ¨å¹¿ä¸€ä¸‹)ã€‚è¿™æ¬¾appé‡‡ç”¨äº†çŠ¶æ€æ å°å·¥å…·çš„å½¢å¼ï¼Œç•Œé¢åœ¨ &lt;code&gt;Popover&lt;/code&gt; ä¸­å®ç°ã€‚çœ‹è§†é¢‘æ„Ÿå—ä¸€ä¸‹ï¼Œå«&lt;code&gt;Popover&lt;/code&gt;çš„å¼¹çª—ï¼Œè¿™æ˜¯æœ¬æ–‡è¦è®²çš„ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;video src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/pap.er.mp4&#34; controls=&#34;controls&#34; width=&#34;100%&#34; poster=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153023532585285.jpg&#34;&gt;pap.er&lt;/video&gt;

&lt;p&gt;æ˜¨å¤©ç ”ç©¶äº†&lt;code&gt;Popover&lt;/code&gt;çš„ä½¿ç”¨ï¼Œæ‰€ä»¥ä»Šå¤©ä»¥ä¸€ä¸ªå®ä¾‹ä¸å¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>macä¸­å®‰è£…äº†ä¸€ä¸ªå«<a href="http://paper.meiyuan.in" target="_blank">pap.er</a>çš„appï¼Œç”¨æ¥ä¸‹è½½å’Œç®¡ç†æ¡Œé¢å£çº¸ï¼Œå£çº¸èµ„æºè´¨é‡å¾ˆé«˜å¹ºï¼Œappä¸ä½†å¾ˆè½»é‡(ä»…æœ‰5MB)è€Œä¸”è®¾è®¡ç²¾ç¾ï¼Œè¿˜å…è´¹çš„(æˆ‘è¿™ç®—åœ¨å¸®ä»–ä»¬åšæ¨å¹¿å—^_^ï¼Œå¥½çš„ä¸œè¥¿å°±åº”è¯¥æ¨å¹¿ä¸€ä¸‹)ã€‚è¿™æ¬¾appé‡‡ç”¨äº†çŠ¶æ€æ å°å·¥å…·çš„å½¢å¼ï¼Œç•Œé¢åœ¨ <code>Popover</code> ä¸­å®ç°ã€‚çœ‹è§†é¢‘æ„Ÿå—ä¸€ä¸‹ï¼Œå«<code>Popover</code>çš„å¼¹çª—ï¼Œè¿™æ˜¯æœ¬æ–‡è¦è®²çš„ä¸œè¥¿ã€‚</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/pap.er.mp4" controls="controls" width="100%" poster="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153023532585285.jpg">pap.er</video>

<p>æ˜¨å¤©ç ”ç©¶äº†<code>Popover</code>çš„ä½¿ç”¨ï¼Œæ‰€ä»¥ä»Šå¤©ä»¥ä¸€ä¸ªå®ä¾‹ä¸å¤§å®¶åˆ†äº«ä¸€ä¸‹ï¼</p>

<h2 id="å¹³å°">å¹³å°</h2>

<ul>
<li>macOS 10.13.5</li>
<li>Xcode 9.4.1</li>
<li>swift 4.1.2</li>
</ul>

<p>æœ¬æ–‡åŸºäºä¸Šè¿°å¹³å°å®ç°ï¼Œä¸‹é¢çš„ä»£ç ä¸­å¯èƒ½éšç€<code>Swift</code>è¯­è¨€çš„ç‰ˆæœ¬çš„ä¸åŒä¼šéœ€è¦è°ƒæ•´ï¼ˆä¸è¿‡åº”è¯¥ä¸å¤šï¼‰ï¼Œ<code>xcode</code>ä¼šæ¯”è¾ƒæ™ºèƒ½çš„æå‡ºä¿®æ”¹å»ºè®®ï¼Œè§†æƒ…å†µè°ƒæ•´å³å¯ï¼Œä¸è¿‡å®ç°æ€è·¯æ˜¯ä¸€è‡´çš„ã€‚</p>

<h2 id="æ–°å»ºåŠé…ç½®å·¥ç¨‹">æ–°å»ºåŠé…ç½®å·¥ç¨‹</h2>

<ul>
<li>æ‰“å¼€xcodeæ–°å»ºå·¥ç¨‹ï¼Œ <strong>macOS</strong> -&gt; <strong>Cocoa App</strong> -&gt; <strong>Next</strong>:
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024028025921.png" alt="20180629153024028025921.png" /></li>
<li>è¾“å…¥å·¥ç¨‹åç§°ï¼š<code>PopoverDemo</code>ï¼Œè¯­è¨€é€‰æ‹©<code>Swift</code>ï¼Œå‹¾æ‰<code>Storyboard</code>:
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024043769527.png" alt="20180629153024043769527.png" /></li>
<li><strong>Next</strong>ï¼Œç‚¹å‡» <strong>create</strong> å³å¯æ‰“å¼€åˆ›å»ºçš„æ–°å·¥ç¨‹ï¼›</li>
<li>ç‚¹å‡»è¿è¡ŒæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºè¿è¡Œï¼Œå‡ºç°ä¸€ä¸ªç©ºçš„çª—å£ï¼ŒåŒæ—¶dockä¸Šå‡ºç°äº†åº”ç”¨å›¾æ ‡ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè®¾ç½®ä¸€ä¸‹ä¸æ˜¾ç¤ºå®ƒä»¬ï¼š

<ul>
<li>å·¥ç¨‹å¯¼èˆªæ é€‰ä¸­å·¥ç¨‹<code>PopoverDemo</code>ï¼Œæ‰“å¼€<code>Info</code>æ ‡ç­¾é¡µ;</li>
<li>å¯ä»¥çœ‹åˆ°<code>Custom macOS application Target Properties</code>ç»„ï¼Œæ·»åŠ æ–°çš„é…ç½®<code>Application is agent(UI Element)</code>ï¼Œå¸ƒå°”å±æ€§ï¼Œå€¼ä¸º <strong>YES</strong>:
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024095465288.png" alt="20180629153024095465288.png" /></li>
</ul></li>

<li><p>é‡æ–°è¿è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°å·²ç»ä¸æ˜¾ç¤ºDockå›¾æ ‡ï¼›</p></li>

<li><p>æ‰“å¼€æ–‡ä»¶<code>MainMenu.xib</code>ï¼Œå¯ä»¥çœ‹åˆ°ç•Œé¢è®¾è®¡ä¸­æœ‰<strong>Window</strong> å’Œ <strong>MainMenu</strong>ï¼Œä¸¤ä¸ªé€‰ä¸­åˆ æ‰ï¼›</p></li>

<li><p>æ‰“å¼€æ–‡ä»¶<code>AppDelegate.swift</code>ï¼Œåˆ æ‰ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"> <span class="kr">@IBOutlet</span> <span class="kr">weak</span> <span class="kd">var</span> <span class="nv">window</span><span class="p">:</span> <span class="n">NSWindow</span><span class="p">!</span></code></pre></div></li>

<li><p>å†æ¬¡è¿è¡Œç¨‹åºï¼Œä¸»çª—å£ä¹Ÿä¸æ˜¾ç¤ºäº†ï¼Œè¿èœå•æ ä¹Ÿæœ¨æœ‰äº†ï¼Œä¸è¦ç€æ€¥ï¼Œå’±ç»§ç»­ã€‚</p></li>
</ul>

<h2 id="æ·»åŠ çŠ¶æ€æ æŒ‰é’®">æ·»åŠ çŠ¶æ€æ æŒ‰é’®</h2>

<p>æ‰“å¼€æ–‡ä»¶<code>AppDelegate.swift</code>ï¼Œåœ¨ç±»ä¸­æ·»åŠ å±æ€§ï¼Œè¿™ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªçŠ¶æ€æ æŒ‰é’®ï¼Œè®¾ç½®å®½åº¦å±æ€§<code>NSStatusItem.squareLength</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">let</span> <span class="nv">statusItem</span> <span class="p">=</span> <span class="n">NSStatusBar</span><span class="p">.</span><span class="n">system</span><span class="p">.</span><span class="n">statusItem</span><span class="p">(</span><span class="n">withLength</span><span class="p">:</span> <span class="n">NSStatusItem</span><span class="p">.</span><span class="n">squareLength</span><span class="p">)</span></code></pre></div>
<p>çŠ¶æ€æ æŒ‰é’®æ€»è¯¥éœ€è¦ä¸€ä¸ªå›¾æ ‡å§ï¼æ‰“å¼€<code>Assets.xcassets</code>ï¼Œå³å‡»æ˜¾ç¤º<code>AppIcon</code>ä¸‹æ–¹çš„ç©ºç™½åŒºï¼Œé€‰æ‹©<code>New Image Set</code>ï¼Œé‡å‘½åä¸º<code>statusIcon</code>ï¼Œå½“ç„¶è¿™ä¸ªåå­—éšä¾¿å®šï¼Œé€‰ä¸­è¿™ä¸ªå›¾é›†ï¼Œä¼šçœ‹åˆ°å³ä¾§æœ‰é…ç½®åŒºï¼Œé…ç½®å›¾é›†æŒ‰ç…§<code>Template Image</code>æ¸²æŸ“ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024293742991.png" alt="20180629153024293742991.png" /></p>

<p>çœ‹åˆ°æœ‰ä¸‰ä¸ªè™šçº¿æ¡†ç©ºç™½åŒºï¼Œè¿™å°±æ˜¯å›¾ç‰‡åŒºï¼ŒçŠ¶æ€æ æŒ‰é’®çš„å›¾ç‰‡åŸºæœ¬å¤§å°ä¸º $18px\times18px$ ï¼Œè¿˜éœ€2å€å’Œ3å€çš„é€‚ç”¨äºè§†ç½‘è†œå±å¹•çš„macï¼Œåƒç´ åˆ†åˆ«æ˜¯ $36px\times36px$ å’Œ $54px\times54px$ ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æˆ‘æä¾›çš„å›¾æ ‡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024309821129.png" width="18px"><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018062915302434352614.png" width="36px"><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024344990828.png" width="54px"></p>

<p>åˆ†åˆ«å°†å›¾æ‹–åˆ°å¯¹åº”ä½ç½®ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024408859417.png" alt="20180629153024408859417.png" /></p>

<p>åˆ‡æ¢åˆ°æ–‡ä»¶<code>AppDelegate.swift</code>ï¼Œå®šä¹‰ä¸€ä¸ªæµ‹è¯•çŠ¶æ€æ æŒ‰é’®ç‚¹å‡»è¡Œä¸ºçš„å‡½æ•°ï¼Œè¿™é‡Œä»¥å…³é—­åº”ç”¨ç¨‹åºä¸ºä¾‹å§ï¼Œå®ç°çš„å‡½æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">quitApp</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">NSApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">terminate</span><span class="p">(</span><span class="kc">self</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>ç„¶åæ‰¾åˆ°<code>applicationDidFinishLaunching</code>åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼Œä¸ºçŠ¶æ€æ æŒ‰é’®é…ç½®å›¾æ ‡å’Œè¡Œä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="k">if</span> <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="n">statusItem</span><span class="p">.</span><span class="n">button</span> <span class="p">{</span>
	<span class="n">button</span><span class="p">.</span><span class="n">image</span> <span class="p">=</span> <span class="n">NSImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="n">NSImage</span><span class="p">.</span><span class="n">Name</span><span class="p">(</span><span class="s">&#34;statusIcon&#34;</span><span class="p">))</span>
	<span class="n">button</span><span class="p">.</span><span class="n">action</span> <span class="p">=</span> <span class="k">#selector</span><span class="p">(</span><span class="n">quitApp</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>
<p>æ­¤æ—¶è¿è¡Œç¨‹åºä¼šçœ‹åˆ°çŠ¶æ€æ ä¸­å‡ºç°äº†æˆ‘ä»¬å®šä¹‰çš„æŒ‰é’®ï¼Œç‚¹å‡»ä¸€ä¸‹ï¼Œåº”ç”¨ç¨‹åºå°±é€€å‡ºäº†ã€‚</p>

<blockquote>
<p>å‰é¢è®¾ç½®å›¾ç‰‡é›†æ¸²æŸ“æ–¹å¼ä¸º<code>Template Image</code>ï¼Œæ˜¯ä¸ºäº†é€‚é…ä¸åŒçš„çŠ¶æ€æ ä¸»é¢˜ï¼Œå› ä¸ºmacOSè¿˜æœ‰ä¸ªæš—é»‘ä¸»é¢˜ä¸æ˜¯ï¼Ÿ</p>
</blockquote>

<p>ä¸¤ç§ä¸»é¢˜ä¸‹çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018062915302450436095.png" alt="2018062915302450436095.png" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024505287040.png" alt="20180629153024505287040.png" /></p>

<h2 id="æ·»åŠ popover">æ·»åŠ Popover</h2>

<h3 id="æ·»åŠ popoveræ§ä»¶">æ·»åŠ Popoveræ§ä»¶</h3>

<p>æ‰“å¼€æ–‡ä»¶<code>MainMenu.xib</code>ï¼Œå³ä¸‹è„šæœç´¢æ§ä»¶<code>Popover</code>å°±ä¼šçœ‹åˆ°ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024689568360.png" alt="20180629153024689568360.png" /></p>

<p>ç‚¹å‡»æ§ä»¶å°†å…¶æ‹–å…¥ç•Œé¢ï¼Œæ·»åŠ åå…¶å¹¶æ²¡æœ‰å¯è§†åŒ–çš„å…ƒç´ ï¼Œå¯ä»¥åœ¨<code>Objects</code>ç®¡ç†å™¨ä¸­çœ‹åˆ°å·²ç»æ·»åŠ æˆåŠŸï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024707619315.png" alt="20180629153024707619315.png" /></p>

<p>å¯åŠ¨<code>Assitant Editor</code>ï¼ŒæŒ‰ä½<code>Contorl</code>é”®ç‚¹å‡»<code>Popover</code>æ‹–å…¥<code>AppDelegate.swift</code>æ–‡ä»¶ï¼Œåˆ›å»º<code>popover</code>å±æ€§ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/link.mp4" controls="controls" width="100%">popover_link</video>

<h3 id="æ·»åŠ popover-view-controller">æ·»åŠ Popover View Controller</h3>

<p>æ­¤æ—¶<code>popover</code>æ˜¯æ²¡æœ‰ç•Œé¢çš„ï¼Œå› ä¸ºæ­¤æ—¶è¿˜æ²¡æœ‰ä¸ºå…¶æŒ‡å®š<code>view controller</code>ã€‚</p>

<ul>
<li><p><code>Command</code>+<code>n</code>æˆ–è€…èœå•æ ä¾æ¬¡é€‰æ‹©<strong>File</strong>-&gt;<strong>New</strong>-&gt;<strong>Fileâ€¦ï¼Œå°±ä¼šè°ƒå‡ºæ–°å»ºæ–‡ä»¶çª—å£ï¼Œ</strong>é€‰æ‹© <strong>macOS</strong> -&gt; <strong>Cocoa Class</strong> -&gt; <strong>Next</strong>;</p></li>

<li><p>åç§°æœ€å¥½æ˜¯è·Ÿç›®çš„ç»Ÿä¸€ï¼Œè¿™é‡Œæˆ‘è®¾ç½®æˆ<code>PopoverDemoViewController</code>ï¼Œç»§æ‰¿è‡ª<code>NSViewController</code>ï¼Œå‹¾é€‰â˜‘ï¸<code>also create XIB file for user interface</code>ï¼Œè¯­è¨€ä¾æ—§æ˜¯<code>Swift</code>ï¼Œç„¶å <strong>Next</strong> -&gt; <strong>Create</strong>ä¼šåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ã€‚</p></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024886162075.png" alt="20180629153024886162075.png" /></p>

<ul>
<li>PopoverDemoViewController.swift</li>

<li><p>PopoverDemoViewController.xib</p></li>

<li><p>æ‰“å¼€æ–‡ä»¶<code>MainMenu.xib</code>ï¼Œé€‰æ‹©ç•Œé¢è®¾è®¡ä¸­çš„<code>Popover View Controller</code>ï¼Œç„¶åè®¾ç½®å…¶å¯¹åº”çš„ç±»ä¸ºåˆšæ‰åˆ›å»ºçš„<code>PopoverDemoViewController</code>ï¼Œæ­¤æ—¶<code>popover</code>çš„ç•Œé¢å°±å¯ä»¥åœ¨<code>PopoverDemoViewController.xib</code>ä¸­è®¾è®¡äº†:</p></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153024927617269.png" alt="20180629153024927617269.png" /></p>

<ul>
<li><p>æ­¤æ—¶è™½æŒ‡å®šäº†å…·ä½“çš„ <strong>view controller</strong>ï¼Œä½†è¿˜æ²¡æœ‰è§¦å‘<code>popover</code>æ˜¾ç¤ºçš„åœ°æ–¹ï¼Œä¸€å¼€å§‹æˆ‘ä»¬æ·»åŠ äº† <code>statusItem</code>ï¼Œå°±æ˜¯ä¸ºäº†åˆ©ç”¨çŠ¶æ€æ æŒ‰é’®ç‚¹å‡»æ¥æ˜¾ç¤ºçš„ï¼Œåªéœ€è¦å®šä¹‰å¼€å…³<code>popover</code>çš„æ¥å£æŒ‡å®šç»™<code>statusItem</code>çš„<code>action</code>å³å¯ï¼Œå®šä¹‰ä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">showPopover</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="n">statusItem</span><span class="p">.</span><span class="n">button</span> <span class="p">{</span>
        <span class="n">popover</span><span class="p">.</span><span class="n">show</span><span class="p">(</span><span class="n">relativeTo</span><span class="p">:</span> <span class="n">button</span><span class="p">.</span><span class="n">bounds</span><span class="p">,</span> <span class="n">of</span><span class="p">:</span> <span class="n">button</span><span class="p">,</span> <span class="n">preferredEdge</span><span class="p">:</span> <span class="n">NSRectEdge</span><span class="p">.</span><span class="n">minY</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
    
<span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">closePopover</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">popover</span><span class="p">.</span><span class="n">performClose</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span>
<span class="p">}</span>
    
<span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">togglePopover</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">popover</span><span class="p">.</span><span class="n">isShown</span> <span class="p">{</span>
        <span class="n">closePopover</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">showPopover</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>

<li><p>é‡æ–°æ›´æ”¹ä¸€ä¸‹<code>applicationDidFinishLaunching</code>ä¸­å®ç°çš„<code>statusItem</code>çš„<code>action</code>ä¸ºä¸Šé¢çš„<code>togglePopover</code>ï¼Œåˆ æ‰ä¹‹å‰å®šä¹‰çš„<code>quitApp</code>å°±å¯ä»¥äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="k">if</span> <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="n">statusItem</span><span class="p">.</span><span class="n">button</span> <span class="p">{</span>
    <span class="n">button</span><span class="p">.</span><span class="n">image</span> <span class="p">=</span> <span class="n">NSImage</span><span class="p">(</span><span class="n">named</span><span class="p">:</span> <span class="n">NSImage</span><span class="p">.</span><span class="n">Name</span><span class="p">(</span><span class="s">&#34;statusIcon&#34;</span><span class="p">))</span>
    <span class="n">button</span><span class="p">.</span><span class="n">action</span> <span class="p">=</span> <span class="k">#selector</span><span class="p">(</span><span class="n">togglePopover</span><span class="p">)</span>
<span class="p">}</span></code></pre></div></li>

<li><p>æ­¤æ—¶è¿è¡Œç¨‹åºï¼Œå°±ä¼šçœ‹åˆ°æ­£å¸¸å‡ºç°çš„çŠ¶æ€æ æŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®å°±ä¼šå¼¹å‡º<code>Popover</code>ï¼Œå†æ¬¡ç‚¹å‡»å°±ä¼šå…³é—­ã€‚</p></li>
</ul>

<p><video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/popover-click.mp4" width="100%" controls="controls">popover-click</video></p>

<h3 id="è®¾è®¡popoverç•Œé¢">è®¾è®¡Popoverç•Œé¢</h3>

<p>ä¸Šé¢æåˆ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>PopoverDemoViewController.xib</code>ä¸­è®¾è®¡<code>popover</code>çš„ç•Œé¢ã€‚</p>

<h4 id="æ·»åŠ åº”ç”¨é€€å‡ºæŒ‰é’®">æ·»åŠ åº”ç”¨é€€å‡ºæŒ‰é’®</h4>

<ul>
<li><p>æ‰“å¼€<code>PopoverDemoViewController.xib</code>æ–‡ä»¶ï¼Œä¼šçœ‹åˆ°ä¸€ä¸ª<code>view</code>æ§ä»¶ï¼Œæˆ‘ä»¬æ‹–åŠ¨ä¸€ä¸ª<code>Push Button</code>æ§ä»¶åˆ°<code>view</code>ä¸­ï¼Œæ”¾ç½®åˆ°å³ä¸Šè§’ã€‚</p></li>

<li><p>é€‰ä¸­æ·»åŠ çš„æŒ‰é’®ï¼Œåœ¨æ§ä»¶å±æ€§çª—å£ä¸­ï¼Œ å–æ¶ˆå‹¾é€‰ <strong>Boarded</strong>ï¼Œé€‰æ‹©<strong>Image</strong> ä¸º <code>NSStopProcessFrestandingTemplate</code>ï¼š</p></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153025204615191.png" alt="20180629153025204615191.png" /></p>

<ul>
<li><p>è°ƒå‡º<code>Assitant Editor</code>ï¼ŒæŒ‰ä½<code>Control</code>é”®ï¼Œç‚¹å‡»æŒ‰é’®æ‹–å…¥<code>PopoverDemoViewContoller.swift</code>ï¼Œåˆ›å»ºactionä¸ºç‚¹å‡»äº‹ä»¶<code>quitApp</code>ï¼Œå®ç°ä»£ç ä¸ä¹‹å‰çš„æµ‹è¯•å‡½æ•°<code>quiApp</code>ä¸€æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">@IBAction</span> <span class="kd">func</span> <span class="nf">quitApp</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">Any</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSApplication</span><span class="p">.</span><span class="n">shared</span><span class="p">.</span><span class="n">terminate</span><span class="p">(</span><span class="kc">self</span><span class="p">)</span>
<span class="p">}</span></code></pre></div></li>

<li><p>è¿è¡Œç¨‹åºï¼Œç‚¹å‡»å¼¹å‡ºpopoverï¼Œæ­¤æ—¶å¯ä»¥çœ‹åˆ°åˆšæ‰æ·»åŠ çš„æŒ‰é’®ï¼Œç‚¹å‡»ä¸€ä¸‹æŒ‰é’®ï¼Œç¨‹åºå°±ä¼šé€€å‡ºã€‚</p></li>
</ul>

<h4 id="æ·»åŠ æ— ç”¨çš„æ ‡ç­¾">æ·»åŠ æ— ç”¨çš„æ ‡ç­¾</h4>

<p>æ€»è¦åœ¨ç¨‹åºä¸­æ˜¾ç¤ºç‚¹ä¸œè¥¿å§ï¼Œå°±åƒæ·»åŠ æŒ‰é’®ä¸€æ ·æ‹–åŠ¨ä¸€ä¸ª<code>Label</code>æ§ä»¶åˆ°<code>view</code>ä¸­ï¼Œå†…å®¹æ”¹ä¸ºç»å…¸çš„<code>Hello, World!</code>ï¼Œå•Šï¼Œä¸è¡Œå¤ªä¿—äº†ï¼Œè¿˜æ˜¯æ”¹ä¸º<code>Hello, Popover!</code>å§ï¼Œç„¶åè°ƒæ•´æ ‡ç­¾å¤§å°ï¼Œå¹¶è°ƒæ•´ä½ç½®åœ¨æ°´å¹³å’Œå‚ç›´å±…ä¸­çš„ä½ç½®ï¼Œè°ƒæ•´å†…å®¹å±…ä¸­ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180629153025294914532.png" alt="20180629153025294914532.png" /></p>

<p>è¿è¡Œç¨‹åºï¼Œçœ‹åˆ°æƒ³è¦çš„æ•ˆæœï¼</p>

<h2 id="ä¼˜åŒ–popover">ä¼˜åŒ–Popover</h2>

<p>æ­¤æ—¶è¿è¡Œï¼Œä½ ä¼šå‘ç°æœ‰ä¸€ä¸ªé—®é¢˜ï¼šç‚¹å‡»å¼¹çª—å¤–é¢ï¼Œå¼¹çª—ä¸ä¼šè‡ªåŠ¨æ”¶èµ·ã€‚è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼ŒæŸ¥çœ‹appleå®˜æ–¹çš„<code>NSPopover</code>æ–‡æ¡£ï¼Œæˆ‘ä»¬çŸ¥é“ä»–æœ‰ä¸€ä¸ª<code>behavior</code>å±æ€§ï¼Œå…¶å€¼ä¸º<code>NSPopover.Behavior.transient</code>çš„æ—¶å€™å¥½åƒå¯ä»¥å®ç°ï¼Œå°è¯•ä¸€ä¸‹ã€‚</p>

<p>æ‰“å¼€<code>MainMenu.xib</code>ï¼Œé€‰ä¸­<code>Popover</code>ï¼Œåœ¨å…¶å±æ€§è®¾ç½®åŒºå°±ä¼šçœ‹åˆ°<code>Behavior</code>ï¼Œæˆ‘ä»¬é€‰æ‹©<code>Transient</code>ï¼Œè¿è¡Œç¨‹åºä¼šå‘ç°ï¼šç¡®å®å¯ä»¥å®ç°ï¼Œç‚¹å‡»å¼¹çª—å¤–é¢ï¼Œå¼¹çª—ä¼šè‡ªåŠ¨æ”¶èµ·ï¼Œä½†æ˜¯å‰ææ˜¯å¿…é¡»åœ¨å¼¹çª—å†…æœ‰ä¸€æ¬¡ç‚¹å‡»äº‹ä»¶åæ‰èƒ½åšåˆ°è¿™ä¸ªæ•ˆæœã€‚</p>

<blockquote>
<p>åæ¥å‘ç°è‹¥å¼¹çª—å†…æœ‰ <strong>firs responder</strong> å°±å¯ä»¥å®ç°ç†æƒ³ç»“æœï¼Œä¸ç”¨æ“ä½œå¼¹çª—ä¸­çš„å†…å®¹ï¼Œåœ¨å¼¹çª—å¤–ç‚¹å‡»å°±ä¼šæ”¶èµ·å¼¹çª—!</p>
</blockquote>

<p>æ˜¾ç„¶ä¸Šé¢çš„é…ç½®ä¹Ÿä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œç½‘ä¸Šçœ‹åˆ°ä¸€ç§ç¥å¥‡çš„æ–¹å¼ï¼šæ·»åŠ ç³»ç»Ÿäº‹ä»¶ç›‘è§†å™¨æ¥å®ç°å¯¹äº¤äº’äº‹ä»¶çš„ç›‘æµ‹ï¼Œä»è€Œåšåˆ°å¼¹çª—æ˜¾ç¤ºåï¼Œæ— è®ºä»€ä¹ˆæ—¶å€™ç‚¹å‡»å¼¹çª—å¤–é¢éƒ½èƒ½æ”¶èµ·å¼¹çª—çš„æ•ˆæœã€‚</p>

<ul>
<li><p>æ–°å»ºåä¸º<code>EventMonitor</code>çš„<code>swift</code>æ–‡ä»¶ï¼š<code>Command</code>+<code>n</code>ç»„åˆæ‹³ï¼Œé€‰æ‹©<strong>macOS</strong>-&gt; <strong>Swift File</strong> -&gt; <strong>Next</strong>ï¼Œè¾“å…¥æ–‡ä»¶å<code>EventMonitor</code>åˆ›å»ºï¼›</p></li>

<li><p>æ–‡ä»¶ä»£ç ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">import</span> <span class="nc">Cocoa</span>
    
<span class="kd">class</span> <span class="nc">EventMonitor</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">mask</span><span class="p">:</span> <span class="n">NSEvent</span><span class="p">.</span><span class="n">EventTypeMask</span>
    <span class="kd">var</span> <span class="nv">handler</span> <span class="p">:</span> <span class="p">(</span><span class="n">NSEvent</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="p">()</span>
    <span class="kd">var</span> <span class="nv">monitor</span><span class="p">:</span> <span class="nb">Any</span><span class="p">?</span>
        
    <span class="kd">init</span><span class="p">(</span><span class="n">mask</span><span class="p">:</span> <span class="n">NSEvent</span><span class="p">.</span><span class="n">EventTypeMask</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="p">@</span><span class="n">escaping</span> <span class="p">(</span><span class="n">NSEvent</span><span class="p">?)</span> <span class="p">-&gt;</span> <span class="p">()){</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">mask</span> <span class="p">=</span> <span class="n">mask</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">handler</span> <span class="p">=</span> <span class="n">handler</span>
    <span class="p">}</span>
        
    <span class="kd">deinit</span> <span class="p">{</span>
        <span class="n">stop</span><span class="p">()</span>
    <span class="p">}</span>
        
    <span class="kd">func</span> <span class="nf">start</span><span class="p">(){</span>
        <span class="n">monitor</span> <span class="p">=</span> <span class="n">NSEvent</span><span class="p">.</span><span class="n">addGlobalMonitorForEvents</span><span class="p">(</span><span class="n">matching</span><span class="p">:</span> <span class="n">mask</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">handler</span><span class="p">)</span>
    <span class="p">}</span>
        
    <span class="kd">func</span> <span class="nf">stop</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">monitor</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
            <span class="n">NSEvent</span><span class="p">.</span><span class="n">removeMonitor</span><span class="p">(</span><span class="n">monitor</span><span class="p">!)</span>
            <span class="n">monitor</span> <span class="p">=</span> <span class="kc">nil</span>
        <span class="p">}</span>
    <span class="p">}</span>
        
<span class="p">}</span></code></pre></div></li>
</ul>

<p>æ–‡ä»¶ä¸­å®šä¹‰äº†<code>EventMonitor</code>ç±»ï¼Œæ·»åŠ äº†æ„é€ å‡½æ•°å’Œä¸¤ä¸ªæ¥å£ç”¨äºï¼Œåˆ›å»ºç”¨æˆ·æ“ä½œäº‹ä»¶ç›‘è§†å™¨ã€å¯åŠ¨å’Œå…³é—­ç›‘è§†å™¨ã€‚</p>

<ul>
<li><p>æ‰“å¼€æ–‡ä»¶<code>AppDelegate.swift</code>ï¼Œæ·»åŠ ç›‘è§†å™¨å±æ€§ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">var</span> <span class="nv">eventMonitor</span><span class="p">:</span> <span class="n">EventMonitor</span><span class="p">?</span></code></pre></div></li>

<li><p>åœ¨<code>applicationDidFinishLaunching</code>ä¸­æ·»åŠ ç›‘è§†å™¨çš„åˆå§‹åŒ–æ“ä½œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">eventMonitor</span> <span class="p">=</span> <span class="n">EventMonitor</span><span class="p">(</span><span class="n">mask</span><span class="p">:</span> <span class="p">[.</span><span class="n">leftMouseDown</span><span class="p">,</span> <span class="p">.</span><span class="n">rightMouseDown</span><span class="p">])</span> <span class="p">{</span> <span class="p">[</span><span class="kr">weak</span> <span class="kc">self</span><span class="p">]</span> <span class="n">event</span> <span class="k">in</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">strongSelf</span> <span class="p">=</span> <span class="kc">self</span><span class="p">,</span> <span class="n">strongSelf</span><span class="p">.</span><span class="n">popover</span><span class="p">.</span><span class="n">isShown</span> <span class="p">{</span>
        <span class="n">strongSelf</span><span class="p">.</span><span class="n">closePopover</span><span class="p">(</span><span class="n">event</span><span class="p">!)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>

<li><p>è¿˜éœ€è¦å®Œå–„<code>popover</code>æ˜¾ç¤ºå’Œå…³é—­çš„æ¥å£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">closePopover</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">popover</span><span class="p">.</span><span class="n">performClose</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span>
    <span class="n">eventMonitor</span><span class="p">?.</span><span class="n">stop</span><span class="p">()</span>
<span class="p">}</span>
    
<span class="kr">@objc</span> <span class="kd">func</span> <span class="nf">showPopover</span><span class="p">(</span><span class="kc">_</span> <span class="n">sender</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="kd">let</span> <span class="nv">button</span> <span class="p">=</span> <span class="n">statusItem</span><span class="p">.</span><span class="n">button</span> <span class="p">{</span>
        <span class="n">popover</span><span class="p">.</span><span class="n">show</span><span class="p">(</span><span class="n">relativeTo</span><span class="p">:</span> <span class="n">button</span><span class="p">.</span><span class="n">bounds</span><span class="p">,</span> <span class="n">of</span><span class="p">:</span> <span class="n">button</span><span class="p">,</span> <span class="n">preferredEdge</span><span class="p">:</span> <span class="n">NSRectEdge</span><span class="p">.</span><span class="n">minY</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">eventMonitor</span><span class="p">?.</span><span class="n">start</span><span class="p">()</span>
<span class="p">}</span></code></pre></div></li>

<li><p>æœ€åï¼Œæœ€å¥½æ˜¯æ‰“å¼€<code>MainMenu.xib</code>æ–‡ä»¶å°†<code>Popover</code>çš„<code>Behavior</code>å±æ€§è®¾ç½®ä¸º<code>Applicationed Defined</code>ã€‚è¿è¡Œç¨‹åºï¼Œå½“å•·å•·ï¼Œç¬¦åˆé¢„æœŸï¼</p></li>
</ul>

<h2 id="è¿è¡Œæ•ˆæœ">è¿è¡Œæ•ˆæœï¼š</h2>

<p>æœ€ç»ˆçš„è¿™ä¹ˆç®€é™‹çš„ç¨‹åºçš„è¿è¡Œæ•ˆæœï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/popover/popover_final.mp4" width="100%" controls="controls">popover_final</video>

<p>å®Œæ•´çš„å·¥ç¨‹å¯ä»¥<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/popover/PopoverDemo.zip" target="_blank">ç‚¹æˆ‘</a>ä¸‹è½½ã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒï¼š</h2>

<ul>
<li><p><a href="https://www.raywenderlich.com/165853/menus-popovers-menu-bar-apps-macos" target="_blank">Menus and Popovers in Menu Bar Apps for macOS</a></p></li>

<li><p><a href="https://developer.apple.com/documentation/appkit/nspopover" target="_blank">NSPopover</a></p></li>

<li><p><a href="https://developer.apple.com/documentation/appkit/nsstatusbar" target="_blank">NSStatusBar</a></p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>çˆ¬è™«å®è·µä¹‹ç½‘é¡µé•¿æˆªå›¾</title>
			<link>https://www.smslit.top/2018/06/27/spider-practice-page-screenshot/</link>
			<pubDate>Wed, 27 Jun 2018 23:58:50 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/06/27/spider-practice-page-screenshot/</guid>
			<description>&lt;p&gt;ä»Šå¤©åœ¨æƒ³ä¸€ä¸ªé—®é¢˜ï¼Œä¼šä¸ä¼šæœ‰ä¸€å¤©æˆ‘çš„é™æ€åšå®¢å°±åºŸäº†ï¼Œåº”è¯¥ä¸è‡³äºå“ˆï¼Œæœ¬åœ°ä¹Ÿèƒ½æ¸²æŸ“å˜›ï¼ä½†æ˜¯å‡è®¾çœŸçš„æ²¡æœ‰åœ°æ–¹å¯ä»¥è®¿é—®æˆ‘ä»¬çš„æ–‡ç« äº†ï¼Œæˆ‘ä»¬æå‰æˆªä¸ªå›¾ï¼Œä¿å­˜ä¸ªpdfï¼Œå¤‡ä¸ªä»½å•¥çš„ä¹Ÿæ˜¯æœ‰å¿…è¦çš„å˜›ï¼æœ¬æ–‡å°±æ¥è¯´ä¸€ä¸‹æ€ä¹ˆä¸ºpythonç½‘é¡µå†…å®¹æˆªå›¾ï¼Œç‚’ğŸ”ç…ğŸ¥šï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©åœ¨æƒ³ä¸€ä¸ªé—®é¢˜ï¼Œä¼šä¸ä¼šæœ‰ä¸€å¤©æˆ‘çš„é™æ€åšå®¢å°±åºŸäº†ï¼Œåº”è¯¥ä¸è‡³äºå“ˆï¼Œæœ¬åœ°ä¹Ÿèƒ½æ¸²æŸ“å˜›ï¼ä½†æ˜¯å‡è®¾çœŸçš„æ²¡æœ‰åœ°æ–¹å¯ä»¥è®¿é—®æˆ‘ä»¬çš„æ–‡ç« äº†ï¼Œæˆ‘ä»¬æå‰æˆªä¸ªå›¾ï¼Œä¿å­˜ä¸ªpdfï¼Œå¤‡ä¸ªä»½å•¥çš„ä¹Ÿæ˜¯æœ‰å¿…è¦çš„å˜›ï¼æœ¬æ–‡å°±æ¥è¯´ä¸€ä¸‹æ€ä¹ˆä¸ºpythonç½‘é¡µå†…å®¹æˆªå›¾ï¼Œç‚’ğŸ”ç…ğŸ¥šï¼</p>

<h2 id="ç¯å¢ƒä¸ä¾èµ–">ç¯å¢ƒä¸ä¾èµ–</h2>

<ul>
<li>python3</li>
<li>seleniumåº“</li>
<li>PhantomJS</li>
</ul>

<h3 id="selenium-åº“"><code>selenium</code>åº“</h3>

<p>ä½¿ç”¨<code>pip3</code>å®‰è£…å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install selenium</code></pre></div>
<blockquote>
<p>Selenium automates browsers. That&rsquo;s it! What you do with that power is entirely up to you. Primarily, it is for automating web applications for testing purposes, but is certainly not limited to just that. Boring web-based administration tasks can (and should!) be automated as well.</p>

<p>Selenium has the support of some of the largest browser vendors who have taken (or are taking) steps to make Selenium a native part of their browser. It is also the core technology in countless other browser automation tools, APIs and frameworks.</p>
</blockquote>

<p>ç®€å•æ¥è¯´ï¼Œ<code>selenium</code>æ˜¯ä¸€ä¸ªå¯ä»¥æ“ä½œæµè§ˆå™¨æˆ–webæ¸²æŸ“å¼•æ“çš„ä¸œè¥¿ï¼Œæ–¹ä¾¿è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ¯”è¾ƒæ˜æ˜¾çš„ç‰¹å¾å°±æ˜¯å¯ä»¥æ¨¡æ‹Ÿæµè§ˆå™¨ä¸­ç”¨æˆ·åšçš„æ“ä½œï¼Œæ¯”å¦‚ç‚¹å‡»ã€æ»šåŠ¨ã€æ‹–åŠ¨ç­‰ç­‰ï¼Œå½“ç„¶ä¹Ÿèƒ½è§£æç½‘é¡µå†…å®¹ï¼Œæ‰€ä»¥è¿™å°±ä½¿å®ƒç»å¸¸è¢«ç”¨æ¥çˆ¬åŠ¨æ€é¡µé¢ã€‚</p>

<p>å¯ä»¥ç”¨<code>selenium</code>åˆ›å»º<code>chrome</code>ã€<code>Firefox</code>ã€<code>Safari</code>ã€<code>PhantomJS</code>æµè§ˆå™¨å®ä¾‹ï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•ä»¥åæœ‰æ—¶é—´æ•´ç†ä¸€ä¸‹ã€‚</p>

<h3 id="phantomjs"><code>PhantomJS</code></h3>

<p>è¿™ä¸ªä¸œè¥¿ä¸å¤ªç†Ÿæ‚‰ï¼Œä¸è¿‡çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªæ— ç•Œé¢ã€å¯è„šæœ¬ç¼–ç¨‹çš„ç½‘é¡µæµè§ˆå™¨ï¼Œåº”è¯¥ä¸<code>chrome</code>ä»¥<code>--headless</code>(ä½¿chromeæ— ç•Œé¢è¿è¡Œ)å‚æ•°è¿è¡Œçš„çŠ¶æ€ç±»ä¼¼ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œç”¨<code>PhantomJS</code>ï¼Ÿå› ä¸ºè¿™ä¸ªä¸<code>Seleniumium</code>åº“é…åˆæ›´å®¹æ˜“æˆªé•¿å›¾ï¼Œè£…ä¸ª<code>phantomJS</code>å…ˆã€‚</p>

<p>è®¿é—®ç½‘å€ï¼š<a href="http://phantomjs.org/download.html" target="_blank">http://phantomjs.org/download.html </a>è¿›è¡Œä¸‹è½½å¯¹åº”å¹³å°çš„åº”ç”¨åŒ…ã€‚</p>

<p>è§£å‹åä¼šçœ‹åˆ°<code>bin</code>ç›®å½•ï¼Œå…¶ä¸‹å°±æ˜¯<code>phantomjs</code>å‘½ä»¤è¡Œè¿è¡Œç¨‹åºï¼Œå°†å®ƒæ‰”åˆ°<code>$PATH</code>è·¯å¾„ä¸­ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mv phantomjs /usr/local/bin/</code></pre></div>
<p>é‡å¯ç»ˆç«¯ï¼ŒéªŒè¯ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  phantomjs -v
<span class="m">2</span>.1.1</code></pre></div>
<p>ç‰ˆæœ¬æ˜¯2.1.1ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼</p>

<h2 id="é•¿æˆªå›¾">é•¿æˆªå›¾</h2>

<p>è¿™é‡Œåé‡Œä½¿ç”¨<code>selenium</code>åº“å’Œ<code>phantomjs</code>å¼•æ“å®ç°é•¿æˆªå›¾ï¼Œ<code>selenium</code>åº“å…¶å®å°±æ˜¯å°è£…äº†è°ƒç”¨<code>phantomjs</code>çš„æ¥å£ï¼Œéå¸¸æ–¹ä¾¿ï¼è¦å®ç°æŸä¸ªç½‘é¡µçš„é•¿æˆªå›¾ï¼Œä»£ç éå¸¸å°‘ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/local/bin/python3</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>

<span class="n">URL</span> <span class="o">=</span> <span class="s1">&#39;https://www.smslit.top&#39;</span>
<span class="n">PIC_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">),</span> <span class="s1">&#39;Pictures/python/screenshot&#39;</span><span class="p">)</span> 
<span class="n">PIC_NAME</span> <span class="o">=</span> <span class="s1">&#39;screenshot.png&#39;</span>

<span class="k">def</span> <span class="nf">screenshot_web</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">URL</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">PIC_PATH</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">PIC_NAME</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;capture the whole web page
</span><span class="s1">    :param url: the website url
</span><span class="s1">    :type url: str
</span><span class="s1">    :param path: the path for saving picture
</span><span class="s1">    :type str
</span><span class="s1">    :param name: the name of picture
</span><span class="s1">    :type name: str
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">PhantomJS</span><span class="p">()</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">set_window_size</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">pic_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="n">pic_path</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">browser</span><span class="o">.</span><span class="n">save_screenshot</span><span class="p">(</span><span class="n">pic_path</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Done!&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Failed!&#39;</span><span class="p">)</span>
    <span class="n">browser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">screenshot_web</span><span class="p">()</span></code></pre></div>
<p>é¦–å…ˆæ„é€ äº†ä¸€ä¸ªä»¥<code>PhantomJS</code>å¼•æ“ä¸ºæ ¸å¿ƒçš„å®ä¾‹ï¼Œç„¶å<code>get</code>ç›¸åº”ç½‘å€ï¼Œç­‰å¾…3ç§’åï¼Œæ‰§è¡Œä¿å­˜æˆªå›¾å‡½æ•°ã€‚ <code>selenium</code>ä¸­æä¾›äº†<code>WebDriverWait</code>æ¨¡å—ç”¨æ¥ç­‰å¾…ç½‘é¡µåŠ è½½ï¼Œè¿™é‡Œå°±ä¸å±•ç¤ºäº†ï¼Œä½¿ç”¨æ¯”è¾ƒæš´åŠ›çš„æ­»ç­‰ã€‚</p>

<h2 id="æ‰§è¡Œæ•ˆæœ">æ‰§è¡Œæ•ˆæœ</h2>

<p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">python3 screenshot.py</code></pre></div>
<p>âš ï¸</p>

<p>æ‰§è¡Œè„šæœ¬åå¯èƒ½ä¼šçœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p>

<blockquote>
<p>/usr/local/lib/python3.6/site-packages/selenium/webdriver/phantomjs/webdriver.py:49: UserWarning: Selenium support for PhantomJS has been deprecated, please use headless versions of Chrome or Firefox instead
 warnings.warn(&lsquo;Selenium support for PhantomJS has been deprecated, please use headless &lsquo;</p>
</blockquote>

<p><code>selenium</code>å»ºè®®ä½¿ç”¨<code>Chrome</code>æˆ–è€…<code>Firefox</code>çš„<code>--headless</code>æ¨¡å¼æ›¿ä»£<code>PhantomJS</code>ï¼Œä½†æ˜¯å¹¶ä¸å½±å“ä½¿ç”¨ã€‚</p>

<p><code>Finder</code>ä¸­æŸ¥çœ‹ç”Ÿæˆç›¸åº”ç›®å½•ï¼Œå¹¶æœ‰ç›¸åº”æˆªå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180627153011510569656.png" alt="20180627153011510569656.png" /></p>]]></content>
		</item>
		
		<item>
			<title>macä¸‹ä¿®å¤æ–‡ä»¶å’Œç›®å½•ä¸ºæ­£å¸¸æƒé™</title>
			<link>https://www.smslit.top/2018/06/26/mac-fix-permission/</link>
			<pubDate>Tue, 26 Jun 2018 15:03:47 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/06/26/mac-fix-permission/</guid>
			<description>&lt;p&gt;æ˜¨å¤©è¯¯åˆ äº†macbookä¸Š&lt;code&gt;smslit&lt;/code&gt;ç”¨æˆ·ä¸‹å¥½å¤šä¸œè¥¿ï¼Œæ— å¥ˆæ–°å»ºäº†ä¸€ä¸ªç”¨æˆ·&lt;code&gt;5km&lt;/code&gt;ï¼Œåœ¨åˆ é™¤åŸç”¨æˆ·ç›®å½•å‰ï¼Œå°†é‡è¦çš„æ–‡æ¡£æ‹·è´åˆ°äº†ç§»åŠ¨ç¡¬ç›˜ï¼Œç„¶åè¿›å…¥æ–°ç”¨æˆ·ä¸­ï¼ŒæŠŠæ–‡ä»¶ä»ç§»åŠ¨ç¡¬ç›˜æ‹·è´åˆ°ç”¨æˆ·ç›®å½•ä¸‹ï¼Œç»“æœä»Šå¤©&lt;code&gt;ls&lt;/code&gt;æŸ¥çœ‹æ–‡ä»¶çš„æ—¶å€™å‘ç°æƒé™ä¸å¯¹å‘€ï¼Œæ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•æƒé™éƒ½å˜æˆäº†&lt;code&gt;777&lt;/code&gt;ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æ˜¨å¤©è¯¯åˆ äº†macbookä¸Š<code>smslit</code>ç”¨æˆ·ä¸‹å¥½å¤šä¸œè¥¿ï¼Œæ— å¥ˆæ–°å»ºäº†ä¸€ä¸ªç”¨æˆ·<code>5km</code>ï¼Œåœ¨åˆ é™¤åŸç”¨æˆ·ç›®å½•å‰ï¼Œå°†é‡è¦çš„æ–‡æ¡£æ‹·è´åˆ°äº†ç§»åŠ¨ç¡¬ç›˜ï¼Œç„¶åè¿›å…¥æ–°ç”¨æˆ·ä¸­ï¼ŒæŠŠæ–‡ä»¶ä»ç§»åŠ¨ç¡¬ç›˜æ‹·è´åˆ°ç”¨æˆ·ç›®å½•ä¸‹ï¼Œç»“æœä»Šå¤©<code>ls</code>æŸ¥çœ‹æ–‡ä»¶çš„æ—¶å€™å‘ç°æƒé™ä¸å¯¹å‘€ï¼Œæ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•æƒé™éƒ½å˜æˆäº†<code>777</code>ã€‚</p>

<p>å°±åƒä¸‹å›¾ä¸­çš„æ ·å­ï¼Œç³Šäº†ä¸€ç‰‡éªšé»„ï¼Œå¥½æ‰çœ¼ï¼Œæƒé™è‚¯å®šä¸å¯¹å‘€ï¼Œè€Œä¸”è¿™åªæ˜¯ç›®å½•ï¼Œ<code>ll</code>æŸ¥çœ‹å…¶ä¸­ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå’‹è¿˜éƒ½æœ‰äº†è¿è¡Œæƒé™ï¼Œçº¢å‘¼å‘¼ä¸€æ¡æ¡çš„ï¼Œç°åœ¨æƒ³æƒ³ï¼Œå¥½åƒä¹‹å‰å’Œæœ‹å‹<a href="vimux.org" target="_blank">vimux</a>å°±æ³¨æ„åˆ°è¿‡è¿™ä¸ªé—®é¢˜ã€‚å¿…é¡»è§£å†³ä¸€ä¸‹äº†ã€‚</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180626152998802950626.png" width="480px"/> 
</figure>


<h2 id="æ–‡ä»¶çš„æ­£å¸¸æƒé™">æ–‡ä»¶çš„æ­£å¸¸æƒé™</h2>

<p>åœ¨è¿™ä¹‹å‰ï¼Œåé‡ŒåªçŸ¥é“æ€ä¹ˆæŸ¥çœ‹æ–‡ä»¶æƒé™ä»¥åŠå®ƒä»¬ä»£è¡¨çš„æ„æ€ï¼Œæ­£å¸¸æ–‡ä»¶å’Œç›®å½•çš„æƒé™è¿‡å»æ²¡å…³æ³¨ï¼Œå¥½æƒ­æ„§-_-!!!ã€‚</p>

<p>å…¶å®ä¹Ÿä¸éš¾ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å’Œç›®å½•ï¼Œçœ‹ä¸€ä¸‹å°±çŸ¥é“äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  Documents touch newfile <span class="o">&amp;&amp;</span> mkdir newdir <span class="o">&amp;&amp;</span> ll</code></pre></div>
<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180626152998790147157.png" width="480px"/> 
</figure>


<p>é‚£ä¹ˆæ­£å¸¸æƒé™ï¼š</p>

<ul>
<li>æ–‡ä»¶ï¼š<code>-rw-r--r--</code>ä¹Ÿå°±æ˜¯<code>644</code></li>
<li>ç›®å½•ï¼š<code>drwxr-xr-x</code>ä¹Ÿå°±æ˜¯<code>755</code></li>
</ul>

<h2 id="ä¿®å¤æƒé™">ä¿®å¤æƒé™</h2>

<p>æ€è·¯å¾ˆç®€å•ï¼ŒæŸ¥æ‰¾ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ä¿®æ”¹æƒé™ä¸º<code>644</code>ï¼ŒæŸ¥æ‰¾ç›®å½•ä¸‹æ‰€æœ‰ç›®å½•ä¿®æ”¹æƒé™ä¸º<code>755</code>ï¼Œè¿™é‡Œä½¿ç”¨<code>find</code>å‘½ä»¤æŒ‰ç±»å‹æŸ¥æ‰¾ï¼Œç„¶åæ ¹æ®ç±»å‹ä½¿ç”¨<code>chmod</code>å‘½ä»¤å¯¹åº”ä¿®æ”¹æƒé™ã€‚</p>

<ul>
<li><p>ä¿®æ”¹æ‰€æœ‰æ–‡ä»¶æƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  Documents find . -type f -exec chmod <span class="m">644</span> <span class="o">{}</span> <span class="se">\;</span>
<span class="c1"># ä¹Ÿå¯ä»¥ä½¿ç”¨ find . -type f -print0 | xargs -0 chmod 644</span></code></pre></div></li>

<li><p>ä¿®æ”¹ç›®å½•æƒé™</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  Documents find . -type d -exec chmod <span class="m">755</span> <span class="o">{}</span> <span class="se">\;</span>
<span class="c1"># ä¹Ÿå¯ä»¥ä½¿ç”¨ find . -type d -print0 | xargs -0 chmod 755</span></code></pre></div></li>
</ul>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180626152998915286786.png" width="480px"/> 
</figure>


<p>ä¸Šè¿°å‘½ä»¤ä¸­åˆ©ç”¨<code>find</code>å‘½ä»¤çš„<code>-type</code>æŒ‡å®šç±»å‹ï¼Œ<code>-exec</code>ä»¥findçš„ä¸€æ¡è¾“å‡ºä½œä¸º<code>chmod</code>çš„å‚æ•°ã€‚</p>

<blockquote>
<ul>
<li>âœåé¢çš„å…³é”®å­—ï¼Œä»£è¡¨çš„æ˜¯å½“å‰å·¥ä½œç›®å½•ï¼Œå†åé¢æ‰æ˜¯å‘½ä»¤</li>
<li>åœ¨ä¸Šé¢çš„æ¯è¡Œå‘½ä»¤ä¸‹é¢çš„æ³¨é‡Šä¸­æ˜¯å¦ä¸€ç§å®ç°æ–¹å¼ï¼Œå…¶ä¸­<code>-print0</code>å’Œ<code>-0</code>è¡¨ç¤ºå¯ä»¥å¤„ç†åç§°å¸¦ç©ºæ ¼çš„æ–‡ä»¶å’Œç›®å½•ã€‚</li>
</ul>
</blockquote>

<h2 id="å°è£…">å°è£…</h2>

<p>ä¸ºäº†æ›´æ–¹ä¾¿ä¸€äº›ï¼Œå¯ä»¥å†™ä¸€ä¸ªshellè„šæœ¬ï¼Œä¼ å…¥ä¸€ä¸ªè·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå°±å¯ä»¥ä¿®å¤æŒ‡å®šè·¯å¾„ä¸‹æ–‡ä»¶å’Œç›®å½•çš„æƒé™äº†ã€‚</p>

<h3 id="è„šæœ¬å†…å®¹">è„šæœ¬å†…å®¹</h3>

<p>åé‡Œç¼–å†™äº†è„šæœ¬<code>fixpermissioin</code>å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
helpinfo<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> -e <span class="s2">&#34;Usage:\n  </span><span class="nv">$0</span><span class="s2"> dirname\n  - dirname is a path&#34;</span>
<span class="o">}</span>

<span class="c1"># åˆ¤æ–­å‚æ•°</span>
<span class="k">if</span> <span class="o">[</span> <span class="nv">$#</span> !<span class="o">=</span> <span class="m">1</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span>
    helpinfo
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="c1"># åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨</span>
<span class="k">if</span> <span class="o">[</span> ! -d <span class="nv">$1</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2"> does not exist!\nPlease enter a valid path name!&#34;</span>
    helpinfo
    <span class="nb">exit</span> <span class="m">1</span>
<span class="k">fi</span>

<span class="c1"># ä¿®å¤ç›®å½•ä¸‹æ–‡ä»¶å’Œç›®å½•çš„æƒé™</span>
<span class="nb">echo</span> <span class="s2">&#34;Fix permission of files ...&#34;</span>
<span class="c1"># find $1  -type f -print0 | xargs -0 chmod 644</span>
find <span class="nv">$1</span> -type f -exec chmod <span class="m">644</span> <span class="o">{}</span> <span class="se">\;</span>
<span class="nb">echo</span> <span class="s2">&#34;Done!&#34;</span>
<span class="nb">echo</span> <span class="s2">&#34;Fix permission of dirs ...&#34;</span>
<span class="c1"># find $1  -type d -print0 | xargs -0 chmod 755</span>
find <span class="nv">$1</span> -type d -exec chmod <span class="m">755</span> <span class="o">{}</span> <span class="se">\;</span>
<span class="nb">echo</span> <span class="s2">&#34;Done!&#34;</span></code></pre></div>
<h3 id="è„šæœ¬æƒé™">è„šæœ¬æƒé™</h3>

<p>ä¸ºè„šæœ¬æ·»åŠ è¿è¡Œæƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">chmod +x fixpermissioin</code></pre></div>
<h3 id="æµ‹è¯•è„šæœ¬">æµ‹è¯•è„šæœ¬</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  /tmp ./fixpermission
Usage:
  ./fixpermission dirname
  - dirname is a path
âœ  /tmp ./fixpermission ~/Downloads/applications/

Fix permission of files ...
/Users/5km/Downloads/applications//pap.er_v3.2.dmg
/Users/5km/Downloads/applications//.DS_Store
/Users/5km/Downloads/applications//PicU-1.54.dmg
/Users/5km/Downloads/applications//Dash_4.2.0_<span class="o">[</span>TNT<span class="o">]</span>.dmg

Done!

Fix permission of <span class="nb">dirs</span> ...
/Users/5km/Downloads/applications/

Done!</code></pre></div>
<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>Peace! æå®šã€‚</p>]]></content>
		</item>
		
		<item>
			<title>vimæ’ä»¶ç®¡ç†å·¥å…·pack</title>
			<link>https://www.smslit.top/2018/06/25/vim-pack/</link>
			<pubDate>Mon, 25 Jun 2018 17:23:57 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/06/25/vim-pack/</guid>
			<description>&lt;p&gt;ä»Šå¤©æ‰‹æ®‹è¾“é”™äº†ä¸€ä¸ªåˆ é™¤å‘½ä»¤ï¼Œç»“æœæŠŠ&lt;code&gt;.vimrc&lt;/code&gt;å’Œ&lt;code&gt;.vim&lt;/code&gt;åˆ å…‰äº†ï¼Œå…¶å®æ›´æƒ¨çš„æ˜¯æˆ‘çš„ç”¨æˆ·ç›®å½•ä¸‹çš„æ‰€æœ‰è½¯ä»¶é…ç½®æ–‡ä»¶éƒ½æ²¡äº†ï¼Œå¯â€˜æ­Œâ€™å¯æ³£ï¼Œç°åœ¨å¬ç€å¤–é¢çš„å¤§é›¨å“—å•¦å•¦çš„ï¼Œè€å¤©éƒ½åœ¨ä¸ºæˆ‘çš„&amp;rsquo;å£®ä¸¾&amp;rsquo;å“­æ³£å‘€ï¼å¹¸å¥½æˆ‘ç”¨çš„vimæ’ä»¶ä¸å¤šï¼Œå‰æ®µæ—¶é—´å¬æœ‹å‹è¯´è¿‡&lt;code&gt;vim 8.0&lt;/code&gt;æœ‰ä¸ªæ–°çš„æ’ä»¶ç®¡ç†å·¥å…·æ¨ªç©ºå‡ºä¸–ï¼Œå«&lt;a href=&#34;https://github.com/maralla/pack&#34; target=&#34;_blank&#34;&gt;&lt;code&gt;pack&lt;/code&gt;&lt;/a&gt;ï¼Œé‚£å°±ç©è€ä¸€ç•ªå–½ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©æ‰‹æ®‹è¾“é”™äº†ä¸€ä¸ªåˆ é™¤å‘½ä»¤ï¼Œç»“æœæŠŠ<code>.vimrc</code>å’Œ<code>.vim</code>åˆ å…‰äº†ï¼Œå…¶å®æ›´æƒ¨çš„æ˜¯æˆ‘çš„ç”¨æˆ·ç›®å½•ä¸‹çš„æ‰€æœ‰è½¯ä»¶é…ç½®æ–‡ä»¶éƒ½æ²¡äº†ï¼Œå¯â€˜æ­Œâ€™å¯æ³£ï¼Œç°åœ¨å¬ç€å¤–é¢çš„å¤§é›¨å“—å•¦å•¦çš„ï¼Œè€å¤©éƒ½åœ¨ä¸ºæˆ‘çš„&rsquo;å£®ä¸¾&rsquo;å“­æ³£å‘€ï¼å¹¸å¥½æˆ‘ç”¨çš„vimæ’ä»¶ä¸å¤šï¼Œå‰æ®µæ—¶é—´å¬æœ‹å‹è¯´è¿‡<code>vim 8.0</code>æœ‰ä¸ªæ–°çš„æ’ä»¶ç®¡ç†å·¥å…·æ¨ªç©ºå‡ºä¸–ï¼Œå«<a href="https://github.com/maralla/pack" target="_blank"><code>pack</code></a>ï¼Œé‚£å°±ç©è€ä¸€ç•ªå–½ï¼</p>

<h2 id="ç°çŠ¶">ç°çŠ¶</h2>

<ul>
<li>vim8.1</li>
<li>macOS 10.13.5</li>
<li>vimç”¨æˆ·ç›®å½•ä¸‹é›¶é…ç½®é›¶æ’ä»¶</li>
</ul>

<h2 id="é—å¤±çš„vimrc">é—å¤±çš„vimrc</h2>

<p>æ½‡æ´’åœ°æ•²å®Œå‘½ä»¤ï¼ŒçŒ›å‡»å›è½¦ï¼Œçœ¼å‰å±å¹•ä¸Šå“—å•¦å•¦çš„ä¸€ç›´é—ªè¿‡<code>permission denied</code>å­—æ ·ï¼Œæ‰å¿ƒäº†ï¼Œååº”è¿‡æ¥çš„æ—¶å€™å·²ç»è¿‡å»3ç§’ï¼Œæ•…ä½œæ·¡å®šçš„åé‡Œä¸€å¥—ç»„åˆæ‹³<code>ctrl</code>+<code>c</code>ï¼Œè®©è¿™çƒ¦äººçš„æ‰“å°æ¶ˆæ¯æ¶ˆåœäº†ï¼Œéšåå¬åˆ°åé‡Œçš„ä¸€é˜µå„¿é¬¼å“­ç‹¼åšï¼š</p>

<blockquote>
<p>æˆ‘å»ï½æˆ‘å»ï½æˆ‘å»ï½æ¥ï¼Œå•Šï½</p>
</blockquote>

<p>ç”¨æˆ·ç›®å½•å·²å®ï¼Œèƒ†æˆ˜å¿ƒæƒŠçš„æŸ¥çœ‹äº†ç”¨æˆ·ç›®å½•ä¸‹çš„<code>Documents</code>ã€<code>Downloads</code>ã€<code>Pictures</code>å‡ ä¸ªå…³é”®ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œè¿˜å¥½è¿˜å¥½ï¼Œéƒ½è¿˜å¥åœ¨ï¼Œå’‹è¿˜æœ‰ç§ä¸ç¥¥çš„é¢„æ„Ÿï¼Œå•Šï½ç”¨æˆ·ç›®å½•ä¸‹çš„Libraryç›®å½•ä¸‹çš„åº”ç”¨ç¨‹åºçš„é…ç½®å’Œæ•°æ®å·²ç»æ²¡äº†å¤§åŠï¼Œè¿˜æœ‰éšè—çš„é‚£äº›xxxrcæ–‡ä»¶éƒ½æœ¨æœ‰äº†ï¼Œä¼šå‘¼å¸çš„ç—›ï¼</p>

<p>å¥½å§ï¼Œç´¢æ€§ç›´æ¥æŠŠæ–‡ä»¶æ‹·å‡ºæ¥æ–°å»ºä¸€ä¸ª<code>5km</code>ç”¨æˆ·å§ï¼Œä»æ–°å¼€å§‹ï¼</p>

<p>ä¹‹å‰<code>.vimrc</code>é‡Œçš„å†…å®¹è¿˜ä¸å°‘ï¼Œä¹Ÿè¦ä»æ–°å¼€å§‹å—ï¼Ÿè¿˜æ˜¯ç®—äº†å§ï¼Œå› ä¸ºæˆ‘ä¹‹å‰æœ‰ç”¨Timemachineå¤‡ä»½è¿‡æ•´ä¸ªç³»ç»Ÿï¼Œä½ é—®æˆ‘ä¸ºä»€ä¹ˆä¸ç›´æ¥æ¢å¤å¤‡ä»½å‘¢ï¼Œè¿˜æ–°é”®ç”¨æˆ·å¹²å˜›ï¼Ÿå› ä¸ºï¼š</p>

<ul>
<li>å¤‡ä»½æ˜¯nä¸ªå¤šæœˆå‰çš„ï¼›</li>
<li>æˆ‘æ—©å°±æƒ³æ¸…ç†é—¨æˆ·äº†ï¼›</li>
</ul>

<p>è¿æ¥å¤‡ä»½ç›˜ï¼Œæ‰¾äº†æœ€æ–°å¤‡ä»½ä¸‹çš„æ–‡ä»¶ï¼Œæœç„¶è¢«æˆ‘æ‰¾åˆ°äº†<code>.vimrc</code>ï¼Œå‘€ï¼è¿˜æœ‰<code>.vim</code>ï¼Œè¿›å»ä¸€çœ‹æ˜¯åªæ˜¯ç›®å½•ç»“æ„ç„¶è€Œæ²¡æœ‰æ–‡ä»¶ï¼Œæ— æ‰€è°“äº†ï¼Œè¦ä»æ–°å¼€å§‹å˜›ï¼ŒåªæŠŠé—å¤±çš„<code>.vimrc</code> cpåˆ°ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæˆ‘æ‰¾åˆ°äº†é—å¤±çš„ä½ ï¼Œè¿™å°±æ˜¯å‘½ï¼</p>

<h2 id="æˆ‘éœ€è¦è£…å•¥æ’ä»¶">æˆ‘éœ€è¦è£…å•¥æ’ä»¶</h2>

<p>ä¹‹å‰ç”¨<code>bundle</code>ç®¡ç†vimæ’ä»¶ï¼Œæ‰€ä»¥å»å¤‡ä»½ç›˜é‡Œçš„<code>.vim</code>ä¸‹çœ‹çœ‹<code>bundle</code>ç›®å½•ä¸‹æœ‰å•¥æ¥ç€ï¼Œå‘µå‘µè®°ä¸å¤ªæ¸…äº†ï¼Œçœ‹ä¸€ä¸‹å°±çŸ¥é“äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">completor.vim
completor-neosnippet
vim-colors-solarized
vim-airline
vim-airline-themes
vim-markdown</code></pre></div>
<h2 id="packä¸€ä¸‹">packä¸€ä¸‹</h2>

<p>å»githubä¸Šæ‰¾åˆ°äº†<a href="https://github.com/maralla/pack" target="_blank"><code>pack</code></a>ï¼Œæ•™ç¨‹å†™çš„å¾ˆæ¸…æ¥šè€¶ï¼æ•™ç¨‹é‡Œçš„ç¤ºä¾‹ç«Ÿç„¶æœ‰æˆ‘è£…çš„å››ä¸ªæ’ä»¶çš„å®‰è£…æ¼”ç¤ºï¼Œå¯ä»¥çš„â€¦â€¦^â€†_â€†^</p>

<h3 id="å®‰è£…pack">å®‰è£…pack</h3>

<ul>
<li>å»å·¥ç¨‹çš„<a href="https://github.com/maralla/pack/releases" target="_blank">release</a>é¡µé¢ï¼Œæ‰¾åˆ°æœ€æ–°çš„å‘å¸ƒåŒ…<code>pack-v0.2.2-x86_64-apple-darwin.tar.gz</code>ä¸‹è½½ï¼›</li>
<li>è§£å‹å®‰è£…åŒ…ï¼Œè¿›å…¥ç›®å½•å¯ä»¥çœ‹åˆ°<code>pack</code>å‘½ä»¤è¡Œå·¥å…·ï¼›</li>
<li>å°†<code>pack</code> cpåˆ°<code>/usr/local/bin</code>ä¸‹ï¼›</li>

<li><p>é‡æ–°æ‰“å¼€ä¸€ä¸ª<a href="https://www.iterm2.com" target="_blank">iterm2</a>çª—å£ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  ~ pack -h
pack <span class="m">0</span>.2.3
maralla &lt;maralla.ai@gmail.com&gt;
Package manager <span class="k">for</span> vim

USAGE:
    pack <span class="o">[</span>SUBCOMMAND<span class="o">]</span>

FLAGS:
    -h, --help       Prints <span class="nb">help</span> information
    -V, --version    Prints version information

SUBCOMMANDS:
    config       Configure/edit the package specific configuration
    generate     Generate the pack package file
    <span class="nb">help</span>         Prints this message or the <span class="nb">help</span> of the given subcommand<span class="o">(</span>s<span class="o">)</span>
    install      Install new packages/plugins
    list         List installed packages
    move         Move a package to a different category or make it optional.
    uninstall    Uninstall packages/plugins
    update       Update packages</code></pre></div></li>
</ul>

<h3 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h3>

<p>ç”¨packå®‰è£…å¾ˆæ–¹ä¾¿ï¼Œç°åœ¨å¤§éƒ¨åˆ†vimæ’ä»¶éƒ½æ‰˜ç®¡åˆ°äº†githubä¸Šï¼Œè²Œä¼¼åŸºæœ¬çš„å®‰è£…æ–¹å¼å°±æ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pack install maralla/completor.vim maralla/completor-neosnippet plasticboy/vim-markdown vim-airline/vim-airline vim-airline/vim-airline-themes

   âœ“ <span class="o">[</span>maralla/completor.vim<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>maralla/completor-neosnippet<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>plasticboy/vim-markdown<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>vim-airline/vim-airline<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>vim-airline/vim-airline-themes<span class="o">]</span> <span class="k">done</span></code></pre></div>
<p>åƒä¸»é¢˜è¿™ç§æ’ä»¶è¦ä»¥<code>opt</code>æ–¹å¼å®‰è£…ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pack install altercation/vim-colors-solarized -o

   âœ“ <span class="o">[</span>altercation/vim-colors-solarized<span class="o">]</span> <span class="k">done</span></code></pre></div>
<p>å…¶å®ƒå®‰è£…çš„å¸®åŠ©ä¿¡æ¯å¯ä»¥è¿™æ ·æŸ¥çœ‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pack install -h</code></pre></div>
<h3 id="æŸ¥çœ‹å®‰è£…çš„æ’ä»¶">æŸ¥çœ‹å®‰è£…çš„æ’ä»¶</h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pack list
altercation/vim-colors-solarized <span class="o">=</span>&gt; pack/default/opt
maralla/completor-neosnippet <span class="o">=</span>&gt; pack/default/start
maralla/completor.vim <span class="o">=</span>&gt; pack/default/start
plasticboy/vim-markdown <span class="o">=</span>&gt; pack/default/start
vim-airline/vim-airline <span class="o">=</span>&gt; pack/default/start
vim-airline/vim-airline-themes <span class="o">=</span>&gt; pack/default/start</code></pre></div>
<h3 id="å…¶å®ƒç”¨æ³•">å…¶å®ƒç”¨æ³•</h3>

<h4 id="æ›´æ–°æ’ä»¶">æ›´æ–°æ’ä»¶</h4>

<p>æ›´æ–°å…¨éƒ¨æ’ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pack update

   âœ“ <span class="o">[</span>altercation/vim-colors-solarized<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>maralla/completor-neosnippet<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>maralla/completor.vim<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>plasticboy/vim-markdown<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>vim-airline/vim-airline<span class="o">]</span> <span class="k">done</span>
   âœ“ <span class="o">[</span>vim-airline/vim-airline-themes<span class="o">]</span> <span class="k">done</span></code></pre></div>
<p>æ›´æ–°æŒ‡å®šæ’ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pack update altercation/vim-colors-solarized

   âœ“ <span class="o">[</span>altercation/vim-colors-solarized<span class="o">]</span> <span class="k">done</span></code></pre></div>
<h4 id="é…ç½®æ’ä»¶">é…ç½®æ’ä»¶</h4>

<p>å½¢å¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pack config authorname/packname</code></pre></div>
<p>æ­¤æ—¶ä¼šæ‰“å¼€vimï¼Œè¾“å…¥ç›¸åº”æ’ä»¶çš„é…ç½®å†…å®¹ï¼Œä¿å­˜å†æ¬¡æ‰“å¼€vimå³å¯ç”Ÿæ•ˆã€‚</p>

<h4 id="å¸è½½æ’ä»¶">å¸è½½æ’ä»¶</h4>

<p>åªéœ€å°†å®‰è£…æ’ä»¶æ—¶çš„<code>install</code>æ”¹æˆ<code>uninstall</code>å³å¯ï¼Œå¦å¤–æœ€åå¯ä»¥åŠ å‚æ•°<code>-d</code>æˆ–<code>-a</code>ï¼Œè¡¨ç¤ºå°†é…ç½®æ–‡ä»¶ä¹Ÿåˆ é™¤ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>è‡´æ­¤ï¼Œç¨å¾®å°†<code>.vimrc</code>éƒ¨åˆ†æ— ç”¨çš„å†…å®¹æ³¨é‡Šæ‰åï¼Œåé‡Œæ½‡æ´’çš„<code>vim</code>åˆå¼ºåŠ¿å½’æ¥ã€‚</p>

<ul>
<li><code>rm</code>å‘½ä»¤åŠ é¤<code>-rf</code>é¡»è°¨æ…ï¼</li>
<li>åˆ©ç”¨å¥½<code>Timemachine</code>ï¼Œå¸¸å¤‡ä»½ï¼</li>
<li><code>pack</code>å¾ˆç”ŸçŒ›ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨ï¼</li>
</ul>

<p>ç¬¬äºŒæ¡è‡£å¦¾åšä¸åˆ°ï¼Œä¸ä¸ºä»€ä¹ˆï¼æˆ‘ä¸æ˜¯äººé€ é©ï¼Œæˆ‘æ˜¯çœŸçš„çš®ï¼</p>]]></content>
		</item>
		
		<item>
			<title>çˆ¬è™«å®è·µä¹‹hexoåšå®¢åˆ†æ</title>
			<link>https://www.smslit.top/2018/06/25/spider-practice-hexo-blogo/</link>
			<pubDate>Mon, 25 Jun 2018 15:17:27 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/06/25/spider-practice-hexo-blogo/</guid>
			<description>&lt;p&gt;çˆ¬è™«æœ€å¥½å¤„ç†çš„å°±æ˜¯é™æ€é¡µé¢ï¼Œè€Œé™æ€åšå®¢å°±æ˜¯é™æ€é¡µé¢ï¼Œåƒ&lt;a href=&#34;https://jekyllrb.com&#34; target=&#34;_blank&#34;&gt;jekyll&lt;/a&gt;å’Œ&lt;a href=&#34;https://hexo.io&#34; target=&#34;_blank&#34;&gt;hexo&lt;/a&gt;ç”Ÿæˆçš„åšå®¢å°±å±äºè¿™ä¸€ç±»å‹ã€‚æœ¬æ–‡å°†è®°å½•é’ˆå¯¹hexoåšå®¢ä¸­åšæ–‡çš„çˆ¬å–å’Œç»Ÿè®¡ä»¥åŠåšæ–‡ä¸­å›¾ç‰‡çš„æ‰¹é‡çˆ¬å–ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>çˆ¬è™«æœ€å¥½å¤„ç†çš„å°±æ˜¯é™æ€é¡µé¢ï¼Œè€Œé™æ€åšå®¢å°±æ˜¯é™æ€é¡µé¢ï¼Œåƒ<a href="https://jekyllrb.com" target="_blank">jekyll</a>å’Œ<a href="https://hexo.io" target="_blank">hexo</a>ç”Ÿæˆçš„åšå®¢å°±å±äºè¿™ä¸€ç±»å‹ã€‚æœ¬æ–‡å°†è®°å½•é’ˆå¯¹hexoåšå®¢ä¸­åšæ–‡çš„çˆ¬å–å’Œç»Ÿè®¡ä»¥åŠåšæ–‡ä¸­å›¾ç‰‡çš„æ‰¹é‡çˆ¬å–ã€‚</p>

<p>æˆ‘ä»¬çŸ¥é“<code>hexo</code>åšå®¢ç³»ç»Ÿç”Ÿæˆçš„åšå®¢ï¼Œå¤§é‡ä¾èµ–ä¸»é¢˜æ¨¡æ¿ï¼Œæ‰€ä»¥å¯¹äºé¡µé¢å†…å®¹çš„è§£æä¸€å®šæ›´æœ‰è§„å¾‹å¯å¾ªï¼Œè™½ç„¶ä¸åŒä¸»é¢˜ä¹‹é—´å­˜åœ¨å·®å¼‚ï¼Œä½†æ˜¯ä¸€å®šå­˜åœ¨é€šç”¨çš„æ–¹æ³•å¯ä»¥é’ˆå¯¹æ‰€æœ‰hexoåšå®¢ã€‚</p>

<h2 id="å¹³å°è¯´æ˜">å¹³å°è¯´æ˜</h2>

<ul>
<li>æ“ä½œç³»ç»Ÿï¼šmacOS 10.13.5</li>
<li>æµè§ˆå™¨ï¼šsafari</li>
<li>pythonç‰ˆæœ¬ï¼špython3.6.5</li>
<li>pythonåº“ç®¡ç†å·¥å…·ï¼špip3</li>
</ul>

<p>å…¶å®ƒå¹³å°æ€è·¯ä¸€è‡´ï¼Œåªæ˜¯å·¥å…·ä½¿ç”¨æœ‰ç•¥å¾®å·®åˆ«ï¼Œå¤§éƒ¨åˆ†ç”¨æˆ·å¯èƒ½ä½¿ç”¨chromeåˆ†æé¡µé¢ï¼Œå…¶å®safariå’Œchromeåˆ†æé¡µé¢çš„è¿‡ç¨‹ä¸€æ ·ï¼Œæ£€æŸ¥çª—å£å¸ƒå±€ç¨æœ‰ä¸åŒè€Œå·²ï¼Œä½†æ˜¯macOSä¸‹éƒ½å¯ä»¥é€šè¿‡<code>command</code>+<code>option</code>+<code>i</code>è°ƒå‡ºè¿™ä¸ªå¼€å‘ç”¨çš„çª—å£ã€‚</p>

<blockquote>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé»˜è®¤safariæ˜¯æ‰“ä¸å¼€é¡µé¢å…ƒç´ æ£€æŸ¥çª—å£çš„ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸‹ï¼š</p>

<ul>
<li>æ‰“å¼€<code>åå¥½è®¾ç½®</code>ï¼Œè°ƒåˆ°<code>é«˜çº§</code>æ ‡ç­¾é¡µï¼›</li>
<li>å‹¾é€‰<code>åœ¨èœå•æ æ˜¾ç¤º&quot;å¼€å‘&quot;èœå•</code>ï¼Œå‹¾é€‰æˆåŠŸåï¼Œèœå•æ ä¼šå¤šå‡º<code>å¼€å‘</code>é¡¹</li>
</ul>
</blockquote>

<h2 id="ç›®æ ‡">ç›®æ ‡</h2>

<p>æœ¬æ–‡ä¸­çˆ¬è™«åº”ç”¨çš„ç›®æ ‡æ˜¯åˆ†æhexoåšå®¢ä¸­åšä¸»æ¯æœˆå‘å¸ƒæ–‡ç« çš„æ•°é‡ï¼Œå¹¶ç»˜åˆ¶ç›¸å…³æŸ±çŠ¶å›¾ï¼Œä»¥åŠçˆ¬å–æ¯ç¯‡æ–‡ç« é‡Œçš„å›¾ç‰‡ã€‚</p>

<h2 id="åˆ†æ">åˆ†æ</h2>

<p>å¯ä»¥å‘ç°hexoåšå®¢ç³»ç»Ÿä¸­å­˜åœ¨<code>page</code>è¿™ç§å±æ€§çš„é¡µé¢ï¼Œå…¶ä¸­ä¼šæœ‰ä¸ª<code>archive</code>ï¼ˆä¹Ÿå°±æ˜¯å½’æ¡£ï¼‰çš„é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢ä¸­æ˜¯æ•´ä¸ªåšå®¢ä¸­æŒ‰ç…§å¹´ä»½æ•´ç†çš„åšæ–‡åˆ—è¡¨ï¼Œæ¯”å¦‚åé‡Œçš„å¥½å‹<a href="http://www.litreily.top/" target="_blank">LITREILY</a>çš„å½’æ¡£é¡µé¢<a href="http://www.litreily.top/archives/ï¼š" target="_blank">http://www.litreily.top/archives/ï¼š</a></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180625152990237065363.png" alt="20180625152990237065363.png" /></p>

<p>å¯ä»¥çœ‹åˆ°é¡µé¢ä¸­åšæ–‡åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼ŒåŒ…å«åšæ–‡æ ‡é¢˜ã€é“¾æ¥ï¼Œè€Œé“¾æ¥ä¸­åŒ…å«äº†æ—¥æœŸä¿¡æ¯ã€‚æ‰€ä»¥åˆ†æè¿™ä¸ªé¡µé¢ä¸­æ•°æ®å°±èƒ½å¾—åˆ°åšæ–‡çš„å…·ä½“ä¿¡æ¯ï¼š</p>

<ul>
<li>åšæ–‡æ ‡é¢˜</li>
<li>åšæ–‡é“¾æ¥</li>
<li>åšæ–‡æ—¥æœŸ</li>
</ul>

<p>æœ‰äº†ä¸Šé¢çš„ä¿¡æ¯å°±å¯ä»¥æŒ‰æ—¶é—´ç»Ÿè®¡åšæ–‡äº†ï¼ŒåŒæ—¶å¯ä»¥è®¿é—®åšæ–‡é“¾æ¥ï¼Œå› ä¸ºæ¨¡æ¿çš„åŸå› ï¼Œæ¯ç¯‡åšæ–‡DOMæ ‘ä¸€å®šæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å°±å¯ä»¥å…ˆæ‰¾åˆ°åšæ–‡å†…å®¹éƒ¨åˆ†çš„èŠ‚ç‚¹ï¼Œç„¶ååœ¨èŠ‚ç‚¹ä¸­æ‰¾<code>img</code>èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼Œè¿™æ ·å°±èƒ½è·å–å›¾ç‰‡çš„é“¾æ¥äº†<code>img</code>èŠ‚ç‚¹çš„<code>src</code>å±æ€§å†…å®¹ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180625152990261978481.png" alt="20180625152990261978481.png" /></p>

<h2 id="å®ç°æ€è·¯è®¾è®¡">å®ç°æ€è·¯è®¾è®¡</h2>

<h3 id="è¿‡ç¨‹">è¿‡ç¨‹</h3>

<ol>
<li><code>requests</code>åº“è·å–æŒ‡å®šå½’æ¡£åœ°å€é¡µé¢å†…å®¹ï¼Œåˆ©ç”¨<code>pyquery</code>åº“æ ¹æ®æŒ‡å®šCSSé€‰æ‹©å™¨å¾—åˆ°çš„åšæ–‡åˆ—è¡¨ä¿¡æ¯ï¼Œè¿”å›ç»“æœæ˜¯å­—å…¸ï¼ŒåŒ…å«åšå®¢æ ‡é¢˜å’Œåšæ–‡åˆ—è¡¨ï¼Œåšæ–‡åˆ—è¡¨çš„å…ƒç´ ä¸ºæ¯ä¸ªåšæ–‡çš„ä¿¡æ¯ï¼ŒåŒ…å«ï¼š

<ul>
<li>æ ‡é¢˜</li>
<li>é“¾æ¥(æ ¹æ®<code>pyquery</code>è§£æçš„ä¸å®Œæ•´é“¾æ¥ä¸<code>urllib.parse</code>å·¥å…·é…åˆåˆæˆå®Œæ•´åšæ–‡é“¾æ¥)</li>
<li>æ—¥æœŸ</li>
</ul></li>
<li>æ ¹æ®ç¬¬1æ­¥è¿”å›çš„æ•°æ®ç»Ÿè®¡è‡ªåšå®¢åˆ›å»ºæ¥æ¯ä¸ªæœˆåšæ–‡å‘è¡¨æ•°é‡ï¼Œè¿”å›ç›¸åº”ç»Ÿè®¡çš„å­—å…¸æ•°æ®ï¼›</li>
<li>æ ¹æ®ç¬¬2æ­¥ä¸­çš„è¿”å›ç»“æœï¼Œåˆ©ç”¨<code>matplotlib</code>çš„<code>pyplot</code>ç»˜åˆ¶ç»Ÿè®¡å›¾ï¼›</li>
<li>æ ¹æ®ç¬¬1æ­¥ä¸­è·å–çš„åšæ–‡åˆ—è¡¨æ•°æ®ï¼Œ<code>requests</code>åº“è®¿é—®åšæ–‡é“¾æ¥ï¼Œ<code>pyquery</code>è§£æ<code>img</code>èŠ‚ç‚¹ï¼Œè·å–å›¾ç‰‡é“¾æ¥ä¿¡æ¯ï¼Œæœ€ç»ˆå½¢æˆå›¾ç‰‡ä¿¡æ¯åˆ—è¡¨ï¼Œä½œä¸ºç»“æœè¿”å›ï¼›</li>
<li>æ ¹æ®ç¬¬4æ­¥ç»“æœï¼Œè®¿é—®å›¾ç‰‡é“¾æ¥è·å–å›¾ç‰‡äºŒè¿›åˆ¶å†…å®¹ï¼Œåˆ©ç”¨<code>hashlib</code>çš„<code>md5</code>ç”Ÿæˆå›¾ç‰‡åç§°ï¼Œåˆ©ç”¨<code>os</code>åº“æ£€æŸ¥å¹¶åˆ›å»ºä»¥åšæ–‡æ ‡é¢˜å‘½åçš„ç›®å½•ï¼Œå°†å›¾ç‰‡æŒ‰ç…§ç”Ÿæˆå›¾ç‰‡åç§°ä¿å­˜åˆ°ç›¸åº”çš„ç›®å½•ä¸­ã€‚</li>
</ol>

<h3 id="å½¢å¼">å½¢å¼</h3>

<p>æŒ‰ç…§æ–‡ç«  <a href="/2018/06/21/spider-practice-pic-dog/" target="_blank">çˆ¬è™«å®è·µä¹‹å¤´æ¡ç‹—ç‹—å›¾ç‰‡</a> é€šç”¨åŒ–è„šæœ¬å°èŠ‚æè¿°çš„ï¼Œå°†è„šæœ¬åšæˆä¸€å‘½ä»¤è¡Œå·¥å…·å½¢å¼ä½¿ç”¨çš„æ–¹å¼ï¼Œå·¥å…·åˆ†ä¸ºä¸¤ä¸ªå­å‘½ä»¤ï¼šç»Ÿè®¡åšå®¢æ´»è·ƒåº¦å­å‘½ä»¤å’Œçˆ¬å–åšå®¢å†…å›¾ç‰‡çš„å‘½ä»¤ã€‚</p>

<p>åŒæ—¶å‘½ä»¤è¿˜éœ€ä¼ å…¥åšå®¢å½’æ¡£é¡µé¢åœ°å€å’Œé¡µé¢ä¸­åšæ–‡åˆ—è¡¨å…ƒç´ çš„CSSé€‰æ‹©å™¨ï¼Œå¤§æ¦‚çš„è°ƒç”¨å½¢å¼ï¼š</p>

<ul>
<li><strong>çˆ¬è™«è„šæœ¬å</strong>   <u>å­å‘½ä»¤</u>   <em>å½’æ¡£é¡µé¢åœ°å€</em>  <em>åšæ–‡é“¾æ¥CSSé€‰æ‹©å™¨</em></li>
</ul>

<p>è€Œå‘½ä»¤å½¢å¼ä¸‹ï¼Œå‘½ä»¤å‚æ•°çš„è·å–éœ€è¦ä½¿ç”¨<code>sys</code>åº“ã€‚</p>

<h3 id="pythonåº“">pythonåº“</h3>

<p>æ ¹æ®ä¸Šè¿°å†…å®¹æè¿°ï¼Œç¨‹åºä¼šä¾èµ–ä¸‹é¢è¿™äº›åº“ï¼š</p>

<ul>
<li><code>requests</code></li>
<li><code>pyquery</code></li>
<li><code>urllib</code></li>
<li><code>matplotlib</code></li>
<li><code>hashlib</code></li>
<li><code>os</code></li>

<li><p><code>sys</code></p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pip3 list</code></pre></div></li>
</ul>

<p>ä¸Šè¿°å‘½ä»¤æŸ¥çœ‹å®‰è£…çš„åŒ…ï¼Œæ²¡æœ‰å®‰è£…çš„pythonåº“é€šè¿‡<code>pip3</code>å®‰è£…å³å¯ã€‚</p>

<h2 id="ä»£ç å®ç°">ä»£ç å®ç°</h2>

<h3 id="å¯¼å…¥æ‰€éœ€åº“">å¯¼å…¥æ‰€éœ€åº“</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">md5</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span> <span class="kn">as</span> <span class="nn">up</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span></code></pre></div>
<h3 id="è·å–åšæ–‡åˆ—è¡¨">è·å–åšæ–‡åˆ—è¡¨</h3>

<p>æ ¹æ®å°èŠ‚<a href="#è¿‡ç¨‹">è¿‡ç¨‹</a>ä¸­ç¬¬ä¸€æ­¥çš„æè¿°ï¼Œè·å–åšå®¢æ–‡ç« åˆ—è¡¨ï¼Œå°è£…ä¸ºä¸€ä¸ªæ–¹æ³•<code>get_blog_posts</code>ï¼Œéœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼š
- åšå®¢å½’æ¡£ç½‘å€
- é€‰æ‹©é¡µé¢ä¸­åšæ–‡æ¡ç›®å¯¹åº”çš„<code>&lt;a&gt;</code>æ ‡ç­¾</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_blog_posts</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">css_selector</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;è·å–åšå®¢æ–‡ç« åˆ—è¡¨
</span><span class="s1">    :param url: åšå®¢çš„å½’æ¡£é¡µé¢åœ°å€
</span><span class="s1">    :type url: å­—ç¬¦ä¸²
</span><span class="s1">    :param css_selector: ç”¨äºé€‰æ‹©æ–‡ç« æ¡ç›®å¯¹åº”&lt;a&gt;æ ‡ç­¾çš„CSSé€‰æ‹©å™¨
</span><span class="s1">    :type css_selector: å­—ç¬¦ä¸²
</span><span class="s1">    :return archive: ä¸€ä¸ªåŒ…å«åšå®¢åç§°å’Œåšæ–‡åˆ—è¡¨çš„å­—å…¸ï¼Œåšæ–‡åˆ—è¡¨åŒ…å«æ ‡é¢˜ã€é“¾æ¥å’Œæ—¥æœŸä¿¡æ¯
</span><span class="s1">    :rtype: dict
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADERS</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">url_p</span> <span class="o">=</span> <span class="n">up</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
            <span class="n">host_url</span> <span class="o">=</span> <span class="s1">&#39;{0}://{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url_p</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span> <span class="n">url_p</span><span class="o">.</span><span class="n">netloc</span><span class="p">)</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="n">archive</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">doc</span><span class="p">(</span><span class="s1">&#39;head title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span>
                <span class="s1">&#39;posts&#39;</span><span class="p">:</span> <span class="p">[]</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">(</span><span class="n">css_selector</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">article</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">post</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span>
                    <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">host_url</span><span class="p">,</span> <span class="n">post</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">href</span><span class="p">]),</span>
                    <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">post</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">href</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">11</span><span class="p">]</span>
                <span class="p">}</span>
                <span class="n">archive</span><span class="p">[</span><span class="s1">&#39;posts&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">article</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">archive</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectionError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;ç½‘ç»œé“¾æ¥å¼‚å¸¸ï¼è¯·é‡è¯•ï¼&#39;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span></code></pre></div>
<p>æ¯”å¦‚å¯¹äºä¸Šé¢æåˆ°çš„<a href="http://www.litreily.top/archives/" target="_blank">http://www.litreily.top/archives/ </a>å¯ä»¥ç”¨æµè§ˆå™¨æŸ¥çœ‹ä¸€ä¸‹å…ƒç´ ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180625152990601332320.png" alt="20180625152990601332320.png" /></p>

<p>é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä»¥ä¸‹CSSé€‰æ‹©å™¨è¿›è¡ŒèŠ‚ç‚¹çš„æŸ¥è¯¢:</p>

<blockquote>
<p>&rsquo;.post-archive .listing li a&rsquo;</p>
</blockquote>

<p>å¯ä»¥è¿™æ ·è°ƒç”¨å‡½æ•°è·å–åšæ–‡åˆ—è¡¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">get_blog_posts</span><span class="p">(</span><span class="s1">&#39;http://www.litreily.top/archives&#39;</span><span class="p">,</span> <span class="s1">&#39;.post-archive .listing li a&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="ç»Ÿè®¡åšæ–‡">ç»Ÿè®¡åšæ–‡</h3>

<p>æ ¹æ®ä¸Šä¸€æ­¥å¾—åˆ°çš„åšæ–‡åˆ—è¡¨ç»Ÿè®¡æ¯å¹´çš„æ¯ä¸ªæœˆä»½å‘è¡¨åšæ–‡æ•°é‡ï¼Œç»“æœä¸ºå­—å…¸æ•°æ®ï¼Œæœ€å¤–å±‚é”®ä¸ºå¹´ä»½ï¼ŒæŒ‡ä¸ºä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸ä»¥æœˆä»½ä½œä¸ºé”®ï¼Œå€¼ä¸ºå¯¹åº”æœˆä»½çš„åšå®¢æ•°é‡ï¼š</p>

<ol>
<li>ç”Ÿæˆç©ºåˆ—è¡¨ï¼›</li>
<li>æŸ¥è¯¢ä¸€ä¸ªåšæ–‡ä¿¡æ¯ä¸­æ—¥æœŸä¿¡æ¯ï¼Œæ ¹æ®å¹´ä»½åˆ¤æ–­å­—å…¸ä¸­æœ‰æ— å¯¹åº”é”®ï¼Œè‹¥æ²¡æœ‰æ·»åŠ æ–°é”®ï¼Œåˆå§‹åŒ–å€¼ä¸ºå­—å…¸ï¼Œè¯¥å­—å…¸ä»¥12ä¸ªæœˆä»½å¯¹åº”æ•°å­—å­—ç¬¦ä¸²ä¸ºé”®ï¼Œå€¼åˆå§‹åŒ–ä¸º0ï¼›</li>
<li>æ ¹æ®åšæ–‡æ—¥æœŸçš„æœˆä»½ä¸ºï¼Œå¯¹åº”é”®çš„å€¼+1ï¼›</li>
<li>ä¸€ç›´é‡å¤2ã€3æ­¥ï¼ŒçŸ¥é“åˆ—è¡¨ä¸­æ‰€æœ‰åšå®¢æŸ¥è¯¢ä¸€éï¼›</li>
<li>è¿”å›ç»Ÿè®¡ç»“æœï¼›</li>
</ol>

<p>å…·ä½“å®ç°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">statistic_posts_by_date</span><span class="p">(</span><span class="n">posts</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;æŒ‰ç…§æ—¥æœŸå¯¹åšæ–‡åˆ†ç±»ç»Ÿè®¡æ–‡ç« ä¸ªæ•°
</span><span class="s1">    :param posts: åšæ–‡åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«æ ‡é¢˜ã€é“¾æ¥å’Œæ—¥æœŸä¿¡æ¯
</span><span class="s1">    :type posts: list
</span><span class="s1">    :return statistics: æŒ‰ç…§å¹´ä»½æœˆä»½ç»Ÿä¸€æ–‡ç« ä¸ªæ•°
</span><span class="s1">    :rtype statistics: dict
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">statistics</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">months</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">%02d</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
        <span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">statistics</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">)</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">statistics</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">month_key</span> <span class="ow">in</span> <span class="n">months</span><span class="p">:</span>
                <span class="n">statistics</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">month_key</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">statistics</span><span class="p">[</span><span class="n">year</span><span class="p">][</span><span class="n">month</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">statistics</span></code></pre></div>
<h3 id="ç»˜åˆ¶ç»Ÿè®¡å›¾">ç»˜åˆ¶ç»Ÿè®¡å›¾</h3>

<p>è¿™ä¸€æ­¥åˆ©ç”¨<code>matplotlib</code>åº“ç»˜åˆ¶ï¼Œä½¿ç”¨ <code>subplot</code>æ–¹æ³•ï¼Œé»˜è®¤ç»˜åˆ¶ä¸¤åˆ—ï¼Œè¡Œæ•°æ ¹æ®åšå®¢ä¸­å¹´ä»½çš„æ•°é‡å†³å®šï¼Œæ¯å¹´ç»˜åˆ¶ä¸€ä¸ªå­å›¾ï¼Œå­å›¾æ¨ªåæ ‡è®¾ç½®ä¸ºæœˆä»½ï¼Œä»¥æŸ±çŠ¶å›¾çš„å½¢å¼å‘ˆç°ï¼Œä¸ºäº†æ›´å¥½å‘ˆç°å¯¹æ¯”ï¼Œæ¯ä¸ªå­å›¾çºµåæ ‡è®¾ç½®å¤§å°é™åˆ¶ï¼Œå›¾ä¸­ç»˜åˆ¶ç›¸åº”æœˆä»½çš„æ•°é‡æ•°å€¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">plot_statistics</span><span class="p">(</span><span class="n">statistics</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;posts yearly&#39;</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;æ ¹æ®ç»Ÿè®¡æ•°æ®ç»˜åˆ¶æ›²çº¿å›¾
</span><span class="s1">    :param statistics: åšæ–‡æŒ‰ç…§æ—¥æœŸçš„ç»Ÿè®¡æ•°æ®
</span><span class="s1">    :type statistics: dict
</span><span class="s1">    :param title: æ›²çº¿å›¾æ ‡é¢˜
</span><span class="s1">    :type title: å­—ç¬¦ä¸²
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">statistics</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">count</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">count</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="n">sub_n</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">year</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">statistics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">sub_n</span><span class="p">)</span>
        <span class="n">sub_n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">label</span><span class="o">=</span><span class="n">year</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">+</span><span class="mf">0.05</span><span class="p">,</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">b</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Month&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Count of posts&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>
<h3 id="è·å–åšæ–‡ä¸­å›¾ç‰‡ä¿¡æ¯">è·å–åšæ–‡ä¸­å›¾ç‰‡ä¿¡æ¯</h3>

<p>ä¸»è¦è·å–å›¾ç‰‡çš„é“¾æ¥ï¼Œé¦–å…ˆéå†åšæ–‡åˆ—è¡¨ï¼Œè®¿é—®æ¯ä¸ªåšæ–‡é“¾æ¥ï¼Œè·å–é¡µé¢å†…å®¹ï¼Œè§£æå¾—åˆ°æ–‡ç« ä¸»ä½“å†…å®¹éƒ¨åˆ†ï¼Œå†ä»å†…å®¹ä¸­æå–<code>img</code>èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹çš„<code>src</code>å±æ€§å°±æ˜¯é“¾æ¥ï¼Œå¦‚æœæ˜¯åšå®¢å†…çš„å›¾ç‰‡ï¼Œé“¾æ¥ä¼šæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå¹¶ä¸æ˜¯å®Œæ•´çš„ï¼Œéœ€è¦å¡«å……åšå®¢ä¸»é¡µç½‘å€ç»„æˆå®Œæ•´åœ°å€ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_post_content</span><span class="p">(</span><span class="n">post</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;è·å–æŒ‡å®šåšæ–‡çš„å†…å®¹
</span><span class="s1">    :param post: åšæ–‡
</span><span class="s1">    :type post: dict
</span><span class="s1">    :return post_content: è®¿é—®é“¾æ¥ä¸­åšæ–‡å†…å®¹éƒ¨åˆ†çš„PyQueryå¯¹è±¡
</span><span class="s1">    :rtype: PyQuery
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADERS</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">doc</span><span class="p">(</span><span class="s1">&#39;.post&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å¼‚å¸¸ï¼ŒçŠ¶æ€ç ï¼š&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectionError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">å¼‚å¸¸...&#39;</span><span class="p">,</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span> <span class="n">url</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_post_images</span><span class="p">(</span><span class="n">posts</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;è·å–åšæ–‡åˆ—è¡¨ä¸­åšæ–‡ä¸­æ‰€æœ‰å›¾ç‰‡çš„é“¾æ¥
</span><span class="s1">    :param posts: åšæ–‡åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å«åšæ–‡æ ‡é¢˜ã€é“¾æ¥å’Œæ—¥æœŸ
</span><span class="s1">    :type posts: list
</span><span class="s1">    :return images: imageä¿¡æ¯ï¼ŒåŒ…å«æ‰€å±åšæ–‡æ ‡é¢˜ã€å›¾ç‰‡é“¾æ¥
</span><span class="s1">    :rtype: dict
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">post</span> <span class="ow">in</span> <span class="n">posts</span><span class="p">:</span>
        <span class="n">post_content</span> <span class="o">=</span> <span class="n">get_post_content</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">post_content</span><span class="p">:</span>
            <span class="n">images</span> <span class="o">=</span> <span class="n">post_content</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="n">url_p</span> <span class="o">=</span> <span class="n">up</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">post</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">])</span>
            <span class="n">host_url</span> <span class="o">=</span> <span class="s1">&#39;{0}://{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">url_p</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span> <span class="n">url_p</span><span class="o">.</span><span class="n">netloc</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
                <span class="n">image_url</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">src</span>
                <span class="k">if</span> <span class="n">image_url</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;/&#39;</span><span class="p">:</span>
                    <span class="n">image_url</span> <span class="o">=</span> <span class="n">host_url</span> <span class="o">+</span> <span class="n">image_url</span>
                <span class="k">yield</span> <span class="p">{</span>
                    <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">post</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">],</span>
                    <span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="n">image_url</span>
                <span class="p">}</span></code></pre></div>
<h3 id="ä¿å­˜å›¾ç‰‡">ä¿å­˜å›¾ç‰‡</h3>

<p>æ ¹æ®ä¼ å…¥çš„å›¾ç‰‡ä¿¡æ¯ä¸­çš„é“¾æ¥è·å–å›¾ç‰‡å†…å®¹ï¼Œå†æ ¹æ®å†…å®¹ç”Ÿæˆå›¾ç‰‡åç§°ï¼Œå°†å›¾ç‰‡ä¿å­˜åœ¨æŒ‡å®šç›®å½•ä¸‹å¯¹åº”çš„åšæ–‡åç§°å‘½åçš„æ–‡ä»¶å¤¹ä¸­ï¼Œå®ç°è¿‡ç¨‹ä¸æ–‡ç«  <a href="/2018/06/21/spider-practice-pic-dog/" target="_blank">çˆ¬è™«å®è·µä¹‹å¤´æ¡ç‹—ç‹—å›¾ç‰‡</a> ä¸­ä¿å­˜å›¾ç‰‡çš„æ€è·¯ä¸€è‡´ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">save_image_from</span><span class="p">(</span><span class="n">image_info</span><span class="p">,</span> <span class="n">to_dir</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;æ ¹æ®é“¾æ¥è·å–å›¾ç‰‡ï¼Œä¿å­˜åˆ°æ ‡é¢˜å‘½åçš„ç›®å½•ä¸­ï¼Œå›¾ç‰‡ä»¥md5ç å‘½å
</span><span class="s1">    :param image_info: åŒ…å«æ ‡é¢˜å’Œé“¾æ¥ä¿¡æ¯çš„å­—å…¸æ•°æ®
</span><span class="s1">    :type image_info: dict
</span><span class="s1">    :param to_dir: è¦ä¿å­˜åˆ°çš„ç›®å½•ï¼Œé»˜è®¤å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå¯æŒ‡å®šç›®å½•ï¼Œæ ¼å¼å¦‚: &#39;ç‹—ç‹—&#39;
</span><span class="s1">    :type to_dir: unicode å­—ç¬¦ä¸²
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">image_info</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">image_info</span><span class="p">)</span>
        <span class="n">image_dir</span> <span class="o">=</span> <span class="n">to_dir</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">image_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">image_dir</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_info</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;{0}/{1}.{2}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">image_dir</span><span class="p">,</span> <span class="n">md5</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(),</span> <span class="s1">&#39;jpg&#39;</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡ä¸‹è½½å®Œæˆï¼&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡å·²ä¸‹è½½ -&gt; &#39;</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡ä¸‹è½½å¤±è´¥ï¼&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å‡ºç°å¼‚å¸¸ï¼&#39;</span><span class="p">)</span></code></pre></div>
<h3 id="å‘½ä»¤å‚æ•°è§£æ">å‘½ä»¤å‚æ•°è§£æ</h3>

<p>æŒ‰ç…§å‘½ä»¤å½¢å¼çš„æ–¹å¼æ„é€ è„šæœ¬è¿˜éœ€è¦å¯¹å‚æ•°è¾“å…¥è¿›è¡Œè§£æï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">parse_sys_args</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;è§£æå‘½ä»¤å‚æ•°
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">help_info</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span><span class="se">\n</span><span class="s1">    ä½¿ç”¨æ–¹æ³•ï¼š
</span><span class="s1">      </span><span class="si">%s</span><span class="s1"> å­å‘½ä»¤ hexoåšå®¢å½’æ¡£åœ°å€ CSSé€‰æ‹©å™¨
</span><span class="s1">      - å­å‘½ä»¤ï¼šcount å’Œ picï¼Œcountç”¨äºå¾—åˆ°æŒ‡å®šåšå®¢ä¸­æ¯ä¸ªæœˆä»½åšæ–‡æ•°ï¼Œpicç”¨äºçˆ¬å–åšæ–‡ä¸­çš„å›¾ç‰‡
</span><span class="s1">      - hexoåšå®¢å½’æ¡£åœ°å€ï¼šæ¯”å¦‚http://www.litreily.top/archives/
</span><span class="s1">      - CSSé€‰æ‹©å™¨ï¼šç”¨äºé€‰æ‹©æ–‡ç« åˆ—è¡¨ä¸­æ–‡ç« æ ‡é¢˜å¯¹åº”çš„&lt;a&gt;æ ‡ç­¾
</span><span class="s1">    ä¸¾ä¾‹ï¼š
</span><span class="s1">      </span><span class="si">%s</span><span class="s1"> count http://www.litreily.top/archives/ &#39;.post-archive .listing li a&#39;
</span><span class="s1">      </span><span class="si">%s</span><span class="s1"> pic http://www.smslit.top/archives/ &#39;#posts article .post-title-link&#39;
</span><span class="s1">
</span><span class="s1">    &#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">help_info</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;pic&#39;</span> <span class="ow">and</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;count&#39;</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;è¯·è¾“å…¥æ­£ç¡®å­å‘½ä»¤ï¼&#39;</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="n">help_info</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span></code></pre></div>
<h3 id="ä¸»ä½“æ‰§è¡Œè¿‡ç¨‹">ä¸»ä½“æ‰§è¡Œè¿‡ç¨‹</h3>

<p>æœ€åç»„ç»‡è„šæœ¬ï¼Œå®ç°é¢„æœŸçš„åŠŸèƒ½ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">command</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">css_selector</span> <span class="o">=</span> <span class="n">parse_sys_args</span><span class="p">()</span>
    <span class="n">archive</span> <span class="o">=</span> <span class="n">get_blog_posts</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">css_selector</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">archive</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="s1">&#39;ä¸€å…±æœ‰&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">archive</span><span class="p">[</span><span class="s1">&#39;posts&#39;</span><span class="p">]),</span> <span class="s1">&#39;ç¯‡åšæ–‡ï¼&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">archive</span><span class="p">[</span><span class="s1">&#39;posts&#39;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s1">&#39;count&#39;</span><span class="p">:</span>
            <span class="n">plot_statistics</span><span class="p">(</span><span class="n">statistic_posts_by_date</span><span class="p">(</span><span class="n">archive</span><span class="p">[</span><span class="s1">&#39;posts&#39;</span><span class="p">]),</span> <span class="n">archive</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">s posts yearly&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">get_post_images</span><span class="p">(</span><span class="n">archive</span><span class="p">[</span><span class="s1">&#39;posts&#39;</span><span class="p">]):</span>
                <span class="n">save_image_from</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">archive</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;æ²¡æœ‰å‘ç°åšæ–‡ï¼Œè¯·ç¡®è®¤æ‚¨å†™çš„cssé€‰æ‹©å™¨æ˜¯å¦åˆç†ï¼&#39;</span><span class="p">)</span></code></pre></div>
<p>è‡³æ­¤å®Œæˆè„šæœ¬æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œåé‡Œç»™æ–‡ä»¶çš„å‘½åæ˜¯ï¼š<code>blogo</code>ã€‚</p>

<h2 id="æµ‹è¯•åŠŸèƒ½">æµ‹è¯•åŠŸèƒ½</h2>

<p>ä»£ç å·²ç»å®Œæˆï¼Œåˆ†åˆ«æµ‹è¯•ä¸¤ä¸ªå­å‘½ä»¤ã€‚</p>

<h4 id="åšæ–‡ç»Ÿè®¡">åšæ–‡ç»Ÿè®¡</h4>

<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./blogo count http://www.litreily.top/archives/ <span class="s1">&#39;.post-archive .listing li a&#39;</span>
LITREILY ä¸€å…±æœ‰ <span class="m">51</span> ç¯‡åšæ–‡ï¼</code></pre></div>
<p>å¾—åˆ°ç»Ÿè®¡ç»“æœï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180625152991020613192.png" alt="20180625152991020613192.png" /></p>

<h4 id="çˆ¬å–åšæ–‡å›¾ç‰‡">çˆ¬å–åšæ–‡å›¾ç‰‡</h4>

<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./blogo pic http://www.litreily.top/archives/ <span class="s1">&#39;.post-archive .listing li a&#39;</span>
LITREILY ä¸€å…±æœ‰ <span class="m">51</span> ç¯‡åšæ–‡ï¼
<span class="o">{</span><span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;Pythonç½‘ç»œçˆ¬è™«4 - scrapyå…¥é—¨&#39;</span>, <span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://www.litreily.top/assets/spider/scrapy/scrapy.jpg&#39;</span><span class="o">}</span>
LITREILY/Pythonç½‘ç»œçˆ¬è™«4 - scrapyå…¥é—¨/a9f6acf5b1893055a235b846caa3998e.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;Pythonç½‘ç»œçˆ¬è™«3 - ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çˆ¬å–æŸé‡‘èç½‘ç«™æ•°æ®&#39;</span>, <span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://www.litreily.top/assets/spider/cfachina/home_page.png&#39;</span><span class="o">}</span>
LITREILY/Pythonç½‘ç»œçˆ¬è™«3 - ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çˆ¬å–æŸé‡‘èç½‘ç«™æ•°æ®/b911b25d568bef51de4e902c8e0fa725.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;Pythonç½‘ç»œçˆ¬è™«3 - ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çˆ¬å–æŸé‡‘èç½‘ç«™æ•°æ®&#39;</span>, <span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://www.litreily.top/assets/spider/cfachina/personinfo.png&#39;</span><span class="o">}</span>
LITREILY/Pythonç½‘ç»œçˆ¬è™«3 - ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹çˆ¬å–æŸé‡‘èç½‘ç«™æ•°æ®/9d598568290765c2fb19cc890d7e47d4.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
...</code></pre></div>
<p>ä¸Šé¢æ‰§è¡Œç»“æœçœç•¥äº†å¤§éƒ¨åˆ†æ‰“å°ä¿¡æ¯ï¼Œæ‰§è¡Œå®Œæˆåå¯ä»¥çœ‹åˆ°åŒçº§ç›®å½•ä¸‹å‡ºç°äº†ä»¥åšå®¢åç§°å‘½åçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢çš„æ–‡ä»¶å¤¹ä»¥åšæ–‡æ ‡é¢˜å‘½åï¼Œæ–‡ä»¶å¤¹å†…å­˜çš„å°±æ˜¯ç›¸åº”åšæ–‡çš„å›¾ç‰‡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180625152991073857165.png" alt="20180625152991073857165.png" /></p>

<p>å®Œæ•´ä»£ç å‚è€ƒï¼š<a href="https://github.com/smslit/spider-collection/blob/master/blogo/blogo" target="_blank">blogo</a></p>]]></content>
		</item>
		
		<item>
			<title>çˆ¬è™«åŸºç¡€ä¹‹pyquery</title>
			<link>https://www.smslit.top/2018/06/23/spider-basic-pyquery/</link>
			<pubDate>Sat, 23 Jun 2018 17:32:16 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/06/23/spider-basic-pyquery/</guid>
			<description>&lt;p&gt;çˆ¬è™«ç¨‹åºä¸­å°‘ä¸äº†è§£æåº“çš„ä½¿ç”¨ï¼Œä½¿ç”¨åº“æ¥è§£æç½‘é¡µå†…å®¹çš„è¯ï¼Œæ•ˆç‡ä¼šå¾ˆé«˜ï¼Œå¸¸ç”¨çš„è§£æåº“æœ‰:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;lxml&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Beautiful Soup&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pyquery&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åé‡Œå¯¹ä¸‰ä¸ªåº“éƒ½ç¨å¾®äº†è§£äº†ä¸€ä¸‹ï¼Œä¸ªäººæ¯”è¾ƒå–œæ¬¢&lt;code&gt;pyqueryåº“&lt;/code&gt;ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸ªäººå–œå¥½é—®é¢˜ï¼Œæ— å…³ä¼˜åŠ£ã€‚æ‰€ä»¥æœ¬æ–‡ä¸­åé‡Œå°†ä¸æ‚¨ä¸€èµ·å­¦ä¹ &lt;code&gt;pyquery&lt;/code&gt;åº“çš„ç®€å•ä½¿ç”¨ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>çˆ¬è™«ç¨‹åºä¸­å°‘ä¸äº†è§£æåº“çš„ä½¿ç”¨ï¼Œä½¿ç”¨åº“æ¥è§£æç½‘é¡µå†…å®¹çš„è¯ï¼Œæ•ˆç‡ä¼šå¾ˆé«˜ï¼Œå¸¸ç”¨çš„è§£æåº“æœ‰:</p>

<ul>
<li><code>lxml</code></li>
<li><code>Beautiful Soup</code></li>
<li><code>pyquery</code></li>
</ul>

<p>åé‡Œå¯¹ä¸‰ä¸ªåº“éƒ½ç¨å¾®äº†è§£äº†ä¸€ä¸‹ï¼Œä¸ªäººæ¯”è¾ƒå–œæ¬¢<code>pyqueryåº“</code>ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸ªäººå–œå¥½é—®é¢˜ï¼Œæ— å…³ä¼˜åŠ£ã€‚æ‰€ä»¥æœ¬æ–‡ä¸­åé‡Œå°†ä¸æ‚¨ä¸€èµ·å­¦ä¹ <code>pyquery</code>åº“çš„ç®€å•ä½¿ç”¨ã€‚</p>

<h2 id="å®‰è£…">å®‰è£…</h2>

<p>å®‰è£…å¾ˆç®€å•ï¼Œè¿™é‡Œä½¿ç”¨<code>pip</code>åŒ…ç®¡ç†å·¥å…·å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pip3 install pyquery</code></pre></div>
<p><strong>æ³¨ï¼š</strong> pipæœ‰æ—¶ä¼šå¾ˆæ…¢ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…æºåŠ é€Ÿï¼Œè¿™ä¸ªéœ€è¦çš„è¯è‡ªè¡Œgoogleã€‚</p>

<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>

<h3 id="åˆå§‹åŒ–å†…å®¹">åˆå§‹åŒ–å†…å®¹</h3>

<p><code>pyquery</code>åº“å¯ä»¥æ‰“å¼€æœ¬åœ°htmlæ–‡ä»¶ï¼Œå¯ä»¥åˆå§‹åŒ–å­—ç¬¦ä¸²ï¼ŒåŒæ ·å¯ä»¥ç›´æ¥æ‰“å¼€æŒ‡å®šç½‘å€ã€‚</p>

<h4 id="åˆå§‹åŒ–å­—ç¬¦ä¸²">åˆå§‹åŒ–å­—ç¬¦ä¸²</h4>

<p>å¯ä»¥ç¼–å†™ä¸€ä¸ªhtmlå­—ç¬¦ä¸²å†…å®¹ä¼ ç»™<code>PyQuery</code>ï¼Œç›´æ¥çœ‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&lt;html&gt;
</span><span class="s1">&lt;div&gt;
</span><span class="s1">&lt;p class=&#39;ppp&#39;&gt;hello, 5km!&lt;/p&gt;
</span><span class="s1">&lt;/div&gt;
</span><span class="s1">&lt;/html&gt;
</span><span class="s1">&#39;&#39;&#39;</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">))</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;html&gt;
&lt;div&gt;
&lt;p <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;ppp&#34;</span>&gt;hello, 5km!&lt;/p&gt;
&lt;/div&gt;
&lt;/html&gt;
&lt;class <span class="s1">&#39;pyquery.pyquery.PyQuery&#39;</span>&gt;</code></pre></div>
<h4 id="åˆå§‹åŒ–æ–‡ä»¶">åˆå§‹åŒ–æ–‡ä»¶</h4>

<p>å°†ä¸Šè¿°ä»£ç ä¸­çš„htmlå†…å®¹å†™å…¥æ–‡ä»¶<code>5km.html</code>ï¼Œç„¶åæŒ‰ç…§ä»¥ä¸‹æ–¹å¼å¯ä»¥åˆå§‹åŒ–htmlæ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;5km.html&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">))</span></code></pre></div>
<p>æ‰§è¡Œä»£ç åä¼šå‘ç°ç»“æœä¸ä¸Šè¿°ä¸€æ ·ï¼Œè¯´æ˜æˆåŠŸåˆå§‹åŒ–ã€‚</p>

<h4 id="åˆå§‹åŒ–é“¾æ¥">åˆå§‹åŒ–é“¾æ¥</h4>

<p>è¿™é‡Œä»¥<code>http://www.httpbin.org</code>ä¸ºä¾‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="s1">&#39;http://www.httpbin.org&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">d</span><span class="p">))</span></code></pre></div>
<p>ç»“æœå°±ä¼šè¿”å›ä¸Šè¿°ç½‘å€å¯¹åº”çš„htmlæ–‡ä»¶å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;html <span class="nv">lang</span><span class="o">=</span><span class="s2">&#34;en&#34;</span>&gt;
&lt;head&gt;
  &lt;meta <span class="nv">charset</span><span class="o">=</span><span class="s2">&#34;UTF-8&#34;</span>/&gt;
  &lt;title&gt;httpbin.org&lt;/title&gt;
  &lt;link <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:300,600|Titillium+Web:400,600,700&#34;</span> <span class="nv">rel</span><span class="o">=</span><span class="s2">&#34;stylesheet&#34;</span>/&gt;
...è¿™é‡Œçœç•¥éƒ¨åˆ†å†…å®¹
...
&lt;/html&gt;
&lt;class <span class="s1">&#39;pyquery.pyquery.PyQuery&#39;</span>&gt;</code></pre></div>
<h3 id="cssé€‰æ‹©å™¨">CSSé€‰æ‹©å™¨</h3>

<p><code>pyquery</code>æ”¯æŒåŸºæœ¬çš„<a href="http://www.w3school.com.cn/cssref/css_selectors.asp" target="_blank">cssé€‰æ‹©å™¨</a>ï¼Œå¯ä»¥æŒ‰ç…§cssé€‰æ‹©å™¨çš„è§„åˆ™æ‰¾åˆ°ç›¸åº”èŠ‚ç‚¹ï¼Œä¸ºäº†æ–¹ä¾¿å±•ç¤ºåé¢çš„ä½¿ç”¨ï¼Œä»è¿™å„¿å¼€å§‹ä½¿ç”¨æ–‡æœ¬æ–¹å¼åˆå§‹åŒ–<code>PyQuery</code>ï¼Œä½¿ç”¨ç½‘ä¸Šå¸¸è§„htmlèŒƒä¾‹æ–‡æœ¬åˆå§‹åŒ–ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&lt;div&gt;
</span><span class="s1">&lt;ul id = &#39;5km&#39;&gt;
</span><span class="s1">&lt;li class=&#34;item-0&#34;&gt;first item&lt;/li&gt;
</span><span class="s1">&lt;li class=&#34;item-1&#34;&gt;&lt;a href=&#34;link2.html&#34;&gt;second item&lt;/a&gt;&lt;/li&gt;
</span><span class="s1">&lt;li class=&#34;item-0 active&#34;&gt;&lt;a href=&#34;link3.html&#34;&gt;&lt;span class=&#34;bold&#34;&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
</span><span class="s1">&lt;li class=&#34;item-1 active&#34;&gt;&lt;a href=&#34;link4.html&#34;&gt;fourth item&lt;/a&gt;&lt;/li&gt;
</span><span class="s1">&lt;li class=&#34;item-0&#34;&gt;&lt;a href=&#34;link5.html&#34;&gt;fifth item&lt;/a&gt;&lt;/li&gt;
</span><span class="s1">&lt;/ul&gt;
</span><span class="s1">&lt;/div&gt;
</span><span class="s1">&#39;&#39;&#39;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span></code></pre></div>
<p>å¦‚æœæƒ³è·å¾—<strong>class</strong>ä¸º <strong>item-0</strong> çš„<strong>li</strong>ï¼Œå¯ä»¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">result</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s1">&#39;#5km .item-0&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">result</span><span class="p">))</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0 active&#34;</span>&gt;&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;link3.html&#34;</span>&gt;&lt;span <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;bold&#34;</span>&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;link5.html&#34;</span>&gt;fifth item&lt;/a&gt;&lt;/li&gt;

&lt;class <span class="s1">&#39;pyquery.pyquery.PyQuery&#39;</span>&gt;</code></pre></div>
<p>å°è¯•å…¶å®ƒçš„é€‰æ‹©å™¨ä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ï¼</p>

<h3 id="éå†èŠ‚ç‚¹">éå†èŠ‚ç‚¹</h3>

<p>å¦‚ä¸Šé¢CSSé€‰æ‹©å™¨çš„ä¾‹å­ï¼Œä¼šé€‰æ‹©å‡ºä¸‰ä¸ªç¬¦åˆæ¡ä»¶çš„ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½éå†å®ƒä»¬é€ä¸€åšä¸€äº›å¤„ç†å‘¢ï¼Ÿå½“ç„¶æ˜¯æ²¡é—®é¢˜äº†ã€‚è¿”å›ç»“æœä¼šæœ‰ä¸€ä¸ª<strong>items</strong>æ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šå¾—åˆ°ä¸€ä¸ªç»“æœå¯¹åº”çš„ç”Ÿæˆå™¨ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>for-in</code>è¿›è¡Œéå†ç»“æœä¸­çš„æ¯ä¸€æ¡<code>li</code>èŠ‚ç‚¹äº†ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">))</span></code></pre></div>
<p>ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;
&lt;class <span class="s1">&#39;pyquery.pyquery.PyQuery&#39;</span>&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0 active&#34;</span>&gt;&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;link3.html&#34;</span>&gt;&lt;span <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;bold&#34;</span>&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;class <span class="s1">&#39;pyquery.pyquery.PyQuery&#39;</span>&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;link5.html&#34;</span>&gt;fifth item&lt;/a&gt;&lt;/li&gt;
&lt;class <span class="s1">&#39;pyquery.pyquery.PyQuery&#39;</span>&gt;</code></pre></div>
<h3 id="æŸ¥è¯¢èŠ‚ç‚¹">æŸ¥è¯¢èŠ‚ç‚¹</h3>

<p>åœ¨ä¸Šé¢ä¾‹å­ä¸­å‡æ‰“å°äº†ç»“æœçš„ç±»å‹ï¼Œå®ƒä»¬éƒ½æ˜¯<code>PyQuery</code>å¯¹è±¡ï¼ŒåŒ…å«äº†èŠ‚ç‚¹ä¿¡æ¯ã€‚å®ƒä»¬å…·æœ‰æŸ¥è¯¢èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œå¯ä¾›è·å–å­å­™èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹å’Œå…„å¼ŸèŠ‚ç‚¹ã€‚</p>

<h4 id="å­å­™èŠ‚ç‚¹">å­å­™èŠ‚ç‚¹</h4>

<p>å­å­™èŠ‚ç‚¹çš„æŸ¥è¯¢å¯ä»¥ä½¿ç”¨<code>find</code>å’Œ<code>children</code>ä¸¤ç§æ–¹æ³•ï¼Œä¸åŒç‚¹æ˜¯ï¼Œå‰è€…å¯ä»¥å¾—åˆ°æ‰€æœ‰å­å­™èŠ‚ç‚¹ï¼Œè€Œåè€…åªå…³å¿ƒå­èŠ‚ç‚¹ä¿¡æ¯ã€‚ä¸ºäº†åŒºåˆ†è¿™ä¸¤ç§çš„æ•ˆæœï¼Œè¿™é‡Œç¨å¾®æ”¹åŠ¨ä¸€ä¸‹<code>html</code>å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>

<span class="n">html</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&lt;div&gt;
</span><span class="s1">&lt;div id=&#34;container&#34;&gt;
</span><span class="s1">&lt;ul id=&#39;5km&#39;&gt;
</span><span class="s1">&lt;li class=&#34;item-0&#34;&gt;first item&lt;/li&gt;
</span><span class="s1">&lt;li class=&#34;item-ol&#34;&gt;
</span><span class="s1">&lt;ol class=&#39;test&#39;&gt;
</span><span class="s1">&lt;li&gt;ol1&lt;/li&gt;
</span><span class="s1">&lt;li&gt;ol2&lt;/li&gt;
</span><span class="s1">&lt;/ol&gt;
</span><span class="s1">&lt;/li&gt;
</span><span class="s1">&lt;/ul&gt;
</span><span class="s1">&lt;/div&gt;
</span><span class="s1">&lt;/ddiv&gt;
</span><span class="s1">&#39;&#39;&#39;</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span></code></pre></div>
<h5 id="æ‰€æœ‰å­å­™èŠ‚ç‚¹">æ‰€æœ‰å­å­™èŠ‚ç‚¹</h5>

<p>ä½¿ç”¨<code>find</code>æ–¹æ³•æŸ¥è¯¢<code>ul</code> ä¸‹çš„ <code>li</code>èŠ‚ç‚¹ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">ul</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s1">&#39;#5km&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ul</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">))</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-ol&#34;</span>&gt;
&lt;ol <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;test&#34;</span>&gt;
&lt;li&gt;ol1&lt;/li&gt;
&lt;li&gt;ol2&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ol1&lt;/li&gt;
&lt;li&gt;ol2&lt;/li&gt;</code></pre></div>
<p>çœ‹åˆ°ç»“æœå°±æ˜ç™½äº†ï¼Œæ­¤æ–¹æ³•æŠŠ<code>ul</code>ç¬¬äºŒä¸ªç›´æ¥å­èŠ‚ç‚¹ä¸‹çš„ä¸¤ä¸ª<code>li</code>èŠ‚ç‚¹ä¹ŸæŸ¥è¯¢å¹¶å…¥æŸ¥è¯¢ç»“æœäº†ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>children</code>æ–¹æ³•çš„æ•ˆæœã€‚</p>

<h5 id="ç›´æ¥å­èŠ‚ç‚¹">ç›´æ¥å­èŠ‚ç‚¹</h5>

<p>åˆ©ç”¨<code>children</code>æ–¹æ³•æŸ¥è¯¢<code>ul</code>ä¸‹çš„<code>li</code>èŠ‚ç‚¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨CSSé€‰æ‹©å™¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">ul</span><span class="o">.</span><span class="n">children</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">))</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-ol&#34;</span>&gt;
&lt;ol <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;test&#34;</span>&gt;
&lt;li&gt;ol1&lt;/li&gt;
&lt;li&gt;ol2&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;</code></pre></div>
<p>ä¸å‡ºæ‰€æ–™ï¼Œç»“æœä¸­åªæœ‰ç›´æ¥å­èŠ‚ç‚¹ï¼Œå…¶å®<code>children</code>æ–¹æ³•å¯ä»¥ä¸åŠ å‚æ•°ï¼Œå°±ä¼šè¿”å›æ‰€æœ‰çš„ç›´æ¥å­èŠ‚ç‚¹ã€‚</p>

<h4 id="ç¥–å…ˆèŠ‚ç‚¹">ç¥–å…ˆèŠ‚ç‚¹</h4>

<p>æŒ‰ç…§ç»§æ‰¿çš„æ€è·¯ï¼ŒæŸ¥è¯¢ç¥–å…ˆèŠ‚ç‚¹å°±æ˜¯æ‰¾çˆ¶èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ç­‰ç­‰ä¸€ç›´æŒ‰ç…§ç»§æ‰¿å…³ç³»å‘ä¸ŠæŸ¥è¯¢èŠ‚ç‚¹ã€‚æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š<code>parent</code>å’Œ <code>parents</code>ï¼Œå‰è€…ç”¨æ¥æŸ¥æ‰¾ç›´æ¥çˆ¶èŠ‚ç‚¹ï¼Œåè€…ç”¨æ¥æŸ¥è¯¢æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹ã€‚ç»§ç»­ä½¿ç”¨å‰é¢çš„<code>dã€‚</code></p>

<h5 id="ç›´æ¥çˆ¶èŠ‚ç‚¹">ç›´æ¥çˆ¶èŠ‚ç‚¹</h5>

<p>ç›´æ¥çˆ¶èŠ‚ç‚¹å¯ä»¥é€šè¿‡<code>parent</code>æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">ul</span><span class="o">.</span><span class="n">parent</span><span class="p">())</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;div <span class="nv">id</span><span class="o">=</span><span class="s2">&#34;container&#34;</span>&gt;
&lt;ul <span class="nv">id</span><span class="o">=</span><span class="s2">&#34;5km&#34;</span>&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-ol&#34;</span>&gt;
&lt;ol <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;test&#34;</span>&gt;
&lt;li&gt;ol1&lt;/li&gt;
&lt;li&gt;ol2&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</code></pre></div>
<p>æ­¤æ–¹æ³•ç›´æ¥è¿”å›äº†<code>ul</code>èŠ‚ç‚¹çš„ç›´æ¥çˆ¶èŠ‚ç‚¹<code>&lt;div id='container'</code>çš„å†…å®¹ã€‚</p>

<h5 id="æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹">æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹</h5>

<p><code>parents</code>æ–¹æ³•å¯ä»¥æŸ¥è¯¢æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨CSSé€‰æ‹©å™¨ï¼Œä¹Ÿå¯ä»¥ä¸åŠ å‚æ•°ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">ul</span><span class="o">.</span><span class="n">parents</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">))</span></code></pre></div>
<p>æŸ¥è¯¢ç¥–å…ˆèŠ‚ç‚¹ä¸­æ‰€æœ‰çš„<code>div</code>èŠ‚ç‚¹ï¼Œè¿”å›ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;div&gt;
&lt;div <span class="nv">id</span><span class="o">=</span><span class="s2">&#34;container&#34;</span>&gt;
&lt;ul <span class="nv">id</span><span class="o">=</span><span class="s2">&#34;5km&#34;</span>&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-ol&#34;</span>&gt;
&lt;ol <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;test&#34;</span>&gt;
&lt;li&gt;ol1&lt;/li&gt;
&lt;li&gt;ol2&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;/div&gt;&lt;div <span class="nv">id</span><span class="o">=</span><span class="s2">&#34;container&#34;</span>&gt;
&lt;ul <span class="nv">id</span><span class="o">=</span><span class="s2">&#34;5km&#34;</span>&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;
&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-ol&#34;</span>&gt;
&lt;ol <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;test&#34;</span>&gt;
&lt;li&gt;ol1&lt;/li&gt;
&lt;li&gt;ol2&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°å¾—åˆ°äº†ä¸¤å±‚<code>div</code>èŠ‚ç‚¹çš„å†…å®¹ã€‚</p>

<h4 id="å…„å¼ŸèŠ‚ç‚¹">å…„å¼ŸèŠ‚ç‚¹</h4>

<p>å…„å¼ŸèŠ‚ç‚¹çš„è·å–éœ€è¦ä½¿ç”¨æ–¹æ³•<code>siblings</code>ï¼Œé¦–å…ˆæˆ‘ä»¬è·å–<code>class</code>ä¸º<code>item-ol</code>çš„<code>li</code>èŠ‚ç‚¹ï¼Œç„¶åè°ƒç”¨<code>siblings</code>æ–¹æ³•æ‰¾åˆ°æ‰€æœ‰å…„å¼ŸèŠ‚ç‚¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">li</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s1">&#39;#5km .item-ol&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">li</span><span class="o">.</span><span class="n">siblings</span><span class="p">())</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">&lt;li <span class="nv">class</span><span class="o">=</span><span class="s2">&#34;item-0&#34;</span>&gt;first item&lt;/li&gt;</code></pre></div>
<p><code>class</code>ä¸º<code>item-0</code>çš„èŠ‚ç‚¹å³ä¸ºç»“æœã€‚</p>

<h3 id="è·å–èŠ‚ç‚¹ä¿¡æ¯">è·å–èŠ‚ç‚¹ä¿¡æ¯</h3>

<p>èŠ‚ç‚¹ä¿¡æ¯ä¸€èˆ¬å°±æ˜¯èŠ‚ç‚¹æ–‡æœ¬å’ŒèŠ‚ç‚¹çš„å±æ€§äº†ï¼Œåˆ†åˆ«è¿›è¡Œæ¢ç´¢ã€‚</p>

<h4 id="èŠ‚ç‚¹æ–‡æœ¬">èŠ‚ç‚¹æ–‡æœ¬</h4>

<p>èŠ‚ç‚¹æ–‡æœ¬çš„è·å–æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>

<ul>
<li><code>text</code>ï¼šè·å–èŠ‚ç‚¹å†…æ‰€æœ‰æ–‡æœ¬åŠå­å­™èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼›</li>
<li><code>html</code>ï¼šè·å–èŠ‚ç‚¹çš„htmlæ–‡æœ¬ï¼›</li>
</ul>

<p>è¿™é‡Œä»¥<code>class</code>ä¸º<code>test</code>çš„<code>ol</code>èŠ‚ç‚¹ä¸ºä¾‹è¯´æ˜ä¸¤ä¸ªæ–¹æ³•çš„ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">ol</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="s1">&#39;#5km .item-ol .test&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ol</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
<span class="k">print</span><span class="p">(</span><span class="n">ol</span><span class="o">.</span><span class="n">html</span><span class="p">())</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ol1
ol2

&lt;li&gt;ol1&lt;/li&gt;
&lt;li&gt;ol2&lt;/li&gt;</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æŒ‰ç…§é¢„æœŸç»“æœåˆ†åˆ«å¾—åˆ°äº†æ‰€æœ‰æ–‡æœ¬ä¿¡æ¯å’Œhtmlæ–‡æœ¬ã€‚</p>

<h4 id="èŠ‚ç‚¹å±æ€§">èŠ‚ç‚¹å±æ€§</h4>

<p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è·å–èŠ‚ç‚¹å±æ€§ï¼š</p>

<ul>
<li>ä½¿ç”¨èŠ‚ç‚¹çš„<code>attr</code>æ–¹æ³•ï¼Œå‚æ•°ä¼ å…¥å¾…è·å–å±æ€§çš„åç§°ï¼Œæ¯”å¦‚<code>class</code>ã€<code>id</code>ã€<code>href</code>ç­‰ï¼Œå½¢å¦‚<code>attr('class')</code>ï¼›</li>
<li>ä½¿ç”¨èŠ‚ç‚¹<code>attr</code>å±æ€§çš„å±æ€§ï¼Œç‚¹è¯­æ³•è·å–ï¼Œå½¢å¦‚<code>attr.href</code>ï¼Œè¿™é‡Œè¦æŸ¥è¯¢<code>class</code>å±æ€§çš„å€¼æ¯”è¾ƒç‰¹æ®Šï¼Œå› ä¸ºä¸pythonçš„å…³é”®è¯å†²çªï¼Œæ‰€ä»¥ä»¥æ­¤æ–¹æ³•æŸ¥è¯¢èŠ‚ç‚¹çš„<code>class</code>å±æ€§çš„è¯ï¼Œåº”è¯¥ä»¥<code>attr.class_</code>çš„å½¢å¼è®¿é—®æŸ¥è¯¢ï¼›</li>
<li>ä½œä¸ºå­—å…¸çš„å½¢å¼è®¿é—®ï¼Œä»¥å±æ€§åä½œä¸ºé”®å€¼è®¿é—®ï¼Œå½¢å¦‚<code>attr['class']</code></li>
</ul>

<p>ä¸¾ä¾‹è¯´æ˜ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">ol</span><span class="o">.</span><span class="n">attr</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">ol</span><span class="o">.</span><span class="n">attr</span><span class="o">.</span><span class="n">class_</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ol</span><span class="o">.</span><span class="n">attr</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">])</span></code></pre></div>
<p>è¿è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">test</span>
<span class="nb">test</span>
test</code></pre></div>
<p>ä¸Šé¢ç”¨ä¸‰ç§å½¢å¼æŸ¥è¯¢äº†<code>ol</code>èŠ‚ç‚¹çš„<code>class</code>å±æ€§ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æœ¬æ–‡ä¸»è¦ä¸€èµ·æ¢ç´¢äº†ä¸€ä¸‹<code>pyquery</code>ä½¿ç”¨çš„å†°å±±ä¸€è§’ï¼Œä¸»è¦é›†ä¸­çš„æ˜¯åˆå§‹åŒ–å’Œè¯»å–çš„æ“ä½œï¼Œå…¶å®è¿˜æœ‰ä¿®æ”¹èŠ‚ç‚¹çš„åŠŸèƒ½ï¼Œå› ä¸ºçˆ¬è™«ç¨‹åºä¸­å¤§éƒ¨åˆ†è¿˜æ˜¯åªç”¨æŸ¥è¯¢è§£æåŠŸèƒ½ï¼Œæ‰€ä»¥æœ¬æ–‡åªç®€å•åˆ—ä¸¾äº†èŠ‚ç‚¹è§£æè¯»å–åŠŸèƒ½çš„å…·ä½“æ“ä½œï¼Œåé¢å¦‚æœæœ‰æ–°çš„æ€»ç»“ä¼šæŒç»­æ›´æ–°ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>çˆ¬è™«å®è·µä¹‹å¤´æ¡ç‹—ç‹—å›¾ç‰‡</title>
			<link>https://www.smslit.top/2018/06/21/spider-practice-pic-dog/</link>
			<pubDate>Thu, 21 Jun 2018 14:41:32 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/06/21/spider-practice-pic-dog/</guid>
			<description>&lt;p&gt;æœ€è¿‘åœ¨å­¦ä¹ çˆ¬è™«ï¼Œå­¦äº†å°±åº”è¯¥å¤šå®è·µå®è·µï¼Œæœ¬æ–‡å°†è®°å½•ä½¿ç”¨&lt;code&gt;requests&lt;/code&gt; åº“ä¸‹è½½å¤´æ¡ä¸Šæœåˆ°çš„ç‹—ç‹—å›¾ç‰‡çš„å®ç°è¿‡ç¨‹ï¼Œä½¿ç”¨&lt;strong&gt;python3&lt;/strong&gt;å®ç°ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹ çˆ¬è™«ï¼Œå­¦äº†å°±åº”è¯¥å¤šå®è·µå®è·µï¼Œæœ¬æ–‡å°†è®°å½•ä½¿ç”¨<code>requests</code> åº“ä¸‹è½½å¤´æ¡ä¸Šæœåˆ°çš„ç‹—ç‹—å›¾ç‰‡çš„å®ç°è¿‡ç¨‹ï¼Œä½¿ç”¨<strong>python3</strong>å®ç°ã€‚</p>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>æˆ‘ä»¬çŸ¥é“ç°åœ¨æœ‰éƒ¨åˆ†ç½‘é¡µè®¿é—®çš„æ—¶å€™è¿”å›çš„å¹¶ä¸æ˜¯å®Œæ•´çš„htmlï¼Œå…¶åˆ©ç”¨javascriptè·å–å±€éƒ¨æ•°æ®æœ€ç»ˆå®ç°å®Œæ•´é¡µé¢çš„å‘ˆç°ï¼Œè€Œè¿™ä¾èµ–çš„æ˜¯<code>AJAX</code>æŠ€æœ¯ï¼š</p>

<blockquote>
<p>AJAXï¼Œå³â€œAsynchronous Javascript And XMLâ€ï¼ˆå¼‚æ­¥ JavaScript å’Œ XMLï¼‰ï¼Œæ˜¯ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚</p>

<p>é€šè¿‡åœ¨åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAJAX å¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚</p>

<p>@W3Cschool <a href="https://www.w3cschool.cn/ajax/nr583fns.html" target="_blank">AJAXç®€ä»‹</a></p>
</blockquote>

<p>è€Œå¤´æ¡çš„æœå›¾é¡µé¢ä¹Ÿæ˜¯é‡‡ç”¨ <code>AJAX</code> æŠ€æœ¯ï¼Œä¸‹é¢åˆ†æä¸€ä¸‹ç½‘é¡µã€‚</p>

<h2 id="ç½‘é¡µåˆ†æ">ç½‘é¡µåˆ†æ</h2>

<p>é¦–å…ˆï¼Œæµè§ˆå™¨ï¼ˆæœ¬æ–‡ä½¿ç”¨çš„æ˜¯<a href="https://www.google.cn/chrome/" target="_blank">google chrome</a>ï¼‰æ‰“å¼€å¤´æ¡å›¾ç‰‡é¢‘é“çš„ç½‘å€ï¼š<a href="https://www.toutiao.com/ch/news_image/" target="_blank">https://www.toutiao.com/ch/news_image </a>ã€‚æ‰“å¼€é¡µé¢ä¼šåœ¨å³ä¸Šè§’çœ‹åˆ°æœç´¢æ¡†ï¼Œåœ¨æœç´¢æ¡†ä¸­è¾“å…¥<code>ç‹—ç‹—</code>ï¼Œè¿›è¡Œæœç´¢ï¼Œå°±ä¼šå¾—åˆ°ä¸‹é¢çš„é¡µé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/2018062115295708613054.png" alt="search0" /></p>

<p>å³å‡»é¡µé¢é€‰æ‹©<code>æ£€æŸ¥</code>ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªç½‘é¡µæ£€æŸ¥çª—å£ï¼Œæœ‰å¾ˆå¤šæ ‡ç­¾é¡µï¼Œä¾æ¬¡æ‰¾åˆ°<code>Network</code>-<code>XHR</code>ï¼Œæ­¤æ—¶ç‚¹å‡»ä¸Šå›¾é¡µé¢ä¸­çš„<code>å›¾é›†</code>ï¼Œå°±ä¼šå‘ç°ç½‘é¡µæ£€æŸ¥çª—å£ä¸­å·¦æ å‡ºç°ä¸€ä¸ª<code>XHR</code>ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180622152964929637874.png" alt="20180622152964929637874.png" /></p>

<p>ç‚¹å‡»å›¾ä¸­åœˆå‡ºçš„XHRï¼Œå°±ä¼šå‡ºç°æ­¤æ¡AJAXè¯·æ±‚çš„è¯¦ç»†å†…å®¹ï¼Œé€‰æ‹©<code>Headers</code> æ ‡ç­¾é¡µï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180621152957098380206.png" alt="XHR-detail" /></p>

<p>å¯ä»¥çœ‹åˆ°æœ‰è¯·æ±‚å¤´å’Œå“åº”å¤´çš„ä¿¡æ¯ï¼Œè€Œ <code>Preview</code> æ ‡ç­¾é¡µå†…æ˜¾ç¤ºçš„åˆ™æ˜¯è¯·æ±‚ç»“æœï¼Œå¾ˆæ˜æ˜¾çš„å“åº”ç»“æœæ˜¯ä¸ªjsonæ ¼å¼çš„å†…å®¹ï¼Œchromeå·²ç»æ¸…æ™°çš„æ’ç‰ˆäº†jsonå†…å®¹ï¼Œå¯¹ç…§ç½‘é¡µå‘ˆç°çš„å†…å®¹æŸ¥çœ‹ä¸€ä¸‹jsonå†…å®¹ã€‚</p>

<h3 id="å“åº”ç»“æœåˆ†æ">å“åº”ç»“æœåˆ†æ</h3>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180621152957267413410.png" alt="json" /></p>

<p>æŒ‰ç…§å±‚çº§æŸ¥çœ‹jsonå†…å®¹ï¼Œå±•å¼€ <code>data</code> å°±ä¼šå‘ç°æœ‰20ä¸ªå†…å®¹ï¼Œæ­£å¥½ä¸ç½‘é¡µä¸­æ˜¾ç¤ºçš„20ä¸ªæ¡ç›®å¯¹åº”ï¼Œå±•å¼€ <code>0</code> æŸ¥çœ‹ä¸€ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>

<ul>
<li><code>title</code>ï¼šå¯¹åº”ç½‘é¡µæ¡ç›®çš„æ ‡é¢˜</li>
<li><code>image_list</code>: å¯¹åº”ç½‘é¡µä¸­å›¾ç‰‡çš„é“¾æ¥</li>
</ul>

<p>æŸ¥çœ‹ <code>data</code> ä¸­çš„å…¶å®ƒé¡¹ï¼Œä¼šå‘ç°éƒ½æ˜¯ä¸ç½‘é¡µæ˜¾ç¤ºå†…å®¹çš„æ¡ç›®ä¸€ä¸€å¯¹åº”ï¼Œè¿™æ ·å°±ä¸€ç›®äº†ç„¶äº†ï¼Œå¯ä»¥é€šè¿‡AJAXè¯·æ±‚è·å–jsonå†…å®¹ï¼Œç„¶åè§£æjsonå†…å®¹ä¸­çš„<code>data</code>é‡Œæ¯ä¸ªæ¡ç›®é‡Œçš„ <code>title</code>å’Œ<code>image_list</code>å°±å¯ä»¥å¾—åˆ°å›¾ç‰‡é“¾æ¥äº†ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®é“¾æ¥è·å–å›¾ç‰‡äº†ï¼Œé‚£ä¹ˆè¿˜å¾—åˆ†æä¸€ä¸‹AJAXè¯·æ±‚æœ‰ä»€ä¹ˆè§„å¾‹ã€‚</p>

<h3 id="è¯·æ±‚å¤´åˆ†æ">è¯·æ±‚å¤´åˆ†æ</h3>

<p>åˆ‡æ¢åˆ°<code>Headers</code> æ ‡ç­¾é¡µï¼Œå¯ä»¥çœ‹åˆ°<code>Requests URL</code>ä¸ºï¼š</p>

<ul>
<li><a href="https://www.toutiao.com/search_content/?offset=0&amp;format=json&amp;keyword=%E7%8B%97%E7%8B%97&amp;autoload=true&amp;count=20&amp;cur_tab=3&amp;from=gallery" target="_blank">https://www.toutiao.com/search_content/?offset=0&amp;format=json&amp;keyword=%E7%8B%97%E7%8B%97&amp;autoload=true&amp;count=20&amp;cur_tab=3&amp;from=gallery</a></li>
</ul>

<p>æ»šåŠ¨ç½‘é¡µåˆ°æœ€åº•ä»¥åï¼Œç½‘é¡µä¼šå¢åŠ 20ä¸ªæ–°çš„æ¡ç›®ï¼Œè¿™æ—¶å€™ä¼šå‘ç°å‡ºç°äº†ä¸€ä¸ªæ–°çš„ <code>XHR</code>ï¼Œç‚¹å‡»è¿™ä¸ªæ–°çš„è¯·æ±‚ï¼ŒæŸ¥çœ‹å¤´ä¿¡æ¯ä¸­çš„ <code>Requests URL</code>ä¸ºï¼š</p>

<ul>
<li><a href="https://www.toutiao.com/search_content/?offset=20&amp;format=json&amp;keyword=%E7%8B%97%E7%8B%97&amp;autoload=true&amp;count=20&amp;cur_tab=3&amp;from=gallery" target="_blank">https://www.toutiao.com/search_content/?offset=20&amp;format=json&amp;keyword=%E7%8B%97%E7%8B%97&amp;autoload=true&amp;count=20&amp;cur_tab=3&amp;from=gallery</a></li>
</ul>

<p>åŒæ—¶æŸ¥çœ‹ <code>Preview</code> æ ‡ç­¾é¡µé‡Œçš„jsonæ•°æ®ï¼Œä¼šå‘ç°ä¸ç½‘é¡µä¸­æ–°å¢åŠ çš„20ä¸ªæ¡ç›®æ˜¯å¯¹åº”çš„ï¼ŒåŒç†åœ¨ç»§ç»­æ»šåŠ¨åŠ è½½ï¼Œåˆä¼šå¤šä¸€ä¸ªXHRï¼Œå“åº”çš„jsonä¸æ–°å¢åŠ çš„æ¡ç›®å¯¹åº”ã€‚</p>

<p>å¯¹æ¯”æ¯æ¬¡å¢åŠ çš„<code>XHR</code>ä¸­çš„è¯·æ±‚é“¾æ¥ï¼Œä¼šå‘ç°é“¾æ¥åªæœ‰ä¸€ä¸ª <code>offset</code> å‚æ•°åœ¨å˜ï¼Œä¸€ä¸ªæ¯”ä¸€ä¸ªå¤š20ï¼Œä¸éš¾æƒ³20å…¶å®å°±æ˜¯å¯¹åº”äº† <code>count</code> å‚æ•°ï¼Œå…¶ä¸­è¿˜æœ‰ä¸€ä¸ª <code>keyword</code> å‚æ•°ï¼Œå¯¹åº”çš„æ±‰å­—å…¶å®å°±æ˜¯ <code>ç‹—ç‹—</code>ï¼Œé‚£ä¹ˆçœ‹åˆ°è¿™å„¿ä¹Ÿå°±æ˜ç™½äº†ï¼Œè¯·æ±‚é“¾æ¥å¯ä»¥é€šè¿‡æ”¹å˜ <code>offset</code> å‚æ•°æ¥ç”Ÿæˆï¼Œè¯·æ±‚å›æ¥çš„jsonæ•°æ®ä¸­å°±åŒ…å«äº†å¯¹åº”offsetä¸‹çš„20æ¡æ•°æ®ï¼Œç„¶åè§£ææ•°æ®å¾—åˆ°ç›¸åº”æ ‡é¢˜ä¸‹çš„æ‰€æœ‰å›¾ç‰‡é“¾æ¥å°±å¯ä»¥äº†ã€‚</p>

<h2 id="çˆ¬è™«å®ç°">çˆ¬è™«å®ç°</h2>

<p>æ ¹æ®å¯¹ç½‘é¡µçš„åˆ†æï¼Œå°±å¯ä»¥é’ˆå¯¹æ€§çš„è®¾è®¡çˆ¬è™«ç¨‹åºäº†ã€‚</p>

<h3 id="çˆ¬è™«æ€è·¯">çˆ¬è™«æ€è·¯</h3>

<p>æ ¹æ®ä¸Šä¸€èŠ‚çš„åˆ†æï¼Œå¯ä»¥åˆ†ä¸‰æ­¥å®ç°å›¾ç‰‡çš„çˆ¬å–ï¼š</p>

<ol>
<li>æŒ‰ç…§ä¸Šä¸€èŠ‚åˆ†æçš„ç»“æœæŒ‰ç…§ç´¢å¼•ç”Ÿæˆè¯·æ±‚é“¾æ¥ï¼Œè¯·æ±‚ç½‘é¡µè·å–å“åº”ç»“æœï¼›</li>
<li>ä»å“åº”ç»“æœä¸­æå–å…³é”®ä¿¡æ¯ï¼š

<ul>
<li>æ ‡é¢˜</li>
<li>å›¾ç‰‡é“¾æ¥</li>
</ul></li>
<li>æ ¹æ®å›¾ç‰‡é“¾æ¥è·å–å›¾ç‰‡ï¼Œå¹¶ä¿å­˜åˆ°ä»¥æ ‡é¢˜è¿›è¡Œå‘½åçš„ç›®å½•ä¸­ï¼›</li>
</ol>

<h3 id="åº“çš„é€‰æ‹©">åº“çš„é€‰æ‹©</h3>

<p>é¦–å…ˆè¦ç”Ÿæˆè¯·æ±‚é“¾æ¥ï¼Œè§‚å¯Ÿé“¾æ¥æ ¼å¼ï¼Œå¯ä»¥é€‰æ‹©åº“ <code>urllib</code>parseæ¨¡å—çš„æ–¹æ³• <code>urlencode</code>æ–¹æ³•ç”Ÿæˆï¼Œç„¶åé€‰æ‹© <code>requests</code> åº“è¿›è¡Œç½‘é¡µè¯·æ±‚ï¼Œè¿”å›çš„ç»“æœæ˜¯jsonï¼Œå…¶å®å¯¹åº”çš„æ˜¯å­—å…¸æ•°æ®ï¼Œæå–ä¿¡æ¯ä¸éœ€è¦é¢å¤–çš„åº“ï¼ŒåŒæ ·ä½¿ç”¨ <code>requests</code> åº“è¯·æ±‚å›¾ç‰‡é“¾æ¥è·å–å›¾ç‰‡ï¼Œä¸ºäº†å¥½ç®¡ç†å›¾ç‰‡è¿˜å¾—ç”Ÿæˆç›®å½•ï¼Œéœ€è¦ä½¿ç”¨ <code>os</code>åº“ã€‚æœ¬åœ°ä¿å­˜çš„è¯ï¼Œä¸ºäº†é˜²æ­¢å‘½åå†²çªï¼Œè¿™é‡Œæ ¹æ®å›¾ç‰‡æ•°æ®çš„md5ç å‘½åï¼Œé‚£ä¹ˆä¼šç”¨åˆ° <code>hashlib</code> åº“ï¼Œæ€»ç»“ä¼šç”¨åˆ°ä»¥ä¸‹åº“å’Œæ–¹æ³•ï¼š</p>

<ul>
<li><code>requests</code></li>
<li><code>urllib.parse</code>çš„<code>urlencode</code></li>
<li><code>hashlib</code>çš„<code>md5</code></li>
<li><code>os</code></li>
</ul>

<p>ä¸Šè¿°åº“ä¸­ï¼Œåªéœ€è¦å®‰è£…<code>requests</code>å’Œ<code>urllib</code>è¿™ä¸¤ä¸ªåº“ï¼Œä¸€èˆ¬é€šè¿‡pip3å®‰è£…ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ pip3 install requests urllib</code></pre></div>
<h3 id="çˆ¬è™«å®ç°-1">çˆ¬è™«å®ç°</h3>

<p>é¦–å…ˆå°†ä¸Šè¿°åº“å’Œæ–¹æ³•å¯¼å…¥ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">md5</span>
<span class="kn">import</span> <span class="nn">os</span></code></pre></div>
<h4 id="è¯·æ±‚é¡µé¢å†…å®¹">è¯·æ±‚é¡µé¢å†…å®¹</h4>

<p>æ ¹æ®å‰é¢çš„åˆ†æï¼Œåªéœ€è¦æ›´æ”¹ç½‘é¡µé“¾æ¥ä¸­çš„ <code>offset</code> å‚æ•°å°±å¯ä»¥ç”Ÿæˆæ–°çš„è¯·æ±‚é“¾æ¥ï¼Œä¸ºäº†æé«˜å°è£…æ€§ï¼Œè¿™é‡Œå°†ç½‘é¡µå†…å®¹çš„è·å–è¿‡ç¨‹å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°ä¸º <code>offset</code>ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†é˜²æ­¢è¢«å¤´æ¡å±è”½IPæˆ–æ‹’ç»è®¿é—®ï¼Œè¿™é‡Œè¿˜éœ€è¦ç»™å‡ºä¸€å®šå¤´ä¿¡æ¯ï¼Œå‚è€ƒchromeæ£€æŸ¥çª—å£ä¸­çœ‹åˆ°çš„è¯·æ±‚å¤´çš„ä¿¡æ¯å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">HEADERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Host&#39;</span><span class="p">:</span> <span class="s1">&#39;www.toutiao.com&#39;</span><span class="p">,</span>
    <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/11.1 Safari/605.1.15&#39;</span><span class="p">,</span>
    <span class="s1">&#39;X-Requested-With&#39;</span><span class="p">:</span> <span class="s1">&#39;XMLHttpRequest&#39;</span>
<span class="p">}</span></code></pre></div>
<p>è¯·æ±‚é“¾æ¥ä¸­çš„å‚æ•°ä½¿ç”¨<code>urlencode</code>æ–¹æ³•è¿›è¡Œå°è£…å¤„ç†ï¼Œæ ¹æ®é“¾æ¥ç‰¹å¾éœ€è¦æŒ‡å®šå‚æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="n">offset</span><span class="p">,</span>
    <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
    <span class="s1">&#39;keyword&#39;</span><span class="p">:</span> <span class="s1">&#39;ç‹—ç‹—&#39;</span><span class="p">,</span>
    <span class="s1">&#39;autoload&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
    <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;20&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cur_tab&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;gallery&#39;</span>
<span class="p">}</span></code></pre></div>
<p>ä¸ºäº†æé«˜ç¨‹åºçš„é²æ£’æ€§ï¼Œä½¿ç”¨try-exceptå¤„ç†å¼‚å¸¸ï¼Œæœ€ç»ˆå®ç°çš„å‡½æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_page_json</span><span class="p">(</span><span class="n">offset</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;ç”Ÿæˆajaxè¯·æ±‚ï¼Œå‘å‡ºgetè¯·æ±‚ï¼Œå¹¶è·å–å“åº”ç»“æœï¼Œä»¥å­—å…¸çš„å½¢å¼è¿”å›jsonæ•°æ®
</span><span class="s1">    :params offset: é¡µé¢è¯·æ±‚åç§»å€¼
</span><span class="s1">    :type offset: èƒ½è¢«20æ•´é™¤çš„æ•´æ•°
</span><span class="s1">    :return: å“åº”æ•°æ®
</span><span class="s1">    :rtype: dict
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="n">offset</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;keyword&#39;</span><span class="p">:</span> <span class="s1">&#39;ç‹—ç‹—&#39;</span><span class="p">,</span>
        <span class="s1">&#39;autoload&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
        <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;20&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cur_tab&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span>
        <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;gallery&#39;</span>
    <span class="p">}</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.toutiao.com/search_content/?&#39;</span> <span class="o">+</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADERS</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span></code></pre></div>
<p>ä½¿ç”¨getæ–¹æ³•è¿›è¡Œè¯·æ±‚ï¼Œå¦‚æœæ­£å¸¸çš„è¯ï¼Œå°±ä¼šå¾—åˆ°å“åº”çš„jsonæ•°æ®ï¼Œæœ€ç»ˆå‡½æ•°è¿”å›jsonæ•°æ®è½¬æ¢æˆçš„å­—å…¸æ•°æ®ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸å°±ä¼šè¿”å›<code>None</code>ã€‚</p>

<h4 id="è§£æå“åº”ç»“æœ">è§£æå“åº”ç»“æœ</h4>

<p>ä¸Šä¸€æ­¥è·å¾—äº†ä¸€æ¬¡è¯·æ±‚çš„jsonæ•°æ®ï¼Œä¸‹é¢å°±è¯¥å®ç°å“åº”ç»“æœçš„è§£æäº†ï¼Œå› ä¸ºå¾—åˆ°çš„æ˜¯å­—å…¸ï¼Œæ‰€ä»¥é¦–å…ˆå¾—åˆ°<code>data</code>é”®å¯¹åº”çš„å€¼ï¼Œæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹åº”åŒ…å«20ä¸ªæ¡ç›®çš„æ•°æ®ï¼Œéå†åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å­—å…¸ï¼Œæ‰¾åˆ°<code>title</code>é”®å¯¹åº”çš„å€¼å°±æ˜¯æ ‡é¢˜ï¼Œ<code>image_list</code>é”®å¯¹åº”çš„å€¼æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­çš„å…ƒç´ å°±æ˜¯é“¾æ¥å…³é”®ä¿¡æ¯ï¼Œä¸ºé“¾æ¥ä¿¡æ¯åŠ ä¸Šåè®®ç»„æˆæ­£å¸¸çš„urlå­—ç¬¦ä¸²å³å¯ï¼Œå°†è§£æå‡ºæ¥çš„æ¯ä¸ªé“¾æ¥å’Œä¸Šå±‚çš„æ ‡é¢˜å…±åŒç»„æˆä¸€ä¸ªå­—å…¸è¿”å›ï¼Œè¿™é‡Œç”¨<code>yield</code>æ–¹æ³•ç”Ÿæˆè¿­ä»£å™¨ï¼Œæœ€ç»ˆå®ç°çš„å‡½æ•°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">parse_images_url</span><span class="p">(</span><span class="n">json</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;è§£æjsonå­—å…¸ï¼Œè·å¾—å¯¹åº”æ¡ç›®æ ‡é¢˜å’Œå›¾ç‰‡é“¾æ¥
</span><span class="s1">    :param json: é¡µé¢è¯·æ±‚å“åº”ç»“æœå¯¹åº”çš„å­—å…¸æ•°æ®
</span><span class="s1">    :type json: dict
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
            <span class="n">images</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;image_list&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">images</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
                    <span class="k">yield</span> <span class="p">{</span>
                        <span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;http:&#39;</span> <span class="o">+</span> <span class="n">image</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">],</span>
                        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span>
                    <span class="p">}</span></code></pre></div>
<h4 id="ä¸‹è½½å›¾ç‰‡">ä¸‹è½½å›¾ç‰‡</h4>

<p>å¾—åˆ°äº†å›¾ç‰‡é“¾æ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä¿å­˜å›¾ç‰‡äº†ï¼ŒåŒæ ·å°†ä¿å­˜å›¾ç‰‡çš„æ“ä½œå°è£…ä¸ºä¸€ä¸ªå‡½æ•°ã€‚</p>

<p>æ€è·¯å¾ˆç®€å•ï¼Œä¸ºäº†æ›´å¥½çš„ç®¡ç†å›¾ç‰‡ï¼Œç”Ÿæˆä»¥æ ‡é¢˜å‘½åçš„ç›®å½•ç”¨æ¥ä¿å­˜å›¾ç‰‡ï¼Œgetè¯·æ±‚å›¾ç‰‡é“¾æ¥ï¼Œå› ä¸ºè·å–çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œæ‰€ä»¥å°†å“åº”ç»“æœæŒ‰ç…§äºŒè¿›åˆ¶ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œæ–‡ä»¶ååˆ™æ ¹æ®äºŒè¿›åˆ¶æ•°æ®è®¡ç®—md5ç”Ÿæˆæ–‡ä»¶åï¼Œå®ç°ä¸­åŠ å…¥äº†å¤šä¸ªä¿¡æ¯åˆ¤æ–­ä»¥åŠtry-exceptæ–¹å¼çš„å¤„ç†ï¼Œæœ€ç»ˆç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">save_image_from</span><span class="p">(</span><span class="n">image_info</span><span class="p">,</span> <span class="n">to_dir</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;æ ¹æ®é“¾æ¥è·å–å›¾ç‰‡ï¼Œä¿å­˜åˆ°æ ‡é¢˜å‘½åçš„ç›®å½•ä¸­ï¼Œå›¾ç‰‡ä»¥md5ç å‘½å
</span><span class="s1">    :param image_info: åŒ…å«æ ‡é¢˜å’Œé“¾æ¥ä¿¡æ¯çš„å­—å…¸æ•°æ®
</span><span class="s1">    :type image_info: dict
</span><span class="s1">    :param to_dir: è¦ä¿å­˜åˆ°çš„ç›®å½•ï¼Œé»˜è®¤å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå¯æŒ‡å®šç›®å½•ï¼Œæ ¼å¼å¦‚: &#39;ç‹—ç‹—&#39;
</span><span class="s1">    :type to_dir: unicode å­—ç¬¦ä¸²
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="n">image_info</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">image_info</span><span class="p">)</span>
        <span class="n">image_dir</span> <span class="o">=</span> <span class="n">to_dir</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="n">image_info</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">image_dir</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_info</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
                <span class="n">image_path</span> <span class="o">=</span> <span class="s1">&#39;{0}/{1}.{2}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">image_dir</span><span class="p">,</span> <span class="n">md5</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">(),</span> <span class="s1">&#39;jpg&#39;</span><span class="p">)</span>
                <span class="k">print</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡ä¸‹è½½å®Œæˆï¼&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡å·²ä¸‹è½½ -&gt; &#39;</span><span class="p">,</span> <span class="n">image_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å›¾ç‰‡ä¸‹è½½å¤±è´¥ï¼&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;å‡ºç°å¼‚å¸¸ï¼&#39;</span><span class="p">)</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°å‡½æ•°è¿˜å¤šäº†ä¸€ä¸ªå‚æ•°<code>to_dir</code>ï¼Œè¿™ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šç›®å½•ï¼Œç”¨æ¥ä¿å­˜ä»¥æ ‡é¢˜å‘½åçš„ç›®å½•ä»¥åŠå…¶ç›®å½•ä¸‹çš„å›¾ç‰‡ã€‚</p>

<h4 id="ç¼–å†™ä¸»å‡½æ•°å®ç°">ç¼–å†™ä¸»å‡½æ•°å®ç°</h4>

<p>æ¯ä¸€æ¬¡è¯·æ±‚ä¼šæ”¶åˆ°20ä¸ªæ¡ç›®çš„æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥è¯·æ±‚10æ¬¡ä¸ºä¾‹ï¼Œä¹Ÿå°±æ˜¯æ€»å…±è·å–200ä¸ªæ¡ç›®ä¸‹çš„å›¾ç‰‡ï¼Œå®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># è¯·æ±‚æ•°</span>
<span class="n">PAGE_NUM</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">offset</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="mi">20</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">PAGE_NUM</span><span class="p">)]:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;è·å–ç¬¬&#39;</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ï½&#39;</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;ä¸ªæ¡ç›®...&#39;</span><span class="p">)</span>
        <span class="n">json</span> <span class="o">=</span> <span class="n">get_page_json</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">parse_images_url</span><span class="p">(</span><span class="n">json</span><span class="p">):</span>
            <span class="n">save_image_from</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">to_dir</span><span class="o">=</span><span class="s1">&#39;ç‹—ç‹—&#39;</span><span class="p">)</span></code></pre></div>
<h4 id="æ•´åˆå®ç°">æ•´åˆå®ç°</h4>

<p>å°†ä¸Šè¿°å‡ éƒ¨åˆ†çš„è¯´æ˜å’Œå®ç°è¿›è¡Œæ•´åˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/local/bin/python3</span>
<span class="c1"># ç¡®è®¤ä¸Šé¢çš„python3è·¯å¾„æ˜¯å¦æ­£ç¡®</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="kn">import</span> <span class="n">urlencode</span>
<span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">md5</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">PAGE_NUM</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">HEADERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;User-Agent&#39;</span><span class="p">:</span> <span class="s1">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_5) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/11.1.1 Safari/605.1.15&#39;</span><span class="p">,</span>
    <span class="s1">&#39;X-Requested-With&#39;</span><span class="p">:</span> <span class="s1">&#39;XMLHttpRequest&#39;</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">get_page_json</span><span class="p">(</span><span class="n">offset</span><span class="p">):</span>
    <span class="c1"># æ­¤å¤„çœç•¥ï¼Œå‚è€ƒå‰é¢çš„å®ç°</span>

<span class="k">def</span> <span class="nf">parse_images_url</span><span class="p">(</span><span class="n">json</span><span class="p">):</span>
    <span class="c1"># æ­¤å¤„çœç•¥ï¼Œå‚è€ƒå‰é¢çš„å®ç°</span>

<span class="k">def</span> <span class="nf">save_image_from</span><span class="p">(</span><span class="n">image_info</span><span class="p">,</span> <span class="n">to_dir</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
    <span class="c1"># æ­¤å¤„çœç•¥ï¼Œå‚è€ƒå‰é¢çš„å®ç°</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># æ­¤å¤„çœç•¥ï¼Œå‚è€ƒå‰é¢çš„å®ç°</span></code></pre></div>
<h2 id="æµ‹è¯•åŠä¼˜åŒ–">æµ‹è¯•åŠä¼˜åŒ–</h2>

<p>ä¸Šè¿°ä»£ç åœ¨è„šæœ¬æ–‡ä»¶<code>toutiao_pic.py</code>ä¸­å®ç°ï¼Œæ‰§è¡Œè„šæœ¬æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ python3 toutiao_pic.py
è·å–ç¬¬ <span class="m">1</span> ï½ <span class="m">20</span> ä¸ªæ¡ç›®...
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p3.pstatp.com/list/pgc-image/15296042422187b4c0bfb38&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼&#39;</span><span class="o">}</span>
ç‹—ç‹—/å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼/f56a49c55933be46f87f554d961841a9.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p3.pstatp.com/list/pgc-image/152960424260924673d65ea&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼&#39;</span><span class="o">}</span>
ç‹—ç‹—/å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼/ca6973e7d891a48ade41477ef3944627.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p3.pstatp.com/list/pgc-image/15296042427877f2cd0e93a&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼&#39;</span><span class="o">}</span>
ç‹—ç‹—/å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼/5317c8b27494c21f8e05936fd092c580.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p3.pstatp.com/list/pgc-image/1529604243143d15de20946&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼&#39;</span><span class="o">}</span>
ç‹—ç‹—/å²ä¸Šæœ€ç¾çš„11å¯¹ç‹—ç‹—çš„ç»“å©šç…§ï¼Œä¸€å¼ ä½ éƒ½æ²¡è§è¿‡ï¼/d83f8de993ccba427d62138812cbc9bf.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p1.pstatp.com/list/pgc-image/1529588142869caebf0b30d&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å„¿å­æ‰“äº†ç‹—ç‹—ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥è®©ä¸€å®¶äººæ„ŸåŠ¨&#39;</span><span class="o">}</span>
ç‹—ç‹—/å„¿å­æ‰“äº†ç‹—ç‹—ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥è®©ä¸€å®¶äººæ„ŸåŠ¨/c1f1880a9dff12cadeb5893715b7b5de.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
.
.
.
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p1.pstatp.com/list/pgc-image/15268265312399549e4d5fe&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å¯çˆ±çš„ç‹—ç‹—&#39;</span><span class="o">}</span>
ç‹—ç‹—/å¯çˆ±çš„ç‹—ç‹—/808e74f76dea32fd56614b82c2d55b79.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p3.pstatp.com/list/pgc-image/1526826535155011a163e03&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å¯çˆ±çš„ç‹—ç‹—&#39;</span><span class="o">}</span>
ç‹—ç‹—/å¯çˆ±çš„ç‹—ç‹—/df7a97475a5b62ad4f0545fbf64f91ed.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p1.pstatp.com/list/pgc-image/15268265365385bfb3779ae&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å¯çˆ±çš„ç‹—ç‹—&#39;</span><span class="o">}</span>
ç‹—ç‹—/å¯çˆ±çš„ç‹—ç‹—/7e9ae7183132420a1a49b8f14032f7f9.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
<span class="o">{</span><span class="s1">&#39;image&#39;</span>: <span class="s1">&#39;http://p3.pstatp.com/list/pgc-image/15268265382025a24d029a8&#39;</span>, <span class="s1">&#39;title&#39;</span>: <span class="s1">&#39;å¯çˆ±çš„ç‹—ç‹—&#39;</span><span class="o">}</span>
ç‹—ç‹—/å¯çˆ±çš„ç‹—ç‹—/8fa9fe7c4096e6b5026767f7cca9400e.jpg
å›¾ç‰‡ä¸‹è½½å®Œæˆï¼
è·å–ç¬¬ <span class="m">181</span> ï½ <span class="m">200</span> ä¸ªæ¡ç›®...</code></pre></div>
<p>é¡ºåˆ©çš„è¯ï¼ŒæŸ¥çœ‹è„šæœ¬åŒçº§ç›®å½•ä¸­å‡ºç°äº†<code>ç‹—ç‹—</code> çš„ç›®å½•ï¼Œæ£€æŸ¥ç›®å½•ä¸­ç¡®å®æŒ‰ç…§é¢„æœŸçˆ¬å–äº†å›¾ç‰‡ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/20180622152964907254058.png" alt="20180622152964907254058.png" /></p>

<h3 id="ç»“æœåˆ†æ">ç»“æœåˆ†æ</h3>

<p>é’ˆå¯¹æˆæœï¼Œæ€»ç»“åˆ†ææœ‰ä¸‰ç‚¹éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼š
1. å›¾ç‰‡åˆ†è¾¨ç‡ä½ï¼šæŸ¥çœ‹å›¾ç‰‡ï¼Œä½ ä¼šå‘ç°åˆ†è¾¨ç‡å¾ˆä½ï¼Œæœ‰çš„å‡ ä¹çœ‹ä¸æ¸…ï¼›
2. æ²¡æœ‰ä½¿ç”¨å¤šè¿›ç¨‹çˆ¬å–ï¼›
3. è„šæœ¬ä¸å¤Ÿé€šç”¨ï¼Œèƒ½ä¸èƒ½åƒå‘½ä»¤ä¸€æ ·æ‰§è¡Œï¼Œå®ç°å¯ä»¥æœç´¢ä»»æ„æƒ³æœç´¢çš„å›¾ç‰‡ï¼Œè€Œä¸ä»…ä»…å±€é™äºğŸ¶ï¼›</p>

<h3 id="ä¼˜åŒ–">ä¼˜åŒ–</h3>

<h4 id="å›¾ç‰‡åˆ†è¾¨ç‡é—®é¢˜">å›¾ç‰‡åˆ†è¾¨ç‡é—®é¢˜</h4>

<p>è¿˜æ˜¯å¾—åˆ†æç½‘é¡µï¼Œæ‰¾åˆ°ç‹—ç‹—å›¾é›†çš„é¡µé¢ï¼Œä»¥ç¬¬ä¸€ä¸ªæ¡ç›®çš„ç¬¬ä¸€ä¸ªå›¾ç‰‡ä¸ºä¾‹ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆè§„å¾‹å¯å¾ªã€‚</p>

<p>è®°å½•jsonæ•°æ®ä¸­ç¬¬ä¸€ä¸ªå›¾ç‰‡çš„é“¾æ¥ä¸ºï¼š</p>

<p><a href="http://p1.pstatp.com/list/pgc-image/15296042422187b4c0bfb38" target="_blank">http://p1.pstatp.com/list/pgc-image/15296042422187b4c0bfb38</a></p>

<p>ç‚¹å‡»ç¬¬ä¸€ä¸ªæ¡ç›®ï¼Œè¿›å…¥ç›¸åº”å›¾é›†ï¼Œè¿˜æ˜¯çœ‹ç¬¬ä¸€ä¸ªå›¾ï¼Œè¿™æ˜¯å‘ç°å›¾ç‰‡åˆ†è¾¨ç‡æ˜æ˜¾æé«˜ï¼Œé‚£ä¹ˆæ­¤æ—¶è¿™ä¸ªå›¾ç‰‡çš„é“¾æ¥æ˜¯ä»€ä¹ˆï¼ŒæŸ¥çœ‹ä¸€ä¸‹ä¸ºï¼š</p>

<p><a href="http://p3.pstatp.com/origin/pgc-image/15296042422187b4c0bfb38" target="_blank">http://p3.pstatp.com/origin/pgc-image/15296042422187b4c0bfb38</a></p>

<p>æ¯”è¾ƒä¸¤ä¸ªé“¾æ¥ï¼Œå‘ç°æœ‰ä¸¤ä¸ªä¸åŒçš„åœ°æ–¹ï¼š</p>

<table>
<thead>
<tr>
<th align="center">å›¾ç‰‡é“¾æ¥</th>
<th align="center">ä¸»æœºå</th>
<th align="center">ç›®å½•å</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">ä½åˆ†è¾¨ç‡</td>
<td align="center">p1</td>
<td align="center">list</td>
</tr>

<tr>
<td align="center">é«˜åˆ†è¾¨ç‡</td>
<td align="center">p3</td>
<td align="center">origin</td>
</tr>
</tbody>
</table>

<p>æ›´æ”¹ä½åˆ†è¾¨ç‡å›¾ç‰‡é“¾æ¥ä¸­çš„<code>p1</code>ä¸º<code>p3</code>ï¼Œç”¨æµè§ˆå™¨å»è®¿é—®ï¼Œå±…ç„¶ä¹Ÿèƒ½å‡ºå›¾ç‰‡ï¼Œä½†è¿˜æ˜¯ä½åˆ†è¾¨ç‡ï¼Œçœ‹æ¥è¿™ä¸ªä¸å…³é”®ï¼Œé‚£åªæ›´æ”¹<code>list</code>ä¸º<code>origin</code>è¯•ä¸€ä¸‹ï¼Œå±…ç„¶å¯ä»¥è®¿é—®ï¼Œè€Œä¸”æ˜¯é«˜åˆ†è¾¨ç‡çš„å›¾ç‰‡ã€‚</p>

<p>ä»¥æ­¤æ–¹å¼æ¯”è¾ƒå‡ å¼ å…¶å®ƒå›¾ç‰‡çš„é“¾æ¥ï¼Œå‘ç°å‡å¯ä»¥åªæ”¹é“¾æ¥ä¸­çš„<code>list</code>ä¸º<code>origin</code>å°±èƒ½å¾—åˆ°é«˜åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆä¼˜åŒ–å‡½æ•°<code>parse_images_url</code>ä¸­çš„imageé“¾æ¥ç”Ÿæˆçš„é‚£ä¸€è¡Œä»£ç ï¼Œè°ƒç”¨å­—ç¬¦ä¸²æ›¿æ¢å‡½æ•°<code>replace</code>å°±å¯ä»¥ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># åŸä»£ç </span>
<span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;http:&#39;</span> <span class="o">+</span> <span class="n">image</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">],</span>
<span class="c1"># æ”¹è¿›åä»£ç </span>
<span class="s1">&#39;image&#39;</span><span class="p">:</span> <span class="s1">&#39;http:&#39;</span> <span class="o">+</span> <span class="n">image</span><span class="p">[</span><span class="s1">&#39;url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;origin&#39;</span><span class="p">),</span></code></pre></div>
<p>é‡æ–°è¿è¡Œè„šæœ¬ï¼Œæ£€æŸ¥å›¾ç‰‡ï¼Œç»“æœå¯è¡Œï¼</p>

<h4 id="å¤šè¿›ç¨‹çˆ¬å–">å¤šè¿›ç¨‹çˆ¬å–</h4>

<p>è¿™é‡Œé‡‡ç”¨å¤šè¿›ç¨‹åº“<code>multiprocessing</code>çš„è¿›ç¨‹æ± å®ç°å¤šè¿›ç¨‹è°ƒåº¦ï¼Œä¸ºäº†æ–¹ä¾¿æ˜ å°„ï¼Œå°†ä¸»å‡½æ•°ä¸­çš„å®ç°ï¼Œå°è£…ä¸ºmainå‡½æ•°ï¼Œå‚æ•°ç”¨æ¥è¿›ç¨‹åˆ†é…ï¼Œæ‰€ä»¥ä¸º<code>offset</code>ï¼Œ<code>main</code>å‡½æ•°å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">offset</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;ä¸»å‡½æ•°ï¼Œç”¨äºå¤šè¿›ç¨‹è°ƒåº¦
</span><span class="s1">    :param offset: é¡µé¢é“¾æ¥offsetå‚æ•°çš„å€¼
</span><span class="s1">    :type offset: èƒ½è¢«20æ•´é™¤çš„æ•´æ•°
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;è·å–ç¬¬&#39;</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ï½&#39;</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;ä¸ªæ¡ç›®...&#39;</span><span class="p">)</span>
    <span class="n">json</span> <span class="o">=</span> <span class="n">get_page_json</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">parse_images_url</span><span class="p">(</span><span class="n">json</span><span class="p">):</span>
        <span class="n">save_image_from</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">to_dir</span><span class="o">=</span><span class="s1">&#39;ç‹—ç‹—&#39;</span><span class="p">)</span></code></pre></div>
<p>å¼•å…¥å¤šè¿›ç¨‹åº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">multiprocessing.pool</span> <span class="kn">import</span> <span class="n">Pool</span></code></pre></div>
<p>ç”Ÿæˆè¿›ç¨‹æ± ï¼Œæ˜ å°„ä¸»å‡½æ•°å¹¶æ‰§è¡Œï¼Œæœ€ç»ˆå®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">offset_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="mi">20</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">PAGE_NUM</span><span class="p">)]</span>
    <span class="n">pool</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">()</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">main</span><span class="p">,</span> <span class="n">offset_list</span><span class="p">)</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span></code></pre></div>
<p>æ‰§è¡Œåï¼Œçœ‹æ‰“å°ä¿¡æ¯ï¼Œä¼šå‘ç°ä¼šæœ‰å¤šä¸ªè¯·æ±‚åŒæ—¶è¿›è¡Œï¼Œé€Ÿåº¦æ˜æ˜¾åŠ å¿«ã€‚</p>

<h4 id="é€šç”¨åŒ–è„šæœ¬">é€šç”¨åŒ–è„šæœ¬</h4>

<p>è¿™é‡Œè¯´é€šç”¨åŒ–ï¼Œä¹Ÿä»…å±€é™äºè·å–å¤´æ¡ä¸­çš„å›¾é›†ï¼Œç›®å‰æ ¹æ®å‰é¢åˆ†æï¼Œé“¾æ¥ä¸­å¯ä»¥æ›´æ”¹çš„é™¤äº†<code>offset</code>ï¼Œå…¶å®è¿˜æœ‰ä¸ª<code>keyword</code>ï¼Œå…¶å®ƒçš„ç›®å‰æ¥çœ‹æ²¡å¿…è¦æ›´æ”¹äº†ï¼Œè¯´èµ·æ¥å…¶ä¸­<code>count</code>åº”è¯¥ä¹Ÿå¯ä»¥ä¿®æ”¹ï¼Œè¿™é‡Œæœ‰ä¸ªå‡è®¾ï¼š</p>

<ul>
<li><code>offset</code>ä¸<code>count</code>æœ‰å…³ï¼Œ<code>offset</code>å€¼è¦èƒ½è¢«<code>count</code>æ•´é™¤ï¼›</li>
<li>å“åº”ç»“æœä¸­æ¡ç›®æ•°ä¸<code>count</code>å¯¹åº”</li>
</ul>

<blockquote>
<p>ä¸Šé¢çš„å‡è®¾å°±ä¸éªŒè¯äº†ï¼Œç•™ç»™æ„Ÿå…´è¶£çš„äººå§ï¼Œè¿™é‡Œåªåš<code>offset</code>å’Œ<code>keyword</code>çš„å®šåˆ¶å®ç°ã€‚</p>
</blockquote>

<p>ç¨å¾®ä¿®æ”¹<code>get_page_json</code>å‡½æ•°å’Œ<code>main</code>å‡½æ•°ï¼ŒåŠ å…¥keywordå‚æ•°ç”¨æ¥æŒ‡å®šæœç´¢å…³é”®è¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_page_json</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">keyword</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;ç”Ÿæˆajaxè¯·æ±‚ï¼Œå‘å‡ºgetè¯·æ±‚ï¼Œå¹¶è·å–å“åº”ç»“æœï¼Œä»¥å­—å…¸çš„å½¢å¼è¿”å›jsonæ•°æ®
</span><span class="s1">    :param offset: é¡µé¢è¯·æ±‚åç§»å€¼
</span><span class="s1">    :type offset: èƒ½è¢«20æ•´é™¤çš„æ•´æ•°
</span><span class="s1">    :param keyword: å›¾ç‰‡æœç´¢çš„å…³é”®è¯
</span><span class="s1">    :type keyword: unicodeå­—ç¬¦ä¸²
</span><span class="s1">    :return: å“åº”æ•°æ®
</span><span class="s1">    :rtype: dict
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="n">offset</span><span class="p">,</span>
        <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
        <span class="s1">&#39;keyword&#39;</span><span class="p">:</span> <span class="n">keyword</span><span class="p">,</span>
        <span class="s1">&#39;autoload&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
        <span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;20&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cur_tab&#39;</span><span class="p">:</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span>
        <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;gallery&#39;</span>
    <span class="p">}</span>

    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.toutiao.com/search_content/?&#39;</span> <span class="o">+</span> <span class="n">urlencode</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">HEADERS</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">ConnectionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Error&#39;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">keyword</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;ä¸»å‡½æ•°ï¼Œç”¨äºå¤šè¿›ç¨‹è°ƒåº¦
</span><span class="s1">    :param offset: é¡µé¢é“¾æ¥offsetå‚æ•°çš„å€¼
</span><span class="s1">    :type offset: èƒ½è¢«20æ•´é™¤çš„æ•´æ•°
</span><span class="s1">    :param keyword: å›¾ç‰‡æœç´¢å…³é”®è¯
</span><span class="s1">    :type keyword: unicodeå­—ç¬¦ä¸²
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;è·å–ç¬¬&#39;</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ï½&#39;</span><span class="p">,</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;ä¸ªæ¡ç›®...&#39;</span><span class="p">)</span>
    <span class="n">json</span> <span class="o">=</span> <span class="n">get_page_json</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">keyword</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">parse_images_url</span><span class="p">(</span><span class="n">json</span><span class="p">):</span>
        <span class="n">save_image_from</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">to_dir</span><span class="o">=</span><span class="n">keyword</span><span class="p">)</span></code></pre></div>
<p>èƒ½ä¸èƒ½åšæˆç±»ä¼¼äºå‘½ä»¤è¡Œçš„æ–¹å¼ä¼ å…¥æœç´¢çš„å…³é”®è¯å‘¢ï¼Ÿå½“ç„¶å¯ä»¥äº†ï¼Œé¦–å…ˆåœ¨è„šæœ¬æ–‡æ¡£æœ€å‰é¢åŠ ä¸Šå¦‚ä¸‹çš„ä»£ç ï¼Œç”¨æ¥æŒ‡æ˜æ‰€ä½¿ç”¨çš„pythonè·¯å¾„ï¼Œä¾‹å¦‚<a href="https://www.smslit.top/about" target="_blank">åé‡Œ</a>çš„æ˜¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/local/bin/python3</span></code></pre></div>
<p>ç„¶åä¸ºè„šæœ¬æ–‡ä»¶åŠ ä¸Šæ‰§è¡Œæƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ chmod +x toutiao_pic.py</code></pre></div>
<p>è¿™æ ·ä½ å°±å¯ä»¥åƒå‘½ä»¤ä¸€æ ·æ‰§è¡Œè„šæœ¬äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./toutiao_pic.py</code></pre></div>
<p>è¿™é‡Œå®ç°ä¸€ä¸ªç®€å•çš„å‚æ•°è®¾ç½®æ€è·¯ï¼Œè§„å®šå¿…é¡»è¾“å…¥ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å…³é”®è¯ï¼Œä¸€ä¸ªæ˜¯è¯·æ±‚ä¸ªæ•°ï¼Œæ‰€ä»¥å›ºå®šå‘½ä»¤çš„æ ¼å¼ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">./toutiao_pic.py ç‹—ç‹— <span class="m">5</span></code></pre></div>
<p>å³å‘½ä»¤åè·Ÿç€ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯å›¾ç‰‡æœç´¢çš„å…³é”®è¯ï¼Œç„¶åå°±æ˜¯è¯·æ±‚ä¸ªæ•°çš„è®¾ç½®ï¼Œå¦‚æœè¦æå–è¿™ä¸¤ä¸ªå‚æ•°ï¼Œéœ€è¦ç”¨åˆ°<code>sys</code>åº“çš„<code>argv</code>ï¼Œåœ¨è„šæœ¬ä¸­<code>sys.argv</code>æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯å‘½ä»¤ï¼Œåœ¨è¿™é‡Œçš„è¯ï¼Œå¦‚æœè¾“å…¥å‘½ä»¤æ ¼å¼æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™ä¸ªåˆ—è¡¨ä¼šåŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼Œåä¸¤ä¸ªæŒ‰é¡ºåºåˆ†åˆ«æ˜¯ï¼šå›¾ç‰‡æœç´¢å…³é”®è¯å’Œè¯·æ±‚ä¸ªæ•°ï¼ˆæ¯ä¸ªè¯·æ±‚ä¼šå¾—åˆ°20ä¸ªå›¾é›†ä¿¡æ¯ï¼‰ï¼Œä¸ºäº†æ›´å¥½çš„äº¤äº’ï¼Œè¿˜å¾—åŠ å…¥ä¸€å®šçš„å¸®åŠ©ä¿¡æ¯çš„æ‰“å°ï¼Œæ‰€ä»¥æœ€ç»ˆæ·»åŠ äº†ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">get_help_info</span><span class="p">(</span><span class="n">command</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;ç”Ÿæˆå¸®åŠ©ä¿¡æ¯
</span><span class="s1">    :param command: å‘½ä»¤çš„åç§°
</span><span class="s1">    :type command: å­—ç¬¦ä¸²
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">help_info</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">ä½¿ç”¨:</span><span class="se">\n</span><span class="s1">  &#39;</span> <span class="o">+</span> <span class="n">command</span> <span class="o">+</span> <span class="s1">&#39; å…³é”®å­— è¯·æ±‚ä¸ªæ•°</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="n">help_info</span> <span class="o">+=</span> <span class="s1">&#39;  - å…³é”®å­—: å›¾ç‰‡æœç´¢å…³é”®è¯</span><span class="se">\n</span><span class="s1">  - è¯·æ±‚ä¸ªæ•°: ä¸€æ¬¡è¯·æ±‚ä¼šè·å–20ä¸ªå›¾é›†çš„å›¾ç‰‡</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="n">help_info</span> <span class="o">+=</span> <span class="s1">&#39;ä¾‹å¦‚:</span><span class="se">\n</span><span class="s1">  &#39;</span> <span class="o">+</span> <span class="n">command</span> <span class="o">+</span> <span class="s1">&#39; ç‹—ç‹— 5</span><span class="se">\n</span><span class="s1">  -&gt; ä¼šè·å–100ä¸ªå›¾é›†ä¸­ç‹—ç‹—çš„å›¾ç‰‡</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">return</span> <span class="n">help_info</span>

<span class="k">def</span> <span class="nf">parse_argv</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">):</span>
    <span class="s1">&#39;&#39;&#39;è§£æå‘½ä»¤å‚æ•°
</span><span class="s1">    &#39;&#39;&#39;</span>
    <span class="n">args_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;-h&#39;</span><span class="p">:</span> <span class="n">get_help_info</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="s1">&#39;-k&#39;</span><span class="p">:</span> <span class="s1">&#39;ç‹—ç‹—&#39;</span><span class="p">,</span>
        <span class="s1">&#39;-n&#39;</span><span class="p">:</span> <span class="n">PAGE_NUM</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;-h&#39;</span><span class="p">])</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">page_num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;-n&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">page_num</span> <span class="k">if</span> <span class="n">page_num</span> <span class="o">&lt;=</span> <span class="mi">100</span> <span class="k">else</span> <span class="mi">5</span>
            <span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;-k&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">&#39;è¯·æ±‚ä¸ªæ•°æœ‰è¯¯ï¼Œè¯·è¾“å…¥æ•´æ•°&#39;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">args_dict</span></code></pre></div>
<p>æ­¤æ—¶ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯mainå‡½æˆä¸ºäº†æœ‰ä¸¤ä¸ªå‚æ•°å‡½æ•°ï¼Œè¿›ç¨‹æ± mapçš„å¤„ç†éœ€è¦è°ƒæ•´ã€‚å…ˆçœ‹ä¸€ä¸‹ç°åœ¨ç¨‹åºçš„æ‰§è¡Œæ€è·¯ï¼šå…ˆè§£æå‘½ä»¤å‚æ•°è·å¾—å…³é”®è¯å’Œè¯·æ±‚ä¸ªæ•°ï¼Œç„¶åä¼ å…¥mainå‡½æ•°è¿›è¡Œå¤„ç†ã€‚è¿›ç¨‹æ± çš„mapåªèƒ½ç®¡ç†å•ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œé‚£ä¹ˆç°åœ¨çš„é—®é¢˜å°±æ˜¯è§£å†³è¿›ç¨‹æ± çš„mapçš„å¤šå‚æ•°å¤„ç†ï¼Œåº”è¯¥æœ‰å¤šä¸ªæ–¹æ³•ï¼Œå¯ä»¥å‘ç°mainå‡½æ•°æ‰§è¡Œçš„è¯æ¯æ¬¡ä¼ å…¥çš„å›¾ç‰‡æœç´¢å…³é”®è¯æ˜¯ä¸€å®šçš„ï¼Œé‚£ä¹ˆå¯ä»¥åˆ©ç”¨<code>functools</code>åº“çš„<code>partial</code>ç±»æ„é€ ä¸€ä¸ªåªæœ‰<code>offset</code>è¿™ä¸ªå‚æ•°çš„partialå‡½æ•°ï¼Œå®ç°è¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">args_dict</span> <span class="o">=</span> <span class="n">parse_argv</span><span class="p">()</span>
    <span class="n">offset_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">*</span> <span class="mi">20</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;-n&#39;</span><span class="p">])]</span>
    <span class="n">pool</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">()</span>
    <span class="n">partial_main</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">main</span><span class="p">,</span> <span class="n">keyword</span><span class="o">=</span><span class="n">args_dict</span><span class="p">[</span><span class="s1">&#39;-k&#39;</span><span class="p">])</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">partial_main</span><span class="p">,</span> <span class="n">offset_list</span><span class="p">)</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span></code></pre></div>
<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>è‡³æ­¤ï¼Œæ‰€æœ‰ä»£ç å·²ç»å®Œæˆï¼Œä¸ºäº†è®©è„šæœ¬ç”¨èµ·æ¥æ›´åƒå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æŠŠåç¼€å<code>py</code>å»æ‰ï¼Œç„¶åæƒ³ä¸€ä¸ªå¥½åå­—é‡å‘½åä¸€ä¸‹ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ mv toutiao_pic.py ttpic
$ ./ttpic

ä½¿ç”¨:
  ./ttpic å…³é”®å­— è¯·æ±‚ä¸ªæ•°
  - å…³é”®å­—: å›¾ç‰‡æœç´¢å…³é”®è¯
  - è¯·æ±‚ä¸ªæ•°: ä¸€æ¬¡è¯·æ±‚ä¼šè·å–20ä¸ªå›¾é›†çš„å›¾ç‰‡
ä¾‹å¦‚:
  ./ttpic ç‹—ç‹— <span class="m">5</span>
  -&gt; ä¼šè·å–100ä¸ªå›¾é›†ä¸­ç‹—ç‹—çš„å›¾ç‰‡</code></pre></div>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦çˆ¬å–<code>çŒ«å’ª</code>çš„å›¾ç‰‡ï¼Œå¦å¤–æƒ³è¦è·å–100ä¸ªå›¾é›†çš„ï¼Œè¯·æ±‚ä¸ªæ•°è®¾ç½®ä¸º $100\div20=5$ ï¼Œæœ€ç»ˆå‘½ä»¤ä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ ./ttpic çŒ«å’ª <span class="m">5</span></code></pre></div>
<p>å®Œæ•´ä»£ç å¯å‚è€ƒ: <a href="https://github.com/smslit/spider-collection/blob/master/ttpic/ttpic" target="_blank">ttpic</a></p>]]></content>
		</item>
		
		<item>
			<title>sketchç»ƒä¹ ç¨¿ç¬¬ä¸‰æ³¢â€”â€”æˆ‘ä»¬</title>
			<link>https://www.smslit.top/2018/03/06/sketch-practice3/</link>
			<pubDate>Tue, 06 Mar 2018 23:03:58 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/03/06/sketch-practice3/</guid>
			<description>&lt;p&gt;åé‡Œéå¸¸å–œæ¬¢iReader Plusç”µçº¸ä¹¦é˜…è¯»å™¨çš„å…¶ä¸­ä¸€æ¬¾å±ä¿ï¼Œåæ›°ï¼šé˜…èµè‡ªç„¶ã€‚æ˜å¤©å°±æ˜¯å¥³ç¥èŠ‚ï¼Œç´¢æ€§ï¼Œåé‡Œä»¥è¿™ä¸€å¥—äº”ä¸ªå›¾ä½œä¸ºsketchä¸´æ‘¹å¯¹è±¡ï¼Œåšä¸€å°kindleæƒ…ä¹¦å¾—äº†ï¼Œé™„ä¸Šåé‡Œçš„æ†§æ†¬ï¼Œæ°´æœ¨ä¸€å®šéå¸¸å–œæ¬¢ã€‚è¿™ä¹Ÿå°±å¾—åˆ°äº†æœ¬æ–‡æ‰€è¦å±•ç¤ºçš„ç¬¬ä¸‰æ³¢ç»ƒä¹ ç¨¿ï¼Œä½œå“ï¼šã€Šæˆ‘ä»¬ã€‹ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åé‡Œéå¸¸å–œæ¬¢iReader Plusç”µçº¸ä¹¦é˜…è¯»å™¨çš„å…¶ä¸­ä¸€æ¬¾å±ä¿ï¼Œåæ›°ï¼šé˜…èµè‡ªç„¶ã€‚æ˜å¤©å°±æ˜¯å¥³ç¥èŠ‚ï¼Œç´¢æ€§ï¼Œåé‡Œä»¥è¿™ä¸€å¥—äº”ä¸ªå›¾ä½œä¸ºsketchä¸´æ‘¹å¯¹è±¡ï¼Œåšä¸€å°kindleæƒ…ä¹¦å¾—äº†ï¼Œé™„ä¸Šåé‡Œçš„æ†§æ†¬ï¼Œæ°´æœ¨ä¸€å®šéå¸¸å–œæ¬¢ã€‚è¿™ä¹Ÿå°±å¾—åˆ°äº†æœ¬æ–‡æ‰€è¦å±•ç¤ºçš„ç¬¬ä¸‰æ³¢ç»ƒä¹ ç¨¿ï¼Œä½œå“ï¼šã€Šæˆ‘ä»¬ã€‹ã€‚</p>

<h2 id="ä¸´æ‘¹äº”å›¾">ä¸´æ‘¹äº”å›¾</h2>

<p>äº”å¼ è‡ªç„¶å›¾ï¼Œé™„ä¸Šä¸‰ä¸¤æŒšè¯­ï¼Œä½¿ç”¨å¨ƒå¨ƒå­—ä½“ï¼Œæ˜¾å¾—æ›´åŠ è½»æ¾è‡ªç„¶è€Œä¸å¤±çœŸæƒ…ã€‚</p>

<h3 id="sunrise">sunrise</h3>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/l2dqj.png" width="379px"/> 
</figure>


<h3 id="mountain">mountain</h3>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/4zakw.png" width="379px"/> 
</figure>


<h3 id="ocean">ocean</h3>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/jefo2.png" width="379px"/> 
</figure>


<h3 id="tree">tree</h3>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/jzlmb.png" width="379px"/> 
</figure>


<h3 id="countryside">countryside</h3>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/si0jm.png" width="379px"/> 
</figure>


<h2 id="kindleæƒ…ä¹¦">Kindleæƒ…ä¹¦</h2>

<p>åˆ©ç”¨ä¸Šé¢çš„äº”å¼ å›¾ï¼Œå¤–åŠ ç»˜åˆ¶çš„å°é¢å›¾ï¼Œåˆ¶ä½œäº†é€ç»™æ°´æœ¨çš„æƒ…ä¹¦ã€Šæˆ‘ä»¬ã€‹ã€‚æ¯•ç«Ÿæœ¬æ–‡ä¸»è§’æ˜¯sketchï¼Œæ­¤æ¬¡ç»ƒä¹ ä½¿ç”¨äº†æœ€æ–°ç‰ˆæœ¬sketch49æ–°åŠ çš„ç‰¹è‰²åŠŸèƒ½â€”â€”äº¤äº’ï¼Œåˆ©ç”¨sketché¢„è§ˆåŠŸèƒ½å¯ä»¥å±•ç¤ºåœ¨Kindleä¸­åŒæ ·çš„é¡µé¢åˆ‡æ¢æ•ˆæœï¼Œå¦‚ä¸‹ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/siuwr.gif" width="379px"/> 
</figure>


<p>æƒ…ä¹¦å·²é€ç»™åé‡Œçš„å¥³ç¥â€”â€”æ°´æœ¨ï¼Œè™½åªæ˜¯ç®€å•çš„å‡ é¡µï¼Œä½†å¥¹å¾ˆå–œæ¬¢ï¼Œåé‡Œå¾ˆå¼€å¿ƒï¼</p>

<h2 id="èµ„æ–™ä¸‹è½½">èµ„æ–™ä¸‹è½½</h2>

<p><a href="https://pan.baidu.com/s/1XH9oB_3t2UsVzersOuMGkw" target="_blank">sketchç»ƒä¹ ç¨¿3byåé‡Œ</a> å¯†ç : af1m</p>

<p>åŒ…å«ï¼š</p>

<ul>
<li><strong>æˆ‘ä»¬.mobi</strong>: Kindleæƒ…ä¹¦ï¼›</li>
<li><strong>æˆ‘ä»¬.mov</strong>: æ•ˆæœå±•ç¤ºï¼›</li>
<li><strong>we.sketch</strong>: sketchè®¾è®¡ç¨¿ï¼›</li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Sketchç»ƒä¹ ç¨¿ç¬¬äºŒæ³¢</title>
			<link>https://www.smslit.top/2018/02/25/sketch-practice2/</link>
			<pubDate>Sun, 25 Feb 2018 20:12:15 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/02/25/sketch-practice2/</guid>
			<description>&lt;p&gt;ç»§ä¸Šæ¬¡çš„ç»ƒä¹ ç¨¿ç¬¬ä¸€æ³¢ï¼Œsketchç»ƒä¹ ç¨¿ç¬¬äºŒæ³¢è¯¥æ•´ç†ä¸€ä¸‹äº†ï¼Œæ”¾å‡åœ¨è€å®¶æœç„¶ä»€ä¹ˆä¹Ÿå¹²ä¸æˆå‘€ï¼Œå“ˆå“ˆï¼Œè‡³ä»Šä¹Ÿæ²¡ç»ƒä¹ å¤šå°‘ã€‚æ•´ç†è¿™äº›ä¸œè¥¿å›¾è‡ªå·±å¼€å¿ƒè€Œå·²ï¼Œåæ­£ä¹Ÿæ²¡äººçœ‹ï¼Œå°´å°¬ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ç»§ä¸Šæ¬¡çš„ç»ƒä¹ ç¨¿ç¬¬ä¸€æ³¢ï¼Œsketchç»ƒä¹ ç¨¿ç¬¬äºŒæ³¢è¯¥æ•´ç†ä¸€ä¸‹äº†ï¼Œæ”¾å‡åœ¨è€å®¶æœç„¶ä»€ä¹ˆä¹Ÿå¹²ä¸æˆå‘€ï¼Œå“ˆå“ˆï¼Œè‡³ä»Šä¹Ÿæ²¡ç»ƒä¹ å¤šå°‘ã€‚æ•´ç†è¿™äº›ä¸œè¥¿å›¾è‡ªå·±å¼€å¿ƒè€Œå·²ï¼Œåæ­£ä¹Ÿæ²¡äººçœ‹ï¼Œå°´å°¬ï¼</p>

<h2 id="é•œå¤´logo">é•œå¤´logo</h2>

<p>æ•ˆæœå›¾ï¼š</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/8elsj.png"
         alt="é•œå¤´" width="50%"/> 
</figure>


<p>å‚è€ƒï¼š</p>

<ul>
<li><a href="http://www.sketchs.cn/tutorials/detail/245.html" target="_blank">ç”¨Sketchåˆ¶ä½œä¸€æšç²¾ç¾æ‘„å½±å›¾æ ‡</a></li>
</ul>

<h2 id="å°ç»µç¾Š">å°ç»µç¾Š</h2>

<p>æ•ˆæœå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/dvyfn.png" alt="å°ç»µç¾Š" /></p>

<p>è¿™ä¸ªå›¾æ ‡æ˜¯å‚ç…§ç½‘ä¸Šæœåˆ°çš„ä¸€ä¸ªå°ç¾Šlogoå›¾ç‰‡è‡ªå·±ç”»çš„ï¼Œç„¶åå¤´ä¸Šç»™å¥¹åŠ äº†å°èŠ±ï¼Œè¿˜æœ‰çœ¼ç«æ¯›ï¼Œæ›´åƒæ˜¯å¥³ç¾Šï¼Œå“ˆå“ˆå“ˆï¼ï¼ï¼</p>

<p>å‚è€ƒï¼š</p>

<p>è¿™ä¸ªæ‰¾ä¸åˆ°åŸæ¥çš„å‡ºå¤„äº†ï¼Œæ‰¾åˆ°åå†è¡¥å……ï¼ˆä¾µåˆ ï¼‰</p>

<h2 id="å°çŒ´å­">å°çŒ´å­</h2>

<p>å°çŒ´å­æ˜¯å‚ç…§ç½‘ä¸Šçœ‹åˆ°çš„ä¸€ä¸ªå›¾ç‰‡ä¸­å°çŒ´å­è‡ªå·±ç”»çš„ï¼Œå’ŒåŸå›¾å¯èƒ½æœ‰äº›å‡ºå…¥ï¼Œè‡ªå·±ç”»ç€ç©å˜›ï¼Œç»ƒç»ƒæ‰‹å°±å¥½äº†ï¼</p>

<p>æ•ˆæœå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/aad42.png" alt="monkey" /></p>

<p>å‚è€ƒï¼š</p>

<p>è¿™ä¸ªæ‰¾ä¸åˆ°åŸæ¥çš„å‡ºå¤„äº†ï¼Œæ‰¾åˆ°åå†è¡¥å……ï¼ˆä¾µåˆ ï¼‰</p>

<h2 id="ä¸‹è½½">ä¸‹è½½</h2>

<p><a href="https://pan.baidu.com/s/1dGUnKAX" target="_blank">sketchç»ƒä¹ ç¨¿2byåé‡Œ.zip</a> å¯†ç : xfs7</p>]]></content>
		</item>
		
		<item>
			<title>é€¼ç–¯æˆ‘çš„AFIOï¼ŒSTM32çš„JTAGè°ƒè¯•æ¥å£ä½œä¸ºGPIOç”¨</title>
			<link>https://www.smslit.top/2018/02/10/stm32-AFIO/</link>
			<pubDate>Sat, 10 Feb 2018 16:34:01 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/02/10/stm32-AFIO/</guid>
			<description>&lt;p&gt;ä¸çŸ¥æ˜¯å¿ƒå¢ƒä¸ä½³è¿˜æ˜¯æ—¶è¿ä¸ä½³ï¼Œä¸å¥½çš„æƒ…ç»ªé€ æˆäº†æ¶ˆæå¾…äº‹è¿˜æ˜¯ä¸å¥½çš„å¢ƒé‡å¯¼è‡´äº†æ¶ˆææƒ…ç»ªï¼Ÿè¿STM32çš„GPIOéƒ½è¦è€åé‡Œï¼Œè¿˜å¥½åé‡Œæœ€ç»ˆç ´è§£äº†AFIOçš„æŠŠæˆï¼Œæ²¡æœ‰è¿‡ä¸å»çš„åï¼Œå¯¹ä¸å¯¹ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¸çŸ¥æ˜¯å¿ƒå¢ƒä¸ä½³è¿˜æ˜¯æ—¶è¿ä¸ä½³ï¼Œä¸å¥½çš„æƒ…ç»ªé€ æˆäº†æ¶ˆæå¾…äº‹è¿˜æ˜¯ä¸å¥½çš„å¢ƒé‡å¯¼è‡´äº†æ¶ˆææƒ…ç»ªï¼Ÿè¿STM32çš„GPIOéƒ½è¦è€åé‡Œï¼Œè¿˜å¥½åé‡Œæœ€ç»ˆç ´è§£äº†AFIOçš„æŠŠæˆï¼Œæ²¡æœ‰è¿‡ä¸å»çš„åï¼Œå¯¹ä¸å¯¹ï¼</p>

<h2 id="ç°è±¡">ç°è±¡</h2>

<p>æœ€è¿‘åœ¨ç©å¸¦æŒ‰é’®çš„<a href="https://baike.baidu.com/item/%E7%BC%96%E7%A0%81%E5%99%A8/6029803?fr=aladdin" target="_blank">æ—‹è½¬ç¼–ç å™¨</a>ï¼Œæ—‹è½¬ç¼–ç å™¨ç”¨åˆ°äº† <strong>stm32f103c8t6</strong> çš„3ä¸ªGPIOä½œä¸ºè¾“å…¥ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>

<ul>
<li>PB4 -&gt; Aç›¸</li>
<li>PB3 -&gt; Bç›¸</li>
<li>PA15 -&gt; æŒ‰é’®</li>
</ul>

<p>è¿™é‡Œå°±ä¸ä»‹ç»æ—‹è½¬ç¼–ç å™¨äº†ï¼Œå› ä¸ºè¿™é‡Œåªéœ€è¦çŸ¥é“æ˜¯ä½œä¸ºè¾“å…¥ç®¡è„šä½¿ç”¨å°±å¯ä»¥äº†ã€‚</p>

<p>å‡ºç°äº†å¾ˆå¥‡æ€ªçš„ç°è±¡ï¼ŒPB3çš„ç®¡è„šä¸èƒ½æ­£å¸¸é‡‡é›†å¤–éƒ¨è¾“å…¥ï¼Œé€ æˆäº†é©±åŠ¨å¼‚å¸¸ï¼Œåé‡Œä¸€åº¦æ€€ç–‘ç®¡è„šåäº†ï¼Œä½†æ˜¯åé‡Œä½¿ç”¨STM32CubeMXç”Ÿæˆäº†æ–°çš„å·¥ç¨‹ï¼Œæµ‹è¯•ç®¡è„šæ­£å¸¸é‡‡é›†é«˜ä½ç”µå¹³ï¼Œç®€ç›´äº†ï¼æ­¤æ—¶æ­¤åˆ»è„‘è¢‹ä¸­æœ‰ä¸€ä¸‡å¤´ç¾Šé©¼å¥”è¿‡ã€‚ã€‚ã€‚</p>

<h2 id="åˆ†æ">åˆ†æ</h2>

<h3 id="ç®¡è„šé…ç½®é—®é¢˜">ç®¡è„šé…ç½®é—®é¢˜</h3>

<p>åé‡Œæ›¾ç»æ€€ç–‘æ˜¯ä¸æ˜¯STM32CubeMXç”Ÿæˆçš„çš„åˆå§‹åŒ–ä»£ç æœ‰é—®é¢˜ï¼Œä½†æ˜¯åé‡Œåœ¨è°ƒè¯•è¿‡ç¨‹ä¸­æŸ¥çœ‹äº†ç®¡è„šé…ç½®ï¼Œä¸æ‰‹å†Œå¯¹ç…§é…ç½®æ˜¯æ­£ç¡®çš„ã€‚</p>

<h3 id="ç®¡è„šåäº†">ç®¡è„šåäº†</h3>

<p>ç°è±¡ä¸­å·²ç»æåˆ°ï¼Œæ–°çš„å·¥ç¨‹ä¸­PB3ä½œä¸ºè¾“å…¥æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥åŸå› æ’é™¤ã€‚</p>

<h3 id="å¤–éƒ¨ç”µè·¯å¹²æ‰°">å¤–éƒ¨ç”µè·¯å¹²æ‰°</h3>

<p>ç›´è¿ç¼–ç å™¨å’Œå•ç‰‡æœºï¼Œç®¡è„šä»ç„¶é…ç½®ä¸ºä¸Šæ‹‰è¾“å…¥ï¼Œä¾æ—§å­˜åœ¨é—®é¢˜ï¼Œè¯´æ˜è‚¯å®šè¿˜æœ‰å…¶ä»–åŸå› æ‰å¯¹ï¼å¼€å§‹æ€€ç–‘äººç”Ÿã€‚ã€‚ã€‚</p>

<h3 id="éš¾é“ç®¡è„šæœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„">éš¾é“ç®¡è„šæœ‰ä»€ä¹ˆç‰¹æ®Šä¹‹å¤„</h3>

<p>æŸ¥çœ‹èŠ¯ç‰‡æ‰‹å†Œï¼Œæœ€ç»ˆå‘ç°åŸæ¥çœŸçš„æ˜¯æœ‰çŒ«è…»ï¼ŒPB3ç®¡è„šå¤ä½åçš„ä¸»åŠŸèƒ½åŸæ¥ä¸æ˜¯GPIOï¼Œè€Œæ˜¯JTDOï¼ˆJTAGæ¥å£çš„æ•°æ®è¾“å‡ºï¼‰ï¼ŒåŸæ¥æ˜¯ç®¡è„šå¤ç”¨ï¼ˆAFIOï¼‰çš„é—®é¢˜ï¼Œç½‘ä¸ŠæŸ¥æ‰¾èµ„æ–™ï¼Œæœç„¶è¢«åé‡Œæ‰¾åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œé—®é¢˜å‡ºé”™åŸç†ä¸€æ¨¡ä¸€æ ·ï¼š</p>

<blockquote>
<p>æŸ¥çœ‹STM32F1å‚è€ƒæ‰‹å†Œå¯ä»¥å‘ç°PB4åŠPA13\PA14\PA15\PB3ç­‰5ä¸ªè„šåœ¨èŠ¯ç‰‡å¤ä½åé»˜è®¤çš„å°±æ˜¯ä¸“ç”¨çš„è°ƒè¯•å£ï¼Œéé€šç”¨GPIOã€‚ç°åœ¨å®¢æˆ·å·¥ç¨‹å¸ˆè™½ç„¶ç”¨SWDæ¥å£ï¼Œåªç”¨åˆ°PA13\PA14ä¸¤æ ¹çº¿ï¼Œä½†PB4åŠPA15ã€PB3ä¸‰æ ¹çº¿çš„å±æ€§æ²¡å˜ï¼Œè¿˜æ˜¯ä¸“ç”¨è°ƒè¯•å£ã€‚å¦‚æœè¦æŠŠä¸ç”¨çš„PB4ç­‰ä¸‰æ ¹çº¿ä½œä¸ºGPIOï¼Œè¿˜å¾—é¢å¤–åšäº›ç›¸å…³å¯„å­˜å™¨é…ç½®ï¼Œå³æ“ä½œAFIO_MAPRå¯„å­˜å™¨ä¸­çš„SWJ_CFGã€2:0ã€‘ä¸‰ä¸ªä½ã€‚</p>

<p>&hellip;</p>

<p>å¦‚æœä½¿ç”¨STå…¬å¸çš„STM32CubeMxå›¾å½¢åŒ–é…ç½®å·¥å…·æ¥åšç®¡è„šå®‰æ’åŠæ—¶é’Ÿåˆå§‹åŒ–ç­‰å°±å¯ä»¥é¿å…å¾ˆå¤šç±»ä¼¼ä¸Šé¢è°ˆåˆ°çš„ç¹çæˆ–éº»çƒ¦ã€‚åˆ©ç”¨STM32CubeMxé…ç½®å·¥å…·ï¼Œå¾ˆå¤šåˆå§‹åŒ–çš„ä¸œè¥¿éƒ½å¯ä»¥ä¾æ®ä½ çš„ç®¡è„šå’Œæ—¶é’Ÿå®‰æ’ã€å¤–è®¾åŠŸèƒ½çš„ä½¿èƒ½ç­‰è€Œç”Ÿæˆå‡ºç›¸åº”çš„é…ç½®ä»£ç ï¼Œä¸å¿…æ‰‹åŠ¨äºŒæ¬¡æ·»åŠ é…ç½®,è®©ä½ å»ä¸“æ³¨ä½ çš„ç”¨æˆ·åº”ç”¨ä»£ç è®¾è®¡ä¸è°ƒè¯•ã€‚</p>

<p>å–è‡ªï¼š<a href="http://www.51hei.com/bbs/dpj-41000-1.html" target="_blank">ä¸€ä¸ªå…³äºSTM32 GPIOç®¡è„šå¤ç”¨å†²çªçš„è¯é¢˜</a></p>
</blockquote>

<h2 id="è§£å†³">è§£å†³</h2>

<p>ä¾ç…§æ‰¾åˆ°çš„åŸå› æŸ¥çœ‹ç¨‹åºï¼Œè°ƒè¯•è¿‡ç¨‹ä¸­å‘ç°<code>AFIO-&gt;MAPR</code>å¹¶ä¸æ˜¯æœŸæœ›å€¼2ï¼Œä¹Ÿå°±æ˜¯è¯´å¤ä½ä¿æŒäº†PB3çš„å¤ç”¨åŠŸèƒ½JTDOï¼Œæ‰€ä»¥å¯¼è‡´PB3ä½œä¸ºè¾“å…¥æ— æ³•æ­£å¸¸å·¥ä½œã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä¹Ÿé‡‡ç”¨äº†STM32CubeMXç”Ÿæˆçš„ä»£ç ï¼Œå´æ²¡æœ‰å±è”½è°ƒè¯•æ¥å£çš„å¤„ç†å‘¢ï¼ŸæŸ¥çœ‹ä»£ç æ‰¾åˆ°æ–‡ä»¶<code>stm32f1xx_hal_msp.c</code>ä¸­çš„ <strong>HAL_Msp_init</strong> å‡½æ•°ï¼Œå‘ç°é‡Œé¢æœ‰å±è”½è°ƒè¯•æ¥å£çš„æ“ä½œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">__HAL_AFIO_REMAP_SWJ_NOJTAG</span><span class="p">();</span></code></pre></div>
<p>ä½†æ˜¯ä¸ºä»€ä¹ˆæ²¡æœ‰ç”Ÿæ•ˆå‘¢ï¼Ÿgdbä¸€æ­¥æ­¥è°ƒè¯•ç¨‹åºï¼Œå‘ç°æ‰§è¡ŒHAL_Msp_Initå‡½æ•°æ—¶è·³åˆ°äº†å…¶ä»–æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­è¿™ä¸ªå‡½æ•°ä¸ºå¼±å‡½æ•°å®šä¹‰ï¼Œå…¶ä¸­æ²¡æœ‰ä»»ä½•æ“ä½œï¼Œè¯´æ˜æ–‡ä»¶stm32f1xx_hal_msp.cæ²¡æœ‰è¢«ç¼–è¯‘è¿›ç¨‹åºï¼Œæœ€åæŸ¥æ‰¾Makefileå‘ç°ï¼ŒæœçœŸæ²¡æœ‰åŠ å…¥è¿™ä¸ªæ–‡ä»¶çš„ç¼–è¯‘ï¼ŒåŠ å…¥åï¼Œç¼–è¯‘è¿è¡Œï¼Œä¸€åˆ‡OKï¼ï¼ï¼</p>

<p>è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆå…¶ä»–ç”¨STM32CubeMXé…ç½®å·¥å…·ç”Ÿæˆçš„å·¥ç¨‹å¯ä»¥æ­£å¸¸æ“ä½œPB3ã€‚</p>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æ²¡æœ‰æ€»ç»“ï¼Œåªæœ‰å®‰åˆ©ï¼ŒgdbçœŸçš„å¾ˆå¥½ç”¨ï¼Œå¯¹äºstm32èŠ¯ç‰‡å¯ä»¥ä½¿ç”¨<strong>arm-none-eabi-gdb</strong>è¿›è¡Œè°ƒè¯•ï¼Œniceï¼æ¯”IDEä¸­çš„è°ƒè¯•åŠŸèƒ½å¼ºå¤§ä¸”çµæ´»ã€‚ã€‚ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>Sketchç»ƒä¹ ç¨¿ç¬¬ä¸€æ³¢</title>
			<link>https://www.smslit.top/2018/02/01/sketch-practice1/</link>
			<pubDate>Thu, 01 Feb 2018 20:48:10 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/02/01/sketch-practice1/</guid>
			<description>&lt;p&gt;SketchçœŸçš„æ˜¯ä¸€æšç¥å™¨ï¼Œæ˜¯ä¸€æ¬¾è¿è¡Œåœ¨Macå¹³å°çš„èƒ½åŠ›ç‚¸å¤©çš„UIè¾…åŠ©è®¾è®¡Appã€‚æœ‰äº†å®ƒçš„åŠ æŒï¼Œåé‡Œè¿™æ ·åŠè·¯å‡ºå®¶çš„ç¨‹åºçŒ¿ä¹Ÿå¯ä»¥åšä¸€äº›ä¸“ä¸šè®¾è®¡å¸ˆæ‰å¯ä»¥åšçš„è®¾è®¡ã€‚å¾ˆä¹…ä¹‹å‰å°±å¼€å§‹ç”¨äº†ï¼Œä¸è¿‡ä¹‹å‰åŸºæœ¬éƒ½æ˜¯ç»˜åˆ¶ä¸€äº›çŸ¢é‡ç¤ºæ„å›¾ï¼Œæœ€è¿‘èŠ±äº†ç‚¹æ—¶é—´ç¨å¾®å­¦ä¹ ç©è€äº†ä¸€ç•ªï¼Œäº†è§£äº†ä¸€äº›é«˜çº§çš„åŠŸèƒ½ï¼Œå¾ˆå¼€å¿ƒï¼çœ‹åˆ°è§æ¡æ­»å¯‚çš„åšå®¢ï¼Œåé‡Œå°±å†³å®šå†™ä¸€ç¯‡æ²¡ç”¨çš„åšæ–‡è®°å½•ä¸€ä¸‹å·²ç»åšäº†çš„å››ä¸ªç»ƒä¹ ç¨¿ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>SketchçœŸçš„æ˜¯ä¸€æšç¥å™¨ï¼Œæ˜¯ä¸€æ¬¾è¿è¡Œåœ¨Macå¹³å°çš„èƒ½åŠ›ç‚¸å¤©çš„UIè¾…åŠ©è®¾è®¡Appã€‚æœ‰äº†å®ƒçš„åŠ æŒï¼Œåé‡Œè¿™æ ·åŠè·¯å‡ºå®¶çš„ç¨‹åºçŒ¿ä¹Ÿå¯ä»¥åšä¸€äº›ä¸“ä¸šè®¾è®¡å¸ˆæ‰å¯ä»¥åšçš„è®¾è®¡ã€‚å¾ˆä¹…ä¹‹å‰å°±å¼€å§‹ç”¨äº†ï¼Œä¸è¿‡ä¹‹å‰åŸºæœ¬éƒ½æ˜¯ç»˜åˆ¶ä¸€äº›çŸ¢é‡ç¤ºæ„å›¾ï¼Œæœ€è¿‘èŠ±äº†ç‚¹æ—¶é—´ç¨å¾®å­¦ä¹ ç©è€äº†ä¸€ç•ªï¼Œäº†è§£äº†ä¸€äº›é«˜çº§çš„åŠŸèƒ½ï¼Œå¾ˆå¼€å¿ƒï¼çœ‹åˆ°è§æ¡æ­»å¯‚çš„åšå®¢ï¼Œåé‡Œå°±å†³å®šå†™ä¸€ç¯‡æ²¡ç”¨çš„åšæ–‡è®°å½•ä¸€ä¸‹å·²ç»åšäº†çš„å››ä¸ªç»ƒä¹ ç¨¿ã€‚</p>

<p>ä¸æ˜¯åé‡Œè‡ªå¤¸ï¼Œåé‡Œè¿˜æ˜¯æŒºæœ‰æ‚Ÿæ€§çš„ï¼Œæ²¡çœ‹è½¯ä»¶æ“ä½œè¯´æ˜ï¼Œå°±èƒ½æŠŠæ“ä½œæ‘¸ä¸ªå·®ä¸å¤šï¼Œç›´æ¥ä¸Šæ‰‹ç»˜åˆ¶ä¸€äº›ç®€å•çš„ç¤ºæ„å›¾å’Œå°logoã€‚å°¤å…¶æ˜¯å»å¹´ä¸ŠåŠå¹´ç”¨latexå†™è®ºæ–‡ï¼Œéœ€è¦ä¸€äº›çŸ¢é‡ç¤ºæ„å›¾ï¼Œå°±ç”¨è¿™ä¸ªç¥å™¨å’Œå¦ä¸€ä¸ªç¥å™¨Omni Graffleæå®šçš„ã€‚ä½†æ˜¯å‘¢ï¼Œåé‡Œä¹Ÿæ˜¯ä¸ªæœ‰å¿—å°ç¨‹åºçŒ¿ï¼Œä½•ä¸å¥½å¥½äº†è§£ä¸€ä¸‹å·¥å…·å’ŒUIè®¾è®¡å‘¢ï¼Œæ¯•ç«Ÿåé‡Œå¯¹è®¾è®¡ä¸€ç›´å¾ˆæ„Ÿå…´è¶£çš„å˜›ï¼</p>

<h2 id="é»„é’»app">é»„é’»App</h2>

<p>Sketchçš„logoè¿˜æ˜¯æ¯”è¾ƒæœ‰è¾¨è¯†åº¦çš„ï¼Œä¸€æšç»½æ”¾å…‰èŠ’çš„é»„é’»ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/65fzk.png" alt="sketch" /></p>

<h2 id="å­¦ä¹ èµ„æº">å­¦ä¹ èµ„æº</h2>

<p>å‘ç°äº†ä¸‰ä¸ªä¸é”™çš„ç½‘ç«™å¯ä»¥å­¦ä¹ Sketchä»¥åŠå¥½çš„UIè®¾è®¡ï¼š</p>

<ul>
<li><a href="http://sketch.im/" target="_blank">sketch.im</a></li>
<li><a href="http://www.sketchs.cn/index.html" target="_blank">Sketchä¸­å›½</a></li>
<li><a href="http://www.ui.cn/" target="_blank">UIä¸­å›½</a></li>
</ul>

<h2 id="ç»ƒä¹ ç¨¿">ç»ƒä¹ ç¨¿</h2>

<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘è¿˜æ˜¯æ²¡å¿˜æ­£äº‹å„¿ï¼Œè®°å½•æˆ‘çš„ç»ƒä¹ ç¨¿ã€‚è¿™é‡Œå¾—è¯´ä¸€ä¸‹ï¼Œæ¯ä¸ªç»ƒä¹ ç¨¿è®¾è®¡éƒ½æ˜¯ä¾ç…§ç¨¿ä¸‹é“¾æ¥å­¦ä¹ çš„ï¼Œè®¾è®¡ç‰ˆæƒç”±å¯¹åº”é“¾æ¥æ–‡ç« çš„ä½œè€…æ‰€æœ‰ã€‚å…¶ä¸­å½©è‰²å¼€å…³å®Œå…¨æŒ‰ç…§æ•™ç¨‹æ¥çš„ï¼Œä½†å…¶å®ƒä¸‰ä¸ªéƒ½æ˜¯çœ‹äº†ä¸€éæœ€ç»ˆå±•ç¤ºå›¾ï¼Œåé‡Œé‡Œè‡ªå·±ç‹¬ç«‹ç”»çš„ï¼Œæœ‰ä¸€å®šè‡ªå·±çš„å‘æŒ¥ï¼Œè¿™ä¸€ç‚¹è›®æ¬£æ…°çš„ï¼</p>

<h3 id="å½©è‰²å¼€å…³">å½©è‰²å¼€å…³</h3>

<p>æ•ˆæœå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ghccz.png" alt="å½©è‰²å¼€å…³" /></p>

<p>å‚è€ƒï¼š</p>

<ul>
<li><a href="http://www.sketchs.cn/tutorials/detail/199.html" target="_blank">æ•™ä½ åˆ©ç”¨sketchåˆ›å»ºå½©è‰²å¼€å…³ï¼ˆä¸Šï¼‰</a></li>
<li><a href="http://www.sketchs.cn/tutorials/detail/200.html" target="_blank">æ•™ä½ åˆ©ç”¨sketchåˆ›å»ºå½©è‰²å¼€å…³ï¼ˆä¸‹ï¼‰</a></li>
</ul>

<h3 id="è“é¹¦">è“é¹¦</h3>

<p>æ•ˆæœå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/o8bvh.png" alt="è“é¹¦" /></p>

<p>å‚è€ƒï¼š</p>

<ul>
<li><a href="http://www.sketchs.cn/tutorials/detail/204.html" target="_blank">sketchåˆ›å»ºå°é¸Ÿå›¾æ ‡</a></li>
</ul>

<h3 id="google-sheet">Google Sheet</h3>

<p>æ•ˆæœå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/lmp1j.png" alt="Google Sheet" /></p>

<p>å‚è€ƒï¼š</p>

<ul>
<li><a href="http://www.sketchs.cn/tutorials/detail/233.html" target="_blank">åˆ›å»º Google Sheets å›¾æ ‡</a></li>
</ul>

<h3 id="å¤§ç™½">å¤§ç™½</h3>

<p>æ•ˆæœå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/klxv1.png" alt="å¤§ç™½" /></p>

<p>å‚è€ƒï¼š</p>

<ul>
<li><a href="http://www.sketchs.cn/tutorials/detail/234.html" target="_blank">ç”¨sketchç”»ä¸€ä¸ªèŒèŒå“’çš„å¤§ç™½</a></li>
</ul>

<h2 id="ä¸‹è½½">ä¸‹è½½</h2>

<p><a href="https://pan.baidu.com/s/1nwExkKx" target="_blank">sketchç»ƒä¹ ç¨¿1byåé‡Œ.zip</a> å¯†ç : hwus</p>]]></content>
		</item>
		
		<item>
			<title>ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹é˜…è¯»</title>
			<link>https://www.smslit.top/2018/01/31/note-hackerAndPainter/</link>
			<pubDate>Wed, 31 Jan 2018 12:13:51 +0800</pubDate>
			
			<guid>https://www.smslit.top/2018/01/31/note-hackerAndPainter/</guid>
			<description>&lt;p&gt;å°è¯•ä¸‰æ¬¡ç»ˆäºè¯»å®Œäº†ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹ï¼Œå‰ä¸¤æ¬¡åˆšè¯»å®Œæ²¡å‡ ç¯‡å°±æ²¡æ—¶é—´è¯»ç»™è€½æäº†ï¼Œè¿™æ¬¡ä¸ç®¡æ€æ ·ï¼Œè¿˜æ˜¯æŠ½æ—¶é—´ä»0è¯»å®Œäº†æ•´æœ¬ä¹¦ï¼Œæœ‰å¾ˆå¤šæ”¶è·ï¼Œæˆ–è®¸å¥½ä¹…æ²¡å†™ä¸œè¥¿çš„åŸå› ï¼Œæ˜æ˜æœ‰æ‰€æ”¶è·å´éš¾ä»¥æŠ’å‘ï¼Œç´¢æ€§å°±æŠŠé˜…è¯»ä¸­æ·»åŠ çš„ç¬”è®°è´´å‡ºæ¥ï¼Œä¹‹å‰ä¸å’‹ä¹ æƒ¯ç”¨ç”µçº¸ä¹¦é˜…è¯»æ—¶æ·»æ ‡æ³¨ï¼ˆä¸»è¦åŸå› è¿˜æ˜¯æˆ‘å¹³æ—¶è¯»ä¹¦å°‘ï¼Œæƒ­æ„§å‘€ï¼ï¼‰ï¼Œå¥½åƒé˜…è¯»åˆ°ä¸­é—´æ‰ä¹ æƒ¯æ·»åŠ æ ‡æ³¨ï¼Œæƒ³æ¥ä¸å…¨ï¼Œå°±å¾…å†æ¬¡é˜…è¯»çš„æ—¶å€™è¡¥å……äº†ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å°è¯•ä¸‰æ¬¡ç»ˆäºè¯»å®Œäº†ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹ï¼Œå‰ä¸¤æ¬¡åˆšè¯»å®Œæ²¡å‡ ç¯‡å°±æ²¡æ—¶é—´è¯»ç»™è€½æäº†ï¼Œè¿™æ¬¡ä¸ç®¡æ€æ ·ï¼Œè¿˜æ˜¯æŠ½æ—¶é—´ä»0è¯»å®Œäº†æ•´æœ¬ä¹¦ï¼Œæœ‰å¾ˆå¤šæ”¶è·ï¼Œæˆ–è®¸å¥½ä¹…æ²¡å†™ä¸œè¥¿çš„åŸå› ï¼Œæ˜æ˜æœ‰æ‰€æ”¶è·å´éš¾ä»¥æŠ’å‘ï¼Œç´¢æ€§å°±æŠŠé˜…è¯»ä¸­æ·»åŠ çš„ç¬”è®°è´´å‡ºæ¥ï¼Œä¹‹å‰ä¸å’‹ä¹ æƒ¯ç”¨ç”µçº¸ä¹¦é˜…è¯»æ—¶æ·»æ ‡æ³¨ï¼ˆä¸»è¦åŸå› è¿˜æ˜¯æˆ‘å¹³æ—¶è¯»ä¹¦å°‘ï¼Œæƒ­æ„§å‘€ï¼ï¼‰ï¼Œå¥½åƒé˜…è¯»åˆ°ä¸­é—´æ‰ä¹ æƒ¯æ·»åŠ æ ‡æ³¨ï¼Œæƒ³æ¥ä¸å…¨ï¼Œå°±å¾…å†æ¬¡é˜…è¯»çš„æ—¶å€™è¡¥å……äº†ã€‚</p>

<h2 id="æ‘˜è®°">æ‘˜è®°</h2>

<ol>
<li><p>é»‘å®¢å¦‚ä½•æ‰èƒ½åšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…ï¼Ÿ</p>

<blockquote>
<p>é»‘å®¢å¦‚ä½•æ‰èƒ½åšè‡ªå·±å–œæ¬¢çš„äº‹æƒ…ï¼Ÿæˆ‘è®¤ä¸ºè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•æ˜¯ä¸€ä¸ªå‡ ä¹æ‰€æœ‰åˆ›ä½œè€…éƒ½çŸ¥é“çš„æ–¹æ³•ï¼šæ‰¾ä¸€ä»½å…»å®¶ç³Šå£çš„â€œç™½å¤©å·¥ä½œâ€ï¼ˆday jobï¼‰ã€‚è¿™ä¸ªè¯æ˜¯ä»éŸ³ä¹å®¶èº«ä¸Šæ¥çš„ï¼Œä»–ä»¬æ™šä¸Šè¡¨æ¼”éŸ³ä¹ï¼Œæ‰€ä»¥ç™½å¤©å¯ä»¥æ‰¾ä¸€ä»½å…¶ä»–å·¥ä½œã€‚æ›´ä¸€èˆ¬åœ°è¯´ï¼Œâ€œç™½å¤©å·¥ä½œâ€çš„æ„æ€æ˜¯ï¼Œä½ æœ‰ä¸€ä»½ä¸ºäº†èµšé’±çš„å·¥ä½œï¼Œè¿˜æœ‰ä¸€ä»½ä¸ºäº†çˆ±å¥½çš„å·¥ä½œã€‚</p>
</blockquote></li>

<li><p>ä¸åœä¿®æ”¹</p>

<blockquote>
<p>æ³¨æ˜æ•£æ–‡å®¶E.Bæ€€ç‰¹è¯´è¿‡ï¼Œâ€œæœ€å¥½çš„æ–‡å­—æ¥è‡ªä¸åœåœ°ä¿®æ”¹â€ã€‚</p>
</blockquote></li>

<li><p>å¹´è½»çš„è‡ªå·±å’Œè€æˆçš„è‡ªå·±</p>

<p>åœ¨è¿™é‡Œä½œè€…å¥½åƒæ˜¯åœ¨è¯´ï¼Œå†™ä¼˜ç§€è½¯ä»¶éœ€è¦åŒæ—¶å…·å¤‡ä¸¤ç§äº’ç›¸å†²çªçš„ä¿¡å¿µï¼š</p>

<ul>
<li>åƒåˆç”Ÿç‰›çŠŠä¸€æ ·å¯¹è‡ªå·±èƒ½åŠ›ä¿¡å¿ƒä¸‡ä¸ˆï¼›</li>
<li>åˆåƒå†ç»æ²§æ¡‘çš„è€äººå¯¹è‡ªå·±çš„èƒ½åŠ›æŠ±ç€æ€€ç–‘æ€åº¦ï¼›</li>
</ul>

<blockquote>
<p>åœ¨ä½ çš„å¤§è„‘ä¸­ï¼Œæœ‰ä¸€ä¸ªå£°éŸ³è¯´â€œåƒéš¾ä¸‡é™©åªç­‰é—²â€ï¼Œè¿˜æœ‰ä¸€ä¸ªå£°éŸ³å´è¯´â€œæ—©å²å“ªçŸ¥ä¸–äº‹éš¾â€ã€‚</p>
</blockquote></li>

<li><p>å¼±å³æ˜¯å¼º</p>

<blockquote>
<p>è½¯ä»¶é¢†åŸŸï¼Œè´´è¿‘ç”¨æˆ·çš„è®¾è®¡æ€æƒ³è¢«å½’çº³ä¸ºâ€œå¼±å³æ˜¯å¼ºâ€æ¨¡å¼&hellip;å¦‚æœä½ æ­£åœ¨è®¾è®¡æŸç§æ–°ä¸œè¥¿ï¼Œå°±åº”è¯¥å°½å¿«æ‹¿å‡ºåŸå‹ï¼Œå¬å–ç”¨æˆ·çš„æ„è§ã€‚</p>
</blockquote></li>

<li><p>æ²¡æœ‰å®Œå·¥</p>

<blockquote>
<p>ç”»ä½œæ°¸è¿œæ²¡æœ‰å®Œå·¥çš„ä¸€å¤©ï¼Œä½ åªæ˜¯ä¸å†ç”»ä¸‹å»è€Œå·²ã€‚</p>
</blockquote></li>
</ol>

<h2 id="æœ¯è¯­æ•´ç†">æœ¯è¯­æ•´ç†</h2>

<ol>
<li><strong>èƒ¶æ°´ç¨‹åº</strong>
åœ¨åº”ç”¨ç¨‹åºä¹‹é—´æ•´ç†æˆ–è€…è½¬ç§»æ•°æ®çš„ç¨‹åºã€‚</li>
<li><strong>æ ¼æ—æ–¯æ½˜ç¬¬åå®šå¾‹</strong>
ä»»ä½•Cæˆ–Fortranç¨‹åºå¤æ‚åˆ°ä¸€å®šç¨‹åº¦ä¹‹åï¼Œéƒ½ä¼šåŒ…å«ä¸€ä¸ªä¸´æ—¶å¼€å‘çš„ã€åªæœ‰ä¸€åŠåŠŸèƒ½çš„ã€ä¸å®Œå…¨ç¬¦åˆè§„æ ¼çš„ã€åˆ°å¤„éƒ½æ˜¯bugçš„ã€è¿è¡Œé€Ÿåº¦å¾ˆæ…¢çš„Common Lispå®ç°ã€‚</li>
<li><strong>å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™</strong>
ç®€å•çš„è§£é‡Šå°±æ˜¯è¾ƒå¥½çš„è§£é‡Šã€‚</li>
<li><strong>å¸•é‡‘æ£®å®šå¾‹</strong>
å®Œæˆä¸€é¡¹ä»»åŠ¡æ‰€éœ€çš„èµ„æºä¼šä¸æ–­æ‰©å±•ï¼Œç›´è‡³è¿™ç§èµ„æºæ¶ˆè€—ä¸ºæ­¢ã€‚</li>
<li><strong>å›¾çµå®Œå¤‡</strong>
å¦‚æœä¸€ç§ç¼–ç¨‹è¯­è¨€å†™å‡ºçš„æ‰€æœ‰ç¨‹åºéƒ½èƒ½è½¬æ¢æˆå›¾çµç¨‹åºï¼Œå¹¶ä¸”åä¹‹æˆç«‹ï¼Œé‚£ä¹ˆè¿™ç§ç¼–ç¨‹è¯­è¨€å°±æ˜¯å›¾çµå®Œå¤‡çš„ã€‚æ‰€æœ‰å½“ä»£ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯å›¾çµå®Œå¤‡çš„ï¼Œè¿™æ„å‘³ç€ï¼ˆåœ¨ç†è®ºä¸Šï¼‰å®ƒä»¬çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·å¼ºå¤§çš„ã€‚å›¾çµå®Œå¤‡åˆç§°å›¾çµç­‰ä»·(Turing equivalent)ã€‚</li>
</ol>]]></content>
		</item>
		
		<item>
			<title>stm32å¼€å‘æ–°æ–¹å¼-platformio</title>
			<link>https://www.smslit.top/2017/11/08/stm32InPIO-start/</link>
			<pubDate>Wed, 08 Nov 2017 09:10:51 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/11/08/stm32InPIO-start/</guid>
			<description>&lt;p&gt;&lt;a href=&#34;http://platformio.org/&#34; target=&#34;_blank&#34;&gt;platformio&lt;/a&gt;ï¼Œè¿™ä¸ªå¼ºå¤§çš„åµŒå…¥å¼å¼€å‘å¹³å°å½“ç„¶ä¹Ÿæä¾›äº†stm32çš„æ”¯æŒï¼Œæœ¬æ–‡å°è¯•åœ¨platformioå¼€å‘å¹³å°ä¸Šå¼€å‘stm32ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p><a href="http://platformio.org/" target="_blank">platformio</a>ï¼Œè¿™ä¸ªå¼ºå¤§çš„åµŒå…¥å¼å¼€å‘å¹³å°å½“ç„¶ä¹Ÿæä¾›äº†stm32çš„æ”¯æŒï¼Œæœ¬æ–‡å°è¯•åœ¨platformioå¼€å‘å¹³å°ä¸Šå¼€å‘stm32ã€‚</p>

<p>å¦‚æœæ‚¨ä¸å–œæ¬¢ä½¿ç”¨CLI(å‘½ä»¤è¡Œ)çš„stm32å¼€å‘æ–¹å¼ï¼Œå¯ä»¥é˜…è¯»æ–‡ç« <a href="/2018/10/10/vscode-pio-ide/" target="_blank"><strong>stm32å¼€å‘æ–°æ–¹å¼â€”â€”platformioçš„IDE</strong></a>ï¼Œä¹Ÿè®¸ä½ ä¼šå¾—åˆ°æƒŠå–œï¼</p>

<p>æµ‹è¯•ç¯å¢ƒï¼š</p>

<ol>
<li>macOS</li>
<li>stm32f103c8t6æœ€å°ç³»ç»Ÿæ¿</li>
<li>st-link v2</li>
</ol>

<h2 id="æ–°å»ºpioå·¥ç¨‹">æ–°å»ºpioå·¥ç¨‹</h2>

<ul>
<li><p>åˆ›å»ºå·¥ç¨‹æ–‡ä»¶å¤¹å¹¶è¿›å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">mkdir <span class="nb">test</span> <span class="o">&amp;&amp;</span> <span class="nb">cd</span> test</code></pre></div></li>

<li><p>æŸ¥æ‰¾è‡ªå·±é€‚åˆçš„æ¿å­</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pio boards</code></pre></div>
<p>ä¼šçœ‹åˆ°ä»¥ä¸‹ç»“æœï¼Œåé‡Œè¿™é‡Œé€‰æ‹©<code>genericSTM32F103C8</code>ï¼Œè¿™é‡Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä¸»è¦æ˜¯æŸ¥æ‰¾å¯¹åº”è‡ªå·±æœ€å°ç³»ç»Ÿæ¿çš„<code>board ID</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">...
disco_l152rb          STM32L152RBT6  32Mhz     128kB   16kB   ST STM32LDISCOVERY
disco_f100rb          STM32F100RBT6  24Mhz     128kB   8kB    ST STM32VLDISCOVERY
genericSTM32F103C8    STM32F103C8    72Mhz     64kB    20kB   STM32F103C8 <span class="o">(</span>20k RAM. 64k Flash<span class="o">)</span>
genericSTM32F103CB    STM32F103CB    72Mhz     128kB   20kB   STM32F103CB <span class="o">(</span>20k RAM. 128k Flash<span class="o">)</span>
genericSTM32F103R8    STM32F103R8    72Mhz     64kB    20kB   STM32F103R8 <span class="o">(</span>20k RAM. 64k Flash<span class="o">)</span>
genericSTM32F103RB    STM32F103RB    72Mhz     128kB   20kB   STM32F103RB <span class="o">(</span>20k RAM. 128k Flash<span class="o">)</span>
genericSTM32F103RC    STM32F103RC    72Mhz     256kB   48kB   STM32F103RC <span class="o">(</span>48k RAM. 256k Flash<span class="o">)</span>
genericSTM32F103RE    STM32F103RE    72Mhz     512kB   64kB   STM32F103RE <span class="o">(</span>64k RAM. 512k Flash<span class="o">)</span>
...</code></pre></div></li>

<li><p>åˆå§‹åŒ–å·¥ç¨‹ï¼Œä»¥vimä½œä¸ºIDEï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">pio init --ide vim -b genericSTM32F103C8</code></pre></div></li>

<li><p>æ–°å»ºMakefileï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆè¿™é‡Œæ³¨æ„ç¼©è¿›é—®é¢˜ï¼‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-mk" data-lang="mk"><span class="nf">all</span><span class="o">:</span>
  platformio -f -c vim run
<span class="nf">upload</span><span class="o">:</span>
  platformio -f -c vim run --target upload
<span class="nf">clean</span><span class="o">:</span>
  platformio -f -c vim run --target clean
<span class="nf">program</span><span class="o">:</span>
  platformio -f -c vim run --target program
<span class="nf">uploadfs</span><span class="o">:</span>
  platformio -f -c vim run --target uploadfs
<span class="nf">update</span><span class="o">:</span>
  platformio -f -c vim update
</code></pre></div></li>

<li><p>é…ç½®<code>platformio.ini</code>æ–‡ä»¶
å› ä¸ºæˆ‘ä»¬è¿™é‡Œä½¿ç”¨stlink v2ï¼Œæ‰€ä»¥éœ€è¦å°†ç¨‹åºä¸Šä¼ æ–¹å¼å®šä¸º<code>stlink</code>ï¼Œé»˜è®¤ç”Ÿæˆçš„å·¥ç¨‹ä½¿ç”¨<code>arduino</code>æ¡†æ¶ï¼Œè¿™æ˜¯ç©è¿‡Arduinoçš„ç½‘å‹çš„ç¦éŸ³ï¼Œä¸æ˜¯å—ï¼Ÿåªéœ€æ·»åŠ ä¸€è¡ŒæŒ‡å®šç¨‹åºä¸Šä¼ æ–¹å¼ï¼Œæœ€ç»ˆå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="k">[env:genericSTM32F103C8]</span>
<span class="na">platform</span> <span class="o">=</span> <span class="s">ststm32</span>
<span class="na">board</span> <span class="o">=</span> <span class="s">genericSTM32F103C8</span>
<span class="na">framework</span> <span class="o">=</span> <span class="s">arduino</span>
<span class="na">upload_protocol</span> <span class="o">=</span> <span class="s">stlink</span></code></pre></div></li>
</ul>

<p><code>upload_protocol = stlink</code> å¯ä»¥çœç•¥ã€‚</p>

<h2 id="æ·»åŠ ä»£ç ">æ·»åŠ ä»£ç </h2>

<p>æ·»åŠ ç‚¹ç¯ä»£ç ï¼Œåé‡Œçš„æœ€å°ç³»ç»Ÿæ¿ä¸ŠLEDå¯¹åº”äºç®¡è„š<code>PB0</code>ï¼Œæ‰€ä»¥åœ¨<code>src</code>ç›®å½•ä¸‹æ·»åŠ <code>main.cpp</code>çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="n">PB0</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">PB0</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">PB0</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ç¼–è¯‘ä¸€ä¸‹ï¼Œç¼–è¯‘çš„æ—¶å€™ä¼šä¸‹è½½stm32å¹³å°å¼€å‘éœ€è¦çš„ç¼–è¯‘å·¥å…·å’Œç›¸å…³æ¡†æ¶ï¼Œä½ èƒ½åšçš„å°±æ˜¯waiting&hellip;ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ <span class="nb">test</span> make all
platformio -f -c vim run
<span class="o">[</span>Wed Nov  <span class="m">8</span> <span class="m">09</span>:42:57 <span class="m">2017</span><span class="o">]</span> Processing genericSTM32F103C8 
<span class="o">(</span>upload_protocol: stlink<span class="p">;</span> platform: ststm32<span class="p">;</span> board: genericSTM32F103C8<span class="p">;</span> framework: arduino<span class="o">)</span>
--------------------------------------------------------------------------------------------------
Verbose mode can be enabled via <span class="sb">`</span>-v, --verbose<span class="sb">`</span> option
Collected <span class="m">27</span> compatible libraries
Looking <span class="k">for</span> dependencies...
No dependencies
Linking .pioenvs/genericSTM32F103C8/firmware.elf
Calculating size .pioenvs/genericSTM32F103C8/firmware.elf
text	   data	    bss	    dec	    hex	filename
<span class="m">6484</span>	   <span class="m">1936</span>	    <span class="m">312</span>	   <span class="m">8732</span>	   221c	.pioenvs/genericSTM32F103C8/firmware.elf
<span class="o">================================</span> <span class="o">[</span>SUCCESS<span class="o">]</span> Took <span class="m">1</span>.55 <span class="nv">seconds</span> <span class="o">=====================================</span></code></pre></div>
<h2 id="ä¸Šä¼ ç¨‹åº">ä¸Šä¼ ç¨‹åº</h2>

<p>å› ä¸ºå‰é¢å·²ç»é…ç½®äº†ç¨‹åºä¸Šä¼ æ–¹å¼ä¸º<code>stlink</code>ï¼Œæ‰€ä»¥å°†stlinkè¿æ¥æœ€å°ç³»ç»Ÿæ¿å’Œmacå°±å¯ä»¥æ‰§è¡Œä¸Šä¼ äº†ï¼Œè¿™é‡Œä¹Ÿä¼šä¸‹è½½ç›¸åº”çš„ä¸‹è½½å·¥å…·ï¼Œwaiting &hellip; ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ make upload</code></pre></div>
<p>æ­£å¸¸çš„è¯å°±ä¼šçœ‹åˆ°å‘½ä»¤è¡Œçª—å£æ‰“å°ä¸Šä¼ è¿‡ç¨‹çš„ä¿¡æ¯ã€‚ä½†ä¹Ÿå¯èƒ½ä¼šé‡åˆ°ä¸‹é¢ç±»ä¼¼çš„é—®é¢˜ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ <span class="nb">test</span> make upload
platformio -f -c vim run --target upload
<span class="o">[</span>Wed Nov  <span class="m">8</span> <span class="m">09</span>:50:10 <span class="m">2017</span><span class="o">]</span> Processing genericSTM32F103C8 
<span class="o">(</span>upload_protocol: stlink<span class="p">;</span> platform: ststm32<span class="p">;</span> board: genericSTM32F103C8<span class="p">;</span> framework: arduino<span class="o">)</span>
------------------------------------------------------------------------------------------------------
Verbose mode can be enabled via <span class="sb">`</span>-v, --verbose<span class="sb">`</span> option
Collected <span class="m">27</span> compatible libraries
Looking <span class="k">for</span> dependencies...
No dependencies
Linking .pioenvs/genericSTM32F103C8/firmware.elf
Checking program size
text	   data	    bss	    dec	    hex	filename
<span class="m">6484</span>	   <span class="m">1936</span>	    <span class="m">312</span>	   <span class="m">8732</span>	   221c	.pioenvs/genericSTM32F103C8/firmware.elf
Uploading .pioenvs/genericSTM32F103C8/firmware.bin
<span class="m">2017</span>-11-08T09:50:11 INFO src/common.c: Loading device parameters....
<span class="m">2017</span>-11-08T09:50:11 WARN src/common.c: unknown chip id! 0xe0042000
st-flash <span class="m">1</span>.3.1
*** <span class="o">[</span>upload<span class="o">]</span> Error <span class="nv">255</span>
<span class="o">======================================</span> <span class="o">[</span>ERROR<span class="o">]</span> Took <span class="m">1</span>.53 <span class="nv">seconds</span> <span class="o">======================================</span>
make: *** <span class="o">[</span>upload<span class="o">]</span> Error <span class="m">1</span></code></pre></div>
<blockquote>
<p>æœ‰ä¸€ä¸ªä¸´æ—¶çš„è§£å†³æ–¹æ³•ï¼Œå°†æ¿ä¸Šçš„<code>BOOT0</code>ä¸<code>VDD</code>çŸ­æ¥ï¼Œå¤ä½ä¸€ä¸‹æœ€å°ç³»ç»Ÿæ¿ï¼Œä¼šè¿›å…¥bootæ¨¡å¼ï¼Œæ­¤æ—¶æ‰§è¡Œ<code>make upload</code>ï¼Œç¨‹åºä¼šåŒæ—¶çƒ§å†™åœ¨flashå’Œå†…å­˜ä¸Šï¼Œä¸€æ—¦å¤ä½å†…å­˜ä¸Šçš„ç¨‹åºä¼šæ¶ˆå¤±ï¼Œå¦‚æœ<code>BOOT0</code>è¿˜æ˜¯æ¥<code>VDD</code>çš„è¯è¿˜ä¼šè¿›å…¥bootæ¨¡å¼ï¼Œæ­¤æ—¶ç¨‹åºå·²ç»æ²¡äº†ï¼Œä½†æ˜¯flash ä¸­ä»ç„¶å­˜åœ¨ï¼Œæ‰€ä»¥åªéœ€å°†<code>BOOT0</code>çŸ­æ¥<code>GND</code>å†å¤ä½ä¸€ä¸‹ï¼Œæ¿å­å°±ä»flashå¯åŠ¨äº†ï¼Œæ‰€ä»¥æœ€ç»ˆç¨‹åºè°ƒè¯•æ–¹æ³•ä¸ºï¼š</p>

<p>è°ƒè¯•ç¨‹åºï¼š<code>BOOT0</code>çŸ­æ¥<code>VDD</code>ï¼Œæ¯æ¬¡ä¸Šä¼ ç¨‹åºå…ˆå¤ä½æ¿å­ï¼Œç„¶åæ‰§è¡Œ<code>make upload</code>;ä¸è¿›è¡Œè°ƒè¯•çš„è¯ï¼Œå…ˆä»¥è°ƒè¯•ç¨‹åºçš„æ–¹å¼ä¸Šä¼ ç¨‹åºï¼Œç„¶åçŸ­æ¥<code>BOOT0</code>å’Œ<code>GND</code>ï¼Œå¤ä½ä¸€ä¸‹æ¿å­ï¼Œæ¿å­ä¼šä»flashå¯åŠ¨è¿è¡Œå›ºåŒ–çš„ç¨‹åºã€‚</p>
</blockquote>

<p>ä¸Šè¿°é—®é¢˜æœ¬æ¥ä¸è¯¥å‡ºç°ï¼Œåæ¥å‘ç°åŸæ¥æ˜¯æˆ‘çš„usb hubæœ‰é—®é¢˜ï¼Œæˆ‘ç›´æ¥å°†stlink v2è¿æ¥åˆ°macbookä¸Šæ˜¯æ²¡æœ‰ä¸Šè¿°é—®é¢˜çš„ã€‚</p>

<h2 id="è°ƒè¯•ç¨‹åº">è°ƒè¯•ç¨‹åº</h2>

<p>MCUå¼€å‘è¿‡ç¨‹ä¸­æœ‰å¯èƒ½ä¼šé‡åˆ°æ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œæ‰€ä»¥ç¡¬ä»¶è°ƒè¯•æ˜¯å°‘ä¸äº†çš„ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å»ºç«‹è¿™ä¸ªstmçš„PIOå·¥ç¨‹ï¼Œåœ¨ä¸Šé¢ç¼–è¯‘è¿‡ç¨‹ä¸­å°±ä¼šä¸‹è½½stm32å•ç‰‡æœºå¼€å‘éœ€è¦çš„ç¼–è¯‘å·¥å…·å’Œè°ƒè¯•å·¥å…·ã€‚</p>

<h3 id="è°ƒè¯•é…ç½®">è°ƒè¯•é…ç½®</h3>

<p>å…è´¹ç‰ˆçš„PIOæœ‰æ‰€é™åˆ¶ï¼Œä¸æ”¯æŒstm32ç¡¬ä»¶è°ƒè¯•ï¼Œä½†æˆ‘ä»¬å¯ä»¥è‡ªå·±è¿›è¡Œç®€å•é…ç½®ï¼Œæ­å»ºç¡¬ä»¶è°ƒè¯•çš„å¿«æ·æ–¹å¼ï¼š</p>

<ol>
<li><p>æ·»åŠ å¿…è¦çš„ç¼–è¯‘é€‰é¡¹</p>

<p>å‘ <code>platformio.ini</code> æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">build_flags</span> <span class="o">=</span> <span class="s">
</span><span class="s">    -g</span></code></pre></div>
<p>æ·»åŠ è¿™ä¸ªå‚æ•°é¡¹ï¼Œæ˜¯ä¸ºäº†ç¼–è¯‘ç”Ÿæˆè°ƒè¯•éœ€è¦çš„ç¬¦å·é¡¹ï¼Œæ¯”å¦‚å˜é‡åã€å‡½æ•°åç­‰ã€‚</p></li>

<li><p>æ·»åŠ è°ƒè¯•ç›¸å…³çš„Makeå¿«æ·å‘½ä»¤</p>

<p>å‘ <code>Makefile</code> ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">debug</span><span class="o">:</span>
    arm-none-eabi-gdb .pioenvs/genericSTM32F103C8/firmware.elf

<span class="nf">server</span><span class="o">:</span>
    openocd -f interface/stlink.cfg -f target/stm32f1x.cfg &gt; .dblog
</code></pre></div>
<ul>
<li><strong>server</strong> å‘½ä»¤ï¼šç”¨äºå¼€å¯ <strong>openocd</strong> è°ƒè¯•æœåŠ¡ï¼ŒæŒ‡æ˜äº†ä½¿ç”¨ <strong>stlink</strong> è°ƒè¯• stm32f1x ç³»åˆ—èŠ¯ç‰‡<sup class="footnote-ref" id="fnref:openocd-export-P"><a href="#fn:openocd-export-P">1</a></sup>ï¼›</li>
<li><strong>debug</strong> å‘½ä»¤ï¼šç”¨äºå¼€å¯gdbè¿›è¡Œè°ƒè¯•ï¼ŒæŒ‡æ˜äº† <code>.pioenvs/genericSTM32F103C8/firmware.elf</code> ä¸ºå¯æ‰§è¡Œè°ƒè¯•æ–‡ä»¶<sup class="footnote-ref" id="fnref:arm-none-eabi-gd"><a href="#fn:arm-none-eabi-gd">2</a></sup>ï¼›</li>
</ul></li>

<li><p>æ·»åŠ gdbåˆå§‹åŒ–æ–‡ä»¶</p>

<p>å·¥ç¨‹æ ¹ç›®å½•ä¸‹æ·»åŠ æ–‡ä»¶ <code>.gdbinit</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ini" data-lang="ini"><span class="na">target extended-remote localhost:3333</span>
<span class="na">monitor reset halt</span>
<span class="na">load</span>
<span class="na">break main</span>
<span class="na">continue</span></code></pre></div>
<p>ä¸Šè¿°å†…å®¹ï¼Œä¼šåœ¨å¼€å¯è°ƒè¯•å‘½ä»¤åæ‰§è¡Œï¼Œé¦–å…ˆè¿æ¥æœ¬åœ°å·²ç»å¼€å§‹çš„ <strong>openocd</strong> è°ƒè¯•æœåŠ¡ï¼Œå¤ä½å¾…è°ƒè¯•ç¡¬ä»¶ï¼ŒåŠ è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¿™é‡Œæ˜¯elfæ–‡ä»¶ï¼‰ï¼Œç„¶ååœ¨ç¨‹åºå…¥å£ <strong>mainå‡½æ•°</strong> å¤„æ‰“æ–­ç‚¹ï¼Œæœ€åæ‰§è¡Œç¨‹åºåˆ° <strong>main</strong> å‡½æ•°ã€‚</p></li>
</ol>

<h3 id="è°ƒè¯•æ“ä½œ">è°ƒè¯•æ“ä½œ</h3>

<p>å®Œæˆä¸Šè¿°é…ç½®åå°±å¯ä»¥è¿›è¡Œè°ƒè¯•äº†ã€‚</p>

<ol>
<li><p>å¼€å¯è°ƒè¯•æœåŠ¡</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$  make server
~/.platformio/packages/tool-openocd/bin/openocd -f ~/.platformio/packages/tool-openocd/scripts/interface/stlink.cfg -f ~/.platformio/packages/tool-openocd/scripts/target/stm32f1x.cfg &gt; .dblog
GNU MCU Eclipse <span class="m">64</span>-bits Open On-Chip Debugger <span class="m">0</span>.10.0+dev-00392-gbe9ef0b0 <span class="o">(</span><span class="m">2018</span>-01-12-16:51<span class="o">)</span>
Licensed under GNU GPL v2
For bug reports, <span class="nb">read</span>
        http://openocd.org/doc/doxygen/bugs.html
Info : auto-selecting first available session transport <span class="s2">&#34;hla_swd&#34;</span>. To override use <span class="s1">&#39;transport select &lt;transport&gt;&#39;</span>.
Info : The selected transport took over low-level target control. The results might differ compared to plain JTAG/SWD
adapter speed: <span class="m">1000</span> kHz
adapter_nsrst_delay: <span class="m">100</span>
none separate
Info : Listening on port <span class="m">6666</span> <span class="k">for</span> tcl connections
Info : Listening on port <span class="m">4444</span> <span class="k">for</span> telnet connections
Info : Unable to match requested speed <span class="m">1000</span> kHz, using <span class="m">950</span> kHz
Info : Unable to match requested speed <span class="m">1000</span> kHz, using <span class="m">950</span> kHz
Info : clock speed <span class="m">950</span> kHz
Info : STLINK v2 JTAG v18 API v2 SWIM v4 VID 0x0483 PID 0x3748
Info : using stlink api v2
Info : Target voltage: <span class="m">3</span>.241188
Info : stm32f1x.cpu: hardware has <span class="m">6</span> breakpoints, <span class="m">4</span> watchpoints
Info : Listening on port <span class="m">3333</span> <span class="k">for</span> gdb connections
...</code></pre></div></li>

<li><p>å¯åŠ¨è°ƒè¯•</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$  make debug
arm-none-eabi-gdb .pioenvs/genericSTM32F103C8/firmware.elf
GNU gdb <span class="o">(</span>GNU Tools <span class="k">for</span> Arm Embedded Processors <span class="m">7</span>-2017-q4-major<span class="o">)</span> <span class="m">8</span>.0.50.20171128-git
Copyright <span class="o">(</span>C<span class="o">)</span> <span class="m">2017</span> Free Software Foundation, Inc.
...
...
...
Reading symbols from .pioenvs/genericSTM32F103C8/firmware.elf...done.
0x00000000 in ?? <span class="o">()</span>
target halted due to debug-request, current mode: Thread
xPSR: 0x01000000 pc: 0x08000fb8 msp: 0x20005000
Loading section .text, size 0x39e4 lma 0x8000000
Loading section .ARM.exidx, size 0x8 lma 0x80039e8
Loading section .data, size 0x938 lma 0x80039f0
Loading section .rodata, size 0x4fc lma 0x8004328
Start address 0x8000fb8, load size <span class="m">18464</span>
Transfer rate: <span class="m">16</span> KB/sec, <span class="m">4616</span> bytes/write.
Breakpoint <span class="m">1</span> at 0x8002c22: file /Users/5km/.platformio/packages/framework-arduinoststm32/STM32F1/cores/maple/main.cpp, line <span class="m">38</span>.
---Type &lt;<span class="k">return</span>&gt; to <span class="k">continue</span>, or q &lt;<span class="k">return</span>&gt; to quit---
<span class="o">(</span>gdb<span class="o">)</span> </code></pre></div></li>

<li><p>è¿›è¡Œgdbè°ƒè¯•</p>

<p>ä¸‹é¢å°±å¯ä»¥ä½¿ç”¨ <strong>gdb</strong> å‘½ä»¤å¯¹ç¨‹åºè¿›è¡Œè°ƒè¯•äº†ï¼šæ‰“æ–­ç‚¹ï¼Œå•æ­¥ï¼Œæ‰§è¡Œç­‰ç­‰ï¼Œç›¸å…³gdbè·³æ˜¯å‘½ä»¤è¿™é‡Œå°±ä¸è®²è§£äº†ï¼Œå¯ä»¥é˜…è¯» <a href="https://liuenyan.github.io/sphinx-wiki/gdb.html" target="_blank">GDB å‘½ä»¤é€ŸæŸ¥</a> äº†è§£ã€‚</p></li>
</ol>
<div class="footnotes">

<hr />

<ol>
<li id="fn:openocd-export-P">ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­å·²æ·»åŠ openocdçš„è·¯å¾„(<code>export PATH=&quot;/Users/5km/.platformio/packages/tool-openocd/bin:$PATH&quot;</code>)ï¼Œè°ƒç”¨ <strong>openocd</strong> çš„æ—¶å€™ä¼šå…ˆä»å…¶ç›¸å¯¹è·¯å¾„ä¸‹æŸ¥æ‰¾æŒ‡å®šçš„é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œæ¯”å¦‚<code>interface/stlink.cfg</code>ã€‚å…³äºopenocdçš„ä½¿ç”¨å‚è€ƒ<a href="http://openocd.org/doc-release/html/index.html" target="_blank">OpenOCD Userâ€™s Guide</a>ã€‚ <a class="footnote-return" href="#fnref:openocd-export-P"><sup>[return]</sup></a></li>
<li id="fn:arm-none-eabi-gd">è¿™é‡Œè°ƒç”¨äº† <code>arm-none-eabi-gdb</code> è¿™ä¸ªæ˜¯ arm èŠ¯ç‰‡çš„äº¤å‰ç¼–è¯‘é“¾å·¥å…·é›†ä¸­çš„è°ƒè¯•å‘½ä»¤ï¼Œè¿™é‡Œç›´æ¥è°ƒç”¨ï¼Œæ˜¯å› ä¸ºå·¥å…·é›†è·¯å¾„å·²ç»æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­äº† <a class="footnote-return" href="#fnref:arm-none-eabi-gd"><sup>[return]</sup></a></li>
</ol>
</div>]]></content>
		</item>
		
		<item>
			<title>æ—¶é—´éƒ½å»å“ªå„¿äº†</title>
			<link>https://www.smslit.top/2017/10/31/timetogo/</link>
			<pubDate>Tue, 31 Oct 2017 06:35:29 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/10/31/timetogo/</guid>
			<description>&lt;p&gt;çœ‹æ ‡é¢˜æœ‰ç‚¹å”¬äººï¼Œå…¶å®æˆ‘å†™çš„è¿˜æ˜¯æŠ€æœ¯æ–‡ç« ã€‚ç®—æ³•ä¸­ä¼šè¯„ä¼°æ—¶é—´å¤æ‚åº¦ï¼Œè€Œå®é™…ç¼–å†™cç¨‹åºæ—¶ï¼Œä¹Ÿä¼šç”¨åˆ°ä¸€äº›æ–¹æ³•å»è¯„ä¼°æ—¶é—´ï¼Œçœ‹ä¸€çœ‹ç¨‹åºè¿è¡Œâ€œæ—¶é—´éƒ½å»å“ªå„¿äº†â€ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>çœ‹æ ‡é¢˜æœ‰ç‚¹å”¬äººï¼Œå…¶å®æˆ‘å†™çš„è¿˜æ˜¯æŠ€æœ¯æ–‡ç« ã€‚ç®—æ³•ä¸­ä¼šè¯„ä¼°æ—¶é—´å¤æ‚åº¦ï¼Œè€Œå®é™…ç¼–å†™cç¨‹åºæ—¶ï¼Œä¹Ÿä¼šç”¨åˆ°ä¸€äº›æ–¹æ³•å»è¯„ä¼°æ—¶é—´ï¼Œçœ‹ä¸€çœ‹ç¨‹åºè¿è¡Œâ€œæ—¶é—´éƒ½å»å“ªå„¿äº†â€ã€‚</p>

<p>æ–‡ç« ç¼–å†™çš„cç¨‹åºå‡åœ¨<code>macOS</code>ä¸­å®ç°éªŒè¯ï¼Œåº”è¯¥åŒæ ·é€‚ç”¨äº<code>Linux/Unix</code>ã€‚è¿™é‡Œå°†ä¼šç”¨åˆ°ä¸‹é¢ä¸‰ç§æ–¹æ³•è¯„ä¼°ç¨‹åºçš„è¿è¡Œæ—¶é—´ï¼š</p>

<ul>
<li>clock()å‡½æ•°</li>
<li>time()å‡½æ•°</li>
<li>gettimeofday()å‡½æ•°</li>
</ul>

<h2 id="clock-å‡½æ•°"><code>clock()</code>å‡½æ•°</h2>

<p><code>clock()</code>å‡½æ•°æ˜¯ ANSI C çš„æ ‡å‡†åº“å‡½æ•°ï¼Œå…¶å£°æ˜åœ¨<code>time.h</code>æ–‡ä»¶ä¸­ï¼Œå…¶è¿”å›ä»å¼€å¯è¿™ä¸ªç¨‹åºè¿›ç¨‹åˆ°è°ƒç”¨clock()å‡½æ•°ä¹‹é—´çš„CPU æ—¶é’Ÿè®¡æ—¶å•å…ƒï¼ˆclock tickï¼‰æ•°ï¼Œåœ¨ MSDN ä¸­ç§°ä¹‹ä¸ºæŒ‚é’Ÿæ—¶é—´ï¼ˆwal-clockï¼‰ï¼Œè¿™æœ‰ç‚¹åƒåµŒå…¥å¼ç³»ç»Ÿä¸­çš„ç³»ç»Ÿæ»´ç­”ã€‚</p>

<p>å‡½æ•°è¿”å›ä¸€ä¸ª<code>clock_t</code> çš„ç±»å‹æ•°æ®ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªæ— ç¬¦å·çš„é•¿æ•´å‹ï¼Œé‚£ä¹ˆè¦è·å¾—æ—¶é—´çš„è¯ï¼Œè¿˜å¾—é™¤ä»¥ <code>CLOCKS_PER_SEC</code> çš„å®å®šä¹‰ã€‚é¡¾åæ€ä¹‰ï¼Œ<code>CLOCKS_PER_SEC</code> å°±æ˜¯æ¯ç§’æ‰€ç»è¿‡çš„æ»´ç­”æ•°ã€‚</p>

<h3 id="æµ‹è¯•ç¨‹åº">æµ‹è¯•ç¨‹åº</h3>

<p>é‚£ä¹ˆç¼–å†™ä¸€ä¸‹ç¨‹åº <code>example1.c</code> å°å°é²œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;time.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kt">long</span> <span class="n">loopCount</span> <span class="o">=</span> <span class="mi">10000000L</span><span class="p">;</span>
	<span class="n">clock_t</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">;</span>
	<span class="kt">double</span> <span class="n">duration</span><span class="p">;</span>
	<span class="n">printf</span><span class="p">(</span> <span class="s">&#34;Time to do %ld empty loops: &#34;</span><span class="p">,</span> <span class="n">loopCount</span><span class="p">)</span> <span class="p">;</span>
	<span class="n">begin</span> <span class="o">=</span> <span class="n">clock</span><span class="p">();</span>
	<span class="k">while</span><span class="p">(</span> <span class="n">loopCount</span><span class="o">--</span> <span class="p">);</span>
	<span class="n">end</span> <span class="o">=</span> <span class="n">clock</span><span class="p">();</span>
	<span class="n">duration</span> <span class="o">=</span> <span class="p">(</span><span class="kt">double</span><span class="p">)(</span><span class="n">end</span> <span class="o">-</span> <span class="n">begin</span><span class="p">)</span> <span class="o">/</span> <span class="n">CLOCKS_PER_SEC</span><span class="p">;</span>
    <span class="c1">// ç²¾ç¡®åˆ°ms
</span><span class="c1"></span>	<span class="n">printf</span><span class="p">(</span> <span class="s">&#34;%.3f ms</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">duration</span> <span class="o">*</span> <span class="mf">1000.0</span> <span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>ç¨‹åºéªŒè¯äº†10000000ä¸ªç©ºå¾ªç¯çš„è€—æ—¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  duration ./example1
Time to <span class="k">do</span> <span class="m">10000000</span> empty loops: <span class="m">18</span>.601 ms</code></pre></div>
<h3 id="æ³¨æ„">æ³¨æ„</h3>

<blockquote>
<ul>
<li>å‡½æ•°å¾—åˆ°çš„æ˜¯ç¨‹åºæ‰€å è¿›ç¨‹åœ¨CPUä¸Šçš„æ¶ˆè€—çš„æ»´ç­”æ•°ï¼Œæ‰€ä»¥sleepè¿™ç±»å‡½æ•°çš„æ—¶é—´ä¸ä¼šè®¡å…¥ï¼›</li>
<li>åœ¨ POSIX å…¼å®¹ç³»ç»Ÿä¸­ï¼ŒCLOCKS_PER_SECçš„å€¼ä¸º 1,000,000 çš„ï¼Œä¹Ÿå°±æ˜¯ 1MHzï¼Œæ‰€ä»¥ç†è®ºä¸Šç²¾åº¦åº”è¯¥æ˜¯usï¼›</li>
</ul>

<p>ç½‘ä¸Šå¥½å¤šèµ„æ–™è¯´æ˜¯ç²¾åº¦æ˜¯msçº§åˆ«çš„ï¼Œä»”ç»†æƒ³ä¸€ä¸‹å…¶å®ä»–ä»¬è¯´çš„ä¸å¯¹ï¼Œå°±åƒä¸Šé¢æˆ‘è¯´çš„<code>CLOCKS_PER_SEC</code>æ˜¯1000000ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>clock()</code>å‡½æ•°å…¶å®è¿”å›çš„æ˜¯è¯¥è¿›ç¨‹å ç”¨CPUçš„usæ—¶é—´ï¼Œé‚£ä¹ˆä»–ä»¬è¯´æ‰“å°å‡½æ•°çš„æ—¶é—´å ç”¨ä¸º0msï¼Œé—®é¢˜å‡ºåœ¨å“ªå„¿äº†å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œæ‰“å°ä¸€ä¸‹å¼€å§‹å’Œç»“æŸçš„æ»´ç­”æ•°å°±çŸ¥é“äº†ï¼Œå ç”¨æ»´ç­”æ•°ä¸å¯èƒ½ä¸º0çš„ã€‚<code>CLOCKS_PER_SEC</code>æ˜¯ä¸ªæ•´å‹ï¼Œè®¡ç®—çš„æ—¶å€™å‰åè·å–çš„clock()çš„å€¼ä¹Ÿéƒ½æ˜¯æ•´å‹ï¼Œæ‰€ä»¥è®¡ç®—çš„æ—¶å€™å½“ç„¶ä¼šæ˜¯0ï¼Œåªéœ€è¦æŒ‰æµ®ç‚¹ç±»å‹è®¡ç®—å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚ä¸‹é¢<code>example.c</code>çš„å®ç°ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæœ‰äº›ç³»ç»Ÿä¸­<code>CLOCKS_PER_SEC</code>å¯èƒ½ä¸æ˜¯1000000ï¼Œæ‰€ä»¥ç¨‹åºä¸­è®¡ç®—è¿˜åº”è®©<code>CLOCKS_PER_SEC</code>å‚ä¸ã€‚</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;time.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">begin</span><span class="p">,</span> <span class="n">end</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">duration</span><span class="p">;</span>
    <span class="n">begin</span> <span class="o">=</span> <span class="n">clock</span><span class="p">();</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Hello, world!</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">clock</span><span class="p">();</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;begin clock: %0.f</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">begin</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;end clock: %0.f</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">begin</span><span class="p">)</span> <span class="o">/</span> <span class="n">CLOCKS_PER_SEC</span> <span class="o">*</span> <span class="mf">1000.0</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;print time: %.3f ms&#34;</span><span class="p">,</span> <span class="n">duration</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="err">âœ</span>  <span class="n">duration</span> <span class="p">.</span><span class="o">/</span><span class="n">example</span>
<span class="n">Hello</span><span class="p">,</span> <span class="n">world</span><span class="o">!</span>
<span class="n">begin</span> <span class="nl">clock</span><span class="p">:</span> <span class="mi">2056</span>
<span class="n">end</span> <span class="nl">clock</span><span class="p">:</span> <span class="mi">2084</span>
<span class="n">print</span> <span class="nl">time</span><span class="p">:</span> <span class="mf">0.028</span> <span class="n">ms</span></code></pre></div>
<h2 id="time-å‡½æ•°"><code>time()</code>å‡½æ•°</h2>

<p><code>time()</code>å‡½æ•°æ¥è·å¾—å½“å‰æ—¥å†æ—¶é—´ï¼Œæ˜¯ä»ä¸€ä¸ªæ ‡å‡†æ—¶é—´ç‚¹ï¼ˆä¸€èˆ¬æ˜¯1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ï¼‰åˆ°ç°åœ¨çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’ã€‚å‡½æ•°å£°æ˜:</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">time_t</span> <span class="nf">time</span><span class="p">(</span><span class="n">time_t</span> <span class="o">*</span> <span class="n">timer</span><span class="p">);</span> </code></pre></div>
<p><code>time_t</code>ä¹Ÿæ˜¯ä¸€ä¸ªé•¿æ•´å‹ç±»å‹ï¼Œå‡½æ•°ä¸­å¦‚æœ<code>timer</code>ä¸º<code>NULL</code>æˆ–é‡åˆ°é”™è¯¯è¿”å›ç»“æœ-1ï¼Œå¦‚æœä¸ä¸º<code>NULL</code>ï¼Œåˆ™ä¼šæŠŠå€¼ä¿å­˜åœ¨<code>timer</code>ä¸­ã€‚</p>

<h3 id="è¯•ä¸€ä¸‹">è¯•ä¸€ä¸‹</h3>

<p>ç¼–å†™ç¨‹åº<code>example2.c</code>ä½¿ç”¨å»¶æ—¶å‡½æ•°<code>sleep()</code>è¿›è¡Œæµ‹è¯•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="c1">// time()æ–¹æ³•ç²¾åº¦åªæœ‰1s
</span><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;time.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="n">time_t</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">;</span>
    <span class="n">time</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t1</span><span class="p">);</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="n">time</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t2</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;t1: %ld, t2: %ld, sleep: %ld s&#34;</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  duration ./example2
t1: <span class="m">1509401991</span>, t2: <span class="m">1509401994</span>, sleep: <span class="m">3</span> s</code></pre></div>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç¼–è¯‘çš„æ—¶å€™<code>gcc</code>é»˜è®¤ä½¿ç”¨æ ‡å‡†<code>c99</code>ï¼Œè€Œè¿™ä¸ªæ ‡å‡†ä¸‹<code>sleep()</code>æ— æ•ˆï¼Œè¿™é‡Œé‡‡ç”¨<code>c89</code>æ ‡å‡†è¿›è¡Œç¼–è¯‘å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">gcc -std<span class="o">=</span>c89 -o example2 example2.c</code></pre></div>
<h3 id="æ³¨æ„-1">æ³¨æ„</h3>

<blockquote>
<p>æ­¤ç§æ–¹æ³•çš„ç²¾åº¦åªæœ‰1sï¼</p>
</blockquote>

<h2 id="gettimeofday-å‡½æ•°"><code>gettimeofday()</code>å‡½æ•°</h2>

<p><code>gettimeofday()</code>å‡½æ•°åœ¨<code>sys/time.h</code>ä¸­ï¼Œå£°æ˜å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">gettimeofday</span><span class="p">(</span><span class="k">struct</span> <span class="n">timeval</span><span class="o">*</span><span class="n">tv</span><span class="p">,</span> <span class="k">struct</span> <span class="n">timezone</span> <span class="o">*</span><span class="n">tz</span> <span class="p">);</span></code></pre></div>
<p>å…¶ä¸­å½¢å‚å¯¹åº”ç»“æ„ä½“å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="k">struct</span>  <span class="n">timeval</span> <span class="p">{</span>
    <span class="kt">long</span>  <span class="n">tv_sec</span><span class="p">;</span>
    <span class="kt">long</span>  <span class="n">tv_usec</span><span class="p">;</span>
<span class="p">}</span><span class="err">ï¼›</span>

<span class="k">struct</span>  <span class="n">timezone</span><span class="p">{</span>
    <span class="kt">int</span> <span class="n">tz_minuteswest</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">tz_dsttime</span><span class="p">;</span>
<span class="p">};</span></code></pre></div>
<p>æˆ‘ä»¬è¿™é‡Œåªå…³å¿ƒæ—¶é—´å·®ï¼Œæ‰€ä»¥åªéœ€è¦ä¼ å…¥å®šä¹‰å¥½çš„<code>timeval</code>ç»“æ„ä½“å°±å¥½ï¼Œ<code>timezone</code>å¯ä»¥ä¸º<code>NULL</code>ï¼Œæ¯æ¬¡è°ƒç”¨å‡½æ•°ï¼Œä¼šæŠŠæ—¶é—´æˆ³è®°å½•åœ¨ä¼ å…¥çš„<code>timeval</code>ç»“æ„ä½“å˜é‡æŒ‡é’ˆä¸­ï¼Œå…¶ä¸­:</p>

<ul>
<li><code>tv_sec</code>å­˜å‚¨çš„æ˜¯sï¼›</li>
<li><code>tv_usec</code>å­˜å‚¨æ˜¯usï¼›</li>
</ul>

<h3 id="å®ä¾‹æµ‹è¯•">å®ä¾‹æµ‹è¯•</h3>

<p>é‚£ä¹ˆå¯ä»¥ç¼–å†™ç¨‹åº<code>example3.c</code>è¿›è¡Œæµ‹è¯•äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;sys/time.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">timeval</span> <span class="n">start</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">timeval</span> <span class="n">end</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">long</span> <span class="n">duration</span><span class="p">;</span>
    <span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">start</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Hello,World!</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">end</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="mi">1000000</span> <span class="o">*</span> <span class="p">(</span><span class="n">end</span><span class="p">.</span><span class="n">tv_sec</span> <span class="o">-</span> <span class="n">start</span><span class="p">.</span><span class="n">tv_sec</span><span class="p">)</span><span class="o">+</span> <span class="n">end</span><span class="p">.</span><span class="n">tv_usec</span><span class="o">-</span><span class="n">start</span><span class="p">.</span><span class="n">tv_usec</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%ld us:&#34;</span><span class="p">,</span> <span class="n">duration</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>æœ€ç»ˆç»“æœä¸ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">âœ  duration ./example3
Hello,World!
<span class="m">35</span> us:%</code></pre></div>
<h3 id="æ³¨æ„-2">æ³¨æ„</h3>

<blockquote>
<p>ç²¾åº¦ä¸ºusï¼›</p>
</blockquote>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>ç»¼ä¸Šæ‰€è¿°ï¼Œ<code>clock()</code> å’Œ <code>gettimeofday()</code> æ–¹æ³•å‡å¯ä»¥è¾¾åˆ°usçš„ç²¾åº¦ï¼Œä½†æ˜¯ <code>clock()</code> æ–¹æ³•ä¾èµ–äºå®å®šä¹‰ <code>CLOCKS_PER_SEC</code>ï¼Œä¸è¿‡æœ€ç»ˆä¸€èˆ¬æ˜¯usçº§åˆ«ï¼›è€Œ <code>time()</code> æ–¹æ³•ç²¾åº¦åªæœ‰ç§’çº§ï¼Œæ‰€ä»¥é€‚åˆè¾ƒå¤§çš„è®¡ç®—è¿‡ç¨‹ã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p>æ„Ÿè°¢<a href="http://baige5117.github.io/" target="_blank"><strong>å‘æ—¥è‘µèŠ±</strong></a>: <a href="http://baige5117.github.io/blog/calculate_the_running_time_of_algorithm.html" target="_blank">Linux/Unix ç¯å¢ƒä¸‹å®ç°ç²¾ç¡®è®¡ç®—ç¨‹åºè¿è¡Œçš„æ—¶é—´</a></p>]]></content>
		</item>
		
		<item>
			<title>æ•°å­¦çŸ¥è¯†å¤ä¹ </title>
			<link>https://www.smslit.top/2017/10/27/mathknowlege/</link>
			<pubDate>Fri, 27 Oct 2017 08:51:23 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/10/27/mathknowlege/</guid>
			<description>&lt;p&gt;è®°å¾—é«˜ä¸­çš„æ—¶å€™æ•°å­¦èƒ½åŠ›è¿˜æ˜¯å¾ˆçªå‡ºçš„ï¼Œä½†åˆ°äº†å¤§å­¦ï¼Œé«˜æ•°å¥½åƒç¦»åé‡Œè¶Šæ¥è¶Šè¿œã€‚è¿‡å»è¿™ä¹ˆé•¿æ—¶é—´ï¼Œå·²ç»æœ‰äº†å®šè®ºï¼šåé‡Œçš„æ•°å­¦çŸ¥è¯†å·²è¿˜ç»™è€å¸ˆï¼è¿™è¿˜çœŸæ˜¯è®©äººå´©æºƒï¼Œç°åœ¨æ— å¤„ä¸æ•°å­¦ï¼Œå½“ç„¶ä¸ºäº†ç ”ç©¶ç®—æ³•ä¹Ÿå¾—æŠŠé«˜æ•°ç»™æ‹¾å›æ¥ï¼Œæ‰€ä»¥æœ‰äº†æœ¬ç¯‡æ•°å­¦çŸ¥è¯†çš„å¤ä¹ ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è®°å¾—é«˜ä¸­çš„æ—¶å€™æ•°å­¦èƒ½åŠ›è¿˜æ˜¯å¾ˆçªå‡ºçš„ï¼Œä½†åˆ°äº†å¤§å­¦ï¼Œé«˜æ•°å¥½åƒç¦»åé‡Œè¶Šæ¥è¶Šè¿œã€‚è¿‡å»è¿™ä¹ˆé•¿æ—¶é—´ï¼Œå·²ç»æœ‰äº†å®šè®ºï¼šåé‡Œçš„æ•°å­¦çŸ¥è¯†å·²è¿˜ç»™è€å¸ˆï¼è¿™è¿˜çœŸæ˜¯è®©äººå´©æºƒï¼Œç°åœ¨æ— å¤„ä¸æ•°å­¦ï¼Œå½“ç„¶ä¸ºäº†ç ”ç©¶ç®—æ³•ä¹Ÿå¾—æŠŠé«˜æ•°ç»™æ‹¾å›æ¥ï¼Œæ‰€ä»¥æœ‰äº†æœ¬ç¯‡æ•°å­¦çŸ¥è¯†çš„å¤ä¹ ã€‚</p>

<p>æ­¤ç¯‡åº”è¯¥ä¼šä¸€ç›´è¡¥å……ï¼Œåé‡Œä¼šè¾¹å­¦ä¹ è¾¹ä¸°å¯Œæ–‡ç« å†…å®¹ï¼Œä¸€æ–¹é¢æ ¹æ®éœ€æ±‚å¤ä¹ æ•°å­¦çš„åŸºç¡€çŸ¥è¯†ï¼Œå¦ä¸€æ–¹é¢é”»ç‚¼æ•´ç†èƒ½åŠ›ã€‚</p>

<p>è™½ç„¶éƒ¨åˆ†çŸ¥è¯†å¾ˆç®€å•ï¼Œä¹Ÿåœ¨è¿™é‡Œä¸€å¹¶æ•´ç†ä¸Šï¼Œä¸»è¦å‚è€ƒï¼š<strong>ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æâ€”â€”Cè¯­è¨€æè¿°ã€‹</strong></p>

<h2 id="æŒ‡æ•°">æŒ‡æ•°</h2>

<p>$$
\begin{aligned}
&amp; X^AX^B=X^{A+B}\newline
&amp; \frac{X^A}{X^B}=X^{A-B}\newline
&amp; (X^A)^B=X^{AB}\newline
&amp; X^N+X^N=2X^N \ne X^{2N}\newline
&amp; 2^N+2^N=2^{N+1}
\end{aligned}
$$</p>

<h2 id="å¯¹æ•°">å¯¹æ•°</h2>

<p>é™¤äº†ç‰¹æ®Šè¯´æ˜ï¼Œæ‰€æœ‰çš„å¯¹æ•°å‡ä»¥2ä¸ºåº•æ•°ã€‚</p>

<p>$$
\begin{aligned}
&amp; \log_AB=\frac{\log_CB}{\log_CA}\newline
&amp; \log AB=\log A + \log B\newline
&amp; \log\frac{A}{B}=\log A - \log B\newline
&amp; \log (A^B)=B\log A\newline
&amp; \log X &lt; X(å¯¹æ‰€æœ‰çš„X&gt;0æˆç«‹ã€‚)
\end{aligned}
$$</p>

<h2 id="çº§æ•°">çº§æ•°</h2>

<h3 id="å‡ ä½•çº§æ•°">å‡ ä½•çº§æ•°</h3>

<p>å…¬å¼</p>

<p>$$\begin{equation}
\sum_{i=0}^N A^i=\frac{A^{N+1}-1}{A-1}
\end{equation}\label{eq1}$$</p>

<p>åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š</p>

<ol>
<li><p>$A = 1$</p>

<p>æ­¤æ—¶ï¼Œæœ‰ï¼š</p>

<p>$$\begin{equation}
\sum_{i=0}^N A^i\xrightarrow[]{A=1}\sum_{i=0}^N 1=N
\end{equation}\label{eq4}$$</p></li>

<li><p>$A \ne 1$</p>

<p>å…¬å¼ $\ref{eq1}$ è¯æ˜ï¼š</p>

<p>$$
S=1+A+A^2+A^3+A^4+\dots+A^N
$$</p>

<p>$AS=A\times S+1-1$, æœ‰:</p>

<p>$$
\begin{aligned}
&amp; AS=1+A+A^2+A^3+A^4+\dots+A^N+A^{N+1}-1\newline
&amp; \therefore (A-1)S=AS-S=A^{N+1}-1\newline
&amp; \therefore S=\frac{A^{N+1}-1}{A-1}
\end{aligned}
$$</p>

<p>é‚£ä¹ˆå¯å¾—ï¼š</p>

<p>$$
\sum_{i=0}^N A^i=\frac{A^{N+1}-1}{A-1}
$$</p>

<p>ç‰¹åˆ«çš„ï¼Œå½“ $A=2$ æ—¶ï¼Œæœ‰:</p>

<p>$$
\sum_{i=0}^N 2^i=2^{N+1}-1
$$</p>

<p>å¦å¤–å½“ $0&lt;A&lt;1$ æ—¶ï¼Œç”± $\ref{eq1}$ å…¬å¼è¿˜å¯ä»¥å¾—åˆ°å…¬å¼ $\ref{eq2}$:</p>

<p>$$\begin{equation}
\sum_{i=0}^N A^i \le \frac{1}{1-A}
\end{equation}\label{eq2}$$</p>

<p>å…¬å¼ $\ref{eq2}$ è¡¨ç¤ºäº† $N\rightarrow\infty$ å€¼è¶‹è¿‘äº $\frac{1}{1-A}$  ç®€å•è¯æ˜è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>

<p>$$
\begin{aligned}
&amp; S = 1 + A + A^2 + A^3 + A^4 + \dots \newline
&amp; AS = A + A^2 + A^3 + A^4 + \dots \newline
&amp; \because 0&lt;A&lt;1 \newline
&amp; \therefore S-AS \le 1 \newline
&amp; \therefore \sum_{i=0}^N A^i = S \le \frac{1}{1-A}
\end{aligned}
$$</p></li>
</ol>

<h3 id="ç®—æœ¯çº§æ•°">ç®—æœ¯çº§æ•°</h3>

<p>å¦ä¸€ç§å¸¸ç”¨ç±»å‹çš„çº§æ•°æ˜¯ç®—æœ¯çº§æ•°ï¼Œä»»ä½•å¦‚ä¸‹å…¬å¼ $\ref{eq3}$ çš„çº§æ•°éƒ½å¯ä»¥é€šè¿‡åŸºæœ¬å…¬å¼è®¡ç®—å€¼ã€‚</p>

<p>$$\begin{equation}
\sum_{i=1}^N i=\frac{N(N+1)}{2} \approx \frac{N^2}{2}
\end{equation}\label{eq3}$$</p>

<p>æ¯”å¦‚ï¼Œ$1+5+9+13+\dots+(4N-3)$ æœ‰ï¼š</p>

<p>$$\begin{equation}
\sum_{i=1}{^N} 4N-3=N(2N-1)
\end{equation}\label{eq5}$$</p>

<p>å…¬å¼ $\ref{eq5}$ è®¡ç®—è¿‡ç¨‹ä¾èµ–äºå…¬å¼ $\ref{eq4}$ å’Œ $\ref{eq3}$:</p>

<p>$$
\begin{aligned}
\sum_{i=1}{^N} 4N-3&amp;=1+5+9+13+\dots+(4N-3) \newline
&amp;=4(1+2+3+\dots+N)-3(1+1+1+\dots+1) \newline
&amp;=\frac{4N(N+1)}{2}-3N \newline
&amp;=N(2N-1)
\end{aligned}
$$</p>

<h4 id="å¹³æ–¹å’Œå…¬å¼">å¹³æ–¹å’Œå…¬å¼</h4>

<p>ä¸å¤ªå¸¸è§çš„è¿˜æœ‰å¹³æ–¹å’Œå…¬å¼ï¼Œåˆå«å››è§’é”¥æ•°æˆ–é‡‘å­—å¡”æ•°ï¼Œå¦‚å…¬å¼ $\ref{eq6}$ï¼š</p>

<p>$$\begin{equation}
\sum_{i=1}^N i^2=\frac{N(N+1)(2N+1)}{6}
\end{equation}\label{eq6}$$</p>

<p>è¿™é‡Œç®€å•è¯´ä¸€ä¸‹æ’ç­‰å¼æ–¹æ³•è¯æ˜å…¬å¼ $\ref{eq6}$ çš„è¿‡ç¨‹ï¼š</p>

<p>å·²çŸ¥ $(N+1)^3=N^3+3N^2+3N+1$ï¼Œé‚£ä¹ˆå¯å¾—ï¼š</p>

<p>$$
\begin{aligned}
(N+1)^3-N^3&amp;=3N^2+3N+1 \newline
N^3-(N-1)^3&amp;=3(N-1)^2+3(N-1)+1 \newline
(N-1)^3-(N-2)^3&amp;=3(N-2)^2+3(N-2)+1 \newline
&amp;\ \vdots \newline
2^3-1^3&amp;=3\times 1^2+3\times 1 + 1
\end{aligned}
$$</p>

<p>æ’ç­‰å¼å·¦å³ç›¸åŠ å¯å¾—:</p>

<p>$$
\begin{aligned}
(n+1)^3-1&amp;=3(1^2+2^2+3^2+\dots+N^2)+3(1+2+3+\dots+N)+N \newline
&amp;\downarrow \newline
1^2+2^2+3^2+\dots+N^2i&amp;=\frac{(N+1)^3-\frac{3N(N+1)}{2}-N-1}{3}
\end{aligned}
$$</p>

<p>æœ€ç»ˆæ•´ç†å¯å¾—:</p>

<p>$$
\sum_{i+1}^N i^2=1+2^2+3^2+\dots+N^2=\frac{N(N+1)(2N+1)}{6}
$$</p>

<p>å…¶å®ƒè¯æ˜æ–¹æ³•å¯å‚è€ƒ:<a href="https://baike.baidu.com/item/%E5%B9%B3%E6%96%B9%E5%92%8C%E5%85%AC%E5%BC%8F/3264126?fr=aladdin" target="_blank">å¹³æ–¹å’Œå…¬å¼</a></p>

<h4 id="å†¯å“ˆä¼¯å…¬å¼-faulhaber-s-formula">å†¯å“ˆä¼¯å…¬å¼(Faulhaber&rsquo;s formula)</h4>

<p>å¹³æ–¹å’Œå…¬å¼æ˜¯å†¯å“ˆä¼¯å…¬å¼(Faulhaber&rsquo;s formula<a href="https://en.wikipedia.org/wiki/Faulhaber%27s_formula" target="_blank">2</a>)çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œå¯çŸ¥æœ‰å¦‚ä¸‹æœ‰è¿‘ä¼¼ä¼°è®¡å…¬å¼:</p>

<p>$$
\sum_{i=1}^N i^k \approx \frac{N^{k+1}}{\vert k+1 \vert},\ k\ne-1
$$</p>

<p>å¯ä»¥çœ‹åˆ°ä¸Šè¿°å…¬å¼çš„æ¡ä»¶ä¸º $k\ne-1$ï¼Œ$k=-1$ æ—¶å…¬å¼ $\ref{eq6}$ æ˜¯ä¸æˆç«‹çš„ï¼Œè¿™æ—¶éœ€è¦ç”¨åˆ°ä¸€ä¸ªæ®è¯´åœ¨è®¡ç®—æœºé¢†åŸŸç»å¸¸ç”¨åˆ°çš„å…¬å¼ï¼š</p>

<p>$$
H_N=\sum_{i=1}^N \frac{1}{i} \approx \log_eN
$$</p>

<p>$H_N$ å«åšè°ƒå’Œæ•°ï¼Œä¸Šè¿°è¿‘ä¼¼å¼çš„è¯¯å·®è¶‹è¿‘äº $\gamma\approx 0.57721566$ï¼Œè¿™ä¸ªæ•°å€¼ç§°ä¸ºæ¬§æ‹‰å¸¸æ•°(Euler&rsquo;s constant)</p>

<h3 id="ä»£æ•°è¿ç®—">ä»£æ•°è¿ç®—</h3>

<p>$$
\begin{aligned}
&amp; \sum_{i=1}^N f(N)=Nf(N)\newline
&amp; \sum_{i=n_{0}}^N f(i)=\sum_{i=1}^N f(i) - \sum_{i=1}^{n_{0}-1} f(i)
\end{aligned}
$$</p>

<h2 id="è¯æ˜æ–¹æ³•">è¯æ˜æ–¹æ³•</h2>

<p>æ•°æ®ç»“æ„åŠç®—æ³•åˆ†æä¸­é’ˆå¯¹ç»“è®ºå¸¸ç”¨çš„çš„è¯æ˜æ–¹æ³•æœ‰å½’çº³æ³•å’Œåè¯æ³•ã€‚</p>

<h3 id="å½’çº³æ³•">å½’çº³æ³•</h3>

<p>å½’çº³æ³•æœ‰ä¸¤ä¸ªæ ‡å‡†çš„éƒ¨åˆ†ï¼š</p>

<ul>
<li><strong>è¯æ˜åŸºå‡†æƒ…å½¢</strong>ï¼šç¡®å®šå®šç†å¯¹äºæŸäº›å€¼çš„æ­£ç¡®æ€§ï¼›</li>
<li><strong>å½’çº³å‡è®¾</strong></li>
</ul>

<p>ä»¥å…¬å¼ $\ref{eq6}$ ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œå½’çº³æ³•è¯æ˜å¦‚ä¸‹ã€‚</p>

<p>å¯¹äºåŸºå‡†æƒ…å½¢ï¼Œå®šç†å½“ $N=1$ æ—¶ä»£å…¥æ•°å¯çŸ¥æˆç«‹ï¼›å¯¹äºå½’çº³å‡è®¾ï¼Œå‡è®¾å…¬å¼ $\ref{eq6}$ å¯¹äº $1 \le k \le N$ æˆç«‹ï¼Œåœ¨æ­¤æƒ…å†µä¸‹ï¼Œåªéœ€è¯æ˜ $N+1$ æ—¶å…¬å¼åŒæ ·æˆç«‹å³å¯ã€‚</p>

<p>å¦‚æœ $N\ge1$, æ˜“å¾—ï¼š</p>

<p>$$
\sum_{i=1}^{N+1} i^2=\sum_{i=1}^{N} i^2 + (N+1)^2
$$</p>

<p>ä»£å…¥å…¬å¼ $\ref{eq6}$:</p>

<p>$$
\begin{aligned}
\sum_{i=1}^{N+1} i^2&amp;=\frac{N(N+1)(2N+1)}{6}+(N+1)^2 \newline
&amp;=\frac{(N+1)(N+2)(2N+3)}{6} \newline
&amp;=\frac{(N+1)[(N+1)+1][2(N+1)+1]}{6}
\end{aligned}
$$</p>

<p>å¯ä»¥çœ‹åˆ°, $N+1$ æ—¶ç¬¦åˆï¼Œå®šç†å¾—è¯ã€‚</p>

<h3 id="åè¯æ³•">åè¯æ³•</h3>

<p>é€šè¿‡è¯æ˜å®šç†ä¸æˆç«‹ï¼Œç„¶åè¯æ˜è¯¥å‡è®¾å¯¼è‡´æŸä¸ªå·²çŸ¥çš„æ€§è´¨ä¸æˆç«‹ï¼Œä»è€Œè¯´æ˜æ„¿å‡è®¾æ˜¯é”™è¯¯çš„ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>comtradeæ–‡ä»¶è§£æ</title>
			<link>https://www.smslit.top/2017/10/24/comtrade/</link>
			<pubDate>Tue, 24 Oct 2017 06:43:36 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/10/24/comtrade/</guid>
			<description>&lt;p&gt;å·¥ä½œä¸­æ¥è§¦äº†comtradeè¿™ä¸ªä¸œè¥¿ï¼Œå°¤å…¶æœ€è¿‘ç ”ç©¶æ•…éšœåˆ¤æ–­ç®—æ³•ï¼Œç›´æ¥æ¥è§¦çš„å°±æ˜¯comtradeæ³¢å½¢æ–‡ä»¶ï¼Œç›®å‰åé‡Œç ”ç©¶ç®—æ³•ä½¿ç”¨pythonçš„ç§‘å­¦è®¡ç®—åŒ…&lt;code&gt;Anaconda&lt;/code&gt;ï¼Œä¸ºäº†æ–¹ä¾¿è·å–æ³¢å½¢æ•°æ®å’Œå¿«é€ŸæŸ¥çœ‹æ³¢å½¢ï¼Œç”¨pythonå®ç°äº†comtradeæ¨¡å—å’Œcomtradeæ³¢å½¢æŸ¥çœ‹å‘½ä»¤è¡Œå·¥å…·ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å·¥ä½œä¸­æ¥è§¦äº†comtradeè¿™ä¸ªä¸œè¥¿ï¼Œå°¤å…¶æœ€è¿‘ç ”ç©¶æ•…éšœåˆ¤æ–­ç®—æ³•ï¼Œç›´æ¥æ¥è§¦çš„å°±æ˜¯comtradeæ³¢å½¢æ–‡ä»¶ï¼Œç›®å‰åé‡Œç ”ç©¶ç®—æ³•ä½¿ç”¨pythonçš„ç§‘å­¦è®¡ç®—åŒ…<code>Anaconda</code>ï¼Œä¸ºäº†æ–¹ä¾¿è·å–æ³¢å½¢æ•°æ®å’Œå¿«é€ŸæŸ¥çœ‹æ³¢å½¢ï¼Œç”¨pythonå®ç°äº†comtradeæ¨¡å—å’Œcomtradeæ³¢å½¢æŸ¥çœ‹å‘½ä»¤è¡Œå·¥å…·ã€‚</p>

<h2 id="comtradeä»‹ç»">comtradeä»‹ç»</h2>

<p>COMTRADEæ˜¯è‹±æ–‡Common format for transient data exchange (COMTRADE) for power systems çš„ç®€å†™ï¼Œä¸­æ–‡ä¸€èˆ¬ç§°ä¸ºç”µåŠ›ç³»ç»Ÿç¬æ€æ•°æ®äº¤æ¢çš„é€šç”¨æ ¼å¼ã€‚IEEEä¸ºäº†è§£å†³æ•°å­—æ•…éšœå½•æ³¢è£…ç½®ã€æ•°å­—ä¿æŠ¤ã€å¾®æœºæµ‹è¯•è£…ç½®ä¹‹é—´çš„æ•°æ®äº¤æ¢é—®é¢˜ï¼Œä¸1991å¹´æå‡ºäº†è¿™ä¸ªæ ‡å‡†ï¼Œå¹¶äº1999å¹´è¿›è¡Œäº†ä¿®è®¢å’Œå®Œå–„ã€‚è¯¥æ ‡å‡†æ˜¯ä¸€ç§å…¬ç”¨çš„æ•°æ®ä¼ è¾“æ ¼å¼æ ‡å‡†ï¼Œä¸ºä¸åŒå‚å®¶ç”Ÿäº§çš„è®¾å¤‡æ‰€éµå¾ªã€‚æ¯ä¸ªCOMTRADEè®°å½•æœ€å¤šåŒ…å«å››ä¸ªç›¸å…³çš„æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶çš„æ–‡ä»¶åç›¸åŒï¼Œä½†æ˜¯æ‰©å±•åä¸åŒã€‚å››ä¸ªæ–‡ä»¶åˆ†åˆ«æ˜¯:
1. æ ‡é¢˜æ–‡ä»¶(.hdr)
2. é…ç½®æ–‡ä»¶(.cfg)
3. æ•°æ®æ–‡ä»¶(.dat)
4. ä¿¡æ¯æ–‡ä»¶(.inf)</p>

<p>ç›®å‰å›½å†…äº§å“ä¸“æ£€ç­‰ä¸€äº›æ£€å®šæœºæ„é»˜è®¤åªä½¿ç”¨cfgå’Œdatæ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œåªè®¨è®ºcfgå’Œdatæ–‡ä»¶ã€‚</p>

<h3 id="cfgæ–‡ä»¶">cfgæ–‡ä»¶</h3>

<p>é…ç½®æ–‡ä»¶ä¸ºä¸€ç§ASCIIæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºæ­£ç¡®åœ°è¯´æ˜æ•°æ®ï¼ˆ.DATï¼‰æ–‡ä»¶çš„æ ¼å¼ï¼Œå› æ­¤å¿…é¡»ä»¥ä¸€ç§å…·ä½“çš„æ ¼å¼ä¿å­˜ã€‚è¯¥æ–‡ä»¶è¯ é‡Šäº†æ•°æ®ï¼ˆ.DATï¼‰æ–‡ä»¶æ‰€åŒ…å«ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬è¯¸å¦‚é‡‡æ ·é€Ÿç‡ã€é€šé“æ•°é‡ã€é¢‘ç‡ã€é€šé“ä¿¡æ¯ç­‰é¡¹ã€‚ é…ç½®æ–‡ä»¶ç¬¬ä¸€è¡Œä¸­çš„ä¸€ä¸ªå­—æ®µè¯†åˆ«æ–‡ä»¶æ‰€ä¾ç…§çš„COMTRADEæ ‡å‡†ç‰ˆæœ¬çš„å¹´ä»½ï¼ˆä¾‹å¦‚1991ã€1999ç­‰ï¼‰ã€‚å¦‚æœè¯¥å­—æ®µä¸å­˜åœ¨æˆ–æ˜¯ç©ºçš„ï¼Œåˆ™å‡è®¾æ–‡ä»¶åˆ™éµç…§æ ‡å‡†çš„æœ€åˆå‘è¡Œæ—¥æœŸï¼ˆ1991ï¼‰ã€‚é…ç½®æ–‡ä»¶è¿˜åŒ…å«è¯†åˆ«ä¼´éšçš„æ•°æ®æ–‡ä»¶æ˜¯ä»¥ASCIIæ ¼å¼è¿˜æ˜¯ä»¥äºŒè¿›åˆ¶æ ¼å¼å­˜å‚¨çš„å­—æ®µã€‚</p>

<h3 id="datæ–‡ä»¶">datæ–‡ä»¶</h3>

<p>æ­£å¦‚cfgæ–‡ä»¶ä¸­ä»‹ç»çš„ï¼Œdatæ–‡ä»¶å¯ä»¥æ˜¯asciiæˆ–binaryæ ¼å¼ã€‚æ•°æ®æ–‡ä»¶åŒ…å«è®°å½•ä¸­æ¯ä¸ªé‡‡æ ·æ‰€æœ‰è¾“å…¥é€šé“çš„å€¼ã€‚æ•°æ®æ–‡ä»¶åŒ…å«ä¸€ä¸ªé¡ºåºå·å’Œæ¯æ¬¡é‡‡æ ·çš„æ—¶é—´æ ‡å¿—ã€‚è¿™äº›é‡‡æ ·å€¼é™¤è®°å½•æ¨¡æ‹Ÿè¾“å…¥çš„æ•°æ®ä¹‹å¤–ï¼Œä¹Ÿè®°å½•çŠ¶æ€ï¼Œå³è¡¨ç¤ºå¼€/å…³ä¿¡å·çš„è¾“å…¥ã€‚</p>

<h2 id="è§£æå®ç°">è§£æå®ç°</h2>

<p>å› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯æœ‰æ ¼å¼çš„ï¼Œé¦–å…ˆæŒ‰ç…§æ ¼å¼è§£æcfgæ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œæ–‡æœ¬ï¼Œå¯¹åº”è§£æå‡ºä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç”¨äºè§£ædatæ–‡ä»¶ã€‚åˆšè¯´çš„è¿™ç§æ ¼å¼ï¼Œå¯ä»¥ç½‘ä¸ŠæŸ¥æ‰¾ç›¸åº”æ ‡å‡†æ–‡ä»¶ï¼Œå…¶ä¸­å¾ˆè¯¦ç»†çš„ä»‹ç»äº†cfgå’Œdatæ–‡ä»¶çš„æ ¼å¼ï¼Œæ¯”å¦‚åé‡Œæ‰‹ä¸Šçš„<a href="https://pan.baidu.com/s/1kVwy7OF" target="_blank">IEEE Standard Common Format for Transient Data Exchange (COMTRADE) for Power Systems IEEE Std C37.111-19</a>ï¼ˆå¯†ç : hu4xï¼‰ï¼Œæœ¬æ–‡å®ç°çš„comtradeè§£ææ¨¡å—æ ¹æ®è¿™ä¸ªæ ‡å‡†åªåšäº†cfgè§£æå’ŒäºŒè¿›åˆ¶çš„datæ–‡ä»¶è§£æã€‚</p>

<p>å®ç°é¡¹ç›®å·²æ‰˜ç®¡åˆ°githubå¹³å°ï¼š<a href="https://github.com/smslit/comtrade" target="_blank">comtrade</a>ã€‚</p>

<p>å¦å¤–ï¼Œä¸ºäº†æ–¹ä¾¿åŒäº‹è¿›è¡Œmatlabçš„ç®—æ³•ä»¿çœŸï¼Œåé‡Œåˆç”¨c#ç¼–å†™äº†comtradeæ–‡ä»¶è½¬csvæ–‡ä»¶çš„å°å·¥å…·ï¼Œæ¯•ç«Ÿmatlabæ›´å®¹æ˜“å¯¼å…¥csvæ–‡ä»¶ï¼Œè¯¥å·¥ç¨‹ä¹Ÿæ‰˜ç®¡åˆ°äº†githubå¹³å°ï¼š<a href="https://github.com/smslit/ComtradeGo" target="_blank">ComtradeGo</a>ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>æ¬§å‡ é‡Œå¾—ç®—æ³•</title>
			<link>https://www.smslit.top/2017/10/22/gcd/</link>
			<pubDate>Sun, 22 Oct 2017 20:47:49 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/10/22/gcd/</guid>
			<description>&lt;p&gt;å¤©æ€çš„ï¼ŒåŸæ¥æˆ‘ç°åœ¨éƒ½è ¢åˆ°è¿æœ€å¤§å…¬çº¦æ•°çš„æ±‚è§£ç®—æ³•ç†è§£éƒ½è¿™ä¹ˆè´¹åŠ²ï¼Œæ¬§å‡ é‡Œå¾—ç®—æ³•åˆç§°è¾—è½¬ç›¸é™¤æ³•ï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å¤©æ€çš„ï¼ŒåŸæ¥æˆ‘ç°åœ¨éƒ½è ¢åˆ°è¿æœ€å¤§å…¬çº¦æ•°çš„æ±‚è§£ç®—æ³•ç†è§£éƒ½è¿™ä¹ˆè´¹åŠ²ï¼Œæ¬§å‡ é‡Œå¾—ç®—æ³•åˆç§°è¾—è½¬ç›¸é™¤æ³•ï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ã€‚</p>

<h2 id="ç®€ä»‹">ç®€ä»‹</h2>

<p>å¤šåº”ç”¨é¢†åŸŸåœ¨è®¡ç®—æœºå’Œæ•°å­¦ä¸¤ä¸ªé¢†åŸŸï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š</p>

<p>$$
gcd(a, b) = gcd(b, mod(a, b)), a &gt; bä¸”aå’Œbä¸ºæ­£æ•´æ•°
$$</p>

<p>å¤å¸Œè…Šæ•°å­¦å®¶æ¬§å‡ é‡Œå¾·åœ¨å…¶è‘—ä½œã€ŠThe Elementsã€‹ä¸­æœ€æ—©æè¿°äº†è¿™ç§ç®—æ³•, æ‰€ä»¥è¢«å‘½åä¸ºæ¬§å‡ é‡Œå¾·ç®—æ³•ã€‚ç®—æ³•ä¾èµ–äºä¸‹é¢çš„å®šç†ï¼š</p>

<blockquote>
<p>ä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ç­‰äºå…¶ä¸­è¾ƒå°çš„é‚£ä¸ªæ•°å’Œä¸¤æ•°ç›¸é™¤ä½™æ•°çš„æœ€å¤§å…¬çº¦æ•°ã€‚æœ€å¤§å…¬çº¦æ•°ï¼ˆGreatest Common Divisorï¼‰ç¼©å†™ä¸ºGCDã€‚</p>
</blockquote>

<h2 id="è¯æ˜">è¯æ˜</h2>

<p>ä¸¤ç§è¯æ˜å®šç†çš„æ€è·¯ã€‚</p>

<p>è‹¥æ•´æ•° $d$  æ•´é™¤æ•´æ•° $a$ ï¼Œè®°ä½œ $d\vert a$ã€‚</p>

<h3 id="æ–¹æ³•1">æ–¹æ³•1</h3>

<p>è®¾:</p>

<p>$$
\begin{aligned}
&amp; r = \ a\ \boldsymbol{\mathrm{mod}}\ b, æœ‰r = a - kb\<br />
&amp; d æ˜¯ aå’Œb çš„å…¬çº¦æ•°, è®°: d \vert a, d \vert b
\end{aligned}
$$</p>

<p>é‚£ä¹ˆï¼Œ</p>

<p>$$
\begin{aligned}
&amp; r = a - kb, ç­‰å¼ä¸¤è¾¹åŒæ—¶é™¤ä»¥d \Longrightarrow \frac{r}{d}=\frac{a}{d}-\frac{kb}{d}\<br />
&amp; \because d \vert aä¸” d \vert b\<br />
&amp; \therefore d \vert r
\end{aligned}
$$</p>

<p>æ‰€ä»¥ï¼Œ$d$ ä¹Ÿæ˜¯ $b$ å’Œ $a\ \boldsymbol{\mathrm{mod}}\ b$ çš„å…¬çº¦æ•°ã€‚</p>

<p>è®¾:</p>

<p>$$
\begin{aligned}
&amp; r = \ a\ \boldsymbol{\mathrm{mod}}\ b, æœ‰r = a - kb\<br />
&amp; d æ˜¯ aå’Œa\ \boldsymbol{\mathrm{mod}}\ bçš„å…¬çº¦æ•°, è®°: d \vert a, d \vert (a-kb)
\end{aligned}
$$</p>

<p>é‚£ä¹ˆï¼Œ</p>

<p>$$
d \vert aå³ï¼Œdä¹Ÿæ˜¯açš„çº¦æ•°
$$</p>

<p>ç»¼ä¸Šï¼Œ$a$ å’Œ $b$ çš„å…¬çº¦æ•°ä¸bå’Œ $a\ \boldsymbol{\mathrm{mod}}\ b$ çš„å…¬çº¦æ•°æ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆæœ€å¤§å…¬çº¦æ•°ä¹Ÿæ˜¯ä¸€æ ·ã€‚</p>

<h3 id="æ–¹æ³•2">æ–¹æ³•2</h3>

<p>ä»¤:</p>

<p>$$
c = gcd(a, b) \xrightarrow[]{m,nä¸ºæ•´æ•°} \begin{cases}a=mc\\b=nc\end{cases}
$$</p>

<p>æœ‰,</p>

<p>$$
\begin{aligned}
r&amp;=a-kb\<br />
&amp;=mc-knc\<br />
&amp;=(m-kn)c
\end{aligned}
$$</p>

<p>$(m-kn)$ ä¸ºæ•´æ•°ï¼Œé‚£ä¹ˆæœ‰cæ•´é™¤ä½™æ•°rï¼Œå³:</p>

<p>$$
c \vert r
$$</p>

<p>ä¸‹é¢è¯æ˜ $c = gcd(b, r)$:</p>

<p>è®¾$m-kn$ å’Œ $n$ æœ‰å¤§äº1çš„å…¬çº¦æ•°$d$ï¼Œå³</p>

<p>$$
\begin{cases}m-kn&amp;=xd\\n&amp;=yd\end{cases} \Longrightarrow \begin{aligned}m&amp;=kn+xd\\&amp;=kyd+xd\\&amp;=(ky+x)d\end{aligned}
$$</p>

<p>$$
\therefore
\begin{cases}
a&amp;=mc=(ky+x)cd\<br />
b&amp;=nc=ycd
\end{cases}
$$</p>

<p>é‚£ä¹ˆæœ‰$cd \vert a ä¸” cd \vert b$ï¼Œè¿™ä¸$c$ æ˜¯ $a$ å’Œ $b$ çš„æœ€å¤§å…¬çº¦æ•°æ˜¯çŸ›ç›¾çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸å­˜åœ¨ $d&gt;1$ æ»¡è¶³ä¸Šè¿°è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰ï¼š</p>

<p>$$
c=gcd(b, r)
$$</p>

<p>ç»¼ä¸Šå¯å¾—ï¼š</p>

<p>$$
c=gcd(a, b)=gcd(b, r)
$$</p>

<h2 id="å®ç°æ€è·¯">å®ç°æ€è·¯</h2>

<p>å®ç°æ€è·¯å°±æ˜¯ï¼Œä¸æ–­çš„å–æ¨¡æ±‚æœ€å¤§å…¬çº¦æ•°ï¼Œç›´åˆ°æ•´é™¤ä¸ºæ­¢å°±èƒ½å¾—åˆ°æœ€ç»ˆè¦æ±‚è§£æœ€å¤§å…¬çº¦æ•°ã€‚</p>

<ol>
<li><p>ä»¤ $r = a\ \boldsymbol{\mathrm{mod}}\ b, (0 \le r &lt; b )$
è‹¥ $r=0$ ç®—æ³•ç»“æŸ, $b$ å°±æ˜¯æœ€ç»ˆç»“æœ</p></li>

<li><p>ç®—æ³•è¿‡ç¨‹: $a \leftarrow b, b \leftarrow r$ï¼Œè¿”å›æ­¥éª¤1</p></li>
</ol>

<h2 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h2>

<h3 id="cç‰ˆæœ¬">cç‰ˆæœ¬</h3>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">gcd</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">r</span><span class="p">;</span>
    <span class="k">while</span><span class="p">(</span><span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span><span class="p">;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">r</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<h3 id="c-ç‰ˆæœ¬">c++ç‰ˆæœ¬</h3>
<div class="highlight"><pre class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">gcd</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">)</span> <span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="nl">a</span> <span class="p">:</span> <span class="n">gcd</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">%</span> <span class="n">b</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="pythonç‰ˆæœ¬">pythonç‰ˆæœ¬</h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">gcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">a</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span> <span class="o">%</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span>
    <span class="k">return</span> <span class="n">b</span></code></pre></div>]]></content>
		</item>
		
		<item>
			<title>ç¼–ç¨‹å·¥å…·çš„é€‰æ‹©å¼•å‘çš„æ€è€ƒ--è‡³åœæ»ä¸å‰çš„è‡ªå·±</title>
			<link>https://www.smslit.top/2017/09/23/coding-editor/</link>
			<pubDate>Sat, 23 Sep 2017 15:13:34 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/09/23/coding-editor/</guid>
			<description>&lt;p&gt;æœ€è¿‘æœ‰äº†ä¸€äº›æ„Ÿæ‚Ÿï¼Œåé‡ŒæƒŠæçš„çœ‹åˆ°è‡ªå·±åœ¨å¾ˆå¤šä¸å¿…è¦çš„äº‹æƒ…ä¸Šæµªè´¹äº†å¤ªå¤šæ—¶é—´!æ¯”å¦‚ç¼–è¾‘å·¥å…·å’Œå¼€å‘å¹³å°çš„é€‰æ‹©ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘æœ‰äº†ä¸€äº›æ„Ÿæ‚Ÿï¼Œåé‡ŒæƒŠæçš„çœ‹åˆ°è‡ªå·±åœ¨å¾ˆå¤šä¸å¿…è¦çš„äº‹æƒ…ä¸Šæµªè´¹äº†å¤ªå¤šæ—¶é—´!æ¯”å¦‚ç¼–è¾‘å·¥å…·å’Œå¼€å‘å¹³å°çš„é€‰æ‹©ï¼</p>

<p>çœ‹åˆ°åˆ«äººéƒ½åœ¨è¿›æ­¥ï¼Œè€Œæˆ‘å´å›ºæ­¥è‡ªå°ï¼Œåˆ«äººåœ¨è‡ªå·±ä»äº‹çš„é¢†åŸŸè¶Šèµ°è¶Šé«˜ï¼Œè€Œæˆ‘èµ°èµ°åœåœï¼Œè‡ªå·±å–œæ¬¢ç¼–ç¨‹ï¼Œå›å¤´ä¸€æƒ³ï¼Œè‡ªå·±åœ¨ç¼–ç¨‹å·¥å…·çš„é…ç½®å’Œé€‰æ‹©ä¸Šä¸‹çš„åŠŸå¤«ç›¸è¾ƒäºç¨‹åºå¼€å‘æœ¬èº«å¤šå¤ªå¤šï¼Œåé‡Œé€æ¸è®¤ä¸ºè‡ªå·±æ˜¯å¤šä¹ˆçš„è‚¤æµ…ï¼</p>

<h3 id="è‡ªå·±æ­£åœ¨å‡é€Ÿ">è‡ªå·±æ­£åœ¨å‡é€Ÿ</h3>

<p>æœ€è¿‘å‡ å¤©ï¼Œå¬è¯´äº†ä¸å°‘ä»¤äººé«˜å…´åŒæ—¶ä¹Ÿä»¤äººå«‰å¦’çš„äº‹æƒ…ï¼Œå‡ ä¸ªè®¤è¯†çš„äººï¼Œæ˜¯è‡ªå·±å‘¨å›´çš„äººï¼Œ&rdquo;å¸®&rdquo;æˆ‘å®ç°äº†å‡ºå›½æ¢¦ã€‚åé‡Œè‡ªå°æœ‰ç€å‡ºå›½æ·±é€ çš„æ¢¦æƒ³ï¼Œå¥ˆä½•è‡ªå·±çš„å­¦ä¹ è§‰æ‚Ÿä¸é«˜ï¼Œæœ€ç»ˆåªèƒ½æ‹¿å…¶ä»–ç†ç”±å®‰æ…°è‡ªå·±ï¼Œæ›¾ç»è‡ªè¯©æ¯”åˆ«äººèƒ½åŠ›å¼ºçš„åé‡Œï¼Œæ…¢æ…¢çš„è¢«åˆ«äººç”©åœ¨èº«åï¼Œä¸æ˜¯åˆ«äººè·‘å¾—å¿«äº†ï¼Œè€Œæ˜¯è‡ªå·±æ­£åœ¨å‡é€Ÿï¼Œç”šè‡³åœæ»ä¸å‰ï¼</p>

<p>åœ¨å­¦æ ¡çš„æ—¶å€™ï¼Œå› ä¸ºè‡ªå·±äº†è§£çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼ŒåŒå­¦çœ‹åˆ°ç»™å‡ºç¾å¥½çš„èµè®¸ï¼Œæˆ‘å´ä¿¡ä»¥ä¸ºçœŸï¼Œè‡ªå·±åšçš„å¹¶æ²¡æœ‰æ·±åº¦ï¼Œé’»ç ”ä¸€äº›å¹¶æ²¡æœ‰å¤ªå¤šä»·å€¼çš„ä¸œè¥¿ï¼Œä¸è¿‡å¥½çš„ä¸€ç‚¹æ˜¯è‡ªå­¦èƒ½åŠ›å¾—åˆ°å®Œç¾çš„ä½“ç°ã€‚å·¥ä½œäº†ä¸€æ®µæ—¶é—´ï¼Œå‘ç°é‚£äº›åŸæœ¬åœ¨å­¦æ ¡å¹¶æ²¡æœ‰ç›®æ ‡çš„åŒå­¦ä¹Ÿæ¸æ¸å› ä¸ºæœ‰äº†å·¥ä½œï¼Œè™½ç„¶ä»¥æŒ£é’±ä¸ºç›®æ ‡ï¼Œä½†ä»–ä»¬ä¹Ÿæ˜¯ä¿æŒç€å…´è¶£ä¸€ç‚¹ç‚¹æˆé•¿ï¼Œæ¯”æˆ‘è¿›æ­¥çš„é€Ÿåº¦ä¸å€¼å¿«å¤šå°‘å€ï¼</p>

<p>æœ‰ä¸€ä½åŒäº‹ï¼Œå‘æˆ‘å±•ç¤ºäº†è‡ªå·±åœ¨å­¦æ ¡åšçš„è½¯ä»¶ï¼Œä¸€ä¸ªå‹ç¼©åŒ…é‡Œå‡ åç”šè‡³ä¸Šç™¾ä¸ªå°å·¥å…·ï¼è€Œä»–æ˜¯ç”¨çš„å¼€å‘å·¥å…·ä¾¿æ˜¯æˆ‘å—¤ä¹‹ä»¥é¼»çš„windowsä¸‹ç”¨C#å¼€å‘çš„ï¼Œæˆ‘å½“æ—¶å‡ºäº†èµèµï¼Œæ›´å¤šçš„æ˜¯è‡ªæˆ‘ç¾æ„§ï¼šåé‡Œåœ¨å­¦æ ¡çš„æ—¶å€™ï¼Œæœ‰å¤šå°‘ä½œå“å‘¢ï¼Œè½¯ä»¶å¼€å‘ä¸Šä»€ä¹ˆéƒ½å»äº†è§£äº†ï¼Œäº†è§£äº†å¤šç§å¼€å‘è¯­è¨€ï¼Œç„¶ååšäº†å¤šå°‘æˆæœå‘¢ï¼Œnothingï¼å¤ªå¯æ‚²äº†ï¼å¤ªå¼±äº†ï¼</p>

<h3 id="é”™è¯¯çš„è§‚å¿µ">é”™è¯¯çš„è§‚å¿µ</h3>

<p>æ‹¿ç¼–è¾‘å™¨çš„é€‰æ‹©æ¥è¯´ï¼Œç¼–è¾‘å™¨æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿæ˜¯ç”¨æ¥æ¬ç –çš„ï¼Œæœ€ç»ˆè¿˜æ˜¯è¦åˆ›é€ è‡ªå·±çš„è½¯ä»¶ä½œå“çš„ï¼Œç„¶è€Œä¸ºä½•æˆ‘ä¾æ—§æ‰§ç€äºç¼–è¾‘å™¨çš„é€‰æ‹©å’Œç³»ç»Ÿçš„é€‰æ‹©ä¸Šå‘¢ï¼Ÿå…¶ä¸­ä½œç¥Ÿçš„æ˜¯è‡ªå·±å†…å¿ƒè‚®è„çš„é„™è§†é“¾ï¼Œå›å¤´çœ‹çœ‹æˆ‘çš„åšæ–‡ï¼Œç»å¤§éƒ¨åˆ†è¿˜æ˜¯è®²çš„å¼€å‘ç¯å¢ƒçš„é…ç½®å‘€ã€å·¥å…·çš„é…ç½®ï¼Œç„¶è€ŒçœŸæ­£å¯¹ç¨‹åºå‘˜æœ‰è¥å…»çš„ä¸œè¥¿å¤ªå°‘äº†ï¼Œä¸ç¦åˆè§‰å¾—è‡ªå·±è‚¤æµ…ä¹‹æäº†ã€‚</p>

<p>æˆ‘æœ‰ä»€ä¹ˆèµ„æ ¼å»é„™è§†åˆ«äººä½¿ç”¨å·¥å…·å’Œç³»ç»Ÿå¹³å°å‘¢ï¼Ÿæˆ‘å¹¶æ²¡æœ‰å¾ˆå¤šæ‹¿å¾—å‡ºæ‰‹çš„ç¨‹åºä½œå“ï¼Œè‡ªå·±åœ¨ç¼–ç¨‹å·¥å…·çš„é€‰æ‹©ã€é…ç½®ä¸Šçº ç»“ä¸”é¥®é…’è‡ªé†‰äº†ï¼ä¸€å£ä¸€ä¸ªç˜Ÿåˆ°æ­»ï¼ˆwindowsï¼‰ï¼Œä¸€å£ä¸€ä¸ªéƒ½æ˜¯æ¸£æ¸£ï¼Œåé‡Œè‡ªæƒ­å½¢ç§½ï¼Œå“ªé‡Œæœ‰æ´å¯ä»¥é’»ï¼Œå¿«å‘Šè¯‰æˆ‘ï¼</p>

<p>åé‡Œå¹¶æ²¡æœ‰é€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„å·¥å…·ï¼Œåè€Œæ‰§å¿µäºå¯¹è‡ªå·±æ¥è¯´æ•ˆç‡å¹¶ä¸é«˜çš„vimï¼Œçº ç»“äºæ’ä»¶çš„é…ç½®ï¼Œæ”¹è¿‡æ¥æ”¹è¿‡å»ï¼Œè™½ç„¶è¦æœ‰é’»ç ”ç²¾ç¥ï¼Œä½†åé‡Œåº”è¯¥æ˜¯åšè¿‡äº†ã€‚<code>vimå°±æ˜¯å”¯ä¸€</code>çš„è§‚å¿µæ˜¾ç„¶æ˜¯é”™çš„ï¼Œå…¶å®å®ƒä¹Ÿåªèƒ½é€‚ç”¨äºéƒ¨åˆ†åœºåˆï¼Œå¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼</p>

<p>æœ‰è‡ªå·±çš„è§‚ç‚¹æ˜¯å¯¹çš„ï¼Œä½†ä¸€ç›´å” å¨ï¼Œå°†ç²¾åŠ›æŠ•æ³¨äºå¹¶ä¸é‡è¦çš„äº‹æƒ…ä¸Šæ˜¯æ‚²å‰§çš„ï¼æ‰€ä»¥ï¼Œåé‡Œå¯¹è‡ªå·±ä½¿å‘½æœ¬æœ«å€’ç½®çš„å¤ªä¹…äº†ï¼Œè¯¥è§‰é†’äº†ï¼</p>

<p>åé‡Œè‡ªè¯©æ˜¯å…¨èƒ½çš„ï¼Œå¯¹è¿™ç§æ— èŠçš„å‡è±¡è¿·æƒ‘çš„å¤ªä¹…ï¼Œéº»æœ¨çš„æˆ‘å·²ç»æ„Ÿå—åˆ°ç°å®çš„ç—›ï¼ä»€ä¹ˆéƒ½å»äº†è§£ï¼Œä»€ä¹ˆéƒ½ä¸ç²¾é€šï¼Œè¿™å°±æ˜¯çœ¼å‰çš„å¯æ€œäººï¼</p>

<h3 id="è¯¥åšçš„ä¸æ˜¯å¿æ‚”è€Œæ˜¯è§‰é†’">è¯¥åšçš„ä¸æ˜¯å¿æ‚”è€Œæ˜¯è§‰é†’</h3>

<p>æ²‰ç¡çš„é›„ç‹®ï¼Œä¸€æ—¦è§‰é†’ï¼Œå¿…å®šæ˜¯éœ‡æ’¼çš„ï¼ç°åœ¨è¯¥åšçš„ä¸æ˜¯å¿æ‚”ï¼Œè€Œæ˜¯è§‰é†’ï¼ä¹Ÿè®¸ç°åœ¨å°±æ˜¯è¯¥åšå‡ºæ”¹å˜çš„æ—¶å€™äº†ï¼š</p>

<ol>
<li>é€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„ï¼šæ‰¾åˆ°æ¨ªæ‰«æ¯ä¸€ä»½å·¥ä½œçš„é…å¥—åˆ©å‰‘ï¼Œè€Œä¸æ˜¯æ‰§ç€ä¸€ä¸ªæƒ…æ€€å‡è¡£ä¸­çš„â€œåœ£å‰‘ï¼</li>
<li>çŸ¥é“çš„ä¸å¦‚äº†è§£çš„ï¼Œäº†è§£çš„æ¯”ä¸ä¸Šç²¾é€šçš„ï¼Œç²¾é€šçš„æ‰åƒæ˜¯ä¸‡èƒ½çš„ï¼</li>
<li>æŠ“ä½é‡ç‚¹ï¼Œèšç„¦è¿½æ±‚ï¼ç”Ÿæ´»ä¸­å¤ªå¤šå¹²æ‰°ï¼Œå…‹åˆ¶æ²¡å¿…è¦çš„å¼ºè¿«ç—‡ï¼Œæ‰€è°“æ— èŠçš„æƒ…æ€€è«è¿‡äºå¹³åº¸çš„å€”å¼ºï¼Œæ€è¿›å–ï¼Œæ›´åº”è¯¥æ‰§ç€äºæœ‰ä»·å€¼ã€æœ‰æ·±åº¦ã€æœ‰é«˜åº¦çš„äº‹æƒ…ä¸Šï¼</li>
</ol>]]></content>
		</item>
		
		<item>
			<title>è§£å†³macç»ˆç«¯sshç™»å½•linuxä¸­æ–‡ä¹±ç é—®é¢˜</title>
			<link>https://www.smslit.top/2017/09/07/mac-ssh-linux-encoding/</link>
			<pubDate>Thu, 07 Sep 2017 16:34:12 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/09/07/mac-ssh-linux-encoding/</guid>
			<description>&lt;p&gt;macä¸‹sshè¿œç¨‹ç™»å½•VPSçš„centoså‘ç°ä¸­æ–‡ç«Ÿç„¶ä¹±ç ï¼Œæƒ³å¿…æ˜¯ç³»ç»Ÿç¼–ç çš„é—®é¢˜ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>macä¸‹sshè¿œç¨‹ç™»å½•VPSçš„centoså‘ç°ä¸­æ–‡ç«Ÿç„¶ä¹±ç ï¼Œæƒ³å¿…æ˜¯ç³»ç»Ÿç¼–ç çš„é—®é¢˜ã€‚</p>

<h4 id="åœ¨linuxä¸‹æŸ¥çœ‹ç¼–ç ">åœ¨linuxä¸‹æŸ¥çœ‹ç¼–ç ï¼š</h4>
<div class="highlight"><pre class="chroma"># root @ vps in ~ [4:29:47]
$ locale
LANG=C
LC_CTYPE=C
LC_NUMERIC=&#34;C&#34;
LC_TIME=&#34;C&#34;
LC_COLLATE=&#34;C&#34;
LC_MONETARY=&#34;C&#34;
LC_MESSAGES=&#34;C&#34;
LC_PAPER=&#34;C&#34;
LC_NAME=&#34;C&#34;
LC_ADDRESS=&#34;C&#34;
LC_TELEPHONE=&#34;C&#34;
LC_MEASUREMENT=&#34;C&#34;
LC_IDENTIFICATION=&#34;C&#34;
LC_ALL=</pre></div>
<h4 id="åœ¨macosä¸‹æŸ¥çœ‹ç¼–ç ">åœ¨macOSä¸‹æŸ¥çœ‹ç¼–ç </h4>
<div class="highlight"><pre class="chroma">âœ  smslit locale
LANG=&#34;zh_CN.UTF-8&#34;
LC_COLLATE=&#34;zh_CN.UTF-8&#34;
LC_CTYPE=&#34;zh_CN.UTF-8&#34;
LC_MESSAGES=&#34;zh_CN.UTF-8&#34;
LC_MONETARY=&#34;zh_CN.UTF-8&#34;
LC_NUMERIC=&#34;zh_CN.UTF-8&#34;
LC_TIME=&#34;zh_CN.UTF-8&#34;
LC_ALL=</pre></div>
<h4 id="è§£å†³">è§£å†³</h4>

<ol>
<li>è¿œç¨‹ç™»å½•VPSï¼›</li>
<li>ç¼–è¾‘.zshrcï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹:
export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8</li>
<li>å…³é—­è¿œç¨‹ç™»å½•ï¼Œé‡æ–°ç™»å½•VPSï¼Œå‘ç°ä¸­æ–‡ä¸ä¼šä¹±ç ã€‚</li>
</ol>]]></content>
		</item>
		
		<item>
			<title>WSL(windows subsytem linux)ä¸‹æ·»åŠ ç½‘ç»œæµè§ˆå™¨æ”¯æŒ</title>
			<link>https://www.smslit.top/2017/09/02/wsl-webbrowser/</link>
			<pubDate>Sat, 02 Sep 2017 13:41:03 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/09/02/wsl-webbrowser/</guid>
			<description>&lt;p&gt;windowsä¸‹åœ¨subsystem linuxä¸­å®‰è£…äº†Anacondaï¼Œåœ¨ä½¿ç”¨jupyter notebookæ—¶ï¼Œå‘ç°å‘½ä»¤è¡Œå¹¶ä¸èƒ½è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼ŒåŸæ¥æ˜¯å­ç³»ç»Ÿlinuxä¸­æ²¡æœ‰å¯ç”¨ç½‘é¡µæµè§ˆå™¨ï¼Œæœ¬æ–‡å°±è®²è¿°ä¸€ä¸‹å¦‚ä½•åœ¨WSLä¸­æ·»åŠ ç½‘ç»œæµè§ˆå™¨æ”¯æŒã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>windowsä¸‹åœ¨subsystem linuxä¸­å®‰è£…äº†Anacondaï¼Œåœ¨ä½¿ç”¨jupyter notebookæ—¶ï¼Œå‘ç°å‘½ä»¤è¡Œå¹¶ä¸èƒ½è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼ŒåŸæ¥æ˜¯å­ç³»ç»Ÿlinuxä¸­æ²¡æœ‰å¯ç”¨ç½‘é¡µæµè§ˆå™¨ï¼Œæœ¬æ–‡å°±è®²è¿°ä¸€ä¸‹å¦‚ä½•åœ¨WSLä¸­æ·»åŠ ç½‘ç»œæµè§ˆå™¨æ”¯æŒã€‚</p>

<h2 id="é—®é¢˜ç°è±¡">é—®é¢˜ç°è±¡</h2>

<p>WSLå‘½ä»¤è¡Œä¸­ï¼Œåœ¨ç›¸åº”ç›®å½•ä¸‹ä½¿ç”¨jupyter notebookï¼Œä¼šå‡ºç°å¦‚ä¸‹æç¤ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  Algorithm_Research git:<span class="o">(</span>master<span class="o">)</span> jupyter notebook
<span class="o">[</span>I <span class="m">10</span>:44:16.783 NotebookApp<span class="o">]</span> Serving notebooks from <span class="nb">local</span> directory: /mnt/c/Users/smslit/Desktop/topscomm/Algorithm_Research
<span class="o">[</span>I <span class="m">10</span>:44:16.784 NotebookApp<span class="o">]</span> <span class="m">0</span> active kernels 
<span class="o">[</span>I <span class="m">10</span>:44:16.784 NotebookApp<span class="o">]</span> The Jupyter Notebook is running at: http://localhost:8888/?token<span class="o">=</span>000982665d732a5d7052fe3bbadb4346fe0b3fdbc8b87bb4
<span class="o">[</span>I <span class="m">10</span>:44:16.784 NotebookApp<span class="o">]</span> Use Control-C to stop this server and shut down all kernels <span class="o">(</span>twice to skip confirmation<span class="o">)</span>.
<span class="o">[</span>W <span class="m">10</span>:44:16.789 NotebookApp<span class="o">]</span> No web browser found: could not locate runnable browser.
<span class="o">[</span>C <span class="m">10</span>:44:16.789 NotebookApp<span class="o">]</span> 
    
    Copy/paste this URL into your browser when you connect <span class="k">for</span> the first time,
    to login with a token:
        http://localhost:8888/?token<span class="o">=</span>000982665d732a5d7052fe3bbadb4346fe0b3fdbc8b87bb4</code></pre></div>
<p>å…¶ä¸­å¯ä»¥çœ‹åˆ°<code>No web browser found: could not locate runnable browser</code>ï¼Œè¿™æ˜¯å› ä¸ºwinä¸‹å¯ç”¨äº†ubuntu bashååªæ˜¯å‘½ä»¤è¡Œçš„æ¥å£ï¼Œä½†æ²¡æœ‰ç›¸åº”ç½‘ç»œæµè§ˆå™¨å®‰è£…ã€‚</p>

<h2 id="æ„å¤–å‘ç°">æ„å¤–å‘ç°</h2>

<h3 id="wslå¯ä»¥æ‰§è¡Œexe">WSLå¯ä»¥æ‰§è¡Œexe</h3>

<p>æƒŠå¥‡çš„å‘ç°wslçš„å‘½ä»¤è¡Œä¸­å¯ä»¥è°ƒç”¨exeï¼Œæ¯”å¦‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥æ‰“å¼€chromeæµè§ˆå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å°†windowsä¸­å®‰è£…çš„æµè§ˆå™¨æ³¨å†Œç»™wslã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">/mnt/c/Program<span class="se">\ </span>Files<span class="se">\ \(</span>x86<span class="se">\)</span>/Google/Chrome/Application/chrome.exe</code></pre></div>
<h3 id="wslä¸­å¯ä»¥ç”¨å‘½ä»¤è¡Œé…ç½®é»˜è®¤æµè§ˆå™¨">WSLä¸­å¯ä»¥ç”¨å‘½ä»¤è¡Œé…ç½®é»˜è®¤æµè§ˆå™¨</h3>

<p>å¦‚æœæˆ‘ä»¬ç›´æ¥ç”¨å¦‚ä¸‹å‘½ä»¤è¡Œé…ç½®ç½‘é¡µæµè§ˆå™¨ï¼Œä¼šæç¤ºæ²¡æœ‰å®‰è£…æµè§ˆå™¨ï¼Œæ²¡æœ‰é€‰é¡¹ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo update-alternatives --config x-www-browser</code></pre></div>
<p>æ€ä¹ˆåŠï¼Ÿè¿™ä¸ªæ—¶å€™æƒ³åˆ°äº†ä¸€ç§é¥¶è·¯å­çš„æ–¹å¼ï¼Œubuntuä¸‹æœ‰é…ç½®æµè§ˆå™¨é€‰é¡¹ä¼˜å…ˆçº§çš„å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤éœ€è¦æŒ‡æ˜æµè§ˆå™¨ï¼Œæ­¤æ—¶æŒ‡å®šwin ä¸‹chromeçš„è·¯å¾„å°±å¯ä»¥äº†ï¼Œè¯•ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  Downloads <span class="nb">cd</span> /mnt/c/Program<span class="se">\ </span>Files<span class="se">\ \(</span>x86<span class="se">\)</span>/Google/Chrome/Application
âœ  Application ll
æ€»ç”¨é‡ <span class="m">1</span>.4M
dr-xr-xr-x <span class="m">0</span> root root  <span class="m">512</span> 8æœˆ  <span class="m">18</span> <span class="m">08</span>:31 <span class="m">60</span>.0.3112.101
-r-xr-xr-x <span class="m">1</span> root root <span class="m">1</span>.3M 8æœˆ  <span class="m">11</span> <span class="m">15</span>:40 chrome.exe
-r-xr-xr-x <span class="m">1</span> root root  <span class="m">410</span> 8æœˆ  <span class="m">18</span> <span class="m">08</span>:31 chrome.VisualElementsManifest.xml
-r-xr-xr-x <span class="m">1</span> root root 121K 8æœˆ  <span class="m">14</span> <span class="m">08</span>:41 master_preferences
drwxrwxrwx <span class="m">0</span> root root  <span class="m">512</span> 8æœˆ  <span class="m">25</span> <span class="m">18</span>:14 SetupMetrics
âœ  Application sudo update-alternatives --install /usr/bin/x-www-browser x-www-browser /mnt/c/Program<span class="se">\ </span>Files<span class="se">\ \(</span>x86<span class="se">\)</span>/Google/Chrome/Application/chrome.exe <span class="m">100</span>
update-alternatives: ä½¿ç”¨ /mnt/c/Program Files <span class="o">(</span>x86<span class="o">)</span>/Google/Chrome/Application/chrome.exe æ¥åœ¨è‡ªåŠ¨æ¨¡å¼ä¸­æä¾› /usr/bin/x-www-browser <span class="o">(</span>x-www-browser<span class="o">)</span>
âœ  Application sudo update-alternatives --config x-www-browser 
é“¾æ¥ç»„ x-www-browser <span class="o">(</span>æä¾› /usr/bin/x-www-browser<span class="o">)</span>ä¸­åªæœ‰ä¸€ä¸ªå€™é€‰é¡¹ï¼š/mnt/c/Program Files <span class="o">(</span>x86<span class="o">)</span>/Google/Chrome/Application/chrome.exeæ— éœ€é…ç½®ã€‚</code></pre></div>
<h2 id="jupyter-notebook">jupyter notebook</h2>

<p>æ­¤æ—¶å†æ¬¡æ‰§è¡Œjupyter notebookï¼ŒæƒŠå–œï¼Œç¡®å®å¯ä»¥è‡ªåŠ¨æ‰“å¼€chromeå‘ˆç°ä»¿çœŸç›®å½•ï¼š</p>
<div class="highlight"><pre class="chroma">âœ  Algorithm_Research git:(master) jupyter notebook                               
[I 10:59:17.800 NotebookApp] Serving notebooks from local directory: /mnt/c/Users/smslit/Desktop/topscomm/Algorithm_Research
[I 10:59:17.800 NotebookApp] 0 active kernels 
[I 10:59:17.800 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/?token=2d7f588a4341b73bc65fcc6c85aac0289677123ef1b8e24c
[I 10:59:17.800 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 10:59:17.807 NotebookApp] 
    
    Copy/paste this URL into your browser when you connect for the first time,
    to login with a token:
        http://localhost:8888/?token=2d7f588a4341b73bc65fcc6c85aac0289677123ef1b8e24c
[I 10:59:18.359 NotebookApp] Accepting one-time-token-authenticated connection from 127.0.0.1
[W 11:02:15.429 NotebookApp] 404 GET /static/components/preact/preact.min.js.map (127.0.0.1) 32.15ms referer=None
[W 11:02:15.433 NotebookApp] 404 GET /static/components/proptypes/index.js.map (127.0.0.1) 2.30ms referer=None
[W 11:02:15.436 NotebookApp] 404 GET /static/components/preact-compat/preact-compat.min.js.map (127.0.0.1) 2.09ms referer=None</pre></div>]]></content>
		</item>
		
		<item>
			<title>vimä¹Ÿæ˜¯platformioçš„IDE</title>
			<link>https://www.smslit.top/2017/08/15/platformio-vim/</link>
			<pubDate>Tue, 15 Aug 2017 10:00:29 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/08/15/platformio-vim/</guid>
			<description>&lt;p&gt;çŸ¥é“platformioå¾ˆä¹…äº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æ—¶é—´ç©è€ï¼Œæœ€è¿‘æœ‰æ—¶é—´äº†ï¼Œåˆç ”ç©¶äº†ä¸€ç•ªï¼Œplatformioä¹Ÿä¸ºvimç”¨æˆ·æä¾›äº†ä¸€äº›å¯ç”¨çš„å§¿åŠ¿ï¼Œæœ¬ç¯‡æ–‡ç« å°±åˆ†äº«ä¸€ä¸‹vimä¸pioçš„é…åˆå¥½æˆï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>çŸ¥é“platformioå¾ˆä¹…äº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æ—¶é—´ç©è€ï¼Œæœ€è¿‘æœ‰æ—¶é—´äº†ï¼Œåˆç ”ç©¶äº†ä¸€ç•ªï¼Œplatformioä¹Ÿä¸ºvimç”¨æˆ·æä¾›äº†ä¸€äº›å¯ç”¨çš„å§¿åŠ¿ï¼Œæœ¬ç¯‡æ–‡ç« å°±åˆ†äº«ä¸€ä¸‹vimä¸pioçš„é…åˆå¥½æˆï¼</p>

<h2 id="åˆå§‹åŒ–å·¥ç¨‹">åˆå§‹åŒ–å·¥ç¨‹</h2>

<p>è¿™é‡Œä»¥<code>Arduino uno</code>ä¸ºä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–å·¥ç¨‹ï¼Œå“¦ï¼Œå¯¹äº†ï¼Œä¹‹å‰å…ˆåˆ‡æ¢åˆ°å·¥ç¨‹ç›®å½•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">pio init --ide vim -b &lt;ID&gt;</code></pre></div>
<p>å…¶ä¸­ï¼Œ<code>&lt;ID&gt;</code>ä»£è¡¨æ¿å­çš„IDï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤<code>pio boards</code>åˆ—å‡ºæ‰€æœ‰çš„æ¿å­IDï¼Œé€‰æ‹©è‡ªå·±ä½¿ç”¨çš„ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆå§‹åŒ–ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">pio init --ide vim -b uno</code></pre></div>
<p>æ­¤æ—¶ä¼šå‘ç°ç”Ÿæˆäº†ä¸€ä¸‹æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">.
â”œâ”€â”€ .clang_complete
â”œâ”€â”€ .gcc-flags.json
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .pioenvs
â”‚Â Â  â”œâ”€â”€ <span class="k">do</span>-not-modify-files-here.url
â”‚Â Â  â””â”€â”€ structure.hash
â”œâ”€â”€ .travis.yml
â”œâ”€â”€ lib
â”‚Â Â  â””â”€â”€ readme.txt
â”œâ”€â”€ platformio.ini
â””â”€â”€ src

<span class="m">3</span> directories, <span class="m">8</span> files</code></pre></div>
<p>å…¶ä¸­<code>.clang_complete</code>ç”¨äºä»£ç è¡¥å…¨ï¼Œåé¢ä¼šå‘Šè¯‰ä½ å¦‚ä½•åˆ©ç”¨è¿™ä¸ªæ–‡ä»¶ã€‚</p>

<p>ä¸ºäº†æ–¹ä¾¿ç¼–è¯‘å’Œä¸Šä¼ ç­‰ï¼Œå¯ä»¥åˆ›å»ºæ–‡ä»¶<code>Makefile</code>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-makefile" data-lang="makefile"><span class="nf">all</span><span class="o">:</span>
 	platformio -f -c vim run

<span class="nf">upload</span><span class="o">:</span>
	platformio -f -c vim run --target upload

<span class="nf">clean</span><span class="o">:</span>
	platformio -f -c vim run --target clean

<span class="nf">program</span><span class="o">:</span>
	platformio -f -c vim run --target program

<span class="nf">uploadfs</span><span class="o">:</span>
	platformio -f -c vim run --target uploadfs

<span class="nf">update</span><span class="o">:</span>
	platformio -f -c vim update
</code></pre></div>
<p>é‚£ä¹ˆä»¥ååœ¨å·¥ç¨‹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ<code>make all</code>å°±å¯ä»¥ç¼–è¯‘äº†ï¼Œå¦‚æ­¤ç®€å•ï¼</p>

<h2 id="æ·»åŠ æºä»£ç ">æ·»åŠ æºä»£ç </h2>

<p>åœ¨ç›®å½•<code>src</code>ä¸‹æ–°å»ºæ–‡ä»¶<code>main.cpp</code>ï¼Œå†…å®¹å¯ä»¥æ·»åŠ å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;Arduino.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&#34;What?&#34;</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&#34;Hello, world!&#34;</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="ç¼–è¯‘å·¥ç¨‹">ç¼–è¯‘å·¥ç¨‹</h2>

<p>ä¸ºäº†æ–¹ä¾¿åœ¨vimä¸‹ç¼–è¾‘ä»£ç æ—¶å¯ä»¥ç¼–è¯‘å·¥ç¨‹ï¼Œè¿™é‡Œå¯ä»¥æ·»åŠ å¿«æ·é”®ï¼Œåœ¨<code>~/.vimrc</code> ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">nnoremap &lt;C-b&gt; :make&lt;CR&gt;</code></pre></div>
<p>è¿™æ ·å¯ä»¥æŒ‰å¿«æ·é”®<code>ctrl+b</code>ç¼–è¯‘å·¥ç¨‹äº†ã€‚</p>

<h2 id="ä»£ç è¡¥å…¨">ä»£ç è¡¥å…¨</h2>

<p>æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨<a href="https://github.com/Valloric/YouCompleteMe" target="_blank">YouCompleteMe</a>ï¼Œä¸€ä¸ªæ˜¯ä½¿ç”¨æ’ä»¶<a href="https://github.com/maralla/completor.vim" target="_blank">completor</a>ï¼Œè¿™ä¸¤ç§æ–¹å¼ä»»é€‰å…¶ä¸€å³å¯ï¼Œè¿™é‡Œå¼ºçƒˆå»ºè®®ä½¿ç”¨åè€… <strong>completor.vim</strong>ï¼Œå› ä¸ºé…ç½®æ–¹ä¾¿ï¼Œå®‰è£…è½»é‡ã€‚</p>

<h3 id="completor-vim">completor.vim</h3>

<p>å¦‚æœæ‚¨ä½¿ç”¨çš„vimç‰ˆæœ¬æ˜¯8.0+ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹ä¸€ä¸‹ <a href="/2018/06/25/vim-pack/" target="_blank">vimæ’ä»¶ç®¡ç†å·¥å…·pack</a> äº†è§£ä¸€æ¬¾æ–°çš„vimæ’ä»¶ç®¡ç†å·¥å…·ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„ç®¡ç†å·¥å…·ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹ä½¿ç”¨ <strong>pack</strong> å®‰è£…ï¼Œéå¸¸ç®€å•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pack install maralla/completor.vim</code></pre></div>
<p>ç¡®ä¿å·²ç»å®‰è£… <strong>clang</strong>ï¼Œè‡ªè¡Œæœç´¢å®‰è£…æ–¹æ³•ã€‚</p>

<p>æŸ¥çœ‹<code>clang</code>å®‰è£…ç›®å½•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  which clang
/usr/bin/clang</code></pre></div>
<p>æœ€åä¸€æ­¥ï¼Œé…ç½®æ’ä»¶æ‰€éœ€è¦çš„ <code>clang</code> è·¯å¾„å³å¯ï¼Œå¯ä»¥åœ¨ <code>.vimrc</code>ä¸­æ·»åŠ é…ç½®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">let</span> g:completor_clang_binary <span class="o">=</span> <span class="s1">&#39;/usr/bin/clang&#39;</span>
map  &lt;leader&gt;jj &lt;Plug&gt;CompletorCppJumpToPlaceholder
imap &lt;leader&gt;jj &lt;Plug&gt;CompletorCppJumpToPlaceholder</code></pre></div>
<p>âš ï¸ï¼š <strong>clang</strong> çš„ç›®å½•é…ç½®æ˜¯æ‚¨ç”µè„‘ä¸­clangçš„å®‰è£…ç›®å½•ï¼Œå¯èƒ½ä¸è¿™é‡Œä¸åŒã€‚</p>

<p>æˆ–è€…ä½¿ç”¨ <a href="https://github.com/maralla/pack" target="_blank">pack</a> çš„é…ç½®æ–¹æ³•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  pack config maralla/completor</code></pre></div>
<p>æ­¤æ—¶ä¼šè·³å‡ºvimæ¥ç¼–è¾‘é…ç½®ï¼Œæ·»åŠ ä¸Šé¢ä¸‰è¡Œçš„é…ç½®å†…å®¹ä¿å­˜é€€å‡ºå³å¯ã€‚ä¸‰è¡Œé…ç½®ä¸­åä¸¤è¡Œç”¨æ¥é…ç½®è·³è½¬å ä½ç¬¦å¿«æ·é”®ã€‚</p>

<p>æ‰“å¼€æºç  <code>src/main.cpp</code> ï¼Œè¾“å…¥å‡½æ•°å‰å‡ ä¸ªå­—æ¯å°±ä¼šæœ‰æç¤ºï¼Œé€‰æ‹©ç›¸åº”å‡½æ•°ï¼Œ <strong>completor</strong> åœ¨å½¢å‚ä½ç½®ä»¥å ä½ç¬¦å¡«å……ï¼ŒæŒ‰ä¸‹é…ç½®ä¸­çš„å¿«æ·é”®å°±ä¼šåœ¨å ä½ç¬¦é—´è·³è½¬ï¼Œæ–¹ä¾¿å¡«å†™å®å‚ã€‚</p>

<h3 id="youcompleteme">YouCOmpleteMe</h3>

<p>ä¸ºVIMå®‰è£…YCMæ’ä»¶ï¼Œè‡ªè¡Œç ”ç©¶å®‰è£…å³å¯ï¼Œ<a href="https://github.com/oblitum/YouCompleteMe/tree/clang_complete-params" target="_blank">ä¼ é€é—¨åœ¨è¿™é‡Œ</a>ã€‚å‡è®¾å·²ç»æˆåŠŸå®‰è£…<code>YCM</code>ï¼Œå…¶ä¸­ç›¸åº”<code>.vimrc</code>ä¸­çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma">&#34; set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
&#34; alternatively, pass a path where Vundle should install plugins
&#34;call vundle#begin(&#39;~/some/path/here&#39;)

&#34; let Vundle manage Vundle, required
Plugin &#39;VundleVim/Vundle.vim&#39;
Bundle &#39;Valloric/YouCompleteMe&#39;
Bundle &#39;rdnetto/YCM-Generator&#39;
&#34; The following are examples of different formats supported.
&#34; Keep Plugin commands between vundle#begin/end.

&#34; All of your Plugins must be added before the following line
call vundle#end()            &#34; required

&#34; for ycm
let g:ycm_error_symbol = &#39;&gt;&gt;&#39;
let g:ycm_warning_symbol = &#39;&gt;*&#39;
nnoremap &lt;leader&gt;gl :YcmCompleter GoToDeclaration&lt;CR&gt;
nnoremap &lt;leader&gt;gf :YcmCompleter GoToDefinition&lt;CR&gt;
nnoremap &lt;leader&gt;gg :YcmCompleter GoToDefinitionElseDeclaration&lt;CR&gt;
&#34;è®©YouCompleteMeåŒæ—¶åˆ©ç”¨åŸæ¥çš„ctags
let g:ycm_collect_identifiers_from_tags_files = 1
nmap &lt;F4&gt; :YcmDiags&lt;CR&gt;
&#34; let g:loaded_youcompleteme = 1</pre></div>
<p>æ’ä»¶éœ€è¦æ–‡ä»¶<code>.ycm_extra_conf.py</code>ï¼Œå¯ä»¥æ ¹æ®<strong>Anthony Ford</strong>æä¾›çš„é…ç½®æ–‡ä»¶<a href="https://gist.github.com/ajford/f551b2b6fd4d6b6e1ef2" target="_blank">PlatformIO/YouCompleteMe Integration</a>ä¿®æ”¹æˆ‘ä»¬å·¥ç¨‹éœ€è¦çš„è¿™ä¸ªé…ç½®æ–‡ä»¶ã€‚å…ˆå°†è¿™ä¸ªæ–‡ä»¶ä¸‹è½½åˆ°å·¥ç¨‹ç›®å½•ä¸‹ï¼Œç„¶åè¿›è¡Œä¿®æ”¹å³å¯ã€‚</p>

<p>éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æœ‰å‡ å¤„ï¼š</p>

<ul>
<li>libDirsä¸­å¯¹åº”çš„å‡ ä¸ªåº“ç›®å½•ï¼Œä¹Ÿå°±æ˜¯31ã€36ã€40è¿™ä¸‰è¡Œï¼Œå¯¹åº”è‡ªå·±ä½¿ç”¨çš„framworkç›®å½•å°±å¯ä»¥ï¼Œä¸åŒMCUå¹³å°å¯èƒ½æœ‰ä¸åŒï¼Œè‡ªè¡Œæ·»åŠ å³å¯ï¼›</li>
<li>ä¿®æ”¹flagsï¼Œ<code>.ycm_extra_conf.py</code>ä¸­61ï½65è¿™äº”è¡Œå†…å®¹æ›¿æ¢æˆæ­£ç¡®çš„ï¼Œè¿™é‡Œéœ€è¦å‚è€ƒä¸Šé¢æåˆ°çš„<code>.clang_complete</code>æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­æœ€åå‡ è¡Œç»™å‡ºäº†flagsï¼›</li>
</ul>

<p>å†æ¬¡å¯åŠ¨vimç¼–è¾‘<code>/src/main.cpp</code>ï¼Œæç¤ºä½¿ç”¨æˆ‘ä»¬åˆ›å»ºçš„<code>.ycm_extra_conf.py</code>ï¼ŒOKå³å¯ï¼Œç„¶åå°±å¯ä»¥äº«å—è¯­ä¹‰åˆ†æçš„ä»£ç è¡¥å…¨äº†ã€‚</p>

<h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2>

<p>å¦‚æœä½ ä¹Ÿç© <code>Arduino</code>ï¼Œä½¿ç”¨ <a href="http://platformio.org" target="_blank">platformio</a>è¿›è¡Œå¼€å‘ï¼ŒåŒæ—¶å–œæ¬¢ä½¿ç”¨ <strong>vim</strong> è¿™æ¬¾ç¥çº§ä»£ç ç¼–è¾‘å™¨ï¼Œé‚£ä¹ˆæœ¬æ–‡åº”è¯¥ä¼šå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼</p>]]></content>
		</item>
		
		<item>
			<title>ä¸ºåµŒå…¥å¼MCUå·¥ç¨‹å»ºç«‹å®Œæ•´çš„cscopeå’Œctagsç´¢å¼•</title>
			<link>https://www.smslit.top/2017/06/18/embeddedVim/</link>
			<pubDate>Sun, 18 Jun 2017 13:54:31 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/06/18/embeddedVim/</guid>
			<description>&lt;p&gt;è¿™å‡ å¤©æ·±å…¥äº†è§£äº†ä¸€ä¸‹vimçš„ç¥çº§æ’ä»¶&lt;a href=&#34;https://github.com/Valloric/YouCompleteMe&#34; target=&#34;_blank&#34;&gt;YouCompleteMe&lt;/a&gt;ï¼Œæœç„¶å‰å®³ï¼Œä½†æ˜¯åœ¨MCUå·¥ç¨‹ä¸­å‡½æ•°è·³è½¬å’Œè¯­ä¹‰è¡¥å…¨å°±æ­‡èœäº†ï¼Œç ”ç©¶äº†å‡ å¤©ä¹Ÿæ²¡æ‰¾åˆ°å¾ˆå¥½çš„ä½¿ç”¨æ–¹æ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯æ— æ³•åœ¨MCUåµŒå…¥å¼å·¥ç¨‹ä¸­è·³è½¬å‡½æ•°å®šä¹‰ï¼Œè¿™æ˜¯æ— æ³•å¿å—çš„ï¼Œåœ¨PCæˆ–macä¸Šçš„c/c++/clangå·¥ç¨‹å¯ä»¥å®Œç¾ä½¿ç”¨ã€‚æ‰€ä»¥æˆ‘è¿˜æ˜¯è€å®çš„ä½¿ç”¨cscopeå’Œctagså§ï¼Œæœ¬ç¯‡æ–‡ç« å°±ç®€å•è¯´ä¸€ä¸‹ï¼Œå¦‚ä½•ä¸ºMCUå·¥ç¨‹å»ºç«‹å®Œæ•´çš„ç´¢å¼•ï¼Œå®Œæˆå®Œç¾è·³è½¬ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è¿™å‡ å¤©æ·±å…¥äº†è§£äº†ä¸€ä¸‹vimçš„ç¥çº§æ’ä»¶<a href="https://github.com/Valloric/YouCompleteMe" target="_blank">YouCompleteMe</a>ï¼Œæœç„¶å‰å®³ï¼Œä½†æ˜¯åœ¨MCUå·¥ç¨‹ä¸­å‡½æ•°è·³è½¬å’Œè¯­ä¹‰è¡¥å…¨å°±æ­‡èœäº†ï¼Œç ”ç©¶äº†å‡ å¤©ä¹Ÿæ²¡æ‰¾åˆ°å¾ˆå¥½çš„ä½¿ç”¨æ–¹æ³•ï¼Œæœ€ç»ˆè¿˜æ˜¯æ— æ³•åœ¨MCUåµŒå…¥å¼å·¥ç¨‹ä¸­è·³è½¬å‡½æ•°å®šä¹‰ï¼Œè¿™æ˜¯æ— æ³•å¿å—çš„ï¼Œåœ¨PCæˆ–macä¸Šçš„c/c++/clangå·¥ç¨‹å¯ä»¥å®Œç¾ä½¿ç”¨ã€‚æ‰€ä»¥æˆ‘è¿˜æ˜¯è€å®çš„ä½¿ç”¨cscopeå’Œctagså§ï¼Œæœ¬ç¯‡æ–‡ç« å°±ç®€å•è¯´ä¸€ä¸‹ï¼Œå¦‚ä½•ä¸ºMCUå·¥ç¨‹å»ºç«‹å®Œæ•´çš„ç´¢å¼•ï¼Œå®Œæˆå®Œç¾è·³è½¬ï¼</p>

<h2 id="mcuå·¥ç¨‹">MCUå·¥ç¨‹</h2>

<h3 id="ç°çŠ¶">ç°çŠ¶</h3>

<ul>
<li>macOSå¹³å°</li>
<li>mcuä¸ºsiliconlabçš„EFM32å•ç‰‡æœºï¼ŒEFM32JG1B200</li>
<li>ç¼–è¾‘å™¨vim</li>
</ul>

<p>å®‰è£…äº†Silicon Labså®˜æ–¹çš„å¼€å‘ç¯å¢ƒsimplicity studioä¸ºEFM32çš„å¼€å‘å¸¦æ¥å¾ˆå¤§çš„æ–¹ä¾¿ï¼Œæ˜¯å¾ˆæ£’çš„å¼€å‘å·¥å…·ï¼ŒåŒæ—¶å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç®¡ç†SDKå’Œtoolchainï¼Œåé‡Œå´å¸Œæœ›å¯ä»¥ç”¨vimå®Œæˆä»£ç ç¼–å†™å’Œé˜…è¯»ï¼Œä¸ºäº†å®ç°å‘å¼€å‘ç¯å¢ƒä¸­çš„å„ç§è·³è½¬ï¼Œåé‡Œå†³å®šä½¿ç”¨cscopeå’Œctagsã€‚å»ºç«‹å·¥ç¨‹ä¾æ—§ä½¿ç”¨Simplicity Studioï¼Œå»ºç«‹å¥½çš„å·¥ç¨‹ä¼šç”Ÿæˆç›¸åº”çš„makefileï¼Œè¿™å°±å…å»äº†è‡ªå·±å†™makefileçš„éº»çƒ¦ï¼</p>

<h3 id="sdkå’Œtoolchainsç›®å½•">SDKå’ŒToolchainsç›®å½•</h3>

<ul>
<li>SDK

<ul>
<li>&rdquo;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/sdks/gecko_sdk_suite/v1.1/&rdquo;</li>
</ul></li>
<li>toolchain

<ul>
<li>&rdquo;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/toolchains/gnu_arm/4.9_2015q3&rdquo;</li>
</ul></li>
</ul>

<h2 id="æ€è·¯">æ€è·¯</h2>

<p>å…ˆç”¨findå‘½ä»¤æŸ¥æ‰¾æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶ï¼Œå¹¶å»ºç«‹ç´¢å¼•æ–‡ä»¶cscope.filesï¼Œç„¶åé€šè¿‡ç´¢å¼•æ–‡ä»¶åˆ›å»ºæ•°æ®åº“ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç”Ÿæˆçš„ç´¢å¼•æ–‡ä»¶ä¸­ï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œå¦‚æœè·¯å¾„ä¸­åŒ…å«ç©ºæ ¼cscopeä¼šæ— æ³•è¯†åˆ«æ­£ç¡®è·¯å¾„ï¼Œæ‰€ä»¥éœ€è¦ç”¨sedå‘½ä»¤æ·»åŠ åŒå¼•å·è¿›è¡Œå¤„ç†ï¼Œè€Œctagsè¯»å–ç´¢å¼•æ–‡ä»¶æ—¶ä¼šè‡ªåŠ¨æ·»åŠ åŒå¼•å·æ‰€ä»¥åº”è¯¥åœ¨sedå¤„ç†ç´¢å¼•æ–‡ä»¶å‰å…ˆå»ºç«‹ctagsæ•°æ®åº“ã€‚</p>

<p>ä¸Šè¿°è¿‡ç¨‹å¯ä»¥shellè„šæœ¬çš„æ–¹å¼å®ç°ã€‚</p>

<h2 id="shellè„šæœ¬">shellè„šæœ¬</h2>

<p>æœ€ç»ˆè„šæœ¬å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><span class="cp">#!/bin/bash
</span><span class="cp"></span>
list_sources<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&#34;---&gt; Listing sources...&#34;</span>
	
    find	<span class="s2">&#34;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/toolchains/gnu_arm/4.9_2015q3/arm-none-eabi/include&#34;</span> 	<span class="se">\
</span><span class="se"></span>			-path <span class="s2">&#34;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/toolchains/gnu_arm/4.9_2015q3/arm-none-eabi/include/c++&#34;</span> -prune -o	<span class="se">\
</span><span class="se"></span>        	-type f -name <span class="s2">&#34;*.[chsS]&#34;</span> -print &gt; cscope.tmp

	find	<span class="s2">&#34;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/sdks/gecko_sdk_suite/v1.1/platform/emlib/inc&#34;</span>			<span class="se">\
</span><span class="se"></span>			<span class="s2">&#34;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/sdks/gecko_sdk_suite/v1.1/platform/CMSIS/Include&#34;</span>		<span class="se">\
</span><span class="se"></span>			<span class="s2">&#34;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/sdks/gecko_sdk_suite/v1.1/platform/Device/SiliconLabs/EFM32JG1B/Include&#34;</span>	<span class="se">\
</span><span class="se"></span>			<span class="s2">&#34;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/sdks/gecko_sdk_suite/v1.1/hardware/kit/common/bsp&#34;</span>		<span class="se">\
</span><span class="se"></span>			<span class="s2">&#34;/Applications/Simplicity Studio.app/Contents/Eclipse/developer/sdks/gecko_sdk_suite/v1.1/hardware/kit/common/drivers&#34;</span>	<span class="se">\
</span><span class="se"></span>			<span class="s2">&#34;.&#34;</span>	<span class="se">\
</span><span class="se"></span>        	-type f -name <span class="s2">&#34;*.[chsS]&#34;</span> -print &gt;&gt; cscope.tmp
<span class="o">}</span>

create_cscope_db<span class="o">()</span> <span class="o">{</span>
	<span class="c1">#å› ä¸ºç›®å½•ä¸­åŒ…å«ç©ºæ ¼ï¼Œæ‰€ä»¥éœ€è¦å°†ç”Ÿæˆçš„æ–‡ä»¶ç´¢å¼•ä¸­æ¯è¡Œæ–‡ä»¶è·¯å¾„æ”¾åˆ°åŒå¼•å·ä¸­</span>
	sed <span class="s1">&#39;s/^/&#34;/;s/$/&#34;/&#39;</span> cscope.tmp &gt; cscope.files

    <span class="nb">echo</span> <span class="s2">&#34;---&gt; Creating cscope DB...&#34;</span>
    cscope -k -b -q -R -i cscope.files
<span class="o">}</span>

create_ctags_db<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&#34;---&gt; Creating CTags DB...&#34;</span>
    ctags -L cscope.tmp
<span class="o">}</span>

cleanup<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&#34;---&gt; Removing garbage...&#34;</span>
    rm -f cscope.files cscope.tmp
<span class="o">}</span>

list_sources
<span class="c1"># å› ä¸ºctagsè¯»å–æ–‡ä»¶ç´¢å¼•çš„æ—¶å€™ä¼šå¯¹æ¯ä¸€è¡ŒåŠ ä¸Šå¼•å·è§£å†³è·¯å¾„åŒ…å«ç©ºæ ¼çš„é—®é¢˜ï¼Œæ‰€ä»¥å»ºç«‹ctagsåº“åº”è¯¥ç›´æ¥ç”¨åŠ å¼•å·å‰çš„æ–‡ä»¶cscope.tmp</span>
create_ctags_db
create_cscope_db
cleanup</pre></div>
<h2 id="ç»“è¯­">ç»“è¯­</h2>

<p>åœ¨ç›¸åº”çš„å·¥ç¨‹ä¸‹è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå°±ä¼šå»ºç«‹å®Œæ•´æ–‡ä»¶çš„cscopeå’Œctagsç´¢å¼•ï¼Œå°±å¯ä»¥happyåœ°å„ç§è·³è½¬äº†ï¼ŒåŒ…æ‹¬SDKä¸­çš„æºç ã€‚</p>

<p>å› ä¸ºä¸å¯èƒ½å°±åªç”¨åˆ°EFM32è¿™ä¸€ä¸ªMCUå¹³å°ï¼Œæ‰€ä»¥åé‡Œåˆå†™äº†ä¸€ä¸ªè„šæœ¬<a href="https://github.com/smslit/mktags" target="_blank">mktags</a>ï¼Œå…¶è¿˜å¯ä»¥å»ºç«‹Renesaså¹³å°çš„å·¥ç¨‹ç´¢å¼•ï¼Œè¿™é‡ŒåªåŠ äº†è¿™ä¸€ä¸ªï¼Œå…¶å®å¯ä»¥å‚è€ƒåé‡Œå†™çš„è„šæœ¬å¾ˆå®¹æ˜“æ·»åŠ å…¶ä»–å¹³å°çš„ï¼Œåé‡Œå°†å…¶ç½®äº<code>/usr/local/bin</code>ç›®å½•ä¸‹ï¼Œé‡å¯ç»ˆç«¯åå°±å¯ä»¥ä¸ºæ‰€æ¬²ä¸ºçš„æ„å»ºMCUå·¥ç¨‹çš„cscopeå’Œctagsç´¢å¼•äº†ã€‚</p>

<p>mktagså¸®åŠ©ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma">Usage: /usr/local/bin/mktags SUB_COMMAND [MCU_NAME]
1. SUB_COMMAND:
    build: build the cscope database for MCU_NAME
    clean: no need MCU_NAME, clean the old cscope database
    help: no need MCU_NAME, show the help tips
    info: show the infomation of MCU_NAME
2. MCU_NAME:
    rx21a -&gt; renesas RX mcu
    efm32jg -&gt; Silicon labs efm32 mcu
Example:
    /usr/local/bin/mktags build efm32jg
    This can build cscope database at current dir for efm32jg</pre></div>]]></content>
		</item>
		
		<item>
			<title>ubuntu 16.04ä¸‹ç¼–è¯‘å…¨åŠŸèƒ½vim8.0</title>
			<link>https://www.smslit.top/2017/06/15/vim-full-version/</link>
			<pubDate>Thu, 15 Jun 2017 08:24:08 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/06/15/vim-full-version/</guid>
			<description>&lt;p&gt;åé‡Œåˆåˆåˆåœ¨å…¬å¸çš„ç¬”è®°æœ¬ä¸Šå®‰è£…äº†Ubuntuï¼Œå·²ç»æ— æ³•å¿å—windowsä¸‹è¹©è„šçš„vimä½“éªŒï¼Œåœ¨ubuntuä¸‹å°è¯•ä½¿ç”¨ä¸ç³»ç»Ÿå‰ªåˆ‡æ¿çš„äº¤äº’å‘½ä»¤ç»“æœè®©äººå¤±è½å‘€ï¼Œæ‰¾äº†ä¸€å¤§åœˆè¿˜æ˜¯æ²¡æ‰¾åˆ°æ”¯æŒ&lt;code&gt;clipboard&lt;/code&gt;çš„vimï¼Œæ¯…ç„¶å†³ç„¶çš„å†³å®šè‡ªå·±ç¼–è¯‘ä¸€ä¸ªå…¨åŠŸèƒ½çš„vimï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åé‡Œåˆåˆåˆåœ¨å…¬å¸çš„ç¬”è®°æœ¬ä¸Šå®‰è£…äº†Ubuntuï¼Œå·²ç»æ— æ³•å¿å—windowsä¸‹è¹©è„šçš„vimä½“éªŒï¼Œåœ¨ubuntuä¸‹å°è¯•ä½¿ç”¨ä¸ç³»ç»Ÿå‰ªåˆ‡æ¿çš„äº¤äº’å‘½ä»¤ç»“æœè®©äººå¤±è½å‘€ï¼Œæ‰¾äº†ä¸€å¤§åœˆè¿˜æ˜¯æ²¡æ‰¾åˆ°æ”¯æŒ<code>clipboard</code>çš„vimï¼Œæ¯…ç„¶å†³ç„¶çš„å†³å®šè‡ªå·±ç¼–è¯‘ä¸€ä¸ªå…¨åŠŸèƒ½çš„vimï¼</p>

<h2 id="ç¼–è¯‘vim">ç¼–è¯‘vim</h2>

<h3 id="å¸è½½åŸæœ‰çš„æ‰€æœ‰vim">å¸è½½åŸæœ‰çš„æ‰€æœ‰vim</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get remove --purge vim vim-runtime vim-gnome vim-tiny vim-gui-common</code></pre></div>
<div class="tip">
æœ‰å¯èƒ½ä¹‹å‰ä½¿ç”¨checkinstallå®‰è£…äº†vimï¼Œå¯ä»¥é€šè¿‡`dpkg -r vim`å’Œ`sudo rm -rf /usr/local/share/vim /usr/bin/vim`å¸è½½ä¸€ä¸‹è¯•è¯•ï¼
</div>

<h3 id="å®‰è£…ç¼–è¯‘viméœ€è¦çš„ä¾èµ–åŒ…">å®‰è£…ç¼–è¯‘viméœ€è¦çš„ä¾èµ–åŒ…</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install liblua5.1-dev luajit libluajit-5.1 python-dev ruby-dev libperl-dev libncurses5-dev libatk1.0-dev libx11-dev libxpm-dev libxt-dev</code></pre></div>
<h3 id="ä¸‹è½½æºç ">ä¸‹è½½æºç </h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/Downloads
git clone https://github.com/vim/vim
<span class="nb">cd</span> vim
git pull <span class="o">&amp;&amp;</span> git fetch</code></pre></div>
<h3 id="é…ç½®ç¼–è¯‘">é…ç½®ç¼–è¯‘</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">./configure <span class="se">\
</span><span class="se"></span>--enable-multibyte <span class="se">\
</span><span class="se"></span>--enable-perlinterp<span class="o">=</span>dynamic <span class="se">\
</span><span class="se"></span>--enable-rubyinterp<span class="o">=</span>dynamic <span class="se">\
</span><span class="se"></span>--with-ruby-command<span class="o">=</span>/usr/local/bin/ruby <span class="se">\
</span><span class="se"></span>--enable-pythoninterp<span class="o">=</span>dynamic <span class="se">\
</span><span class="se"></span>--with-python-config-dir<span class="o">=</span>/usr/lib/python2.7/config-x86_64-linux-gnu <span class="se">\
</span><span class="se"></span>--enable-python3interp <span class="se">\
</span><span class="se"></span>--with-python3-config-dir<span class="o">=</span>/usr/lib/python3.5/config-3.5m-x86_64-linux-gnu <span class="se">\
</span><span class="se"></span>--enable-luainterp <span class="se">\
</span><span class="se"></span>--with-luajit <span class="se">\
</span><span class="se"></span>--enable-cscope <span class="se">\
</span><span class="se"></span>--enable-gui<span class="o">=</span>auto <span class="se">\
</span><span class="se"></span>--with-features<span class="o">=</span>huge <span class="se">\
</span><span class="se"></span>--with-x <span class="se">\
</span><span class="se"></span>--enable-fontset <span class="se">\
</span><span class="se"></span>--enable-largefile <span class="se">\
</span><span class="se"></span>--disable-netbeans <span class="se">\
</span><span class="se"></span>--with-compiledby<span class="o">=</span><span class="s2">&#34;yourname&#34;</span> <span class="se">\
</span><span class="se"></span>--enable-fail-if-missing</code></pre></div>
<h3 id="ç¼–è¯‘å¹¶å®‰è£…">ç¼–è¯‘å¹¶å®‰è£…</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">make <span class="o">&amp;&amp;</span> sudo make install</code></pre></div>
<h3 id="æµ‹è¯•ä¸€ä¸‹">æµ‹è¯•ä¸€ä¸‹</h3>

<ul>
<li><p>å…ˆçœ‹ä¸€ä¸‹ç‰ˆæœ¬ä¿¡æ¯</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">VIM - Vi IMproved <span class="m">8</span>.0 <span class="o">(</span><span class="m">2016</span> Sep <span class="m">12</span>, compiled Jun <span class="m">14</span> <span class="m">2017</span> <span class="m">19</span>:00:28<span class="o">)</span>
åŒ…å«è¡¥ä¸: <span class="m">1</span>-642
ç¼–è¯‘è€… yourname
å·¨å‹ç‰ˆæœ¬ å¸¦ GTK2 å›¾å½¢ç•Œé¢ã€‚
  å¯ä½¿ç”¨<span class="o">(</span>+<span class="o">)</span>ä¸ä¸å¯ä½¿ç”¨<span class="o">(</span>-<span class="o">)</span>çš„åŠŸèƒ½:
+acl             +file_in_path    +mouse_sgr       +tag_old_static
+arabic          +find_in_path    -mouse_sysmouse  -tag_any_white
+autocmd         +float           +mouse_urxvt     -tcl
+balloon_eval    +folding         +mouse_xterm     +termguicolors
+browse          -footer          +multi_byte      +terminfo
++builtin_terms  +fork<span class="o">()</span>          +multi_lang      +termresponse
+byte_offset     +gettext         -mzscheme        +textobjects
+channel         -hangul_input    -netbeans_intg   +timers
+cindent         +iconv           +num64           +title
+clientserver    +insert_expand   +packages        +toolbar
+clipboard       +job             +path_extra      +user_commands
+cmdline_compl   +jumplist        +perl/dyn        +vertsplit
+cmdline_hist    +keymap          +persistent_undo +virtualedit
+cmdline_info    +lambda          +postscript      +visual
+comments        +langmap         +printer         +visualextra
+conceal         +libcall         +profile         +viminfo
+cryptv          +linebreak       +python/dyn      +vreplace
+cscope          +lispindent      +python3/dyn     +wildignore
+cursorbind      +listcmds        +quickfix        +wildmenu
+cursorshape     +localmap        +reltime         +windows
+dialog_con_gui  +lua             +rightleft       +writebackup
+diff            +menu            +ruby/dyn        +X11
+digraphs        +mksession       +scrollbind      -xfontset
+dnd             +modify_fname    +signs           +xim
-ebcdic          +mouse           +smartindent     +xpm
+emacs_tags      +mouseshape      +startuptime     +xsmp_interact
+eval            +mouse_dec       +statusline      +xterm_clipboard
+ex_extra        -mouse_gpm       -sun_workshop    -xterm_save
+extra_search    -mouse_jsbterm   +syntax          
+farsi           +mouse_netterm   +tag_binary      
     ç³»ç»Ÿ vimrc æ–‡ä»¶: <span class="s2">&#34;</span><span class="nv">$VIM</span><span class="s2">/vimrc&#34;</span>
     ç”¨æˆ· vimrc æ–‡ä»¶: <span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.vimrc&#34;</span>
 ç¬¬äºŒç”¨æˆ· vimrc æ–‡ä»¶: <span class="s2">&#34;~/.vim/vimrc&#34;</span>
      ç”¨æˆ· exrc æ–‡ä»¶: <span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.exrc&#34;</span>
    ç³»ç»Ÿ gvimrc æ–‡ä»¶: <span class="s2">&#34;</span><span class="nv">$VIM</span><span class="s2">/gvimrc&#34;</span>
    ç”¨æˆ· gvimrc æ–‡ä»¶: <span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.gvimrc&#34;</span>
ç¬¬äºŒç”¨æˆ· gvimrc æ–‡ä»¶: <span class="s2">&#34;~/.vim/gvimrc&#34;</span>
       defaults file: <span class="s2">&#34;</span><span class="nv">$VIMRUNTIME</span><span class="s2">/defaults.vim&#34;</span>
        ç³»ç»Ÿèœå•æ–‡ä»¶: <span class="s2">&#34;</span><span class="nv">$VIMRUNTIME</span><span class="s2">/menu.vim&#34;</span>
         <span class="nv">$VIM</span> é¢„è®¾å€¼: <span class="s2">&#34;/usr/local/share/vim&#34;</span>
ç¼–è¯‘æ–¹å¼: gcc -c -I. -Iproto -DHAVE_CONFIG_H -DFEAT_GUI_GTK  -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/gio-unix-2.0/ -I/usr/include/cairo -I/usr/include/pango-1.0 -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pixman-1 -I/usr/include/libpng12 -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libpng12 -I/usr/include/pango-1.0 -I/usr/include/harfbuzz -I/usr/include/pango-1.0 -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/freetype2   -g -O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE<span class="o">=</span><span class="m">1</span>       
é“¾æ¥æ–¹å¼: gcc   -L. -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -fstack-protector -rdynamic -Wl,-export-dynamic -Wl,-E   -L/usr/local/lib -Wl,--as-needed -o vim   -lgtk-x11-2.0 -lgdk-x11-2.0 -lpangocairo-1.0 -latk-1.0 -lcairo -lgdk_pixbuf-2.0 -lgio-2.0 -lpangoft2-1.0 -lpango-1.0 -lgobject-2.0 -lglib-2.0 -lfontconfig -lfreetype -lSM -lICE -lXpm -lXt -lX11 -lXdmcp -lSM -lICE  -lm -ltinfo -lnsl  -lselinux   -ldl  -L/usr/lib/x86_64-linux-gnu -lluajit-5.1 -Wl,-E  -fstack-protector-strong -L/usr/local/lib  -L/usr/lib/x86_64-linux-gnu/perl/5.22/CORE -lperl -ldl -lm -lpthread -lcrypt</code></pre></div>
<p>è¯•äº†ä¸€ä¸‹å¯ä»¥ç”¨<code>+</code>å’Œ<code>*</code>å¯„å­˜å™¨äº†ã€‚</p></li>
</ul>

<h2 id="æ‰“åŒ…vimçš„debåŒ…">æ‰“åŒ…vimçš„debåŒ…</h2>

<p>å¯ä»¥ä½¿ç”¨checkinstallå·¥å…·å¯¹ç¼–è¯‘çš„vimè¿›è¡Œæ‰“åŒ…ç”Ÿæˆdebå®‰è£…åŒ…ï¼Œæ–¹ä¾¿ä»¥åç›´æ¥å®‰è£…ã€‚</p>

<h3 id="å®‰è£…checkinstall">å®‰è£…checkinstall</h3>
<div class="highlight"><pre class="chroma">sudo apt-get install</pre></div>
<h3 id="ç”ŸæˆdebåŒ…">ç”ŸæˆdebåŒ…</h3>
<div class="highlight"><pre class="chroma">cd vim
sudo checkinstall</pre></div>
<p><a href="https://pan.baidu.com/s/1slDFMHJ" target="_blank">ç‚¹æˆ‘</a>ä¸‹è½½åé‡Œç¼–è¯‘çš„å·¨å‹ç‰ˆæœ¬vimå®‰è£…åŒ…ï¼Œå˜å˜ï¼å¯†ç : <code>vhdd</code></p>]]></content>
		</item>
		
		<item>
			<title>macOSå‡çº§åˆ°12.5åjupyterä¸èƒ½è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</title>
			<link>https://www.smslit.top/2017/06/05/jupyter-notebook-not-auto-open-webpage/</link>
			<pubDate>Mon, 05 Jun 2017 14:00:13 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/06/05/jupyter-notebook-not-auto-open-webpage/</guid>
			<description>&lt;p&gt;å‡çº§äº†macOSåä¸€ç›´ä¹Ÿæ²¡æœ‰ä½¿ç”¨&lt;strong&gt;jupyter notebook&lt;/strong&gt;ï¼Œæ˜¨å¤©ä½¿ç”¨äº†å‘ç°ç«Ÿç„¶ä¸èƒ½è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨äº†ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å‡çº§äº†macOSåä¸€ç›´ä¹Ÿæ²¡æœ‰ä½¿ç”¨<strong>jupyter notebook</strong>ï¼Œæ˜¨å¤©ä½¿ç”¨äº†å‘ç°ç«Ÿç„¶ä¸èƒ½è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨äº†ã€‚</p>

<p>ç»ˆç«¯ä¸‹è°ƒç”¨<strong>jupyter notebook</strong>ï¼š</p>
<div class="highlight"><pre class="chroma">âœ  LearnPythonNotebook git:(master) âœ— jupyter notebook
zsh: /usr/local/bin/jupyter: bad interpreter: /usr/local/opt/python/bin/python2.7: no such file or directory
[I 13:58:51.602 NotebookApp] Serving notebooks from local directory: /Users/smslit/Desktop/LearnPythonNotebook
[I 13:58:51.602 NotebookApp] 0 active kernels
[I 13:58:51.602 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/?token=f6ca93231d4791de0dd64749e7f2fd62a50e55fc01456716
[I 13:58:51.602 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 13:58:51.606 NotebookApp]

    Copy/paste this URL into your browser when you connect for the first time,
    to login with a token:
        http://localhost:8888/?token=f6ca93231d4791de0dd64749e7f2fd62a50e55fc01456716
0:97: execution error: â€œ&#34;http://localhost:8888/tree?token=50b06d86ad89e16f44b101656e1b3aec168231dd00b143a4&#34;â€ä¸ç†è§£â€œopen locationâ€ä¿¡æ¯ã€‚ (-1708)</pre></div>
<p>é—®äº†ä¸€ä¸‹æˆ‘ä»¬çš„å“¥(è°·æ­Œ)ï¼Œæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼Œåœ¨<code>~/.jupyter</code>ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶<code>jupyter_notebook_config.py</code>ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma">c.NotebookApp.browser = u&#39;Safari&#39;
c.NotebookApp.token = &#39;&#39;
c.NotebookApp.password = &#39;&#39;</pre></div>
<p>é‡æ–°å¯åŠ¨ä¸€ä¸‹<strong>jupyter notebook</strong>:</p>
<div class="highlight"><pre class="chroma">âœ  LearnPythonNotebook git:(master) âœ— jupyter notebook
zsh: /usr/local/bin/jupyter: bad interpreter: /usr/local/opt/python/bin/python2.7: no such file or directory
[W 14:19:57.878 NotebookApp] All authentication is disabled.  Anyone who can connect to this server will be able to run code.
[I 14:19:57.888 NotebookApp] Serving notebooks from local directory: /Users/smslit/Desktop/LearnPythonNotebook
[I 14:19:57.888 NotebookApp] 0 active kernels
[I 14:19:57.888 NotebookApp] The Jupyter Notebook is running at: http://localhost:8888/
[I 14:19:57.888 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</pre></div>
<p>å¯ä»¥è‡ªåŠ¨æ‰“å¼€safariäº†ï¼Œ<em>peaceï¼</em></p>]]></content>
		</item>
		
		<item>
			<title>pythonä¹‹çˆ¶çš„codingç¦…å¿µ</title>
			<link>https://www.smslit.top/2017/06/02/python-coding-style/</link>
			<pubDate>Fri, 02 Jun 2017 22:39:10 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/06/02/python-coding-style/</guid>
			<description>&lt;p&gt;æƒ…æ€€ï¼Œæ˜¯ä¸€ä¸ªæ‘¸ä¸åˆ°è§ä¸ç€çš„ä¸œè¥¿ï¼ç ä»£ç ç –æ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥æœ‰è‡ªå·±çš„æƒ…æ€€ï¼Œpythonä¹‹çˆ¶è¡¨è¾¾äº†pythonä¹‹ç¦…ï¼Œè¿™åº”è¯¥ä¹Ÿæ˜¯ä¸€ç§æƒ…æ€€å§ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æƒ…æ€€ï¼Œæ˜¯ä¸€ä¸ªæ‘¸ä¸åˆ°è§ä¸ç€çš„ä¸œè¥¿ï¼ç ä»£ç ç –æ˜¯ä¸æ˜¯ä¹Ÿåº”è¯¥æœ‰è‡ªå·±çš„æƒ…æ€€ï¼Œpythonä¹‹çˆ¶è¡¨è¾¾äº†pythonä¹‹ç¦…ï¼Œè¿™åº”è¯¥ä¹Ÿæ˜¯ä¸€ç§æƒ…æ€€å§ï¼</p>

<div class="highlight"><pre class="chroma">âœ  smslit python
Python 2.7.10 (default, Feb  7 2017, 00:08:15)
[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)] on darwin
Type &#34;help&#34;, &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.
&gt;&gt;&gt; import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
Flat is better than nested.
Sparse is better than dense.
Readability counts.
Special cases aren&#39;t special enough to break the rules.
Although practicality beats purity.
Errors should never pass silently.
Unless explicitly silenced.
In the face of ambiguity, refuse the temptation to guess.
There should be one-- and preferably only one --obvious way to do it.
Although that way may not be obvious at first unless you&#39;re Dutch.
Now is better than never.
Although never is often better than *right* now.
If the implementation is hard to explain, it&#39;s a bad idea.
If the implementation is easy to explain, it may be a good idea.
Namespaces are one honking great idea -- let&#39;s do more of those!</pre></div>
<p>æœ‰é«˜äººç¿»è¯‘äº†ä¸ªä¸‰å­—ç»ï¼Œå‰å®³äº†ï¼š</p>
<div class="highlight"><pre class="chroma">The Zen of Python, 
è›‡å®—ä¸‰å­—ç» 
 
ä½œè€…ï¼šTim Peters 
ç¿»è¯‘ï¼šå…ƒåˆ› 
 
 
Beautiful is better than ugly. 
ç¾èƒœä¸‘ 
Explicit is better than implicit. 
æ˜èƒœæš— 
Simple is better than complex. 
ç®€èƒœå¤ 
Complex is better than complicated. 
å¤èƒœæ‚ 
Flat is better than nested. 
æµ…èƒœæ·± 
Sparse is better than dense. 
ç–èƒœå¯† 
Readability counts. 
è¾è¾¾æ„ 
Special cases aren&#39;t special enough to break the rules. 
ä¸é€¾çŸ© 
Although practicality beats purity. 
å¼ƒè‡³æ¸… 
Errors should never pass silently. 
æ— é˜´å·® 
Unless explicitly silenced. 
æœ‰é˜³é”™ 
In the face of ambiguity, refuse the temptation to guess. 
æ‹’ç–‘æ•° 
There should be one-- and preferably only one --obvious way to do it. 
æ±‚å®Œä¸€ 
Although that way may not be obvious at first unless you&#39;re Dutch. 
è™½ä¸è‡³ï¼Œå‘å¾€ä¹‹ 
Now is better than never. 
æ•äºè¡Œ 
Although never is often better than *right* now. 
æˆ’è½æ’ 
If the implementation is hard to explain, it&#39;s a bad idea. 
å·®éš¾è¨€ 
If the implementation is easy to explain, it may be a good idea. 
å¥½æ˜“è¯´ 
Namespaces are one honking great idea -- let&#39;s do more of those! 
æ¯å¸ˆå‡ºï¼Œå¤šæœ‰å</pre></div>]]></content>
		</item>
		
		<item>
			<title>å¼€å¯platformioä¹‹æ—…</title>
			<link>https://www.smslit.top/2017/05/20/platformio-start/</link>
			<pubDate>Sat, 20 May 2017 19:59:43 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/05/20/platformio-start/</guid>
			<description>&lt;p&gt;åé‡Œè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢ç”¨ç»ˆç«¯è§£å†³é—®é¢˜çš„ï¼Œåœ¨æŸä¸ª&lt;a href=&#34;https://www.hexcrow.org&#34; target=&#34;_blank&#34;&gt;å°ä¼™ä¼´&lt;/a&gt;èº«ä¸Šå­¦åˆ°äº†äº›&lt;a href=&#34;http://www.vim.org&#34; target=&#34;_blank&#34;&gt;vim&lt;/a&gt;ç¥æŠ€ï¼Œè™½ç„¶åé‡Œçš„æŠ€æœ¯ç°åœ¨å¾ˆèœï¼Œä½†åé‡Œè¿˜æ˜¯æœ‰è¿½æ±‚çš„ï¼æ¯”å¦‚åé‡Œå¸Œæœ›èƒ½åœ¨ç»ˆç«¯ä¸‹è¿›è¡ŒåµŒå…¥å¼å¼€å‘å·¥ä½œï¼Œå“ˆå“ˆï¼å¹³å¸¸ä¼šä½¿ç”¨&lt;code&gt;arduino&lt;/code&gt;ï¼Œæœ€è¿‘è¿™äº›å¤©åˆåœ¨æ‰¾vimæ’ä»¶ï¼Œä½†åŸºæœ¬ä¸Šå¹´ä¹…ä¸æ›´ï¼Œè·Ÿä¸ä¸ŠArduinoç‰ˆæœ¬çš„æ›´æ–°ï¼è½¬æ¢æ€è·¯ï¼Œç”¨bingæœç´¢äº†æ”¯æŒ&lt;code&gt;Arduino&lt;/code&gt;å¼€å‘çš„CLIï¼Œæ²¡æƒ³åˆ°å°±æ‰¾åˆ°äº†æ–‡ç« ä¸»è§’&lt;a href=&#34;http://platformio.org&#34; target=&#34;_blank&#34;&gt;platformio&lt;/a&gt;ï¼Œå®ƒä¸è¦å¤ªå¼ºå¤§ï¼Œç«Ÿç„¶æ”¯æŒå¾ˆå¤šå¹³å°å’Œæ¿å­çš„åµŒå…¥å¼å¼€å‘ï¼Œwonderfulï¼Œæ›´é‡è¦çš„æ˜¯è·¨å¹³å°ç‰¹æ€§ï¼Œwindows\macOS\linux(+arm)ï¼Œç®€ç›´äº†ï¼ç‰¹æ­¤åˆ†äº«ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åé‡Œè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢ç”¨ç»ˆç«¯è§£å†³é—®é¢˜çš„ï¼Œåœ¨æŸä¸ª<a href="https://www.hexcrow.org" target="_blank">å°ä¼™ä¼´</a>èº«ä¸Šå­¦åˆ°äº†äº›<a href="http://www.vim.org" target="_blank">vim</a>ç¥æŠ€ï¼Œè™½ç„¶åé‡Œçš„æŠ€æœ¯ç°åœ¨å¾ˆèœï¼Œä½†åé‡Œè¿˜æ˜¯æœ‰è¿½æ±‚çš„ï¼æ¯”å¦‚åé‡Œå¸Œæœ›èƒ½åœ¨ç»ˆç«¯ä¸‹è¿›è¡ŒåµŒå…¥å¼å¼€å‘å·¥ä½œï¼Œå“ˆå“ˆï¼å¹³å¸¸ä¼šä½¿ç”¨<code>arduino</code>ï¼Œæœ€è¿‘è¿™äº›å¤©åˆåœ¨æ‰¾vimæ’ä»¶ï¼Œä½†åŸºæœ¬ä¸Šå¹´ä¹…ä¸æ›´ï¼Œè·Ÿä¸ä¸ŠArduinoç‰ˆæœ¬çš„æ›´æ–°ï¼è½¬æ¢æ€è·¯ï¼Œç”¨bingæœç´¢äº†æ”¯æŒ<code>Arduino</code>å¼€å‘çš„CLIï¼Œæ²¡æƒ³åˆ°å°±æ‰¾åˆ°äº†æ–‡ç« ä¸»è§’<a href="http://platformio.org" target="_blank">platformio</a>ï¼Œå®ƒä¸è¦å¤ªå¼ºå¤§ï¼Œç«Ÿç„¶æ”¯æŒå¾ˆå¤šå¹³å°å’Œæ¿å­çš„åµŒå…¥å¼å¼€å‘ï¼Œwonderfulï¼Œæ›´é‡è¦çš„æ˜¯è·¨å¹³å°ç‰¹æ€§ï¼Œwindows\macOS\linux(+arm)ï¼Œç®€ç›´äº†ï¼ç‰¹æ­¤åˆ†äº«ï¼</p>

<p>çœ‹å›¾æ„Ÿå—ä¸€ä¸‹æ”¯æŒçš„MCUå¹³å°ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/5xjjq.png" alt="æ”¯æŒçš„MCUå‚å•†" /></p>

<blockquote>
<p>PlatformIO is an open source ecosystem for IoT development. Cross-platform build system. Continuous and IDE integration. Arduino and ARM mbed compatible</p>
</blockquote>

<p><code>platformio</code>æä¾›çš„æ˜¯ä¸€ä¸ªåµŒå…¥å¼å¹³å°å¼€å‘çš„æ„å»ºç³»ç»Ÿå’Œå¼€å‘ç¯å¢ƒï¼Œå®ƒä¼šç®¡ç†ä½ ä½¿ç”¨åˆ°çš„ç¼–è¯‘è¿å·¥å…·ã€è°ƒè¯•å™¨å’Œä¸‹è½½å·¥å…·ç­‰ï¼Œä¸éœ€è¦è´¹å¿ƒè‡ªå·±å»æ‰¾ç„¶åè‰°éš¾æ­å»ºå„ç§MCUçš„å¼€å‘ç¯å¢ƒäº†ï¼ŒçœŸçš„éå¸¸æ–¹ä¾¿ï¼</p>

<h3 id="å®‰è£…">å®‰è£…</h3>

<p><code>platformio</code>æä¾›å¯è§†åŒ–çš„IDEï¼Œä¹Ÿæä¾›CLIï¼ŒCLIå°±æ˜¯åé‡Œéœ€è¦çš„<code>Platformio Core</code>ï¼Œé¦–å…ˆéœ€è¦<a href="http://docs.platformio.org/en/latest/installation.html" target="_blank">å®‰è£…</a>ï¼ŒmacOSä¸‹éå¸¸ç®€å•ï¼Œä½¿ç”¨homebrewå°±å¯ä»¥å®‰è£…ã€‚</p>
<div class="highlight"><pre class="chroma">brew install platformio</pre></div>
<p>å®‰è£…å®Œï¼Œç»ˆç«¯é‡å¯ä¸€ä¸‹å°±å¯ä»¥è°ƒå‡º<code>platformio</code>å‘½ä»¤ï¼Œè¿˜æœ‰ä¸€ä¸ªaliaså‘½ä»¤æ˜¯<code>pio</code>ï¼Œæ‰§è¡Œä¸€ä¸‹helpæ„Ÿå—ä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma">âœ  play pio --help
Usage: pio [OPTIONS] COMMAND [ARGS]...

Options:
  --version          Show the version and exit.
  -f, --force        Force to accept any confirmation prompts.
  -c, --caller TEXT  Caller ID (service).
  -h, --help         Show this message and exit.

Commands:
  account   Manage PIO Account
  boards    Embedded Board Explorer
  ci        Continuous Integration
  device    Monitor device or list existing
  init      Initialize PlatformIO project or update existing
  lib       Library Manager
  platform  Platform Manager
  remote    PIO Remote
  run       Process project environments
  settings  Manage PlatformIO settings
  test      Local Unit Testing
  update    Update installed platforms, packages and libraries
  upgrade   Upgrade PlatformIO to the latest version
âœ  play pio --version
PlatformIO, version 3.3.0</pre></div>
<h3 id="ä»ä¸€ä¸ªarduinoç‚¹ç¯å¼€å¯ä½¿ç”¨æ—…ç¨‹">ä»ä¸€ä¸ªArduinoç‚¹ç¯å¼€å¯ä½¿ç”¨æ—…ç¨‹</h3>

<p>å…¶å®æ­¤æ—¶æ­¤åˆ»å¯ä»¥æŠŠArduino IDEå¸è½½æ‰äº†ï¼Œå“ˆå“ˆï¼ä¸‹é¢å¯ä»¥è·Ÿæˆ‘ç®€å•èµ°ä¸€ä¸ª <code>Arduino UNO</code> ä¾‹ç¨‹çš„å¼€å‘è¿‡ç¨‹ã€‚</p>

<h4 id="æŸ¥çœ‹-platformio-æ”¯æŒçš„å¼€å‘æ¿">æŸ¥çœ‹<code>platformio</code>æ”¯æŒçš„å¼€å‘æ¿</h4>
<div class="highlight"><pre class="chroma">pio boards</pre></div>
<p>è¿™æ ·å°±ä¼šåˆ—å‡ºå½“å‰æ‰€æ”¯æŒçš„å¼€å‘æ¿ï¼Œç›®å‰åº”è¯¥æ˜¯200å¤šæ¬¾ï¼Œå®ƒä»¬æŒ‰ç…§ç¡¬ä»¶å¹³å°æˆ–MCUè¿›è¡Œåˆ†ç±»ï¼Œå¯ä»¥çœ‹åˆ°å…¶ä¸­Arduinoå®˜æ–¹å¼€å‘æ¿ã€‚å…¶ä¸­<code>ID</code>ä¸€åˆ—åœ¨ä½¿ç”¨å‘½ä»¤çš„æ—¶å€™ï¼Œç”¨<code>ID</code>ç”¨æ¥è¡¨ç¤ºä¸åŒå¼€å‘æ¿ã€‚å…¶ä¸­æˆ‘ä»¬è¦å®éªŒçš„ <code>Arduino UNO</code> å¯¹åº”çš„æ˜¯ <code>uno</code>ã€‚</p>

<h4 id="åˆå§‹åŒ–blinkyå·¥ç¨‹">åˆå§‹åŒ–blinkyå·¥ç¨‹</h4>

<p>åœ¨è‡ªå·±æƒ³è¦çš„ç›®å½•ä¸‹åˆ›å»ºblinkyç›®å½•ï¼Œå¹¶è¿›å…¥æ­¤ç›®å½•</p>
<div class="highlight"><pre class="chroma">mkdir blinky &amp;&amp; cd blinky</pre></div>
<p>åˆå§‹åŒ–<code>uno</code>å·¥ç¨‹</p>
<div class="highlight"><pre class="chroma">pio init --board uno</pre></div>
<p>æ­£å¸¸çš„è¯å°±ç”Ÿæˆäº†å·¥ç¨‹ç›®å½•å’Œæ–‡ä»¶å¦‚ä¸‹</p>
<div class="highlight"><pre class="chroma">.
â”œâ”€â”€ lib
â”‚Â Â  â””â”€â”€ readme.txt
â”œâ”€â”€ platformio.ini
â””â”€â”€ src
	â””â”€â”€ main.cpp</pre></div>
<p>å…¶ä¸­<code>platformio.ini</code>å°±æ˜¯é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç‚¹<a href="http://docs.platformio.org/en/latest/projectconf.html" target="_blank">æˆ‘</a>äº†è§£æ›´æ”¹é…ç½®ç›¸å…³çš„å†…å®¹ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦æ›´æ”¹ï¼Œä¿æŒé»˜è®¤å°±å¥½ã€‚<code>lib</code>ä»¥åç”¨æ¥ä¿å­˜ä½¿ç”¨çš„åº“æ–‡ä»¶ï¼Œé»˜è®¤æ²¡æœ‰æ–‡ä»¶ï¼Œè€Œ<code>src</code>ä¸‹åŒ…å«äº†å·¥ç¨‹æºç ï¼Œè‡ªåŠ¨ç”Ÿæˆäº†<code>main.cpp</code>ï¼Œå†…å®¹å¦‚ä¸‹</p>
<div class="highlight"><pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cm">/**
</span><span class="cm"> * Blink
</span><span class="cm"> *
</span><span class="cm"> * Turns on an LED on for one second,
</span><span class="cm"> * then off for one second, repeatedly.
</span><span class="cm"> */</span>
<span class="cp">#include</span> <span class="cpf">&#34;Arduino.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#ifndef LED_BUILTIN
</span><span class="cp">#define LED_BUILTIN 13
</span><span class="cp">#endif
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span>
<span class="p">{</span>
	<span class="c1">// initialize LED digital pin as an output.
</span><span class="c1"></span>	<span class="n">pinMode</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
<span class="p">{</span>
	<span class="c1">// turn the LED on (HIGH is the voltage level)
</span><span class="c1"></span>	<span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>

	<span class="c1">// wait for a second
</span><span class="c1"></span>	<span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>

	<span class="c1">// turn the LED off by making the voltage LOW
</span><span class="c1"></span>	<span class="n">digitalWrite</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>

	<span class="c1">// wait for a second
</span><span class="c1"></span>	<span class="n">delay</span><span class="p">(</span><span class="mi">900</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="ç¼–è¯‘å·¥ç¨‹">ç¼–è¯‘å·¥ç¨‹</h4>

<p>å¯ä»¥ä½¿ç”¨<code>run</code>å‘½ä»¤è¿›è¡Œç¼–è¯‘å’Œä¸Šä¼ ç¨‹åºï¼Œæ‰§è¡Œ</p>
<div class="highlight"><pre class="chroma">pio run</pre></div>
<p><code>platformio</code>ä¼šè‡ªåŠ¨ä¸‹è½½å¯¹åº”å¼€å‘æ¿çš„äº¤å‰ç¼–è¯‘é“¾å·¥å…·ã€å·¥ç¨‹æ¡†æ¶ç­‰ï¼Œ<code>Arduino UNO</code>å¯¹åº”çš„å°±æ˜¯avrçš„ç›¸å…³CLIå¼€å‘å·¥å…·ï¼Œä¸‹è½½å®Œæˆåå°±ä¼šè‡ªåŠ¨ç¼–è¯‘äº†ã€‚</p>

<h4 id="ä¸Šä¼ ç¨‹åº">ä¸Šä¼ ç¨‹åº</h4>

<p>ç¨‹åºç¼–è¯‘å®Œæˆåï¼Œéœ€è¦å°†ç¨‹åºä¸Šä¼ åˆ°å¼€å‘æ¿ï¼Œæ‰§è¡Œ</p>
<div class="highlight"><pre class="chroma">pio run -t upload</pre></div>
<p>ç‚¹<a href="http://docs.platformio.org/en/latest/userguide/cmd_run.html" target="_blank">æˆ‘</a>äº†è§£æ›´å¤šå…³äº<code>run</code>å‘½ä»¤çš„ä½¿ç”¨ï¼Œ<code>-t</code> ç”¨æ¥æŒ‡å®šåŠŸèƒ½ï¼Œæ¯”å¦‚è¿™é‡Œçš„<code>upload</code>ï¼Œå› ä¸ºç¼ºå°‘å·¥å…·ï¼Œæ‰€ä»¥<code>platformio</code>ä¼šè‡ªåŠ¨ä¸‹è½½<code>Arduino UNO</code>ç¨‹åºä¸‹è½½å·¥å…·<code>avrdude</code>ï¼Œä¸‹è½½å®Œæˆåå°±ä¼šå°†ç¨‹åºä¸Šä¼ åˆ°è¿æ¥ç”µè„‘çš„å¼€å‘æ¿ï¼Œè¿™æœŸé—´ä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ä¸²å£è¿›è¡Œä¸Šä¼ ã€‚</p>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>èµ°è¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä¼šå‘ç°<code>platformio</code>æ˜¯ä¸€ä¸ªæ™ºèƒ½çš„å·¥å…·ï¼Œé¦–å…ˆå®ƒä¼šæ ¹æ®ä½ æŒ‡å®šçš„å¼€å‘æ¿åœ¨<code>platformio.ini</code>ç”Ÿæˆé»˜è®¤çš„å¼€å‘æ¿å·¥ç¨‹é…ç½®ï¼Œæ‰§è¡Œç¼–è¯‘å‘½ä»¤åå°±ä¼šè‡ªåŠ¨é€‰æ‹©ç›¸åº”çš„äº¤å‰ç¼–è¯‘å·¥å…·å’Œä¾èµ–å·¥å…·ï¼Œå¦‚æœèµ„æºä¸å¥½è¿˜ä¼šè‡ªåŠ¨æ›´æ¢èµ„æºåœ°å€ï¼Œå°½é‡ä¿è¯å·¥å…·èƒ½å¤Ÿä¸‹è½½å®‰è£…ï¼Œç„¶åå®Œæˆä»£ç ç¼–è¯‘ã€‚å°†ç¨‹åºä¸Šä¼ åˆ°å¼€å‘æ¿æ—¶ï¼Œå®ƒåŒæ ·æ™ºèƒ½çš„ä¸‹è½½å¯¹åº”å¹³å°çš„ä¸Šä¼ å·¥å…·ï¼Œå¹¶å®Œæˆæ™ºèƒ½é€‰æ‹©ä¸²å£ä¸Šä¼ ã€‚å…¶å®ä¸€ä¸ªå·¥ç¨‹è¿˜å¯ä»¥æŒ‡å®šå¤šç§å¼€å‘æ¿ï¼Œè¯¦æƒ…å¯ä»¥ç‚¹<a href="http://docs.platformio.org/en/latest/userguide/cmd_init.html" target="_blank">æˆ‘</a>äº†è§£ã€‚æ€»ä¹‹ï¼Œåé‡Œååˆ†å–œæ¬¢è¿™ä¸ªå·¥å…·ï¼Œå»ºè®®çœ‹åˆ°æœ¬æ–‡çš„å°ä¼™ä¼´å®‰è£…ä½“éªŒä¸€ä¸‹ï¼Œæ— è®ºIDEè¿˜æ˜¯CLIéƒ½ä¸€æ ·ä»¤äººå¿ƒåŠ¨ï¼</p>

<p>åé¢å¦‚æœæœ‰æ—¶é—´ï¼Œåé‡Œè¿˜ä¼šåˆ†äº«ä½¿ç”¨æ„Ÿå—ï¼</p>]]></content>
		</item>
		
		<item>
			<title>å·§åˆç‰¹åˆ«å¤š</title>
			<link>https://www.smslit.top/2017/05/12/coincidental/</link>
			<pubDate>Fri, 12 May 2017 17:30:34 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/05/12/coincidental/</guid>
			<description>&lt;p&gt;2017å¹´æ³¨å®šæ˜¯ä¸€ä¸ªå·§åˆéå¸¸å¤šçš„ä¸€å¹´ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>2017å¹´æ³¨å®šæ˜¯ä¸€ä¸ªå·§åˆéå¸¸å¤šçš„ä¸€å¹´ã€‚</p>

<h3 id="ä¸€ç›´å¤«å¦‡çš„æ—¥å¸¸">ä¸€ç›´å¤«å¦‡çš„æ—¥å¸¸</h3>

<p>æœ‰ä¸€å¤©çŸ¥ä¹ä¸Šçœ‹äº†ä¸€ç¯‡æ–‡ç« ï¼Œæ— æ„é—´å…³æ³¨äº† <code>ä¸€ç›´å¤«å¦‡çš„æ—¥å¸¸</code> å…¬ä¼—å·ï¼Œè¿™ä¸ªå…¬ä¼—å·æ˜¯ä¸“å±äºä¸€å¯¹æƒ…ä¾£ï¼ˆç§¦é©¿ï¼Œæ —ä¹‹ï¼‰ï¼Œä»–ä»¬åˆ†äº«è‡ªå·±çš„æ•…äº‹ä¸æ„Ÿæ‚Ÿï¼Œè¢«ä»–ä»¬çš„å°å¹¸ç¦æ„ŸåŠ¨ï¼Œè›®å–œæ¬¢è¿™ä¸ªå…¬ä¼—å·çš„!</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/7mz1t.jpeg"
         alt="ä¸€ç›´å¤«å¦‡çš„æ—¥å¸¸" width="480px" height="120px"/> 
</figure>


<blockquote>
<p>å®¶ä¹¡ä¸€å—ä¸€åŒ—ï¼Œå­¦æ ¡ä¸€å—ä¸€åŒ—ï¼Œæ —ä¹‹å’Œç§¦é©¿ï¼Œéš”äº†åƒé‡Œï¼Œè¿˜æ˜¯åœ¨åŒ—äº¬ç›¸é‡äº†ã€‚æˆ‘ä»¬æ¯å¤©éƒ½ä¼šå‘å¸ƒä¸€ç¯‡æˆ‘ä»¬ä¹‹é—´çš„æ—¥å¸¸æ•…äº‹ï¼Œäº’é»‘ä¸ºä¸»ï¼Œç‹—ç²®åªå å¾ˆå°çš„æ¯”ä¾‹ï¼Œå•èº«ç‹—ä»¬å¯ä»¥æ”¾å¿ƒè§‚çœ‹~</p>
</blockquote>

<p>å…³æ³¨å…¬ä¼—å·çš„ç¬¬äºŒå¤©çœ‹åˆ°è¿™ç¯‡æ–‡ç« â€”â€”<a href="https://mp.weixin.qq.com/s?__biz=MzA4NTE2MzE2NQ==&amp;mid=2648851737&amp;idx=1&amp;sn=f642934237ec796b01756d535198dcc8&amp;chksm=87cac8ebb0bd41fdb98bcae6ccf3d692afa5e3c479a72ae76c5862da5c5438e222fc47c93dde&amp;scene=42#wechat_redirect" target="_blank">ç¤¼ç‰©çœŸçš„è¦ä¹°è´µçš„å—ï¼Ÿ</a>ï¼Œæˆ‘æƒŠå‘†äº†ï¼Œå…¬ä¼—å·çš„ç”·ä¸»è§’ç§¦é©¿çš„ç”Ÿæ—¥ç«Ÿç„¶ä¸æˆ‘åŒä¸€å¤©ï¼Œæˆ‘å°±å…´å¥‹çš„åœ¨æ–‡ç« ä¸­ç•™è¨€äº†ï¼Œå•ç‹¬ä¹Ÿåœ¨å…¬ä¼—å·ä¸­ç•™è¨€äº†ï¼Œäº†è§£åˆ°ç§¦é©¿ç«Ÿç„¶ä¸æˆ‘ <code>åŒå¹´åŒæœˆåŒæ—¥ç”Ÿ</code> ï¼Œæ— æ„é—´çš„å…¬ä¼—å·è®©æˆ‘æ‰¾åˆ°äº†åŒå¹´åŒæœˆåŒæ—¥ç”Ÿçš„äººï¼Œå¥½ç¥å¥‡ï¼</p>

<h3 id="æ¸©å·çš„ç›¸é‡">æ¸©å·çš„ç›¸é‡</h3>

<p>å‰æ®µæ—¶é—´å‡ºå·®æ¸©å·ï¼Œåˆ°æ¸©å·å°±æ˜¯ä¸­åˆäº†ï¼Œç„¶åæ¥åº”æˆ‘ä»¬çš„è°¢æ€»ï¼Œå…ˆå¸¦æˆ‘ä»¬å»äº†ä»–ä»¬å…¬å¸é™„è¿‘ï¼Œåœ¨æ¸©å·ä¹æ¸…å¸‚æŸ³å¸‚é•‡ï¼Œç„¶åå¸¦æˆ‘å’ŒåŒäº‹å…ˆç®€å•å»åƒç‚¹ï¼Œæˆ‘æƒŠå‘†äº†ï¼Œå»çš„åœ°æ–¹ç«Ÿç„¶æ˜¯ <code>ç”°é‡ä¸­é¤å…</code> ï¼Œè¦çŸ¥é“æˆ‘å°±å«ç”°é‡ï¼</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/4rr3d.png"
         alt="ç”°é‡ä¸­é¤å…" width="480px" height="300px"/> 
</figure>


<p>ä¸‹åˆå¹²å®Œæ´»ï¼Œåœ¨æœªä¸æˆ‘å’ŒåŒäº‹å•†é‡çš„æƒ…å†µä¸‹ï¼Œè°¢æ€»å¸¦æˆ‘ä»¬å»äº†ä¸€ä¸ªåœ°æ–¹å»åƒå®Œé¥­ï¼Œæˆ‘å†ä¸€æ¬¡æƒŠå‘†äº†ï¼Œé‚£ä¸ªåœ°æ–¹å« <code>æ±Ÿå—äººå®¶</code> ï¼Œè¦çŸ¥é“æˆ‘çš„æ°´æœ¨å°±å«æ±Ÿæ¥ ï¼</p>

<figure>
    <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/r1mmq.png"
         alt="æ±Ÿå—äººå®¶" width="480px" height="300px"/> 
</figure>


<p>å°±è¿™æ ·ï¼Œç”°é‡ï¼ˆåé‡Œï¼‰å’Œæ±Ÿæ¥ ï¼ˆæ°´æœ¨ï¼‰åœ¨æŸ³å¸‚é•‡ç›¸é‡äº†ï¼</p>]]></content>
		</item>
		
		<item>
			<title>ä»ç®€å¼€å§‹</title>
			<link>https://www.smslit.top/2017/03/19/simpleStart/</link>
			<pubDate>Sun, 19 Mar 2017 13:07:48 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/03/19/simpleStart/</guid>
			<description>&lt;p&gt;ä»ä»Šå¤©å¼€å§‹åšå®¢æ›´æ¢é¢è²Œï¼Œä½¿ç”¨äº†hexoçš„apolloä¸»é¢˜ï¼ŒçœŸçš„åƒä¸»é¢˜ä½œè€…è¯´çš„ï¼Œåšå®¢åº”è¯¥ä»¥å†…å®¹ä¸ºä¸»ï¼Œæ‰€ä»¥SMSLITè¦ä»ç®€å¼€å§‹äº†ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»ä»Šå¤©å¼€å§‹åšå®¢æ›´æ¢é¢è²Œï¼Œä½¿ç”¨äº†hexoçš„apolloä¸»é¢˜ï¼ŒçœŸçš„åƒä¸»é¢˜ä½œè€…è¯´çš„ï¼Œåšå®¢åº”è¯¥ä»¥å†…å®¹ä¸ºä¸»ï¼Œæ‰€ä»¥SMSLITè¦ä»ç®€å¼€å§‹äº†ï¼</p>

<p>ä»ç°åœ¨å¼€å§‹ï¼ŒSMSLITåº”è¯¥ä¸€ç›´ä¼šæ˜¯ç®€çº¦çš„å½¢æ€ã€‚æˆ‘è¿‡å»è™½ç„¶ä¸€ç›´å´‡å°šç®€çº¦ï¼Œä½†è²Œä¼¼SMSLITå‘ˆç°çš„å½¢å¼è¿‡äºå¤æ‚ï¼Œæ‰€ä»¥ï¼Œæˆ‘æƒ³ä»¥æ­¤æ–‡ä½œä¸ºè§è¯ï¼Œä»¥ååšå®¢å†…å®¹å‘ˆç°å°½é‡ç®€å•ç›´æ¥ï¼Œ<code>5km</code><sup class="footnote-ref" id="fnref:5km"><a href="#fn:5km">0</a></sup>ç²¾åŠ›å¯èƒ½æ›´å¤šæ”¾åœ¨åšå®¢å†…å®¹ä¸Šäº†ï¼Œå†è¯´äº† <code>5km</code> ä¹Ÿè¿˜æœ‰æ›´å¤šè‡ªå·±æƒ³åšçš„äº‹å‘¢ï¼</p>

<p>æ–°çš„åšå®¢ç§»é™¤äº†è¯„è®ºï¼Œå¦‚æœçœŸçš„æƒ³ä¸<code>5km</code>äº¤æµï¼Œä½ ä¼šåœ¨åšå®¢ä¸­æ‰¾åˆ°è”ç³»æ–¹å¼çš„ï¼</p>]]></content>
		</item>
		
		<item>
			<title>Anacondaé—ªé€€</title>
			<link>https://www.smslit.top/2017/03/02/anacondaQuit/</link>
			<pubDate>Thu, 02 Mar 2017 12:13:06 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/03/02/anacondaQuit/</guid>
			<description>&lt;p&gt;æ˜¥èŠ‚å‰ç»ˆäºä¸‹å®šäº†å†³å¿ƒï¼Œåˆ†æœŸä¹°äº†2016æ¬¾çš„ macbook proï¼Œä¹Ÿå°±æ˜¯æ°´æœ¨å£ä¸­çš„â€œåé‡Œçš„å¤§æƒ…äººâ€ï¼Œç¡®å®å¾ˆæ¿€åŠ¨ï¼Œå¾ˆå¼€å¿ƒï¼ä¹‹å‰æœ‰å° mac mini ï¼Œæœ‰åšå¤‡ä»½ï¼Œå½“æ—¶å°†å¤‡ä»½æ¢å¤åˆ°â€œå¤§æƒ…äººâ€äº†ï¼Œä¸€ç›´æ²¡æœ‰ç”¨ Anaconda ï¼Œä»Šå¤©ä¸€ç”¨å‘ç°å¯åŠ¨ç«Ÿç„¶é—ªé€€ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æ˜¥èŠ‚å‰ç»ˆäºä¸‹å®šäº†å†³å¿ƒï¼Œåˆ†æœŸä¹°äº†2016æ¬¾çš„ macbook proï¼Œä¹Ÿå°±æ˜¯æ°´æœ¨å£ä¸­çš„â€œåé‡Œçš„å¤§æƒ…äººâ€ï¼Œç¡®å®å¾ˆæ¿€åŠ¨ï¼Œå¾ˆå¼€å¿ƒï¼ä¹‹å‰æœ‰å° mac mini ï¼Œæœ‰åšå¤‡ä»½ï¼Œå½“æ—¶å°†å¤‡ä»½æ¢å¤åˆ°â€œå¤§æƒ…äººâ€äº†ï¼Œä¸€ç›´æ²¡æœ‰ç”¨ Anaconda ï¼Œä»Šå¤©ä¸€ç”¨å‘ç°å¯åŠ¨ç«Ÿç„¶é—ªé€€ã€‚</p>

<p>ç›®å‰è¿˜ä¸æ€ä¹ˆäº†è§£Anaconda ï¼Œæƒ³ä»¥åç”¨å®ƒæ›¿ä»£matlabè¿›è¡Œç§‘å­¦è®¡ç®—çš„å·¥ä½œï¼Œå’‹å°±ç½¢å·¥äº†å‘¢ï¼Ÿç‚¹å‡»Anaconda navigator å‡ºç°å¯åŠ¨ç•Œé¢ä¸ä¸€ä¼šå„¿å°±é—ªé€€äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/3pgs8.png" alt="anaconda" /></p>

<p>åˆšæ‰å·²ç»è¯´äº†ï¼Œæˆ‘æ˜¯æ¢å¤çš„å¤‡ä»½ï¼Œåº”è¯¥æ˜¯è¿™ä¸ªåŸå› ï¼Œé€ æˆç°ç”¨æˆ·ä¸ä» mac mini æ¢å¤è¿‡æ¥çš„ç”¨æˆ·ç›®å½•ä¸‹anacondaçš„é…ç½®æ–‡ä»¶<code>.continuum</code>å†²çªä¸å…¼å®¹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¾ˆç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯åˆ æ‰è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œè®© Anaconda navigator å¯åŠ¨çš„æ—¶å€™é‡å»ºé…ç½®ã€‚</p>

<p>åˆ æ‰é…ç½®æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo rm -rf .continuum</code></pre></div>
<p>ç„¶åå†é‡æ–°å¯åŠ¨ Anaconda navigator å°±å¯ä»¥äº†ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>vimä¸­æ¢å¤ctrl&#43;z</title>
			<link>https://www.smslit.top/2017/01/13/vim-Ctrl-z/</link>
			<pubDate>Fri, 13 Jan 2017 09:37:56 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/01/13/vim-Ctrl-z/</guid>
			<description>&lt;p&gt;å°±åœ¨åˆšæ‰vimä¸‹ç¼–è¾‘ä¸€ä¸ªæ–‡æœ¬æœ¬æ¥æƒ³æŒ‰ä¸‹&lt;code&gt;shift+zz&lt;/code&gt;æ¥ä¿å­˜æ–‡æœ¬å¹¶é€€å‡ºvimï¼Œæ²¡æƒ³åˆ°åˆæŒ‰æˆäº†&lt;code&gt;ctrl+z&lt;/code&gt;ï¼Œä¹‹å‰ä¸äº†è§£çŠ¶å†µçš„æˆ‘ï¼Œä»¥ä¸ºä¿å­˜äº†ï¼Œä½†æ˜¯å†æ¬¡ç”¨vimæ‰“å¼€è¿™ä¸ªæ–‡æœ¬çš„æ—¶å€™ï¼Œå‘ç°vimä¿å­˜äº†ä¸€ä¸ªå¯¹åº”çš„swpæ–‡ä»¶ï¼Œæ€»ä¼šå‡ºç°ä¸‹é¢çš„æç¤ºï¼Œæˆ‘è¿™æ¬¡å¿æ— å¯å¿äº†ï¼Œå°±æœç´¢äº†è§£äº†ä¸€ä¸‹ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å°±åœ¨åˆšæ‰vimä¸‹ç¼–è¾‘ä¸€ä¸ªæ–‡æœ¬æœ¬æ¥æƒ³æŒ‰ä¸‹<code>shift+zz</code>æ¥ä¿å­˜æ–‡æœ¬å¹¶é€€å‡ºvimï¼Œæ²¡æƒ³åˆ°åˆæŒ‰æˆäº†<code>ctrl+z</code>ï¼Œä¹‹å‰ä¸äº†è§£çŠ¶å†µçš„æˆ‘ï¼Œä»¥ä¸ºä¿å­˜äº†ï¼Œä½†æ˜¯å†æ¬¡ç”¨vimæ‰“å¼€è¿™ä¸ªæ–‡æœ¬çš„æ—¶å€™ï¼Œå‘ç°vimä¿å­˜äº†ä¸€ä¸ªå¯¹åº”çš„swpæ–‡ä»¶ï¼Œæ€»ä¼šå‡ºç°ä¸‹é¢çš„æç¤ºï¼Œæˆ‘è¿™æ¬¡å¿æ— å¯å¿äº†ï¼Œå°±æœç´¢äº†è§£äº†ä¸€ä¸‹ã€‚</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">E325: ATTENTION
Found a swap file by the name <span class="s2">&#34;.vimrc.swp&#34;</span>
          owned by: smslit   dated: Fri Jan <span class="m">13</span> <span class="m">10</span>:27:11 <span class="m">2017</span>
         file name: ~smslit/.vimrc
          modified: no
         user name: smslit   host name: tianyes-Mac-mini.local
        process ID: <span class="m">1110</span> <span class="o">(</span>still running<span class="o">)</span>
While opening file <span class="s2">&#34;.vimrc&#34;</span>
             dated: Sun Nov <span class="m">27</span> <span class="m">16</span>:58:29 <span class="m">2016</span>

<span class="o">(</span><span class="m">1</span><span class="o">)</span> Another program may be editing the same file.  If this is the <span class="k">case</span>,
    be careful not to end up with two different instances of the same
    file when making changes.  Quit, or <span class="k">continue</span> with caution.
<span class="o">(</span><span class="m">2</span><span class="o">)</span> An edit session <span class="k">for</span> this file crashed.
    If this is the <span class="k">case</span>, use <span class="s2">&#34;:recover&#34;</span> or <span class="s2">&#34;vim -r .vimrc&#34;</span>
    to recover the changes <span class="o">(</span>see <span class="s2">&#34;:help recovery&#34;</span><span class="o">)</span>.
    If you did this already, delete the swap file <span class="s2">&#34;.vimrc.swp&#34;</span>
    to avoid this message.

Swap file <span class="s2">&#34;.vimrc.swp&#34;</span> already exists!
<span class="o">[</span>O<span class="o">]</span>pen Read-Only, <span class="o">(</span>E<span class="o">)</span>dit anyway, <span class="o">(</span>R<span class="o">)</span>ecover, <span class="o">(</span>Q<span class="o">)</span>uit, <span class="o">(</span>A<span class="o">)</span>bort:</code></pre></div>
<p>åŸæ¥æ˜¯å› ä¸ºæŠŠç¼–è¾‘è¿™ä¸ªæ–‡ä»¶çš„vimæ¨åˆ°äº†åå°ï¼Œå…¶å®æŒ‰ä¸‹<code>ctrl+z</code>åä¼šæœ‰æç¤ºå¦‚ä¸‹ï¼Œä½†ä¹‹å‰ä¸çŸ¥é“å’‹å›äº‹å„¿ï¼Œå…¶å®ä»”ç»†æƒ³æƒ³ï¼Œå¥½åƒæœ‰ä¸ªå¾ˆå¥½çš„æœ‹å‹å‘Šè¯‰è¿‡æˆ‘è¿™ä¸ªï¼Œæ±—ï¼Œè®°æ€§å˜å·®å¥½ä¸¥é‡ï¼</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  ~ vim .vimrc

<span class="o">[</span><span class="m">1</span><span class="o">]</span>  + <span class="m">1110</span> suspended  vim .vimrc</code></pre></div>
<p>è§£å†³åŠæ³•å¾ˆç®€å•ï¼Œå¯ä»¥å…ˆæŸ¥çœ‹ä¸€ä¸‹åå°æœ‰å•¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  ~ <span class="nb">jobs</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span>  + suspended  vim .vimrc</code></pre></div>
<p>ç„¶åæ‰§è¡Œfgï¼Œå°±èƒ½è·³å›ç¼–è¾‘æ–‡ä»¶çš„vimäº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">âœ  ~ <span class="nb">fg</span>
<span class="o">[</span><span class="m">1</span><span class="o">]</span>  + <span class="m">1110</span> continued  vim .vimrc</code></pre></div>
<p>ä¸ºæ­¤åšäº†åŠ¨æ€å›¾ç‰‡å¯ä»¥çœ‹æ¸…æ“ä½œæµç¨‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/rgp9o.gif" alt="vimCtrlZ" /></p>]]></content>
		</item>
		
		<item>
			<title>è¯—-é—½è¡Œè·¯é‡</title>
			<link>https://www.smslit.top/2017/01/11/peomForFuzhou/</link>
			<pubDate>Wed, 11 Jan 2017 20:19:12 +0800</pubDate>
			
			<guid>https://www.smslit.top/2017/01/11/peomForFuzhou/</guid>
			<description>&lt;p&gt;è¿™å‘¨æœ‰æœºä¼šå»ç¦å»ºå‡ºå·®ï¼ŒçœŸå¿ƒç´¯å‘€ï¼Œæ¯”è¾ƒè€å®çš„æˆ‘ï¼Œæ²¡æœ‰é€®ç€æœºä¼šå‡ºå»ç©ï¼Œåœ¨å‡ºå·®æœŸé—´ï¼Œè”è°ƒçš„æµ‹è¯•éœ€è¦åœ¨ç¦å·å’Œå¦é—¨ä¹‹é—´èµ°åŠ¨ï¼Œéƒ½æ˜¯èµ°é«˜é€Ÿï¼ŒæœŸé—´å› æ‰€è§æ‰€é—»ä¸æ‰€åƒï¼Œè¯—æ€§å¤§å‘äº†ï¼Œå“ˆå“ˆï¼Œåœ¨ä»å¦é—¨åˆ°ç¦å·çš„è·¯ä¸Šé¢˜è¯—ä¸€é¦–ï¼ˆèƒ¡å†™ä¹±é¢˜ï¼‰ï¼Œè§‰å¾—è¿˜æ˜¯æ‰‹å†™æ¯”è¾ƒå¥½ï¼ŒçŒ®ä¸‘ï¼š&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è¿™å‘¨æœ‰æœºä¼šå»ç¦å»ºå‡ºå·®ï¼ŒçœŸå¿ƒç´¯å‘€ï¼Œæ¯”è¾ƒè€å®çš„æˆ‘ï¼Œæ²¡æœ‰é€®ç€æœºä¼šå‡ºå»ç©ï¼Œåœ¨å‡ºå·®æœŸé—´ï¼Œè”è°ƒçš„æµ‹è¯•éœ€è¦åœ¨ç¦å·å’Œå¦é—¨ä¹‹é—´èµ°åŠ¨ï¼Œéƒ½æ˜¯èµ°é«˜é€Ÿï¼ŒæœŸé—´å› æ‰€è§æ‰€é—»ä¸æ‰€åƒï¼Œè¯—æ€§å¤§å‘äº†ï¼Œå“ˆå“ˆï¼Œåœ¨ä»å¦é—¨åˆ°ç¦å·çš„è·¯ä¸Šé¢˜è¯—ä¸€é¦–ï¼ˆèƒ¡å†™ä¹±é¢˜ï¼‰ï¼Œè§‰å¾—è¿˜æ˜¯æ‰‹å†™æ¯”è¾ƒå¥½ï¼ŒçŒ®ä¸‘ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xzsf7.jpg" alt="fuzhou" /></p>]]></content>
		</item>
		
		<item>
			<title>ç¬”å°–ç—•è¿¹-å…¶å®ä¸å¤æ‚</title>
			<link>https://www.smslit.top/2016/12/23/simpleWorld/</link>
			<pubDate>Fri, 23 Dec 2016 22:52:51 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/12/23/simpleWorld/</guid>
			<description>&lt;p&gt;æœ‰çš„æ—¶å€™ï¼Œä¼šå¾ˆçƒ¦æ¼ï¼Œçƒ¦æ¼è¿™ä¸–ç•Œå¦‚æ­¤å¤æ‚ï¼Œæ¸æ¸å‘ç°å¤æ‚çš„äº‹æƒ…ä¹Ÿèƒ½ç®€å•åŒ–ï¼Œå¸Œæœ›è‡ªå·±çœ¼ä¸­çš„ä¸–ç•Œæ…¢æ…¢å˜å¾—ç®€å•ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ‰çš„æ—¶å€™ï¼Œä¼šå¾ˆçƒ¦æ¼ï¼Œçƒ¦æ¼è¿™ä¸–ç•Œå¦‚æ­¤å¤æ‚ï¼Œæ¸æ¸å‘ç°å¤æ‚çš„äº‹æƒ…ä¹Ÿèƒ½ç®€å•åŒ–ï¼Œå¸Œæœ›è‡ªå·±çœ¼ä¸­çš„ä¸–ç•Œæ…¢æ…¢å˜å¾—ç®€å•ï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ow0rb.jpg" alt="simpleWorld" /></p>]]></content>
		</item>
		
		<item>
			<title>Qtå¼€å‘å­¦ä¹ é—®é¢˜è§£å†³ç¬”è®°</title>
			<link>https://www.smslit.top/2016/12/23/Qt-Program-Notes-Develop/</link>
			<pubDate>Fri, 23 Dec 2016 21:23:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/12/23/Qt-Program-Notes-Develop/</guid>
			<description>&lt;p&gt;æœ¬æ–‡ä¸»è¦ç”¨æ¥æ•´ç†å­¦ä¹ Qtå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ï¼Œä¼šæŒç»­æ›´æ–°ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ç”¨æ¥æ•´ç†å­¦ä¹ Qtå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ï¼Œä¼šæŒç»­æ›´æ–°ã€‚</p>

<p>æ›´æ–°è¡¨ï¼š</p>

<table>
<thead>
<tr>
<th>æ—¥æœŸ</th>
<th>æ›´æ–°å†…å®¹</th>
</tr>
</thead>

<tbody>
<tr>
<td>2016-02-27</td>
<td>QtSerialportåº“ä½¿ç”¨æ—¶ç¼–è¯‘é”™è¯¯</td>
</tr>

<tr>
<td>&hellip;</td>
<td>macOSä¸‹ç¨‹åºå›¾æ ‡è®¾ç½®é—®é¢˜</td>
</tr>

<tr>
<td></td>
<td>Linuxä¸‹Qtçš„<code>can't find lGLé—®é¢˜</code></td>
</tr>

<tr>
<td></td>
<td>Linuxä¸‹æ— æ³•å¯åŠ¨Qtå¸®åŠ©é—®é¢˜</td>
</tr>

<tr>
<td>2016-12-27</td>
<td>Linuxä¸‹Qtæ·»åŠ ä¸­æ–‡Fctixè¾“å…¥æ³•æ”¯æŒ</td>
</tr>
</tbody>
</table>

<h3 id="qtserialportåº“ç¼–è¯‘é”™è¯¯">QtSerialportåº“ç¼–è¯‘é”™è¯¯</h3>

<h4 id="ç°è±¡">ç°è±¡</h4>

<p>QtSerialportä½¿ç”¨æ—¶ï¼Œè™½ç„¶åŒ…å«äº†å¤´æ–‡ä»¶ï¼Œä½†ä»ç„¶ä¼šçˆ†å‡ºé”™è¯¯ï¼Œlinuxå’ŒmacOSä¸‹éƒ½ä¼šè¿™æ ·ã€‚</p>

<h5 id="linuxä¸‹">linuxä¸‹</h5>

<p>QtSerialportåº“ç¼–è¯‘é”™è¯¯undefined reference</p>

<p>ç¼–è¯‘é”™è¯¯æç¤ºç±»ä¼¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">C:<span class="se">\U</span>sers<span class="se">\s</span>mslit<span class="se">\D</span>ocuments<span class="se">\w</span>orkspace<span class="se">\Q</span>t<span class="se">\b</span>uild-teatSerial-Desktop_Qt_5_5_0_MinGW_32bit-Debug/../teatSerial/mainwindow.cpp:
<span class="m">24</span>: undefined reference to <span class="sb">`</span> _imp___ZN11QSerialPort11setPortNameERK7QString<span class="s1">&#39;
</span><span class="s1">C:\Users\smslit\Documents\workspace\Qt\build-teatSerial-Desktop_Qt_5_5_0_MinGW_32bit-Debug/../teatSerial/mainwindow.cpp:
</span><span class="s1">25: undefined reference to ` _imp___ZN11QSerialPort9setParityENS_6ParityE&#39;</span>
C:<span class="se">\U</span>sers<span class="se">\s</span>mslit<span class="se">\D</span>ocuments<span class="se">\w</span>orkspace<span class="se">\Q</span>t<span class="se">\b</span>uild-teatSerial-Desktop_Qt_5_5_0_MinGW_32bit-Debug/../teatSerial/mainwindow.cpp:
<span class="m">26</span>: undefined reference to <span class="sb">`</span> _imp___ZN11QSerialPort11setDataBitsENS_8DataBitsE<span class="s1">&#39;
</span><span class="s1">C:\Users\smslit\Documents\workspace\Qt\build-teatSerial-Desktop_Qt_5_5_0_MinGW_32bit-Debug/../teatSerial/mainwindow.cpp:
</span><span class="s1">27: undefined reference to ` _imp___ZN11QSerialPort11setStopBitsENS_8StopBitsE&#39;</span>
C:<span class="se">\U</span>sers<span class="se">\s</span>mslit<span class="se">\D</span>ocuments<span class="se">\w</span>orkspace<span class="se">\Q</span>t<span class="se">\b</span>uild-teatSerial-Desktop_Qt_5_5_0_MinGW_32bit-Debug/../teatSerial/mainwindow.cpp:
<span class="m">28</span>: undefined reference to <span class="sb">`</span> _imp___ZN11QSerialPort17setReadBufferSizeEx<span class="s1">&#39;
</span><span class="s1">C:\Users\smslit\Documents\workspace\Qt\build-teatSerial-Desktop_Qt_5_5_0_MinGW_32bit-Debug/../teatSerial/mainwindow.cpp:
</span><span class="s1">29: undefined reference to ` _imp___ZN11QSerialPort14setFlowControlENS_11FlowControlE&#39;</span></code></pre></div>
<h5 id="macosä¸‹">macOSä¸‹</h5>

<p>ç¼–è¯‘ä¼šæœ‰ç±»ä¼¼æç¤ºå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Undefined symbols <span class="k">for</span> architecture x86_64:
  <span class="s2">&#34;QSerialPort::setBaudRate(int, QFlags&lt;QSerialPort::Direction&gt;)&#34;</span>, referenced from:
      MainWindow::on_openPortButton_clicked<span class="o">()</span> in mainwindow.o
  <span class="s2">&#34;QSerialPort::setDataBits(QSerialPort::DataBits)&#34;</span>, referenced from:
      MainWindow::on_openPortButton_clicked<span class="o">()</span> in mainwindow.o
  .
  .
  .
  <span class="s2">&#34;QSerialPortInfo::portName() const&#34;</span>, referenced from:
      MainWindow::fillPortsInfo<span class="o">()</span> in mainwindow.o
ld: symbol<span class="o">(</span>s<span class="o">)</span> not found <span class="k">for</span> architecture x86_64
clang: error: linker <span class="nb">command</span> failed with <span class="nb">exit</span> code <span class="m">1</span> <span class="o">(</span>use -v to see invocation<span class="o">)</span></code></pre></div>
<h4 id="è§£å†³åŠæ³•"><strong>è§£å†³åŠæ³•</strong></h4>

<p>åœ¨å·¥ç¨‹çš„proæ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼Œå†æ¬¡ç¼–è¯‘å³å¯é€šè¿‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">QT</span>  <span class="o">+=</span> <span class="n">serialport</span></code></pre></div>
<h3 id="mac-osxä¸‹qtè®¾ç½®ç¨‹åºçš„å›¾æ ‡">Mac OSXä¸‹QTè®¾ç½®ç¨‹åºçš„å›¾æ ‡</h3>

<ul>
<li><p>ç¬¬ä¸€æ­¥ï¼Œè®¾è®¡å¥½è‡ªå·±æƒ³è¦çš„icnså›¾æ ‡ï¼Œæ¯”å¦‚å›¾æ ‡å‘½åæ—¶app.icnsï¼Œæ”¾åˆ°å·¥ç¨‹æ ¹ç›®å½•ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xnnv2.png" alt="1" /></p></li>

<li><p>ç¬¬äºŒæ­¥ï¼Œåœ¨proæ–‡ä»¶ä¸­ï¼ŒåŠ å…¥æ–°çš„ä¸€è¡Œï¼Œå†…å®¹ä¸º  <strong>ICON = app.icns</strong>ï¼Œå…¶ä¸­app.icnsä¸ºä½ çš„å›¾æ ‡æ–‡ä»¶åã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/95srw.png" alt="2" /></p></li>

<li><p>ç¬¬ä¸‰æ­¥ï¼Œé€‰æ‹©releaseï¼Œç¼–è¯‘å³å¯ç”ŸæˆAPPï¼Œappæ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/gwrag.png" alt="3" /></p></li>
</ul>

<h3 id="cannot-find-lgl">cannot find -lGL</h3>

<p>Ubuntuä¸‹Qtç¼–è¯‘é”™è¯¯ï¼šcannot find -lGL</p>

<p>åœ¨ç¼–è¯‘ä¹‹å‰å¸¸è§çš„ä¸€ä¸ªå°å·¥ç¨‹ï¼ˆåœ¨macä¸‹åˆ›å»ºçš„ï¼‰çš„æ—¶å€™ï¼Œå‡ºç°lGLé”™è¯¯ï¼Œæˆ‘ä»¥ä¸ºæ˜¯ä¸å…¼å®¹ï¼Œä½†åˆæ–°å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œç¼–è¯‘å‡ºé”™ï¼š</p>

<blockquote>
<p>cannot find -lGLã€‚</p>
</blockquote>

<p>ç»è¿‡äº†è§£æ˜¯å› ä¸ºç¼ºå°‘æ–‡ä»¶å¯¼è‡´ï¼Œéœ€è¦å®‰è£…éƒ¨åˆ†æ–‡ä»¶ï¼Œç½‘ä¸Šæ‰¾åˆ°çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šå®‰è£…<code>libqt4-dev</code>æˆ–è€…<code>libgl1-mesa-dev</code>æˆ–è€…<code>libgl1-mesa-dev</code>æˆ–è€…<code>libglu1-mesa-dev</code></p>

<p>æˆ‘åªå°è¯•äº†å®‰è£…<code>libqt4-dev</code>ï¼Œåœ¨Teminalä¸­æ‰§è¡Œä¸€ä¸‹å‘½ä»¤å®‰è£…ç›¸å…³åº“æ–‡ä»¶ï¼Œç„¶åç¼–è¯‘å°±æˆåŠŸäº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get isntall libqt4-dev</code></pre></div>
<h3 id="æ— æ³•å¯åŠ¨helpæ’ä»¶">æ— æ³•å¯åŠ¨helpæ’ä»¶</h3>

<p>Ubuntuä¸‹qtceatoråæ— æ³•å¯åŠ¨helpæ’ä»¶</p>

<p>å®‰è£…å¥½qt5.5åå¯åŠ¨qtceatoræ—¶æç¤ºï¼š</p>

<blockquote>
<p>/opt/Qt5.5.1/Tools/QtCreator/lib/qtcreator/plugins/libHelp.so: æ— æ³•åŠ è½½åº“/opt/Qt5.5.1/Tools/QtCreator/lib/qtcreator/plugins/libHelp.soï¼š(libgstapp-0.10.so.0: æ— æ³•æ‰“å¼€å…±äº«å¯¹è±¡æ–‡ä»¶: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•)</p>
</blockquote>

<p>ä¸€å®šæ—¶ç¼ºå°‘åº“é€ æˆçš„ï¼Œå¯èƒ½æ˜¯å› ä¸ºQtå¸®åŠ©æ˜¯é‡‡ç”¨æµåª’ä½“çš„æ–¹å¼åŠ è½½ï¼Œå°è¯•å®‰è£…æµåª’ä½“åº“æ–‡ä»¶ï¼Œæ¥è§£å†³ï¼Œå¦‚ä¸‹æ¥å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get  install libgstreamer0.10-dev
sudo apt-get  install libgstreamer-plugins-base0.10-dev</code></pre></div>
<h3 id="linuxä¸‹æ·»åŠ qtçš„ä¸­æ–‡è¾“å…¥æ”¯æŒ">Linuxä¸‹æ·»åŠ Qtçš„ä¸­æ–‡è¾“å…¥æ”¯æŒ</h3>

<h4 id="ç°è±¡-1">ç°è±¡</h4>

<p>åœ¨linuxä¸‹ç”¨Qtåœ¨å†™ä¸€ä¸ªå°å·¥å…·ï¼Œæƒ³åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¾“å…¥ä¸­æ–‡ï¼Œå‘ç°æ€ä¹ˆä¹Ÿä¸è¡Œï¼Œåæ¥å‘ç°Qtç¼–è¯‘åçš„ç¨‹åºä¹Ÿä¸æ”¯æŒä¸­æ–‡è¾“å…¥ï¼Œæœ€ç»ˆå®šä½åŸå› åœ¨æœªå®‰è£…fctixè¾“å…¥æ³•çš„æ”¯æŒï¼Œæˆ‘çš„è¾“å…¥æ³•æ˜¯æœç‹—ï¼Œå…¶åŸºäºfctixï¼Œæ‰€ä»¥ä¸æ”¯æŒï¼Œåªéœ€å®‰è£…ç›¸åº”åº“å¹¶æ”¾å€’ä¸¤ä¸ªç›®å½•ä¸‹è§£å†³ã€‚</p>

<h4 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h4>

<ul>
<li><p>é¦–å…ˆå¾—å®‰è£…fcitx-libs-qtå’Œfcitx-libs-qt5è¿™ä¸¤ä¸ªåº“ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install fcitx-libs-qt fcitx-libs-qt5</code></pre></div></li>

<li><p>åœ¨<code>/usr/lib/x86_64-linux-gnu/qt5/plugins/platforminputcontexts/</code>ç›®å½•ä¸‹æ‰¾åˆ°<code>libfcitxplatforminputcontextplugin.so</code>ï¼Œå°†å…¶æ‹·è´åˆ°éšä¾¿ä¸€ä¸ªç›®å½•ï¼Œæ¯”å¦‚Downloadsï¼Œç„¶ååŠ è¿è¡Œæƒé™ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">cp /usr/lib/x86_64-linux-gnu/qt5/plugins/platforminputcontexts/libfcitxplatforminputcontextplugin.so ~/Downloads
<span class="nb">cd</span> ~/Downloads
chmod +x libfcitxplatforminputcontextplugin.so</code></pre></div></li>

<li><p>ç„¶åå°†è¿™ä¸ªåº“æ–‡ä»¶åˆ†åˆ«æ”¾åˆ°ä¸¤ä¸ªç›®å½•ä¸‹ï¼Œä¸‹é¢å‘½ä»¤ä¸­<code>QTå®‰è£…ç›®å½•</code>æ›¿æ¢ä¸ºQTçš„å®‰è£…ç›®å½•ï¼Œæ¯”å¦‚æˆ‘çš„<code>/opt/Qt5.7ï¼</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># è§£å†³Qtä¸­ä¸èƒ½è¾“å…¥ä¸­æ–‡çš„é—®é¢˜</span>
cp libfcitxplatforminputcontextplugin.so QTå®‰è£…ç›®å½•/Tools/QtCreator/lib/Qt/plugins/platforminputcontexts/
<span class="c1"># è§£å†³Qtç¼–è¯‘å‡ºçš„ç¨‹åºä¸æ”¯æŒä¸­æ–‡è¾“å…¥çš„é—®é¢˜</span>
cp libfcitxplatforminputcontextplugin.so QTå®‰è£…ç›®å½•/5.7/gcc_64/plugins/platforminputcontexts/</code></pre></div></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>ç¬”å°–ç—•è¿¹-ä¸ç•æµ®äº‘é®æœ›çœ¼</title>
			<link>https://www.smslit.top/2016/12/11/noFear/</link>
			<pubDate>Sun, 11 Dec 2016 21:10:47 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/12/11/noFear/</guid>
			<description>&lt;blockquote&gt;
&lt;p&gt;çœ¼ä¸‹è¿™å †ç ´ç©æ„å„¿ï¼Œä¸è¶³ä»¥é˜»æŒ¡æˆ‘é•¿è¿œçš„â€œé˜´è°‹â€ï¼&lt;/p&gt;
&lt;/blockquote&gt;</description>
			<content type="html"><![CDATA[<blockquote>
<p>çœ¼ä¸‹è¿™å †ç ´ç©æ„å„¿ï¼Œä¸è¶³ä»¥é˜»æŒ¡æˆ‘é•¿è¿œçš„â€œé˜´è°‹â€ï¼</p>
</blockquote>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/1qb7s.jpg" alt="noFear" /></p>]]></content>
		</item>
		
		<item>
			<title>åˆè§googleé»‘ç§‘æŠ€-Radarcat</title>
			<link>https://www.smslit.top/2016/12/01/radarcat/</link>
			<pubDate>Thu, 01 Dec 2016 12:49:16 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/12/01/radarcat/</guid>
			<description>æœ¬æ¬¡è¦åˆ†äº«çš„RadarCatå°±æ˜¯åŸºäºè¿™ä¸ªSolièŠ¯ç‰‡çš„ï¼Œå®ƒèƒ½é€šè¿‡æœºå™¨å­¦ä¹ å®ç°å¯¹ç‰©ä½“çš„è¯†åˆ«ï¼Œè¿ç“¶å­é‡Œæ˜¯ä»€ä¹ˆæ¶²ä½“éƒ½çŸ¥é“ï¼ŒèŠ¬è¾¾orå¯å£å¯ä¹ï¼Œçœ‹ä¸‹é¢</description>
			<content type="html"><![CDATA[<p>æœ¬æ¬¡è¦åˆ†äº«çš„RadarCatå°±æ˜¯åŸºäºè¿™ä¸ªSolièŠ¯ç‰‡çš„ï¼Œå®ƒèƒ½é€šè¿‡æœºå™¨å­¦ä¹ å®ç°å¯¹ç‰©ä½“çš„è¯†åˆ«ï¼Œè¿ç“¶å­é‡Œæ˜¯ä»€ä¹ˆæ¶²ä½“éƒ½çŸ¥é“ï¼ŒèŠ¬è¾¾orå¯å£å¯ä¹ï¼Œçœ‹ä¸‹é¢çš„è§†é¢‘äº†è§£ä¸€ä¸‹å§ï¼Œåˆè§googleé»‘ç§‘æŠ€ï¼</p>

<p>ä¸‹é¢æ˜¯youtubeè§†é¢‘ï¼š</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/share/redacat/radarcat.mp4" poster="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/share/redacat/radarcat.jpg" width="100%" controls="controls">RadarCat</video>
]]></content>
		</item>
		
		<item>
			<title>vimä¸­deleteï¼ˆbackspaceï¼‰é”®ä¸èƒ½å‘å·¦åˆ é™¤</title>
			<link>https://www.smslit.top/2016/11/27/vim-backspace-invalid/</link>
			<pubDate>Sun, 27 Nov 2016 16:43:01 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/11/27/vim-backspace-invalid/</guid>
			<description>&lt;p&gt;MacOSä¸‹æ‰“å¼€vimç¼–è¾‘æ–‡æœ¬ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼ï¼Œè¦åˆ é™¤ç¼–è¾‘ä¹‹å‰çš„ä¿å­˜è¿‡çš„å‡ ä¸ªå­—ç¬¦ï¼ŒæŒ‰ä¸‹&lt;strong&gt;delete&lt;/strong&gt;é”®åˆ é™¤å®ƒä»¬ï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°å‘€ï¼åªå¬åˆ°&amp;rdquo;duang duang duang&amp;rdquo;ï¼Œç«Ÿç„¶æ— æ•ˆï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>MacOSä¸‹æ‰“å¼€vimç¼–è¾‘æ–‡æœ¬ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼ï¼Œè¦åˆ é™¤ç¼–è¾‘ä¹‹å‰çš„ä¿å­˜è¿‡çš„å‡ ä¸ªå­—ç¬¦ï¼ŒæŒ‰ä¸‹<strong>delete</strong>é”®åˆ é™¤å®ƒä»¬ï¼Œä¸‡ä¸‡æ²¡æƒ³åˆ°å‘€ï¼åªå¬åˆ°&rdquo;duang duang duang&rdquo;ï¼Œç«Ÿç„¶æ— æ•ˆï¼</p>

<p>æœ‰ä¸€ç‚¹å…ˆæ˜ç¡®ä¸€ä¸‹ï¼Œåœ¨macçš„é”®ç›˜ä¸­æ²¡æœ‰backspaceé”®ï¼Œæœ‰ä¸ªé”®å«deleteï¼Œå…¶å®ç›¸å½“äºwindowä¸‹çš„backspaceé”®ï¼Œç¼–è¾‘æ–‡æœ¬æ—¶æŒ‰ä¸‹éƒ½å…·æœ‰å‘å·¦åˆ é™¤å­—ç¬¦çš„åŠŸèƒ½ã€‚</p>

<h3 id="åŸå› ">åŸå› </h3>

<p>ç½‘ä¸Šæœç´¢å¾—çŸ¥ï¼Œå‡ºç°å¼€å¤´è¯´çš„ä»¤äººæ¼ç«çš„é—®é¢˜çš„åŸå› æ˜¯ï¼š</p>

<blockquote>
<p>VIMä½¿ç”¨äº† compatible æ¨¡å¼ï¼Œæˆ–è€…æŠŠ backspace å˜é‡è®¾ç½®ä¸ºç©ºäº†&hellip;å…¶å®compatibleæ¨¡å¼æ˜¯VIMä¸ºäº†å…¼å®¹viè€Œå‡ºç°çš„é…ç½®ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä½¿VIMçš„æ“ä½œè¡Œä¸ºå’Œè§„èŒƒå’Œviä¸€è‡´ï¼Œè€Œè¿™ç§æ¨¡å¼ä¸‹backspaceé…ç½®æ˜¯ç©ºçš„ã€‚å³æ„å‘³ç€backspaceæ— æ³•åˆ é™¤ indent ï¼Œ end of line ï¼Œ start è¿™ä¸‰ç§å­—ç¬¦ã€‚</p>
</blockquote>

<p>åœ¨é»˜è®¤çŠ¶æ€ä¸‹ï¼Œdeleteï¼ˆbackspaceï¼‰æŒ‰ä¸‹åªä¼šåˆ é™¤æœ¬æ¬¡æ’å…¥æ¨¡å¼ä¸‹æ’å…¥çš„æ–‡æœ¬ï¼Œè¿™è·Ÿbackspaceçš„æ¨¡å¼è®¾ç½®æœ‰å…³ï¼Œå…¶æ¨¡å¼å¯ä»¥è®¾ç½®ä¸ºä»¥ä¸‹ä¸‰ç§æ¨¡å¼ï¼š</p>

<ul>
<li>0 same as â€œ:set backspace=â€ (Vi compatible)</li>
<li>1 same as â€œ:set backspace=indent,eolâ€</li>
<li>2 same as â€œ:set backspace=indent,eol,startâ€</li>
</ul>

<h3 id="è§£å†³">è§£å†³</h3>

<p>çŸ¥é“äº†åŸå› ï¼Œå°±å¥½è§£å†³äº†ï¼Œåªéœ€è¦å°†backspaceçš„æ¨¡å¼è®¾ç½®æˆ2å°±å¯ä»¥äº†ï¼Œåœ¨<code>~/.vimrc</code>ä¸­æ·»åŠ äº†ä¸€ä¸‹å†…å®¹ï¼Œä¿å­˜ï¼Œä¸‹æ¬¡è¿›å…¥vimå°±å¯ä»¥åœ¨æ’å…¥æ¨¡å¼ä¸‹ä»»æ„ä½¿ç”¨deleteï¼ˆbackspaceï¼‰é”®äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="s2">&#34; è§£å†³æ’å…¥æ¨¡å¼ä¸‹delete/backspceé”®å¤±æ•ˆé—®é¢˜
</span><span class="s2">set backspace=2</span></code></pre></div>
<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<ol>
<li><a href="http://blog.csdn.net/jiang314/article/details/51941479" target="_blank">Mac çš„ Vim ä¸­ delete é”®å¤±æ•ˆçš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="http://www.vim.org/" target="_blank">Vim</a></li>
</ol>]]></content>
		</item>
		
		<item>
			<title>macOSä¸‹è¿è¡ŒéApp Storeä¸‹è½½çš„appæç¤ºæŸåçš„è§£å†³æ–¹æ³•</title>
			<link>https://www.smslit.top/2016/11/27/macOS-app-damaged/</link>
			<pubDate>Sun, 27 Nov 2016 16:08:35 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/11/27/macOS-app-damaged/</guid>
			<description>&lt;p&gt;åœ¨ç½‘ä¸Šä¸‹è½½äº†ä¸€ä¸ªmacOSå¹³å°ä¸‹çš„è½¯ä»¶ï¼Œä½†æ˜¯ä¸€è¿è¡Œå°±å¼¹å‡ºæç¤ºæ¡†ï¼Œå¤§æ¦‚æ„æ€æ˜¯è¯´appå·²æŸåï¼Œä¸€å¼€å§‹ä»¥ä¸ºçœŸçš„æ˜¯æŸåäº†ï¼Œç„¶ååˆé‡æ–°ä¸‹è½½äº†ä¸€éå®‰è£…è¿è¡Œè¿˜æ˜¯è¿™æ ·ï¼Œç„¶ååˆå»å¦å¤–ä¸€ä¸ªå¹³å°ä¸‹è½½è¿˜æ˜¯è¿™æ ·ã€‚è¿™æ€ä¹ˆå¯èƒ½ï¼Ÿ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨ç½‘ä¸Šä¸‹è½½äº†ä¸€ä¸ªmacOSå¹³å°ä¸‹çš„è½¯ä»¶ï¼Œä½†æ˜¯ä¸€è¿è¡Œå°±å¼¹å‡ºæç¤ºæ¡†ï¼Œå¤§æ¦‚æ„æ€æ˜¯è¯´appå·²æŸåï¼Œä¸€å¼€å§‹ä»¥ä¸ºçœŸçš„æ˜¯æŸåäº†ï¼Œç„¶ååˆé‡æ–°ä¸‹è½½äº†ä¸€éå®‰è£…è¿è¡Œè¿˜æ˜¯è¿™æ ·ï¼Œç„¶ååˆå»å¦å¤–ä¸€ä¸ªå¹³å°ä¸‹è½½è¿˜æ˜¯è¿™æ ·ã€‚è¿™æ€ä¹ˆå¯èƒ½ï¼Ÿ</p>

<h3 id="åŸå› ">åŸå› </h3>

<p>åæ¥çŸ¥é“åŸæ¥æ˜¯å‡çº§åˆ°<code>macOS Seirra</code>çš„åŸå› ï¼Œè¿™ä¸ªç‰ˆæœ¬macOSçš„è®¾ç½®ä¸­çš„å®‰å…¨ä¸éšç§ä¸‹<code>å…è®¸ä»ä»¥ä¸‹ä½ç½®ä¸‹è½½çš„åº”ç”¨</code>ä¸­åªæœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œå°±æ˜¯è¿™æçš„é¬¼ï¼Œåº”è¯¥è¿˜æœ‰ä¸€ä¸ª<strong>ä»»ä½•æ¥æº</strong>çš„æ‰å¯¹ã€‚</p>

<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h3>

<p>ä¸‹é¢è§£å†³ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼š</p>

<ul>
<li>æ‰“å¼€ç»ˆç«¯ï¼›</li>

<li><p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo spctl --master-disable</code></pre></div></li>

<li><p>é‡å¯macï¼›</p></li>
</ul>

<p>åšå®Œä»¥ä¸Šä¸‰æ­¥ï¼Œå°±ä¼šå‘ç°<code>è®¾ç½®</code>ä¸­<code>å®‰å…¨æ€§ä¸éšç§</code>ä¸‹<code>å…è®¸ä»ä»¥ä¸‹ä½ç½®ä¸‹è½½çš„åº”ç”¨</code>æœ‰äº†ç¬¬ä¸‰ä¸ªé€‰é¡¹<code>ä»»ä½•æ¥æº</code>ï¼Œç„¶åå†å»æ‰“å¼€ä¹‹å‰æç¤ºæŸåçš„appå°±èƒ½è¿è¡Œäº†ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>swiftè·å–ç³»ç»Ÿå½“å‰æ—¶é—´</title>
			<link>https://www.smslit.top/2016/11/19/getnowtime-swift-dev/</link>
			<pubDate>Sat, 19 Nov 2016 21:53:23 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/11/19/getnowtime-swift-dev/</guid>
			<description>&lt;p&gt;ä»Šå¤©å°è¯•åšä¸€ä¸ªmacOSä¸‹çš„ç”Ÿæˆ645åè®®çš„å¹¿æ’­æ ¡æ—¶æŠ¥æ–‡çš„å°å·¥å…·ï¼Œåšåˆ°ä¸€åŠç«Ÿç„¶è¢«â€œå¦‚ä½•è·å–å½“å‰æ—¶é—´ï¼Ÿâ€ç»™éš¾ä½äº†ï¼Œç™¾åº¦æœç´¢ç»“æœæ‰¾æ¥çš„æ–¹æ³•éƒ½æ˜¯è¿‡æ—¶çš„ï¼Œç»è¿‡å°è¯•å’Œç ”ç©¶æ‰¾åˆ°äº†æ–¹æ³•ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©å°è¯•åšä¸€ä¸ªmacOSä¸‹çš„ç”Ÿæˆ645åè®®çš„å¹¿æ’­æ ¡æ—¶æŠ¥æ–‡çš„å°å·¥å…·ï¼Œåšåˆ°ä¸€åŠç«Ÿç„¶è¢«â€œå¦‚ä½•è·å–å½“å‰æ—¶é—´ï¼Ÿâ€ç»™éš¾ä½äº†ï¼Œç™¾åº¦æœç´¢ç»“æœæ‰¾æ¥çš„æ–¹æ³•éƒ½æ˜¯è¿‡æ—¶çš„ï¼Œç»è¿‡å°è¯•å’Œç ”ç©¶æ‰¾åˆ°äº†æ–¹æ³•ã€‚</p>

<p>ä»¥åœ¨macOSçš„playgroundä¸ºä¾‹ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªmacOSå¹³å°çš„playgroundï¼Œç¼–å†™ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">//: Playground - noun: a place where people can play</span>

<span class="kd">import</span> <span class="nc">Cocoa</span>

<span class="c1">// è·å–å½“å‰æ—¶é—´</span>
<span class="kd">let</span> <span class="nv">now</span><span class="p">:</span> <span class="n">Date</span> <span class="p">=</span> <span class="n">Date</span><span class="p">()</span>
<span class="kd">let</span> <span class="nv">calendar</span> <span class="p">=</span> <span class="n">Calendar</span><span class="p">.</span><span class="n">current</span><span class="p">;</span>
<span class="kd">let</span> <span class="nv">components</span> <span class="p">=</span> <span class="n">calendar</span><span class="p">.</span><span class="n">dateComponents</span><span class="p">([.</span><span class="n">year</span><span class="p">,</span> <span class="p">.</span><span class="n">month</span><span class="p">,</span> <span class="p">.</span><span class="n">day</span><span class="p">,</span> <span class="p">.</span><span class="n">hour</span><span class="p">,</span> <span class="p">.</span><span class="n">minute</span><span class="p">,</span> <span class="p">.</span><span class="n">second</span><span class="p">],</span> <span class="n">from</span><span class="p">:</span> <span class="n">now</span><span class="p">)</span>
<span class="c1">// è·å–å½“å‰æ—¶é—´å¯¹åº”å¹´æœˆæ—¥æ—¶åˆ†ç§’çš„æ•´æ•°å€¼</span>
<span class="kd">let</span> <span class="nv">year</span> <span class="p">=</span> <span class="n">components</span><span class="p">.</span><span class="n">year</span><span class="p">!</span> <span class="o">%</span> <span class="mi">100</span>
<span class="kd">let</span> <span class="nv">month</span> <span class="p">=</span> <span class="n">components</span><span class="p">.</span><span class="n">month</span>
<span class="kd">let</span> <span class="nv">day</span> <span class="p">=</span> <span class="n">components</span><span class="p">.</span><span class="n">day</span>
<span class="kd">let</span> <span class="nv">hour</span> <span class="p">=</span> <span class="n">components</span><span class="p">.</span><span class="n">hour</span>
<span class="kd">let</span> <span class="nv">minute</span> <span class="p">=</span> <span class="n">components</span><span class="p">.</span><span class="n">minute</span>
<span class="kd">let</span> <span class="nv">second</span> <span class="p">=</span> <span class="n">components</span><span class="p">.</span><span class="n">second</span></code></pre></div>
<p>å°±ä¼šçœ‹åˆ°å¦‚ä¸‹çš„ç»“æœï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/to9cv.png" alt="" /></p>]]></content>
		</item>
		
		<item>
			<title>è§£å†³macOSä¸‹vimä¸èƒ½è®¿é—®ç³»ç»Ÿå‰ªåˆ‡æ¿çš„é—®é¢˜</title>
			<link>https://www.smslit.top/2016/11/17/vim-clipboard-macos/</link>
			<pubDate>Thu, 17 Nov 2016 22:25:42 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/11/17/vim-clipboard-macos/</guid>
			<description>&lt;p&gt;åˆå¥½ä¹…æ²¡å†™åšæ–‡äº†ï¼Œæœ€è¿‘å¿™å·¥ä½œçš„äº‹æƒ…ï¼Œç„¦å¤´çƒ‚é¢ï¼Œæœ€è¿‘æ€»ç®—æœ‰äº›æ—¶é—´æ¥å¹²ç‚¹è‡ªå·±çš„äº‹æƒ…äº†ï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹ä¸€ç›´å›°æ‰°æˆ‘å¾ˆä¹…çš„é—®é¢˜ï¼ŒmacOSä¸‹ç³»ç»Ÿè‡ªå¸¦çš„vimä¸æ”¯æŒè®¿é—®ç³»ç»Ÿå‰ªåˆ‡æ¿çš„é—®é¢˜ï¼Œå³ä¸æ”¯æŒå¯„å­˜å™¨ &lt;strong&gt;+&lt;/strong&gt; å’Œ * çš„é—®é¢˜ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åˆå¥½ä¹…æ²¡å†™åšæ–‡äº†ï¼Œæœ€è¿‘å¿™å·¥ä½œçš„äº‹æƒ…ï¼Œç„¦å¤´çƒ‚é¢ï¼Œæœ€è¿‘æ€»ç®—æœ‰äº›æ—¶é—´æ¥å¹²ç‚¹è‡ªå·±çš„äº‹æƒ…äº†ï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹ä¸€ç›´å›°æ‰°æˆ‘å¾ˆä¹…çš„é—®é¢˜ï¼ŒmacOSä¸‹ç³»ç»Ÿè‡ªå¸¦çš„vimä¸æ”¯æŒè®¿é—®ç³»ç»Ÿå‰ªåˆ‡æ¿çš„é—®é¢˜ï¼Œå³ä¸æ”¯æŒå¯„å­˜å™¨ <strong>+</strong> å’Œ * çš„é—®é¢˜ã€‚</p>

<p>ç½‘ä¸Šäº†è§£åˆ°ç”¨homebrewå®‰è£…çš„vimæ˜¯æ”¯æŒçš„ï¼Œæ‰€ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…vimå³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">brew install vim --override-system-vim</code></pre></div>
<p>é¡ºåˆ©çš„è¯å°±ä¼šå®‰è£…æˆåŠŸï¼</p>

<p>ä½†æ˜¯æ‰§è¡Œwhich vimï¼Œä½ ä¼šå‘ç°è¿˜æ˜¯æŒ‡å‘ç³»ç»Ÿè‡ªå¸¦çš„vimç›®å½•<code>/usr/bin/vim</code>ï¼Œä¸è¦ç´§åªéœ€è¦é‡æ–°å¼€å¯ä¸€ä¸ªç»ˆç«¯çª—å£å³å¯ï¼Œå†æ‰§è¡Œwhich vimï¼Œå°±ä¼šå‘ç°å˜æˆäº†<code>/usr/local/bin/vim</code>ã€‚</p>

<p>ç„¶åå†é‡æ–°æ‰“å¼€çš„ç»ˆç«¯é‡Œï¼Œç”¨vimæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥ç”¨ + å’Œ * å¯„å­˜å™¨äº†ï¼Œä»è€Œå®Œæˆvimå‘ç³»ç»Ÿå…¶å…¶ä»–GUIè½¯ä»¶ä¸­ç²˜è´´æ–‡æœ¬å’Œå°†å‰ªåˆ‡æ¿é‡Œçš„å†…å®¹ç²˜è´´åˆ°vimé‡Œäº†ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>ã€Šé›·ç¥ä¹‹é”¤ã€‹ä¸§å¿ƒç—…ç‹‚çš„å¹³æ–¹æ ¹å€’æ•°é€Ÿç®—æ³•</title>
			<link>https://www.smslit.top/2016/09/28/q_sqrt-dev/</link>
			<pubDate>Wed, 28 Sep 2016 23:02:48 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/09/28/q_sqrt-dev/</guid>
			<description>&lt;p&gt;ä»Šå¤©å­¦ä¹ ã€ŠPythonç§‘å­¦è®¡ç®—ã€‹ï¼Œçœ‹åˆ°äº†ä¸€ä¸ªç»å¯¹ä¸§å¿ƒç—…ç‹‚ã€è®¡ç®—é€Ÿåº¦ç¢¾å‹æ ‡å‡†sqrtåº“å‡½æ•°çš„å¹³æ–¹æ ¹å€’æ•°é€Ÿç®—æ³•ï¼Œæ®è¯´å¹³å‡æ¯”æ ‡å‡†åº“çš„sqrtå¿«4å€ã€‚è¿™ä¸ªç®—æ³•æ˜¯çº¦ç¿°-å¡é©¬å…‹ï¼ˆJohn Carmackï¼‰åˆ›é€ çš„ï¼Œæ®è¯´ä»–æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„3Då¼•æ“å¼€å‘è€…ï¼Œã€Šé›·ç¥ä¹‹é”¤3ã€‹ç”¨çš„å°±æ˜¯ä»–å¼€å‘çš„3Då¼•æ“ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©å­¦ä¹ ã€ŠPythonç§‘å­¦è®¡ç®—ã€‹ï¼Œçœ‹åˆ°äº†ä¸€ä¸ªç»å¯¹ä¸§å¿ƒç—…ç‹‚ã€è®¡ç®—é€Ÿåº¦ç¢¾å‹æ ‡å‡†sqrtåº“å‡½æ•°çš„å¹³æ–¹æ ¹å€’æ•°é€Ÿç®—æ³•ï¼Œæ®è¯´å¹³å‡æ¯”æ ‡å‡†åº“çš„sqrtå¿«4å€ã€‚è¿™ä¸ªç®—æ³•æ˜¯çº¦ç¿°-å¡é©¬å…‹ï¼ˆJohn Carmackï¼‰åˆ›é€ çš„ï¼Œæ®è¯´ä»–æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„3Då¼•æ“å¼€å‘è€…ï¼Œã€Šé›·ç¥ä¹‹é”¤3ã€‹ç”¨çš„å°±æ˜¯ä»–å¼€å‘çš„3Då¼•æ“ã€‚</p>

<p>è´´å‡ºä»£ç  <strong>1/sqrt(number)</strong> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">float</span> <span class="nf">Q_sqrt</span><span class="p">(</span> <span class="kt">float</span> <span class="n">number</span> <span class="p">)</span> <span class="p">{</span>
	<span class="kt">long</span> <span class="n">i</span><span class="p">;</span>
	<span class="kt">float</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
	<span class="k">const</span> <span class="kt">float</span> <span class="n">threeHalfs</span> <span class="o">=</span> <span class="mf">1.5F</span><span class="p">;</span>

	<span class="n">x2</span> <span class="o">=</span> <span class="n">number</span> <span class="o">*</span> <span class="mf">0.5F</span><span class="p">;</span>
	<span class="n">y</span> <span class="o">=</span> <span class="n">number</span><span class="p">;</span>
	<span class="n">i</span> <span class="o">=</span> <span class="o">*</span> <span class="p">(</span> <span class="kt">long</span> <span class="o">*</span> <span class="p">)</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">;</span>
	<span class="n">i</span> <span class="o">=</span> <span class="mh">0x5f3759df</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">);</span>	<span class="c1">// è¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ
</span><span class="c1"></span>	<span class="n">y</span> <span class="o">=</span> <span class="o">*</span> <span class="p">(</span> <span class="kt">float</span> <span class="o">*</span> <span class="p">)</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">;</span>
	<span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="p">(</span> <span class="n">threeHalfs</span> <span class="o">-</span> <span class="p">(</span> <span class="n">x2</span> <span class="o">*</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span> <span class="p">)</span> <span class="p">);</span>
	<span class="k">return</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>åç»­æœ‰æœºä¼šçš„è¯æˆ‘ä¼šå†™ç¯‡æ–‡ç« ç ”ç©¶ä¸€ä¸‹ è®©äººæ‘¸ä¸åˆ°å¤´è„‘çš„ <strong>0x5f3759df</strong> çš„æ¨å¯¼ï¼Œæœ‰ä¸ªå« <strong>Chris Lomont</strong> ç–¯å­ï¼ˆå…¶å®ä»–æ˜¯ä¸ªæ•°å­¦å®¶ï¼‰ä¸æœï¼Œæ€’äº†ï¼Œç„¶åæš´åŠ›æ–¹æ³•æ‰¾åˆ°äº†ä¸€ä¸ªæ›´å¥½çš„æ•° <strong>0x5f375a86</strong> ï¼Œå‘µå‘µäº†ã€‚</p>

<h3 id="pythonç§‘å­¦è®¡ç®—æµ‹è¯•ä»£ç ">Pythonç§‘å­¦è®¡ç®—æµ‹è¯•ä»£ç </h3>

<p>è¿™é‡Œå…ˆç”¨Pythonç§‘å­¦è®¡ç®—çš„æ–¹æ³•æ£€éªŒä¸€ä¸‹è¿™ä¸ªé€Ÿç®—æ³•çš„è¯¯å·®ï¼Œåœ¨ <strong>IPython Notebook</strong> ä¸­æµ‹è¯•ã€‚</p>

<h4 id="ä»£ç ">ä»£ç </h4>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="o">%</span><span class="n">matplotlib</span> <span class="kr">inline</span>
<span class="n">import</span> <span class="n">numpy</span> <span class="n">as</span> <span class="n">np</span>
<span class="n">import</span> <span class="n">matplotlib</span><span class="p">.</span><span class="n">pyplot</span> <span class="n">as</span> <span class="n">plt</span>

<span class="n">number</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">number</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">float32</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="mf">0.5</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">y</span><span class="p">.</span><span class="n">view</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">i</span><span class="p">[</span><span class="o">:</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0x5f3759df</span> <span class="o">-</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.5</span> <span class="o">-</span> <span class="n">x2</span> <span class="o">*</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>
<span class="n">y_s</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>

<span class="n">error</span> <span class="o">=</span> <span class="n">y_s</span> <span class="o">-</span> <span class="n">y</span>

<span class="n">np</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">abs</span><span class="p">(</span><span class="n">error</span><span class="p">))</span>

<span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">&#34;$Fast\ Inverse\ Square\ Root$&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">y_s</span><span class="p">,</span> <span class="s">&#34;--&#34;</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">&#34;$Standard\ Inverse\ Square\ Root$&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#34;Number&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#34;Inverse Square Root Value Of Number&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#34;Inverse Square Root&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">&#34;Number&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">&#34;The Error Of The two Methods&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">&#34;The Error&#34;</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span></code></pre></div>
<h4 id="ç»“æœ">ç»“æœ</h4>

<p>ä¸¤ç§æ–¹æ³•å¾—åˆ°æ›²çº¿å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/z372t.png" alt="line" /></p>

<p>åå·®æ›²çº¿å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/j8ec4.png" alt="error" /></p>

<p>å¯ä»¥å¾—åˆ°æœ€å¤§è¯¯å·®å’Œæœ€å°è¯¯å·®ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">np</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">error</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">min</span><span class="p">(</span><span class="n">error</span><span class="p">)</span></code></pre></div>
<p>å¾—åˆ°ç»“æœå¦‚ä¸‹ï¼š</p>

<ul>
<li><strong>(0.0050456140410597428, -4.9357368359093101e-08)</strong></li>
</ul>

<p>å¯ä»¥çœ‹åˆ°è¯¯å·®è¿˜æ˜¯å¾ˆå¾®å°çš„ï¼Œæ‰€ä»¥å½“å¯¹é€Ÿåº¦è¦æ±‚é«˜å¹¶ä¸”æ•°æ®ä¸éœ€å¤ªç²¾ç¡®æ—¶ï¼Œç”¨è¿™ä¸ªé€Ÿç®—æ³•æ¯”è¾ƒåˆé€‚ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>AnacondaåŒ…ç®¡ç†å·¥å…·condaåŒ…ä¸‹è½½åŠ é€Ÿ</title>
			<link>https://www.smslit.top/2016/09/24/anaconda-speed-dev/</link>
			<pubDate>Sat, 24 Sep 2016 22:30:33 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/09/24/anaconda-speed-dev/</guid>
			<description>&lt;p&gt;å¥½ä¹…æ²¡æœ‰å‘æ–‡ç« äº†ï¼Œæœ€è¿‘æœ‰äº›è¿·èŒ«ï¼ŒåŠ ä¸Šå®ä¹ å·¥ä½œçš„åŸå› ï¼Œäººå˜å¾—æœ‰äº›ç–²åŠ³ï¼Œè¿‡å»é‚£ç§ä¹äºç ”ç©¶æœ‰è¶£ä¸œè¥¿çš„å…´è‡´è¢«å†²æ·¡äº†ï¼Œä½†è¿™å‡ å¤©ç»ˆäºé¼“èµ·å‹‡æ°”æ‹¿èµ·äº†å‡ ä¸ªæ˜ŸæœŸå‰ä¹°çš„ä¹¦ã€ŠPythonç§‘å­¦è®¡ç®—ã€‹ï¼Œå†³å®šå­¦ä¹ ä¸€ä¸‹ï¼Œç”¨ä½œè‡ªå·±ç¡•å£«è¯¾é¢˜çš„ä¸€ä¸ªç ”ç©¶å·¥å…·ï¼Œæ¥æ›¿ä»£matlabã€‚Matlabæ”¶è´¹ï¼Œç”¨ä¸èµ·ï¼Œè€Œpythonæ˜¯å¼€æºçš„ï¼ŒåŒæ—¶è¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„IDEï¼Œä¹Ÿéƒ½æ˜¯å…è´¹çš„ï¼›ä½†æˆ‘æ›´çœ‹é‡çš„æ˜¯pythonåœ¨å¦‚ä»Šçš„åœ°ä½ï¼ŒåºŸè¯ä¸å¤šè¯´äº†ï¼Œè¿›å…¥ä¸»é¢˜å§ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å¥½ä¹…æ²¡æœ‰å‘æ–‡ç« äº†ï¼Œæœ€è¿‘æœ‰äº›è¿·èŒ«ï¼ŒåŠ ä¸Šå®ä¹ å·¥ä½œçš„åŸå› ï¼Œäººå˜å¾—æœ‰äº›ç–²åŠ³ï¼Œè¿‡å»é‚£ç§ä¹äºç ”ç©¶æœ‰è¶£ä¸œè¥¿çš„å…´è‡´è¢«å†²æ·¡äº†ï¼Œä½†è¿™å‡ å¤©ç»ˆäºé¼“èµ·å‹‡æ°”æ‹¿èµ·äº†å‡ ä¸ªæ˜ŸæœŸå‰ä¹°çš„ä¹¦ã€ŠPythonç§‘å­¦è®¡ç®—ã€‹ï¼Œå†³å®šå­¦ä¹ ä¸€ä¸‹ï¼Œç”¨ä½œè‡ªå·±ç¡•å£«è¯¾é¢˜çš„ä¸€ä¸ªç ”ç©¶å·¥å…·ï¼Œæ¥æ›¿ä»£matlabã€‚Matlabæ”¶è´¹ï¼Œç”¨ä¸èµ·ï¼Œè€Œpythonæ˜¯å¼€æºçš„ï¼ŒåŒæ—¶è¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„IDEï¼Œä¹Ÿéƒ½æ˜¯å…è´¹çš„ï¼›ä½†æˆ‘æ›´çœ‹é‡çš„æ˜¯pythonåœ¨å¦‚ä»Šçš„åœ°ä½ï¼ŒåºŸè¯ä¸å¤šè¯´äº†ï¼Œè¿›å…¥ä¸»é¢˜å§ã€‚</p>

<p>æˆ‘é€‰æ‹©äº† <strong>Anaconda</strong> ä½œä¸ºå®‰è£…Pythonç§‘å­¦è®¡ç®—å¼€å‘åŒ…çš„æ–¹å¼ï¼Œå› ä¸ºæœ€ç®€å•ï¼Œåªéœ€ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸€ç›´ä¸‹ä¸€æ­¥å°±å®‰è£…å¥½äº†ï¼Œä¸ä½†é›†æˆäº†å‡ ä¸ªå¼€å‘ç¯å¢ƒï¼Œè¿˜é™„æœ‰å¾ˆå¤šç§‘å­¦è®¡ç®—çš„å·¥å…·åŒ…ï¼Œä»¥åŠ <strong>conda</strong> åŒ…ç®¡ç†å·¥å…·ã€‚å½“ä½¿ç”¨ <strong>conda</strong> å®‰è£…åŒ…çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ï¼Œé‚£ä¸‹è½½é€Ÿåº¦ç®€ç›´ä»¤äººå‘æŒ‡ï¼Œç­‰å¾ˆé•¿æ—¶é—´åå¾€å¾€æ˜¯å¤±è´¥çš„ç»“æœï¼Œæ‚²ç—›å‘€ï¼</p>

<p>é‡ç‚¹æ¥äº†ï¼Œæœ¬æ–‡å°±æ˜¯æ¥å‘Šè¯‰ä½ å¦‚ä½•åŠ é€Ÿ <strong>conda</strong> æ¥çš„ã€‚</p>

<p><strong>ä»¥åœ¨macOSä¸ºä¾‹</strong></p>

<ul>
<li>ä¸‹è½½<a href="https://www.continuum.io/downloads" target="_blank">Anaconda</a>ï¼Œä¸‹è½½åè¿è¡Œå®‰è£…åŒ… <strong>Anaconda2-4.1.1-MacOSX-x86_64.pkg</strong> ï¼Œé€‰æ‹©å®‰è£…åœ¨ç£ç›˜ï¼Œè¿™æ ·macOSçš„ä»»ä½•ç”¨æˆ·éƒ½å¯ä½¿ç”¨ã€‚å®‰è£…ç›®å½•æ˜¯ <strong>/anaconda</strong> ï¼Œè¿›å…¥ç›®å½•ä¼šçœ‹åˆ°å®‰è£…çš„æ‰€æœ‰å·¥å…·åŠå·¥å…·åŒ…ã€‚</li>

<li><p>æ­¤æ—¶ï¼Œåœ¨ç»ˆç«¯ä¸­æ— æ³•æ‰§è¡Œ <strong>anaconda</strong> çš„ä»»ä½•å·¥å…·ï¼Œå› ä¸ºå¹¶æ²¡æœ‰å°†å·¥å…·æ‰€åœ¨ç›®å½•åŠ å…¥ç¯å¢ƒå˜é‡ï¼Œ å·¥å…·ç›®å½•æ˜¯ <strong>/anaconda/bin</strong> ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡å¹¶ç”Ÿæ•ˆã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"> <span class="c1">## å¦‚æœshellç”¨çš„æ˜¯bashï¼Œé‚£å°±å¯¹.bashrcæ“ä½œ</span>
 <span class="c1"># echo &#39;export PATH=$PATH:/anaconda/bin&#39; &gt; .bashrc</span>
 <span class="c1"># source .bashrc</span>
 <span class="c1"># å¦‚æœshellç”¨çš„æ˜¯zshï¼Œé‚£å°±å¯¹.zshrcæ“ä½œ</span>
<span class="nb">echo</span> <span class="s1">&#39;export PATH=$PATH:/anaconda/bin&#39;</span> &gt; .zshrc
<span class="nb">source</span> .zshrc</code></pre></div></li>

<li><p>æ­¤æ—¶å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­è°ƒç”¨ <strong>conda</strong> å‘½ä»¤äº†ï¼Œå¯ä»¥æ‰§è¡Œä¸€æ¬¡ <strong>conda update</strong> æ„Ÿå—ä¸€ä¸‹å¥‡æ…¢çš„é€Ÿåº¦ã€‚</p></li>

<li><p>è§£å†³ç½‘é€Ÿé—®é¢˜ï¼Œåœ¨å›½å†…éœ€è¦æ›´æ¢æºæ¥è§£å†³ï¼Œ<a href="https://mirrors.tuna.tsinghua.edu.cn" target="_blank">æ¸…åé•œåƒæº</a>ä¸­æœ‰ <strong>anaconda</strong> çš„ï¼Œç®€ç›´å°±æ˜¯ç¦éŸ³ï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œå°±å¯ä»¥æ›´æ¢æºäº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">conda config --add channels <span class="s1">&#39;https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/&#39;</span>
conda config --set show_channel_urls yes</code></pre></div></li>

<li><p><code>~/.condarc</code>æ–‡ä»¶ä¸­æ³¨é‡Šæ‰åŸæ¥é»˜è®¤ä½¿ç”¨çš„å®˜æ–¹é€šé“ï¼Œå†…å®¹å¦‚ä¸‹çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma">channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
#  - defaults
show_channel_urls: true
ssl_verify: true</pre></div>
<ul>
<li>æ­¤æ—¶å¯ä»¥å°è¯•ä¸€ä¸‹ conda çš„åŒ…å®‰è£…ï¼Œä½ ä¼šå‘ç°å·²ç»é£èµ·æ¥äº†ã€‚</li>
</ul></li>

<li><p>ç„¶è€Œè¿™æ ·åªæ˜¯æ›´æ¢äº†å‘½ä»¤è¡Œä¸‹çš„åŒ…ç®¡ç†æºï¼Œè¦æƒ³æ›´æ”¹anacondaç”¨æˆ·ç•Œé¢ä¸­çš„åŒ…ç®¡ç†æºï¼Œè¿˜éœ€å¦‚ä¸‹æ“ä½œï¼š</p>

<ul>
<li>æ‰“å¼€ <strong>navigator</strong>ï¼Œå·¦ä¾§è¾¹æ é€‰æ‹© <strong>Environment</strong> ï¼Œå¦‚ä¸‹ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/unpmp.png" alt="navigator" /></li>
<li>å¦‚ä¸‹å›¾ï¼Œå•å‡»é¡¶æ  <strong>Channels</strong>ï¼Œåœ¨å¼¹å‡ºçš„çª—å£ä¼šçœ‹åˆ°æˆ‘ä»¬åˆšæ‰æ·»åŠ çš„æ¸…åé•œåƒæºï¼Œä½†æ²¡æœ‰é€‰ä¸­ï¼Œé€‰ä¸­å³å¯ï¼Œè¿™æ ·ä¹‹åç•Œé¢ä¸­ç®¡ç†åŒ…å°±ä¼šè¿æ¥æ¸…åçš„é•œåƒï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/fzrir.png" alt="channels" /></li>
</ul></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>iOSå¼€å‘å­¦ä¹ é—®é¢˜è§£å†³ç¬”è®°</title>
			<link>https://www.smslit.top/2016/06/22/iOS-Learn-Notes-Develop/</link>
			<pubDate>Wed, 22 Jun 2016 14:44:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/06/22/iOS-Learn-Notes-Develop/</guid>
			<description>&lt;p&gt;æœ¬æ–‡ä¸»è¦ç”¨æ¥æ•´ç†å­¦ä¹ iOSå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ï¼Œä¼šæŒç»­æ›´æ–°ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦ç”¨æ¥æ•´ç†å­¦ä¹ iOSå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ï¼Œä¼šæŒç»­æ›´æ–°ã€‚</p>

<h3 id="å†…å®¹"><strong>å†…å®¹</strong></h3>

<h4 id="xcode7ä¸­nsurlæ–¹æ³•æ— æ³•è®¿é—®ç½‘ç»œé—®é¢˜">Xcode7ä¸­NSURLæ–¹æ³•æ— æ³•è®¿é—®ç½‘ç»œé—®é¢˜</h4>

<p>date:   2016-02-25 08:00:00 +0800</p>

<p>åœ¨UIWebViewè°ƒç”¨LoadRequestæ–¹æ³•æ—¶å‡ºç°ç½‘ç»œè®¿é—®é˜»æ–­é—®é¢˜ï¼Œæ§åˆ¶å°æç¤ºå¦‚ä¸‹ï¼š</p>

<blockquote>
<p>Application Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app&rsquo;s Info.plist file.</p>
</blockquote>

<h5 id="è§£å†³åŠæ³•"><strong>è§£å†³åŠæ³•</strong></h5>

<p>åœ¨info.plistä¸­æ·»åŠ å¦‚ä¸‹å›¾çº¢æ¡†ä¸­çš„é”®å€¼å¯¹:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ptm8l.png" alt="1" /></p>

<p>plistä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="o">&lt;</span><span class="n">dict</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="n">NSAllowsArbitraryLoads</span><span class="o">&lt;/</span><span class="n">key</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="nb">true</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">dict</span><span class="o">&gt;</span></code></pre></div>
<h4 id="æ¸…ç©ºxcodeå¯åŠ¨æ¬¢è¿ç•Œé¢çš„æœ€è¿‘æ‰“å¼€å·¥ç¨‹çš„åˆ—è¡¨">æ¸…ç©ºXcodeå¯åŠ¨æ¬¢è¿ç•Œé¢çš„æœ€è¿‘æ‰“å¼€å·¥ç¨‹çš„åˆ—è¡¨</h4>

<p>date:   2016-06-22 14:44:00 +0800</p>

<p>æœ‰æ—¶æ›¾ç»æ‰“å¼€ä¸€äº›ä¹±ä¸ƒå…«ç³Ÿçš„xcodeå·¥ç¨‹ï¼Œä¾ç„¶ä¼šå‡ºç°åœ¨æ¬¢è¿ç•Œé¢æœ€è¿‘å·¥ç¨‹åˆ—è¡¨ä¸­ï¼Œè¿™å¯¹äºå¼ºè¿«ç—‡æ¥è¯´å¤ªæŠ˜ç£¨äº†ã€‚</p>

<h5 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h5>

<p>å”¯æœ‰æ¸…é™¤ï¼Œæ‰èƒ½å˜å¾—å’Œè°ï¼Œå¾ˆç®€å•ï¼Œæ‰“å¼€xcodeï¼Œèœå•æ <strong>File</strong>-&gt;<strong>Open Recent</strong>-&gt;<strong>Clear Menu</strong>ï¼Œå°±åƒä¸‹é¢å›¾ç‰‡æ‰€ç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/cgwi4.jpg" alt="clearRecent" /></p>]]></content>
		</item>
		
		<item>
			<title>Appleå¹³å°å¼€å‘-ç¬¬ä¸‰æ–¹åº“ç®¡ç†å·¥å…·CocoaPodsçš„å®‰è£…å’Œä½¿ç”¨</title>
			<link>https://www.smslit.top/2016/06/20/cocoapods-install-dev/</link>
			<pubDate>Mon, 20 Jun 2016 21:17:10 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/06/20/cocoapods-install-dev/</guid>
			<description>&lt;p&gt;ä»Šå¤©äº†è§£macOSçš„ä¸²å£ç¼–ç¨‹ï¼Œå¶ç„¶äº†è§£åˆ°ç¬¬ä¸‰æ–¹åº“ORSSerialPortåº“ï¼Œç»§è€Œäº†è§£åˆ°äº†ç¬¬ä¸‰æ–¹åº“çš„ç®¡ç†å·¥å…·CocoaPodsï¼Œè²Œä¼¼è¿™æœ‰åŠ©äºåœ¨ä»¥åè¿›è¡Œappleå¹³å°ï¼ˆiOSã€watchOSã€tvOSå’ŒmacOSï¼‰å¼€å‘ï¼Œç´¢æ€§å°±å®‰è£…ä¸€ä¸‹å§ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©äº†è§£macOSçš„ä¸²å£ç¼–ç¨‹ï¼Œå¶ç„¶äº†è§£åˆ°ç¬¬ä¸‰æ–¹åº“ORSSerialPortåº“ï¼Œç»§è€Œäº†è§£åˆ°äº†ç¬¬ä¸‰æ–¹åº“çš„ç®¡ç†å·¥å…·CocoaPodsï¼Œè²Œä¼¼è¿™æœ‰åŠ©äºåœ¨ä»¥åè¿›è¡Œappleå¹³å°ï¼ˆiOSã€watchOSã€tvOSå’ŒmacOSï¼‰å¼€å‘ï¼Œç´¢æ€§å°±å®‰è£…ä¸€ä¸‹å§ã€‚</p>

<h3 id="ä»€ä¹ˆæ˜¯cocoapods">ä»€ä¹ˆæ˜¯CocoaPods</h3>

<p><a href="https://cocoapods.org" target="_blank">CocoaPods</a>å®˜ç½‘ä¸­æ˜¯è¿™æ ·æè¿°çš„ï¼š</p>

<blockquote>
<p>CocoaPods is a dependency manager for Swift and Objective-C Cocoa projects. It has over eighteen thousand libraries and can help you scale your projects elegantly. </br></p>
</blockquote>

<p>æ‰€ä»¥å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æœ‰æ•ˆç®¡ç†Swiftå’ŒObjective-Cé¡¹ç›®ä¸­ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ‰€ä»¥éå¸¸æœ‰å¿…è¦å®‰è£…å’Œä½¿ç”¨ï¼Œå“ˆå“ˆã€‚</p>

<h3 id="å®‰è£…">å®‰è£…</h3>

<p><a href="https://cocoapods.org" target="_blank">CocoaPods</a>å®˜ç½‘è¿˜å‘Šè¯‰æˆ‘ä»¬ï¼š</p>

<blockquote>
<p>CocoaPods is built with Ruby and is installable with the default Ruby available on OS X. We recommend you use the default ruby.</p>
</blockquote>

<p>CocoaPodsç”±Rubyå®ç°ï¼Œå› ä¸ºmacOSä¸­é»˜è®¤å®‰è£…äº†Rubyï¼Œå¯ä»¥ç”¨å…¶gemå·¥å…·è¿›è¡Œå®‰è£…ï¼Œåœ¨å›½å†…ä½ æ‡‚çš„ï¼Œgemä½¿ç”¨çš„æºåªå¯è¿œè§‚ï¼Œæ‰€ä»¥è¦æ›¿æ¢æˆå›½å†…çš„æºï¼Œæˆ‘åœ¨<a href="http://www.smslit.top/jekyll/2015/08/25/jekyllInstallFedoraLinux.html" target="_blank">Fedoraä¸‹å®‰è£…Jekyll</a>ä¸€æ–‡ä¸­æœ‰æè¿°ï¼Œå¯ä»¥å‚è€ƒã€‚</p>

<p>æ›´æ¢ä¸º<strong><a href="https://ruby.taobao.org/" target="_blank">https://ruby.taobao.org/</a></strong>çš„æºåï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…CocoaPodsï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo gem install cocoapods</code></pre></div>
<p>å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤<code>pod</code>æ¥ä½¿ç”¨<a href="https://cocoapods.org" target="_blank">CocoaPods</a>äº†ã€‚</p>

<h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3>

<p>å®‰è£…å®Œæˆåï¼Œè¿˜éœ€è¦åˆå§‹åŒ–ä¸€ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pod setup</code></pre></div>
<p>å…¶å®åˆå§‹åŒ–çš„æ“ä½œä¼šå…ˆgit cloneåœ¨githubä¸Šçš„CocoaPodsæºï¼Œå¯æ˜¯åœ¨å›½å†…ï¼Œä½ ä¾æ—§æ‡‚å¾—ï¼Œéƒ½æ˜¯æ³ªï¼Œå¤ªæ…¢äº†ï¼Œç”šè‡³ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pod setup
Setting up CocoaPods master repo
<span class="o">[</span>!<span class="o">]</span> /usr/bin/git clone https://github.com/CocoaPods/Specs.git master

Cloning into <span class="s1">&#39;master&#39;</span>...
error: RPC failed<span class="p">;</span> curl <span class="m">56</span> SSLRead<span class="o">()</span> <span class="k">return</span> error -36
fatal: The remote end hung up unexpectedly
fatal: early EOF
fatal: index-pack failed</code></pre></div>
<p>é‚£æ€ä¹ˆåŠï¼Ÿåªå¥½å’±è‡ªå·±ç”¨å‘½ä»¤cloneï¼Œç„¶åå†ç”¨<code>pod setup</code>å‘½ä»¤è¿›è¡Œåˆå§‹åŒ–é…ç½®äº†ï¼Œsetupé»˜è®¤æ“ä½œæ˜¯å°†æºcloneåˆ°ç›®å½•<code>~/.cocoapods/repos</code>ç›®å½•ä¸‹ï¼Œæ‰€ä»¥å…ˆè¿›æ­¤ç›®å½•è¿›è¡Œ<code>git clone</code>æ“ä½œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ~/.cocoapods/repos
$ git clone git@github.com:CocoaPods/Specs.git master</code></pre></div>
<p>åšå¥½å¿ƒç†å‡†å¤‡ï¼Œé•œåƒå¾ˆå¤§è€Œä¸”é€Ÿåº¦å¾ˆæ…¢ï¼Œå®Œæˆåæ‰§è¡Œ<code>pod setup</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pod setup
Setting up CocoaPods master repo
  $ /usr/bin/git pull --ff-only
  From https://github.com/CocoaPods/Specs
     231c12b..1e7a611  master     -&gt; origin/master
  Updating 231c12b..1e7a611
  Fast-forward
   .../ADMozaicCollectionViewLayout.podspec.json      <span class="p">|</span>  <span class="m">23</span> +++++
   .../0.2/ASJGooglePlaces.podspec.json               <span class="p">|</span>  <span class="m">22</span> +++++
   .../AXPopoverView/0.5.3/AXPopoverView.podspec.json <span class="p">|</span>  <span class="m">39</span> ++++++++
   Specs/Adjust/4.7.1/Adjust.podspec.json             <span class="p">|</span>  <span class="m">69</span> ++++++++++++++
   Specs/Agrume/2.5.1/Agrume.podspec.json             <span class="p">|</span>  <span class="m">26</span> ++++++
	.
	.
	.
   Specs/eeGeo/1.0.635/eeGeo.podspec.json             <span class="p">|</span>  <span class="m">56</span> +++++++++++
   Specs/eeGeo/1.0.636/eeGeo.podspec.json             <span class="p">|</span>  <span class="m">56</span> +++++++++++
   .../0.0.1/ios-swift-utils.podspec.json             <span class="p">|</span>  <span class="m">22</span> +++++
   <span class="m">71</span> files changed, <span class="m">2200</span> insertions<span class="o">(</span>+<span class="o">)</span>, <span class="m">1</span> deletion<span class="o">(</span>-<span class="o">)</span>
   create mode <span class="m">100644</span> Specs/JeraUtils/0.3.2/JeraUtils.podspec.json
   create mode <span class="m">100644</span> Specs/KCBannerView/0.0.2/KCBannerView.podspec.json
   create mode <span class="m">100644</span> Specs/KDCircularProgress/1.5.0-beta1/KDCircularProgress.podspec.json
   create mode <span class="m">100644</span> Specs/KPPopView/0.0.6/KPPopView.podspec.json
	.
	.
	.
   create mode <span class="m">100644</span> Specs/eeGeo/1.0.635/eeGeo.podspec.json
   create mode <span class="m">100644</span> Specs/eeGeo/1.0.636/eeGeo.podspec.json
   create mode <span class="m">100644</span> Specs/ios-swift-utils/0.0.1/ios-swift-utils.podspec.json
Setup completed</code></pre></div>
<p>ä¼šå‡ºç°ç±»ä¼¼ä¸Šé¢çš„åˆå§‹åŒ–ä¿¡æ¯ï¼Œä¸»è¦æ˜¯git pullï¼Œç„¶ååˆ›å»ºä¸€äº›æ–‡ä»¶ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨podç®¡ç†å‘æˆ‘ä»¬å·¥ç¨‹ä¸­æ·»åŠ ç¬¬ä¸‰æ–¹åº“äº†ã€‚</p>

<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>

<p>æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªXcodeçš„macOSå·¥ç¨‹<strong>SerialPlot</strong>ï¼Œéœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“<a href="https://github.com/armadsen/ORSSerialPort" target="_blank">ORSSerialPort</a>ï¼Œé‚£ä¹ˆè·Ÿç€æˆ‘å¼€å§‹å§ã€‚</p>

<p>é¦–å…ˆè¿›å…¥Xcodeå·¥ç¨‹çš„ç›®å½•ï¼Œå¯ä»¥å…ˆæŸ¥çœ‹ç›®å½•ä¸­çš„å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> ~/Documents/workspace/OSX/SerialPlot/
$ ls -l
total <span class="m">0</span>
drwxr-xr-x  <span class="m">7</span> smslit  staff  <span class="m">238</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlot
drwxr-xr-x  <span class="m">5</span> smslit  staff  <span class="m">170</span> Jun <span class="m">21</span> <span class="m">08</span>:40 SerialPlot.xcodeproj
drwxr-xr-x  <span class="m">3</span> smslit  staff  <span class="m">102</span> Jun <span class="m">21</span> <span class="m">08</span>:40 SerialPlot.xcworkspace
drwxr-xr-x  <span class="m">4</span> smslit  staff  <span class="m">136</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlotTests
drwxr-xr-x  <span class="m">4</span> smslit  staff  <span class="m">136</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlotUITests</code></pre></div>
<p>ç„¶ååˆå§‹åŒ–podæ–‡ä»¶ï¼Œå†æŸ¥çœ‹ç›®å½•ä¸‹æ–‡ä»¶ï¼Œä¼šå‘ç°å¢åŠ äº†ä¸€ä¸ªpodfileï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pod init
$ ls -l
total <span class="m">8</span>
-rw-r--r--  <span class="m">1</span> smslit  staff  <span class="m">427</span> Jun <span class="m">21</span> <span class="m">09</span>:29 Podfile
drwxr-xr-x  <span class="m">7</span> smslit  staff  <span class="m">238</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlot
drwxr-xr-x  <span class="m">5</span> smslit  staff  <span class="m">170</span> Jun <span class="m">21</span> <span class="m">08</span>:40 SerialPlot.xcodeproj
drwxr-xr-x  <span class="m">3</span> smslit  staff  <span class="m">102</span> Jun <span class="m">21</span> <span class="m">08</span>:40 SerialPlot.xcworkspace
drwxr-xr-x  <span class="m">4</span> smslit  staff  <span class="m">136</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlotTests
drwxr-xr-x  <span class="m">4</span> smslit  staff  <span class="m">136</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlotUITests</code></pre></div>
<p>ç¼–è¾‘podfileï¼Œå¢åŠ æˆ‘ä»¬éœ€è¦çš„ç¬¬ä¸‰æ–¹åº“ä¿¡æ¯ï¼Œä¸€èˆ¬å¯ä»¥åœ¨ç¬¬ä¸‰æ–¹åº“çš„githubç½‘ç«™æ‰¾åˆ°ç›¸å…³ä½¿ç”¨cocoapodså®‰è£…åº“çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘ä½¿ç”¨çš„<a href="https://github.com/armadsen/ORSSerialPort" target="_blank">ORSSerialPort</a>çš„<a href="https://github.com/armadsen/ORSSerialPort/wiki/Installing-ORSSerialPort" target="_blank">å®‰è£…æŒ‡å¯¼</a>é¡µé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/gyjaf.png" alt="usingCocoaPods" /></p>

<p>æŒ‰ç…§æŒ‡å¯¼ç”¨vimç¼–è¾‘Podfileï¼Œæ·»åŠ ä¸€è¡Œå†…å®¹â€”â€”<code>pod ORSSerialPort</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ vim Podfile</code></pre></div>
<p>æ·»åŠ åæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Uncomment this line to define a global platform for your project</span>
<span class="c1"># platform :ios, &#39;9.0&#39;</span>

pod <span class="s2">&#34;ORSSerialPort&#34;</span>

target <span class="s1">&#39;SerialPlot&#39;</span> <span class="k">do</span>
  <span class="c1"># Comment this line if you&#39;re not using Swift and don&#39;t want to use dynamic frameworks</span>
  use_frameworks!

  <span class="c1"># Pods for SerialPlot</span>

  target <span class="s1">&#39;SerialPlotTests&#39;</span> <span class="k">do</span>
    inherit! :search_paths
    <span class="c1"># Pods for testing</span>
  end

  target <span class="s1">&#39;SerialPlotUITests&#39;</span> <span class="k">do</span>
    inherit! :search_paths
    <span class="c1"># Pods for testing</span>
  end

end</code></pre></div>
<p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨podå®‰è£…<code>ORSSerialPort</code>åº“äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pod install
Analyzing dependencies
Downloading dependencies
Installing ORSSerialPort <span class="o">(</span><span class="m">2</span>.0.2<span class="o">)</span>
Generating Pods project
Integrating client project
Sending stats
Pod installation complete! There is <span class="m">1</span> dependency from the Podfile and <span class="m">1</span> total pod installed.</code></pre></div>
<p>ç„¶åå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ç›®å½•ä¸‹æ–‡ä»¶ï¼Œä¼šå‘ç°å¤šäº†ä¸€ä¸ªæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ls -l
total <span class="m">16</span>
-rw-r--r--  <span class="m">1</span> smslit  staff  <span class="m">448</span> Jun <span class="m">21</span> <span class="m">12</span>:20 Podfile
-rw-r--r--  <span class="m">1</span> smslit  staff  <span class="m">218</span> Jun <span class="m">21</span> <span class="m">12</span>:23 Podfile.lock
drwxr-xr-x  <span class="m">8</span> smslit  staff  <span class="m">272</span> Jun <span class="m">21</span> <span class="m">12</span>:23 Pods
drwxr-xr-x  <span class="m">7</span> smslit  staff  <span class="m">238</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlot
drwxr-xr-x  <span class="m">5</span> smslit  staff  <span class="m">170</span> Jun <span class="m">21</span> <span class="m">08</span>:40 SerialPlot.xcodeproj
drwxr-xr-x  <span class="m">3</span> smslit  staff  <span class="m">102</span> Jun <span class="m">21</span> <span class="m">08</span>:40 SerialPlot.xcworkspace
drwxr-xr-x  <span class="m">4</span> smslit  staff  <span class="m">136</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlotTests
drwxr-xr-x  <span class="m">4</span> smslit  staff  <span class="m">136</span> Jun <span class="m">20</span> <span class="m">17</span>:25 SerialPlotUITests</code></pre></div>
<p>ç„¶åæˆ‘ä»¬æ‰“å¼€è‡ªå·±çš„å·¥ç¨‹ï¼Œå°±å¯ä»¥åœ¨æºä»£ç ä¸­æ·»åŠ åº“ï¼ˆ<code>#import &lt;ORSSerialPort/ORSSerialPort.h&gt;</code>ï¼‰å°±å¯ä»¥è°ƒç”¨åº“çš„apiäº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ open SerialPlot.xcworkspace</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>ç”¨KiCADè®¾è®¡ä½¿ç”¨CH340Gçš„USBè½¬ä¸²å£çš„æ¨¡å—</title>
			<link>https://www.smslit.top/2016/06/15/usb2ttl_ch340-elec/</link>
			<pubDate>Wed, 15 Jun 2016 16:47:31 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/06/15/usb2ttl_ch340-elec/</guid>
			<description>&lt;p&gt;è¿‘æœŸå­¦ä¹ äº†KiCADçš„ä½¿ç”¨ï¼Œå°±å†³å®šè®¾è®¡ä¸€æ¬¾USBè½¬ä¸²å£æ¨¡å—æ¥ç»ƒä¹ ä¸€ä¸‹ï¼Œè®¾è®¡ä¸­ä½¿ç”¨æ€§ä»·æ¯”å¾ˆé«˜çš„CH340çš„USBè½¬ä¸²å£èŠ¯ç‰‡ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è¿‘æœŸå­¦ä¹ äº†KiCADçš„ä½¿ç”¨ï¼Œå°±å†³å®šè®¾è®¡ä¸€æ¬¾USBè½¬ä¸²å£æ¨¡å—æ¥ç»ƒä¹ ä¸€ä¸‹ï¼Œè®¾è®¡ä¸­ä½¿ç”¨æ€§ä»·æ¯”å¾ˆé«˜çš„CH340çš„USBè½¬ä¸²å£èŠ¯ç‰‡ã€‚</p>

<p>KiCad - æ˜¯ä¸€ä¸ªGPLçš„EDAï¼ˆElectronic Design Automation - ç”µå­è®¾è®¡è‡ªåŠ¨åŒ–ï¼‰è½¯ä»¶åŒ…ï¼Œæˆ‘çœ‹ä¸­KiCADçš„å‡ ä¸ªä¼˜ç‚¹ï¼š</p>

<ul>
<li>å¼€æºï¼Œæ„å‘³ç€å…è´¹ä½¿ç”¨å…¨éƒ¨åŠŸèƒ½ï¼Œè¿™å¯¹äºæˆ‘è¿™ç§ç©·æ¸£å­¦ç”Ÿå…šç®€ç›´æ˜¯å¤©å¤§çš„ç¦éŸ³ã€‚</li>
<li>è·¨å¹³å°ï¼Œè¿™å¾ˆé‡è¦ï¼Œæˆ‘æ›´å–œæ¬¢ç”¨macOSæˆ–è€…linuxï¼Œä¸€èˆ¬EDAè½¯ä»¶åªæœ‰windowsç‰ˆæœ¬ï¼Œä¸€æåˆ°è·¨å¹³å°ï¼Œä¹Ÿå°±æœ‰æ”¯æŒæˆ‘é’Ÿçˆ±çš„macOSçš„ç‰ˆæœ¬äº†ã€‚</li>
<li>ç›¸å¯¹æ›´å¥½å…¥é—¨ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œç›®å‰ä¸­æ–‡èµ„æ–™è¾ƒå°‘ã€‚</li>
</ul>

<p>æˆ‘å‚ä¸äº†<a href="https://github.com/" target="_blank">guthub</a>ä¸Š<a href="https://github.com/ocrobot" target="_blank">ocrobot</a>å‘èµ·çš„KiCADæ±‰åŒ–å·¥ä½œï¼Œç›®å‰åŸºæœ¬å®Œæˆï¼Œé¡¹ç›®æ˜¯<a href="https://github.com/ocrobot/kicad-i18n" target="_blank">kicad-i18n</a>ï¼Œå¦‚æœæ‚¨æœ‰å…´è¶£å¯ä»¥ä¸€èµ·åŠ å…¥åˆ°æ±‰åŒ–å·¥ä½œä¸­ï¼Œå…¶ä¸­è‚¯å®šè¿˜æœ‰å¾ˆå¤šç¿»è¯‘ä¸åˆé€‚çš„åœ°æ–¹ã€‚</p>

<p>ä¸ºäº†ç»ƒæ‰‹ï¼Œç”¨Kicadåšäº†ä¸€æ¬¾ä»¥CH340Gä¸ºæ ¸å¿ƒçš„USBè½¬USARTçš„æ¨¡å—ï¼ŒåºŸè¯ä¸å¤šè¯´äº†ï¼Œä¸‹é¢å°±å±•ç¤ºä¸€ä¸‹ç‰ˆæœ¬v0.1.2ï¼ˆå³ï¼‰å’Œv0.1ï¼ˆå·¦ï¼‰çš„æ¨¡å—çš„å®ç‰©ç…§ç‰‡ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/t43zd.jpg" alt="module.jpg" /></p>

<p>æˆ‘å·²ç»å°†å·¥ç¨‹æ–‡ä»¶æ‰˜ç®¡åˆ°githubä¸Šäº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥ä»»æ„ä½¿ç”¨å’Œä¿®æ”¹ã€‚ç°åœ¨æ˜¯ç‰ˆæœ¬v0.1.2ï¼</p>

<table>
<thead>
<tr>
<th align="left">å¹³å°</th>
<th align="left">é¡¹ç›®åœ°å€</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">github</td>
<td align="left">usb2serial-CH340G:<a href="https://github.com/smslit/usb2serial-CH340G" target="_blank">https://github.com/smslit/usb2serial-CH340G</a></td>
</tr>
</tbody>
</table>

<h4 id="ç›®æ ‡åŠŸèƒ½">ç›®æ ‡åŠŸèƒ½</h4>

<ol>
<li>é€šç”¨çš„usbè½¬uartåŠŸèƒ½</li>
<li>ä¸ºArduinoä¸‹è½½ç¨‹åº</li>
<li>è‡ªç”±é€‰æ‹©3.3Væˆ–5Vä¾›ç”µï¼Œå¹¶å¯è¾“å‡ºã€‚</li>
<li>ç”µæºLEDæŒ‡ç¤ºã€TXå’ŒRXçš„LEDæŒ‡ç¤º</li>
</ol>

<h4 id="åŸç†å›¾">åŸç†å›¾</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/rjbiq.png" alt="sch" /></p>

<h4 id="pcb">PCB</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/hsc46.png" alt="pcb" /></p>

<h4 id="pcbçš„3dé¢„è§ˆ">PCBçš„3Dé¢„è§ˆ</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/iew84.png" alt="sch" /></p>

<h4 id="é™„">é™„ï¼š</h4>

<p><a href="http://www.wch.cn/product/CH340.html" target="_blank">CH340</a> æ˜¯ä¸€ä¸ª USB æ€»çº¿çš„è½¬æ¥èŠ¯ç‰‡,å®ç° USB è½¬ä¸²å£ã€USB è½¬ IrDA çº¢å¤–æˆ–è€… USB è½¬æ‰“å°å£ï¼Œå…¶ä¸­è®¾è®¡ä¸­é‡‡ç”¨çš„CH340Gæ˜¯ä¸€æ¬¾åªæœ‰USBè½¬ä¸²å£åŠŸèƒ½çš„èŠ¯ç‰‡ã€‚</p>

<h5 id="èŠ¯ç‰‡é©±åŠ¨">èŠ¯ç‰‡é©±åŠ¨</h5>

<ol>
<li><a href="http://www.wch.cn/download/CH341SER_ZIP.html" target="_blank">windowsé©±åŠ¨</a></li>
<li><a href="http://www.wch.cn/download/CH341SER_MAC_ZIP.html" target="_blank">Mac OSXé©±åŠ¨</a></li>
<li><a href="http://www.wch.cn/download/CH341SER_LINUX_ZIP.html" target="_blank">Linuxé©±åŠ¨</a></li>
</ol>

<h5 id="æ³¨æ„">æ³¨æ„</h5>

<p>ç”µè·¯å®Œæˆç„Šæ¥åï¼Œå› ä¸ºç¨³å‹äºŒæç®¡çš„æ€§èƒ½è¯¯å·®ï¼Œå¯èƒ½ä¼šé€ æˆè¾“å‡ºçš„3.3Vä¸å‡†ï¼Œç”µå‹ä½äº3.2Væ—¶å¯èƒ½ä¼šé€ æˆMacç”µè„‘åœ¨ä½¿ç”¨3.3Vçš„å·¥ä½œæ¨¡å¼æ—¶UARTé€šä¿¡æœ‰é—®é¢˜ã€‚å¯ä»¥é€šè¿‡æ›´æ¢ç¨³å‹äºŒæç®¡æˆ–è€…æ›´å°é˜»å€¼çš„ç”µé˜»R3æ¥è§£å†³ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>åœ¨MacOSç»ˆç«¯ä¸‹ä½¿ç”¨Inoè¿›è¡ŒArduinoå¼€å‘</title>
			<link>https://www.smslit.top/2016/06/15/ino-vim-arduino/</link>
			<pubDate>Wed, 15 Jun 2016 09:10:38 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/06/15/ino-vim-arduino/</guid>
			<description>&lt;p&gt;è™½ç„¶æˆ‘ç®—ä¸ä¸ŠçœŸæ­£çš„Vimerï¼Œä½†æˆ‘è¿˜æ˜¯æƒŠå¹ä¸vimçš„å¼ºå¤§ï¼Œä¹Ÿæ­£æ…¢æ…¢å­¦ä¹ vimçš„ä½¿ç”¨ï¼Œç»æœ‹å‹ä»‹ç»å¯ä»¥ç”¨å‘½ä»¤è¡Œå·¥å…·&lt;strong&gt;Ino&lt;/strong&gt;è¿›è¡ŒArduinoå¼€å‘ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨vimè¿›è¡ŒArduinoçš„codingäº†ã€‚å…¶å®æˆ‘ä½¿ç”¨äº†å¥½é•¿æ—¶é—´äº†ï¼Œè§‰å¾—ä¸é”™ï¼Œé€‚åˆå–œæ¬¢ç”¨ç»ˆç«¯æ•²å‘½ä»¤çš„æœ‹å‹ï¼Œæ‰€ä»¥åœ¨æ­¤å†™ä¸€ä¸‹å®‰è£…å’Œä½¿ç”¨ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è™½ç„¶æˆ‘ç®—ä¸ä¸ŠçœŸæ­£çš„Vimerï¼Œä½†æˆ‘è¿˜æ˜¯æƒŠå¹ä¸vimçš„å¼ºå¤§ï¼Œä¹Ÿæ­£æ…¢æ…¢å­¦ä¹ vimçš„ä½¿ç”¨ï¼Œç»æœ‹å‹ä»‹ç»å¯ä»¥ç”¨å‘½ä»¤è¡Œå·¥å…·<strong>Ino</strong>è¿›è¡ŒArduinoå¼€å‘ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨vimè¿›è¡ŒArduinoçš„codingäº†ã€‚å…¶å®æˆ‘ä½¿ç”¨äº†å¥½é•¿æ—¶é—´äº†ï¼Œè§‰å¾—ä¸é”™ï¼Œé€‚åˆå–œæ¬¢ç”¨ç»ˆç«¯æ•²å‘½ä»¤çš„æœ‹å‹ï¼Œæ‰€ä»¥åœ¨æ­¤å†™ä¸€ä¸‹å®‰è£…å’Œä½¿ç”¨ã€‚</p>

<h3 id="inoå·¥å…·å®‰è£…">Inoå·¥å…·å®‰è£…</h3>

<p><a href="http://inotool.org/" target="_blank"><strong>Ino</strong></a>ä¾èµ–äºArduino IDEï¼Œæ‰€ä»¥ä½¿ç”¨Inoä¹‹å‰ä¿è¯å·²ç»å®‰è£…äº†Arduino IDEï¼Œæœ‰äº†Inoä½ å¯ä»¥åšä»¥ä¸‹äº‹æƒ…ï¼š</p>

<ul>
<li>å¿«é€Ÿæ–°å»ºArduinoå·¥ç¨‹ã€‚</li>
<li>ç¼–è¯‘å·¥ç¨‹ã€‚</li>
<li>ä¸Šä¼ å·¥ç¨‹åˆ°Arduinoå¼€å‘æ¿ã€‚</li>
<li>ä¸²å£é€šä¿¡ã€‚</li>
</ul>

<h4 id="å®‰è£…">å®‰è£…</h4>

<p>å¯ä»¥é€šè¿‡ä¸‹è½½æœ€æ–°çš„æºç è¿›è¡Œå®‰è£…ï¼Œä¸è¿‡è¿™é‡Œæˆ‘è¿˜æ˜¯å»ºè®®ç”¨å·¥å…·è¿›è¡Œå®‰è£…ï¼Œ<strong>Ino</strong>ä½¿ç”¨pythonå®ç°çš„ï¼Œä¸€èˆ¬macä¸Šéƒ½å®‰è£…äº†pythonï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒï¼Œé‚£ä¹ˆ<strong>Ino</strong>å¯ä»¥ç”¨Pythonçš„åŒ…ç®¡ç†å·¥å…·è¿›è¡Œå®‰è£…ï¼Œ<strong>pip</strong>æˆ–è€…<strong>easy_insyall</strong>ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨<strong>pip</strong>ï¼Œéœ€è¦å®‰è£…pipï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl https://bootstrap.pypa.io/ez_setup.py -o - <span class="p">|</span> sudo python
$ sudo easy_install pip</code></pre></div>
<p><strong>pip</strong>å¯ä»¥ç”¨æ¥å®‰è£…ã€æ›´æ–°æˆ–å¸è½½pythonè½¯ä»¶åŒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å®‰è£…<strong>Ino</strong>äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo pip isntall ino</code></pre></div>
<h4 id="ä¾èµ–">ä¾èµ–</h4>

<p>è¦æ­£å¸¸ä½¿ç”¨<strong>Ino</strong>ï¼Œä¾èµ–äºä»¥ä¸‹å·¥å…·ï¼š</p>

<ul>
<li><strong>Python</strong> 2.6+</li>
<li><strong>Arduino IDE</strong></li>
<li><strong>picocom</strong>ï¼Œç”¨æ¥è¿›è¡Œä¸²å£é€šä¿¡</li>
</ul>

<p>ç¬¬ä¸€ä¸ªPythonéœ€æ±‚macOSå¤©ç„¶æ»¡è¶³ï¼ŒArduino IDEæˆ‘ä»¬éœ€è¦è‡ªå·±å»<a href="https://www.arduino.cc/en/Main/OldSoftwareReleases" target="_blank">å®˜ç½‘</a>ä¸‹è½½ï¼Œå‹æƒ…æç¤ºä¸€å®šè¦å®‰è£…1.0.xç‰ˆæœ¬çš„ï¼Œ1.6.xæˆ–æ›´æ–°çš„æœ‰é—®é¢˜ã€‚</p>

<p><strong>picocom</strong>å·¥å…·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨macOSä¸‹çš„homebrewè¿›è¡Œå®‰è£…ï¼Œåœ¨è¿™ä¹‹å‰å…ˆæ¥å®‰è£…å¼ºå¤§çš„macè½¯ä»¶åŒ…ç®¡ç†å·¥å…·<a href="http://brew.sh/index_zh-cn.html" target="_blank"><strong>Homebrew</strong></a>ï¼Œå®ƒçš„èƒ½åŠ›ç±»ä¼¼ä¸Ubuntu Linuxçš„apt-getã€‚</p>

<p>å®‰è£…<strong>Homebrew</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ /usr/bin/ruby -e <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&#34;</span></code></pre></div>
<p>å®‰è£…<strong>picocom</strong>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ brew install picocom</code></pre></div>
<h3 id="inoçš„ä½¿ç”¨">inoçš„ä½¿ç”¨</h3>

<p>å¦‚æœå®‰è£…æˆåŠŸäº†ï¼Œé¡ºåˆ©çš„è¯ï¼Œç»ˆç«¯ä¸‹æ•²å‘½ä»¤<code>ino --help</code>æˆ–<code>ino -h</code>ï¼Œä¼šå‡ºç°ç®€å•çš„ä½¿ç”¨è¯´æ˜ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino -h
usage: ino <span class="o">[</span>-h<span class="o">]</span> <span class="o">{</span>list-models,preproc,upload,init,build,clean,serial<span class="o">}</span> ...

Ino is a command-line toolkit <span class="k">for</span> working with Arduino hardware.

It is intended to replace Arduino IDE UI <span class="k">for</span> those who prefer to work in
terminal or want to integrate Arduino development in a 3rd party IDE.

Ino can build sketches, libraries, upload firmwares, establish
serial-communication. For this it is split in a bunch of subcommands, like git
or mercurial <span class="k">do</span>. The full list is provided below. You may run any of them with
--help to get further help. E.g.:

    ino build --help

positional arguments:
  <span class="o">{</span>list-models,preproc,upload,init,build,clean,serial<span class="o">}</span>
    build               Build firmware from the current directory project
    clean               Remove intermediate compilation files completely
    init                Setup a new project in the current directory
    list-models         List supported Arduino board models
    preproc             Transform a sketch file into valid C++ <span class="nb">source</span>
    serial              Open a serial monitor
    upload              Upload built firmware to the device

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and exit</code></pre></div>
<p>å‘½ä»¤è¡¨å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th align="center">å‘½ä»¤</th>
<th align="left">å«ä¹‰</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">build</td>
<td align="left">ç¼–è¯‘å½“å‰ç›®å½•ä¸‹çš„å·¥ç¨‹</td>
</tr>

<tr>
<td align="center">clean</td>
<td align="left">åˆ é™¤ç¼–è¯‘ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶</td>
</tr>

<tr>
<td align="center">init</td>
<td align="left">åœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºå·¥ç¨‹</td>
</tr>

<tr>
<td align="center">list-model</td>
<td align="left">åˆ—å‡ºæ‰€æœ‰æ”¯æŒçš„Arduinoå¼€å‘æ¿</td>
</tr>

<tr>
<td align="center">preproc</td>
<td align="left">å°†å·¥ç¨‹æ–‡ä»¶è½¬æ¢ä¸ºæœ‰æ•ˆc++æ–‡ä»¶</td>
</tr>

<tr>
<td align="center">serial</td>
<td align="left">æ‰“å¼€ä¸²å£ç›‘è§†å™¨</td>
</tr>

<tr>
<td align="center">upload</td>
<td align="left">ç»™Arduinoè®¾å¤‡ä¸Šä¼ ç¨‹åº</td>
</tr>
</tbody>
</table>

<p>ä¹Ÿå¯ä»¥è®¿é—®<a href="http://inotool.org/quickstart" target="_blank">http://inotool.org/quickstart</a>ç®€å•äº†è§£<strong>Ino</strong>çš„ä½¿ç”¨ï¼Œè¿™é‡Œç®€å•è¯´ä¸€ä¸‹ä½¿ç”¨ã€‚</p>

<h4 id="æŸ¥çœ‹arduinoå‹å·">æŸ¥çœ‹Arduinoå‹å·</h4>

<p>æŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦æœ‰æ”¯æŒçš„Arduinoå¼€å‘æ¿ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino list-models
Searching <span class="k">for</span> Board description file <span class="o">(</span>boards.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/boards.txt
         uno: <span class="o">[</span>DEFAULT<span class="o">]</span> Arduino Uno
   atmega328: Arduino Duemilanove w/ ATmega328
   diecimila: Arduino Diecimila or Duemilanove w/ ATmega168
     nano328: Arduino Nano w/ ATmega328
        nano: Arduino Nano w/ ATmega168
    mega2560: Arduino Mega <span class="m">2560</span> or Mega ADK
        mega: Arduino Mega <span class="o">(</span>ATmega1280<span class="o">)</span>
    leonardo: Arduino Leonardo
     esplora: Arduino Esplora
       micro: Arduino Micro
     mini328: Arduino Mini w/ ATmega328
        mini: Arduino Mini w/ ATmega168
    ethernet: Arduino Ethernet
         fio: Arduino Fio
       bt328: Arduino BT w/ ATmega328
          bt: Arduino BT w/ ATmega168
  LilyPadUSB: LilyPad Arduino USB
  lilypad328: LilyPad Arduino w/ ATmega328
     lilypad: LilyPad Arduino w/ ATmega168
    pro5v328: Arduino Pro or Pro Mini <span class="o">(</span>5V, <span class="m">16</span> MHz<span class="o">)</span> w/ ATmega328
       pro5v: Arduino Pro or Pro Mini <span class="o">(</span>5V, <span class="m">16</span> MHz<span class="o">)</span> w/ ATmega168
      pro328: Arduino Pro or Pro Mini <span class="o">(</span><span class="m">3</span>.3V, <span class="m">8</span> MHz<span class="o">)</span> w/ ATmega328
         pro: Arduino Pro or Pro Mini <span class="o">(</span><span class="m">3</span>.3V, <span class="m">8</span> MHz<span class="o">)</span> w/ ATmega168
   atmega168: Arduino NG or older w/ ATmega168
     atmega8: Arduino NG or older w/ ATmega8
robotControl: Arduino Robot Control
  robotMotor: Arduino Robot Motor</code></pre></div>
<p>ä¸Šé¢å°±æ˜¯æ”¯æŒçš„æ‰€æœ‰å‹å·çš„å¼€å‘æ¿ï¼Œå†’å·å‰çš„æ˜¯æˆ‘ä»¬ç”¨åˆ°é…ç½®æ–‡ä»¶ä¸­çš„ï¼Œæˆ‘çš„å¼€å‘æ¿æ˜¯<strong>Arduino Pro Mini (5V, 16MHz) w/ ATmega328</strong>ï¼Œæ‰€ä»¥å¯¹åº”çš„æ˜¯pro5v328ï¼Œä½ å¯ä»¥æ‰¾åˆ°è‡ªå·±çš„æ¿å‹ï¼Œç¼–è¯‘å’Œä¸Šä¼ çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œé»˜è®¤çš„æ˜¯unoï¼Œæ‰€ä»¥ä¸€å®šè¦ææ¸…æ¥šè‡ªå·±çš„æ˜¯å“ªä¸€ä¸ªå‹å·ã€‚</p>

<h4 id="æ–°å»ºinoå·¥ç¨‹">æ–°å»ºInoå·¥ç¨‹</h4>

<p>å¯ä»¥ç”¨blinkæ¨¡æ¿æ–°å»ºå·¥ç¨‹ï¼Œè¿™ä¹‹å‰éœ€è¦åˆ›å»ºè‡ªå·±çš„å·¥ç¨‹ç›®å½•ï¼Œæ¯”å¦‚<strong>blink</strong>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ mkdir blink
$ <span class="nb">cd</span> blink
$ ino init -t blink</code></pre></div>
<p>å¯ä»¥ç”¨treeå‘½ä»¤åˆ—å‡ºæ–‡ä»¶æ ‘ï¼ˆtreeå‘½ä»¤å¯ä»¥ç”¨homebrewå®‰è£…<code>brew install tree</code>ï¼‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tree
.
â”œâ”€â”€ lib
â””â”€â”€ src
    â””â”€â”€ sketch.ino

<span class="m">2</span> directories, <span class="m">1</span> file</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸¤ä¸ªç›®å½•ï¼Œä¸€ä¸ªæ˜¯libä¸€ä¸ªæ˜¯srcï¼Œlibç”¨æ¥æ”¾ç¬¬ä¸‰æ–¹arduinoçš„åº“ï¼Œè€Œsrcå­˜æ”¾æˆ‘ä»¬è‡ªå·±çš„ä»£ç ï¼Œè¿™é‡Œå› ä¸ºç”¨äº†æ¨¡æ¿ï¼Œæ‰€ä»¥ç”Ÿæˆäº†ä¸€ä¸ªsketch.inoï¼Œå¯ä»¥æŸ¥çœ‹å…¶å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ cat src/sketch.ino

<span class="c1">#define LED_PIN 13</span>

void setup<span class="o">()</span>
<span class="o">{</span>
    pinMode<span class="o">(</span>LED_PIN, OUTPUT<span class="o">)</span><span class="p">;</span>
<span class="o">}</span>

void loop<span class="o">()</span>
<span class="o">{</span>
    digitalWrite<span class="o">(</span>LED_PIN, HIGH<span class="o">)</span><span class="p">;</span>
    delay<span class="o">(</span><span class="m">100</span><span class="o">)</span><span class="p">;</span>
    digitalWrite<span class="o">(</span>LED_PIN, LOW<span class="o">)</span><span class="p">;</span>
    delay<span class="o">(</span><span class="m">900</span><span class="o">)</span><span class="p">;</span>
<span class="o">}</span></code></pre></div>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨vimè¿›è¡Œcodingäº†ï¼Œä¿®æ”¹sketch.inoå³å¯ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶æ”¹æˆå…¶ä»–çš„åå­—ï¼Œæ¯”å¦‚blink.inoã€‚</p>

<h4 id="ç¼–è¯‘å·¥ç¨‹">ç¼–è¯‘å·¥ç¨‹</h4>

<p>ç”¨ino buildç¼–è¯‘å·¥ç¨‹æ—¶ï¼Œå…¶å®ç›¸å…³çš„æ˜¯æ¿å­çš„mcuå‹å·ï¼Œæ‰€ä»¥ä½¿ç”¨æ­¤å‘½ä»¤å¯ä»¥åŠ -må‚æ•°æŒ‡å®šå¼€å‘æ¿å‹å·ï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ï¼Œæˆ‘çš„æ˜¯pro5v328ï¼Œå¦‚æœä¸æŒ‡å®š-må‚æ•°çš„è¯ï¼Œå‘½ä»¤ä¼šä½¿ç”¨é»˜è®¤çš„æ¿å‹ï¼Œå°±æ˜¯list-modelç»“æœä¸­å¸¦æœ‰<strong>[DEFAULT]</strong>æ ‡è¯†çš„ï¼Œä¸€èˆ¬ä¸ºunoã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino build -m pro5v328
Searching <span class="k">for</span> Board description file <span class="o">(</span>boards.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/boards.txt
Searching <span class="k">for</span> Arduino lib version file <span class="o">(</span>version.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/lib/version.txt
Detecting Arduino software version ...  <span class="m">1</span>.0.6 <span class="o">(</span><span class="m">1</span>.0.6<span class="o">)</span>
Searching <span class="k">for</span> Arduino core library ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/cores/arduino
Searching <span class="k">for</span> Arduino variants directory ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/variants
Searching <span class="k">for</span> Arduino standard libraries ... /Applications/Arduino.app/Contents/Resources/Java/libraries
Searching <span class="k">for</span> make ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/make
Searching <span class="k">for</span> avr-gcc ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-gcc
Searching <span class="k">for</span> avr-g++ ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-g++
Searching <span class="k">for</span> avr-ar ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-ar
Searching <span class="k">for</span> avr-objcopy ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-objcopy
src/sketch.ino
Searching <span class="k">for</span> Arduino lib version file <span class="o">(</span>version.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/lib/version.txt
Detecting Arduino software version ...  <span class="m">1</span>.0.6 <span class="o">(</span><span class="m">1</span>.0.6<span class="o">)</span>
Scanning dependencies of src
Scanning dependencies of arduino
src/sketch.cpp
arduino/avr-libc/malloc.c
arduino/avr-libc/realloc.c
arduino/WInterrupts.c
arduino/wiring.c
arduino/wiring_analog.c
arduino/wiring_digital.c
arduino/wiring_pulse.c
arduino/wiring_shift.c
arduino/CDC.cpp
arduino/HardwareSerial.cpp
arduino/HID.cpp
arduino/IPAddress.cpp
arduino/main.cpp
arduino/new.cpp
arduino/Print.cpp
arduino/Stream.cpp
arduino/Tone.cpp
arduino/USBCore.cpp
arduino/WMath.cpp
arduino/WString.cpp
Linking libarduino.a
Linking firmware.elf
Converting to firmware.hex</code></pre></div>
<p>å½“ç„¶æˆ‘ä»¬è¿˜æœ‰å¦ä¸€ç§æ–¹æ³•æŒ‡å®šæ¿å­å‹å·ï¼Œå°±æ˜¯æ·»åŠ é…ç½®æ–‡ä»¶ï¼Œæœ‰ä¸‰ç§ç±»å‹çš„é…ç½®æ–‡ä»¶ï¼š</p>

<table>
<thead>
<tr>
<th align="left">é…ç½®æ–‡ä»¶</th>
<th align="left">ä½œç”¨åŸŸ</th>
<th align="left">ä¼˜å…ˆçº§</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">/etc/ino.ini</td>
<td align="left">å¯¹macä¸­æ‰€æœ‰ç”¨æˆ·ä¸‹çš„æ‰€æœ‰inoå·¥ç¨‹æœ‰æ•ˆ</td>
<td align="left">æœ€ä½</td>
</tr>

<tr>
<td align="left">~/.inorc</td>
<td align="left">å¯¹å½“å‰ç”¨æˆ·ä¸‹çš„æ‰€æœ‰å·¥ç¨‹æœ‰æ•ˆ</td>
<td align="left">æ¬¡ä¹‹</td>
</tr>

<tr>
<td align="left">./ino.ini</td>
<td align="left">å¯¹å½“å‰å·¥ç¨‹æœ‰æ•ˆ</td>
<td align="left">æœ€é«˜</td>
</tr>
</tbody>
</table>

<p><strong>ino build</strong>ä¸æŒ‡å®š-mæ—¶ï¼Œå·¥å…·ä¼šä¼˜å…ˆæŸ¥çœ‹å½“å‰å·¥ç¨‹ç›®å½•ä¸‹æ˜¯å¦æœ‰ino.iniï¼Œå¦‚æœæœ‰çš„è¯ä¾æ®é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°è®¾ç½®è¿›è¡Œç¼–è¯‘ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåœ¨å»å¸¸çœ‹å½“å‰macç”¨æˆ·$HOMEç›®å½•ä¸‹æ˜¯å¦æœ‰.inorcæ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™æ®æ­¤æ–‡ä»¶ä¸­çš„é…ç½®ç¼–è¯‘ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå†ç»§ç»­æŸ¥æ‰¾ç³»ç»Ÿé…ç½®ä¸­æ˜¯å¦æœ‰ino.iniæ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™æŒ‰é…ç½®ç¼–è¯‘ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŒ‰ç…§é»˜è®¤æ¿å‹unoè¿›è¡Œç¼–è¯‘ï¼Œä¸Šä¼ å‘½ä»¤ino uploadå’Œè°ƒç”¨ä¸²å£ç›‘è§†å™¨ino serialåŒæ ·æ˜¯æ­¤è§„åˆ™ã€‚</p>

<p>æ‰€ä»¥å»ºè®®åœ¨æ¯ä¸ªå·¥ç¨‹ä¸‹æ·»åŠ é€‚é…çš„é…ç½®æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ touch ino.ini</code></pre></div>
<p>é…ç½®æ–‡ä»¶ä¸­å¯ä»¥æŒ‡å®šbuildã€uploadå’Œserialè¿™ä¸‰ä¸ªåŠŸèƒ½çš„å‚æ•°ï¼Œç”¨vimç¼–è¾‘ino.iniæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>build<span class="o">]</span>
board-model <span class="o">=</span> pro5v328

<span class="o">[</span>upload<span class="o">]</span>
board-model <span class="o">=</span> pro5v328
serial-port <span class="o">=</span> /dev/tty.wchusbserial1470

<span class="o">[</span>serial<span class="o">]</span>
serial-port <span class="o">=</span> /dev/tty.wchusbserial1470</code></pre></div>
<p>ä¸Šé¢çš„serialå’Œuploadå‚æ•°ç”¨äºåé¢ã€‚</p>

<p>è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬æ¯æ¬¡åœ¨è‡ªå·±çš„å·¥ç¨‹é‡Œåªéœ€æ‰§è¡Œå‘½ä»¤<code>ino build</code>å³å¯ã€‚</p>

<p>å·¥ç¨‹ç›®å½•ä¸‹åŠ å…¥é…ç½®æ–‡ä»¶åçš„æ–‡ä»¶æ ‘å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tree
.
â”œâ”€â”€ ino.ini
â”œâ”€â”€ lib
â””â”€â”€ src
    â””â”€â”€ sketch.ino

	<span class="m">2</span> directories, <span class="m">2</span> files</code></pre></div>
<h4 id="ä¸Šä¼ ç¨‹åº">ä¸Šä¼ ç¨‹åº</h4>

<p>ä¸Šä¼ ç¨‹åºä¼šä½¿ç”¨åˆ°ä¸²å£ï¼Œæˆ‘ç”¨çš„ä¸²å£å·¥å…·ï¼Œåœ¨ç³»ç»Ÿä¸­è¯†åˆ«ä¸º<strong>tty.wchusbserial1470</strong>ï¼Œæ‰€ä»¥é…ç½®æ–‡ä»¶ä¸­æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±å¯¹åº”çš„ä¸²å£ï¼Œå¦‚æœä½ ä¸çŸ¥é“è‡ªå·±çš„ä¸²å£æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥æŸ¥çœ‹<code>/dev/</code>ç›®å½•ä¸‹ä»¥ttyä¸ºå‰ç¼€çš„ä¸²å£ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ls /dev/tty.*
/dev/tty.Bluetooth-Incoming-Port /dev/tty.wchusbserial1470</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æœ‰æ•ˆçš„ä¸²å£ï¼Œmacä¸€èˆ¬éƒ½ä¼šæœ‰è“ç‰™ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯è“ç‰™ï¼Œé‚£ä¹ˆå¦ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬çš„ä¸²å£***ï¼Œæ‰€ä»¥è¿™é‡Œé…ç½®æ–‡ä»¶å°±æ˜¯<code>/dev/tty.wchusbserial1470</code>ã€‚</p>

<p>å…¶å®ä¸Šä¼ å‘½ä»¤å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯-mï¼ˆåŒä¸Šï¼‰æ¥æŒ‡å®šæ¿å­å‹å·ï¼Œå¦ä¸€ä¸ªæ˜¯-pï¼Œç”¨æ¥æŒ‡å®šä½¿ç”¨ä¸²å£ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥æŒ‡å®šå‚æ•°æ¥ä¸Šä¼ ç¨‹åºåˆ°arduinoè®¾å¤‡ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino upload -m pro5v328 -p /dev/tty.wchusbserial1470</code></pre></div>
<p>å¦‚æœä¸æŒ‡å®š-på‚æ•°çš„è¯å°±ä¼šæŒ‰ç…§ä¹‹å‰æåˆ°çš„è§„åˆ™å»æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„ä¸²å£è¿›è¡Œä¸Šä¼ ï¼Œæ‰€ä»¥æ‰§è¡Œ<code>ino upload</code>å‘½ä»¤å°±å¯ä»¥äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino upload
Searching <span class="k">for</span> stty ... /bin/stty
Searching <span class="k">for</span> avrdude ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avrdude
Searching <span class="k">for</span> avrdude.conf ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/etc/avrdude.conf

avrdude: AVR device initialized and ready to accept instructions

Reading <span class="p">|</span> <span class="c1">################################################## | 100% 0.02s</span>

avrdude: Device <span class="nv">signature</span> <span class="o">=</span> 0x1e950f
avrdude: reading input file <span class="s2">&#34;.build/pro5v328/firmware.hex&#34;</span>
avrdude: writing flash <span class="o">(</span><span class="m">1082</span> bytes<span class="o">)</span>:

Writing <span class="p">|</span> <span class="c1">################################################## | 100% 0.72s</span>

avrdude: <span class="m">1082</span> bytes of flash written
avrdude: verifying flash memory against .build/pro5v328/firmware.hex:
avrdude: load data flash data from input file .build/pro5v328/firmware.hex:
avrdude: input file .build/pro5v328/firmware.hex contains <span class="m">1082</span> bytes
avrdude: reading on-chip flash data:

Reading <span class="p">|</span> <span class="c1">################################################## | 100% 0.63s</span>

avrdude: verifying ...
avrdude: <span class="m">1082</span> bytes of flash verified

avrdude: safemode: Fuses OK

avrdude <span class="k">done</span>.  Thank you.<span class="o">)</span><span class="s2">&#34;&#34;</span></code></pre></div>
<h4 id="ä½¿ç”¨åº“æ–‡ä»¶">ä½¿ç”¨åº“æ–‡ä»¶</h4>

<p>å¦‚æœè¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„è¯ï¼Œå¯ä»¥å°†åº“æ”¾åˆ°å·¥ç¨‹ç›®å½•çš„libç›®å½•ä¸‹ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å®šæ—¶å™¨æ¥è§¦å‘ledçš„blinkï¼Œç”¨åˆ°å®šæ—¶å™¨çš„åº“<strong><a href="https://github.com/PaulStoffregen/MsTimer2" target="_blank">MsTimer2</a></strong>ï¼Œä¸‹è½½ä¸‹æ¥å°†åº“æ”¾åˆ°libç›®å½•ä¸‹å³å¯ï¼Œæ­¤æ—¶æ–‡ä»¶æ ‘ç±»ä¼¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tree
.
â”œâ”€â”€ ino.ini
â”œâ”€â”€ lib
â”‚Â Â  â””â”€â”€ MsTimer2
â”‚Â Â      â”œâ”€â”€ MsTimer2.cpp
â”‚Â Â      â”œâ”€â”€ MsTimer2.h
â”‚Â Â      â””â”€â”€ examples
â”‚Â Â          â””â”€â”€ FlashLed
â”‚Â Â              â””â”€â”€ FlashLed.pde
â””â”€â”€ src
    â””â”€â”€ sketch.ino

	<span class="m">5</span> directories, <span class="m">5</span> files</code></pre></div>
<p>ç„¶åä¿®æ”¹æˆ‘ä»¬çš„sketch.inoæ¥ä½¿ç”¨åº“ï¼Œå¯ä»¥ä¿®æ”¹ä¸ºå¦‚ä¸‹çš„å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;MsTimer2.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="c1">// Switch on LED on pin 13 each second
</span><span class="c1"></span>
<span class="kt">void</span> <span class="nf">flash</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">static</span> <span class="n">boolean</span> <span class="n">output</span> <span class="o">=</span> <span class="n">HIGH</span><span class="p">;</span>
	<span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
	<span class="n">output</span> <span class="o">=</span> <span class="o">!</span><span class="n">output</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">pinMode</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>

	<span class="n">MsTimer2</span><span class="o">::</span><span class="n">set</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">flash</span><span class="p">);</span> <span class="c1">// 500ms period
</span><span class="c1"></span>	<span class="n">MsTimer2</span><span class="o">::</span><span class="n">start</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>

<span class="p">}</span></code></pre></div>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å†æ¬¡ç¼–è¯‘äº†ï¼Œç¼–è¯‘ä¹‹å‰ä¹Ÿå¯ä»¥å…ˆæ¸…é™¤ä¸€ä¸‹ä¸Šä¸€æ¬¡ç¼–è¯‘ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino clean</code></pre></div>
<p>ç„¶åå†è¿›è¡Œç¼–è¯‘å’Œä¸Šä¼ å³å¯ã€‚</p>

<h3 id="vimé…åˆino">vimé…åˆIno</h3>

<p>è¿›è¡ŒArduinoå¼€å‘ä½¿ç”¨Inoå¯ä»¥ç”¨vimè¿›è¡Œä»£ç ç¼–è¾‘ï¼Œä¸ºäº†æ›´æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºvimé…ç½®å¿«æ·é”®æ¥å®Œæˆå·¥ç¨‹çš„ç¼–è¯‘ã€æ¸…é™¤å’Œä¸Šä¼ (å³build\clean\upload)ï¼Œåœ¨<code>~/.vimrc</code>ä¸­æ·»åŠ é…ç½®å³å¯ï¼Œæˆ‘çš„Vimé…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">nmap &lt;F5&gt;b :!ino build&lt;CR&gt;
nmap &lt;F5&gt;c :!ino clean&lt;CR&gt;
nmap &lt;F5&gt;u :!ino upload&lt;CR&gt;</code></pre></div>
<p>è¿™æ ·å°±å¯ä»¥åœ¨ç”¨vimç¼–è¾‘sketch.inoæ—¶ï¼Œæ™®é€šæ¨¡å¼ä¸‹æŒ‰ä¸‹<F5>é”®+bæ¥è¿›è¡Œç¼–è¯‘ï¼ŒæŒ‰ä¸‹<F5>é”®+ué”®è¿›è¡Œä¸Šä¼ ï¼ŒæŒ‰ä¸‹<F5>é”®+cé”®è¿›è¡Œæ¸…é™¤ç¼–è¯‘ç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”åè®®æ ˆHALé©±åŠ¨æ§åˆ¶LED</title>
			<link>https://www.smslit.top/2016/05/05/halled-ble/</link>
			<pubDate>Thu, 05 May 2016 08:44:59 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/05/05/halled-ble/</guid>
			<description>&lt;p&gt;å·²ç»äº†è§£äº†OSALå·¥ä½œåŸç†å’Œå®Œæˆäº†å¯åŠ¨è¿‡ç¨‹çš„ç®€å•åˆ†æï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°è¯•åè®®æ ˆå¼€å‘äº†ï¼Œé¦–å…ˆå¯ä»¥ç©ä¸€ä¸‹LEDçš„æ§åˆ¶ï¼Œæˆ‘æœ‰ä¸€ä¸ªCC2541-DK MINI Keyfobï¼Œæœ¬æ–‡å°±ä»¥æ­¤ä¸ºæµ‹è¯•å¹³å°ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å·²ç»äº†è§£äº†OSALå·¥ä½œåŸç†å’Œå®Œæˆäº†å¯åŠ¨è¿‡ç¨‹çš„ç®€å•åˆ†æï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°è¯•åè®®æ ˆå¼€å‘äº†ï¼Œé¦–å…ˆå¯ä»¥ç©ä¸€ä¸‹LEDçš„æ§åˆ¶ï¼Œæˆ‘æœ‰ä¸€ä¸ªCC2541-DK MINI Keyfobï¼Œæœ¬æ–‡å°±ä»¥æ­¤ä¸ºæµ‹è¯•å¹³å°ã€‚</p>

<h3 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h3>

<h4 id="æ–°å»ºå®Œæ•´çš„åè®®æ ˆå·¥ç¨‹">æ–°å»ºå®Œæ•´çš„åè®®æ ˆå·¥ç¨‹</h4>

<p>è¿™é‡Œä»¥<strong>SimpleBLEPeripheral</strong>ä¾‹ç¨‹ä¸ºåŸºç¡€æ–°å»ºå·¥ç¨‹ï¼Œæ–¹æ³•å¯ä»¥å‚è€ƒ <a href="/2016/03/21/newProject-BLE/" target="_blank">BLEå¼€å‘ç¬”è®°â€”â€”ç®€å•æ–°å»ºå±äºè‡ªå·±çš„åè®®æ ˆå·¥ç¨‹</a>ã€‚</p>

<h4 id="é…ç½®å·¥ç¨‹">é…ç½®å·¥ç¨‹</h4>

<ul>
<li>é€‰æ‹©é…ç½®æ–‡ä»¶<strong>CC2541</strong></li>
<li>å³é”®å•å‡»å·¥ç¨‹ï¼Œé€‰æ‹©<strong>Options&hellip;</strong>ï¼Œå¯åŠ¨Optionsçª—å£</li>
<li>é€‰æ‹©å·¦è¾¹æ General Optionsä¸‹çš„C/C++ Compilerï¼Œç„¶ååœ¨å³ä¾§é€‰æ‹©Preprocessoré€‰é¡¹å¡ï¼Œæ“ä½œæ­£ç¡®çš„è¯ï¼Œåº”è¯¥ä¼šçœ‹åˆ°<strong>Defined symbols:(one per line)</strong>ï¼Œè¦ä¿®æ”¹å…¶ä¸­çš„å®å®šä¹‰ï¼š

<ul>
<li>ä¿®æ”¹<strong>HAL_LED=FALSE</strong>ä¸º<strong>HAL_LED=TRUE</strong></li>
<li>ä¿®æ”¹<strong>POWER_SAVING</strong>ä¸º<strong>xPOWER_SAVING</strong>ä»¥ç¦ç”¨ä½åŠŸè€—ç®¡ç†</li>
</ul></li>
</ul>

<p><strong>æ³¨ï¼š</strong></p>

<p>ä¸Šè¿°ç¦ç”¨ä½åŠŸè€—çš„åŸå› æ˜¯åè®®æ ˆé»˜è®¤LEDä¸ºè€—èƒ½å…ƒä»¶ï¼Œç³»ç»Ÿæ¯æ¬¡åœ¨è¿›å…¥ä¼‘çœ æ¨¡å¼çš„æ—¶å€™ä¼šæŠŠLEDå…³é—­ï¼Œå½“å”¤é†’çš„æ—¶å€™æœ‰å›å¤LEDçš„çŠ¶æ€ï¼Œå¦‚æœä¸ç¦ç”¨ä½åŠŸè€—ï¼ŒLEDä¼šä¸€ç›´å¾ªç¯é—ªçƒã€‚</p>

<h4 id="é…ç½®ç¡¬ä»¶">é…ç½®ç¡¬ä»¶</h4>

<p>å¦‚æœä½ æ‰€ä½¿ç”¨çš„ç¡¬ä»¶å¹³å°æ˜¯TIå®˜æ–¹å¼€å‘å¥—ä»¶æˆ–è€…æ˜¯ä»¿TIçš„ç¡¬ä»¶ï¼Œæ­¤éƒ¨åˆ†çš„æ“ä½œå¯ä»¥å¿½ç•¥ï¼Œä¸è¿‡æˆ‘è®¤ä¸ºè¿˜æ˜¯éœ€è¦äº†è§£ä¸€ä¸‹çš„ã€‚</p>

<p>å¦‚æœæ˜¯éå®˜æ–¹çš„è®¾è®¡ï¼Œå¯¹åº”HALé©±åŠ¨ä¸­LEDç®¡è„šæœ‰å¯èƒ½ä¸å®˜æ–¹è“ç‰™å¼€å‘å¥—ä»¶çš„è®¾è®¡æœ‰åŒºåˆ«ï¼Œå®˜æ–¹å¼€å‘æ¿ä¸ŠLED1å¯¹åº”èŠ¯ç‰‡çš„<strong>P1_0</strong>ç®¡è„šï¼Œå¦‚æœå¤šäºä¸€ä¸ªLEDï¼Œé‚£ä¹ˆLED2å¯¹åº”<strong>P1_1</strong>ï¼ŒLED3å¯¹åº”<strong>P1_4</strong>ï¼ŒLEDçš„é…ç½®æ–‡ä»¶å¯ä»¥åœ¨IARå·¥ç¨‹ç›®å½•<code>HAL---&gt;Target---&gt;CC2540EB---&gt;Config</code>æ‰¾åˆ°ï¼Œåä¸º<strong>hal_board_cfg.h</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ­¤æ–‡ä»¶æ¥é€‚é…è‡ªå·±è®¾è®¡çš„ç¡¬ä»¶ç”µè·¯ï¼Œé»˜è®¤LEDé…ç½®ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cm">/* LED Configuration */</span>

<span class="cp">#if defined (HAL_BOARD_CC2530EB_REV17) &amp;&amp; !defined (HAL_PA_LNA) &amp;&amp; !defined (HAL_PA_LNA_CC2590)
</span><span class="cp"></span>    <span class="cp">#define HAL_NUM_LEDS                 3
</span><span class="cp">#elif defined (HAL_BOARD_CC2530EB_REV13) || defined (HAL_PA_LNA) || defined (HAL_PA_LNA_CC2590)
</span><span class="cp"></span>    <span class="cp">#define HAL_NUM_LEDS                 1
</span><span class="cp">#else
</span><span class="cp"></span>    <span class="cp">#error Unknown Board Indentifier
</span><span class="cp">#endif
</span><span class="cp"></span>
<span class="cp">#define HAL_LED_BLINK_DELAY()   st( { volatile uint32 i; for (i=0; i&lt;0x5800; i++) { }; } )
</span><span class="cp"></span>
<span class="cm">/* 1 - Green */</span>
<span class="cp">#define LED1_BV                        BV(0)
</span><span class="cp">#define LED1_SBIT                      P1_0
</span><span class="cp">#define LED1_DDR                       P1DIR
</span><span class="cp">#define LED1_POLARITY                  ACTIVE_HIGH
</span><span class="cp"></span>
<span class="cp">#ifdef HAL_BOARD_CC2530EB_REV17
</span><span class="cp"></span>    <span class="cm">/* 2 - Red */</span>
    <span class="cp">#define LED2_BV                      BV(1)
</span><span class="cp"></span>    <span class="cp">#define LED2_SBIT                    P1_1
</span><span class="cp"></span>    <span class="cp">#define LED2_DDR                     P1DIR
</span><span class="cp"></span>    <span class="cp">#define LED2_POLARITY                ACTIVE_HIGH
</span><span class="cp"></span>
    <span class="cm">/* 3 - Yellow */</span>
    <span class="cp">#define LED3_BV                      BV(4)
</span><span class="cp"></span>    <span class="cp">#define LED3_SBIT                    P1_4
</span><span class="cp"></span>    <span class="cp">#define LED3_DDR                     P1DIR
</span><span class="cp"></span>    <span class="cp">#define LED3_POLARITY                ACTIVE_HIGH
</span><span class="cp">#endif</span></code></pre></div>
<p>è¿˜è¦æ³¨æ„<strong>LED1_POLARITY</strong>æ˜¯æ¥é…ç½®IOæ§åˆ¶LEDå‘å…‰çš„æœ‰æ•ˆç”µå¹³çš„ï¼Œé»˜è®¤çš„<strong>Active_HIGH</strong>ä»£è¡¨IOè¾“å‡ºé«˜ç”µå¹³æ—¶LEDäº®ï¼Œå‡å¦‚æˆ‘ä»¬æ‰€ç”¨çš„ç¡¬ä»¶ç”µè·¯LEDè¿æ¥åœ¨äº†<strong>P0_3</strong>ä¸Šï¼Œè€Œä¸”æ˜¯ä½ç”µå¹³ç‚¹äº®LEDï¼Œé‚£ä¹ˆè‹¥æƒ³ç”¨LED1æ§åˆ¶ï¼Œé‚£ä¹ˆå¯ä»¥ä¿®æ”¹LED1çš„å››å¥é…ç½®ä¸ºä¸‹é¢çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cm">/* 1 - Green */</span>
<span class="cp">#define LED1_BV                        BV(3)
</span><span class="cp">#define LED1_SBIT                      P0_3
</span><span class="cp">#define LED1_DDR                       P0DIR
</span><span class="cp">#define LED1_POLARITY                  ACTIVE_LOW</span></code></pre></div>
<h4 id="hal-led-å‡½æ•°åŠå®å®šä¹‰"><strong>HAL_LED</strong>å‡½æ•°åŠå®å®šä¹‰</h4>

<p>æ§åˆ¶LEDä½¿ç”¨çš„æ˜¯HalLedSetå‡½æ•°ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯LEDåç§°å®å®šä¹‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯LEDå·¥ä½œæ¨¡å¼å®å®šä¹‰ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">HalLedSet</span><span class="p">(</span> <span class="n">HAL_LED_1</span><span class="p">,</span> <span class="n">HAL_LED_MODE_ON</span> <span class="p">);</span></code></pre></div>
<p>è¿™é‡Œæˆ‘ä»¬åªéœ€è¦æ“ä½œLED1ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå‚æ•°å°±ç”¨<strong>HAL_LED_1</strong>å°±è¡Œï¼ŒLEDå·¥ä½œæ¨¡å¼å®å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#define HAL_LED_MODE_OFF     0x00   </span><span class="c1">// å…³é—­LED
</span><span class="c1"></span><span class="cp">#define HAL_LED_MODE_ON      0x01   </span><span class="c1">// æ‰“å¼€LED
</span><span class="c1"></span><span class="cp">#define HAL_LED_MODE_BLINK   0x02   </span><span class="c1">// é—ªçƒä¸€æ¬¡
</span><span class="c1"></span><span class="cp">#define HAL_LED_MODE_FLASH   0x04   </span><span class="c1">// ä¸æ–­çš„é—ªçƒï¼Œæœ€å¤š255æ¬¡
</span><span class="c1"></span><span class="cp">#define HAL_LED_MODE_TOGGLE  0x08   // ç¿»è½¬LEDçŠ¶æ€</span></code></pre></div>
<h3 id="ç‚¹äº®led">ç‚¹äº®LED</h3>

<ul>
<li><p>é¦–å…ˆæˆ‘ä»¬è¦ä¿è¯åˆå§‹åŒ–çš„æ—¶å€™LEDæ˜¯ç­çš„ï¼Œæ‰€ä»¥åœ¨<strong>SimpleBLEPeripheral_Init</strong>å‡½æ•°(åœ¨simpleBLEPeripheral.cæ–‡ä»¶ä¸­)çš„æœ€åæ‰§è¡Œå…³é—­LEDçš„è¯­å¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">SimpleBLEPeripheral_Init</span><span class="p">(</span> <span class="n">uint8</span> <span class="n">task_id</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">simpleBLEPeripheral_TaskID</span> <span class="o">=</span> <span class="n">task_id</span><span class="p">;</span>

    <span class="c1">// Setup the GAP
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="n">GAP_SetParamValue</span><span class="p">(</span> <span class="n">TGAP_CONN_PAUSE_PERIPHERAL</span><span class="p">,</span> <span class="n">DEFAULT_CONN_PAUSE_PERIPHERAL</span> <span class="p">);</span>

    <span class="p">.</span>
    <span class="p">.</span>
    <span class="p">.</span>

    <span class="c1">// å…³é—­LED
</span><span class="c1"></span>    <span class="n">HalLedSet</span><span class="p">(</span> <span class="n">HAL_LED_1</span><span class="p">,</span> <span class="n">HAL_LED_MODE_OFF</span> <span class="p">);</span>
    <span class="c1">// Setup a delayed profile startup
</span><span class="c1"></span>    <span class="n">osal_set_event</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">);</span>

<span class="p">}</span></code></pre></div></li>

<li><p>ç„¶ååœ¨<strong>SimpleBLEPeripheral_ProcessEvent</strong>çš„*SBP_START_DEVICE_EVT***äº‹ä»¶å¤„ç†ä¸­åŠ ä¸Šç‚¹äº®LEDçš„è¯­å¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="k">if</span> <span class="p">(</span> <span class="n">events</span> <span class="o">&amp;</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Start the Device
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="n">GAPRole_StartDevice</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">simpleBLEPeripheral_PeripheralCBs</span> <span class="p">);</span>

    <span class="c1">// Start Bond Manager
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="nf">GAPBondMgr_Register</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">simpleBLEPeripheral_BondMgrCBs</span> <span class="p">);</span>

    <span class="c1">// ç‚¹äº®LED
</span><span class="c1"></span>    <span class="n">HalLedSet</span><span class="p">(</span> <span class="n">HAL_LED_1</span><span class="p">,</span> <span class="n">HAL_LED_MODE_ON</span> <span class="p">);</span>

    <span class="c1">// Set timer for first periodic event
</span><span class="c1"></span>    <span class="n">osal_start_timerEx</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT_PERIOD</span> <span class="p">);</span>

    <span class="k">return</span> <span class="p">(</span> <span class="n">events</span> <span class="o">^</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div></li>

<li><p>ç¼–è¯‘ä¸‹è½½åˆ°ç”µè·¯æ¿ä¸Šï¼Œé¡ºåˆ©çš„è¯å¯ä»¥çœ‹åˆ°å¯åŠ¨åLEDä¿æŒå¸¸äº®ã€‚</p></li>
</ul>

<h3 id="blinkå’Œflash">BLINKå’ŒFLASH</h3>

<p>LEDçš„BLINKå’ŒFLASHå·¥ä½œæ¨¡å¼æ•ˆæœéƒ½æ˜¯é—ªçƒï¼Œä¸è¿‡BLINKæ˜¯é—ªçƒä¸€æ¬¡ï¼ŒFLASHæ˜¯é—ªçƒå¤šæ¬¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸Šé¢ç‚¹äº®LEDçš„æ–¹å¼æµ‹è¯•BLINKå’ŒFLASHå·¥ä½œæ¨¡å¼ï¼Œåªéœ€æ›´æ”¹ä¸Šé¢<strong>HalLedSet( HAL_LED_1, HAL_LED_MODE_ON );</strong>å³å¯ï¼Œå·¥ä½œæ¨¡å¼æ”¹ä¸º<strong>HAL_LED_MODE_BLINK</strong>æˆ–<strong>HAL_LED_MODE_FLASH</strong>ã€‚_</p>

<p>å…¶å®æˆ‘ä»¬å¯ä»¥é…ç½®é—ªçƒçš„å‘¨æœŸæ—¶é—´å’ŒLEDäº®æ‰€å æ—¶é—´æ¯”ï¼ŒFLASHè¿˜å¯ä»¥è®¾ç½®é—ªçƒæ¬¡æ•°ï¼Œè™½ç„¶å¯ä»¥é—ªçƒå¤šæ¬¡ï¼Œä½†æœ€å¤šå¯ä»¥é—ªçƒ255æ¬¡ï¼Œæ‰¾åˆ°å·¥ç¨‹æ–‡ä»¶çš„<code>hal_led.h</code>æ–‡ä»¶ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹çš„é…ç½®ä»£ç ï¼ˆåœ¨è¿™é‡ŒåŠ äº†æ³¨é‡Šï¼‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cm">/* Defaults */</span>
<span class="cp">#define HAL_LED_DEFAULT_MAX_LEDS      4         </span><span class="c1">// LEDæ•°é‡
</span><span class="c1"></span><span class="cp">#define HAL_LED_DEFAULT_DUTY_CYCLE    5         </span><span class="c1">// LEDäº®çš„å ç©ºæ¯”ï¼Œæ•°å€¼æ˜¯ç™¾åˆ†æ¯”ï¼Œè¿™é‡Œæ˜¯é—ªçƒå‘¨æœŸæ—¶é—´çš„5%
</span><span class="c1"></span><span class="cp">#define HAL_LED_DEFAULT_FLASH_COUNT   50        </span><span class="c1">// FLASHå·¥ä½œæ¨¡å¼çš„é—ªçƒæ¬¡æ•°  
</span><span class="c1"></span><span class="cp">#define HAL_LED_DEFAULT_FLASH_TIME    1000      // é—ªçƒå‘¨æœŸæ—¶é—´ï¼Œå•ä½msï¼Œè¿™é‡Œå‘¨æœŸæ˜¯1s</span></code></pre></div>
<p>å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚æ›´æ”¹ä¸Šè¿°çš„å®å®šä¹‰å³å¯ã€‚</p>

<h3 id="ledçŠ¶æ€ç¿»è½¬">LEDçŠ¶æ€ç¿»è½¬</h3>

<p>å·¥ä½œæ¨¡å¼ä½¿ç”¨å®å®šä¹‰<strong>HAL_LED_MODE_TOGGLE</strong>ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®šæ—¶å™¨è§¦å‘äº‹ä»¶çš„æ–¹å¼æµ‹è¯•è¿™ä¸ªå·¥ä½œæ¨¡å¼ã€‚</p>

<ul>
<li><p>ä»»åŠ¡åˆå§‹åŒ–ä¸­å…³é—­LED</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">SimpleBLEPeripheral_Init</span><span class="p">(</span> <span class="n">uint8</span> <span class="n">task_id</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">simpleBLEPeripheral_TaskID</span> <span class="o">=</span> <span class="n">task_id</span><span class="p">;</span>

    <span class="c1">// Setup the GAP
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="n">GAP_SetParamValue</span><span class="p">(</span> <span class="n">TGAP_CONN_PAUSE_PERIPHERAL</span><span class="p">,</span> <span class="n">DEFAULT_CONN_PAUSE_PERIPHERAL</span> <span class="p">);</span>

    <span class="p">.</span>
    <span class="p">.</span>
    <span class="p">.</span>

    <span class="c1">// å…³é—­LED
</span><span class="c1"></span>    <span class="n">HalLedSet</span><span class="p">(</span> <span class="n">HAL_LED_1</span><span class="p">,</span> <span class="n">HAL_LED_MODE_OFF</span> <span class="p">);</span>
    <span class="c1">// Setup a delayed profile startup
</span><span class="c1"></span>    <span class="n">osal_set_event</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">);</span>

<span class="p">}</span></code></pre></div></li>

<li><p>å®šä¹‰LEDç¿»è½¬äº‹ä»¶ï¼Œè¿™ä¸ªéœ€è¦åœ¨simpleBLEPeripheral.hæ–‡ä»¶ä¸­æ·»åŠ äº‹ä»¶çš„å®å®šä¹‰<strong>SBP_LED_TOGGLE_EVT</strong>ï¼Œé»˜è®¤æœ‰ä¸¤ä¸ªäº‹ä»¶çš„å®å®šä¹‰ï¼Œåªéœ€æ·»åŠ æˆ‘ä»¬çš„å°±å¯ä»¥ï¼Œäº‹ä»¶æ ‡è¯†IDæ˜¯WORDï¼Œæ‰€ä»¥æœ€å¤šå¯ä»¥è®¾ç½®16ä¸ªäº‹ä»¶ï¼Œä¸€ä½ä¸€ä¸ªäº‹ä»¶ï¼Œå¦‚ä¸‹çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="c1">// Simple BLE Peripheral Task Events
</span><span class="c1"></span><span class="cp">#define SBP_START_DEVICE_EVT                              0x0001
</span><span class="cp">#define SBP_PERIODIC_EVT                                  0x0002
</span><span class="cp">#define SBP_LED_TOGGLE_EVT                                0x0004</span></code></pre></div></li>

<li><p>æ·»åŠ äº‹ä»¶çš„è§¦å‘å®šæ—¶å™¨ï¼Œåœ¨<strong>SimpleBLEPeripheral_ProcessEvent</strong>çš„è®¾å¤‡å¯åŠ¨äº‹ä»¶å¤„ç†ä¸­æ·»åŠ å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="k">if</span> <span class="p">(</span> <span class="n">events</span> <span class="o">&amp;</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Start the Device
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="n">GAPRole_StartDevice</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">simpleBLEPeripheral_PeripheralCBs</span> <span class="p">);</span>

    <span class="c1">// Start Bond Manager
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="nf">GAPBondMgr_Register</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">simpleBLEPeripheral_BondMgrCBs</span> <span class="p">);</span>

    <span class="c1">// ä¸ºLEDç¿»è½¬äº‹ä»¶è®¾ç½®è§¦å‘å®šæ—¶å™¨ï¼Œæ—¶é—´ä¸º500ms    
</span><span class="c1"></span>    <span class="n">osal_start_timerEx</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_LED_TOGGLE_EVT</span><span class="p">,</span> <span class="mi">500</span> <span class="p">);</span>

    <span class="c1">// Set timer for first periodic event
</span><span class="c1"></span>    <span class="n">osal_start_timerEx</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT_PERIOD</span> <span class="p">);</span>

    <span class="k">return</span> <span class="p">(</span> <span class="n">events</span> <span class="o">^</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div></li>

<li><p>å¯ä»¥åœ¨è®¾å¤‡å¯åŠ¨äº‹ä»¶å¤„ç†ä»£ç çš„ä¸‹é¢ï¼Œæ·»åŠ LEDç¿»è½¬äº‹ä»¶çš„å¤„ç†ä»£ç ï¼Œæ¯ä¸ªäº‹ä»¶çš„å¤„ç†åé¢ä¸€å®šè¦æ¸…æ‰äº‹ä»¶æ ‡è¯†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="c1">// LEDç¿»è½¬äº‹ä»¶
</span><span class="c1"></span><span class="k">if</span> <span class="p">(</span> <span class="n">events</span> <span class="o">&amp;</span> <span class="n">SBP_LED_TOGGLE_EVT</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">HalLedSet</span><span class="p">(</span> <span class="n">HAL_LED_1</span><span class="p">,</span> <span class="n">HAL_LED_MODE_TOGGLE</span> <span class="p">);</span>                                <span class="c1">// ç¿»è½¬LED
</span><span class="c1"></span>    <span class="n">osal_start_timerEx</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_LED_TOGGLE_EVT</span><span class="p">,</span> <span class="mi">500</span> <span class="p">);</span>  <span class="c1">// é‡æ–°è®¾ç½®å®šæ—¶å™¨ä»¥å®ç°å‘¨æœŸè§¦å‘äº‹ä»¶
</span><span class="c1"></span>    <span class="k">return</span> <span class="p">(</span> <span class="n">events</span> <span class="o">^</span> <span class="n">SBP_LED_TOGGLE_EVT</span> <span class="p">);</span>                                     <span class="c1">// å¤„ç†å®Œäº‹ä»¶ï¼Œæ¶ˆé™¤äº‹ä»¶æ ‡è¯†
</span><span class="c1"></span><span class="p">}</span></code></pre></div></li>

<li><p>ç¼–è¯‘ï¼Œä¸‹è½½ç¨‹åºåˆ°å¼€å‘æ¿ï¼Œä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œledæ¯500mså°±ä¼šç¿»è½¬ä¸€æ¬¡çŠ¶æ€ã€‚</p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”OSALå’Œåè®®æ ˆå¯åŠ¨æµç¨‹</title>
			<link>https://www.smslit.top/2016/05/04/osal-executeflow-ble/</link>
			<pubDate>Wed, 04 May 2016 09:32:48 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/05/04/osal-executeflow-ble/</guid>
			<description>&lt;p&gt;åœ¨è¿›è¡Œåè®®æ ˆå¼€å‘ä¹‹å‰ï¼Œå¿…é¡»è¦äº†è§£åè®®æ ˆä¸­å®Œæˆä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†çš„OSALä»¥åŠæ•´ä¸ªåè®®æ ˆç¨‹åºå¤§ä½“çš„å¯åŠ¨æµç¨‹ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½æ›´å¥½çš„å¼€å‘åè®®æ ˆç¨‹åºã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨è¿›è¡Œåè®®æ ˆå¼€å‘ä¹‹å‰ï¼Œå¿…é¡»è¦äº†è§£åè®®æ ˆä¸­å®Œæˆä»»åŠ¡è°ƒåº¦å’Œèµ„æºç®¡ç†çš„OSALä»¥åŠæ•´ä¸ªåè®®æ ˆç¨‹åºå¤§ä½“çš„å¯åŠ¨æµç¨‹ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½æ›´å¥½çš„å¼€å‘åè®®æ ˆç¨‹åºã€‚</p>

<h3 id="osal-æ“ä½œç³»ç»ŸæŠ½è±¡å±‚">OSAL-æ“ä½œç³»ç»ŸæŠ½è±¡å±‚</h3>

<p>BLEåè®®æ ˆã€é…ç½®æ–‡ä»¶å’Œæ‰€æœ‰åº”ç”¨çš„åˆ›å»ºéƒ½æ˜¯å›´ç»•æ“ä½œç³»ç»ŸæŠ½è±¡å±‚ï¼ˆOSALï¼‰è¿›è¡Œçš„ã€‚OSALå±‚ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šå®é™…çš„æ“ä½œç³»ç»Ÿï¼Œè€Œæ˜¯ä¸€ä¸ªæ§åˆ¶å¾ªç¯ï¼Œå®ƒå…è®¸è½¯ä»¶å»ºç«‹äº‹ä»¶çš„æ‰§è¡Œã€‚å¯¹äºè¿™ä¸€ç±»å‹æ§åˆ¶çš„è½¯ä»¶çš„æ¯ä¸€å±‚ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªä»»åŠ¡IDï¼Œä¹Ÿå¿…é¡»å®šä¹‰ä»»åŠ¡åˆå§‹åŒ–å­ç¨‹åºå¹¶æŠŠå®ƒæ·»åŠ åˆ°OSALçš„åˆå§‹åŒ–ä¸­ï¼Œè€Œä¸”äº‹ä»¶çš„å¤„ç†ç¨‹åºä¹Ÿå¿…é¡»å®šä¹‰ï¼Œå¯ä»¥é€‰æ‹©å®šä¸å®šä¹‰æ¶ˆæ¯å¤„ç†ç¨‹åºã€‚è“ç‰™æ ˆçš„å‡ ä¸ªå±‚éƒ½æ˜¯OSALä»»åŠ¡ï¼Œæ¯”å¦‚æœ€é«˜ä¼˜å…ˆçº§çš„LLå±‚ä»»åŠ¡ï¼ˆå› ä¸ºLLå±‚æœ‰å¾ˆä¸¥æ ¼çš„æ—¶é—´è¦æ±‚ï¼‰ã€‚</p>

<p>é™¤äº†ä»»åŠ¡ç®¡ç†ï¼ŒOSALè¿˜æä¾›äº†å…¶å®ƒæœåŠ¡ï¼Œå¦‚æ¶ˆæ¯ä¼ é€’ã€å­˜å‚¨ç®¡ç†å’Œå®šæ—¶å™¨ï¼Œå¼€å‘å¥—ä»¶æä¾›æ‰€æœ‰çš„OSALä»£ç ã€‚</p>

<h4 id="osalçš„å®ç°">OSALçš„å®ç°</h4>

<p>ä¸ºäº†æ–¹ä¾¿ç¡¬ä»¶æ”¹é€ ã€å‡çº§ä»¥åŠè½¯ä»¶çš„ç§»æ¤ï¼Œå¿…é¡»å®ç°è½¯ä»¶å’Œç¡¬ä»¶çš„ä½è€¦åˆï¼Œä½¿è½¯ä»¶åœ¨æ”¹åŠ¨å¾ˆå°çš„æƒ…å†µä¸‹å¯ä»¥åº”ç”¨åˆ°ä¸åŒçš„ç¡¬ä»¶åœºåˆï¼Œè¿™å°±æ˜¯OSALå’ŒHALå­˜åœ¨çš„æ„ä¹‰ã€‚HALæ˜¯æŠ½è±¡å„ç§ç¡¬ä»¶èµ„æºæ•´åˆæ¥å£ä¾›OSALæ‰€ç”¨çš„ï¼ŒBLEä½åŠŸè€—ç³»ç»Ÿæ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xtu0l.png" alt="frame.png" /></p>

<p>OSALå®ç°ä»»åŠ¡è°ƒåº¦ï¼ŒBLEåè®®æ ˆã€profileså’Œç¼–å†™çš„åº”ç”¨éƒ½æ˜¯å›´ç»•å®ƒå®ç°çš„ã€‚è½¯ä»¶çš„åŠŸèƒ½æ˜¯ç”±ç¼–å†™çš„ä»»åŠ¡äº‹ä»¶å®ç°çš„ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥åˆ›å»ºä»»åŠ¡ï¼š</p>

<ul>
<li>åˆ›å»ºtask identifierä»»åŠ¡IDï¼›</li>
<li>ç¼–å†™ä»»åŠ¡åˆå§‹åŒ–è¿›ç¨‹ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°OSALåˆå§‹åŒ–ä¸­ã€‚</li>
<li>ç¼–å†™ä»»åŠ¡å¤„ç†ç¨‹åºã€‚</li>
<li>å¦‚æœéœ€è¦çš„è¯è¿˜éœ€ç¼–å†™æ¶ˆæ¯æœåŠ¡ã€‚</li>
</ul>

<h4 id="ç³»ç»Ÿè¿è¡Œæµç¨‹">ç³»ç»Ÿè¿è¡Œæµç¨‹</h4>

<p>ä»»åŠ¡å¾ªç¯æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/cng73.png" alt="taskloop.png" /></p>

<p>ä¸ºäº†ä½¿ç”¨OSALï¼Œç³»ç»Ÿå¯åŠ¨åï¼Œä¼šå…ˆè¿›è¡Œæ¿çº§ç¡¬ä»¶åˆå§‹åŒ–å’Œç³»ç»Ÿä»»åŠ¡çš„åˆå§‹åŒ–ï¼ˆ board init, tasks&rsquo;s init() ï¼‰ï¼Œåœ¨ä»»åŠ¡åˆå§‹åŒ–ä¸­ä¼šé€ä¸ªè°ƒç”¨BLEåè®®æ ˆæ¯ä¸€å±‚çš„å¯åŠ¨è¿›ç¨‹æ¥åˆå§‹åŒ–åè®®æ ˆï¼Œå®Œæˆåˆå§‹åŒ–ä¾¿è¿›å…¥mainå‡½æ•°ä¸­åå«<strong>osal_start_system</strong>çš„è¿›ç¨‹ï¼Œè®¾ç½®ä¸€ä¸ª8ä½çš„ä»»åŠ¡IDï¼Œç„¶åè¿›å…¥å¾ªç¯é€ä¸ªæ‰§è¡Œä»»åŠ¡åŠä»»åŠ¡ä¸­çš„äº‹ä»¶ã€‚</p>

<blockquote>
<p>æ³¨æ„
- ä»»åŠ¡ä¼˜å…ˆçº§æ˜¯ç”±ä»»åŠ¡IDå†³å®šçš„ï¼Œä»»åŠ¡IDè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚
- BLEåè®®æ ˆå„å±‚çš„ä»»åŠ¡ä¼˜å…ˆçº§æ¯”åº”ç”¨ç¨‹åºçš„é«˜ã€‚
- åˆå§‹åŒ–åè®®æ ˆä»¥åï¼Œè¶Šæ—©è°ƒå…¥çš„ä»»åŠ¡ï¼Œä»»åŠ¡IDè¶Šé«˜ï¼Œä¼˜å…ˆçº§è¶Šä½ï¼Œå³ç³»ç»Ÿå€¾å‘äºå¤„ç†æ–°åˆ°çš„ä»»åŠ¡ã€‚</p>
</blockquote>

<p>æ¯ä¸ªäº‹ä»¶ä»»åŠ¡ç”±å¯¹åº”çš„16bitäº‹ä»¶å˜é‡æ¥æ ‡ç¤ºï¼Œäº‹ä»¶çŠ¶æ€ç”±taskflagæ¥æ ‡ç¤ºã€‚å¦‚æœäº‹ä»¶å¤„ç†ç¨‹åºå·²ç»å®Œæˆï¼Œä½†taskflagå¹¶æ²¡æœ‰ç§»é™¤ï¼ŒOSALä¼šè®¤ä¸ºäº‹æƒ…è¿˜æ²¡æœ‰å®Œæˆè€Œç»§ç»­åœ¨è¯¥ç¨‹åºä¸­ä¸è¿”å›ã€‚æ¯”å¦‚ï¼Œåœ¨SimpleBLEPeripheralå®ä¾‹å·¥ç¨‹ä¸­ï¼Œå½“äº‹ä»¶<strong>START_DEVICE_EVT</strong>å‘ç”Ÿï¼Œå…¶å¤„ç†å‡½æ•°<strong>SimpleBLEPeripheral_ProcessEvent</strong>å°±è¿è¡Œï¼Œç»“æŸåè¿”å›16bitäº‹ä»¶å˜é‡ï¼Œå¹¶æ¸…é™¤<strong>SBP_START_DEVICE_EVT</strong>ã€‚</p>

<p>æ¯å½“OSALäº‹ä»¶æ£€æµ‹åˆ°äº†æœ‰ä»»åŠ¡äº‹ä»¶ï¼Œå…¶ç›¸åº”çš„å¤„ç†è¿›ç¨‹å°†è¢«æ·»åŠ åˆ°ç”±å¤„ç†è¿›ç¨‹æŒ‡é’ˆæ„æˆçš„äº‹ä»¶å¤„ç†è¡¨å•ä¸­ï¼Œè¯¥è¡¨å•åå«taskArrï¼ˆtaskarrayï¼‰ã€‚taskArrä¸­å„ä¸ªäº‹ä»¶è¿›ç¨‹çš„é¡ºåºå’ŒosalInitTasksåˆå§‹åŒ–å‡½æ•°ä¸­ä»»åŠ¡IDçš„é¡ºåºæ˜¯å¯¹åº”çš„ã€‚</p>

<p>è§¦å‘äº‹ä»¶çš„æ–¹æ³•æœ‰ä¸‰ç§ï¼š</p>

<ul>
<li>æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨<strong>osal_set_event</strong>å‡½æ•°ï¼ˆå‡½æ•°åŸå‹åœ¨OSAL.hæ–‡ä»¶ä¸­ï¼‰ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œç”¨æˆ·å¯ä»¥åƒå®šä¹‰å‡½æ•°å‚æ•°ä¸€æ ·è®¾ç½®ä»»åŠ¡IDå’Œäº‹ä»¶æ——è¯­ã€‚</li>
<li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨<strong>osal_start_timerEx</strong>å‡½æ•°ï¼ˆå‡½æ•°åŸå‹åœ¨<strong>OSAL_Timers.h</strong>æ–‡ä»¶ä¸­ï¼‰ï¼Œä½¿ç”¨æ–¹æ³•åŒ<strong>osal_set_event</strong>å‡½æ•°ï¼Œè€Œç¬¬ä¸‰ä¸ªä»¥æ¯«ç§’ä¸ºå•ä½çš„å‚æ•°<strong>osal_start_timerEx</strong>åˆ™æŒ‡ç¤ºè¯¥äº‹ä»¶å¤„ç†å¿…é¡»è¦åœ¨è¿™ä¸ªé™å®šæ—¶é—´å†…ï¼Œé€šè¿‡å®šæ—¶å™¨æ¥ä¸ºäº‹ä»¶å¤„ç†è®¡æ—¶ã€‚</li>
<li>è¿˜æœ‰ä¸€ç§å°±æ˜¯å®šæ—¶å™¨å®ç°äº‹ä»¶çš„å‘¨æœŸè§¦å‘ï¼Œä½¿ç”¨<strong>osal_start_reload_timer</strong>å‡½æ•°ã€‚</li>
</ul>

<p>ç±»ä¼¼äºLinuxåµŒå…¥å¼ç³»ç»Ÿå†…å­˜åˆ†é…Cå‡½æ•°<strong>mem_alloc</strong>ï¼ŒOSALåˆ©ç”¨<strong>osal_mem_alloc</strong>æä¾›åŸºæœ¬çš„å­˜å‚¨ç®¡ç†ï¼Œä½†<strong>osal_mem_alloc</strong>åªæœ‰ä¸€ä¸ªç”¨äºå®šä¹‰byteæ•°çš„å‚æ•°ã€‚å¯¹åº”çš„å†…å­˜é‡Šæ”¾å‡½æ•°ä¸º<strong>osal_mem_free</strong>ã€‚</p>

<p>ä¸åŒçš„å­ç³»ç»Ÿé€šè¿‡OSALçš„æ¶ˆæ¯æœºåˆ¶é€šä¿¡ã€‚æ¶ˆæ¯å³ä¸ºæ•°æ®ï¼Œæ•°æ®ç§ç±»å’Œé•¿åº¦éƒ½ä¸é™å®šã€‚æ¶ˆæ¯æ”¶å‘è¿‡ç¨‹æè¿°å¦‚ä¸‹ï¼š</p>

<ul>
<li>æ¥æ”¶ä¿¡æ¯ï¼Œè°ƒç”¨å‡½æ•°<strong>osal_msg_allocate</strong>åˆ›å»ºæ¶ˆæ¯å ç”¨å†…å­˜ç©ºé—´ï¼ˆå·²ç»åŒ…å«äº†<strong>osal_mem_alloc</strong>å‡½æ•°åŠŸèƒ½ï¼‰ï¼Œéœ€è¦ä¸ºè¯¥å‡½æ•°æŒ‡å®šç©ºé—´å¤§å°ï¼Œè¯¥å‡½æ•°è¿”å›å†…å­˜ç©ºé—´åœ°å€æŒ‡é’ˆï¼Œåˆ©ç”¨è¯¥æŒ‡é’ˆå°±å¯æŠŠæ‰€éœ€æ•°æ®æ‹·è´åˆ°è¯¥ç©ºé—´ã€‚</li>
<li>å‘é€æ•°æ®ï¼Œè°ƒç”¨å‡½æ•°<strong>osal_msg_send</strong>ï¼Œéœ€ä¸ºè¯¥å‡½æ•°æŒ‡å®šå‘é€ç›®æ ‡ä»»åŠ¡ï¼ŒOSALé€šè¿‡<strong>SYS_EVENT_MSG</strong>å‘ŠçŸ¥ç›®æ ‡ä»»åŠ¡ï¼Œç›®æ ‡ä»»åŠ¡çš„å¤„ç†å‡½æ•°è°ƒç”¨<strong>osal_msg_receive</strong>æ¥æ¥æ”¶å‘æ¥çš„æ•°æ®ã€‚å»ºè®®æ¯ä¸ªOSALä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªæ¶ˆæ¯å¤„ç†å‡½æ•°ï¼Œæ¯å½“ä»»åŠ¡æ”¶åˆ°ä¸€ä¸ªæ¶ˆæ¯åï¼Œé€šè¿‡æ¶ˆæ¯çš„ç§ç±»æ¥ç¡®å®šéœ€è¦æœ¬ä»»åŠ¡åšç›¸åº”å¤„ç†ã€‚æ¶ˆæ¯æ¥æ”¶å¹¶å¤„ç†å®Œæˆï¼Œè°ƒç”¨å‡½æ•°<strong>osal_msg_deallocate</strong>æ¥é‡Šæ”¾å†…å­˜ï¼ˆå·²ç»åŒ…å«äº†<strong>osal_mem_free</strong>å‡½æ•°åŠŸèƒ½ï¼‰ã€‚</li>
</ul>

<h3 id="åè®®æ ˆå¯åŠ¨æµç¨‹åˆ†æ">åè®®æ ˆå¯åŠ¨æµç¨‹åˆ†æ</h3>

<p>è¿™é‡Œä»¥åè®®æ ˆä¾‹ç¨‹ä¸­çš„ç®€å•ä»æœºå·¥ç¨‹<strong>SimpleBLEPeripheral</strong>ä¸ºä¾‹è¿›è¡Œè¯´æ˜åè®®æ ˆå¯åŠ¨è¿‡ç¨‹ï¼Œå¹³å°ä¸ºCC2541èŠ¯ç‰‡ã€‚</p>

<p>å¦‚æœåè®®æ ˆæ˜¯å®‰è£…åœ¨Cç›˜çš„è¯ä¸€èˆ¬å¯ä»¥åœ¨ç›®å½•<code>C:\Texas Instruments\BLE-CC254x-1.4.0\Projects\ble\SimpleBLEPeripheral\CC2541DB</code>ä¸­æ‰¾åˆ°<strong>SimpleBLEPeripheral.eww</strong>ï¼ŒåŒå‡»å³å¯ç”¨IARæ‰“å¼€å·¥ç¨‹äº†ã€‚</p>

<p>è¦äº†è§£ä¸€ä¸ªCè¯­è¨€å·¥ç¨‹ï¼Œæˆ‘ä»¬åº”è¯¥å…ˆæ‰¾åˆ°mainå‡½æ•°ï¼Œè¿™æ˜¯Cç¨‹åºçš„ä¸€èˆ¬å…¥å£ï¼ŒIARå·¥ç¨‹æ–‡ä»¶çš„APPä¸‹å¯ä»¥æ‰¾åˆ°<strong>SimpleBLEPeripheral_Main.c</strong>ï¼Œå…¶ä¸­å¯ä»¥çœ‹åˆ°mainå‡½æ•°ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">Int</span>  <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* Initialize hardware */</span>
    <span class="n">HAL_BOARD_INIT</span><span class="p">();</span>                       <span class="c1">// ç¡¬ä»¶åˆå§‹åŒ–
</span><span class="c1"></span>
    <span class="c1">// Initialize board I/O
</span><span class="c1"></span>    <span class="n">InitBoard</span><span class="p">(</span> <span class="n">OB_COLD</span> <span class="p">);</span>                   <span class="c1">// æ¿çº§åˆå§‹åŒ–
</span><span class="c1"></span>
    <span class="cm">/* Initialze the HAL driver */</span>
    <span class="n">HalDriverInit</span><span class="p">();</span>                        <span class="c1">// Halé©±åŠ¨åˆå§‹åŒ–
</span><span class="c1"></span>
    <span class="cm">/* Initialize NV system */</span>
    <span class="n">osal_snv_init</span><span class="p">();</span>                        <span class="c1">// Flashå­˜å‚¨SNVåˆå§‹åŒ–
</span><span class="c1"></span>
    <span class="cm">/* Initialize LL */</span>

    <span class="cm">/* Initialize the operating system */</span>
    <span class="n">osal_init_system</span><span class="p">();</span>                     <span class="c1">// OSALåˆå§‹åŒ–
</span><span class="c1"></span>
    <span class="cm">/* Enable interrupts */</span>
    <span class="n">HAL_ENABLE_INTERRUPTS</span><span class="p">();</span>                <span class="c1">// ä½¿èƒ½æ€»ä¸­æ–­
</span><span class="c1"></span>
    <span class="c1">// Final board initialization
</span><span class="c1"></span>    <span class="n">InitBoard</span><span class="p">(</span> <span class="n">OB_READY</span> <span class="p">);</span>                  <span class="c1">// æ¿çº§åˆå§‹åŒ–
</span><span class="c1"></span>
    <span class="cp">#if defined ( POWER_SAVING )
</span><span class="cp"></span>    <span class="n">osal_pwrmgr_device</span><span class="p">(</span> <span class="n">PWRMGR_BATTERY</span> <span class="p">);</span>   <span class="c1">// ä½åŠŸè€—ç®¡ç†
</span><span class="c1"></span>    <span class="cp">#endif
</span><span class="cp"></span>
    <span class="cm">/* Start OSAL */</span>
      <span class="n">osal_start_system</span><span class="p">();</span>                  <span class="c1">// No Return from here  å¯åŠ¨OSAL
</span><span class="c1"></span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿›å…¥mainå‡½æ•°åï¼Œé¦–å…ˆåšäº†å„ç§åˆå§‹åŒ–ï¼Œä»¥åŠä½åŠŸè€—ç®¡ç†ï¼Œæœ€åå¯åŠ¨äº†OSALï¼Œè¿›å…¥<strong>osal_start_system()</strong>å‡½æ•°ï¼Œå‡½æ•°ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">osal_start_system</span><span class="p">(</span> <span class="kt">void</span> <span class="p">)</span>
<span class="p">{</span>
<span class="cp">#if !defined ( ZBIT ) &amp;&amp; !defined ( UBIT )
</span><span class="cp"></span>    <span class="k">for</span><span class="p">(;;)</span>  <span class="c1">// Forever Loop
</span><span class="c1"></span><span class="cp">#endif
</span><span class="cp"></span>    <span class="p">{</span>
        <span class="n">osal_run_system</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>æ ¹æ®ä¸Šé¢ä»£ç ï¼Œå¯åŠ¨OSALåï¼Œå°±ä¼šå¾ªç¯æ‰§è¡Œ<strong>osal_run_system()</strong>ï¼Œæˆ‘ä»¬è¿˜å¾—çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°çš„å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">osal_run_system</span><span class="p">(</span> <span class="kt">void</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">uint8</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="cp">#ifndef HAL_BOARD_CC2538
</span><span class="cp"></span>    <span class="n">osalTimeUpdate</span><span class="p">();</span>                           <span class="c1">// å®šæ—¶å™¨æ›´æ–°
</span><span class="c1"></span><span class="cp">#endif
</span><span class="cp"></span>
    <span class="n">Hal_ProcessPoll</span><span class="p">();</span>                          <span class="c1">// Halå±‚ä¿¡æ¯å¤„ç†
</span><span class="c1"></span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tasksEvents</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>                   <span class="c1">// Task is highest priority that is ready.
</span><span class="c1"></span>        <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="n">tasksCnt</span><span class="p">);</span>                 <span class="c1">// æ£€æŸ¥æ¯ä¸ªäººä»»åŠ¡æ˜¯å¦æœ‰äº‹ä»¶
</span><span class="c1"></span>
    <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">&lt;</span> <span class="n">tasksCnt</span><span class="p">)</span>                         <span class="c1">// æœ‰äº‹ä»¶å‘ç”Ÿ
</span><span class="c1"></span>    <span class="p">{</span>
        <span class="n">uint16</span> <span class="n">events</span><span class="p">;</span>
        <span class="n">halIntState_t</span> <span class="n">intState</span><span class="p">;</span>

        <span class="n">HAL_ENTER_CRITICAL_SECTION</span><span class="p">(</span><span class="n">intState</span><span class="p">);</span>   <span class="c1">// è¿›å…¥ä¸´ç•ŒåŒº
</span><span class="c1"></span>        <span class="n">events</span> <span class="o">=</span> <span class="n">tasksEvents</span><span class="p">[</span><span class="n">idx</span><span class="p">];</span>
        <span class="n">tasksEvents</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                   <span class="c1">// Clear the Events for this task. æ¸…é™¤äº‹ä»¶æ ‡å¿—
</span><span class="c1"></span>        <span class="n">HAL_EXIT_CRITICAL_SECTION</span><span class="p">(</span><span class="n">intState</span><span class="p">);</span>    <span class="c1">// é€€å‡ºä¸´ç•ŒåŒº
</span><span class="c1"></span>
        <span class="n">activeTaskID</span> <span class="o">=</span> <span class="n">idx</span><span class="p">;</span>
        <span class="n">events</span> <span class="o">=</span> <span class="p">(</span><span class="n">tasksArr</span><span class="p">[</span><span class="n">idx</span><span class="p">])(</span> <span class="n">idx</span><span class="p">,</span> <span class="n">events</span> <span class="p">);</span><span class="c1">// æ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°
</span><span class="c1"></span>        <span class="n">activeTaskID</span> <span class="o">=</span> <span class="n">TASK_NO_TASK</span><span class="p">;</span>

        <span class="n">HAL_ENTER_CRITICAL_SECTION</span><span class="p">(</span><span class="n">intState</span><span class="p">);</span>   <span class="c1">// è¿›å…¥ä¸´ç•ŒåŒº
</span><span class="c1"></span>        <span class="n">tasksEvents</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">|=</span> <span class="n">events</span><span class="p">;</span>             <span class="c1">// Add back unprocessed events to the current task.
</span><span class="c1"></span>        <span class="n">HAL_EXIT_CRITICAL_SECTION</span><span class="p">(</span><span class="n">intState</span><span class="p">);</span>    <span class="c1">// é€€å‡ºä¸´ç•ŒåŒº
</span><span class="c1"></span>    <span class="p">}</span>
<span class="cp">#if defined( POWER_SAVING )                     </span><span class="c1">// æ²¡æœ‰äº‹ä»¶å‘ç”Ÿï¼Œå¹¶ä¸”å¼€å¯äº†ä½åŠŸè€—æ¨¡å¼
</span><span class="c1"></span>    <span class="k">else</span>                                        <span class="c1">// Complete pass through all task events with no activity?
</span><span class="c1"></span>    <span class="p">{</span>                                           <span class="c1">// ç³»ç»Ÿè¿›å…¥ä½åŠŸè€—æ¨¡å¼
</span><span class="c1"></span>        <span class="n">osal_pwrmgr_powerconserve</span><span class="p">();</span>            <span class="c1">// Put the processor/system into sleep
</span><span class="c1"></span>    <span class="p">}</span>
<span class="cp">#endif
</span><span class="cp"></span>
    <span class="cm">/* Yield in case cooperative scheduling is being used. */</span>
<span class="cp">#if defined (configUSE_PREEMPTION) &amp;&amp; (configUSE_PREEMPTION == 0)
</span><span class="cp"></span>    <span class="p">{</span>
        <span class="n">osal_task_yield</span><span class="p">();</span>
    <span class="p">}</span>
<span class="cp">#endif
</span><span class="cp"></span><span class="p">}</span></code></pre></div>
<p>é˜…è¯»ä»£ç å¯ä»¥æ˜ç™½OSALå¾ªç¯æ£€æµ‹æ¯ä¸€ä¸ªä»»åŠ¡æ˜¯å¦æœ‰äº‹ä»¶å‘ç”Ÿï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡å¹¶å¤„ç†è§¦å‘çš„äº‹ä»¶ï¼Œå¦‚æœæ²¡æœ‰äº‹ä»¶å¹¶ä¸”å®å®šä¹‰ä¸­å¼€å¯äº†ä½åŠŸè€—æ¨¡å¼ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥ä½åŠŸè€—æ¨¡å¼ã€‚ä½†æ˜¯OSALæ€ä¹ˆæ£€æµ‹ä»»åŠ¡æ˜¯å¦æœ‰äº‹ä»¶çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€å¥ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">events</span> <span class="o">=</span> <span class="p">(</span><span class="n">tasksArr</span><span class="p">[</span><span class="n">idx</span><span class="p">])(</span> <span class="n">idx</span><span class="p">,</span> <span class="n">events</span> <span class="p">);</span></code></pre></div>
<p>taskArråˆæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿå…¶å®å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ•°ç»„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="k">const</span> <span class="n">pTaskEventHandlerFn</span> <span class="n">tasksArr</span><span class="p">[]</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="n">LL_ProcessEvent</span><span class="p">,</span>                                              <span class="c1">// task 0
</span><span class="c1"></span>    <span class="n">Hal_ProcessEvent</span><span class="p">,</span>                                             <span class="c1">// task 1
</span><span class="c1"></span>    <span class="n">HCI_ProcessEvent</span><span class="p">,</span>                                             <span class="c1">// task 2
</span><span class="c1"></span>    <span class="cp">#if defined ( OSAL_CBTIMER_NUM_TASKS )
</span><span class="cp"></span>    <span class="n">OSAL_CBTIMER_PROCESS_EVENT</span><span class="p">(</span> <span class="n">osal_CbTimerProcessEvent</span> <span class="p">),</span>       <span class="c1">// task 3
</span><span class="c1"></span>    <span class="cp">#endif
</span><span class="cp"></span>    <span class="n">L2CAP_ProcessEvent</span><span class="p">,</span>                                           <span class="c1">// task 4
</span><span class="c1"></span>    <span class="n">GAP_ProcessEvent</span><span class="p">,</span>                                             <span class="c1">// task 5
</span><span class="c1"></span>    <span class="n">GATT_ProcessEvent</span><span class="p">,</span>                                            <span class="c1">// task 6
</span><span class="c1"></span>    <span class="n">SM_ProcessEvent</span><span class="p">,</span>                                              <span class="c1">// task 7
</span><span class="c1"></span>    <span class="n">GAPRole_ProcessEvent</span><span class="p">,</span>                                         <span class="c1">// task 8
</span><span class="c1"></span>    <span class="n">GAPBondMgr_ProcessEvent</span><span class="p">,</span>                                      <span class="c1">// task 9
</span><span class="c1"></span>    <span class="n">GATTServApp_ProcessEvent</span><span class="p">,</span>                                     <span class="c1">// task 10
</span><span class="c1"></span>    <span class="n">SimpleBLEPeripheral_ProcessEvent</span>                              <span class="c1">// task 11
</span><span class="c1"></span><span class="p">};</span></code></pre></div>
<p>tasksArrä¸­çš„æˆå‘˜æ˜¯æ¯ä¸€ä¸ªä»»åŠ¡äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæ˜¯æŒ‰ç…§ä¼˜å…ˆçº§æ’åˆ—çš„ï¼Œæ’åˆ—é¡ºåºä¸ä»»åŠ¡åˆå§‹åŒ–ä¸­ä»»åŠ¡åˆå§‹åŒ–é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œè¿™æ ·å°±ä¿è¯äº†è§¦å‘äº‹ä»¶æˆ–äº§ç”Ÿæ¶ˆæ¯èƒ½å¤Ÿå‡†ç¡®ä¼ é€’åˆ°ç›¸åº”çš„ä»»åŠ¡å¤„ç†å‡½æ•°ä¸­ï¼Œä»»åŠ¡åˆå§‹åŒ–ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">osalInitTasks</span><span class="p">(</span> <span class="kt">void</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">uint8</span> <span class="n">taskID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">tasksEvents</span> <span class="o">=</span> <span class="p">(</span><span class="n">uint16</span> <span class="o">*</span><span class="p">)</span><span class="n">osal_mem_alloc</span><span class="p">(</span> <span class="k">sizeof</span><span class="p">(</span> <span class="n">uint16</span> <span class="p">)</span> <span class="o">*</span> <span class="n">tasksCnt</span><span class="p">);</span>
    <span class="n">osal_memset</span><span class="p">(</span> <span class="n">tasksEvents</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="k">sizeof</span><span class="p">(</span> <span class="n">uint16</span> <span class="p">)</span> <span class="o">*</span> <span class="n">tasksCnt</span><span class="p">));</span>

    <span class="cm">/* LL Task */</span>
    <span class="n">LL_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="cm">/* Hal Task */</span>
    <span class="n">Hal_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="cm">/* HCI Task */</span>
    <span class="n">HCI_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

<span class="cp">#if defined ( OSAL_CBTIMER_NUM_TASKS )
</span><span class="cp"></span>    <span class="cm">/* Callback Timer Tasks */</span>
    <span class="n">osal_CbTimerInit</span><span class="p">(</span> <span class="n">taskID</span> <span class="p">);</span>
    <span class="n">taskID</span> <span class="o">+=</span> <span class="n">OSAL_CBTIMER_NUM_TASKS</span><span class="p">;</span>
<span class="cp">#endif
</span><span class="cp"></span>
    <span class="cm">/* L2CAP Task */</span>
    <span class="n">L2CAP_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="cm">/* GAP Task */</span>
    <span class="n">GAP_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="cm">/* GATT Task */</span>
    <span class="n">GATT_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="cm">/* SM Task */</span>
    <span class="n">SM_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="cm">/* Profiles */</span>
    <span class="n">GAPRole_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>
    <span class="n">GAPBondMgr_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="n">GATTServApp_Init</span><span class="p">(</span> <span class="n">taskID</span><span class="o">++</span> <span class="p">);</span>

    <span class="cm">/* Application */</span>
    <span class="n">SimpleBLEPeripheral_Init</span><span class="p">(</span> <span class="n">taskID</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>æˆ‘ä»¬åšBLEå¼€å‘ï¼Œä¸»è¦æ˜¯ç¼–å†™Applicationï¼Œè€Œåœ¨SimpleBLEPeripheralå·¥ç¨‹ä¸­çš„åº”ç”¨ç¨‹åºåˆ™æ˜¯SimpleBLEPeripheralï¼Œå¯¹åº”ä¸¤ä¸ªé‡è¦çš„å‡½æ•°å°±æ˜¯ä»»åŠ¡åˆå§‹åŒ–å‡½æ•°<strong>SimpleBLEPeripheral_Init</strong>å’Œäº‹ä»¶å¤„ç†å‡½æ•°<strong>SimpleBLEPeripheral_ProcessEvent</strong>ã€‚</p>

<p>åœ¨<strong>SimpleBLEPeripheral_Init</strong>ä¸­ä¸»è¦æ˜¯å¯¹GAPå’ŒGATTè¿›è¡Œåˆå§‹åŒ–é…ç½®ï¼Œåœ¨æœ€åä¼šæ‰§è¡Œ<strong>osal_set_event( simpleBLEPeripheral_TaskID, SBP_START_DEVICE_EVT )</strong>è§¦å‘å¯åŠ¨è®¾å¤‡çš„äº‹ä»¶ï¼Œå¤„ç†<strong>SBP_START_DEVICE_EVT</strong>äº‹ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="k">if</span> <span class="p">(</span> <span class="n">events</span> <span class="o">&amp;</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Start the Device
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="n">GAPRole_StartDevice</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">simpleBLEPeripheral_PeripheralCBs</span> <span class="p">);</span>

    <span class="c1">// Start Bond Manager
</span><span class="c1"></span>    <span class="n">VOID</span> <span class="nf">GAPBondMgr_Register</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">simpleBLEPeripheral_BondMgrCBs</span> <span class="p">);</span>
    <span class="c1">// Set timer for first periodic event
</span><span class="c1"></span>    <span class="n">osal_start_timerEx</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT_PERIOD</span> <span class="p">);</span>

    <span class="k">return</span> <span class="p">(</span> <span class="n">events</span> <span class="o">^</span> <span class="n">SBP_START_DEVICE_EVT</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>èƒ½å¤Ÿçœ‹åˆ°åœ¨æ‰§è¡Œä¸Šè¿°ä»£ç çš„æ—¶å€™ï¼Œè®¾ç½®å®šæ—¶è§¦å‘äº‹ä»¶<strong>SBP_PERIODIC_EVT</strong>ï¼Œæ—¶é—´ä¸º<strong>SBP_PERIODIC_EVT_PERIOD</strong>ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æœ‰å¯¹<strong>SBP_PERIODIC_EVT</strong>çš„å¤„ç†ï¼Œå¤„ç†ä¸­åˆé‡æ–°è®¾ç½®æ­¤äº‹ä»¶çš„å®šæ—¶è§¦å‘ï¼Œä¹Ÿå°±å®ç°äº†äº‹ä»¶å‘¨æœŸè§¦å‘ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="k">if</span> <span class="p">(</span> <span class="n">event</span> <span class="o">&amp;</span> <span class="n">SBP_PERIODIC_EVT</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Restart timer
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span> <span class="n">SBP_PERIODIC_EVT_PERIOD</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="n">osal_start_timerEx</span><span class="p">(</span> <span class="n">simpleBLEPeripheral_TaskID</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT</span><span class="p">,</span> <span class="n">SBP_PERIODIC_EVT_PERIOD</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">// Perform periodic application task
</span><span class="c1"></span>    <span class="n">performPeriodicTassk</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">(</span> <span class="n">events</span> <span class="o">^</span> <span class="n">SBP_PERIODIC_EVT</span> <span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>å¦å¤–è¿˜æœ‰ä¸¤ä¸ªé‡è¦çš„å›è°ƒå‡½æ•°ï¼š</p>

<ul>
<li><strong>peripheralStateNotificationCB</strong>ï¼šè¿™ä¸ªå‡½æ•°ä¸»è¦æ˜¯åœ¨è®¾å¤‡çš„è¿æ¥çŠ¶æ€æ”¹å˜çš„æ—¶å€™ç”±åº•å±‚å›è°ƒï¼Œå¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­æŸ¥çœ‹è®¾å¤‡çŠ¶æ€ä»¥åšå‡ºéœ€è¦çš„å¤„ç†ã€‚</li>
<li><strong>simpleProfileChangeCB</strong>ï¼šè¿™ä¸ªå‡½æ•°ä¸»è¦ä¼šåœ¨è®¾å¤‡è“ç‰™å°„é¢‘æ¥æ”¶åˆ°æ•°æ®çš„æ—¶å€™åº•å±‚å›è°ƒç”¨æ¥åŠæ—¶è·å–æ¥æ”¶åˆ°çš„æ•°æ®ã€‚</li>
</ul>

<p>åšåè®®æ ˆçš„å¼€å‘ä¸»è¦æ˜¯åšè‡ªå·±éœ€è¦çš„åº”ç”¨ï¼Œå¯ä»¥åœ¨ä¾‹ç¨‹åŸºç¡€ä¸Šæ·»åŠ è‡ªå·±éœ€è¦çš„å¤„ç†å®Œæˆåº”ç”¨ï¼Œä¹Ÿå¯ä»¥æ–°å»ºè‡ªå·±çš„åº”ç”¨ï¼Œåªè¦æŒ‰ç…§OSALä¸­ä»»åŠ¡çš„æ·»åŠ æ­¥éª¤æ·»åŠ å³å¯ï¼Œäº†è§£äº†ä»¥ä¸Šçš„å†…å®¹ï¼Œå°±å¯ä»¥å°è¯•å¼€å‘äº†ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>Fedoraä½¿ç”¨ç¬”è®°</title>
			<link>https://www.smslit.top/2016/04/28/fedora-note/</link>
			<pubDate>Thu, 28 Apr 2016 15:17:29 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/28/fedora-note/</guid>
			<description>&lt;p&gt;ä¿—è¯è¯´å¾—å¥½ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œæ›¾ç»è§£å†³è¿‡çš„é—®é¢˜ï¼Œå†æ¬¡é‡åˆ°è¿˜è¦å†èŠ±å¤§é‡æ—¶é—´å»è§£å†³ï¼Œä¸èƒ½å¿å‘€ï¼Œåœ¨fedoraçš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œéš¾å…é‡åˆ°å¥½å¤šé—®é¢˜ï¼Œæœ¬æ–‡è®°å½•åœ¨ä½¿ç”¨Fedoraè¿‡ç¨‹ä¸­éƒ¨åˆ†é‡åˆ°çš„é—®é¢˜ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¿—è¯è¯´å¾—å¥½ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œæ›¾ç»è§£å†³è¿‡çš„é—®é¢˜ï¼Œå†æ¬¡é‡åˆ°è¿˜è¦å†èŠ±å¤§é‡æ—¶é—´å»è§£å†³ï¼Œä¸èƒ½å¿å‘€ï¼Œåœ¨fedoraçš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œéš¾å…é‡åˆ°å¥½å¤šé—®é¢˜ï¼Œæœ¬æ–‡è®°å½•åœ¨ä½¿ç”¨Fedoraè¿‡ç¨‹ä¸­éƒ¨åˆ†é‡åˆ°çš„é—®é¢˜ã€‚</p>

<h3 id="å®‰è£…eagle-pcbç¼ºå°‘åº“çš„é—®é¢˜">å®‰è£…eagle pcbç¼ºå°‘åº“çš„é—®é¢˜</h3>

<p>åœ¨å®‰è£…eagle pcbè½¯ä»¶çš„æ—¶å€™ï¼Œæç¤ºç¼ºå°‘åº“æ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š</p>

<blockquote>
<p>âœ  CadSoft.Computer.EAGLE.Professional.v7.5.0.LINUX.X64 ./eagle-lin64-7.5.0.run
Ensure the following libraries are available:
    libssl.so.1.0.0 =&gt; not found
    libcrypto.so.1.0.0 =&gt; not found
/tmp/eagle-setup.6307/eagle-7.5.0/bin/eagle: error while loading shared libraries: libssl.so.1.0.0: cannot open shared object file: No such file or directory</p>
</blockquote>

<p>åæ¥å‘ç°ï¼ŒåŸæ¥ç³»ç»Ÿä¸­å…¶å®å·²ç»å®‰è£…äº†ä¾èµ–åº“ï¼Œåªä¸è¿‡æ˜¯ç‰ˆæœ¬è¾ƒé«˜ï¼Œeagleå®‰è£…è¿‡ç¨‹ä¸­ä¸è®¤ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å»ºç«‹è½¯é“¾æ¥ï¼Œåä¸ºæ‰€éœ€ä¾èµ–åº“å°±å¯ä»¥äº†ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå½“ç„¶åº“çš„ç‰ˆæœ¬è¿˜æ˜¯ä»¥å½“å‰ç”µè„‘ç³»ç»Ÿä¸ºå‡†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">cd</span> /lib/lib64
$ sudo ln -s libssl.so.1.0.2g libssl.so.1.0.0
$ sudo ln -s libcrypto.so.1.0.2g libcrypto.so.1.0.0</code></pre></div>
<h3 id="å®‰è£…evopopä¸»é¢˜">å®‰è£…Evopopä¸»é¢˜</h3>

<ul>
<li><p>æ·»åŠ ä¸»é¢˜çš„å®‰è£…æºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo dnf copr <span class="nb">enable</span> heikoada/gtk-themes</code></pre></div></li>

<li><p>å®‰è£…ä¸»é¢˜ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo dnf install evopop-gtk-theme-common.noarch evopop-gtk-theme-gtk3 evopop-gtk-theme-metacity evopop-gtk-theme-gtk2</code></pre></div></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>ç³»ç»ŸåŠç¼–è¾‘å™¨çš„å­—ä½“è®¾ç½®</title>
			<link>https://www.smslit.top/2016/04/28/font-settings/</link>
			<pubDate>Thu, 28 Apr 2016 09:20:28 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/28/font-settings/</guid>
			<description>&lt;p&gt;æœ€è¿‘åœ¨ç”¨Linuxï¼Œå®åœ¨æ˜¯å—ä¸äº†ä¸­æ–‡å­—ä½“çš„æ˜¾ç¤ºäº†ï¼Œç»ˆç«¯é‡Œé¢è®¾ç½®äº†Source Code Proå­—ä½“ï¼Œè¿™è‹±æ–‡å­—ä½“å¾ˆæ£’ï¼Œé€‚åˆåšç¼–ç¨‹å­—ä½“ï¼Œä½†æ˜¾ç¤ºçš„ä¸­æ–‡å¯ä»¥éš¾çœ‹åˆ°å“­ã€‚ç´¢æ€§åœ¨æœ¬æ–‡è¯´ä¸€ä¸‹æ€ä¹ˆèƒ½åœ¨ä½¿ç”¨å¥½çœ‹çš„è‹±æ–‡å­—ä½“çš„åŒæ—¶ï¼Œå¯ä»¥æ˜¾ç¤ºä½ å–œæ¬¢çš„ä¸­æ–‡å­—ä½“ï¼Œå¦å¤–ä¹Ÿæ•´ç†ä¸€ä¸‹ç¼–è¾‘å™¨ä¸­å­—ä½“çš„è®¾ç½®æ–¹æ³•ï¼Œå¦‚Atomã€STç­‰ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘åœ¨ç”¨Linuxï¼Œå®åœ¨æ˜¯å—ä¸äº†ä¸­æ–‡å­—ä½“çš„æ˜¾ç¤ºäº†ï¼Œç»ˆç«¯é‡Œé¢è®¾ç½®äº†Source Code Proå­—ä½“ï¼Œè¿™è‹±æ–‡å­—ä½“å¾ˆæ£’ï¼Œé€‚åˆåšç¼–ç¨‹å­—ä½“ï¼Œä½†æ˜¾ç¤ºçš„ä¸­æ–‡å¯ä»¥éš¾çœ‹åˆ°å“­ã€‚ç´¢æ€§åœ¨æœ¬æ–‡è¯´ä¸€ä¸‹æ€ä¹ˆèƒ½åœ¨ä½¿ç”¨å¥½çœ‹çš„è‹±æ–‡å­—ä½“çš„åŒæ—¶ï¼Œå¯ä»¥æ˜¾ç¤ºä½ å–œæ¬¢çš„ä¸­æ–‡å­—ä½“ï¼Œå¦å¤–ä¹Ÿæ•´ç†ä¸€ä¸‹ç¼–è¾‘å™¨ä¸­å­—ä½“çš„è®¾ç½®æ–¹æ³•ï¼Œå¦‚Atomã€STç­‰ã€‚</p>

<h4 id="linuxä¸­è®¾ç½®å–œæ¬¢çš„ä¸­è‹±æ–‡å­—ä½“æ··åˆæ˜¾ç¤º">linuxä¸­è®¾ç½®å–œæ¬¢çš„ä¸­è‹±æ–‡å­—ä½“æ··åˆæ˜¾ç¤º</h4>

<p>æµ‹è¯•å¹³å°æ˜¯Fedora Linuxï¼Œè¦ä½¿ç”¨çš„å­—ä½“æ˜¯ï¼š</p>

<ul>
<li>è‹±æ–‡ï¼šSource Code Pro</li>
<li>ä¸­æ–‡ï¼šæ€æºé›…é»‘ï¼ˆSource Han Sans CNï¼‰</li>
</ul>

<p>ä¸ºäº†èƒ½å¤Ÿæ··åˆä½¿ç”¨è¿™ä¸¤ä¸ªå­—ä½“ï¼Œæˆ‘ä»¬éœ€è¦ç¼–è¾‘<code>/etc/fonts/fonts.conf</code>æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨vimç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼Œè¦ç”¨sudoæé«˜æƒé™æ“ä½œï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo vim /etc/fonts/fonts.conf</code></pre></div>
<p>å¯ä»¥çœ‹åˆ°æ–‡ä»¶å°±æ˜¯ä¸ªxmlæ–‡ä»¶ï¼Œå…¶ä¸­å¾ˆå¤šmatchæ ‡ç­¾ï¼Œåªéœ€è¦åœ¨æœ€åä¸€ä¸ªmatchæ ‡ç­¾ååŠ å…¥ä»¥ä¸‹ä»£ç å°±å¯ä»¥ï¼ŒåŠ ä»£ç çš„ä½ç½®åº”è¯¥åªéœ€è¦ä¸matchåŒçº§å°±å¯ä»¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;alias&gt;</span>
	<span class="nt">&lt;family&gt;</span>Source Code Pro<span class="nt">&lt;/family&gt;</span>
	<span class="nt">&lt;prefer&gt;</span>
		<span class="nt">&lt;family&gt;</span>Source Han Sans CN <span class="nt">&lt;/family&gt;</span>
	<span class="nt">&lt;/prefer&gt;</span>
<span class="nt">&lt;/alias&gt;</span></code></pre></div>
<p>ç¬¬ä¸€ä¸ªfamilyæ ‡ç­¾ä¸­æ˜¯è‹±æ–‡å­—ä½“çš„åç§°ï¼Œç¬¬äºŒä¸ªfamilyçš„æ ‡ç­¾ä¸­æ˜¯ä¸­æ–‡å­—ä½“çš„åç§°ï¼Œå¯¹åº”ä¿®æ”¹æˆä½ å–œæ¬¢çš„å­—ä½“å°±å¯ä»¥äº†ï¼Œç„¶åå»gnome-tweak-toolä¸­è®¾ç½®å­—ä½“ä¸ºSource Code Proå°±å¯ä»¥äº†ï¼Œæˆ–è€…å•ç‹¬è®¾ç½®ç»ˆç«¯çš„é…ç½®ï¼Œæ¢æˆå…¶ä»–å­—ä½“ï¼Œç„¶åå†æ¢åˆ°Source Code Proï¼ˆå¯¹åº”ä½ å–œæ¬¢çš„è‹±æ–‡å­—ä½“ï¼‰ï¼Œç„¶åå†æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä¸€æ®µä¸­è‹±æ–‡å­—ç¬¦ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä¸­è‹±æ–‡å„æ˜¯ä½ å–œæ¬¢çš„æ ·å­ã€‚</p>

<h4 id="atomç¼–è¾‘å™¨çª—å£å­—ä½“è®¾ç½®">Atomç¼–è¾‘å™¨çª—å£å­—ä½“è®¾ç½®</h4>

<p>æµ‹è¯•å­—ä½“ï¼š</p>

<ul>
<li>è‹±æ–‡ï¼šSource Code Pro</li>
<li>ä¸­æ–‡ï¼šSource Han Sans CN</li>
</ul>

<p>æ‰“å¼€Atomï¼Œ<code>CTRL</code>+<code>,</code>ï¼Œå¯åŠ¨åˆ°è®¾ç½®ç•Œé¢ï¼Œå‘ä¸‹æ»šåŠ¨ç•Œé¢ï¼Œä¼šæ‰¾åˆ°Editor Settingsåˆ†ç»„ï¼Œå…¶ä¸­æœ‰ä¸ªfont familyï¼Œåœ¨ç¼–è¾‘æ¡†ä¸­è¾“å…¥ä½ å–œæ¬¢çš„å­—ä½“åç§°ï¼Œå¦‚ä¸‹çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">Source</span> <span class="nt">Code</span> <span class="nt">Pro</span><span class="o">,</span> <span class="nt">Source</span> <span class="nt">Han</span> <span class="nt">Sans</span> <span class="nt">CN</span></code></pre></div>
<p>é‡æ–°æ‰“å¼€ç¼–è¾‘çª—å£ï¼Œå¯ä»¥çœ‹åˆ°å­—ä½“å·²è®¾ç½®æˆåŠŸã€‚</p>

<h4 id="iii-atomçš„markdowné¢„è§ˆçª—å£æ˜¾ç¤ºå­—ä½“è®¾ç½®">III. Atomçš„markdowné¢„è§ˆçª—å£æ˜¾ç¤ºå­—ä½“è®¾ç½®</h4>

<p>æµ‹è¯•å­—ä½“ï¼š</p>

<ul>
<li>è‹±æ–‡ï¼šSource Code Pro</li>
<li>ä¸­æ–‡ï¼šSource Han Sans CN</li>
</ul>

<p>æ‰“å¼€Atomï¼ŒåŒæ ·<code>CTRL</code>+<code>,</code>`ï¼Œæ‰“å¼€è®¾ç½®çª—å£ï¼Œå·¦è¾¹æ é€‰ä¸­Packageï¼Œä¾¿ä¼šåœ¨å³ä¾§çª—å£æ˜¾ç¤ºæ’ä»¶åˆ—è¡¨ï¼Œæ»šåŠ¨é¡µé¢ï¼Œæ‰¾åˆ°Markdown-Previewæ’ä»¶ï¼Œå•å‡»è¿›å…¥æ’ä»¶è®¾ç½®é¡µé¢ï¼Œæ»šåŠ¨é¡µé¢ï¼Œå‘€ï¼Œå’‹æ‰¾ä¸åˆ°å­—ä½“è®¾ç½®çš„åœ°æ–¹å‘¢ï¼Ÿæ€ä¹ˆåŠï¼Ÿä¸è¦ç´§ï¼Œæ»šåŠ¨åˆ°æœ€ä¸‹é¢ä¼šå‘ç°Customizeåˆ†ç»„ï¼Œè‡ªå®šä¹‰ï¼Œåœ¨çœ‹æœ€ä¸‹é¢æœ‰æ®µè¯ï¼š</p>

<blockquote>
<p>To customize even further, the styling can be overridden in your styles.less file. For example:</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">markdown-preview</span><span class="p">.</span><span class="nc">markdown-preview</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="p">:</span> <span class="mh">#444</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>è¿™å€’æé†’æˆ‘äº†ï¼Œatomå…¶å®å°±æ˜¯ä¸€ä¸ªæœ¬åœ°çš„ç½‘é¡µæµè§ˆå™¨ï¼Œæ ·å¼æ˜¯ç”±cssé…ç½®çš„ï¼Œä¸Šé¢çš„æç¤ºä¸­è¯´è¦ä¿®æ”¹style.lessæ–‡ä»¶ï¼Œå¯ä»¥ä»èœå•æ çš„editèœå•ä¸­æ‰¾åˆ°ä¸€é¡¹StyleSheet&hellip;ï¼Œå•å‡»ä¾¿æ‰“å¼€style.lessæ–‡ä»¶äº†ï¼Œåœ¨æœ€ååŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œä¿å­˜ï¼Œå†å»æ‰“å¼€markdownæ–‡ä»¶ï¼Œç„¶åctrl+shift+mæ‰“å¼€é¢„è§ˆçª—å£ä¾¿ä¼šå‘ç°å­—ä½“å°±æ˜¯ä½ å¸Œæœ›çœ‹åˆ°çš„æ ·å­äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">markdown-preview</span><span class="p">.</span><span class="nc">markdown-preview</span> <span class="p">{</span>
  <span class="k">font-family</span><span class="p">:</span> <span class="n">Source</span> <span class="n">Code</span> <span class="n">Pro</span><span class="p">,</span> <span class="n">Source</span> <span class="n">Han</span> <span class="n">Sans</span> <span class="n">CN</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Linuxä¸‹é…ç½®Swiftå¼€å‘ç¯å¢ƒå’Œåˆæ­¥ä½¿ç”¨</title>
			<link>https://www.smslit.top/2016/04/16/install-use-swift/</link>
			<pubDate>Sat, 16 Apr 2016 16:13:36 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/16/install-use-swift/</guid>
			<description>&lt;p&gt;ä¸æƒ³å¹²æ´»äº†ï¼Œæ•´ç†ä¸€ä¸‹å¦‚ä½•åœ¨Linuxä¸‹é…ç½®Swiftçš„å¼€å‘ç¯å¢ƒå’Œåˆæ­¥çš„ä½¿ç”¨ï¼Œå¦‚æœä½ æ˜¯åœˆå†…äººä½ è‚¯å®šæ¸…æ¥šSwiftï¼Œå¦åˆ™ä½ ä¼šæœ‰ç–‘é—®Swiftæ˜¯ä»€ä¹ˆé¬¼ï¼Œä½ ä»¥ä¸ºæˆ‘ä¼šåœ¨è¿™é‡Œå‘Šè¯‰ä½ Swiftçš„è¯¦ç»†å†…å®¹å—ï¼Ÿå°±ä¸€å¥è¯Swiftæ˜¯Appleå…¬å¸åœ¨2014å¹´å¼€å‘è€…å¤§ä¼šä¸Šå‘å¸ƒçš„ä¸€é—¨æ–°çš„å¼€å‘è¯­è¨€ï¼ˆè¯¦ç»†å†…å®¹è¿˜æ˜¯é—®è°·å“¥æˆ–è€…&lt;a href=&#34;https://swift.org/about/#swiftorg-and-open-source&#34; target=&#34;_blank&#34;&gt;ç‚¹æˆ‘&lt;/a&gt;å§æˆ–è€…&lt;a href=&#34;http://wiki.jikexueyuan.com/project/swift/chapter1/01_swift.html&#34; target=&#34;_blank&#34;&gt;æˆ³æˆ‘&lt;/a&gt;ï¼ï¼‰ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¸æƒ³å¹²æ´»äº†ï¼Œæ•´ç†ä¸€ä¸‹å¦‚ä½•åœ¨Linuxä¸‹é…ç½®Swiftçš„å¼€å‘ç¯å¢ƒå’Œåˆæ­¥çš„ä½¿ç”¨ï¼Œå¦‚æœä½ æ˜¯åœˆå†…äººä½ è‚¯å®šæ¸…æ¥šSwiftï¼Œå¦åˆ™ä½ ä¼šæœ‰ç–‘é—®Swiftæ˜¯ä»€ä¹ˆé¬¼ï¼Œä½ ä»¥ä¸ºæˆ‘ä¼šåœ¨è¿™é‡Œå‘Šè¯‰ä½ Swiftçš„è¯¦ç»†å†…å®¹å—ï¼Ÿå°±ä¸€å¥è¯Swiftæ˜¯Appleå…¬å¸åœ¨2014å¹´å¼€å‘è€…å¤§ä¼šä¸Šå‘å¸ƒçš„ä¸€é—¨æ–°çš„å¼€å‘è¯­è¨€ï¼ˆè¯¦ç»†å†…å®¹è¿˜æ˜¯é—®è°·å“¥æˆ–è€…<a href="https://swift.org/about/#swiftorg-and-open-source" target="_blank">ç‚¹æˆ‘</a>å§æˆ–è€…<a href="http://wiki.jikexueyuan.com/project/swift/chapter1/01_swift.html" target="_blank">æˆ³æˆ‘</a>ï¼ï¼‰ã€‚</p>

<h2 id="æµ‹è¯•å¹³å°">æµ‹è¯•å¹³å°</h2>

<p>Ubuntu15.10</p>

<h2 id="æ­å»ºå¼€å‘ç¯å¢ƒ">æ­å»ºå¼€å‘ç¯å¢ƒ</h2>

<p>å®‰è£…ç›¸åº”ä¾èµ–åŒ…å’Œä¸‹è½½å®‰è£…SwiftåŒ…ï¼Œåšç›¸åº”ç¯å¢ƒé…ç½®ã€‚</p>

<h3 id="å®‰è£…ä¾èµ–åŒ…">å®‰è£…ä¾èµ–åŒ…</h3>

<p>swiftçš„ä½¿ç”¨å’Œå¼€å‘ä¼šä¾èµ–<code>clang</code>å’Œ<code>libicu-dev</code>å¼€å‘åŒ…ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨Swiftä¹‹å‰å…ˆå®‰è£…ä¸€ä¸‹ï¼Œç»ˆç«¯ä¸‹æ‰§è¡Œå‘½ä»¤å®‰è£…å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo apt-get install clang libicu-dev</code></pre></div>
<h3 id="ä¸‹è½½æœ€æ–°swiftåŒ…">ä¸‹è½½æœ€æ–°SwiftåŒ…</h3>

<p><a href="https://swift.org/download/#using-downloads" target="_blank">ç‚¹æˆ‘</a>å¯ä»¥è·³è½¬åˆ°ä¸‹è½½é¡µé¢ï¼Œé¡µé¢æœ€é¡¶éƒ¨å°±æ˜¯æœ€æ–°çš„å‘è¡ŒåŒ…ï¼Œå…¶ä¸­æ ¼å¼ä¸º<code>swift-&lt;VERSION&gt;-&lt;PLATFORM&gt;.tar.gz</code>çš„æ–‡ä»¶ä¾¿æ˜¯Swiftå¼€å‘è¦ç”¨åˆ°çš„å·¥å…·é“¾ï¼Œ<code>.sig</code>æ–‡ä»¶æ˜¯æ•°å­—ç­¾åæ–‡ä»¶ã€‚</p>

<h3 id="å¯¼å…¥pgpå¯†é’¥">å¯¼å…¥PGPå¯†é’¥</h3>

<p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä¸‹è½½SwiftåŒ…ï¼Œéœ€è¦å°†å¯¼å…¥GPGå¯†é’¥å¯¼å…¥åˆ°ä½ çš„å¯†é’¥ç¯ä¸­ï¼Œä¸¤ç§æ–¹å¼ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gpg --keyserver hkp://pool.sks-keyservers.net <span class="se">\
</span><span class="se"></span>      --recv-keys <span class="se">\
</span><span class="se"></span>      <span class="s1">&#39;7463 A81A 4B2E EA1B 551F  FBCF D441 C977 412B 37AD&#39;</span> <span class="se">\
</span><span class="se"></span>      <span class="s1">&#39;1BE1 E29A 084C B305 F397  D62A 9F59 7F4D 21A5 6D5F&#39;</span></code></pre></div>
<p>æˆ–è€…</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ wget -q -O - https://swift.org/keys/all-keys.asc <span class="p">|</span> gpg --import -</code></pre></div>
<h3 id="éªŒè¯gpgç­¾å">éªŒè¯GPGç­¾å</h3>

<p>linuxçš„<code>.tar.gz</code>å‹ç¼©åŒ…éƒ½æ˜¯ä½¿ç”¨Swiftå¼€æºé¡¹ç›®çš„å¯†é’¥é€šè¿‡<strong>GnuPG</strong>ç­¾åäº†çš„ï¼Œè‹¹æœå»ºè®®å’Œé¼“åŠ±æ¯ä¸ªå°†è¦ä½¿ç”¨Swiftè½¯ä»¶åŒ…çš„äººéƒ½è¿›è¡Œç­¾åéªŒè¯ï¼Œæ­¤æ­¥å¯ä»¥çœç•¥ï¼ˆä¸éªŒè¯ä¸å½±å“ä½¿ç”¨ï¼‰ï¼Œä½†è¿˜æ˜¯æŒ‰ç…§ä»–ä»¬çš„å»ºè®®è¿›è¡ŒéªŒè¯å§ã€‚</p>

<h3 id="æ›´æ–°å¯†é’¥">æ›´æ–°å¯†é’¥</h3>

<p>é¦–å…ˆï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥æ›´æ–°å¯†é’¥ä½¿åŸæ¥çš„è¯ä¹¦ä½œåºŸï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gpg --keyserver hkp://pool.sks-keyservers.net --refresh-keys Swift</code></pre></div>
<h3 id="éªŒè¯">éªŒè¯</h3>

<p>ç„¶åï¼Œä½¿ç”¨ç­¾åæ–‡ä»¶éªŒè¯å…³è”çš„Swiftå‹ç¼©åŒ…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gpg --verify swift-&lt;VERSION&gt;-&lt;PLATFORM&gt;.tar.gz.sig
...
gpg: Good signature from <span class="s2">&#34;Swift Automatic Signing Key #1 &lt;swift-infrastructure@swift.org&gt;&#34;</span></code></pre></div>
<p>å¦‚æœéªŒè¯å¤±è´¥ï¼Œå¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰å…¬å…±å¯†é’¥(<code>gpg: Can't check signature: No public key</code>)ï¼Œå¯ä»¥æŒ‰ç…§<a href="#activeKey">æ¿€æ´»ç­¾åå¯†é’¥</a>çš„æ–¹æ³•å¯¼å…¥å¯†é’¥ã€‚</p>

<p>ä¸é¡ºåˆ©çš„è¯ï¼Œè¿˜æœ‰å¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªè­¦å‘Šï¼Œæ±—!!!ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.</code></pre></div>
<p>è¿™ä¸ªè­¦å‘Šè¯´æ˜åœ¨å¯†é’¥ä¸ç³»ç»Ÿé—´æ²¡æœ‰å¯ä¿¡çš„ç½‘ç»œè·¯å¾„ï¼Œåªè¦æ˜¯æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤ä»å¯ä¿¡çš„çš„æ¥æºè·å–çš„å¯†é’¥ï¼Œè­¦å‘Šå‡ ä¹æ²¡æœ‰å½±å“ã€‚</p>

<h3 id="è§£å‹å‹ç¼©åŒ…">è§£å‹å‹ç¼©åŒ…</h3>

<p>æŒ‰ç…§ä¸‹é¢å‘½ä»¤è§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…ï¼Œéœ€è¦å°†ä¸‹é¢å‘½ä»¤ä¸­å‹ç¼©åŒ…çš„åå­—æ”¹æˆä¸‹è½½çš„ï¼Œè§£å‹åçš„æ–‡ä»¶ç›®å½•é‡Œæœ‰<code>usr/</code>ç›®å½•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tar xzf swift-&lt;VERSION&gt;-&lt;PLATFORM&gt;.tar.gz</code></pre></div>
<h3 id="æ·»åŠ è·¯å¾„">æ·»åŠ è·¯å¾„</h3>

<p>éœ€è¦å°†è§£å‹å‡ºæ¥çš„Swiftå·¥å…·é“¾æ·»åŠ åˆ°PATHå˜é‡é‡Œï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤(<strong>æ³¨ï¼š</strong>éœ€è¦å°†<code>/path/to/</code>æ¢æˆè§£å‹åSwiftå·¥å…·é“¾çš„ç›®å½•)ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/path/to/usr/bin:<span class="s2">&#34;</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">&#34;</span></code></pre></div>
<h3 id="æ¿€æ´»ç­¾åå¯†é’¥">æ¿€æ´»ç­¾åå¯†é’¥</h3>

<p>Swiftå·¥ç¨‹ä¸ºå¼€å‘ç‰ˆçš„ä½¿ç”¨ä¸€ä¸ªå¯†é’¥é›†ï¼Œä¸ºæ¯ä¸ªå®˜æ–¹å‘è¡Œç‰ˆçš„æä¾›ç‹¬ç«‹çš„å¯†é’¥ï¼Œéƒ½æ˜¯ä½¿ç”¨4096-bit RSAå¯†é’¥ã€‚</p>

<p>ä¸‹é¢æ˜¯è·å–ç­¾åå·¥å…·é“¾å¯†é’¥çš„ä¸¤ç§æ–¹æ³•ï¼š</p>

<ul>
<li><p><code>Swiftè‡ªåŠ¨ç­¾åå¯†é’¥ #1 &lt;swift-infrastructure@swift.org&gt;</code></p>

<blockquote>
<p>Download: <a href="https://swift.org/keys/automatic-signing-key-1.asc" target="_blank">https://swift.org/keys/automatic-signing-key-1.asc</a></p>

<p>Fingerprint: 7463 A81A 4B2E EA1B 551F FBCF D441 C977 412B 37AD</p>

<p>Long ID: D441C977412B37AD</p>
</blockquote>

<p>æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯¼å…¥å¯†é’¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gpg --keyserver hkp://pool.sks-keyservers.net <span class="se">\
</span><span class="se"></span>      --recv-keys <span class="se">\
</span><span class="se"></span>    <span class="s1">&#39;7463 A81A 4B2E EA1B 551F  FBCF D441 C977 412B 37AD&#39;</span></code></pre></div>
<p>æˆ–è€…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ wget -q -O - https://swift.org/keys/automatic-signing-key-1.asc <span class="p">|</span> gpg --import -</code></pre></div></li>

<li><p><code>Swift 2.2 å‘è¡Œç‰ˆç­¾åå¯†é’¥ &lt;swift-infrastructure@swift.org&gt;</code></p>

<blockquote>
<p>Download: <a href="https://swift.org/keys/release-key-swift-2.2.asc" target="_blank">https://swift.org/keys/release-key-swift-2.2.asc</a>
Fingerprint: 1BE1 E29A 084C B305 F397 D62A 9F59 7F4D 21A5 6D5F
Long ID: 9F597F4D21A56D5F</p>
</blockquote>

<p>æ‰§è¡Œä¸‹é¢å‘½ä»¤å¯¼å…¥å¯†é’¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ gpg --keyserver hkp://pool.sks-keyservers.net <span class="se">\
</span><span class="se"></span>      --recv-keys <span class="se">\
</span><span class="se"></span>    <span class="s1">&#39;1BE1 E29A 084C B305 F397  D62A 9F59 7F4D 21A5 6D5F&#39;</span></code></pre></div>
<p>æˆ–è€…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ wget -q -O - https://swift.org/keys/release-key-swift-2.2.asc <span class="p">|</span> gpg --import -</code></pre></div></li>
</ul>

<h2 id="ä½¿ç”¨repl">ä½¿ç”¨REPL</h2>

<p>å¦‚æœåœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œswiftå‘½ä»¤ï¼Œå°±ä¼šå¯åŠ¨<strong>REPL</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯äº¤äº’çš„Shellçª—å£ï¼Œå¯ä»¥è¯»å–ã€è®¡ç®—å’Œæ‰“å°ä½ æ‰€è¾“å…¥çš„Swiftä»£ç ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ swift
Welcome to Apple Swift version <span class="m">2</span>.2. Type :help <span class="k">for</span> assistance.
  <span class="m">1</span>&gt;</code></pre></div>
<p>ä¸REPLäº¤äº’æ˜¯æ¢ç´¢Swiftæå¥½çš„æ–¹å¼ï¼Œæ¯”å¦‚è¾“å…¥è¡¨è¾¾å¼<code>1 + 2</code>ï¼Œæ•²å›è½¦ä¾¿ä¼šè®¡ç®—å‡ºç»“æœï¼Œ<code>3</code>ï¼Œåœ¨ä¸‹ä¸€è¡Œä¸­æ‰“å°å‡ºæ¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">  <span class="m">1</span>&gt; <span class="m">1</span> + <span class="m">2</span>
<span class="nv">$R0</span>: <span class="nv">Int</span> <span class="o">=</span> <span class="m">3</span></code></pre></div>
<p>å¯ä»¥ä¸ºå˜é‡å’Œå¸¸é‡èµ‹å€¼ï¼Œåç»­å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚æ¯”å¦‚å°†<code>String</code>ç±»å‹çš„<code>Hello, world!</code>èµ‹å€¼ç»™<code>greeting</code>å¸¸é‡ï¼Œç„¶åå¯ä»¥ä½¿ç”¨<code>print(_:)</code>å‡½æ•°è¿›è¡Œæ‰“å°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">  <span class="m">2</span>&gt; <span class="nb">let</span> <span class="nv">greeting</span> <span class="o">=</span> <span class="s2">&#34;hello!&#34;</span>
greeting: <span class="nv">String</span> <span class="o">=</span> <span class="s2">&#34;Hello!&#34;</span>
  <span class="m">3</span>&gt; print<span class="o">(</span>greeting<span class="o">)</span>
Hello!</code></pre></div>
<p>å¦‚æœè¾“å…¥ä¸€ä¸ªæ— æ•ˆçš„è¡¨è¾¾å¼ï¼Œ<strong>REPL</strong>ä¼šæ‰“å°å‡ºé”™è¯¯å¹¶æ ‡æ˜å‡ºé”™çš„ä½ç½®ï¼Œå°±åƒä¸‹é¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">let</span> <span class="nv">answer</span> <span class="o">=</span> <span class="s2">&#34;fourty&#34;</span>-<span class="s2">&#34;two&#34;</span>
error: binary operator <span class="s1">&#39;-&#39;</span> cannot be applied to two <span class="s1">&#39;String&#39;</span> operands
<span class="nb">let</span> <span class="nv">answer</span> <span class="o">=</span> <span class="s2">&#34;fourty&#34;</span>-<span class="s2">&#34;two&#34;</span>
             ~~~~~~~~^~~~~~</code></pre></div>
<p>å¯ä»¥ä½¿ç”¨<code>UP</code>é”®å’Œ<code>DOWN</code>é”®å¾ªç¯æŸ¥çœ‹ä¹‹å‰åœ¨<strong>REPL</strong>ä¸­è¾“å…¥è¿‡çš„æ–‡æœ¬è¡Œã€‚è¿™è®©ä½ å¯ä»¥ç¨å¾®ä¿®æ”¹è¿‡å»è¾“å…¥è¿‡çš„æ–‡æœ¬è€Œä¸ç”¨è¾“å…¥å…¨éƒ¨å†…å®¹ï¼Œæ¯”å¦‚å¯¹äºä¿®æ”¹ä¸Šé¢ä¾‹å­ä¸­é”™è¯¯å°±å¾ˆæ–¹ä¾¿ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">let</span> <span class="nv">answer</span> <span class="o">=</span> <span class="s2">&#34;fourty-two&#34;</span>
answer: <span class="nv">String</span> <span class="o">=</span> <span class="s2">&#34;fourty-two&#34;</span></code></pre></div>
<p><strong>REPL</strong>è¿˜æœ‰ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„ç‰¹æ€§ï¼šåœ¨è¾“å…¥ç‰¹å®šæ–‡æœ¬åå¯ä»¥æç¤ºå‡½æ•°å’Œæ–¹æ³•ã€‚æ¯”å¦‚ï¼Œåœ¨ä¸€ä¸ª<code>String</code>åè¾“å…¥<code>re</code>åœ¨æŒ‰ä¸‹<code>TAB</code>é”®ï¼Œä¾¿ä¼šç»™å‡ºä¸€ä¸ªæç¤ºå¯ç”¨å‡½æ•°å’Œæ–¹æ³•çš„åˆ—è¡¨ï¼Œå°±åƒä¸‹é¢é‚£æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="m">5</span>&gt; <span class="s2">&#34;Hi!&#34;</span>.reâ‡¥
Available completions:
	removeAll<span class="o">()</span> -&gt; Void
	removeAll<span class="o">(</span>keepCapacity: Bool<span class="o">)</span> -&gt; Void
	removeAtIndex<span class="o">(</span>i: Index<span class="o">)</span> -&gt; Character
	removeRange<span class="o">(</span>subRange: Range&lt;Index&gt;<span class="o">)</span> -&gt; Void
	replaceRange<span class="o">(</span>subRange: Range&lt;Index&gt;, with: C<span class="o">)</span> -&gt; Void
	replaceRange<span class="o">(</span>subRange: Range&lt;Index&gt;, with: String<span class="o">)</span> -&gt; Void
	reserveCapacity<span class="o">(</span>n: Int<span class="o">)</span> -&gt; Void</code></pre></div>
<p>å½“å¼€å§‹ç¼–å†™ä¸€ä¸ªä»£ç å—çš„æ—¶å€™ï¼Œæ¯”å¦‚ç”¨<code>for-in</code>è½®è¯¢æ•°ç»„æ—¶ï¼Œ<strong>REPL</strong>ä¼šåœ¨ä¸‹ä¸€è¡Œè‡ªåŠ¨ç¼©è¿›ï¼Œæ­¤æ—¶è¡Œé¦–çš„æç¤ºç¬¦ä¼šç”±<code>&gt;</code>å˜ä¸º<code>.</code>ï¼Œè¡¨æ˜ä»£ç è¿˜æœªè¾“å…¥å®Œæ•´éœ€è¦è¾“å…¥å®Œæ•´ååœ¨è¿›è¡Œè¯„ä¼°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">  <span class="m">6</span>&gt; <span class="nb">let</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span>,2,3<span class="o">]</span>
numbers: <span class="o">[</span>Int<span class="o">]</span> <span class="o">=</span> <span class="m">3</span> values <span class="o">{</span>
  <span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="o">=</span> <span class="m">1</span>
  <span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="o">=</span> <span class="m">2</span>
  <span class="o">[</span><span class="m">2</span><span class="o">]</span> <span class="o">=</span> <span class="m">3</span>
<span class="o">}</span>
  <span class="m">7</span>&gt; <span class="k">for</span> n in numbers.reverse<span class="o">()</span> <span class="o">{</span>
  <span class="m">8</span>.     print<span class="o">(</span>n<span class="o">)</span>
  <span class="m">9</span>. <span class="o">}</span>
<span class="m">3</span>
<span class="m">2</span>
<span class="m">1</span></code></pre></div>
<p>Swiftçš„æ‰€æœ‰å‡½æ•°åœ¨<strong>REPL</strong>ä¸­éƒ½æ˜¯å¯ä»¥è°ƒç”¨çš„ï¼Œä»ç¼–å†™æ§åˆ¶æµåˆ°å£°æ˜å’Œå®ä¾‹åŒ–ç»“æ„ä½“å’Œç±»éƒ½æ˜¯å¯ä»¥çš„ã€‚å¦å¤–å¯ä»¥å¯¼å…¥å¯ç”¨çš„ç³»ç»Ÿæ¨¡å—ï¼Œæ¯”å¦‚OSXä¸‹çš„<code>Darwin</code>å’ŒLinuxä¸‹çš„<code>Glibc</code>ï¼š</p>

<p>OSXä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="m">1</span>&gt; import Darwin
<span class="m">2</span>&gt; arc4random_uniform<span class="o">(</span><span class="m">10</span><span class="o">)</span>
<span class="nv">$R0</span>: <span class="nv">UInt32</span> <span class="o">=</span> <span class="m">4</span></code></pre></div>
<p>Linuxä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="m">1</span>&gt; import Glibc
<span class="m">2</span>&gt; random<span class="o">()</span> % <span class="m">10</span>
<span class="nv">$R0</span>: <span class="nv">Int32</span> <span class="o">=</span> <span class="m">4</span></code></pre></div>
<h2 id="ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿ">ä½¿ç”¨ç¼–è¯‘ç³»ç»Ÿ</h2>

<p>Swiftçš„ç¼–è¯‘ç³»ç»Ÿå¯ä»¥ç”¨æ¥ç¼–è¯‘åº“ã€å¯æ‰§è¡Œç¨‹åºå’Œåœ¨ä¸åŒå·¥ç¨‹ä¹‹é—´åˆ†äº«ä»£ç ã€‚</p>

<p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œä½¿ç”¨<code>swift build</code>æ¥è®²è§£çš„ï¼Œä½†æˆ‘å®‰è£…äº†Swift 2.2åå‘ç°æŒ‰ç…§ä»–ä»¬çš„æ•™ç¨‹æ“ä½œå‘ç°ï¼Œç«Ÿç„¶æ²¡æœ‰äº†swift buildå·¥å…·ï¼Œç®€ç›´æƒ³éª‚å¨˜ï¼Œä½†æˆ‘è¿˜æ˜¯å¿ä½äº†ï¼Œç»è¿‡æœ¬èœé¸Ÿæ¢ç´¢äº†ä¸€ä¸‹ï¼Œç”¨<code>swiftc</code>å¯ä»¥ç”¨æ¥ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºã€‚</p>

<p>å¯ä»¥è°ƒç”¨<code>swift build --help</code>æ¥çœ‹ä¸€ä¸‹ï¼Œç»“æœä¼šæœ‰ä»¥ä¸‹æç¤ºï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ swift build --help
error: unable to invoke subcommand: /home/smslit/Applications/swift/usr/bin/swift-build <span class="o">(</span>No such file or directory<span class="o">)</span></code></pre></div>
<p>åæ¥ï¼Œæˆ‘æœ‰é‡æ–°å®‰è£…äº†å¼€å‘ç‰ˆçš„Swiftï¼Œé‡Œé¢æœ‰buildå‘½ä»¤ï¼Œæ‰€ä»¥å¦‚æœç”¨çš„æ˜¯å¼€å‘ç‰ˆçš„å¯ä»¥å°†ä¸‹é¢çš„swiftc æ¢æˆswift buildã€‚</p>

<p>å¯ä»¥ä½¿ç”¨å®˜æ–¹ä¾‹ç¨‹ï¼Œæ¥å°è¯•ä¸€ä¸‹<code>swiftc</code>ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤<code>swiftc -h</code>æŸ¥çœ‹swiftcçš„ä½¿ç”¨æ–¹æ³•ã€‚</p>

<h3 id="åˆ›å»ºä»£ç åŒ…">åˆ›å»ºä»£ç åŒ…</h3>

<ul>
<li><p>åˆ›å»º<code>hello/Sources</code>ç›®å½•ï¼Œå¹¶è¿›å…¥<code>hello</code>ç›®å½•ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ mkdir -p hello/Sources
$ <span class="nb">cd</span> hello</code></pre></div></li>

<li><p>åˆ›å»ºåŒ…ç®¡ç†æ–‡ä»¶<code>Package.swift</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ touch Package.swift</code></pre></div></li>
</ul>

<h3 id="ç¼–è¾‘ä»£ç ">ç¼–è¾‘ä»£ç </h3>

<p>åœ¨<code>Sources</code>ç›®å½•ä¸‹æ–°å»º<code>main.swift</code>æ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä»£ç <code>print(&quot;Hello, Monkey!&quot;)</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ touch Sources/main.swift
$ <span class="nb">echo</span> <span class="s2">&#34;print(\&#34;Hello, Monkey!\&#34;)&#34;</span> &gt; Sources/main.swift</code></pre></div>
<h3 id="ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶">ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</h3>

<p>ä½¿ç”¨<code>swiftc</code>è¿›è¡Œç¼–è¯‘ï¼Œåœ¨åŒ…æ ¹ç›®å½•ä¸‹ç”Ÿæˆåä¸º<code>hello</code>çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä½¿ç”¨<code>swiftc</code>å‘½ä»¤çš„<code>-o</code>å‚æ•°ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ swiftc Sources/main.swift -o hello</code></pre></div>
<h3 id="æµ‹è¯•æ‰§è¡Œ">æµ‹è¯•æ‰§è¡Œ</h3>

<p>ä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œåº”è¯¥å·²ç»ç”Ÿæˆ<code>hello</code>å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥æ‰§è¡Œæµ‹è¯•ä¸€ä¸‹ï¼Œæ­£å¸¸çš„è¯åº”è¯¥æ˜¯å¦‚ä¸‹çš„ç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ./hello
Hello, Monkey!</code></pre></div>
<p>è™½ç„¶å·²ç»å­¦ä¹ è¿‡Swiftè¯­è¨€çš„è¯­æ³•å’Œè§„åˆ™ï¼Œä½†å®è·µå¾ˆå°‘ï¼Œæ‰€ä»¥æƒ³åœ¨linuxå¹³å°å¥½è¿›ä¸€æ­¥é€šè¿‡ä¸€å®šå®è·µè¿›ä¸€æ­¥å­¦ä¹ swiftï¼Œè·¯æ…¢æ…¢å…¶ä¿®è¿œå…®å‘€ï¼</p>]]></content>
		</item>
		
		<item>
			<title>å„ç±»ç¡¬ä»¶æ¥å£å®šä¹‰</title>
			<link>https://www.smslit.top/2016/04/16/HardwareInterface-Elec/</link>
			<pubDate>Sat, 16 Apr 2016 08:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/16/HardwareInterface-Elec/</guid>
			<description>&lt;p&gt;è„‘å­å­˜å‚¨ä¸å¤Ÿç”¨äº†ï¼Œæ•…ä¸“é—¨å¼€æœ¬æ–‡æ•´ç†å„ç±»ç¡¬ä»¶æ¥å£ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è„‘å­å­˜å‚¨ä¸å¤Ÿç”¨äº†ï¼Œæ•…ä¸“é—¨å¼€æœ¬æ–‡æ•´ç†å„ç±»ç¡¬ä»¶æ¥å£ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚</p>

<h2 id="icd3">ICD3</h2>

<h3 id="å®šä¹‰">å®šä¹‰</h3>

<p>MPLAB ICD 3 åœ¨çº¿è°ƒè¯•å™¨æ˜¯ä¸€æ¬¾ç”±åœ¨ Windows Â® å¹³å°ä¸Šè¿è¡Œ MPLAB IDE (v8.15 æˆ–æ›´é«˜ç‰ˆæœ¬)è½¯ä»¶çš„ PC æ§åˆ¶çš„åœ¨çº¿è°ƒè¯•å™¨ã€‚ MPLAB ICD 3 åœ¨çº¿è°ƒè¯•å™¨æ˜¯å¼€å‘å·¥ç¨‹å¸ˆå·¥å…·åŒ…çš„ä¸å¯æˆ–ç¼ºçš„ç»„æˆéƒ¨åˆ†ã€‚å¯ç”¨äºä»è½¯ä»¶å¼€å‘åˆ°ç¡¬ä»¶é›†æˆç­‰å„ç§åº”ç”¨é¢†åŸŸã€‚MPLAB ICD 3 åœ¨çº¿è°ƒè¯•å™¨æ˜¯ä¸€æ¬¾æ”¯æŒç¡¬ä»¶å’Œè½¯ä»¶å¼€å‘çš„å¤æ‚è°ƒè¯•å™¨ç³»ç»Ÿ,ä¸“ç”¨äºåŸºäºåœ¨çº¿ä¸²è¡Œç¼–ç¨‹ (In-Circuit Serial ProgrammingTM, ICSPTM)å’Œå¢å¼ºå‹åœ¨çº¿ä¸²è¡Œç¼–ç¨‹åŒçº¿ä¸²è¡Œæ¥å£çš„ Microchip PIC Â® å•ç‰‡æœº (MCU)å’Œ dsPIC Â® æ•°å­—ä¿¡å·æ§åˆ¶å™¨ (Digital Signal Controller, DSC)ã€‚</p>

<h3 id="æ¥å£å®šä¹‰">æ¥å£å®šä¹‰</h3>

<p>è´èƒ½å›½é™…ICD3 In-Circuit Debuggeré‡‡ç”¨6çº¿æ¥å£è¿æ¥ç›®æ ‡æ¿å…¶æ¥æ’ä»¶å¼•è„šå®šä¹‰å¦‚ä¸‹è¡¨æ ¼ï¼š</p>

<table>
<thead>
<tr>
<th align="center">çº¿å‹</th>
<th align="center">ç®¡è„š</th>
<th align="left">å®šä¹‰</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">è“è‰²çº¿</td>
<td align="center">PIN1</td>
<td align="left">VPPï¼ˆç¼–ç¨‹ç”µå‹ï¼‰</td>
</tr>

<tr>
<td align="center">é»„è‰²çº¿</td>
<td align="center">PIN2</td>
<td align="left">VDDï¼ˆç”µæºæ­£æï¼‰</td>
</tr>

<tr>
<td align="center">ç»¿è‰²çº¿</td>
<td align="center">PIN3</td>
<td align="left">VSSï¼ˆç”µæºè´Ÿæï¼‰</td>
</tr>

<tr>
<td align="center">çº¢è‰²çº¿</td>
<td align="center">PIN4</td>
<td align="left">PGDï¼ˆç¼–ç¨‹æ•°æ®ï¼‰</td>
</tr>

<tr>
<td align="center">é»‘è‰²çº¿</td>
<td align="center">PIN5</td>
<td align="left">PGCï¼ˆç¼–ç¨‹æ—¶é’Ÿï¼‰</td>
</tr>

<tr>
<td align="center">ç™½è‰²çº¿</td>
<td align="center">PIN6</td>
<td align="left">LVPï¼ˆä½ç¼–ç¨‹ç”µå‹ï¼‰</td>
</tr>
</tbody>
</table>

<h2 id="cc-debugger">CC Debugger</h2>

<h3 id="æ¥å£ç¤ºæ„å›¾">æ¥å£ç¤ºæ„å›¾</h3>

<p>CCdebuggerçš„æ¥å£ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/scmwy.jpg" alt="1" /></p>

<h3 id="æ¥å£è¯´æ˜">æ¥å£è¯´æ˜</h3>

<p>è¯¦è¡¨å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>å¼•è„šç¼–å·</th>
<th>å¼•è„šåç§°</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>GND</td>
<td>åœ°çº¿</td>
</tr>

<tr>
<td>2</td>
<td>VDD</td>
<td>ç›®æ ‡æ¿çš„æ­£ç”µæº</td>
</tr>

<tr>
<td>3</td>
<td>DC</td>
<td>è°ƒè¯•æ¥å£æ—¶é’Ÿçº¿</td>
</tr>

<tr>
<td>4</td>
<td>DD</td>
<td>è°ƒè¯•æ¥å£æ•°æ®çº¿</td>
</tr>

<tr>
<td>5</td>
<td>CSn</td>
<td>ä¸‹è½½ä¸²å£ç‰‡é€‰çº¿ï¼ˆä½ç”µå¹³æœ‰æ•ˆï¼‰</td>
</tr>

<tr>
<td>6</td>
<td>SCLK</td>
<td>ä¸‹è½½ä¸²å£æ—¶é’Ÿçº¿</td>
</tr>

<tr>
<td>7</td>
<td>RESETn</td>
<td>è°ƒè¯•å™¨å¤ä½æ¥å£</td>
</tr>

<tr>
<td>8</td>
<td>MOSI</td>
<td>ä¸‹è½½ä¸²å£æ•°æ®è¾“å‡ºçº¿</td>
</tr>

<tr>
<td>9</td>
<td>3.3V</td>
<td>ä»¿çœŸå™¨3.3Vç”µæºè¾“å‡º</td>
</tr>

<tr>
<td>10</td>
<td>MISO</td>
<td>ä¸‹è½½ä¸²å£æ•°æ®è¾“å…¥çº¿</td>
</tr>
</tbody>
</table>

<p>è¯¦è§<a href="/ble/2015/10/26/CCDebugger-BLE.html">BLEå¼€å‘ç¬”è®°â€”â€”CC Debuggerçš„ä½¿ç”¨</a></p>

<h2 id="avr-isp">AVR ISP</h2>

<h3 id="æ¥å£å®šä¹‰-1">æ¥å£å®šä¹‰</h3>

<p>å¤§éƒ¨åˆ†AVR MCUçš„ISPæ•°æ®ç«¯å£äº¦ä¸º SCKã€MOSIã€MISOå¼•è„šï¼ˆå¦‚Attiny13/24/2313ï¼ŒAtmega48/88/168/329ï¼ŒAtmega16/32/162ï¼ŒAtmega8515/8535ç­‰ï¼‰ï¼Œå¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th align="center">ISPä¸‹è½½å™¨æ¥å£</th>
<th align="center">AVRå•ç‰‡æœº</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">MISO</td>
<td align="center">MISO</td>
</tr>

<tr>
<td align="center">VCC</td>
<td align="center">VCC</td>
</tr>

<tr>
<td align="center">SCK</td>
<td align="center">SCK</td>
</tr>

<tr>
<td align="center">MOSI</td>
<td align="center">MOSI</td>
</tr>

<tr>
<td align="center">RESET</td>
<td align="center">RESET</td>
</tr>

<tr>
<td align="center">GND</td>
<td align="center">GND</td>
</tr>
</tbody>
</table>

<p>å°‘éƒ¨åˆ†AVRMCUçš„ISPæ•°æ®ç«¯å£åˆ™ä¸æ˜¯ä½¿ç”¨è¿™äº›æ¥å£ï¼Œè€Œæ˜¯ï¼šSCKã€PDIã€PDOå¼•è„šï¼ˆå¦‚ATmega64/128/1281ç­‰ï¼‰ï¼Œå¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th align="center">ISPä¸‹è½½å™¨æ¥å£</th>
<th align="center">AVRå•ç‰‡æœº</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">MISO</td>
<td align="center">PDO</td>
</tr>

<tr>
<td align="center">VCC</td>
<td align="center">VCC</td>
</tr>

<tr>
<td align="center">SCK</td>
<td align="center">SCK</td>
</tr>

<tr>
<td align="center">MOSI</td>
<td align="center">PDI</td>
</tr>

<tr>
<td align="center">RESET</td>
<td align="center">RESET</td>
</tr>

<tr>
<td align="center">GND</td>
<td align="center">GND</td>
</tr>
</tbody>
</table>

<p>ä»¥ä¸Šä»…ä¾‹ä¸¾å‡ºå¸¸ç”¨çš„AVRå‹å·çš„è¿æ¥æ–¹å¼ï¼Œè‹¥æ‚¨ä½¿ç”¨çš„AVRå‹å·æ²¡æœ‰è¢«åˆ—ä¸¾åˆ°ï¼Œè¯·æŸ¥çœ‹ç›¸å…³å‹å·çš„PDFæ–‡æ¡£ï¼Œé‡Œé¢çš„ç¼–ç¨‹ç« èŠ‚å°†æœ‰ä»‹ç»ä½¿ç”¨ISPæ—¶ï¼Œéœ€è¿æ¥å“ªäº›å¼•è„šã€‚</p>

<h3 id="æ ‡å‡†æ¥å£å›¾">æ ‡å‡†æ¥å£å›¾</h3>

<p>10è„šçš„ISPæ¥å£ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/pj743.jpg" alt="10_pin_isp" /></p>

<p>6è„šçš„ISPæ¥å£ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/w3p0u.jpg" alt="6_pin_isp" /></p>]]></content>
		</item>
		
		<item>
			<title>ä½¿ç”¨rakeç”Ÿæˆjekyllé™æ€åšå®¢æ–°æ–‡ç« </title>
			<link>https://www.smslit.top/2016/04/15/rake-new-post/</link>
			<pubDate>Fri, 15 Apr 2016 19:14:39 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/15/rake-new-post/</guid>
			<description>&lt;p&gt;ä½¿ç”¨äº†Jekyllä¹Ÿæœ‰9ä¸ªæœˆäº†ï¼Œè™½ç„¶å†™çš„åšæ–‡ä¸å¤šï¼Œä½†ä¹Ÿæ˜¯ä¼šè§‰å¾—æ¯æ¬¡å†™æ–°æ–‡ç« æ˜¯ç—›è‹¦çš„ã€‚å¤åˆ¶ç²˜è´´å†æ›´æ”¹ä¹Ÿæ˜¯æ˜¾å¾—ä¸å¤Ÿæ¡ç†ï¼Œä¸€ä¸ªå­—ä¸€ä¸ªå­—çš„æ•²ä¹Ÿæ˜¯ç—›è‹¦çš„ï¼Œç´¢æ€§æœç´¢ä¸€ä¸‹æœ‰æ²¡æœ‰å¥½çš„æ–¹æ³•ï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªå¥½åŠæ³•ï¼Œåˆ©ç”¨rubyæ’ä»¶rakeæ¥å®Œæˆã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä½¿ç”¨äº†Jekyllä¹Ÿæœ‰9ä¸ªæœˆäº†ï¼Œè™½ç„¶å†™çš„åšæ–‡ä¸å¤šï¼Œä½†ä¹Ÿæ˜¯ä¼šè§‰å¾—æ¯æ¬¡å†™æ–°æ–‡ç« æ˜¯ç—›è‹¦çš„ã€‚å¤åˆ¶ç²˜è´´å†æ›´æ”¹ä¹Ÿæ˜¯æ˜¾å¾—ä¸å¤Ÿæ¡ç†ï¼Œä¸€ä¸ªå­—ä¸€ä¸ªå­—çš„æ•²ä¹Ÿæ˜¯ç—›è‹¦çš„ï¼Œç´¢æ€§æœç´¢ä¸€ä¸‹æœ‰æ²¡æœ‰å¥½çš„æ–¹æ³•ï¼Œç»ˆäºæ‰¾åˆ°äº†ä¸€ä¸ªå¥½åŠæ³•ï¼Œåˆ©ç”¨rubyæ’ä»¶rakeæ¥å®Œæˆã€‚</p>

<p>ä¸‹é¢å°±è®²ä¸€ä¸‹æ€ä¹ˆå®ç°ã€‚</p>

<h4 id="å®‰è£…rake">å®‰è£…rake</h4>

<p>åˆ©ç”¨gemåŒ…ç®¡ç†å·¥å…·è¿›è¡Œå®‰è£…rakeæ¨¡å—ï¼Œå›½å†…çš„è¯è¦å°†gemå®‰è£…æºæ›´æ”¹ä¸ºtaobaoçš„ï¼Œè¯¦ <a href="/2015/08/24/jekyllInstallFedoraLinux/" target="_blank">Fedora Linuxä¸‹å®‰è£…Jekyll</a></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># gem å®‰è£… rake</span>
sudo gem install rake</code></pre></div>
<h4 id="ç¼–å†™rakefile">ç¼–å†™Rakefile</h4>

<p>æˆ‘ä»¬å¯ä»¥ç¼–å†™Rakefileï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™ç”Ÿæˆæˆ‘ä»¬çš„åšæ–‡ï¼Œéœ€è¦å°†Rakefileæ”¾åˆ°Jekyllåšå®¢å·¥ç¨‹çš„æ ¹ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹æ˜¯ç¤ºä¾‹Rakefileçš„å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">task</span> <span class="ss">:default</span> <span class="o">=&gt;</span> <span class="ss">:new</span>

<span class="nb">require</span> <span class="s1">&#39;fileutils&#39;</span>

<span class="n">desc</span> <span class="s2">&#34;åˆ›å»ºæ–° post&#34;</span>
<span class="n">task</span> <span class="ss">:new</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">&#34;è¯·è¾“å…¥è¦åˆ›å»ºçš„ post URLï¼š&#34;</span>
	<span class="vi">@url</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span>
	<span class="nb">puts</span> <span class="s2">&#34;è¯·è¾“å…¥ post æ ‡é¢˜ï¼š&#34;</span>
	<span class="vi">@name</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span>
	<span class="nb">puts</span> <span class="s2">&#34;è¯·è¾“å…¥ post åˆ†ç±»ï¼Œä»¥ç©ºæ ¼åˆ†éš”ï¼š&#34;</span>
	<span class="vi">@categories</span> <span class="o">=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">gets</span><span class="o">.</span><span class="n">chomp</span>
	<span class="vi">@slug</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="vi">@url</span><span class="si">}</span><span class="s2">&#34;</span>
	<span class="vi">@slug</span> <span class="o">=</span> <span class="vi">@slug</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">strip</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
	<span class="vi">@date</span> <span class="o">=</span> <span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&#34;%F&#34;</span><span class="p">)</span>
	<span class="vi">@post_name</span> <span class="o">=</span> <span class="s2">&#34;_posts/</span><span class="si">#{</span><span class="vi">@date</span><span class="si">}</span><span class="s2">-</span><span class="si">#{</span><span class="vi">@slug</span><span class="si">}</span><span class="s2">.markdown&#34;</span>
	<span class="vi">@author</span> <span class="o">=</span> <span class="s2">&#34;5kmï¼ˆåé‡Œï¼‰&#34;</span>
	<span class="k">if</span> <span class="no">File</span><span class="o">.</span><span class="n">exist?</span><span class="p">(</span><span class="vi">@post_name</span><span class="p">)</span>
			<span class="nb">abort</span><span class="p">(</span><span class="s2">&#34;æ–‡ä»¶åå·²ç»å­˜åœ¨ï¼åˆ›å»ºå¤±è´¥&#34;</span><span class="p">)</span>
	<span class="k">end</span>
	<span class="no">FileUtils</span><span class="o">.</span><span class="n">touch</span><span class="p">(</span><span class="vi">@post_name</span><span class="p">)</span>
	<span class="nb">open</span><span class="p">(</span><span class="vi">@post_name</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">file</span><span class="o">|</span>
			<span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&#34;---&#34;</span>
			<span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&#34;layout:     post&#34;</span>
			<span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&#34;title:      </span><span class="se">\&#34;</span><span class="si">#{</span><span class="vi">@name</span><span class="si">}</span><span class="se">\&#34;</span><span class="s2">&#34;</span>
			<span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&#34;date:       </span><span class="si">#{</span><span class="no">Time</span><span class="o">.</span><span class="n">now</span><span class="si">}</span><span class="s2">&#34;</span>
			<span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&#34;author:     </span><span class="se">\&#34;</span><span class="si">#{</span><span class="vi">@author</span><span class="si">}</span><span class="se">\&#34;</span><span class="s2">&#34;</span>
			<span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&#34;categories: </span><span class="si">#{</span><span class="vi">@categories</span><span class="si">}</span><span class="s2">&#34;</span>
			<span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&#34;---&#34;</span>
	<span class="k">end</span>
	<span class="nb">exec</span> <span class="s2">&#34;vim </span><span class="si">#{</span><span class="vi">@post_name</span><span class="si">}</span><span class="s2">&#34;</span>
<span class="k">end</span></code></pre></div>
<p>çœ‹ä¸Šé¢çš„Rubyä»£ç ï¼Œåº”è¯¥èƒ½çœ‹å‡ºå®ç°æ€è·¯ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä½œå‡ºä¿®æ”¹ï¼Œå…¶ä¸­@authorå˜é‡æ”¹æˆè‡ªå·±çš„å°±å¯ä»¥äº†ã€‚</p>

<h4 id="ç”Ÿæˆæ–°æ–‡ç« ">ç”Ÿæˆæ–°æ–‡ç« </h4>

<p>ä½¿ç”¨rake newå‘½ä»¤ï¼Œç”Ÿæˆæ–°çš„postï¼Œ<strong>new</strong>ä¸ä¸Šè¿°rubyä»£ç ä¸­taskå‘½åå¯¹åº”èµ·æ¥ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ã€‚æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™è¦åœ¨jekyllçš„å·¥ç¨‹ç›®å½•ä¸­ï¼Œæ‰§è¡Œ<code>rake new</code>å‘½ä»¤ï¼Œæ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">-&gt; % rake new
è¯·è¾“å…¥è¦åˆ›å»ºçš„ post URLï¼š
rake-new-post
è¯·è¾“å…¥ post æ ‡é¢˜ï¼š
ä½¿ç”¨rakeç”Ÿæˆjekyllæ–°æ–‡ç«   
è¯·è¾“å…¥ post åˆ†ç±»ï¼Œä»¥ç©ºæ ¼åˆ†éš”ï¼š
Jekyll</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>linuxä¸‹ä½¿ç”¨CC Debuggerè¯»å†™èŠ¯ç‰‡ç¨‹åº</title>
			<link>https://www.smslit.top/2016/04/15/ccdebugger-linux-ble/</link>
			<pubDate>Fri, 15 Apr 2016 15:34:19 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/15/ccdebugger-linux-ble/</guid>
			<description>&lt;p&gt;æœ‰ä¸ªäº‹æƒ…ä¸€ç›´å›°æ‰°ç€æˆ‘ï¼Œæˆ‘ä¸€èˆ¬ä½¿ç”¨ubuntu linuxç³»ç»Ÿï¼Œä½†å½“è¦ç”¨CC Debuggerä¸ºTIçš„ä¸€äº›èŠ¯ç‰‡çƒ§å†™ç¨‹åºçš„æ—¶å€™ï¼Œä¸å¾—ä¸åˆ‡æ¢åˆ°windowsç³»ç»Ÿï¼Œå¤ªéº»çƒ¦äº†ï¼Œéš¾é“linuxä¸‹ä¸èƒ½ç”¨CC Debuggerå—ï¼Ÿæˆ‘å°±å¸¦ç€è¿™ä¸ªé—®é¢˜é—®äº†ä¸€ä¸‹è°·å“¥ï¼Œä»–æœç„¶ä»€ä¹ˆéƒ½çŸ¥é“ï¼Œå¾—çŸ¥cc-toolçš„å­˜åœ¨ï¼Œæ˜¯ä¸€ä¸ªè€å¼€æºé¡¹ç›®äº†ï¼Œä»€ä¹ˆï¼Ÿæˆ‘å’‹æ‰çŸ¥é“å‘€ï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ‰ä¸ªäº‹æƒ…ä¸€ç›´å›°æ‰°ç€æˆ‘ï¼Œæˆ‘ä¸€èˆ¬ä½¿ç”¨ubuntu linuxç³»ç»Ÿï¼Œä½†å½“è¦ç”¨CC Debuggerä¸ºTIçš„ä¸€äº›èŠ¯ç‰‡çƒ§å†™ç¨‹åºçš„æ—¶å€™ï¼Œä¸å¾—ä¸åˆ‡æ¢åˆ°windowsç³»ç»Ÿï¼Œå¤ªéº»çƒ¦äº†ï¼Œéš¾é“linuxä¸‹ä¸èƒ½ç”¨CC Debuggerå—ï¼Ÿæˆ‘å°±å¸¦ç€è¿™ä¸ªé—®é¢˜é—®äº†ä¸€ä¸‹è°·å“¥ï¼Œä»–æœç„¶ä»€ä¹ˆéƒ½çŸ¥é“ï¼Œå¾—çŸ¥cc-toolçš„å­˜åœ¨ï¼Œæ˜¯ä¸€ä¸ªè€å¼€æºé¡¹ç›®äº†ï¼Œä»€ä¹ˆï¼Ÿæˆ‘å’‹æ‰çŸ¥é“å‘€ï¼</p>

<p>å«Œç½—å—¦å¯ä»¥ç›´æ¥<a href="#no1">ç‚¹æˆ‘</a>è·³è¿‡ä¸‹é¢ä¸€æ®µã€‚</p>

<p>åœ¨githubå¯ä»¥æ‰¾åˆ°å¥½å¤šcc-toolé¡¹ç›®ï¼Œä¸è¿‡å¤§éƒ¨åˆ†éƒ½æ˜¯forkåˆ«äººçš„ï¼Œå…¶å®è¿½æ ¹æº¯æºä¼šå‘ç°æ­¤é¡¹ç›®æ¥è‡ªsourceforgeï¼Œ<a href="http://sourceforge.net/projects/cctool/files/" target="_blank">æˆ‘æ˜¯ä¼ é€é—¨</a>ï¼Œåä¸º<strong>cctool</strong>ï¼Œæˆ‘è¯•è¿‡å…¶ä¸­ä¸€ä¸ªï¼Œä¸è¿‡å¥½ä¹…æ²¡æ›´æ–°äº†ï¼Œä¸‹è½½ä¸‹æ¥å°è¯•äº†ä¸€ä¸‹ï¼Œç»“æœæ‰§è¡Œ<strong>./configure</strong>æ—¶ä¸èƒ½é€šè¿‡ï¼Œæç¤ºlibboost-all-devç‰ˆæœ¬å¤ªé«˜ï¼Œè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼ŸæŸ¥çœ‹configureæ–‡ä»¶ï¼Œå¤§ä½“çŸ¥é“æ˜¯å†…éƒ¨æœ‰è¿™ä¸ªä¾èµ–åŒ…çš„ç‰ˆæœ¬é™åˆ¶ï¼Œåªèƒ½è¯´è¿™ä¸ªcctoolå¤ªè€äº†ï¼Œç„¶ååˆæ‰¾åˆ°ä¸€ä¸ªé¡¹ç›®ï¼Œè¿™æ˜¯forkè‡ªsourceforgeçš„ï¼Œå¯èƒ½å°±æ˜¯ä½œè€…æœ¬äººçš„ï¼ˆæˆ‘çŒœçš„ï¼Œæ²¡å»ç»†ç©¶ï¼‰ï¼Œåœ¨2015å¹´10æœˆä»½æœ‰æ›´æ–°è¿‡ï¼Œå°è¯•äº†ä¸€ä¸‹ï¼Œæœç„¶å¯ä»¥ï¼ŒæŸ¥çœ‹15å¹´10æœˆä»½çš„commitï¼Œå‘ç°æœç„¶æ˜¯ä¿®æ”¹äº†configureæ–‡ä»¶ï¼Œä¸å¤šè¯´äº†ï¼Œä¸‹é¢å°±è¯´ä¸€ä¸‹æ€ä¹ˆç¼–è¯‘å®‰è£…å’Œä½¿ç”¨ã€‚</p>

<h3 id="æµ‹è¯•å¹³å°">æµ‹è¯•å¹³å°</h3>

<ul>
<li>Ubuntuç³»ç»Ÿ</li>
<li>TI keyfob å¼€å‘å¥—ä»¶ï¼ˆcc2541èŠ¯ç‰‡ï¼‰</li>
<li>CC Debugger</li>
</ul>

<h3 id="ç¼–è¯‘å®‰è£…">ç¼–è¯‘å®‰è£…</h3>

<p>æœ¬æ–‡ä½¿ç”¨githubçš„<a href="https://github.com/dashesy" target="_blank">dashesy</a>çš„é¡¹ç›®<a href="https://github.com/dashesy/cc-tool" target="_blank">cc-tool</a>ï¼Œè¡¨ç¤ºååˆ†æ„Ÿè°¢ï¼</p>

<h4 id="ä¸‹è½½æºæ–‡ä»¶">ä¸‹è½½æºæ–‡ä»¶</h4>

<p>åˆ‡æ¢åˆ°ç”¨æˆ·éšä¾¿ä¸€ä¸ªç›®å½•ï¼Œæ¯”å¦‚<strong>Downloads</strong>ï¼Œgitæ‹·è´ä¸‹è½½ï¼Œè¿›å…¥é¡¹ç›®æºæ–‡ä»¶ç›®å½•ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/Downloads
git clone https://github.com/dashesy/cc-tool.git</code></pre></div>
<p>ç„¶åï¼Œ</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> cc-tool-master</code></pre></div>
<h4 id="å®‰è£…ä¾èµ–åŒ…">å®‰è£…ä¾èµ–åŒ…</h4>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo apt-get install libusb-1.0 libboost-all-dev</code></pre></div>
<h4 id="é…ç½®ç¼–è¯‘å®‰è£…">é…ç½®ç¼–è¯‘å®‰è£…</h4>

<ul>
<li><p>é…ç½®</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">./configure</code></pre></div></li>

<li><p>ç¼–è¯‘</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">make</code></pre></div></li>

<li><p>å®‰è£…</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo make install</code></pre></div></li>

<li><p>ç”±äºlinuxå¯¹usbè®¾å¤‡è®¿é—®æœ‰æƒé™é™åˆ¶ï¼Œæ‰€ä»¥è¿˜éœ€è¦å°†é¡¹ç›®æ–‡ä»¶ä¸­çš„udevä¸‹çš„<strong>90-cc-debugger.rules</strong>æ‹·è´åˆ°<code>/etc/udev/rules.d</code>ç›®å½•ä¸‹ï¼Œç„¶åé‡å¯ç”µè„‘ã€‚ï¼ˆå¦‚æœä¸æ‹·è´ruleæ–‡ä»¶å¯ä»¥åœ¨æ¯æ¬¡ä½¿ç”¨cc-toolæ—¶åŠ ä¸Šsudoï¼‰</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp udev/90-cc-debugger.rules /etc/udev/rules.d/</code></pre></div></li>
</ul>

<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>

<p>å¦‚æœä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œæ­¤æ—¶ä½ åº”è¯¥å°†cc-toolå®‰è£…æˆåŠŸï¼Œå¯ä»¥ç”¨<strong>man</strong>å‘½ä»¤æŸ¥çœ‹å¦‚ä½•ä½¿ç”¨ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Read entire flash into binary file image.xxx</span>
<span class="c1"># è¯»å–æ•´ä¸ªFlashä¿å­˜ä¸ºimage.xxxæ–‡ä»¶</span>
cc-tmool -r image.xxx,bin
<span class="c1"># Erase flash, write intel hex file image.hex and verify flash using default method</span>
<span class="c1"># æ“¦å‡ºflashï¼Œä½¿ç”¨é»˜è®¤æ–¹æ³•çƒ§å†™intel hexæ ¼å¼çš„hexæ–‡ä»¶ï¼Œå¹¶éªŒè¯flash</span>
cc-tool -v -e -w image.hex
<span class="c1"># Merge file image.hex and patch.bin (at offset 80), write  resulting  image,  verify  flash using read method</span>
<span class="c1"># åˆå¹¶image.hexå’Œåç§»åœ°å€åœ¨0x80çš„patch.binï¼Œå¹¶è¿›è¡Œçƒ§å†™ï¼Œä½¿ç”¨è¯»æ¨¡å¼éªŒè¯flash</span>
cc-tool -v <span class="nb">read</span> -w image.hex --write patch.bin,80
<span class="c1"># Set debug lock bit</span>
<span class="c1"># è®¾ç½®è°ƒè¯•åŠ é”ä½</span>
cc-tool --lock debug
<span class="c1"># Set debug lock bit and lock pages 0,1,2,3,4</span>
<span class="c1"># è®¾ç½®è°ƒè¯•åŠ é”ä½ï¼Œä¸º0,1,2,3,4é¡µåŠ é”</span> 
cc-tool --lock debug<span class="p">;</span>pages:0-4
<span class="c1"># Set debug lock bit, boot lock bit, and set lock size 8K</span>
<span class="c1"># è®¾ç½®è°ƒè¯•åŠ é”ä½ã€å¯åŠ¨åŠ é”ä½ï¼Œè®¾ç½®åŠ é”å¤§å°ä¸º8k</span>
cc-tool --lock debug<span class="p">;</span>boot<span class="p">;</span>flash:8</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>Tabé”®Softå’ŒHardä¹‹åˆ†</title>
			<link>https://www.smslit.top/2016/04/10/SoftTabOrHardTab-Develop/</link>
			<pubDate>Sun, 10 Apr 2016 10:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/10/SoftTabOrHardTab-Develop/</guid>
			<description>&lt;p&gt;è¿™æ€ªä¹‹å‰å­¤é™‹å¯¡é—»ï¼Œåœ¨ä½¿ç”¨ç¼–è¾‘å™¨Atomæ—¶ï¼Œè¿›å…¥è®¾ç½®çœ‹åˆ°Tab typeï¼ˆTabç±»å‹ï¼‰ï¼Œå’¦ï¼Œtabè¿˜æœ‰Softå’ŒHardä¹‹åˆ†å‘€ï¼ŒSettingsä¸­å…³äº&lt;strong&gt;Tab Type&lt;/strong&gt;çš„æç¤ºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Determine character inserted when Tab key is pressed. Possible values: &amp;ldquo;auto&amp;rdquo;, &amp;ldquo;soft&amp;rdquo; and &amp;ldquo;hard&amp;rdquo;. When set to &amp;ldquo;soft&amp;rdquo; or &amp;ldquo;hard&amp;rdquo;, soft tabs (spaces) or hard tabs (tab characters) are used. When set to &amp;ldquo;auto&amp;rdquo;, the editor auto-detects the tab type based on the contents of the buffer (it uses the first leading whitespace on a non-comment line), or uses the value of the Soft Tabs config setting if auto-detection fails.&lt;/p&gt;
&lt;/blockquote&gt;</description>
			<content type="html"><![CDATA[<p>è¿™æ€ªä¹‹å‰å­¤é™‹å¯¡é—»ï¼Œåœ¨ä½¿ç”¨ç¼–è¾‘å™¨Atomæ—¶ï¼Œè¿›å…¥è®¾ç½®çœ‹åˆ°Tab typeï¼ˆTabç±»å‹ï¼‰ï¼Œå’¦ï¼Œtabè¿˜æœ‰Softå’ŒHardä¹‹åˆ†å‘€ï¼ŒSettingsä¸­å…³äº<strong>Tab Type</strong>çš„æç¤ºå¦‚ä¸‹ï¼š</p>

<blockquote>
<p>Determine character inserted when Tab key is pressed. Possible values: &ldquo;auto&rdquo;, &ldquo;soft&rdquo; and &ldquo;hard&rdquo;. When set to &ldquo;soft&rdquo; or &ldquo;hard&rdquo;, soft tabs (spaces) or hard tabs (tab characters) are used. When set to &ldquo;auto&rdquo;, the editor auto-detects the tab type based on the contents of the buffer (it uses the first leading whitespace on a non-comment line), or uses the value of the Soft Tabs config setting if auto-detection fails.</p>
</blockquote>

<p>æ ¹æ®ä¸Šé¢å†…å®¹å¯çŸ¥ï¼ŒåŸæ¥æ˜¯åœ¨ç¼–è¾‘æ–‡æœ¬æ–‡æ¡£æ—¶ï¼Œå½“è®¾ç½®ç±»å‹ä¸º<strong>Soft</strong>åˆ™æŒ‰ä¸‹Tabé”®æ’å…¥ç©ºæ ¼ç¬¦ï¼ˆä¸ªæ•°ä¾¿æ˜¯tab sizeè®¾ç½®çš„å¤§å°ï¼‰ï¼Œå½“è®¾ç½®ä¸º<strong>Hard</strong>åˆ™æŒ‰ä¸‹Tabé”®ä¾¿æ’å…¥ä¸€ä¸ªTabç¬¦ï¼Œå½“è®¾ç½®ä¸º<strong>Auto</strong>çš„æ—¶å€™ï¼Œç¼–è¾‘å™¨ä¾¿ä¼šæ ¹æ®æ‰€ç¼–è¾‘æ–‡ä»¶å†…çš„é£æ ¼è¿›è¡Œè®¾ç½®ï¼Œåˆ¤æ–­é¦–æ¬¡ç¼©è¿›ä½ç½®æ‰€ä½¿ç”¨çš„é£æ ¼ã€‚</p>

<p>å…¶å®ï¼Œè¿™ä¹Ÿä¸éš¾æƒ³åˆ°ï¼ŒSoftç±»å‹æ’å…¥çš„ç¼©è¿›æ— è®ºåˆ°å“ªå„¿å¤§å°è‚¯å®šä¸å˜ï¼Œä¼šä¸€ç›´æ˜¯ä½ æƒ³è¦çš„æ ·å­ï¼Œè€ŒHardç±»å‹ä¼šæ ¹æ®åœ¨ä¸åŒç¯å¢ƒä¸­è®¾ç½®çš„tabå¤§å°è¿›è¡Œç¼©è¿›ï¼Œå¾€å¾€å¯¼è‡´ä¸ç»Ÿä¸€ï¼Œè¿™å¯¹äºå¼ºè¿«ç—‡çš„æˆ‘ç®€ç›´ä¸èƒ½å¿ï¼Œæˆ‘è¿˜æ˜¯å¸Œæœ›ç¼–è¾‘çš„ä»£ç åˆ°æ¯ä¸ªåœ°æ–¹ç¼©è¿›æ˜¯ç»Ÿä¸€çš„ï¼Œé‚£ä¹ˆSoftæ‰æ˜¯æˆ‘éœ€è¦çš„ï¼Œè¿™å°è¯ä¸€ä¸ªè¯´æ³•ï¼š</p>

<blockquote>
<p>Softæ–¹å¼æ˜¯ç»å¯¹çš„ï¼ŒHardæ˜¯ç›¸å¯¹çš„ã€‚</p>
</blockquote>

<p>æ— è®ºä»€ä¹ˆç±»å‹ï¼Œè‡ªå·±å–œæ¬¢å°±å¥½ï¼</p>]]></content>
		</item>
		
		<item>
			<title>0x80070570é”™è¯¯è§£å†³</title>
			<link>https://www.smslit.top/2016/04/05/0x80070570error-Life/</link>
			<pubDate>Tue, 05 Apr 2016 15:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/04/05/0x80070570error-Life/</guid>
			<description>&lt;p&gt;ä»Šå¤©æ— èŠçš„â€œè™«å­â€æ‹¿ç€ç§»åŠ¨ç¡¬ç›˜è¿‡æ¥è®©æˆ‘åˆ é™¤ç¡¬ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆåœ¨windowsä¸‹ï¼‰ï¼Œå‘€ï¼Œä¸€åˆ é™¤å°±å¼¹å‡ºä¸€ä¸ªé”™è¯¯æç¤ºè¯´æ˜¯ï¼š&lt;code&gt;error0x80070570&lt;/code&gt;ï¼Œæ–‡ä»¶æ— æ³•åˆ é™¤ã€‚æœ¨æœ‰åŠæ³•ï¼Œçœ‹æ¥åªæœ‰æˆ‘èƒ½æ‹¯æ•‘è¿™ä¸ªä¸–ç•Œäº†ï¼Œç»è¿‡äº†è§£ï¼Œå‘€ï¼Œåˆ«äººå·²ç»è§£å†³äº†è¿™ä¸ªä¸–ç•Œæ€§éš¾é¢˜ï¼Œå¥½å§ï¼Œä¸ç®¡æ€æ ·ï¼Œæˆ‘ä¹Ÿå­¦åˆ°äº†å’‹è§£å†³ï¼š&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;æ²¡æœ‰æ­£å¸¸æ’æ‹”ç§»åŠ¨è®¾å¤‡&lt;code&gt;ç³»ç»Ÿæ²¡æœ‰å®Œæˆå®Œæ•´çš„è¯»å†™æ“ä½œ&lt;/code&gt;è‡´ä½¿æ–‡ä»¶ç›®å½•ä¿¡æ¯é”™ä¹±å’Œä¸å®Œæ•´&lt;br&gt;
æ¯”å¦‚&lt;br&gt;
1. å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°ç§»åŠ¨è®¾å¤‡ï¼Œå…³æœºé‡å¯ï¼Œæ‹”å–åå†æ¬¡æ‰“å¼€ä½¿ç”¨æˆ–åˆ°åˆ«çš„ç”µè„‘ä¸Šä½¿ç”¨æ—¶å‡ºç°ç—‡çŠ¶ç—…æ¯’&lt;br&gt;
2. ç¡¬ç›˜ç¡¬ä»¶æœ¬èº«æ•…éšœ&lt;br&gt;
3. å·¥ä½œæœŸé—´çªç„¶åœç”µã€‚&lt;/p&gt;
&lt;/blockquote&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©æ— èŠçš„â€œè™«å­â€æ‹¿ç€ç§»åŠ¨ç¡¬ç›˜è¿‡æ¥è®©æˆ‘åˆ é™¤ç¡¬ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆåœ¨windowsä¸‹ï¼‰ï¼Œå‘€ï¼Œä¸€åˆ é™¤å°±å¼¹å‡ºä¸€ä¸ªé”™è¯¯æç¤ºè¯´æ˜¯ï¼š<code>error0x80070570</code>ï¼Œæ–‡ä»¶æ— æ³•åˆ é™¤ã€‚æœ¨æœ‰åŠæ³•ï¼Œçœ‹æ¥åªæœ‰æˆ‘èƒ½æ‹¯æ•‘è¿™ä¸ªä¸–ç•Œäº†ï¼Œç»è¿‡äº†è§£ï¼Œå‘€ï¼Œåˆ«äººå·²ç»è§£å†³äº†è¿™ä¸ªä¸–ç•Œæ€§éš¾é¢˜ï¼Œå¥½å§ï¼Œä¸ç®¡æ€æ ·ï¼Œæˆ‘ä¹Ÿå­¦åˆ°äº†å’‹è§£å†³ï¼š</p>

<blockquote>
<p>æ²¡æœ‰æ­£å¸¸æ’æ‹”ç§»åŠ¨è®¾å¤‡<code>ç³»ç»Ÿæ²¡æœ‰å®Œæˆå®Œæ•´çš„è¯»å†™æ“ä½œ</code>è‡´ä½¿æ–‡ä»¶ç›®å½•ä¿¡æ¯é”™ä¹±å’Œä¸å®Œæ•´<br>
æ¯”å¦‚<br>
1. å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°ç§»åŠ¨è®¾å¤‡ï¼Œå…³æœºé‡å¯ï¼Œæ‹”å–åå†æ¬¡æ‰“å¼€ä½¿ç”¨æˆ–åˆ°åˆ«çš„ç”µè„‘ä¸Šä½¿ç”¨æ—¶å‡ºç°ç—‡çŠ¶ç—…æ¯’<br>
2. ç¡¬ç›˜ç¡¬ä»¶æœ¬èº«æ•…éšœ<br>
3. å·¥ä½œæœŸé—´çªç„¶åœç”µã€‚</p>
</blockquote>

<h4 id="æ£€æŸ¥ç£ç›˜æ¥è§£å†³">æ£€æŸ¥ç£ç›˜æ¥è§£å†³</h4>

<ul>
<li><p>è¿è¡Œå‘½ä»¤è¡Œï¼ˆè¿™é‡Œè¯´ä¸¤ç§æ–¹å¼ï¼‰</p>

<ul>
<li><strong>win + R</strong>æˆ–<strong>å¼€å§‹-&gt;è¿è¡Œ</strong>ï¼Œè¾“å…¥<strong>cmd</strong>å›è½¦</li>
<li><strong>win + x</strong>ï¼Œé€‰æ‹©<strong>å‘½ä»¤è¡Œ</strong></li>
</ul></li>

<li><p>ç¡®å®šæ–‡ä»¶æ‰€åœ¨ç£ç›˜æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå…¶ä¸­<strong>F</strong>ä¸ºç›˜ç¬¦</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">C:<span class="se">\W</span>indows<span class="se">\s</span>ystem32&gt;chkdsk F: /f</code></pre></div></li>

<li><p>ç­‰å¾…å®Œæˆåï¼Œä¼šå‡ºç°ç±»ä¼¼å¦‚ä¸‹çš„ç»“æœï¼Œå†å»å°è¯•åˆ é™¤å°±ä¸€åˆ‡OKäº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">The <span class="nb">type</span> of the file system is NTFS.
Volume label is æ–°åŠ å·.

Stage <span class="m">1</span>: Examining basic file system structure ...
  <span class="m">70656</span> file records processed.
File verification completed.
  <span class="m">0</span> large file records processed.
  <span class="m">0</span> bad file records processed.

Stage <span class="m">2</span>: Examining file name linkage ...
Correcting error in index <span class="nv">$O</span> <span class="k">for</span> file <span class="m">25</span>.
CHKDSK discovered free space marked as allocated in the bitmap <span class="k">for</span> index <span class="nv">$O</span> <span class="k">for</span> file <span class="m">25</span>.
Sorting index <span class="nv">$O</span> in file <span class="m">25</span>.
Inserting an index entry into index <span class="nv">$O</span> of file <span class="m">25</span>.
Inserting an index entry into index <span class="nv">$O</span> of file <span class="m">25</span>.
.
.
.

Windows has made corrections to the file system.
No further action is required.

 <span class="m">347408383</span> KB total disk space.
 <span class="m">119105712</span> KB in <span class="m">59504</span> files.
     <span class="m">28084</span> KB in <span class="m">11046</span> indexes.
         <span class="m">0</span> KB in bad sectors.
    <span class="m">147219</span> KB in use by the system.
     <span class="m">65536</span> KB occupied by the log file.
 <span class="m">228127368</span> KB available on disk.

      <span class="m">4096</span> bytes in each allocation unit.
  <span class="m">86852095</span> total allocation units on disk.
  <span class="m">57031842</span> allocation units available on disk.</code></pre></div></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Linuxä¸‹Sublime Textæ”¯æŒä¸­æ–‡è¾“å…¥</title>
			<link>https://www.smslit.top/2016/03/26/subl-ChineseInput-Linux/</link>
			<pubDate>Sat, 26 Mar 2016 09:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/03/26/subl-ChineseInput-Linux/</guid>
			<description>&lt;p&gt;sublime Textæ˜¯ä¸€æ¬¾éå¸¸å¥½ç”¨çš„ä»£ç æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåœ¨æˆ‘çš„å…¶å®ƒæ–‡ç« ä¸­æœ‰è¿‡ä»‹ç»å®ƒçš„å®‰è£…ï¼Œä½¿ç”¨åå‘ç°åœ¨linuxä¸‹Sublime textä¸‹ä¸­æ–‡è¾“å…¥æ³•å¤±æ•ˆï¼Œä¸èƒ½è¾“å…¥ä¸­æ–‡ï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹å¦‚ä½•è§£å†³ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>sublime Textæ˜¯ä¸€æ¬¾éå¸¸å¥½ç”¨çš„ä»£ç æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåœ¨æˆ‘çš„å…¶å®ƒæ–‡ç« ä¸­æœ‰è¿‡ä»‹ç»å®ƒçš„å®‰è£…ï¼Œä½¿ç”¨åå‘ç°åœ¨linuxä¸‹Sublime textä¸‹ä¸­æ–‡è¾“å…¥æ³•å¤±æ•ˆï¼Œä¸èƒ½è¾“å…¥ä¸­æ–‡ï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹å¦‚ä½•è§£å†³ã€‚</p>

<h3 id="å¹³å°">å¹³å°</h3>

<ol>
<li>Ubuntu 15.10</li>
<li>sublime text 3</li>
<li>fcitxè¾“å…¥æ³•</li>
</ol>

<h3 id="æ“ä½œ">æ“ä½œ</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># è·å–Githubæ–‡ä»¶</span>
git clone https://github.com/smslit/SublimeText-IM-Fix.git <span class="o">&amp;&amp;</span> <span class="nb">cd</span> SublimeText-IM-Fix
<span class="c1"># æ‹·è´ä¿®å¤å…±äº«åº“</span>
sudo cp lib/libsublime-imfix.so /opt/sublime_text
<span class="c1"># æ‹·è´è½¯ä»¶é“¾æ¥</span>
sudo cp bin/subl /usr/bin
<span class="c1"># æ‹·è´å¯åŠ¨å™¨å¿«æ·æ–¹å¼</span>
sudo cp applications/sublime_text.desktop /usr/share/applications/</code></pre></div>
<p>å‘½ä»¤è¡Œï¼šsublæˆ–è€…Launcherå¯åŠ¨è¿è¡Œè½¯ä»¶ï¼Œå¦‚æœé¡ºåˆ©çš„è¯åº”è¯¥æ”¯æŒä¸­æ–‡è¾“å…¥äº†ã€‚</p>

<h3 id="è¯¦è§£">è¯¦è§£</h3>

<p>å…¶å®å®‰è£…å®Œ<strong>Sublime text</strong>åï¼Œä¼šåœ¨<strong>/usr/bin/</strong>ä¸‹ç”Ÿæˆsublæ–‡ä»¶ï¼Œåœ¨<strong>/usr/share/applications/</strong>ä¸‹ç”Ÿæˆsublime_text.desktopï¼Œä¸ºäº†ä½¿sublime textæ”¯æŒä¸­æ–‡è¾“å…¥ï¼Œåœ¨å¯åŠ¨è½¯ä»¶çš„æ—¶å€™éœ€è¦è°ƒç”¨<strong>libsublime-imfix.so</strong>ï¼Œåœ¨ä¸Šè¿°æ“ä½œä¸­æ‹·è´çš„æ–‡ä»¶å°±æ˜¯ä¿®æ”¹ä¹‹åçš„sublå’Œsublime_text.desktopã€‚ä¸‹é¢ä¸»è¦è¯´æ˜ä¸€ä¸‹ä¿®æ”¹çš„åœ°æ–¹ã€‚</p>

<h4 id="sublæ–‡ä»¶">sublæ–‡ä»¶</h4>

<p>åŸæ–‡ä»¶å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span><span class="nb">exec</span> /opt/sublime_text/sublime_text <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span></code></pre></div>
<p>ä¿®æ”¹åçš„æ–‡ä»¶å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/sh
</span><span class="cp"></span><span class="nv">LD_PRELOAD</span><span class="o">=</span>/opt/sublime_text/libsublime-imfix.so <span class="nb">exec</span> /opt/sublime_text/sublime_text <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span></code></pre></div>
<p>å¯¹æ¯”å¯å‘ç°ï¼Œæ˜¯åœ¨åŸæ¥çš„è¯­å¥å‰åŠ äº†è°ƒç”¨ä¿®å¤åº“libsublime-imfix.soçš„è¯­å¥</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">LD_PRELOAD</span><span class="o">=</span>/opt/sublime_text/libsublime-imfix.so</code></pre></div>
<h4 id="sublime-text-desktopæ–‡ä»¶">sublime_text.desktopæ–‡ä»¶</h4>

<p>ä¿®æ”¹çš„åœ°æ–¹æœ‰ä¸‰ç‚¹ï¼Œå‡åœ¨<strong>Exec</strong>çš„ä½ç½®ï¼Œä¹Ÿæ˜¯åœ¨è¿è¡Œè½¯ä»¶çš„è¯­å¥å‰åŠ äº†è°ƒç”¨ä¿®å¤åº“libsublime-imfix.soçš„è¯­å¥ã€‚</p>

<p>åŸæ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>Desktop Entry<span class="o">]</span>
<span class="nv">Version</span><span class="o">=</span><span class="m">1</span>.0
<span class="nv">Type</span><span class="o">=</span>Application
<span class="nv">Name</span><span class="o">=</span>Sublime Text
<span class="nv">GenericName</span><span class="o">=</span>Text Editor
<span class="nv">Comment</span><span class="o">=</span>Sophisticated text editor <span class="k">for</span> code, markup and prose
<span class="nv">Exec</span><span class="o">=</span>/opt/sublime_text/sublime_text %F
<span class="nv">Terminal</span><span class="o">=</span><span class="nb">false</span>
<span class="nv">MimeType</span><span class="o">=</span>text/plain<span class="p">;</span>
<span class="nv">Icon</span><span class="o">=</span>sublime-text
<span class="nv">Categories</span><span class="o">=</span>TextEditor<span class="p">;</span>Development<span class="p">;</span>
<span class="nv">StartupNotify</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">Actions</span><span class="o">=</span>Window<span class="p">;</span>Document<span class="p">;</span>

<span class="o">[</span>Desktop Action Window<span class="o">]</span>
<span class="nv">Name</span><span class="o">=</span>New Window
<span class="nv">Exec</span><span class="o">=</span>/opt/sublime_text/sublime_text -n
<span class="nv">OnlyShowIn</span><span class="o">=</span>Unity<span class="p">;</span>

<span class="o">[</span>Desktop Action Document<span class="o">]</span>
<span class="nv">Name</span><span class="o">=</span>New File
<span class="nv">Exec</span><span class="o">=</span>/opt/sublime_text/sublime_text --command new_file
<span class="nv">OnlyShowIn</span><span class="o">=</span>Unity<span class="p">;</span></code></pre></div>
<p>ä¿®æ”¹åçš„æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>Desktop Entry<span class="o">]</span>
<span class="nv">Version</span><span class="o">=</span><span class="m">1</span>.0
<span class="nv">Type</span><span class="o">=</span>Application
<span class="nv">Name</span><span class="o">=</span>Sublime Text
<span class="nv">GenericName</span><span class="o">=</span>Text Editor
<span class="nv">Comment</span><span class="o">=</span>Sophisticated text editor <span class="k">for</span> code, markup and prose
<span class="nv">Exec</span><span class="o">=</span>bash -c <span class="s2">&#34;LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text %F&#34;</span>
<span class="nv">Terminal</span><span class="o">=</span><span class="nb">false</span>
<span class="nv">MimeType</span><span class="o">=</span>text/plain<span class="p">;</span>
<span class="nv">Icon</span><span class="o">=</span>sublime-text
<span class="nv">Categories</span><span class="o">=</span>TextEditor<span class="p">;</span>Development<span class="p">;</span>
<span class="nv">StartupNotify</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">Actions</span><span class="o">=</span>Window<span class="p">;</span>Document<span class="p">;</span>

<span class="o">[</span>Desktop Action Window<span class="o">]</span>
<span class="nv">Name</span><span class="o">=</span>New Window
<span class="nv">Exec</span><span class="o">=</span>bash -c <span class="s2">&#34;LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text -n&#34;</span>
<span class="nv">OnlyShowIn</span><span class="o">=</span>Unity<span class="p">;</span>

<span class="o">[</span>Desktop Action Document<span class="o">]</span>
<span class="nv">Name</span><span class="o">=</span>New File
<span class="nv">Exec</span><span class="o">=</span>bash -c <span class="s2">&#34;LD_PRELOAD=/opt/sublime_text/libsublime-imfix.so exec /opt/sublime_text/sublime_text --command new_file&#34;</span>
<span class="nv">OnlyShowIn</span><span class="o">=</span>Unity<span class="p">;</span></code></pre></div>
<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<ol>
<li><a href="http://jingyan.baidu.com/article/f3ad7d0ff8731609c3345b3b.html" target="_blank">Ubuntuä¸‹Sublime Text 3è§£å†³æ— æ³•è¾“å…¥ä¸­æ–‡çš„æ–¹æ³•</a></li>
<li><a href="http://www.jianshu.com/p/bf05fb3a4709" target="_blank">è§£å†³Ubuntuä¸‹Sublime Text 3æ— æ³•è¾“å…¥ä¸­æ–‡</a></li>
</ol>]]></content>
		</item>
		
		<item>
			<title>Ubuntuä¸‹é…ç½®JDK</title>
			<link>https://www.smslit.top/2016/03/24/JDKConfig-Linux/</link>
			<pubDate>Thu, 24 Mar 2016 09:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/03/24/JDKConfig-Linux/</guid>
			<description>&lt;p&gt;åœ¨ä½¿ç”¨æŸäº›è½¯ä»¶æˆ–è€…è¦è¿›è¡ŒAndroidæˆ–è€…Javaå¼€å‘çš„è¯ï¼Œéœ€è¦é…ç½®javaçš„ç¯å¢ƒå˜é‡ï¼Œæœ¬æ–‡å°±æ¥è®²ä¸€ä¸‹å®‰è£…å’Œé…ç½®jdkçš„æ­¥éª¤ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨æŸäº›è½¯ä»¶æˆ–è€…è¦è¿›è¡ŒAndroidæˆ–è€…Javaå¼€å‘çš„è¯ï¼Œéœ€è¦é…ç½®javaçš„ç¯å¢ƒå˜é‡ï¼Œæœ¬æ–‡å°±æ¥è®²ä¸€ä¸‹å®‰è£…å’Œé…ç½®jdkçš„æ­¥éª¤ã€‚</p>

<h3 id="æµ‹è¯•ç¯å¢ƒ">æµ‹è¯•ç¯å¢ƒ</h3>

<p>ubuntu15.10</p>

<h3 id="å®‰è£…æ­¥éª¤">å®‰è£…æ­¥éª¤</h3>

<h4 id="ä¸‹è½½jdk">ä¸‹è½½JDK</h4>

<p>éœ€è¦å…ˆåˆ° <strong><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank">javaå®˜ç½‘</a></strong> ä¸‹è½½ç›¸åº”JDKåŒ…ï¼Œè¿™é‡Œæˆ‘ä¸‹è½½çš„æ˜¯<strong>jdk-8u45-linux-x64.tar.gz</strong>ï¼Œå°†ä¸‹è½½çš„å‹ç¼©åŒ…æ”¾åˆ°Downloadsç›®å½•ä¸‹ã€‚</p>

<h4 id="è§£å‹å®‰è£…">è§£å‹å®‰è£…</h4>

<ul>
<li>æ‰“å¼€ç»ˆç«¯ï¼Œå¯ä»¥åœ¨launcherä¸­å¯åŠ¨Terminalä¹Ÿå¯ä»¥æŒ‰å¿«æ·é”®<strong>CTRL+ALT+t</strong>æ¥å¯åŠ¨ç»ˆç«¯ã€‚</li>

<li><p>æ•²å…¥å‘½ä»¤ï¼Œè§£å‹å‹ç¼©åŒ…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tar -xf jdk-8u45-linux-x64.tar.gz</code></pre></div></li>

<li><p>å°†è§£å‹åçš„jdkæ‹·è´åˆ°<strong>/usr/lib/</strong>ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo cp -r jdk1.8.0_45 /usr/lib/</code></pre></div></li>
</ul>

<h4 id="é…ç½®ç¯å¢ƒå˜é‡">é…ç½®ç¯å¢ƒå˜é‡</h4>

<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ç³»ç»Ÿå…¨å±€çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·å¯¹ç³»ç»Ÿçš„æ‰€æœ‰ç”¨æˆ·éƒ½èµ·ä½œç”¨ï¼Œåœ¨<strong>/etc/profile</strong>æ–‡ä»¶æœ«å°¾æ·»åŠ javaç¯å¢ƒå˜é‡æ¥å®Œæˆæœ¬éƒ¨åˆ†æ“ä½œã€‚</p>

<ul>
<li><p>ç¼–è¾‘<strong>/etc/profile</strong></p>

<p>ä½¿ç”¨ç¼–è¾‘å™¨ç¼–è¾‘æ­¤æ–‡ä»¶ï¼Œå¯ä»¥ç”¨geditä¹Ÿå¯ä»¥ç”¨vimæˆ–è€…å…¶ä»–ç¼–è¾‘å™¨ï¼Œæˆ‘ç”¨vimï¼Œä½†éƒ½ä¸è¦å¿˜è®°è¦ç”¨sudoæ‰“å¼€æ–‡ä»¶ï¼Œå¯æ•²å…¥å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo vim /etc/profile</code></pre></div></li>

<li><p>åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä¸‰è¡Œå†…å®¹ï¼Œæ³¨æ„çš„æ˜¯ä¸€å®šè¦ä¸ä½ çš„å®‰è£…ç›®å½•å¯¹åº”ï¼Œå¯èƒ½ç‰ˆæœ¬ä¸åŒè§£å‹å‡ºæ¥çš„æ–‡ä»¶ç›®å½•åä¸åŒã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">export</span> <span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jdk1.8.0_45
<span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span>.:<span class="nv">$JAVA_HOME</span>/lib:<span class="nv">$JAVA_HOME</span>/jre/lib:<span class="nv">$CLASSPATH</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$JAVA_HOME</span>/bin:<span class="nv">$JAVA_HOME</span>/jre/bin:<span class="nv">$PATH</span></code></pre></div></li>

<li><p>:wqï¼Œä¿å­˜é€€å‡ºã€‚</p></li>

<li><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo <span class="nb">source</span> /etc/profile</code></pre></div></li>

<li><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">java -version</code></pre></div></li>

<li><p>å¦‚æœå®‰è£…é…ç½®æˆåŠŸä¼šå‡ºç°ä¸‹é¢çš„è¯­å¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">java version <span class="s2">&#34;1.8.0_45&#34;</span>
Java<span class="o">(</span>TM<span class="o">)</span> SE Runtime Environment <span class="o">(</span>build <span class="m">1</span>.8.0_45-b14<span class="o">)</span>
Java HotSpot<span class="o">(</span>TM<span class="o">)</span> <span class="m">64</span>-Bit Server VM <span class="o">(</span>build <span class="m">25</span>.45-b02, mixed mode<span class="o">)</span></code></pre></div></li>
</ul>

<h3 id="æ³¨æ„">æ³¨æ„</h3>

<p>ç°åœ¨javaåªæ˜¯é’ˆå¯¹ç»ˆç«¯å¯ç”¨ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨javaè¿˜éœ€è¦é‡å¯ç”µè„‘ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>Gemæ·»åŠ è½¯ä»¶æºæ—¶SSlé”™è¯¯è§£å†³</title>
			<link>https://www.smslit.top/2016/03/21/gem-ssl-error-jekyll/</link>
			<pubDate>Mon, 21 Mar 2016 17:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/03/21/gem-ssl-error-jekyll/</guid>
			<description>&lt;p&gt;windowsä¸‹åœ¨ç”¨gemæ·»åŠ taobaoçš„è½¯ä»¶æºæ—¶å‡ºç°äº†sslè®¤è¯é”™è¯¯ï¼Œæ˜¯å› ä¸ºrubyæ²¡æœ‰åŒ…å«sslè¯ä¹¦ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä¸‹è½½å’Œé…ç½®è¯ä¹¦æ¥è§£å†³ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>windowsä¸‹åœ¨ç”¨gemæ·»åŠ taobaoçš„è½¯ä»¶æºæ—¶å‡ºç°äº†sslè®¤è¯é”™è¯¯ï¼Œæ˜¯å› ä¸ºrubyæ²¡æœ‰åŒ…å«sslè¯ä¹¦ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ä¸‹è½½å’Œé…ç½®è¯ä¹¦æ¥è§£å†³ã€‚</p>

<h3 id="é—®é¢˜ç°è±¡">é—®é¢˜ç°è±¡</h3>

<p>åœ¨å‘½ä»¤è¡Œä¸‹æ‰§è¡Œä¸‹é¢æŒ‡ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">gem sources -a https://ruby.taobao.org/</code></pre></div>
<p>å‡ºç°ä»¥ä¸‹é”™è¯¯æç¤ºï¼š</p>

<blockquote>
<p>Error fetching <a href="https://ruby.taobao.org/:" target="_blank">https://ruby.taobao.org/:</a> SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (<a href="https://api.rubygems.org/latest_specs.4.8.gz" target="_blank">https://api.rubygems.org/latest_specs.4.8.gz</a>)</p>
</blockquote>

<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h3>

<h4 id="ä¸‹è½½è¯ä¹¦">ä¸‹è½½è¯ä¹¦</h4>

<p>ç‚¹<a href="http://curl.haxx.se/ca/cacert.pem" target="_blank">è¿™é‡Œ</a>æ˜¯è¯ä¹¦ï¼Œå¦å­˜åˆ°ç”µè„‘ä¸Šï¼Œç›®å½•è‡ªå·±å†³å®šï¼Œæˆ‘æ˜¯ä¿å­˜åˆ°äº†Rubyçš„å®‰è£…ç›®å½•ã€‚</p>

<h4 id="è®¾ç½®ç¯å¢ƒå˜é‡">è®¾ç½®ç¯å¢ƒå˜é‡</h4>

<p>éœ€è¦è®¾ç½®ç¯å¢ƒå˜é‡æŒ‡å‘è¯¥æ–‡ä»¶ï¼Œç³»ç»Ÿæ‰èƒ½æ‰¾åˆ°è¯ä¹¦ã€‚ä¸‹é¢ç®€å•è¯´ä¸€ä¸‹æ­¥éª¤ï¼ˆä»¥win10ä¸ºä¾‹ï¼‰ï¼š</p>

<h5 id="ç³»ç»Ÿè®¾ç½®">ç³»ç»Ÿè®¾ç½®</h5>

<p>æŒ‰ä¸‹<strong>winé”®</strong> + <strong>X</strong>ï¼Œè°ƒå‡ºå¿«æ·é€‰é¡¹ï¼Œé€‰æ‹©<strong>ç³»ç»Ÿ</strong>ï¼Œè¿›å…¥ç³»ç»Ÿè®¾ç½®ç•Œé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/t6q6w.png" alt="1" /></p>

<p>é€‰æ‹©å·¦ä¾§ä¸­çš„<strong>é«˜çº§ç³»ç»Ÿè®¾ç½®ï¼ˆAdvanced System settingsï¼‰</strong>ï¼Œè¿›å…¥é«˜çº§ç³»ç»Ÿè®¾ç½®ç•Œé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/db7yg.png" alt="2" /></p>

<p>é€‰æ‹©<strong>ç¯å¢ƒå˜é‡ï¼ˆEnvironment Variablesï¼‰</strong>ï¼Œè¿›å…¥ç¯å¢ƒå˜é‡è®¾ç½®ç•Œé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/crakn.png" alt="3" /></p>

<h5 id="ç¯å¢ƒå˜é‡è®¾ç½®">ç¯å¢ƒå˜é‡è®¾ç½®</h5>

<p>é€‰æ‹©<strong>æ–°å»ºï¼ˆNew&hellip;)</strong>ï¼Œè¿›å…¥æ–°å»ºçš„ç•Œé¢ï¼Œå¹¶å¡«å…¥å˜é‡å<code>SSL_CERT_FILE</code>å’Œåˆšæ‰çš„è¯ä¹¦çš„ä½ç½®ï¼ˆä»¥æˆ‘çš„ä¸ºä¾‹ï¼‰<code>C:\Ruby22-x64\cacert.pem</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/y3myc.png" alt="4" /></p>

<h5 id="é‡å¯å‘½ä»¤è¡Œ">é‡å¯å‘½ä»¤è¡Œ</h5>

<p>é‡å¯å‘½ä»¤è¡Œï¼Œç„¶ååœ¨ä½¿ç”¨gemæ·»åŠ taobaoæºï¼Œå³å¯æˆåŠŸäº†ï¼Œè¿™é‡Œè¦è¯´æ˜çš„æ˜¯ä¸ä¸€å®šæ·»åŠ æºæ‰å‡ºç°è¿™é—®é¢˜ï¼Œåªè¦æ˜¯è®¿é—®æºçš„æ“ä½œç¼ºå°‘è¯ä¹¦çš„è¯éƒ½ä¼šå‡ºç°æ­¤æ–‡çš„é”™è¯¯ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”ç®€å•æ–°å»ºå±äºè‡ªå·±çš„åè®®æ ˆå·¥ç¨‹</title>
			<link>https://www.smslit.top/2016/03/21/newProject-BLE/</link>
			<pubDate>Mon, 21 Mar 2016 10:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/03/21/newProject-BLE/</guid>
			<description>&lt;p&gt;æœ¬æ–‡ä¸»è¦è®²ä¸€ä¸‹æ–°å»ºTIçš„CC2541åè®®æ ˆçš„å·¥ç¨‹ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦è®²ä¸€ä¸‹æ–°å»ºTIçš„CC2541åè®®æ ˆçš„å·¥ç¨‹ã€‚</p>

<h3 id="å‰è¨€">å‰è¨€</h3>

<p>é€šè¿‡é˜…è¯»BLEåè®®æ ˆçš„å¼€å‘æ‰‹å†Œï¼Œèƒ½å¤Ÿå¤§ä½“äº†è§£åˆ°åè®®æ ˆçš„ç»„æˆæ¶æ„ï¼Œå¹¶å¯¹æ¯ä¸€å±‚ï¼ˆPHYã€LLã€HCIã€L2CAPã€SMã€ATTã€GATTå’ŒGAPï¼‰å…·ä½“æ˜¯åšä»€ä¹ˆä¹Ÿæœ‰äº†ä¸€å®šè®¤è¯†å’Œç†è§£ï¼Œæ¥ä¸‹æ¥é€šè¿‡ä¸€å®šçš„å·¥ç¨‹å®è·µæ…¢æ…¢å»æ·±å…¥å­¦ä¹ ï¼Œæ‰‹å†Œä¸­ä¹Ÿè®²äº†å†…éƒ¨çš„æ“ä½œç³»ç»ŸæŠ½è±¡å±‚ï¼ˆOSALï¼‰ï¼Œä¸»è¦å®ç°äº†è½®è¯¢ä»»åŠ¡äº‹ä»¶è§¦å‘æœºåˆ¶ï¼Œæ˜¯ä¸€ä¸ªè¾ƒç®€å•çš„åµŒå…¥å¼ç³»ç»Ÿï¼Œæ‰€ä»¥è¦åšTIçš„è“ç‰™å¼€å‘è¿˜è¦å¯¹OSALçš„å·¥ä½œåŸç†æœ‰ä¸€å®šç†è§£ï¼Œæ‰€æœ‰è¿™äº›å¯ä»¥å‚è€ƒå­¦ä¹ TIæä¾›çš„å®˜æ–¹æ‰‹å†Œã€‚</p>

<h3 id="æ­£æ–‡">æ­£æ–‡</h3>

<p>è¨€å½’æ­£ä¼ ï¼Œæœ¬æ–‡ä¸»è¦è®²çš„æ˜¯åˆ©ç”¨TIåè®®æ ˆå·¥ç¨‹æ–°å»ºå±äºè‡ªå·±å®šåˆ¶çš„å·¥ç¨‹ã€‚é¦–å…ˆè¯´æ˜çš„æ˜¯ï¼Œæˆ‘è®²çš„è¿™ç§æ–¹å¼æ¯”è¾ƒç²—æš´ï¼Œå“ˆå“ˆã€‚</p>

<h4 id="ç®€å•è¯´æ˜å·¥ç¨‹ç»“æ„">ç®€å•è¯´æ˜å·¥ç¨‹ç»“æ„</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/mqr4n.png" alt="0" /></p>

<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æŒ‰ç…§å®˜æ–¹ä¾‹ç¨‹çš„å·¥ç¨‹æ¥è¯´å°±æ˜¯ä¸Šé¢çš„ä¸€ç§ç»“æ„ï¼Œæ ¹ç›®å½•ä¸‹æœ‰<strong>Components</strong>å’Œ<strong>Projects</strong>ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œ<strong>Projects</strong>æ–‡ä»¶å¤¹ä¸‹åˆæœ‰<strong>common</strong>ã€<strong>config</strong>ã€<strong>Include</strong>ã€<strong>Libraries</strong>ã€<strong>Profiles</strong>å’Œ<strong>SimpleBLEPeripheral</strong>ï¼Œ<strong>SimpleBLEPeripheral</strong>æ–‡ä»¶å¤¹ä¸‹æœ‰<strong>CC2541DB</strong>å’Œ<strong>Source</strong>ï¼Œæ ¹æ®è¿™ä¸ªç»“æ„ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å¤åˆ¶ç²˜è´´æ¥å®Œæˆå·¥ç¨‹çš„å¤åˆ¶æ–°å»ºäº†ã€‚</p>

<p><strong>CC2541DB</strong>æ–‡ä»¶å¤¹ä¸‹æ”¾çš„å°±æ˜¯å·¥ç¨‹æ–‡ä»¶ï¼Œ<strong>Source</strong>æ–‡ä»¶å¤¹ä¸‹æ”¾çš„æ˜¯è‡ªå·±ç¼–å†™çš„æºæ–‡ä»¶ã€‚</p>

<h4 id="æ–°å»ºå·¥ç¨‹">æ–°å»ºå·¥ç¨‹</h4>

<h5 id="æ–°å»ºæ–‡ä»¶å¤¹">æ–°å»ºæ–‡ä»¶å¤¹</h5>

<p>è‡ªå·±é€‰æ‹©åˆé€‚çš„ç›®å½•ï¼Œç„¶ååœ¨å…¶ä¸‹å»ºç«‹æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚<strong>TestLED</strong>ï¼Œåœ¨<strong>TestLED</strong>ä¸‹æ–°å»ºæ–‡ä»¶å¤¹<strong>Projects</strong>ï¼Œå†åœ¨<strong>Projects</strong>æ–‡ä»¶å¤¹ä¸‹å»ºç«‹<strong>ble</strong>æ–‡ä»¶å¤¹ã€‚</p>

<h5 id="æ‹·è´æ–‡ä»¶å¤¹">æ‹·è´æ–‡ä»¶å¤¹</h5>

<p>æ‰¾åˆ°åè®®æ ˆçš„å®‰è£…ç›®å½•ï¼Œæˆ‘çš„æ˜¯<code>C:\Texas Instruments\BLE-CC254x-1.4.0</code>ï¼Œå°†æ•´ä¸ªæ–‡ä»¶å¤¹<strong>Components</strong>æ‹·è´åˆ°<strong>TestLED</strong>ä¸­ï¼Œç„¶åè¿›å…¥åè®®æ ˆçš„<strong>Projects</strong>ä¸‹çš„<strong>ble</strong>ï¼Œå°†<strong>common</strong>ã€<strong>config</strong>ã€<strong>Include</strong>ã€<strong>Libraries</strong>ã€<strong>Profiles</strong>å’Œ<strong>SimpleBLEPeripheral</strong>å…­ä¸ªæ–‡ä»¶å¤¹æ”¾åˆ°<strong>TestLED</strong>&ndash;<strong>Projects</strong>&ndash;<strong>ble</strong>ç›®å½•ä¸‹ï¼Œå®Œæˆåçš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/aegf9.png" alt="1" /></p>

<p>å¯ä»¥å°†<strong>SimplePeripheral</strong>æ–‡ä»¶å¤¹ä¿®æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„åå­—ï¼Œå¦‚<strong>TestLED</strong>ã€‚</p>

<h5 id="éªŒè¯å·¥ç¨‹">éªŒè¯å·¥ç¨‹</h5>

<p>æ‰“å¼€<strong>SimplePeripheral</strong>ç›®å½•ä¸‹çš„å·¥ç¨‹æ–‡ä»¶ï¼Œè¿›å…¥IARç¼–è¯‘æµ‹è¯•ï¼Œä¸€èˆ¬æ˜¯å¯ä»¥ç¼–è¯‘é€šè¿‡çš„ã€‚</p>

<h4 id="å·¥ç¨‹é…ç½®">å·¥ç¨‹é…ç½®</h4>

<ul>
<li><p>å…ˆæ¸…æ¥šé…ç½®æ–‡ä»¶é€‰æ‹©çš„ä½ç½®ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/m15za.png" alt="2" /></p></li>

<li><p>å¯ä»¥çœ‹åˆ°é»˜è®¤çš„é…ç½®é€‰æ‹©çš„æ˜¯<code>CC2541DK-MINI Keyfob</code>ï¼Œä¸ºäº†ä¿è¯åŸé…ç½®æ–‡ä»¶çš„å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥æ–°å»ºè‡ªå·±çš„é…ç½®ï¼Œç‚¹å‡»èœå•æ <code>Projects</code>-&gt;<code>Edit Configurations...</code>ï¼Œå°±ä¼šè·³å‡ºä»¥ä¸‹çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/psxu1.png" alt="3" /></p></li>

<li><p>é€‰æ‹©<code>New...</code>ï¼Œå¯ä»¥è°ƒå‡ºæ–°å»ºé…ç½®çª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/j1al4.png" alt="4" /></p></li>

<li><p>å¯ä»¥å¡«å…¥è‡ªå·±æƒ³è¦çš„é…ç½®åç§°ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯<strong>TestLED</strong>ï¼ŒToolchainå½“ç„¶æ˜¯é€‰8051ï¼Œè¿˜æœ‰å°±æ˜¯Based on configurationï¼Œè¿™ä¸ªæˆ‘ä»¬è¦é€‰æ‹©åˆé€‚çš„ï¼Œæˆ‘é€‰çš„æ˜¯<strong>CC2541</strong>ï¼Œç‚¹å‡»OKå®Œæˆï¼Œå°±å¯ä»¥çœ‹åˆ°å·¥ç¨‹é…ç½®å°±æ˜¯<strong>TestLED</strong>äº†ã€‚</p></li>
</ul>

<h4 id="ç®€å•çœ‹ä¸€ä¸‹options">ç®€å•çœ‹ä¸€ä¸‹Options</h4>

<p>å³å‡»å·¥ç¨‹<strong>SimpleBLEPeripheral</strong>ï¼Œé€‰æ‹©<strong>options</strong>è°ƒå‡ºé…ç½®çª—å£ï¼Œé€‰æ‹©å·¦è¾¹æ <code>General Options</code>ä¸‹çš„<code>C/C++ Compiler</code>ï¼Œç„¶ååœ¨å³ä¾§é€‰æ‹©<code>Preprocessor</code>é€‰é¡¹å¡ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/jb37x.png" alt="5" /></p>

<ul>
<li><p>çœ‹åˆ°<strong>Additional include directiories:(one per line)</strong>ï¼Œä»”ç»†è§‚å¯Ÿæ¯ä¸€è¡Œéƒ½æœ‰ä¸ª<code>$PROJ_DIR$</code>ï¼Œè¿™ä»£è¡¨çš„æ˜¯å·¥ç¨‹æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•<strong>SimpleBLEPeripheral</strong>ä¸‹çš„<strong>CC2541DB</strong>ï¼Œå†çœ‹å°±æ˜¯è¿˜æœ‰<code>..\</code>ï¼Œä»£è¡¨çš„æ˜¯ä¸Šä¸€å±‚ç›®å½•ï¼Œæ‰€ä»¥å°±æ˜ç™½äº†ä¹‹å‰ä¸ºä»€ä¹ˆå¤åˆ¶é‚£äº›æ–‡ä»¶å¤¹åˆ°ç›¸åº”ç›®å½•äº†å§ã€‚</p></li>

<li><p>å†çœ‹<strong>Defined symbols:(one per line)</strong>ï¼Œåœ¨è¿™é‡Œç¼–è¾‘ç›¸åº”å®å®šä¹‰å¯ä»¥ä½¿ç”¨ç›¸åº”çš„HALé©±åŠ¨å’Œåè®®æ ˆåŠŸèƒ½ï¼Œæ¯”å¦‚å…¶ä¸­çš„<code>HAL_LED=FALSE</code>ï¼Œè¿™å°±æ˜¯è¯´æ˜ä¸ä½¿ç”¨HALçš„ledç¯æ§åˆ¶åŠŸèƒ½ï¼Œå³IOè¾“å‡ºã€‚</p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Mac ä½¿ç”¨æŠ€å·§</title>
			<link>https://www.smslit.top/2016/03/01/Mac-Notes-Life/</link>
			<pubDate>Tue, 01 Mar 2016 10:10:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2016/03/01/Mac-Notes-Life/</guid>
			<description>&lt;p&gt;å¼€æœ¬æ–‡çš„ç›®çš„æ˜¯æ•´ç†å’Œè®°å½•å¹³å¸¸ä½¿ç”¨macçš„æŠ€å·§ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å¼€æœ¬æ–‡çš„ç›®çš„æ˜¯æ•´ç†å’Œè®°å½•å¹³å¸¸ä½¿ç”¨macçš„æŠ€å·§ã€‚</p>

<h3 id="å†…å®¹">å†…å®¹</h3>

<h4 id="ä¿®æ”¹launchpadçš„å›¾æ ‡å¤§å°">ä¿®æ”¹Launchpadçš„å›¾æ ‡å¤§å°</h4>

<p>è¿™é‡Œä¿®æ”¹å¤§å°ï¼Œå¹¶ä¸æ˜¯ä¿®æ”¹ä¸ºç¡®åˆ‡çš„å¤§å°ï¼Œè€Œæ˜¯é€šè¿‡è°ƒæ•´æ¯ä¸€è¡Œã€æ¯ä¸€åˆ—æ˜¾ç¤ºå›¾æ ‡æ•°é‡æ¥è°ƒæ•´çš„ï¼Œéœ€è¦ç”¨åˆ°ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œæ‰§è¡Œå‘½ä»¤å®Œæˆä¿®æ”¹ï¼Œåˆ†ä¸‰æ­¥ï¼š</p>

<ul>
<li><p>1.1 ä¿®æ”¹æ¯ä¸€åˆ—æ˜¾ç¤ºå›¾æ ‡æ•°é‡ï¼š</p>

<p><strong>defaults write com.apple.dock springboard-rows -int 6</strong></p></li>

<li><p>1.2 ä¿®æ”¹æ¯ä¸€è¡Œæ˜¾ç¤ºå›¾æ ‡æ•°é‡ï¼š</p>

<p><strong>defaults write com.apple.dock springboard-columns -int 10</strong></p></li>

<li><p>1.3 é‡ç½®Launchpadå¹¶é‡å¯dockï¼š</p>

<p><strong>defaults write com.apple.dock ResetLaunchPad -bool TRUE;killall Dock</strong></p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>è§£å†³adbå¯¹Androidè®¾å¤‡çš„è¯†åˆ«é—®é¢˜</title>
			<link>https://www.smslit.top/2015/12/13/adbT1-Develop/</link>
			<pubDate>Sun, 13 Dec 2015 08:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/12/13/adbT1-Develop/</guid>
			<description>&lt;p&gt;ä»Šå¤©å¼€å§‹å­¦ä¹ APICloudå¼€å‘Androidå¹³å°ä¸‹çš„appï¼Œä½¿ç”¨çš„æ˜¯Sublime Text3è¿›è¡Œå¼€å‘ï¼ŒæŒ‰ç…§å®˜ç½‘ä¸Šçš„æ•™ç¨‹æŠŠæ’ä»¶å®‰è£…æˆåŠŸï¼Œå¹¶æŒ‰ç…§æ•™ç¨‹æ–°å»ºäº†ä¸€ä¸ªæœ‰åº•éƒ¨å¯¼èˆªæ çš„demo appï¼Œå½“å³å‡»é€‰æ‹©çœŸæœºè°ƒè¯•æ—¶ï¼Œå´å¼¹å‡ºå¯¹è¯æ¡†æ²¡æœ‰é“¾æ¥ç€çš„è®¾å¤‡ï¼Œå¯æ˜¯æ˜æ˜æˆ‘ç”¨usbè¿æ¥ç€æˆ‘çš„T1å‘€ï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹æˆ‘è§£å†³è¿™ä¸ªé—®é¢˜çš„è¿‡ç¨‹ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©å¼€å§‹å­¦ä¹ APICloudå¼€å‘Androidå¹³å°ä¸‹çš„appï¼Œä½¿ç”¨çš„æ˜¯Sublime Text3è¿›è¡Œå¼€å‘ï¼ŒæŒ‰ç…§å®˜ç½‘ä¸Šçš„æ•™ç¨‹æŠŠæ’ä»¶å®‰è£…æˆåŠŸï¼Œå¹¶æŒ‰ç…§æ•™ç¨‹æ–°å»ºäº†ä¸€ä¸ªæœ‰åº•éƒ¨å¯¼èˆªæ çš„demo appï¼Œå½“å³å‡»é€‰æ‹©çœŸæœºè°ƒè¯•æ—¶ï¼Œå´å¼¹å‡ºå¯¹è¯æ¡†æ²¡æœ‰é“¾æ¥ç€çš„è®¾å¤‡ï¼Œå¯æ˜¯æ˜æ˜æˆ‘ç”¨usbè¿æ¥ç€æˆ‘çš„T1å‘€ï¼Œæœ¬æ–‡å°±è®²è§£ä¸€ä¸‹æˆ‘è§£å†³è¿™ä¸ªé—®é¢˜çš„è¿‡ç¨‹ã€‚</p>

<h3 id="å¹³å°">å¹³å°</h3>

<ul>
<li>å¹³å°ï¼šMac</li>
<li>æ‰‹æœºï¼šSmartisan T1ï¼ˆé”¤å­æ‰‹æœºï¼‰</li>
<li>å¼€å‘æŠ€æœ¯å¹³å°ï¼šAPICloud</li>
</ul>

<h3 id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ</h3>

<p>åœ¨sublime Textçš„APICloudæ’ä»¶ä¸­ï¼Œæœ‰androidçœŸæœºè°ƒè¯•çš„é€‰é¡¹ï¼Œä½†æ˜¯æˆ‘ç‚¹å‡»åå´å‡ºç°ä¸€ä¸‹å¯¹è¯æ¡†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/regid.png" alt="1" /></p>

<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œåº”è¯¥å¯ä»¥ç›´æ¥è¿›è¡ŒçœŸæœºè°ƒè¯•ï¼Œæˆ‘é¦–å…ˆæƒ³åˆ°ä¼šä¸ä¼šæ˜¯å®˜æ–¹æ•™ç¨‹ä¸­æ‰€è¯´çš„åœ¨macä¸‹æƒé™çš„é—®é¢˜ï¼Œæˆ‘å°±è¿›å…¥æ’ä»¶å®‰è£…åŒ…ä¸‹æ‰¾åˆ°adbï¼Œå‘½ä»¤è¡Œä¸‹æ‰§è¡Œ</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">chmod +x ./adb</code></pre></div>
<p>ä½†æ˜¯ï¼Œä¿®æ”¹adbæƒé™åè¿˜æ˜¯è¿™ä¸ªé—®é¢˜ï¼Œè°ƒç”¨adbå‘½ä»¤æŸ¥çœ‹è¿æ¥ç€çš„è®¾å¤‡</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">./adb devices</code></pre></div>
<p>ä½†æ˜¯ç»“æœä¸­ç¡®å®æ²¡æœ‰é“¾æ¥ä¸­çš„è®¾å¤‡ï¼Œè¿™å°±æ’é™¤æ’ä»¶çš„é—®é¢˜äº†ï¼Œåº”è¯¥ä¼šæ˜¯æ‰‹æœºçš„é—®é¢˜ï¼ŒæŒ‰ç†è¯´adbåº”è¯¥å¯ä»¥æŸ¥çœ‹åˆ°é“¾æ¥ä¸­çš„è®¾å¤‡ï¼Œæˆ‘åˆå»ç½‘ä¸Šä¸€æœï¼Œå‘ç°äº†<a href="http://bbs.smartisan.com/thread-60797-1-1.html" target="_blank">Smartisan T1 é…ç½® ADB çš„æ–¹æ³•</a>è¿™ä¸ªå¸–å­ï¼Œè¿™æ‰æ˜ç™½åŸæ¥æ˜¯æ—§ç‰ˆçš„adbä¸­æ²¡æœ‰åŒ…å«T1çš„IDæ‰€è‡´ï¼Œä½†æ˜¯å¸–å­ä¸­æ²¡æœ‰Macä¸‹è§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•ï¼Œä¼°è®¡åº”è¯¥æ˜¯ç±»ä¼¼çš„æ–¹æ³•ï¼Œæ— éå°±æ˜¯æ·»åŠ T1çš„IDåˆ°adb_usb.iniæ–‡ä»¶ä¸­ï¼Œåæ¥æœç´¢åˆçœ‹åˆ°äº†è¿™ä¸ªå¸–å­<a href="http://my.oschina.net/u/698243/blog/139441" target="_blank">Macä¸‹androidæ‰‹æœºçš„adbè¯†åˆ«</a>ï¼Œç¬¬2éƒ¨åˆ†å°†è®²è§£å„å¹³å°ä¸‹è§£å†³adbå¯¹T1çš„è¯†åˆ«é—®é¢˜ã€‚</p>

<h3 id="è§£å†³adbå¯¹androidè®¾å¤‡çš„è¯†åˆ«é—®é¢˜">è§£å†³adbå¯¹androidè®¾å¤‡çš„è¯†åˆ«é—®é¢˜</h3>

<p>è²Œä¼¼æœ€æ–°çš„adbå·¥å…·å·²ç»åŒ…å«äº†Smartisan T1çš„Vendor ID 0X29A9ï¼Œä½†æ˜¯å¦‚æœä¸æƒ³æ›´æ¢åˆ°æœ€æ–°çš„adbå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•è§£å†³ä¸èƒ½è¯†åˆ«è®¾å¤‡çš„é—®é¢˜ï¼Œå…¶å®è¿™äº›æ–¹æ³•åŒæ ·é€‚äºæ‰€æœ‰ä¸èƒ½è¯†åˆ«çš„androidæ‰‹æœºï¼Œå› ä¸ºå¯èƒ½éƒ½æ˜¯å› ä¸ºadbæ²¡æœ‰åŒ…å«å¯¹åº”æ‰‹æœºçš„Vendor IDæ‰€è‡´ã€‚</p>

<h4 id="æŸ¥çœ‹androidè®¾å¤‡çš„vendor-id">æŸ¥çœ‹Androidè®¾å¤‡çš„Vendor ID</h4>

<p>é¦–å…ˆæˆ‘ä»¬åº”è¯¥çŸ¥é“æˆ‘ä»¬çš„androidè®¾å¤‡çš„Vendor IDã€‚</p>

<h5 id="windowsä¸‹">Windowsä¸‹</h5>

<p>åœ¨windowsä¸‹ï¼Œé€šå¸¸çš„åšæ³•æ˜¯è¿›å…¥è®¾å¤‡ç®¡ç†å™¨æ‰¾åˆ°è¿æ¥çš„æ‰‹æœºå³å‡»é€‰æ‹©å±æ€§è¿›è¡ŒæŸ¥çœ‹ã€‚</p>

<h5 id="linuxä¸‹">Linuxä¸‹</h5>

<p>é€šå¸¸å¯ä»¥åœ¨ç»ˆç«¯ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œæ•²å›è½¦å¯ä»¥æŸ¥çœ‹è¿æ¥çš„USBè®¾å¤‡çš„ä¿¡æ¯ï¼Œç„¶åè®°ä¸‹IDå³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">lsusb -tv</code></pre></div>
<h5 id="macä¸‹">Macä¸‹</h5>

<p>é¡¶æ æœ€å·¦ä¾§è‹¹æœæ ‡å¿—-&gt;å…³äºæœ¬æœº-&gt;æ›´å¤šä¿¡æ¯-&gt;æ¦‚è§ˆ-&gt;ç³»ç»ŸæŠ¥å‘Š-&gt;USB-&gt;Android-&gt;å‚å•†ID(Vendor ID)</p>

<h4 id="é…ç½®ä¸­æ·»åŠ vendor-id">é…ç½®ä¸­æ·»åŠ Vendor ID</h4>

<p>æˆ‘ä»¬çŸ¥é“äº†Vendor IDï¼Œä¸‹é¢å°±è¦ä¿®æ”¹ä¸€äº›æ–‡ä»¶æ¥å®ç°è¯†åˆ«äº†ï¼Œä¸‰å¤§å¹³å°ä¸‹çš„æ–¹æ³•æœ‰æ‰€å·®å¼‚ï¼Œä½†éƒ½æ˜¯å‘æ–‡ä»¶ä¸­æ·»åŠ Vendor IDæ¥è§£å†³é—®é¢˜ã€‚</p>

<h5 id="windowsä¸‹-1">Windowsä¸‹</h5>

<ul>
<li><p><strong>windows8/8.1</strong></p>

<ul>
<li>ç¦ç”¨å¼ºåˆ¶é©±åŠ¨ç­¾åï¼Œå‚è€ƒæ•™ç¨‹ï¼<strong><a href="http://bbs.pcbeta.com/viewthread-1122886-1-1.html" target="_blank">è§£å†³Win8/8.1å¼ºåˆ¶è¦æ±‚é©±åŠ¨ç­¾åè€Œå¯¼è‡´é©±åŠ¨å®‰è£…å¤±è´¥çš„é—®é¢˜</a></strong></li>
<li>ä»è®¾å¤‡ç®¡ç†å™¨ä¸­å®‰è£…é©±åŠ¨<a href="http://pan.baidu.com/s/1sjXK1ml" target="_blank">adb_usb_driver_smartisan.zip</a>ã€‚</li>
<li>æ‰“å¼€ç”¨æˆ·ç›®å½•ä¸‹çš„.android/adb_usb.iniæ–‡ä»¶ï¼Œå°†å¾—åˆ°çš„Vendor IDæ·»åŠ åˆ°æœ€åä¸€è¡Œï¼ˆæ˜¯æ–°èµ·ä¸€è¡Œï¼‰ï¼Œæ¯”å¦‚T1çš„æ˜¯0x29A9.</li>
<li>åœ¨å‘½ä»¤è¡Œä¸­é‡å¯adbï¼š</li>
<li>adb kill-server</li>
<li>adb start-server</li>
</ul></li>

<li><p><strong>windows7</strong></p>

<ul>
<li>ä»è®¾å¤‡ç®¡ç†å™¨ä¸­å®‰è£…é©±åŠ¨<a href="http://pan.baidu.com/s/1sjXK1ml" target="_blank">adb_usb_driver_smartisan.zip</a>ã€‚</li>
<li>æ‰“å¼€ç”¨æˆ·ç›®å½•ä¸‹çš„.android/adb_usb.iniæ–‡ä»¶ï¼Œå°†å¾—åˆ°çš„Vendor IDæ·»åŠ åˆ°æœ€åä¸€è¡Œï¼ˆæ˜¯æ–°èµ·ä¸€è¡Œï¼‰ï¼Œæ¯”å¦‚T1çš„æ˜¯0x29A9.</li>
<li>åœ¨å‘½ä»¤è¡Œä¸­é‡å¯adbï¼š</li>
<li>adb kill-server</li>
<li>adb start-server</li>
</ul></li>
</ul>

<h5 id="linuxä¸‹-1">Linuxä¸‹</h5>

<ul>
<li><p>ä¿®æ”¹è®¾å¤‡è§„åˆ™æ–‡ä»¶ï¼Œå‘æ–‡ä»¶<code>/etc/udev/rules.d/51-android.rules</code>ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>

<blockquote>
<p>SUBSYSTEM==&ldquo;usb&rdquo;, ATTR{idVendor}==&ldquo;29a9&rdquo;, ATTR{idProduct}==&ldquo;701a&rdquo;, MODE=&ldquo;0666&rdquo;, OWNER=&ldquo;your name&rdquo;</p>

<p>SUBSYSTEM==&ldquo;usb&rdquo;, ATTR{idVendor}==&ldquo;29a9&rdquo;, ATTR{idProduct}==&ldquo;701b&rdquo;, MODE=&ldquo;0666&rdquo;, OWNER=&ldquo;your name&rdquo;</p>
</blockquote></li>

<li><p>æ‰“å¼€ç”¨æˆ·ç›®å½•ä¸‹çš„.android/adb_usb.iniæ–‡ä»¶ï¼Œå°†å¾—åˆ°çš„Vendor IDæ·»åŠ åˆ°æœ€åä¸€è¡Œï¼ˆæ˜¯æ–°èµ·ä¸€è¡Œï¼‰ï¼Œæ¯”å¦‚T1çš„æ˜¯0x29A9.</p></li>

<li><p>åœ¨å‘½ä»¤è¡Œä¸­é‡å¯adbï¼š</p>

<ul>
<li>adb kill-server</li>
<li>adb start-server</li>
</ul></li>
</ul>

<h5 id="macä¸‹-1">Macä¸‹</h5>

<p>ä»¥T1ä¸ºä¾‹ï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">echo</span> 0x29A9 &gt;&gt; ~/.android/adb_usb.ini
adb kill-server
adb start-server</code></pre></div>
<h5 id="æ£€æŸ¥æ˜¯å¦æˆåŠŸè§£å†³é—®é¢˜">æ£€æŸ¥æ˜¯å¦æˆåŠŸè§£å†³é—®é¢˜</h5>

<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">adb devices</code></pre></div>
<p>å¦‚æœèƒ½åˆ—å‡ºä½ çš„è®¾å¤‡è¯´æ˜ï¼Œå°±å¯ä»¥äº†ã€‚</p>

<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<ol>
<li><strong><a href="http://bbs.smartisan.com/thread-60797-1-1.html" target="_blank">Smartisan T1 é…ç½® ADB çš„æ–¹æ³•</a></strong></li>
<li><strong><a href="http://my.oschina.net/u/698243/blog/139441" target="_blank">Macä¸‹androidæ‰‹æœºçš„adbè¯†åˆ«</a></strong></li>
<li><strong><a href="http://bbs.pcbeta.com/viewthread-1122886-1-1.html" target="_blank">è§£å†³Win8/8.1å¼ºåˆ¶è¦æ±‚é©±åŠ¨ç­¾åè€Œå¯¼è‡´é©±åŠ¨å®‰è£…å¤±è´¥çš„é—®é¢˜</a></strong></li>
</ol>]]></content>
		</item>
		
		<item>
			<title>Linuxä¸‹Arduino USB to TTL æƒé™é—®é¢˜è§£å†³</title>
			<link>https://www.smslit.top/2015/12/04/usbttlInLinux-Arduino/</link>
			<pubDate>Fri, 04 Dec 2015 10:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/12/04/usbttlInLinux-Arduino/</guid>
			<description>&lt;p&gt;åœ¨Linuxä¸­é«˜é«˜å…´å…´çš„å®‰è£…å®Œäº†Arduinoï¼Œç»“æœç¼–è¯‘ä¸‹è½½ç¨‹åºæ—¶å‘ç°ç«Ÿç„¶å‡ºé”™ï¼Œä¸èƒ½ä¸‹è½½ç¨‹åºï¼Œæœ¬æ–‡å°±æ¥è¯´ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨Linuxä¸­é«˜é«˜å…´å…´çš„å®‰è£…å®Œäº†Arduinoï¼Œç»“æœç¼–è¯‘ä¸‹è½½ç¨‹åºæ—¶å‘ç°ç«Ÿç„¶å‡ºé”™ï¼Œä¸èƒ½ä¸‹è½½ç¨‹åºï¼Œæœ¬æ–‡å°±æ¥è¯´ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>åœ¨linuxä¸‹ä½¿ç”¨usbttlå‡ä¼šå‡ºç°usbä½¿ç”¨æƒé™é—®é¢˜ï¼Œä¸‹å›¾æ˜¯æˆ‘åœ¨Ubuntu15.04ä¸­çš„é—®é¢˜æˆªå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ivqks.png" alt="1" /></p>

<p>å¯ä»¥çœ‹åˆ°é—®é¢˜æ˜¯ï¼š<code>avrdude:ser_open():can't open device &quot;/dev/ttyUSB0&quot;:Permission denied</code></p>

<h3 id="è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</h3>

<p>è§£å†³æ–¹æ³•ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸¤ç§ï¼Œä¸€ä¸ªæ¥è‡ªArduinoå®˜ç½‘labsçš„<a href="http://labs.arduino.org/Arduino%20IDE%20on%20Linux-based%20OS" target="_blank">ARDUINO IDE ON LINUX-BASED OS</a>ï¼Œä¸€ä¸ªæ¥è‡ªæ–‡ç« <a href="http://blog.csdn.net/mtofum/article/details/50070543" target="_blank">è®©ubuntuä¸²å£å’ŒUSBè®¾å¤‡ä¸ç”¨rootæƒé™è®¿é—®</a>ï¼Œç»å°è¯•å‡å¯è§£å†³ï¼Œæ›´å–œæ¬¢ç”¨Arduinoå®˜ç½‘çš„è§£å†³æ–¹æ¡ˆã€‚</p>

<h4 id="æ–¹æ³•ä¸€">æ–¹æ³•ä¸€</h4>

<ol>
<li><p>åˆ›å»ºæ–‡ä»¶90-extraacl.rulesï¼Œæ”¾åˆ°ç›®å½•<code>/etc/udev/rulse.d/</code>ä¸‹</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo vim /etc/udev/rules.d/90-etreacl.rules</code></pre></div></li>

<li><p>ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">KERNEL</span><span class="o">=</span><span class="s2">&#34;ttyUSB[0-9]*&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;udev-acl&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;uaccess&#34;</span>, <span class="nv">OWNER</span><span class="o">=</span><span class="s2">&#34;&amp;lt;your_username&amp;gt;&#34;</span> 
<span class="nv">KERNEL</span><span class="o">=</span><span class="s2">&#34;ttyACM[0-9]*&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;udev-acl&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;uaccess&#34;</span>, <span class="nv">OWNER</span><span class="o">=</span><span class="s2">&#34;&amp;lt;your_username&amp;gt;&#34;</span></code></pre></div>
<p>å…¶ä¸­OWNERçš„å€¼æ˜¯ç”¨æˆ·åï¼Œæ¯”å¦‚æˆ‘çš„linuxç”¨æˆ·åæ˜¯smslitï¼Œæˆ‘å°±å¯ä»¥æ˜¯ä¸‹é¢çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">KERNEL</span><span class="o">=</span><span class="s2">&#34;ttyUSB[0-9]*&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;udev-acl&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;uaccess&#34;</span>, <span class="nv">OWNER</span><span class="o">=</span><span class="s2">&#34;smslit&#34;</span>
<span class="nv">KERNEL</span><span class="o">=</span><span class="s2">&#34;ttyACM[0-9]*&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;udev-acl&#34;</span>, <span class="nv">TAG</span><span class="o">+=</span><span class="s2">&#34;uaccess&#34;</span>, <span class="nv">OWNER</span><span class="o">=</span><span class="s2">&#34;smslit&#34;</span></code></pre></div></li>

<li><p>å¼€å¯æƒé™ï¼Œæ³¨é”€åæœ‰æ•ˆï¼Œå¯æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sudo usermod -a -G tty smslit
sudo usermod -a -G dialout smslit</code></pre></div>
<p><strong>æ³¨ï¼š</strong>smslitæ›¿æ¢ä¸ºä½ å½“å‰çš„ç”¨æˆ·åã€‚</p></li>
</ol>

<h4 id="æ–¹æ³•äºŒ">æ–¹æ³•äºŒ</h4>

<p>ä»æ–‡ç« ä¸­æˆ‘ä»¬çŸ¥é“ubuntué‡‡ç”¨udevç®¡ç†è®¾å¤‡ï¼Œå› è€Œæ’å…¥è®¾å¤‡çš„æƒé™å¯ä»¥ç”±udevçš„rulesæ–‡ä»¶æ¥å®šä¹‰ï¼Œå…¶å®linuxéƒ½æ˜¯å¦‚æ­¤çš„ã€‚è¿™é‡ŒArduinoè®¿é—®çš„ç¡¬ä»¶æ˜¯USBè½¬TTLä¸²å£ï¼Œæ‰€ä»¥å¯ä»¥åˆ›å»ºrulesæ–‡ä»¶æ¥è§£å†³ï¼Œåšæ³•å¦‚ä¸‹ï¼š</p>

<ul>
<li><p>åœ¨/etc/udev/rules.d/ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå–åå¯ä»¥æ˜¯90-tofu.rules
ç”¨vimåˆ›å»ºæ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼ˆéœ€è¦ç”¨sudoçš„ï¼‰ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> /etc/udev/rules.d/
sudo vim <span class="m">90</span>-tofu.rules</code></pre></div></li>
</ul>

<p>è¿™æ ·æˆ‘ä»¬å°±è¿›å…¥vimï¼ŒæŒ‰ä¸‹*i*ï¼Œè¿›å…¥ç¼–è¾‘æ’å…¥çŠ¶æ€ã€‚</p>

<ul>
<li><p>æ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">SUBSYSTEMS</span><span class="o">==</span><span class="s2">&#34;usb-serial&#34;</span>, <span class="nv">KERNEL</span><span class="o">==</span><span class="s2">&#34;ttyUSB?&#34;</span>, <span class="nv">GROUP</span><span class="o">=</span><span class="s2">&#34;tofu&#34;</span>, <span class="nv">MODE</span><span class="o">=</span><span class="s2">&#34;0666&#34;</span></code></pre></div>
<p>æŒ‰ä¸‹ <em>ESC</em> é”®ï¼Œè¾“å…¥<code>:wq</code>ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚é‡æ–°æ’æ‹”Arduinoæˆ–ä¸‹è½½çº¿ã€‚</p></li>
</ul>

<p>Arduinoæ­¤æ—¶å°±æœ‰æƒé™ä½¿ç”¨è®¾å¤‡ä¸‹è½½ç¨‹åºäº†ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>ASCIIå­—ç¬¦çš„Arduinoæ¿å›¾</title>
			<link>https://www.smslit.top/2015/11/23/asciiBoardMap-Arduino/</link>
			<pubDate>Mon, 23 Nov 2015 22:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/23/asciiBoardMap-Arduino/</guid>
			<description>&lt;p&gt;åœ¨ä¸ºArduinoå†™ä»£ç çš„æ—¶å€™ï¼Œæœ‰æ—¶å¾ˆå¤´ç–¼æ€ä¹ˆæ›´å¥½çš„ç¤ºæ„è¿çº¿å›¾å‘¢ï¼Œä»Šå¤©çœ‹Arduinoå®˜ç½‘åšå®¢æ—¶çœ‹åˆ°äº†ä¸€ç¯‡æ–‡ç« &lt;a href=&#34;https://blog.arduino.cc/2015/11/20/arduino-pinout-ascii-art-ready-to-go/&#34; target=&#34;_blank&#34;&gt;ARDUINO PINOUT ASCII ART READY TO GO&lt;/a&gt;ï¼Œç”¨Asciiå­—ç¬¦è¡¨ç¤ºè¿çº¿çš„è¯çœŸçš„å¾ˆå½¢è±¡ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨ä¸ºArduinoå†™ä»£ç çš„æ—¶å€™ï¼Œæœ‰æ—¶å¾ˆå¤´ç–¼æ€ä¹ˆæ›´å¥½çš„ç¤ºæ„è¿çº¿å›¾å‘¢ï¼Œä»Šå¤©çœ‹Arduinoå®˜ç½‘åšå®¢æ—¶çœ‹åˆ°äº†ä¸€ç¯‡æ–‡ç« <a href="https://blog.arduino.cc/2015/11/20/arduino-pinout-ascii-art-ready-to-go/" target="_blank">ARDUINO PINOUT ASCII ART READY TO GO</a>ï¼Œç”¨Asciiå­—ç¬¦è¡¨ç¤ºè¿çº¿çš„è¯çœŸçš„å¾ˆå½¢è±¡ã€‚</p>

<p>æˆ‘æ ¹æ®æ–‡ä¸­åˆ›æ„åšäº†è‡ªå·±çš„æ–‡æ¡£åŒ–çš„æ¿å›¾ï¼Œä¸è¿‡æˆ‘åšçš„éƒ½æ˜¯åŸºäºATmega328PèŠ¯ç‰‡çš„ï¼Œä»¥ååªéœ€å¤åˆ¶è¿›æ³¨é‡Šä¸­ï¼Œæ›´æ”¹æ·»åŠ ä¸€äº›å­—ç¬¦å°±èƒ½ä½¿è¿çº¿å›¾æ–‡æ¡£åŒ–äº†ï¼Œç®€å•æ˜äº†è¿˜ç›´è§‚ã€‚</p>

<h3 id="arduino-uno-r3">Arduino UNO r3</h3>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cm">/* Arduino UNO r3 æ¿å›¾
</span><span class="cm"> * ä½œè€…ï¼šåé‡Œï¼ˆ5kmï¼‰
</span><span class="cm"> * æè¿°ï¼šå¯ä»¥ç”¨æ¥ç¤ºæ„Arduinoè¿çº¿
</span><span class="cm"> * è¿çº¿ï¼š
</span><span class="cm"> */</span>
                     <span class="o">+---+</span>                          <span class="o">+------+</span>
                <span class="o">+----|</span>   <span class="o">|--------------------------|</span>  <span class="n">USB</span> <span class="o">|-----+</span>
                <span class="o">|</span>    <span class="o">|</span><span class="n">PWR</span><span class="o">|</span>                          <span class="o">|</span><span class="n">______</span><span class="o">|</span>     <span class="o">|</span>
                <span class="o">|</span>    <span class="o">+---+</span>            <span class="n">GND</span><span class="o">/</span><span class="n">RST2</span> <span class="p">[</span> <span class="p">][</span> <span class="p">]</span>  <span class="n">A5</span><span class="o">/</span><span class="n">SCL</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span>                   <span class="n">MOSI2</span><span class="o">/</span><span class="n">SCK2</span> <span class="p">[</span> <span class="p">][</span> <span class="p">]</span>  <span class="n">A4</span><span class="o">/</span><span class="n">SDA</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span>                      <span class="mi">5</span><span class="n">V</span><span class="o">/</span><span class="n">MISO2</span><span class="p">[</span> <span class="p">][</span> <span class="p">]</span>    <span class="n">AREF</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span>                                         <span class="n">GND</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">N</span><span class="o">/</span><span class="n">C</span>                               <span class="n">SCK</span><span class="o">/</span><span class="mi">13</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">v</span><span class="p">.</span><span class="n">ref</span>                            <span class="n">MISO</span><span class="o">/</span><span class="mi">12</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">RST</span>      <span class="o">+----+</span>                  <span class="n">MOSI</span><span class="o">/</span><span class="mi">11</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">3</span><span class="n">V3</span>     <span class="o">-|</span>    <span class="o">|-</span>                      <span class="mi">10</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">5</span><span class="n">V</span>      <span class="o">-|</span> <span class="n">A</span>  <span class="o">|-</span>                       <span class="mi">9</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">GND</span>     <span class="o">-|</span> <span class="n">T</span>  <span class="o">|-</span>                       <span class="mi">8</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">GND</span>     <span class="o">-|</span> <span class="n">M</span>  <span class="o">|-</span>    <span class="n">ARDUINO</span>                 <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">Vin</span>     <span class="o">-|</span> <span class="n">E</span>  <span class="o">|-</span>           <span class="n">UNO_R3</span>      <span class="mi">7</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span>            <span class="o">-|</span> <span class="n">G</span>  <span class="o">|-</span>                       <span class="mi">6</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A0</span>      <span class="o">-</span><span class="p">[</span> <span class="n">A</span>  <span class="p">]</span><span class="o">-</span>                       <span class="mi">5</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A1</span>      <span class="o">-|</span>  <span class="mi">3</span> <span class="o">|-</span>                       <span class="mi">4</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A2</span>      <span class="o">-|</span>  <span class="mi">2</span> <span class="o">|-</span>                  <span class="n">INT1</span><span class="o">/</span><span class="mi">3</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A3</span>      <span class="o">-|</span>  <span class="mi">8</span> <span class="o">|-</span>   <span class="n">RST</span> <span class="n">SCK</span> <span class="n">MISO</span>   <span class="n">INT0</span><span class="o">/</span><span class="mi">2</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A4</span><span class="o">/</span><span class="n">SDA</span>  <span class="o">-|</span>  <span class="n">P</span> <span class="o">|-</span>   <span class="n">GND</span> <span class="n">MOSI</span> <span class="mi">5</span><span class="n">V</span>     <span class="n">TX</span><span class="o">-&gt;</span><span class="mi">1</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A5</span><span class="o">/</span><span class="n">SCL</span>  <span class="o">-|</span>    <span class="o">|-</span>   <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span>     <span class="n">RX</span><span class="o">&lt;-</span><span class="mi">0</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                <span class="o">|</span><span class="n">_</span>            <span class="o">+----+</span>    <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span>   <span class="n">__________</span><span class="o">/</span>
                   <span class="err">\</span><span class="n">________________________________</span><span class="o">/</span></code></pre></div>
<h3 id="å®˜æ–¹ç‰ˆarduino-pro-mini">å®˜æ–¹ç‰ˆArduino Pro Mini</h3>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cm">/* å®˜æ–¹ç‰ˆArduino Pro MINI æ¿å›¾
</span><span class="cm"> * ä½œè€…ï¼šåé‡Œï¼ˆ5kmï¼‰
</span><span class="cm"> * æè¿°ï¼šå¯ä»¥ç”¨æ¥ç¤ºæ„Arduinoè¿çº¿
</span><span class="cm"> * è¿çº¿ï¼š
</span><span class="cm"> */</span>
                     <span class="o">+---------------------------+</span>
                     <span class="o">|</span>  <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span>  <span class="o">|</span>
                     <span class="o">|</span>  <span class="n">BLK</span> <span class="n">GND</span> <span class="n">VCC</span> <span class="n">RXI</span> <span class="n">TXO</span> <span class="n">GRN</span>  <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">1</span><span class="o">/</span><span class="n">TXO</span>           <span class="n">RAW</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">0</span><span class="o">/</span><span class="n">RXI</span>           <span class="n">GND</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">RST</span>             <span class="n">RST</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">GND</span>             <span class="n">VCC</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">2</span>          <span class="n">A5</span><span class="p">[</span> <span class="p">]</span> <span class="n">A3</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">3</span>  <span class="o">-------</span> <span class="n">A4</span><span class="p">[</span> <span class="p">]</span> <span class="n">A2</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">4</span> <span class="o">|</span><span class="n">ATmega</span> <span class="o">|</span>      <span class="n">A1</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">5</span> <span class="o">|</span>   <span class="mi">328</span><span class="n">P</span><span class="o">|</span>      <span class="n">A0</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">6</span>  <span class="o">-------</span> <span class="n">A7</span><span class="p">[</span> <span class="p">]</span> <span class="mi">13</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">7</span>          <span class="n">A6</span><span class="p">[</span> <span class="p">]</span> <span class="mi">12</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">8</span>                <span class="mi">11</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">9</span>                <span class="mi">10</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                     <span class="o">|</span>      <span class="n">Arduino</span> <span class="n">Pro</span> <span class="n">MINI</span>     <span class="o">|</span>
                     <span class="o">+---------------------------+</span></code></pre></div>
<h3 id="æ”¹è¿›ç‰ˆarduino-pro-mini">æ”¹è¿›ç‰ˆArduino Pro Mini</h3>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cm">/* æ”¹è¿›ç‰ˆArduino Pro MINI æ¿å›¾
</span><span class="cm"> * ä½œè€…ï¼šåé‡Œï¼ˆ5kmï¼‰
</span><span class="cm"> * æè¿°ï¼šå¯ä»¥ç”¨æ¥ç¤ºæ„Arduinoè¿çº¿
</span><span class="cm"> * è¿çº¿ï¼š
</span><span class="cm"> */</span>
                     <span class="o">+---------------------------+</span>
                     <span class="o">|</span>  <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span>  <span class="o">|</span>
                     <span class="o">|</span>  <span class="n">GND</span> <span class="n">GND</span> <span class="n">VCC</span> <span class="n">RXD</span> <span class="n">TXD</span> <span class="n">DTR</span>  <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">RAW</span>             <span class="n">TXD</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">GND</span>  <span class="n">Arduino</span>    <span class="n">RXD</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">RST</span>    <span class="n">Pro</span> <span class="n">MINI</span> <span class="n">RST</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">VCC</span>             <span class="n">GND</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A3</span>    <span class="o">-------</span>     <span class="mi">2</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A2</span>   <span class="o">|</span><span class="n">ATmega</span> <span class="o">|</span>    <span class="mi">3</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A1</span>   <span class="o">|</span>   <span class="mi">328</span><span class="n">P</span><span class="o">|</span>    <span class="mi">4</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">A0</span>    <span class="o">-------</span>     <span class="mi">5</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">13</span>                <span class="mi">6</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">12</span>                <span class="mi">7</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">11</span>  <span class="n">A6</span>   <span class="n">MIS</span> <span class="n">SCK</span>  <span class="mi">8</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">10</span>  <span class="n">A4</span>   <span class="n">VCC</span> <span class="n">MOS</span>  <span class="mi">9</span><span class="p">[</span> <span class="p">]</span><span class="o">~|</span>
                     <span class="o">|</span>    <span class="n">A7</span><span class="p">[</span> <span class="p">][</span> <span class="p">]</span> <span class="p">[</span> <span class="p">][</span> <span class="p">][</span> <span class="p">]</span><span class="n">RST</span>  <span class="o">|</span>
                     <span class="o">|</span>    <span class="n">A5</span><span class="p">[</span> <span class="p">][</span> <span class="p">]</span> <span class="p">[</span> <span class="p">][</span> <span class="p">][</span> <span class="p">]</span><span class="n">GND</span>  <span class="o">|</span>
                     <span class="o">+---------------------------+</span> </code></pre></div>
<h3 id="arduino-nano">Arduino Nano</h3>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cm">/* Arduino Nano æ¿å›¾
</span><span class="cm"> * ä½œè€…ï¼šåé‡Œï¼ˆ5kmï¼‰
</span><span class="cm"> * æè¿°ï¼šå¯ä»¥ç”¨æ¥ç¤ºæ„Arduinoè¿çº¿
</span><span class="cm"> * è¿çº¿ï¼š
</span><span class="cm"> */</span>
                     <span class="o">+----------------------------+</span>
                     <span class="o">|</span>     <span class="n">ICSP</span><span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span>        <span class="o">|</span>
                     <span class="o">|</span>         <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span> <span class="p">[</span> <span class="p">]</span>        <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">TX1</span>  <span class="mi">5</span><span class="n">V</span> <span class="n">MOSI</span> <span class="n">GND</span> <span class="n">Vin</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">RX0</span> <span class="n">MISO</span> <span class="n">SCK</span> <span class="n">RST</span> <span class="n">GND</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">RST</span>              <span class="n">RST</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="n">GND</span>               <span class="mi">5</span><span class="n">V</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">2</span>                 <span class="n">A7</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">3</span>     <span class="o">-------</span>     <span class="n">A6</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">4</span>    <span class="o">|</span><span class="n">ATmega</span> <span class="o">|</span>    <span class="n">A5</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">5</span>    <span class="o">|</span>   <span class="mi">328</span><span class="n">P</span><span class="o">|</span>    <span class="n">A4</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">6</span>     <span class="o">-------</span>     <span class="n">A3</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">7</span>                 <span class="n">A2</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">8</span>                 <span class="n">A1</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">9</span>   <span class="n">Arduino</span> <span class="n">Nano</span>  <span class="n">A0</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">10</span>               <span class="n">REF</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|~</span><span class="p">[</span> <span class="p">]</span><span class="mi">11</span>    <span class="o">+------+</span>   <span class="mi">3</span><span class="n">V3</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">|</span> <span class="p">[</span> <span class="p">]</span><span class="mi">12</span>    <span class="o">|</span> <span class="n">USB</span>  <span class="o">|</span>    <span class="mi">13</span><span class="p">[</span> <span class="p">]</span> <span class="o">|</span>
                     <span class="o">+----------|</span>      <span class="o">|----------+</span> 
                                <span class="o">+------+</span></code></pre></div>]]></content>
		</item>
		
		<item>
			<title>é›¶æ¬§å§†ç”µé˜»åœ¨ç”µè·¯ä¸­çš„ä½œç”¨</title>
			<link>https://www.smslit.top/2015/11/20/0ohmFunction-elec/</link>
			<pubDate>Fri, 20 Nov 2015 22:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/20/0ohmFunction-elec/</guid>
			<description>&lt;p&gt;å¿ƒä¸­ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Œç”µè·¯ä¸­ä¸ºå•¥è¦å¼„ä¸Šä¸ª0æ¬§å§†çš„ç”µé˜»å‘¢ï¼Œæ‰€ä»¥å°±ç½‘ä¸Šæœç´¢è¯·æ•™äº†ä¸€ä¸‹ï¼Œçœ‹åˆ°&lt;strong&gt;&lt;a href=&#34;http://www.eepw.com.cn/article/270119.htm&#34; target=&#34;_blank&#34;&gt;é›¶æ¬§å§†ç”µé˜»çš„åäºŒç§ä½œç”¨&lt;/a&gt;&lt;/strong&gt;åˆé•¿çŸ¥è¯†äº†ï¼Œæ„Ÿè°¢æ–‡ç« çš„ä½œè€…ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å¿ƒä¸­ä¸€ç›´æœ‰ä¸ªç–‘é—®ï¼Œç”µè·¯ä¸­ä¸ºå•¥è¦å¼„ä¸Šä¸ª0æ¬§å§†çš„ç”µé˜»å‘¢ï¼Œæ‰€ä»¥å°±ç½‘ä¸Šæœç´¢è¯·æ•™äº†ä¸€ä¸‹ï¼Œçœ‹åˆ°<strong><a href="http://www.eepw.com.cn/article/270119.htm" target="_blank">é›¶æ¬§å§†ç”µé˜»çš„åäºŒç§ä½œç”¨</a></strong>åˆé•¿çŸ¥è¯†äº†ï¼Œæ„Ÿè°¢æ–‡ç« çš„ä½œè€…ã€‚</p>

<p>é›¶æ¬§å§†ç”µé˜»åˆç§°ä¸ºè·¨æ¥ç”µé˜»å™¨ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šç”¨é€”çš„ç”µé˜»ï¼Œ0æ¬§å§†ç”µé˜»çš„å¹¶éçœŸæ­£çš„é˜»å€¼ä¸ºé›¶(é‚£æ˜¯è¶…å¯¼ä½“å¹²çš„äº‹æƒ…)ï¼Œæ­£å› ä¸ºæœ‰é˜»å€¼ï¼Œä¹Ÿå°±å’Œå¸¸è§„è´´ç‰‡ç”µé˜»ä¸€æ ·æœ‰è¯¯å·®ç²¾åº¦è¿™ä¸ªæŒ‡æ ‡ã€‚</p>

<h4 id="é›¶æ¬§å§†ç”µé˜»çš„ä½œç”¨å¦‚ä¸‹">é›¶æ¬§å§†ç”µé˜»çš„ä½œç”¨å¦‚ä¸‹ï¼š</h4>

<ol>
<li><p>åœ¨ç”µè·¯ä¸­æ²¡æœ‰ä»»ä½•åŠŸèƒ½ï¼Œåªæ˜¯åœ¨PCBä¸Šä¸ºäº†è°ƒè¯•æ–¹ä¾¿æˆ–å…¼å®¹è®¾è®¡ç­‰åŸå› ã€‚</p></li>

<li><p>å¯ä»¥åšè·³çº¿ç”¨ï¼Œå¦‚æœæŸæ®µçº¿è·¯ä¸ç”¨ï¼Œç›´æ¥ä¸è´´è¯¥ç”µé˜»å³å¯(ä¸å½±å“å¤–è§‚)</p></li>

<li><p>åœ¨åŒ¹é…ç”µè·¯å‚æ•°ä¸ç¡®å®šçš„æ—¶å€™ï¼Œä»¥0æ¬§å§†ä»£æ›¿ï¼Œå®é™…è°ƒè¯•çš„æ—¶å€™ï¼Œç¡®å®šå‚æ•°ï¼Œå†ä»¥å…·ä½“æ•°å€¼çš„å…ƒä»¶ä»£æ›¿ã€‚</p></li>

<li><p>æƒ³æµ‹æŸéƒ¨åˆ†ç”µè·¯çš„è€—ç”µæµçš„æ—¶å€™ï¼Œå¯ä»¥å»æ‰0ohmç”µé˜»ï¼Œæ¥ä¸Šç”µæµè¡¨ï¼Œè¿™æ ·æ–¹ä¾¿æµ‹è€—ç”µæµã€‚</p></li>

<li><p>åœ¨å¸ƒçº¿æ—¶ï¼Œå¦‚æœå®åœ¨å¸ƒä¸è¿‡å»äº†ï¼Œä¹Ÿå¯ä»¥åŠ ä¸€ä¸ª0æ¬§çš„ç”µé˜»</p></li>

<li><p>åœ¨é«˜é¢‘ä¿¡å·ä¸‹ï¼Œå……å½“ç”µæ„Ÿæˆ–ç”µå®¹ã€‚(ä¸å¤–éƒ¨ç”µè·¯ç‰¹æ€§æœ‰å…³)ç”µæ„Ÿç”¨ï¼Œä¸»è¦æ˜¯è§£å†³EMCé—®é¢˜ã€‚å¦‚åœ°ä¸åœ°ï¼Œç”µæºå’ŒIC Piné—´</p></li>

<li><p>å•ç‚¹æ¥åœ°(æŒ‡ä¿æŠ¤æ¥åœ°ã€å·¥ä½œæ¥åœ°ã€ç›´æµæ¥åœ°åœ¨è®¾å¤‡ä¸Šç›¸äº’åˆ†å¼€ï¼Œå„è‡ªæˆä¸ºç‹¬ç«‹ç³»ç»Ÿã€‚)</p></li>

<li><p>ç†”ä¸ä½œç”¨</p></li>

<li><p>æ‹Ÿåœ°å’Œæ•°å­—åœ°å•ç‚¹æ¥åœ°</p>

<ul>
<li><p>åªè¦æ˜¯åœ°ï¼Œæœ€ç»ˆéƒ½è¦æ¥åˆ°ä¸€èµ·ï¼Œç„¶åå…¥å¤§åœ°ã€‚å¦‚æœä¸æ¥åœ¨ä¸€èµ·å°±æ˜¯&rdquo;æµ®åœ°&rdquo;ï¼Œå­˜åœ¨å‹å·®ï¼Œå®¹æ˜“ç§¯ç´¯ç”µè·ï¼Œé€ æˆé™ç”µã€‚åœ°æ˜¯å‚è€ƒ0ç”µä½ï¼Œæ‰€æœ‰ç”µå‹éƒ½æ˜¯å‚è€ƒåœ°å¾—å‡ºçš„ï¼Œåœ°çš„æ ‡å‡†è¦ä¸€è‡´ï¼Œæ•…å„ç§åœ°åº”çŸ­æ¥åœ¨ä¸€èµ·ã€‚äººä»¬è®¤ä¸ºå¤§åœ°èƒ½å¤Ÿå¸æ”¶æ‰€æœ‰ç”µè·ï¼Œå§‹ç»ˆç»´æŒç¨³å®šï¼Œæ˜¯æœ€ç»ˆçš„åœ°å‚è€ƒç‚¹ã€‚è™½ç„¶æœ‰äº›æ¿å­æ²¡æœ‰æ¥å¤§åœ°ï¼Œä½†å‘ç”µå‚æ˜¯æ¥å¤§åœ°çš„ï¼Œæ¿å­ä¸Šçš„ç”µæºæœ€ç»ˆè¿˜æ˜¯ä¼šè¿”å›å‘ç”µå‚å…¥åœ°ã€‚å¦‚æœæŠŠæ¨¡æ‹Ÿåœ°å’Œæ•°å­—åœ°å¤§é¢ç§¯ç›´æ¥ç›¸è¿ï¼Œä¼šå¯¼è‡´äº’ç›¸å¹²æ‰°ã€‚ä¸çŸ­æ¥åˆä¸å¦¥ï¼Œç†ç”±å¦‚ä¸Šæœ‰å››ç§æ–¹æ³•è§£å†³æ­¤é—®é¢˜ï¼š</p>

<ul>
<li>(1)ç”¨ç£ç è¿æ¥;</li>
<li>(2)ç”¨ç”µå®¹è¿æ¥;</li>
<li>(3)ç”¨ç”µæ„Ÿè¿æ¥;</li>
<li>(4)ç”¨0æ¬§å§†ç”µé˜»è¿æ¥ã€‚</li>
</ul></li>

<li><p>ç£ç çš„ç­‰æ•ˆç”µè·¯ç›¸å½“äºå¸¦é˜»é™æ³¢å™¨ï¼Œåªå¯¹æŸä¸ªé¢‘ç‚¹çš„å™ªå£°æœ‰æ˜¾è‘—æŠ‘åˆ¶ä½œç”¨ï¼Œä½¿ç”¨æ—¶éœ€è¦é¢„å…ˆä¼°è®¡å™ªç‚¹é¢‘ç‡ï¼Œä»¥ä¾¿é€‰ç”¨é€‚å½“å‹å·ã€‚å¯¹äºé¢‘ç‡ä¸ç¡®å®šæˆ–æ— æ³•é¢„çŸ¥çš„æƒ…å†µï¼Œç£ç ä¸åˆã€‚ç”µå®¹éš”ç›´é€šäº¤ï¼Œé€ æˆæµ®åœ°ã€‚ç”µæ„Ÿä½“ç§¯å¤§ï¼Œæ‚æ•£å‚æ•°å¤šï¼Œä¸ç¨³å®šã€‚</p></li>
</ul></li>

<li><p>è·¨æ¥æ—¶ç”¨äºç”µæµå›è·¯</p>

<p>å½“åˆ†å‰²ç”µåœ°å¹³é¢åï¼Œé€ æˆä¿¡å·æœ€çŸ­å›æµè·¯å¾„æ–­è£‚ï¼Œæ­¤æ—¶ï¼Œä¿¡å·å›è·¯ä¸å¾—ä¸ç»•é“ï¼Œå½¢æˆå¾ˆå¤§çš„ç¯è·¯é¢ç§¯ï¼Œç”µåœºå’Œç£åœºçš„å½±å“å°±å˜å¼ºäº†ï¼Œå®¹æ˜“å¹²æ‰°/è¢«å¹²æ‰°ã€‚åœ¨åˆ†å‰²åŒºä¸Šè·¨æ¥0æ¬§ç”µé˜»ï¼Œå¯ä»¥æä¾›è¾ƒçŸ­çš„å›æµè·¯å¾„ï¼Œå‡å°å¹²æ‰°ã€‚</p></li>

<li><p>é…ç½®ç”µè·¯</p>

<p>ä¸€èˆ¬ï¼Œäº§å“ä¸Šä¸è¦å‡ºç°è·³çº¿å’Œæ‹¨ç å¼€å…³ã€‚æœ‰æ—¶ç”¨æˆ·ä¼šä¹±åŠ¨è®¾ç½®ï¼Œæ˜“å¼•èµ·è¯¯ä¼šï¼Œä¸ºäº†å‡å°‘ç»´æŠ¤è´¹ç”¨ï¼Œåº”ç”¨0æ¬§ç”µé˜»ä»£æ›¿è·³çº¿ç­‰ç„Šåœ¨æ¿å­ä¸Šã€‚ç©ºç½®è·³çº¿åœ¨é«˜é¢‘æ—¶ç›¸å½“äºå¤©çº¿ï¼Œç”¨è´´ç‰‡ç”µé˜»æ•ˆæœå¥½ã€‚</p></li>

<li><p>å…¶ä»–ç”¨é€”</p>

<ul>
<li>å¸ƒçº¿æ—¶è·¨çº¿;</li>
<li>è°ƒè¯•/æµ‹è¯•ç”¨;</li>
<li>ä¸´æ—¶å–ä»£å…¶ä»–è´´ç‰‡å™¨ä»¶;</li>
<li>ä½œä¸ºæ¸©åº¦è¡¥å¿å™¨ä»¶;</li>
<li>æ›´å¤šæ—¶å€™æ˜¯å‡ºäºEMCå¯¹ç­–çš„éœ€è¦ã€‚å¦å¤–ï¼Œ0æ¬§å§†ç”µé˜»æ¯”è¿‡å­”çš„å¯„ç”Ÿç”µæ„Ÿå°ï¼Œè€Œä¸”è¿‡å­”è¿˜ä¼šå½±å“åœ°å¹³é¢(å› ä¸ºè¦æŒ–å­”)ã€‚</li>
</ul></li>
</ol>

<p>è¿˜æœ‰å°±æ˜¯ä¸åŒå°ºå¯¸0æ¬§ç”µé˜»å…è®¸é€šè¿‡ç”µæµä¸åŒï¼Œä¸€èˆ¬0603çš„1Aï¼Œ0805çš„2Aï¼Œæ‰€ä»¥ä¸åŒç”µæµä¼šé€‰ç”¨ä¸åŒå°ºå¯¸çš„è¿˜æœ‰å°±æ˜¯ä¸ºç£ç ã€ç”µæ„Ÿç­‰é¢„ç•™ä½ç½®æ—¶ï¼Œå¾—æ ¹æ®ç£ç ã€ç”µæ„Ÿçš„å¤§å°è¿˜åšå°è£…ï¼Œæ‰€ä»¥0603ã€0805ç­‰ä¸åŒå°ºå¯¸çš„éƒ½æœ‰äº†ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>iOSå¼€å‘å­¦ä¹ â€”â€”è§£å†³Xcode7 Swift2ä¸­odjcçš„å‡½æ•°é‡è½½é—®é¢˜</title>
			<link>https://www.smslit.top/2015/11/18/overloadingSwift-Develop/</link>
			<pubDate>Wed, 18 Nov 2015 22:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/18/overloadingSwift-Develop/</guid>
			<description>&lt;p&gt;æœ€è¿‘åœ¨å­¦ä¹ æ–¯å¦ç¦å¤§å­¦ç™½èƒ¡å­è€å¤´å»å¹´çš„iOS8çš„å¼€å‘æ•™ç¨‹ï¼Œè·Ÿç€ä»–çš„è§†é¢‘æ•™ç¨‹èµ°ï¼Œåˆšå¼€å§‹ä¸ä¹…å°±å‘ç°è‡ªå·±æ ½è¿›äº†å‘é‡Œï¼ŒåŒæ ·çš„ä»£ç ï¼Œä¸ºå•¥æˆ‘çš„å°±ä¼šæŠ¥é”™å‘¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/5djgg.png&#34; alt=&#34;1&#34; /&gt;&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘åœ¨å­¦ä¹ æ–¯å¦ç¦å¤§å­¦ç™½èƒ¡å­è€å¤´å»å¹´çš„iOS8çš„å¼€å‘æ•™ç¨‹ï¼Œè·Ÿç€ä»–çš„è§†é¢‘æ•™ç¨‹èµ°ï¼Œåˆšå¼€å§‹ä¸ä¹…å°±å‘ç°è‡ªå·±æ ½è¿›äº†å‘é‡Œï¼ŒåŒæ ·çš„ä»£ç ï¼Œä¸ºå•¥æˆ‘çš„å°±ä¼šæŠ¥é”™å‘¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/5djgg.png" alt="1" /></p>

<p>é”™è¯¯å†…å®¹æ˜¯ï¼š</p>

<blockquote>
<p>/Users/smslit/Documents/workspace/iOS/learn/Calculator/Calculator/
ViewController.swift:55:10: Method &lsquo;performOperation&rsquo; with Objective-C selector &lsquo;performOperation:&rsquo; conflicts with previous declaration with the same Objective-C selector</p>
</blockquote>

<p>æœ€ååœ¨<a href="http://www.cocoachina.com/bbs/read.php?tid=297461#1290696" target="_blank">æ–°æ‰‹æ±‚åŠ©ï¼šåŒä¸€ä¸ªåä¸‹ä¸¤ç§åŠŸèƒ½çš„funcï¼Œæ˜¯ä¸æ˜¯ä¸èƒ½è‡ªåŠ¨åˆ¤æ–­äº†</a>æ‰¾åˆ°äº†åŸå› ï¼š</p>

<p>è¿™æ˜¯å› ä¸ºä½ çš„viewcontroller ç»§æ‰¿äº†UIViewController.è€ŒUIViewController ç»§æ‰¿è‡ªocçš„NSObject. åœ¨swift ä¸­è¢«ä¿®é¥°æˆ@objc class. é‚£ä¹ˆå°±å¿…é¡»è¦éµå¾ªocçš„selectorï¼Œåœ¨ocä¸­æ˜¯ä¸æ”¯æŒæ–¹æ³•é‡è½½çš„ã€‚æ‰€ä»¥ä¼šæŠ¥ä¸Šé¢çš„é”™è¯¯ã€‚è¿™è·Ÿä½¿ç”¨çš„Xcodeç‰ˆæœ¬æœ‰å…³ï¼Œç™½èƒ¡å­è€å¤´ä½¿ç”¨çš„ç‰ˆæœ¬è¾ƒä½ï¼Œè€Œæˆ‘ä½¿ç”¨çš„æ˜¯Xcode7ï¼Œå·²ç»æ˜¯Swift2äº†ï¼Œä¸ä¹‹å‰æœ‰å¥½å¤šä¸åŒçš„åœ°æ–¹ã€‚</p>

<p>åœ¨<a href="http://stackoverflow.com/questions/29457720/compiler-error-method-with-objective-c-selector-conflicts-with-previous-declara" target="_blank">Compiler error: Method with Objective-C selector conflicts with previous declaration with the same Objective-C selector</a>æ‰¾åˆ°äº†è§£å†³åŠæ³•ï¼š</p>

<p>åœ¨Xcode7çš„Swift2ä¸­æœ‰ä¸¤ç§è§£å†³æ–¹æ³•ï¼š</p>

<ul>
<li><p>ä¸€ç§æ˜¯ä½¿ç”¨@objc(newNameMethod:)ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">methodOne</span><span class="p">(</span><span class="n">par1</span><span class="p">,</span> <span class="n">par2</span><span class="p">)</span> <span class="p">{...}</span>

<span class="kr">@objc</span><span class="p">(</span><span class="n">methodTow</span><span class="p">:)</span>
<span class="kd">func</span> <span class="nf">methodOne</span><span class="p">(</span><span class="n">par1</span><span class="p">)</span> <span class="p">{...}</span></code></pre></div></li>

<li><p>å¦ä¸€ç§æ˜¯ä½¿ç”¨ @nonobjcï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">methodOne</span><span class="p">()</span> <span class="p">{...}</span>

<span class="p">@</span><span class="n">nonobjc</span>
<span class="kd">func</span> <span class="nf">methodOne</span><span class="p">()</span> <span class="p">{...}</span></code></pre></div></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Mac OSXä¸‹Sublime Texté…ç½®ä½¿ç”¨ctagså®ç°ä»£ç è·³è½¬</title>
			<link>https://www.smslit.top/2015/11/14/macSTctags-Develop/</link>
			<pubDate>Sat, 14 Nov 2015 09:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/14/macSTctags-Develop/</guid>
			<description>&lt;p&gt;ctagsæ˜¯ä¸€æ¬¾å®ç°ä»£ç è·³è½¬çš„æ’ä»¶ï¼Œå¯ä»¥æé«˜æŸ¥çœ‹ä»£ç çš„æ•ˆç‡ï¼Œå¼€å‘å°½ç®¡å¯èƒ½æœ‰IDEï¼ŒIDEä¸­æœ‰ä»£ç è·³è½¬ï¼Œä½†æœ‰çš„æ—¶å€™è¿˜æ˜¯ä¸æƒ³æ‰“å¼€IDEçš„æˆ–è€…æœ¬èº«å°±æ²¡IDEï¼Œæ‰€ä»¥æœ‰å¿…è¦å®‰è£…ctagsï¼Œæœ¬æ–‡å°±ä»‹ç»å¦‚ä½•åœ¨mac osxä¸‹çš„sublime text3ä¸­ä½¿ç”¨ctagsã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ctagsæ˜¯ä¸€æ¬¾å®ç°ä»£ç è·³è½¬çš„æ’ä»¶ï¼Œå¯ä»¥æé«˜æŸ¥çœ‹ä»£ç çš„æ•ˆç‡ï¼Œå¼€å‘å°½ç®¡å¯èƒ½æœ‰IDEï¼ŒIDEä¸­æœ‰ä»£ç è·³è½¬ï¼Œä½†æœ‰çš„æ—¶å€™è¿˜æ˜¯ä¸æƒ³æ‰“å¼€IDEçš„æˆ–è€…æœ¬èº«å°±æ²¡IDEï¼Œæ‰€ä»¥æœ‰å¿…è¦å®‰è£…ctagsï¼Œæœ¬æ–‡å°±ä»‹ç»å¦‚ä½•åœ¨mac osxä¸‹çš„sublime text3ä¸­ä½¿ç”¨ctagsã€‚</p>

<h3 id="stå®‰è£…ctagsæ’ä»¶">STå®‰è£…ctagsæ’ä»¶</h3>

<p>æœ¬æ–‡å°±ä¸èµ˜è¿°Sublime Text3çš„å®‰è£…äº†ï¼Œå¯ä»¥å‚è€ƒ<strong><a href="http://www.smslit.top/develop/2015/08/19/sublimeText.html" target="_blank">Sublime Text 3å®‰è£…åŠç®€å•é…ç½®</a></strong>è¿›è¡Œå®‰è£…ã€‚é‚£ä¹ˆè¿›å…¥æ­£é¢˜ï¼Œè¿™é‡Œè®¤ä¸ºSTå·²ç»è£…å¥½äº†package controlã€‚</p>

<ul>
<li><p>å¿«æ·é”®<code>cmd+shift+p</code>å‘¼å‡ºæ–‡æœ¬æ¡†ä¸­è¾“å…¥<strong>Package Control</strong>æˆ–è€…èœå•æ -&gt;Sublime Text-&gt;Preferences-&gt;Package Controlï¼Œå°±ä¼šå‡ºç°ç±»ä¼¼ä¸‹é¢çš„è¾“å…¥æ¡†ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/p28wf.png" alt="1" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/hhso7.png" alt="2" /></p></li>

<li><p>é€‰æ‹©<strong>Install Package</strong>ï¼Œä¾¿ä¼šè”ç½‘è·å–æ’ä»¶åˆ—è¡¨ï¼Œæ‰€ä»¥å¾—ç¨ç­‰ä¸€ä¼šï¼Œå®Œæˆåä¾¿ä¼šæ˜¾ç¤ºæ’ä»¶åˆ—è¡¨ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/t8rya.png" alt="3" /></p></li>

<li><p>åˆ—è¡¨ä¸Šé¢çš„æ–‡æœ¬æ¡†ä¸­è¾“å…¥ctagsï¼Œä¾¿ä¼šæ‰¾åˆ°CTagsæ’ä»¶ï¼Œé€‰ä¸­æ•²å›è½¦é”®æˆ–è€…é¼ æ ‡å•å‡»ï¼Œå°±ä¼šè”ç½‘ä¸‹è½½å®‰è£…æ’ä»¶äº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/bbui3.png" alt="4" /></p></li>

<li><p>å¦‚æœå³å‡»å·¦è¾¹æ ä¸­æ–‡ä»¶å¤¹ï¼Œå‡ºç°<strong>CTags:Rebuild Tags</strong>è¿™ä¸€é¡¹ï¼Œè¯´æ˜å·²ç»å®‰è£…æˆåŠŸï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ut3sv.png" alt="5" /></p></li>
</ul>

<h3 id="å®‰è£…ctags">å®‰è£…ctags</h3>

<p>è™½ç„¶å·²ç»å®‰è£…äº†STçš„CTagsæ’ä»¶ï¼Œä½†æ˜¯ctagsè¿˜æ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥å»sourceforgeä¸‹è½½<strong>ctags-5.8.tar.gz</strong>ï¼Œä¹Ÿå¯ä»¥<a href="http://pan.baidu.com/s/1o6GOW8E" target="_blank">ç‚¹æˆ‘</a>å»ç™¾åº¦äº‘ä¸‹è½½ã€‚</p>

<ul>
<li><p>å‡è®¾ä¸‹è½½åˆ°<code>~/Downloads</code>ç›®å½•ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xmvvj.png" alt="6" />ï¼Œæ•²ä¸€ä¸‹å‘½ä»¤è¿›å…¥<code>Downloads</code>:</p>

<p><strong>cd ~/Downloads</strong></p></li>

<li><p>è§£å‹<strong>ctags-5.8.tar.gz</strong>ï¼š</p>

<p><strong>tar xzvf ctags-5.8.tar.gz</strong></p></li>

<li><p>è¿›å…¥è§£å‹ç›®å½•ï¼š</p>

<p><strong>cd ctags-5.8</strong></p></li>

<li><p>ç¼–è¯‘å®‰è£…ï¼š</p>

<p><strong>./configure</strong></p>

<p><strong>make</strong></p>

<p><strong>sudo make install</strong></p></li>
</ul>

<h3 id="é…ç½®stçš„ctagsæ’ä»¶">é…ç½®STçš„CTagsæ’ä»¶</h3>

<p>éœ€è¦é…ç½®ä¸€ä¸‹CTagsæ’ä»¶ï¼Œæ›´æ”¹ä¸€ä¸‹é»˜è®¤é…ç½®ï¼Œä¸»è¦ä¿®æ”¹å…¶ä¸­ctagsç›®å½•ï¼Œå› ä¸ºé…ç½®ä¸­æ²¡æœ‰å†™å…¥ctagsçš„ç›®å½•ã€‚</p>

<ul>
<li><p>æ‰“å¼€ èœå•æ -&gt;Sublime Text-&gt;Preferences-&gt;Package Settings-&gt;CTags-&gt;Settings-Default/Settings-Userè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/w3y8e.png" alt="7" /></p></li>

<li><p>å°†Settings-Defaultä¸­çš„å†…å®¹å…¨é€‰å¤åˆ¶åˆ°Settings-Useræ–‡ä»¶ä¸­ï¼Œå¹¶å°†å…¶ä¸­<strong>Command</strong>çš„å€¼è®¾ç½®ä¸ºï¼š<strong>/usr/local/bin/ctags</strong>:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/1jmh5.png" alt="8" /></p></li>
</ul>

<h3 id="æµ‹è¯•">æµ‹è¯•</h3>

<p>éšä¾¿æ‰¾åˆ°ä¸€ä¸ªå«æœ‰cä»£ç çš„å·¥ç¨‹ç›®å½•ï¼Œç”¨STæ‰“å¼€ï¼Œæˆ‘æ‰“å¼€çš„æ˜¯æˆ‘çš„ä¸€ä¸ªBLEå¼€å‘çš„å·¥ç¨‹<strong>DJB001_150509_1700V1.14</strong>ã€‚</p>

<ul>
<li><p>å³å‡»STä¸­å·¦è¾¹æ çš„æ–‡ä»¶å¤¹ï¼Œå‡ºç°<strong>CTagsï¼šRebuild Tags</strong>ï¼Œç‚¹å‡»ä¼šç”Ÿæˆtagsæ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶å°±æ˜¯å‡½æ•°ã€å˜é‡ã€å®å®šä¹‰ç­‰çš„ ç´¢å¼•æ–‡ä»¶ï¼‰ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/3qbdg.png" alt="9" /></p></li>

<li><p>æ‰“å¼€å·¥ç¨‹æ–‡ä»¶çš„DJB001_150509_1700V1.4-&gt;Projects-&gt;ble-&gt;CC2541F128-&gt;Source-&gt;OSAL_SimpleBLEPeripheral.cæ–‡ä»¶ï¼Œ_å°è¯•è·³è½¬ï¼ŒæŒ‰ä¸‹<strong>shift+ctrl</strong>ï¼Œé¼ æ ‡å·¦é”®ç‚¹å‡»<strong>SimpleBLEPeripheral_Init(taskID++)</strong> ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/u3fkx.png" alt="10" /></p></li>

<li><p>å°±ä¼šè°ƒè½¬åˆ°<strong>SimpleBLEPeripheral_Init</strong>dçš„å®šä¹‰ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/i7ykk.png" alt="11" /></p></li>

<li><p>ç„¶å<strong>Shift+Ctrl+é¼ æ ‡å³é”®å•å‡»</strong>ï¼Œä¾¿ä¼šè°ƒå›åˆšæ‰çš„ä½ç½®ã€‚</p>

<p>å¯ä»¥åœ¨èœå•æ <strong>Sublime Text-&gt;Preferences-&gt;Package Settings-&gt;CTags</strong>ä¸‹æ‰¾åˆ°å¿«æ·é”®å’Œé¼ æ ‡æ“ä½œçš„è®¾å®šï¼Œæ ¹æ®è‡ªå·±å–œæ¬¢åœ¨ç”¨æˆ·è®¾ç½®æ–‡ä»¶é‡Œæ›´æ”¹å°±å¯ä»¥ã€‚</p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Arduino IDE 1.6.6æ–°ç‰¹æ€§ä¹‹Serial Plotter</title>
			<link>https://www.smslit.top/2015/11/04/serialplotter-arduino/</link>
			<pubDate>Wed, 04 Nov 2015 22:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/04/serialplotter-arduino/</guid>
			<description>&lt;p&gt;ä»Šå¤©å»Arduinoå®˜ç½‘çœ‹äº†ä¸€ä¸‹ï¼Œå‘ç°å‘å¸ƒäº†Arduino IDE1.6.6ï¼Œçœ‹ä»‹ç»å‘ç°å¢æ·»äº†å¥½å¤šæ–°ç‰¹æ€§ï¼Œäºæ˜¯ä¹ä¸‹è½½ä¸‹æ¥ç©è€äº†ä¸€ç•ªï¼Œè§‰å¾—æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯Serial Plotterï¼Œæ„Ÿè§‰è¿™ä¸€åŠŸèƒ½çš„å¢åŠ å¯¹äºçœ‹æ•°æ®å˜åŒ–æ›²çº¿æ–¹ä¾¿äº†å¥½å¤šï¼Œä¸ç”¨å¼€å…¶ä»–è½¯ä»¶ç›´æ¥ç”¨Serial Plotterå°±å¯ä»¥å®ç°ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä»Šå¤©å»Arduinoå®˜ç½‘çœ‹äº†ä¸€ä¸‹ï¼Œå‘ç°å‘å¸ƒäº†Arduino IDE1.6.6ï¼Œçœ‹ä»‹ç»å‘ç°å¢æ·»äº†å¥½å¤šæ–°ç‰¹æ€§ï¼Œäºæ˜¯ä¹ä¸‹è½½ä¸‹æ¥ç©è€äº†ä¸€ç•ªï¼Œè§‰å¾—æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯Serial Plotterï¼Œæ„Ÿè§‰è¿™ä¸€åŠŸèƒ½çš„å¢åŠ å¯¹äºçœ‹æ•°æ®å˜åŒ–æ›²çº¿æ–¹ä¾¿äº†å¥½å¤šï¼Œä¸ç”¨å¼€å…¶ä»–è½¯ä»¶ç›´æ¥ç”¨Serial Plotterå°±å¯ä»¥å®ç°ã€‚</p>

<h3 id="serial-plotter">Serial Plotter</h3>

<h4 id="ç¡¬ä»¶">ç¡¬ä»¶ï¼š</h4>

<ul>
<li>Arduino Pro Mini</li>
<li>USB to TTLï¼ˆPL2303çš„ï¼‰</li>
</ul>

<p>è¯´æ˜ï¼š</p>

<p>USBè½¬TTLç”¨æ¥ä¸ºArduino Pro Miniä¸‹è½½ç¨‹åº.</p>

<h4 id="æµ‹è¯•sketch">æµ‹è¯•sketch</h4>

<p>å®˜æ–¹çš„ä»‹ç»ä¸­æ˜¯ä¸‹é¢çš„æè¿°ï¼š</p>

<blockquote>
<p>Serial plotter: you can now plot your data in realtime, as easy as writing Serial.println(analogRead(A0)) inside your loop</p>
</blockquote>

<p>å¤§æ¦‚çš„æ„æ€æ˜¯è¯´ï¼šç°åœ¨å¯ä»¥å®æ—¶ç»˜åˆ¶æ•°æ®äº†ï¼Œåªéœ€è¦åœ¨Loopä¸­åŠ å…¥Serial.println()å°±å¯ä»¥ã€‚</p>

<h5 id="å®ç°æ­£å¼¦å‡½æ•°">å®ç°æ­£å¼¦å‡½æ•°</h5>

<p>æ‰€ä»¥æˆ‘ç¼–å†™ä¸€ä¸ªæµ‹è¯•sketchï¼Œå®ç°æ­£å¼¦å‡½æ•°æ•°æ®çš„ç»˜åˆ¶ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">double</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">2</span><span class="o">*</span><span class="mf">3.1415926</span><span class="p">;</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mf">0.05</span><span class="o">*</span><span class="mf">3.1415926</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<h4 id="è®¾ç½®arduino">è®¾ç½®Arduino</h4>

<p>æ¿å­é€‰<code>Arduino Pro Mini</code>ï¼Œå¤„ç†å™¨é€‰æ‹©<code>ATmega328ï¼ˆ5vï¼Œ16MHzï¼‰</code>ï¼Œä¸²å£é€‰æ‹©<code>/dev/cu.usbserial</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/lr7ad.png" alt="1" /></p>

<h4 id="serial-plotter-1">Serial Plotter</h4>

<p>ç¼–è¯‘ä¸‹è½½ï¼Œæ‰“å¼€<code>Tools</code>-&gt;<code>Serial Plotter</code>ã€‚</p>

<p>ç¼–è¯‘sketchå¹¶ä¸‹è½½åˆ°æ¿å­ä¸Šåï¼Œå¯ä»¥é€šè¿‡èœå•æ Toolsæ‰¾åˆ°Serial Plotterï¼Œç‚¹å‡»æ‰“å¼€ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/yr9hv.png" alt="2" /></p>

<p>é€‰æ‹©å¯¹åº”sketchçš„æ³¢ç‰¹ç‡ï¼Œå°±ä¼šçœ‹åˆ°ä¸‹é¢çš„æ ·å­ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/1kkw0.gif" alt="3" /></p>

<h4 id="ç»˜åˆ¶å¤šå€¼æ›²çº¿">ç»˜åˆ¶å¤šå€¼æ›²çº¿</h4>

<p>ä¸Šé¢çš„ä¾‹å­æ˜¯åˆ©ç”¨Serial Plotterå·¥å…·ç»˜åˆ¶å•å€¼æ›²çº¿çš„ï¼Œå…¶å®è¿™ä¸ªå·¥å…·è¿˜æ”¯æŒå¤šä¸ªå€¼ç»˜åˆ¶å¤šæ¡æ›²çº¿ï¼Œåªéœ€åœ¨æ¯ä¸ªå€¼ä¹‹é—´åŠ ä¸Šé€—å·ï¼Œè¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰æœ€åä¸€ä¸ªå€¼ç”¨<strong>println</strong>å‡½æ•°ï¼Œå‰é¢çš„å€¼ç”¨<strong>print</strong>å‡½æ•°ã€‚</p>

<p>æµ‹è¯•ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">115200</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">Serial</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">double</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">2</span><span class="o">*</span><span class="mf">3.1415926</span><span class="p">;</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mf">0.05</span><span class="o">*</span><span class="mf">3.1415926</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="sc">&#39;,&#39;</span><span class="p">);</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<p>ç„¶åä¸‹è½½ç¨‹åºåˆ°Arduinoï¼Œç”¨Serial  PlotteræŸ¥çœ‹å¯ä»¥çœ‹åˆ°ä¸¤æ¡ä¸‰è§’å‡½æ•°æ›²çº¿ã€‚</p>

<h3 id="å¢åŠ çš„æ–°ç‰¹æ€§">å¢åŠ çš„æ–°ç‰¹æ€§</h3>

<p>å¯ä»¥çœ‹å®˜ç½‘ä¸Šçš„ä»‹ç»<a href="https://blog.arduino.cc/2015/11/03/arduino-ide-1-6-6-released-and-available-for-download/" target="_blank"><strong>ARDUINO IDE 1.6.6 RELEASED AND AVAILABLE FOR DOWNLOAD</strong></a></p>

<ol>
<li><strong>ä¹…ç­‰å…¨æ–°çš„Arduino-builder</strong>è¿™æ˜¯ä¸€ä¸ªçº¯å‘½ä»¤è¡Œçš„å·¥å…·ï¼Œå®ƒç”¨äºå¤„ç†ä»£ç ã€è§£å†³åº“ä¾èµ–å’Œè®¾ç½®ç¼–è¯‘å•å…ƒã€‚å®ƒä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹ä¸IDEçš„ç¨‹åºè¿›è¡Œä½¿ç”¨ã€‚</li>
<li><strong>Pluggable USB core</strong>åœ¨ä¸éœ€è¦æ”¹å˜å†…æ ¸çš„æƒ…å†µä¸‹ï¼Œä½ çš„Arduinoå¯ä»¥å˜æˆå„å¼å„æ ·çš„USBè®¾å¤‡ï¼Œè¿™å¾—åŠ›äºæ–°çš„æ¨¡å—æ¶æ„ã€‚åŒæ—¶åŸºäºæ–°çš„å­ç³»ç»Ÿçš„åº“å·²ç»è¯ç”Ÿã€‚</li>
<li><strong>Serial Plotter</strong>åªéœ€ç®€å•çš„åœ¨å¾ªç¯ä¸­ä½¿ç”¨Serial.println()å°±å¯ä»¥å®æ—¶ç»˜åˆ¶æ•°æ®äº†ã€‚</li>
<li>ä¸ºåº“æ–‡ä»¶çš„å¼€å‘è€…æä¾›äº†æ–°çš„å¥½ç©æ„ï¼Œå¦‚å¼€å‘åº“çš„æ—¶å€™è§£é”ä¾‹ç¨‹å’Œå¯ä»¥é€‰æ‹©è¿æ¥åˆ°å­˜æ¡£ã€‚</li>
<li>ä¼˜åŒ–äº†çš„<strong>Arduino ISP</strong>ä¾‹ç¨‹æå‡äº†è®¸å¤šï¼Œç°åœ¨ä½ å¯ä»¥ç”¨<strong>ä»»ä½•</strong>å…¶ä»–æ¿å­ï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹çš„ï¼‰ä¸ºAVRç‰‡å­çƒ§å†™ç¨‹åºäº†ã€‚</li>
<li>å¦‚æœåº“æ–‡ä»¶å’Œå†…æ ¸æ–‡ä»¶æœ‰å¯ç”¨æ›´æ–°ï¼Œåº“æ–‡ä»¶ç®¡ç†å™¨ä¼šå¼¹å‡ºæç¤ºæ¡†æé†’ï¼Œè¿™æ ·å†ä¹Ÿä¸ç”¨æ‹…å¿ƒä»£ç è¿‡æ—¶äº†ã€‚</li>
<li>è¿˜æœ‰å¾ˆå¤šbugçš„ä¿®å¤ä»¥åŠå‚è€ƒæ–‡æ¡£çš„å®Œå–„ã€‚</li>
</ol>]]></content>
		</item>
		
		<item>
			<title>USBaspä¸ºArduinoæ¿å­çƒ§å†™bootloader</title>
			<link>https://www.smslit.top/2015/11/03/usbasp-arduino/</link>
			<pubDate>Tue, 03 Nov 2015 17:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/03/usbasp-arduino/</guid>
			<description>&lt;p&gt;åœ¨Arduinoä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰æ—¶å€™ä¼šé€ æˆbootloaderçš„æŸåï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜ä¼šåšArduinoçš„æœ€å°ç³»ç»Ÿæ¿ï¼Œé‚£æˆ‘ä»¬éƒ½éœ€è¦ä¸ºArduinoä¸‹è½½bootloaderï¼Œæœ¬æ–‡å°†ä»‹ç»ç”¨USBaspä¸‹è½½bootloaderã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨Arduinoä½¿ç”¨è¿‡ç¨‹ä¸­æœ‰æ—¶å€™ä¼šé€ æˆbootloaderçš„æŸåï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜ä¼šåšArduinoçš„æœ€å°ç³»ç»Ÿæ¿ï¼Œé‚£æˆ‘ä»¬éƒ½éœ€è¦ä¸ºArduinoä¸‹è½½bootloaderï¼Œæœ¬æ–‡å°†ä»‹ç»ç”¨USBaspä¸‹è½½bootloaderã€‚</p>

<h2 id="è¯•éªŒç¡¬ä»¶æ¸…å•">è¯•éªŒç¡¬ä»¶æ¸…å•</h2>

<ul>
<li>USBasp</li>
<li>Arduino Pro Mini</li>
</ul>

<p><strong>è¯´æ˜ï¼š</strong></p>

<ol>
<li><p>æˆ‘çš„USBaspæ˜¯æŸå®ä¸Šæ·˜çš„ï¼Œä¸è´µï¼Œå°±æ˜¯ä¸‹é¢çš„æ ·å­ï¼Œæ¥å£æ˜¯10pinçš„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/3fm5n.jpg" alt="1" /></p>

<p>10pinçš„ISPæ¥å£å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/029j1.jpg" alt="2" /></p></li>

<li><p>è¿™é‡Œæˆ‘è¯•éªŒçš„æ˜¯Arduino Pro Miniï¼ˆ5Vï¼Œ16MHzçš„ç‰ˆæœ¬ï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/rbitt.jpg" alt="4" /></p>

<p>6pinçš„ISPæ¥å£å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/oftpi.jpg" alt="3" /></p></li>
</ol>

<h2 id="è¯¦ç»†">è¯¦ç»†</h2>

<h3 id="è¿çº¿">è¿çº¿</h3>

<p>ç›´æ¥ç”¨æœé‚¦çº¿å°†Arduinoä¸Šçš„6Pinçš„ISPä¸USBaspä¸Šçš„10Pinçš„ISPå¯¹åº”ç®¡è„šè¿æ¥èµ·æ¥ï¼Œå°±åƒè¿™æ ·ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2mq1l.jpg" alt="5" /></p>

<p>ç„¶åè¿æ¥åˆ°ç”µè„‘ï¼ˆæˆ‘ç”¨çš„è¿™ä¸ªUSBaspæ˜¯å…é©±çš„ï¼‰ã€‚</p>

<h3 id="èœå•æ toolsä¸‹-è®¾ç½®arduino-ide">èœå•æ Toolsä¸‹ï¼Œè®¾ç½®Arduino IDE</h3>

<p>æˆ‘çš„ç³»ç»Ÿæ˜¯Mac OSXï¼Œæ“ä½œåœ¨winä¸‹åº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚</p>

<h4 id="è®¾ç½®boardä¸ºarduino-pro-mini">è®¾ç½®Boardä¸ºArduino Pro Mini</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/27sxf.png" alt="6" /></p>

<h4 id="è®¾ç½®processorä¸ºatmega28-5vv-16mhz">è®¾ç½®Processorä¸ºATmega28ï¼ˆ5VVï¼Œ16MHzï¼‰</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/zsg2d.png" alt="7" /></p>

<h4 id="è®¾ç½®programmerä¸ºusbasp">è®¾ç½®Programmerä¸ºUSBasp</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/5rnfx.png" alt="8" /></p>

<h3 id="èœå•æ tools-burn-bootloader">èœå•æ Tools-&gt;Burn Bootloader</h3>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2nwji.png" alt="9" /></p>

<p>å¦‚æœçƒ§å†™æˆåŠŸï¼ŒArduino IDEçš„Consoleä¸‹ä¼šå‡ºç°æç¤ºï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/5wvw5.png" alt="10" /></p>

<h4 id="çƒ§å†™æˆåŠŸå-æ¿ä¸Šçš„ledç¯å°±ä¼šé—ªåŠ¨">çƒ§å†™æˆåŠŸåï¼Œæ¿ä¸Šçš„Ledç¯å°±ä¼šé—ªåŠ¨ã€‚</h4>]]></content>
		</item>
		
		<item>
			<title>æ”¹é€ hdmiè½¬vgaçº¿è®©MacminiæˆåŠŸç‚¹äº®VGAæ¥å£æ˜¾ç¤ºå™¨</title>
			<link>https://www.smslit.top/2015/11/02/hdmi-life/</link>
			<pubDate>Mon, 02 Nov 2015 17:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/02/hdmi-life/</guid>
			<description>&lt;p&gt;æœ€è¿‘å‡ å¤©ç»ˆäºä¸‹å®šå†³å¿ƒäº¬ä¸œç™½æ¡åˆ†æœŸä¹°äº†å¿ƒä»ªå·²ä¹…çš„macç”µè„‘ï¼Œå…¶å®macbook proæ‰æ˜¯æˆ‘æœ€æƒ³å¾—åˆ°çš„ï¼Œæ²¡åŠæ³•ï¼Œä¸€ä¸ªç©·å­—é“å°½äº†å¤šå°‘è¾›é…¸ä¸è‹¦æ¥šï¼Œè™½ç„¶ä¹°çš„æ˜¯mac miniä½†ä¹Ÿæ˜¯å¾ˆå¿ƒç–¼çš„ï¼Œå› ä¸ºåœ¨å…¬å¸ç”³è¯·äº†æ˜¾ç¤ºå™¨ï¼Œæ‰€ä»¥è¿˜å¦ä¹°äº†ä¸€ä¸ª21.5å¯¸çš„æ˜¾ç¤ºå™¨æ”¾åœ¨å®¿èˆï¼Œè®¡åˆ’æ˜¯æ¯å¤©èƒŒç€å®¿èˆä¸å®ä¹ å…¬å¸æ¥å›è·‘ï¼Œå“ˆå“ˆã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘å‡ å¤©ç»ˆäºä¸‹å®šå†³å¿ƒäº¬ä¸œç™½æ¡åˆ†æœŸä¹°äº†å¿ƒä»ªå·²ä¹…çš„macç”µè„‘ï¼Œå…¶å®macbook proæ‰æ˜¯æˆ‘æœ€æƒ³å¾—åˆ°çš„ï¼Œæ²¡åŠæ³•ï¼Œä¸€ä¸ªç©·å­—é“å°½äº†å¤šå°‘è¾›é…¸ä¸è‹¦æ¥šï¼Œè™½ç„¶ä¹°çš„æ˜¯mac miniä½†ä¹Ÿæ˜¯å¾ˆå¿ƒç–¼çš„ï¼Œå› ä¸ºåœ¨å…¬å¸ç”³è¯·äº†æ˜¾ç¤ºå™¨ï¼Œæ‰€ä»¥è¿˜å¦ä¹°äº†ä¸€ä¸ª21.5å¯¸çš„æ˜¾ç¤ºå™¨æ”¾åœ¨å®¿èˆï¼Œè®¡åˆ’æ˜¯æ¯å¤©èƒŒç€å®¿èˆä¸å®ä¹ å…¬å¸æ¥å›è·‘ï¼Œå“ˆå“ˆã€‚</p>

<p>å®¿èˆæ˜¾ç¤ºå™¨æœ‰hdmiæ¥å£ï¼ŒMac miniæœ‰hdmiæ¥å£ï¼Œæ‰€ä»¥ä¹°æ ¹hdmiçº¿å°±OKäº†ï¼Œä½†æ˜¯åœ¨å…¬å¸å°±éº»çƒ¦äº†ï¼Œæ˜¾ç¤ºå™¨åªæœ‰VGAæ¥å£ï¼Œæ²¡åŠæ³•å°±ä¹°äº†ä¸€æ ¹hdmiè½¬vgaçš„è½¬æ¥çº¿ï¼Œåˆ°äº†æ‰æ‚²å‰§äº†ï¼Œè¯•äº†ä¸€ä¸‹å±å¹•ç«Ÿç„¶æç¤ºæ²¡æœ‰ä¿¡å·ï¼Œæ„¤æ€’çš„æˆ‘æ‰“å¼€è¿™ä¸ªä¸œè¥¿çš„è´­ä¹°é“¾æ¥ï¼Œå‘ç°åœ¨å®è´è¯¦æƒ…ä¸­æœ‰æç¤ºï¼Œmac miniè¦ä¹°å¸¦æœ‰ç”µæºæ¥å£çº¿çš„è½¬æ¥çº¿æ‰å¯ç”¨ï¼Œå¯æ˜¯æˆ‘ä¹°çš„æ˜¯æ™®é€šçš„ï¼Œä»€ä¹ˆéŸ³é¢‘ã€ç”µæºæ¥å£éƒ½æ²¡æœ‰çš„ï¼Œå› ä¸ºæ™®é€šçš„æœ€ä¾¿å®œï¼Œé‚£æ€ä¹ˆåŠï¼Ÿ</p>

<p>æœ¬æ–‡é‡ç‚¹æ¥äº†ï¼Œæˆ‘çµå…‰ä¸€é—ªï¼Œå°±æŠŠä¹°åˆ°çš„è½¬æ¥æ‹†å¼€äº†ä¸€çœ‹ï¼Œå¯¹æ¯”äº†ä¸€ä¸‹ç½‘ä¸Šæœ‰ç”µæºæ¥å£çš„ï¼Œè±ç„¶å¼€æœ—ï¼Œåœ¨ç”µæºæ¥å£çš„ä½ç½®ï¼Œæ™®é€šè½¬æ¥å¤´ç•™æœ‰ç„Šç›˜ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xyj0d.png" alt="1" /></p>

<p>æˆ‘åœ¨æƒ³èƒ½å¦è‡ªå·±ç„Šä¸Šä¸€æ ¹USBçº¿è¯•ä¸€ä¸‹ï¼Œæ­£å¥½æœ‰é—²ç½®çš„USBçº¿ï¼Œè¯´å¹²å°±å¹²ï¼Œç”¨ä¸‡ç”¨è¡¨æµ‹è¯•äº†ä¸€ä¸‹ï¼Œæœ‰ä¸¤æ ¹è¾ƒç»†çš„ç„Šç›˜æ˜¯éœ€è¦ç„Šçš„ï¼Œä¸€ä¸ª+5Vï¼Œä¸€ä¸ªGNDï¼Œå¯¹åº”USBçš„çº¢çº¿ï¼ˆæ­£ï¼‰å’Œé»‘çº¿ï¼ˆè´Ÿï¼‰è¿›è¡Œç„Šæ¥ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/vot9f.png" alt="2" /></p>

<p>å¦‚æœç„Šæ¥æ²¡é—®é¢˜ï¼Œé‚£å°±å°†HDMIå¤´å’ŒUSBå¤´æ’åˆ°Mac miniä¸Šï¼Œä¸€å®šå¯ä»¥ç‚¹äº®æ˜¾ç¤ºå™¨äº†ï¼Œæˆ‘å°±æˆåŠŸäº†ï¼Œå“ˆå“ˆï¼</p>]]></content>
		</item>
		
		<item>
			<title>Gitä¹‹SSHå¯†é’¥å®ç°å…å¯†ç </title>
			<link>https://www.smslit.top/2015/11/02/sshkey-git/</link>
			<pubDate>Mon, 02 Nov 2015 12:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/11/02/sshkey-git/</guid>
			<description>&lt;p&gt;SSHå¯†é’¥ç”¨äºå…å¯†ç gitæ“ä½œæ—¶éªŒè¯ä¿¡ä»»çš„å®¢æˆ·ç«¯ã€‚ä¸‹é¢å°†è¯´ä¸€ä¸‹ç”ŸæˆSSHå¯†é’¥å’Œå°†SSHå¯†é’¥æ·»åŠ åˆ°å¯¹åº”gitè´¦æˆ·ï¼ˆä¸ç‰¹æŒ‡githubï¼Œå…¶ä»–å¹³å°ä¹Ÿå¯ä»¥å¦‚codingï¼‰çš„æ­¥éª¤ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>SSHå¯†é’¥ç”¨äºå…å¯†ç gitæ“ä½œæ—¶éªŒè¯ä¿¡ä»»çš„å®¢æˆ·ç«¯ã€‚ä¸‹é¢å°†è¯´ä¸€ä¸‹ç”ŸæˆSSHå¯†é’¥å’Œå°†SSHå¯†é’¥æ·»åŠ åˆ°å¯¹åº”gitè´¦æˆ·ï¼ˆä¸ç‰¹æŒ‡githubï¼Œå…¶ä»–å¹³å°ä¹Ÿå¯ä»¥å¦‚codingï¼‰çš„æ­¥éª¤ã€‚</p>

<p>æœ¬æ–‡ä»¥<strong>mac osx</strong>ç³»ç»Ÿä¸ºä¾‹ã€‚</p>

<h2 id="æ£€æŸ¥">æ£€æŸ¥</h2>

<p>æ£€æŸ¥æ˜¯å¦å­˜åœ¨SSHå¯†é’¥</p>

<p>é¦–å…ˆï¼Œæˆ‘ä»¬åº”è¯¥æ£€æŸ¥ä¸€ä¸‹è®¡ç®—æœºä¸­æ˜¯å¦å·²ç»å­˜åœ¨SSHå¯†é’¥ï¼Œæ‰“å¼€ç»ˆç«¯è¾“å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ls -al ~/.ssh
<span class="c1"># å¦‚æœæœ‰æ–‡ä»¶å­˜åœ¨ï¼Œåˆ—å‡º.sshæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</span></code></pre></div>
<p>é»˜è®¤ä¼šæœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š</p>

<ul>
<li>id_dsa.pub</li>
<li>id_ecdsa.pub</li>
<li>id_ed25519.pub</li>
<li>id_rsa.pub</li>
</ul>

<p><strong>æ³¨ï¼š</strong></p>

<ul>
<li>å¦‚æœå·²ç»å­˜åœ¨äº†SSHå…¬é’¥å’Œç§é’¥ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ç¬¬äºŒã€ä¸‰æ­¥ã€‚</li>
<li>å¦‚æœå‡ºç°é”™è¯¯<code>~/.ssh doesn't exist</code>ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œåªéœ€è¦åœ¨~ç›®å½•ä¸‹åˆ›å»º.sshç›®å½•å³å¯<code>mkdir ~/.ssh</code></li>
</ul>

<h2 id="ç”Ÿæˆæ–°çš„sshå¯†é’¥">ç”Ÿæˆæ–°çš„SSHå¯†é’¥</h2>

<h3 id="ssh-keygen">ssh-keygen</h3>

<p>åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼ŒæŠŠé‚®ç®±æ¢æˆè‡ªå·±çš„é‚®ç®±å³å¯</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ssh-keygen -t rsa -b <span class="m">4096</span> -C <span class="s2">&#34;your_email@example.com&#34;</span>
<span class="c1"># Creates a new ssh key, using the provided email as a label</span>
<span class="c1"># Generating public/private rsa key pair.</span></code></pre></div>
<h3 id="ä¸€è·¯å›è½¦">ä¸€è·¯å›è½¦</h3>

<p>Githubå®˜æ–¹å¼ºçƒˆå»ºè®®ä¿æŒé»˜è®¤è®¾ç½®ï¼Œæ‰€ä»¥ä¸‹é¢å‡ºç°çš„ä¸‰ä¸ªéœ€è¦è¾“å…¥çš„æ—¶å€™ï¼Œç›´æ¥å›è½¦å°±å¥½ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ Enter file in which to save the key <span class="o">(</span>/Users/you/.ssh/id_rsa<span class="o">)</span>: <span class="o">[</span>Press enter<span class="o">]</span>
$ Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>: <span class="o">[</span>Type a passphrase<span class="o">]</span>
$ Enter same passphrase again: <span class="o">[</span>Type passphrase again<span class="o">]</span></code></pre></div>
<h3 id="ç»“æœ">ç»“æœ</h3>

<p>æˆåŠŸå®Œæˆä¸Šè¿°æ“ä½œåï¼Œå°±ä¼šå‡ºç°ä¸‹é¢ç±»ä¼¼çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Your identification has been saved in /Users/you/.ssh/id_rsa.
Your public key has been saved in /Users/you/.ssh/id_rsa.pub.
The key fingerprint is:
<span class="m">01</span>:0f:f4:3b:ca:85:d6:17:a1:7d:f0:68:9d:f0:a2:db your_email@example.com</code></pre></div>
<h2 id="å‘ssh-agentä¸­æ·»åŠ sshå¯†é’¥">å‘ssh-agentä¸­æ·»åŠ SSHå¯†é’¥</h2>

<h3 id="éªŒè¯ssh-agentå¯ç”¨">éªŒè¯ssh-agentå¯ç”¨</h3>

<p>ç¡®ä¿ssh-agentæ˜¯å¯ç”¨çš„ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># start the ssh-agent in the background</span>
$ <span class="nb">eval</span> <span class="s2">&#34;</span><span class="k">$(</span>ssh-agent -s<span class="k">)</span><span class="s2">&#34;</span>
<span class="c1"># Agent pid 43686</span></code></pre></div>
<h3 id="æ·»åŠ sshå¯†é’¥">æ·»åŠ SSHå¯†é’¥</h3>

<p>å°†sshå¯†é’¥æ·»åŠ åˆ°ssh-agentä¸­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ssh-add ~/.ssh/id_rsa</code></pre></div>
<h2 id="gitè´¦æˆ·æ·»åŠ sshå¯†é’¥">gitè´¦æˆ·æ·»åŠ SSHå¯†é’¥</h2>

<p>é¦–å…ˆæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œå°†åˆšç”Ÿæˆçš„SSHå¯†é’¥æ‹·è´åˆ°ç³»ç»Ÿç²˜è´´æ¿ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ pbcopy &lt; ~/.ssh/id_rsa.pub
<span class="c1"># Copies the contents of the id_rsa.pub file to your clipboard</span></code></pre></div>
<p><strong>æ³¨ï¼š</strong></p>

<p>å¯ä»¥è‡ªå·±åˆ°HOMEçš„.sshç›®å½•ä¸‹æ‹·è´is_rsa.pubçš„å†…å®¹ï¼Œä½†ä¸€å®šæ³¨æ„ä¸è¦æœ‰æ–°è¡Œæˆ–ç©ºæ ¼ï¼Œä¸Šè¿°å‘½ä»¤æ–¹å¼æ¯”è¾ƒå®‰å…¨ï¼</p>

<p>ä»¥githubä¸ºä¾‹è®²è§£å‘è´¦æˆ·ä¸­æ·»åŠ SSHå¯†é’¥ï¼Œcodingæ˜¯ç±»ä¼¼çš„ã€‚</p>

<h3 id="è¿›å…¥settings">è¿›å…¥settings</h3>

<p>ç‚¹å‡»è‡ªå·±githubé¦–é¡µå³ä¸Šè§’çš„å¤´åƒï¼Œé€‰æ‹©settingsï¼ˆè®¾ç½®ï¼‰</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/w7xck.png" alt="1" /></p>

<h3 id="é€‰æ‹©-ssh-keys">é€‰æ‹©<strong>SSH Keys</strong></h3>

<p>åœ¨å·¦è¾¹æ ç”¨æˆ·è®¾ç½®ä¸­é€‰æ‹©<strong>SSH Keys</strong>ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/9cr7g.png" alt="2" /></p>

<h3 id="æ·»åŠ -ssh">æ·»åŠ <strong>SSH</strong></h3>

<p>ç‚¹å‡»å³ä¸Šè§’çš„<strong>Add SSH Key</strong>ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/oz68n.png" alt="3" /></p>

<h3 id="è¾“å…¥sshå¯†é’¥">è¾“å…¥SSHå¯†é’¥</h3>

<p>åœ¨ä¸‹é¢è·³å‡ºçš„è¾“å…¥æ¡†ä¸­åˆ†åˆ«è¾“å…¥ç”¨äºåŒºåˆ†SSHå¯†é’¥çš„åç§°å’Œè´´å…¥å·²ç»å¤åˆ¶åˆ°ç³»ç»Ÿç²˜è´´æ¿ä¸Šçš„SSHå¯†é’¥ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/rif0x.png" alt="4" /></p>

<h3 id="æ·»åŠ å³å¯">æ·»åŠ å³å¯</h3>

<p>ç‚¹å‡»<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/42kz2.png" alt="5" />ï¼Œç„¶åè¾“å…¥è´¦æˆ·å¯†ç å®Œæˆæ·»åŠ ã€‚</p>

<h2 id="æµ‹è¯•sshè¿æ¥">æµ‹è¯•SSHè¿æ¥</h2>

<p>ä¸ºäº†ç¡®ä¿æˆ‘ä»¬ä¹‹å‰åšçš„ä¸€åˆ‡éƒ½æ˜¯å¯ç”¨çš„ï¼Œç°åœ¨å¯ä»¥å°è¯•SSHè¿æ¥Githubã€‚</p>

<h3 id="ssh-t">ssh -T</h3>

<p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ssh -T git@github.com</code></pre></div>
<h3 id="è­¦å‘Š">è­¦å‘Š</h3>

<p>å¯èƒ½ä¼šçœ‹åˆ°ä¸‹é¢çš„è­¦å‘Šï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">The authenticity of host <span class="s1">&#39;github.com (207.97.227.239)&#39;</span> can<span class="err">&#39;</span>t be established.
<span class="c1"># RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.</span>
<span class="c1"># Are you sure you want to continue connecting (yes/no)?</span></code></pre></div>
<p>è¾“å…¥<code>yes</code>ç»§ç»­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Hi username! You<span class="err">&#39;</span>ve successfully authenticated, but GitHub does not
<span class="c1"># provide shell access.</span></code></pre></div>
<h3 id="æ³¨æ„">æ³¨æ„</h3>

<p>å¦‚æœä¸Šé¢çš„ç”¨æˆ·åæ˜¯ä½ çš„ï¼Œå°±è¯´æ˜å·²ç»æŠŠSSHå¯†é’¥ç»‘å®šå¥½äº†ï¼Œä»¥åå¯ä»¥ç”¨sshå…å¯†ç è¿›è¡Œgitæ¨é€äº†ã€‚</p>

<h2 id="å‚è€ƒ"><strong>å‚è€ƒï¼š</strong></h2>

<ul>
<li><strong><a href="https://help.github.com/articles/generating-ssh-keys/" target="_blank">Generating SSH keys</a></strong></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”è¯»å–ç‰‡ä¸Šæ¸©åº¦ä¼ æ„Ÿå™¨æ•°æ®</title>
			<link>https://www.smslit.top/2015/10/30/temperature-BLE/</link>
			<pubDate>Fri, 30 Oct 2015 17:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/30/temperature-BLE/</guid>
			<description>&lt;p&gt;å·²ç»å®Œæˆäº†ä¸²å£æ‰“å°å°±å¾ˆæ–¹ä¾¿è°ƒè¯•äº†ï¼Œå­¦ä¹ å…¶ä»–å¤–è®¾çš„ä½¿ç”¨ä¹Ÿæ›´æ–¹ä¾¿ã€‚æœ¬æ–‡å°±è®°å½•äº†æ¸©åº¦ä¼ æ„Ÿå™¨ADCé‡‡æ ·çš„ä½¿ç”¨å­¦ä¹ ã€‚ç‰‡ä¸Šçš„æ¸©åº¦ä¼ æ„Ÿå™¨è¾“å‡ºçš„æ˜¯æ¨¡æ‹Ÿä¿¡å·ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ADé‡‡æ ·å¯¹ä¿¡å·è¿›è¡Œé‡‡é›†ï¼Œç„¶åè¿›è¡Œæ¢ç®—è·å¾—æ¸©åº¦ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å·²ç»å®Œæˆäº†ä¸²å£æ‰“å°å°±å¾ˆæ–¹ä¾¿è°ƒè¯•äº†ï¼Œå­¦ä¹ å…¶ä»–å¤–è®¾çš„ä½¿ç”¨ä¹Ÿæ›´æ–¹ä¾¿ã€‚æœ¬æ–‡å°±è®°å½•äº†æ¸©åº¦ä¼ æ„Ÿå™¨ADCé‡‡æ ·çš„ä½¿ç”¨å­¦ä¹ ã€‚ç‰‡ä¸Šçš„æ¸©åº¦ä¼ æ„Ÿå™¨è¾“å‡ºçš„æ˜¯æ¨¡æ‹Ÿä¿¡å·ï¼Œæ‰€ä»¥éœ€è¦é…ç½®ADé‡‡æ ·å¯¹ä¿¡å·è¿›è¡Œé‡‡é›†ï¼Œç„¶åè¿›è¡Œæ¢ç®—è·å¾—æ¸©åº¦ã€‚</p>

<h2 id="ç»“æ„">ç»“æ„</h2>

<p>å¯ä»¥ä»<a href="http://pan.baidu.com/s/1kTwBhpt" target="_blank">CC2541ç”¨æˆ·æ‰‹å†Œ</a>ä¸­æ‰¾åˆ°ADCçš„ç»“æ„å›¾å¦‚ä¸‹ï¼ŒTMP_SENSORå°±æ˜¯æ¸©åº¦ä¼ æ„Ÿå™¨ï¼ŒADCæ˜¯Sigma-Deltaæ¨¡æ•°è½¬æ¢å™¨ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/9jxzp.png" alt="1" /></p>

<h2 id="å¯„å­˜å™¨">å¯„å­˜å™¨</h2>

<h3 id="adcçš„ä½¿ç”¨">ADCçš„ä½¿ç”¨</h3>

<p>è¿›è¡Œé…ç½®åªéœ€å…³å¿ƒADCCON1ã€ADCCON2æˆ–ADCCON3ï¼ˆADCCON2å’ŒADCCON3æ˜¯ä¸€æ ·çš„ï¼Œé…ç½®å“ªä¸ªéƒ½å¯ä»¥ï¼Œæˆ‘é…ç½®çš„æ˜¯ADCCON3ï¼‰</p>

<ul>
<li><p>ADCCON1å¯„å­˜å™¨å¯ç”¨æ¥æŸ¥è¯¢è½¬æ¢çŠ¶æ€ï¼Œå¯ä»¥é…ç½®è§¦å‘äº‹ä»¶ç±»å‹ï¼Œé»˜è®¤é‡‡ç”¨æ‰‹åŠ¨è§¦å‘æ–¹å¼å¯åŠ¨è½¬æ¢ï¼ˆSTSEL=11bï¼‰ï¼ŒADCCON1é»˜è®¤å€¼0x33ï¼Œæ»¡è¶³æˆ‘è¿™é‡Œçš„éœ€è¦ï¼Œä¸éœ€é…ç½®ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/flaax.png" alt="2" /></p></li>

<li><p>è¿™é‡Œé€‰æ‹©é…ç½®ADCCON3(ä¹Ÿå¯ä»¥é…ç½®ADCCON2)ï¼ŒADCCON.EREFç”¨æ¥é…ç½®å‚è€ƒç”µå‹æºï¼Œé»˜è®¤æ˜¯å†…éƒ¨å‚è€ƒç”µå‹ï¼ŒADCCON.EDIVç”¨æ¥é…ç½®è½¬æ¢ç²¾åº¦ï¼Œè¿™é‡Œé€‰æ‹©æœ€é«˜12ä½ç²¾åº¦ï¼ŒADCCON3.ECHç”¨æ¥é€‰æ‹©è½¬æ¢é€šé“ï¼Œé€‰æ‹©æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œæœ€ç»ˆADCCON3=0x3Eã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/fcv9i.png" alt="3" /></p></li>
</ul>

<h3 id="adcè½¬æ¢æ•°æ®">ADCè½¬æ¢æ•°æ®</h3>

<p>ADCè½¬æ¢æ•°æ®[13:6]å­˜æ”¾åˆ°ADCHå¯„å­˜å™¨ä¸­ï¼Œ[5:0]å­˜æ”¾åœ¨ADCLå¯„å­˜å™¨ä¸­ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/yp4gq.png" alt="4" /></p>

<h3 id="å¼€å¯æ¸©åº¦ä¼ æ„Ÿå™¨">å¼€å¯æ¸©åº¦ä¼ æ„Ÿå™¨</h3>

<p>å¼€å¯æ¸©åº¦ä¼ æ„Ÿå™¨é€šè¿‡é…ç½®TR0å’ŒATESTä¸¤ä¸ªå¯„å­˜å™¨</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/dkfes.png" alt="5" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ntwtl.png" alt="6" /></p>

<h2 id="æ¸©åº¦ä¼ æ„Ÿå™¨æ•°æ®è·å–">æ¸©åº¦ä¼ æ„Ÿå™¨æ•°æ®è·å–</h2>

<p>ä½¿ç”¨ADCå¯¹æ¸©åº¦ä¼ æ„Ÿå™¨é‡‡æ ·å‰éœ€è¦å¼€å¯æ¸©åº¦ä¼ æ„Ÿå™¨ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">adcTempInit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// æ‰“å¼€æ¸©åº¦ä¼ æ„Ÿå™¨
</span><span class="c1"></span>    <span class="n">TR0</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>
    <span class="c1">// ä½¿èƒ½æ¸©åº¦ä¼ æ„Ÿå™¨
</span><span class="c1"></span>    <span class="n">ATEST</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>ç¼–å†™æ‰‹åŠ¨è¯»å–æ¸©åº¦ä¼ æ„Ÿå™¨æ•°æ®çš„å‡½æ•°ï¼Œå…¶ä¸­è½¬æ¢å™¨è·å¾—çš„æ•°æ®éœ€è¦æ¢ç®—æ‰èƒ½å¾—åˆ°æ‘„æ°æ¸©åº¦ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="c1">// è·å–æ¸©åº¦ä¼ æ„Ÿå™¨æ•°æ®
</span><span class="c1"></span><span class="kt">float</span> <span class="nf">readTemperature</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span>  <span class="n">reading</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">int</span>  <span class="n">Result</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">factor</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">do</span><span class="p">{</span>
        <span class="n">ADCCON3</span> <span class="o">=</span> <span class="mh">0x0E</span> <span class="o">|</span> <span class="mh">0x20</span><span class="p">;</span>           <span class="c1">// 12ä½ç²¾åº¦ï¼Œå¯åŠ¨è½¬æ¢
</span><span class="c1"></span>        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">ADCCON1</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">));</span>          <span class="c1">// ç­‰å¾…è½¬æ¢å®Œæˆ
</span><span class="c1"></span>
        <span class="c1">// è¯»å–é‡‡æ ·ç»“æœ
</span><span class="c1"></span>        <span class="n">reading</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">ADCL</span><span class="p">);</span>
        <span class="n">reading</span> <span class="o">|=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">ADCH</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="p">);</span>
        <span class="n">reading</span> <span class="o">&gt;&gt;=</span> <span class="mi">4</span><span class="p">;</span>                      <span class="c1">// ä¸¢å¼ƒä½ä½
</span><span class="c1"></span>        <span class="n">Result</span> <span class="o">+=</span> <span class="n">reading</span><span class="p">;</span>                  <span class="c1">// ç´¯åŠ 
</span><span class="c1"></span>    <span class="p">}</span><span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">++</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">);</span>   <span class="c1">// è¿ç»­é‡‡æ ·10æ¬¡
</span><span class="c1"></span>    
    <span class="k">return</span> <span class="p">((</span><span class="n">Result</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span><span class="o">-</span><span class="mi">1340</span><span class="p">)</span> <span class="o">/</span> <span class="n">factor</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>åœ¨éœ€è¦è·å–æ¸©åº¦æ•°æ®çš„åœ°æ–¹è°ƒç”¨å‡½æ•°å³å¯ï¼Œæˆ‘åœ¨ä¸»å‡½æ•°è·å–æ¸©åº¦æ•°æ®å¹¶æ‰“å°ï¼Œæ¯éš”ä¸€ç§’PCä¸²å£åŠ©æ‰‹å°±æ¥æ”¶åˆ°ä¸€æ¬¡æ¸©åº¦æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">oscInit</span><span class="p">();</span>              <span class="c1">// æ™¶æŒ¯æ—¶é’Ÿåˆå§‹åŒ–
</span><span class="c1"></span>    <span class="n">serialInit</span><span class="p">();</span>
    <span class="n">adcTempInit</span><span class="p">();</span>
    
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printFloatln</span><span class="p">(</span><span class="n">readTemperature</span><span class="p">());</span>
        <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”ä¸²å£çš„ä½¿ç”¨</title>
			<link>https://www.smslit.top/2015/10/30/serial-BLE/</link>
			<pubDate>Fri, 30 Oct 2015 14:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/30/serial-BLE/</guid>
			<description>&lt;p&gt;è¿›è¡Œè½¯ä»¶å¼€å‘ï¼Œä¸²å£æ‰“å°æ˜¯ä¸ªæœ‰æ•ˆçš„è°ƒè¯•æ–¹å¼ï¼Œç‰¹åˆ«é€‚ç”¨äºæ²¡æœ‰æ˜¾ç¤ºè®¾å¤‡çš„å¼€å‘å¹³å°ï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿è°ƒè¯•å¿…é¡»è¦å­¦ä¼šä¸²å£çš„é…ç½®å’Œä½¿ç”¨ï¼Œåœ¨åæœŸå®ç°ä¸²å£æ•°æ®è“ç‰™è½¬å‘çš„æ—¶å€™ï¼Œä¹Ÿå¿…é¡»æ¸…æ¥šä¸²å£çš„ä½¿ç”¨ã€‚æœ¬æ–‡å°±é’ˆå¯¹æˆ‘è‡ªå·±çš„æƒ…å†µè¯´ä¸€ä¸‹ä¸²å£çš„ä½¿ç”¨ï¼ŒCC2541æœ‰ä¸¤ä¸ªUSARTï¼Œä½¿ç”¨éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæ ¹æ®ä½¿ç”¨ç®¡è„šå’Œä¸²å£çš„ä¸åŒåšé€‚å½“çš„è°ƒæ•´å°±å¥½ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>è¿›è¡Œè½¯ä»¶å¼€å‘ï¼Œä¸²å£æ‰“å°æ˜¯ä¸ªæœ‰æ•ˆçš„è°ƒè¯•æ–¹å¼ï¼Œç‰¹åˆ«é€‚ç”¨äºæ²¡æœ‰æ˜¾ç¤ºè®¾å¤‡çš„å¼€å‘å¹³å°ï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿è°ƒè¯•å¿…é¡»è¦å­¦ä¼šä¸²å£çš„é…ç½®å’Œä½¿ç”¨ï¼Œåœ¨åæœŸå®ç°ä¸²å£æ•°æ®è“ç‰™è½¬å‘çš„æ—¶å€™ï¼Œä¹Ÿå¿…é¡»æ¸…æ¥šä¸²å£çš„ä½¿ç”¨ã€‚æœ¬æ–‡å°±é’ˆå¯¹æˆ‘è‡ªå·±çš„æƒ…å†µè¯´ä¸€ä¸‹ä¸²å£çš„ä½¿ç”¨ï¼ŒCC2541æœ‰ä¸¤ä¸ªUSARTï¼Œä½¿ç”¨éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œæ ¹æ®ä½¿ç”¨ç®¡è„šå’Œä¸²å£çš„ä¸åŒåšé€‚å½“çš„è°ƒæ•´å°±å¥½ã€‚</p>

<h2 id="é…ç½®">é…ç½®</h2>

<p>æˆ‘æ‰‹å¤´çš„æ˜¯ä¸€ä¸ªCC2541çš„æœ€å°ç³»ç»Ÿï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä½¿ç”¨çš„ä¸²å£æ˜¯UART0ï¼Œä¸IOçš„åˆ†é…å…³ç³»æ˜¯ï¼šP1_5-&gt;TXï¼ŒP1_4-&gt;RXã€‚è¦å®ç°ä¸²å£çš„ä½¿ç”¨ï¼ˆä¸ä½¿ç”¨ç¡¬ä»¶æµæ§åˆ¶ï¼‰éœ€è¦è¿›è¡ŒIOçš„å¤ç”¨é…ç½®å’Œé’ˆå¯¹ä¸²å£çš„é…ç½®ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/25atx.png" alt="1" /></p>

<h3 id="ioé…ç½®">IOé…ç½®</h3>

<p>éœ€è¦å°†P1_4å’ŒP1_5ä¸¤ä¸ªIOè¿›è¡Œå¤ç”¨é…ç½®ï¼ŒåŒæ—¶å°†UART0é…ç½®åˆ°è¿™ä¸¤ä¸ªIOçš„ä½ç½®ï¼Œå…³äºè¿™ä¸€é¡¹é…ç½®ï¼Œé¦–å…ˆå¾—æ˜ç¡®IOå¤ç”¨çš„mapï¼Œå¦‚ä¸‹å¾ˆæ¸…æ™°åœ°çœ‹åˆ°UART0æ˜ å°„åˆ°P1_4å’ŒP1_5ï¼Œæ˜¯é…ç½®UART0ä¸ºä½ç½®2ã€‚è¿˜éœ€è¦é…ç½®ç›¸åº”ç®¡è„šä¼˜å…ˆä½¿ç”¨ä¸²å£ï¼Œé‚£ä¹ˆéœ€è¦é…ç½®çš„å¯„å­˜å™¨åˆ†åˆ«æ˜¯PERCFGã€P1SELå’ŒP2DIRï¼Œå…³äºè¿™ä¸‰ä¸ªå¯„å­˜å™¨çš„è¯¦ç»†ä¿¡æ¯å¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  <a href="/2015/10/27/BaseRegiser-BLE/" target="_blank">BLEå¼€å‘â€”â€”CC2541å¯„å­˜å™¨æ•´ç†</a>ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/f045v.png" alt="2" /></p>

<p>é…ç½®ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">PERCFG</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>                          <span class="c1">// é…ç½®UART0ä¸ºä½ç½®2
</span><span class="c1"></span><span class="n">P1SEL</span> <span class="o">=</span> <span class="mh">0x3c</span><span class="p">;</span>                            <span class="c1">// P1_2,P1_3,P1_4,P1_5ç”¨ä½œå¤–è®¾ï¼Œä¸²å£åŠŸèƒ½
</span><span class="c1"></span><span class="n">P2DIR</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0xc0</span><span class="p">;</span>                          <span class="o">//</span> <span class="n">P1ä¼˜å…ˆç”¨ä½œä¸²å£</span></code></pre></div>
<p>å¯¹äº†ï¼Œè¿™é‡Œå¾—æ’ä¸€å¥ï¼Œå¯èƒ½ä½ ä¸æ˜ç™½æ€ä¹ˆçœ‹å¯„å­˜å™¨èµ‹ä»€ä¹ˆå€¼ï¼Œè¿™é‡Œä»¥ä¸Šé¢çš„P1SELä¸ºä¾‹è®²ä¸€ä¸‹:</p>

<p>æˆ‘ä»¬çŸ¥é“æ­¤å¯„å­˜å™¨çš„æè¿°ï¼šP1.7&ndash;P1.0çš„åŠŸèƒ½é€‰æ‹©ï¼ˆ0ï¼šé€šç”¨I/O 1ï¼šå¤–è®¾åŠŸèƒ½ï¼‰ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯P1_2,P1_3,P1_4,P1_5ç”¨ä½œå¤–è®¾ï¼Œæ‰€ä»¥è¿™å››ä¸ªç®¡è„šå¯¹åº”çš„ä¸€ä¸ªByteçš„2ã€3ã€4ã€5bitä½æ˜¯1ï¼Œå…¶ä½™bitä½ä¸ç®¡ï¼Œè®¾ç½®ä¸º0ä¸ºæ™®é€šIOï¼Œæ‰€ä»¥å€¼å°±æ˜¯0011 1100é‚£ä¹ˆå¯¹åº”åå…­è¿›åˆ¶æ•°ä¸º0x3cã€‚</p>

<h3 id="uart0é…ç½®">UART0é…ç½®</h3>

<p>IOé…ç½®å¥½ä»¥åï¼Œéœ€è¦å¯¹UART0çš„å¯„å­˜å™¨è¿›è¡Œé…ç½®ï¼Œé¦–å…ˆå¾—é€‰æ‹©ä¸²å£æ–¹å¼æ˜¯UARTå¼‚æ­¥é€šä¿¡æ–¹å¼ï¼Œç„¶åé€šè¿‡U0GCR.BAUD_E[4:0]å’ŒU0BAUD.BAUD[7:0]ç»“åˆé…ç½®æ³¢ç‰¹ç‡ï¼Œæ³¢ç‰¹ç‡çš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>

<p>$$
BaudRate = \frac{(256+BAUD \_ M)\times2^{BAUD \_ E}}{2^{28}}\times f
$$</p>

<p>å…¶ä¸­fæ˜¯ç³»ç»Ÿæ—¶é’Ÿï¼Œæˆ‘è®¾ç½®çš„æ˜¯32MHzå¤–éƒ¨æ™¶æŒ¯ï¼Œå¯¹åº”32MHzæ—¶é’Ÿæ³¢ç‰¹ç‡è®¾ç½®é…ç½®è¡¨å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th align="center">æ³¢ç‰¹ç‡</th>
<th align="center">UxBAUD.BAUD_M</th>
<th align="center">UxBAUD.BAUD_E</th>
<th align="center">è¯¯å·®(%)</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">2400</td>
<td align="center">59</td>
<td align="center">6</td>
<td align="center">0.14</td>
</tr>

<tr>
<td align="center">4800</td>
<td align="center">59</td>
<td align="center">7</td>
<td align="center">0.14</td>
</tr>

<tr>
<td align="center">9600</td>
<td align="center">59</td>
<td align="center">8</td>
<td align="center">0.14</td>
</tr>

<tr>
<td align="center">14,400</td>
<td align="center">216</td>
<td align="center">8</td>
<td align="center">0.03</td>
</tr>

<tr>
<td align="center">19,200</td>
<td align="center">59</td>
<td align="center">9</td>
<td align="center">0.14</td>
</tr>

<tr>
<td align="center">28,800</td>
<td align="center">216</td>
<td align="center">9</td>
<td align="center">0.03</td>
</tr>

<tr>
<td align="center">38,400</td>
<td align="center">59</td>
<td align="center">10</td>
<td align="center">0.14</td>
</tr>

<tr>
<td align="center">57,600</td>
<td align="center">216</td>
<td align="center">10</td>
<td align="center">0.03</td>
</tr>

<tr>
<td align="center">76,800</td>
<td align="center">59</td>
<td align="center">11</td>
<td align="center">0.14</td>
</tr>

<tr>
<td align="center">115,200</td>
<td align="center">216</td>
<td align="center">11</td>
<td align="center">0.03</td>
</tr>

<tr>
<td align="center">230,400</td>
<td align="center">216</td>
<td align="center">12</td>
<td align="center">0.03</td>
</tr>
</tbody>
</table>

<p>å…¶å®è¿˜å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚è®¾ç½®U0UCRå¯¹åœæ­¢ä½ã€æ ¡éªŒã€èµ·å§‹ä½ã€ä½é•¿è¿›è¡Œé…ç½®ï¼Œæˆ‘æ²¡æœ‰é…ç½®ä½¿ç”¨äº†é»˜è®¤è®¾ç½®ï¼š8ä½æ•°æ®ä½ã€æ²¡æœ‰æ ¡éªŒã€1ä¸ªåœæ­¢ä½ã€‚</p>

<p>é…ç½®ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">U0CSR</span> <span class="o">|=</span> <span class="mh">0x80</span><span class="p">;</span>                           <span class="c1">// UART æ–¹å¼
</span><span class="c1"></span><span class="n">U0GCR</span> <span class="o">|=</span> <span class="mi">11</span><span class="p">;</span>                             <span class="c1">// U0GCRä¸U0BAUDé…åˆ
</span><span class="c1"></span><span class="n">U0BAUD</span> <span class="o">|=</span> <span class="mi">216</span><span class="p">;</span>                           <span class="o">//</span> <span class="err">æ³¢ç‰¹ç‡è®¾ä¸º</span><span class="mi">115200</span></code></pre></div>
<h3 id="æ¥æ”¶ä¸­æ–­é…ç½®">æ¥æ”¶ä¸­æ–­é…ç½®</h3>

<p>æˆ‘é‡‡ç”¨æ¥æ”¶ä¸­æ–­çš„æ–¹å¼æ¥æ”¶ä¸²å£æ•°æ®ï¼Œæ‰€ä»¥è¿˜å¾—éœ€è¦é…ç½®ä¸­æ–­ï¼ŒæŸ¥è¯¢<a href="http://pan.baidu.com/s/1kTwBhpt" target="_blank">CC2541ç”¨æˆ·æ‰‹å†Œ</a>å¯ä»¥å‘ç°è®¾ç½®IEN0å³å¯ï¼Œå¯„å­˜å™¨è¯¦ç»†å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/soj5t.png" alt="4" /></p>

<p>è®¾ç½®ç¬¬7ä½å’Œä½ä½å³å¯ï¼ŒåŒæ—¶éœ€è¦æ¸…ç©ºUART0ä¸²å£æ¥æ”¶ä¸­æ–­æ ‡å¿—ï¼Œå› ä¸ºä¸²å£åŸºæœ¬é…ç½®å®Œæ¯•ï¼Œç„¶åé…ç½®U0CSRå…è®¸æ¥æ”¶ï¼Œé…ç½®ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">UTX0IF</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                              <span class="c1">// æ¸…é™¤ä¸­æ–­æ ‡å¿—
</span><span class="c1"></span><span class="n">U0CSR</span> <span class="o">|=</span> <span class="mi">0</span><span class="n">X40</span><span class="p">;</span>                           <span class="c1">// å…è®¸æ¥æ”¶
</span><span class="c1"></span><span class="n">IEN0</span> <span class="o">|=</span> <span class="mh">0x84</span><span class="p">;</span>                            <span class="o">//</span> <span class="err">å¼€æ€»ä¸­æ–­ï¼Œæ¥æ”¶ä¸­æ–­</span></code></pre></div>
<h2 id="ä¸²å£ä½¿ç”¨">ä¸²å£ä½¿ç”¨</h2>

<p>è¿™é‡Œé‡‡ç”¨ä¸­æ–­çš„æ–¹å¼æ¥æ”¶ä¸²å£æ•°æ®ï¼Œæ‰€ä»¥å¿…é¡»å†™ä¸­æ–­å¤„ç†ç¨‹åºï¼Œæ¥å—æå®šï¼Œé‚£ä¹ˆå‘é€æ•°æ®æ€ä¹ˆåŠå‘¢ï¼Ÿæ— è®ºæ¥æ”¶è¿˜æ˜¯å‘é€æ•°æ®éƒ½æ˜¯åœ¨æ“ä½œU0DBUFï¼Œæ¥æ”¶åˆ°æ•°æ®åç¡¬ä»¶ä¼šæŠŠæ•°æ®æ”¾åœ¨U0DBUFï¼Œè¯»å–å³å¯å–å‡ºæ•°æ®ï¼Œå½“å¾€U0DBUFå†™æ•°æ®åï¼Œä¸²å£å°±ä¼šæŠŠæ•°æ®å‘é€å‡ºå»ï¼Œä¸ºäº†æ›´æ–¹ä¾¿ä½¿ç”¨ä¸²å£ï¼Œæˆ‘ç¼–å†™äº†åˆ¤æ–­æ¥æ”¶ï¼Œè¯»å–æ•°æ®ï¼Œå‘é€å­—ç¬¦ä¸²ã€æ•´æ•°å’Œæµ®ç‚¹æ•°çš„å¤„ç†å‡½æ•°ï¼Œä¸‹é¢åˆ†åˆ«æ¥è¯´ä¸€ä¸‹ã€‚</p>

<h3 id="ä¸²å£æ¥æ”¶ä¸­æ–­">ä¸²å£æ¥æ”¶ä¸­æ–­</h3>

<p>ä»¥ä¸‹ä»£ç å®ç°å°†æ¥æ”¶åˆ°çš„æ•°æ®å‘å›å»ï¼Œå°†ç¨‹åºçƒ§è¿›èŠ¯ç‰‡ï¼Œè¿æ¥ä¸²å£åˆ°PCï¼Œåœ¨PCç«¯æ‰“å¼€ä¸²å£åŠ©æ‰‹ï¼ˆè¿™ä¸ªç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œè‡ªå·±ä¸‹è½½ä¸€ä¸ªå³å¯ï¼Œæ¯”å¦‚<a href="http://www.openjumper.com/openjumper-serial-assistant/" target="_blank">OpenJumperä¸²å£åŠ©æ‰‹</a>ï¼‰è¿›è¡Œæµ‹è¯•ï¼ŒPCç«¯å¾€ä¸²å£å‘æ•°æ®ï¼Œåˆ™ä¼šçœ‹åˆ°CC2541å°†æ•°æ®è¿”å›å‘é€ï¼ŒPCç«¯ä¸²å£åŠ©æ‰‹æ¥æ”¶åŒºä¾¿æ”¶åˆ°å‘é€çš„æ•°æ®ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="c1">// ä¸­æ–­å¤„ç†
</span><span class="c1"></span><span class="cp">#pragma vector = URX0_VECTOR
</span><span class="cp"></span><span class="n">__interrupt</span> <span class="kt">void</span> <span class="nf">UART0_ISR</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
    <span class="n">URX0IF</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="c1">// æ¸…ä¸­æ–­æ ‡å¿—
</span><span class="c1"></span>    <span class="n">ch</span> <span class="o">=</span> <span class="n">U0DBUF</span><span class="p">;</span>
    
    <span class="n">U0DBUF</span> <span class="o">=</span> <span class="n">ch</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<h3 id="ä¸²å£å‡½æ•°">ä¸²å£å‡½æ•°</h3>

<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå†™äº†ä¸€äº›å‡½æ•°ï¼Œè¿™é‡Œåªè¯´æ˜ä¸€ä¸‹æ¥æ”¶ï¼šæˆ‘æ˜¯å»ºç«‹äº†ä¸€ä¸ªç¼“å­˜æ•°ç»„ï¼Œé•¿åº¦64ï¼Œè¿˜æœ‰ä¸€ä¸ªæ ‡è®°æŒ‡é’ˆï¼Œç”¨æ¥è®°å½•æœ€æ–°æ•°æ®ä½ç½®ï¼Œæ¯æ¬¡æ¥æ”¶åˆ°æ•°æ®å°±å¾€æ•°ç»„é‡Œå¡ï¼Œè¯»å–çš„æ—¶å€™å–å‡ºæ•°æ®ï¼Œå†é€ä¸ªå‰ç§»æ•°æ®ï¼Œæ ‡è®°æŒ‡é’ˆå‡1ã€‚</p>

<p>å…·ä½“å®ç°ï¼Œçœ‹æˆ‘çš„ä»£ç ï¼Œå¾ˆå¥½ç†è§£çš„ã€‚</p>

<ul>
<li><p>å¤´æ–‡ä»¶serial.h</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#ifndef __SERIAL_H__
</span><span class="cp">#define __SERIAL_H__
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">oscInit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">serialInit</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">serialAvailable</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">serialRead</span><span class="p">();</span>
<span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">serialWrite</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dataSend</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">bytes</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">length</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">printInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">printFloat</span><span class="p">(</span><span class="kt">float</span> <span class="n">num</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">bytes</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">length</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">printIntln</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">printFloatln</span><span class="p">(</span><span class="kt">float</span> <span class="n">num</span><span class="p">);</span>

<span class="cp">#endif</span></code></pre></div></li>

<li><p>æºæ–‡ä»¶serial.c</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&#34;serial.h&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;ioCC2541.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">serialReData</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dataPoint</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// å¯åŠ¨å¤–éƒ¨32Mæ™¶æŒ¯
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">oscInit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">SLEEPCMD</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0x04</span><span class="p">;</span>                       <span class="c1">// å¯åŠ¨æ‰€æœ‰æ™¶æŒ¯
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">SLEEPSTA</span> <span class="o">&amp;</span> <span class="mh">0x40</span><span class="p">));</span>             <span class="c1">// ç­‰å¾…æ™¶æŒ¯ç¨³å®š
</span><span class="c1"></span>
    <span class="n">CLKCONCMD</span> <span class="o">=</span> <span class="p">(</span><span class="n">CLKCONCMD</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0x49</span><span class="p">;</span>   <span class="c1">// ä½¿ç”¨16Mæ™¶æŒ¯ä½œä¸ºä¸»æ—¶é’Ÿ
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">((</span><span class="n">CLKCONSTA</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x80</span><span class="p">)</span> <span class="o">!=</span> <span class="mh">0x49</span> <span class="p">);</span>   <span class="c1">// ç­‰å¾…ä¸»æ—¶é’Ÿåˆ‡æ¢åˆ°16Mæ™¶æŒ¯
</span><span class="c1"></span>
    <span class="n">CLKCONCMD</span> <span class="o">=</span> <span class="p">(</span><span class="n">CLKCONCMD</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x80</span><span class="p">)</span> <span class="p">;</span>        <span class="c1">// ä½¿ç”¨å¤–éƒ¨32Kæ™¶æŒ¯ä½œä¸ºä¼‘çœ æ—¶é’Ÿ
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="n">CLKCONSTA</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">);</span>      <span class="c1">// ç­‰å¾…ç¡çœ æ—¶é’Ÿåˆ‡æ¢åˆ°å¤–éƒ¨32Kæ™¶æŒ¯
</span><span class="c1"></span>
    <span class="n">CLKCONCMD</span> <span class="o">=</span> <span class="p">(</span><span class="n">CLKCONCMD</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="p">;</span>        <span class="c1">// ä½¿ç”¨32Mæ™¶æŒ¯ä½œä¸ºä¸»æ—¶é’Ÿ
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="n">CLKCONSTA</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x80</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">);</span>     <span class="c1">// ç­‰å¾…ä¸»æ—¶é’Ÿåˆ‡æ¢åˆ°32Mæ™¶æŒ¯
</span><span class="c1"></span>
    <span class="n">SLEEPCMD</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>                       <span class="c1">// å…³é—­æœªä½¿ç”¨çš„æ™¶æŒ¯
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// ä¸²å£åˆå§‹åŒ–
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">serialInit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// åˆå§‹åŒ–ä¸²å£çš„IO
</span><span class="c1"></span>    <span class="n">PERCFG</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>                          <span class="c1">// é…ç½®UART0ä¸ºä½ç½®2
</span><span class="c1"></span>    <span class="n">P1SEL</span> <span class="o">=</span> <span class="mh">0x3c</span><span class="p">;</span>                            <span class="c1">// P1_2,P1_3,P1_4,P1_5ç”¨ä½œä¸²å£åŠŸèƒ½
</span><span class="c1"></span>    <span class="n">P2DIR</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0xc0</span><span class="p">;</span>                          <span class="c1">// P1ä¼˜å…ˆç”¨ä½œä¸²å£
</span><span class="c1"></span>    <span class="c1">// é…ç½®ä¸²å£
</span><span class="c1"></span>    <span class="n">U0CSR</span> <span class="o">|=</span> <span class="mh">0x80</span><span class="p">;</span>                           <span class="c1">// UART æ–¹å¼
</span><span class="c1"></span>    <span class="n">U0GCR</span> <span class="o">|=</span> <span class="mi">11</span><span class="p">;</span>                             <span class="c1">// U0GCRä¸U0BAUDé…åˆ
</span><span class="c1"></span>    <span class="n">U0BAUD</span> <span class="o">|=</span> <span class="mi">216</span><span class="p">;</span>                           <span class="c1">// æ³¢ç‰¹ç‡è®¾ä¸º115200
</span><span class="c1"></span>    <span class="n">UTX0IF</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                              <span class="c1">// æ¸…é™¤ä¸­æ–­æ ‡å¿—
</span><span class="c1"></span>    <span class="n">U0CSR</span> <span class="o">|=</span> <span class="mi">0</span><span class="n">X40</span><span class="p">;</span>                           <span class="c1">// å…è®¸æ¥æ”¶
</span><span class="c1"></span>    <span class="n">IEN0</span> <span class="o">|=</span> <span class="mh">0x84</span><span class="p">;</span>                            <span class="c1">// å¼€æ€»ä¸­æ–­ï¼Œæ¥æ”¶ä¸­æ–­
</span><span class="c1"></span><span class="p">}</span>

<span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">serialAvailable</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">dataPoint</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// è¯»å–ä¸€ä¸ªByte
</span><span class="c1"></span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">serialRead</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="n">serialReData</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span><span class="n">dataPoint</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">dataPoint</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">serialReData</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialReData</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="n">dataPoint</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">dataPoint</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ch</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// å‘é€ä¸€ä¸ªByteæ•°æ®
</span><span class="c1"></span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="nf">serialWrite</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">dataSend</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">U0DBUF</span> <span class="o">=</span> <span class="n">dataSend</span><span class="p">;</span>
    <span class="k">while</span><span class="p">((</span><span class="n">U0CSR</span> <span class="o">&amp;</span> <span class="mh">0x01</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0x01</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// æŒ‰ä¸ªæ•°å‘é€å­—ç¬¦ä¸²
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">print</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">bytes</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">serialWrite</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">bytes</span><span class="o">+</span><span class="n">i</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1">// å‘é€æ•´æ•°
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">printInt</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">serialWrite</span><span class="p">(</span><span class="mh">0x30</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">nT</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span><span class="n">num</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">serialWrite</span><span class="p">(</span><span class="sc">&#39;-&#39;</span><span class="p">);</span>
            <span class="n">nT</span><span class="o">=-</span><span class="n">num</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">nT</span> <span class="o">=</span> <span class="n">num</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="n">nT</span><span class="o">/</span><span class="mi">10000</span><span class="o">+</span><span class="mh">0x30</span><span class="p">;</span>
            <span class="n">nT</span> <span class="o">%=</span> <span class="mi">10000</span><span class="p">;</span>
            <span class="n">nT</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">flag</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">serialWrite</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span><span class="n">ch</span> <span class="o">&gt;</span> <span class="mh">0x30</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">flag</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
                    <span class="n">serialWrite</span><span class="p">(</span><span class="n">ch</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// å‘é€ä¸¤ä½å°æ•°
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">printFloat</span><span class="p">(</span><span class="kt">float</span> <span class="n">numFloat</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">numI</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">numFloat</span><span class="p">;</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">factor</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
    <span class="n">printInt</span><span class="p">(</span><span class="n">numI</span><span class="p">);</span>
    <span class="n">numI</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">numFloat</span><span class="o">*</span><span class="n">factor</span><span class="o">-</span><span class="n">numI</span><span class="o">*</span><span class="n">factor</span><span class="p">);</span>
    <span class="n">serialWrite</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">);</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="n">numI</span> <span class="o">/</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">serialWrite</span><span class="p">(</span><span class="n">ch</span><span class="o">+</span><span class="mh">0x30</span><span class="p">);</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="n">numI</span> <span class="o">%</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">serialWrite</span><span class="p">(</span><span class="n">ch</span><span class="o">+</span><span class="mh">0x30</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// å‘é€å­—ç¬¦ä¸²ï¼ˆå¸¦æ¢è¡Œï¼‰
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">println</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">bytes</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">print</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span> <span class="n">length</span><span class="p">);</span>
    <span class="n">serialWrite</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// å‘é€æ•´æ•°ï¼ˆå¸¦æ¢è¡Œï¼‰
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">printIntln</span><span class="p">(</span><span class="kt">int</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printInt</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
    <span class="n">serialWrite</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// å‘é€ä¸¤ä½å°æ•°ï¼ˆå¸¦æ¢è¡Œï¼‰
</span><span class="c1"></span><span class="kt">void</span> <span class="nf">printFloatln</span><span class="p">(</span><span class="kt">float</span> <span class="n">num</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">printFloat</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
    <span class="n">serialWrite</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// ä¸­æ–­å¤„ç†
</span><span class="c1"></span><span class="cp">#pragma vector = URX0_VECTOR
</span><span class="cp"></span><span class="n">__interrupt</span> <span class="kt">void</span> <span class="nf">UART0_ISR</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">ch</span><span class="p">;</span>
    <span class="n">URX0IF</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="c1">// æ¸…ä¸­æ–­æ ‡å¿—
</span><span class="c1"></span>    <span class="n">ch</span> <span class="o">=</span> <span class="n">U0DBUF</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">dataPoint</span> <span class="o">&lt;</span> <span class="mi">64</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">serialReData</span><span class="p">[</span><span class="n">dataPoint</span><span class="p">]</span> <span class="o">=</span> <span class="n">ch</span><span class="p">;</span>
        <span class="n">dataPoint</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">63</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">serialReData</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialReData</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="n">dataPoint</span> <span class="o">=</span> <span class="mi">63</span><span class="p">;</span>
        <span class="n">serialReData</span><span class="p">[</span><span class="mi">63</span><span class="p">]</span> <span class="o">=</span> <span class="n">ch</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">U0DBUF</span> <span class="o">=</span> <span class="n">ch</span><span class="p">;</span>
<span class="p">}</span></code></pre></div></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”æ—¶é’Ÿå’Œæ™¶æŒ¯</title>
			<link>https://www.smslit.top/2015/10/30/clockOSC-BLE/</link>
			<pubDate>Fri, 30 Oct 2015 11:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/30/clockOSC-BLE/</guid>
			<description>&lt;p&gt;ä¸€ä¸ªç³»ç»Ÿè¿è¡Œè¦ç¨³å®šï¼Œå…¶æ—¶é’Ÿå¿…é¡»ç¨³å®šï¼Œå­¦ä¹ CC2541å¼€å‘ï¼Œåº”è¯¥äº†è§£æ—¶é’Ÿçš„é…ç½®ï¼Œéœ€è¦äº†è§£æ—¶é’Ÿçš„å¯„å­˜å™¨ï¼šCLKCONCMDå’ŒCLKCONSTAï¼ŒCMDï¼Œcommandï¼Œæ˜¯ç”¨äºé…ç½®æ—¶é’Ÿï¼›STAï¼Œstateï¼Œçœ‹çŠ¶æ€çš„ï¼Œç”¨æ¥æ£€æµ‹æ˜¯å¦é…ç½®æˆåŠŸã€‚ä¸ºäº†ä½åŠŸè€—çš„è®¾ç½®ï¼Œè¿˜åº”è¯¥äº†è§£SLEEPCMDå’ŒSLEEPSTAè¿™ä¸¤ä¸ªå¯„å­˜å™¨ï¼Œä¸æ—¶é’Ÿçš„ç”µæºç›¸å…³çš„ï¼Œæœ¬æ–‡è®²ä¸€ä¸‹æ—¶é’Ÿçš„åˆå§‹åŒ–ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¸€ä¸ªç³»ç»Ÿè¿è¡Œè¦ç¨³å®šï¼Œå…¶æ—¶é’Ÿå¿…é¡»ç¨³å®šï¼Œå­¦ä¹ CC2541å¼€å‘ï¼Œåº”è¯¥äº†è§£æ—¶é’Ÿçš„é…ç½®ï¼Œéœ€è¦äº†è§£æ—¶é’Ÿçš„å¯„å­˜å™¨ï¼šCLKCONCMDå’ŒCLKCONSTAï¼ŒCMDï¼Œcommandï¼Œæ˜¯ç”¨äºé…ç½®æ—¶é’Ÿï¼›STAï¼Œstateï¼Œçœ‹çŠ¶æ€çš„ï¼Œç”¨æ¥æ£€æµ‹æ˜¯å¦é…ç½®æˆåŠŸã€‚ä¸ºäº†ä½åŠŸè€—çš„è®¾ç½®ï¼Œè¿˜åº”è¯¥äº†è§£SLEEPCMDå’ŒSLEEPSTAè¿™ä¸¤ä¸ªå¯„å­˜å™¨ï¼Œä¸æ—¶é’Ÿçš„ç”µæºç›¸å…³çš„ï¼Œæœ¬æ–‡è®²ä¸€ä¸‹æ—¶é’Ÿçš„åˆå§‹åŒ–ã€‚</p>

<p>æœ‰å…³è¿™å››ä¸ªå¯„å­˜å™¨çš„è¯¦ç»†ä¿¡æ¯åœ¨ <a href="/2015/10/27/BaseRegiser-BLE/" target="_blank">BLEå¼€å‘â€”â€”CC2541å¯„å­˜å™¨æ•´ç†</a> é‡Œæœ‰åˆ—å‡ºæ¥ï¼Œè¿™é‡Œå°±ä¸å†è¯´æ˜ã€‚</p>

<p>è¿™é‡Œæ ¹æ®æˆ‘è‡ªå·±çš„æƒ…å†µï¼Œéœ€è¦å°†ç³»ç»Ÿä¸»æ—¶é’Ÿé…ç½®ä¸º32Må¤–éƒ¨æ™¶æŒ¯ï¼Œè¦å€ŸåŠ©CLKCONCMD.OSCé…ç½®ï¼Œé€‰æ‹©32Kæ—¶é’Ÿæºä¸ºå†…éƒ¨RCæŒ¯è¡å™¨ï¼Œè¦å€ŸåŠ©CLKCONCMD.OSC32Kã€‚å†è€…å°±æ˜¯é…ç½®å·¥ä½œæ¨¡å¼ï¼Œåªéœ€å…³å¿ƒå…¶ä¸­æœ‰å…³æ—¶é’Ÿçš„é…ç½®å³å¯ï¼ŒSLEEPCMD.OSC_PDï¼Œè¿™é‡Œè¦è¯´æ˜çš„æ˜¯SLEEPCMD.OSC_PDä¸º0æ—¶ä¼šå¼€å¯æ‰€æœ‰æŒ¯è¡å™¨ç”µæºï¼Œèƒ½ä¿è¯32MHzæ™¶æŒ¯å’Œ16MHz RCæŒ¯è¡å™¨éƒ½èƒ½èµ·æŒ¯ï¼Œé€šè¿‡æ£€æŸ¥SLEEPSTA.XOSC_STBæ¥ç¡®å®š32MHzæ™¶æŒ¯æ˜¯å¦èµ·æŒ¯ã€‚</p>

<p>é‚£ä¹ˆå¯ä»¥æŒ‰ç…§ä»¥ä¸‹ä»£ç å®ç°ç³»ç»Ÿæ—¶é’Ÿçš„åˆå§‹åŒ–ï¼Œæ ¹æ®æ³¨é‡Šç†è§£è¿‡ç¨‹å³å¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">oscInit</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">SLEEPCMD</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0x04</span><span class="p">;</span>                      <span class="c1">// å¯åŠ¨æ‰€æœ‰æ™¶æŒ¯ï¼ŒSLEEPCMD.OSC_PDè®¾ä¸º0
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">SLEEPSTA</span> <span class="o">&amp;</span> <span class="mh">0x40</span><span class="p">));</span>             <span class="c1">// ç­‰å¾…æ™¶æŒ¯ç¨³å®šï¼Œæ£€æŸ¥SLEEPSTA.XOSC_STBï¼Œç¡®è®¤32MHzå¤–éƒ¨æ™¶æŒ¯èµ·æŒ¯
</span><span class="c1"></span>
    <span class="n">CLKCONCMD</span> <span class="o">=</span> <span class="p">(</span><span class="n">CLKCONCMD</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="o">|</span> <span class="mh">0x49</span><span class="p">;</span>  <span class="c1">// ä½¿ç”¨16Mæ™¶æŒ¯ä½œä¸ºä¸»æ—¶é’Ÿ
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">((</span><span class="n">CLKCONSTA</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x80</span><span class="p">)</span> <span class="o">!=</span> <span class="mh">0x49</span> <span class="p">);</span>   <span class="c1">// ç­‰å¾…ä¸»æ—¶é’Ÿåˆ‡æ¢åˆ°16Mæ™¶æŒ¯
</span><span class="c1"></span>
    <span class="n">CLKCONCMD</span> <span class="o">=</span> <span class="p">(</span><span class="n">CLKCONCMD</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x80</span><span class="p">)</span> <span class="p">;</span>       <span class="c1">// ä½¿ç”¨å¤–éƒ¨32Kæ™¶æŒ¯ä½œä¸ºä¼‘çœ æ—¶é’Ÿ
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="n">CLKCONSTA</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">);</span>      <span class="c1">// ç­‰å¾…ç¡çœ æ—¶é’Ÿåˆ‡æ¢åˆ°å¤–éƒ¨32Kæ™¶æŒ¯
</span><span class="c1"></span>
    <span class="n">CLKCONCMD</span> <span class="o">=</span> <span class="p">(</span><span class="n">CLKCONCMD</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="p">;</span>        <span class="c1">// ä½¿ç”¨32Mæ™¶æŒ¯ä½œä¸ºä¸»æ—¶é’Ÿ
</span><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="n">CLKCONSTA</span> <span class="o">&amp;</span> <span class="o">~</span><span class="mh">0x80</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">);</span>     <span class="c1">// ç­‰å¾…ä¸»æ—¶é’Ÿåˆ‡æ¢åˆ°32Mæ™¶æŒ¯
</span><span class="c1"></span>
    <span class="n">SLEEPCMD</span> <span class="o">|=</span> <span class="mh">0x04</span><span class="p">;</span>                       <span class="c1">// å…³é—­æœªä½¿ç”¨çš„æ™¶æŒ¯
</span><span class="c1"></span><span class="p">}</span></code></pre></div>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”é‡åˆ°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•è®°å½•</title>
			<link>https://www.smslit.top/2015/10/30/problem-BLE/</link>
			<pubDate>Fri, 30 Oct 2015 10:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/30/problem-BLE/</guid>
			<description>&lt;p&gt;åœ¨è¿›è¡ŒBLEå¼€å‘çš„å­¦ä¹ ä¸­æ€»ä¼šé‡åˆ°ä¸€äº›æ£˜æ‰‹çš„é—®é¢˜ï¼Œå¼€æ­¤æ–‡å°±æ˜¯ä¸ºäº†è®°å½•åœ¨è¿›è¡ŒCC2541å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³çš„æ–¹æ³•ï¼Œåº”è¯¥ä¼šæŒç»­æ›´æ–°ã€‚ã€‚ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨è¿›è¡ŒBLEå¼€å‘çš„å­¦ä¹ ä¸­æ€»ä¼šé‡åˆ°ä¸€äº›æ£˜æ‰‹çš„é—®é¢˜ï¼Œå¼€æ­¤æ–‡å°±æ˜¯ä¸ºäº†è®°å½•åœ¨è¿›è¡ŒCC2541å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³çš„æ–¹æ³•ï¼Œåº”è¯¥ä¼šæŒç»­æ›´æ–°ã€‚ã€‚ã€‚</p>

<h2 id="æ›´æ–°æƒ…å†µ">æ›´æ–°æƒ…å†µ</h2>

<ul>
<li>2015-11-05 18:00:00 æ·»åŠ é—®é¢˜2</li>
<li>2015-10-30 10:00:00 æ·»åŠ é—®é¢˜1</li>
</ul>

<h2 id="é—®é¢˜1">é—®é¢˜1</h2>

<p>å‡ºç°ä»¥ä¸‹ç¼–è¯‘é“¾æ¥é”™è¯¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Error<span class="o">[</span>e133<span class="o">]</span>: The output format intel-extended cannot handle multiple address spaces. Use format variants <span class="o">(</span>-y -O<span class="o">)</span> to specify which address space is wanted
Error <span class="k">while</span> running Linker</code></pre></div>
<h3 id="è§£å†³æ–¹æ³•"><strong>è§£å†³æ–¹æ³•ï¼š</strong></h3>

<p>ç½‘ä¸Šè¯´å‡ºç°æ­¤é—®é¢˜çš„åŸå› æ˜¯IARä¸­EEPROMä½¿ç”¨è®¾ç½®çš„é—®é¢˜ï¼Œè°ƒæ•´ç¼–è¯‘é“¾æ¥è®¾ç½®å¯ä»¥è§£å†³ï¼Œä½†ä¸é€‚ç”¨äºæˆ‘å‡ºç°æ­¤é—®é¢˜çš„è§£å†³ï¼Œåˆ†æå‡ºç°æ­¤é“¾æ¥é”™è¯¯åŸå› å¯èƒ½æœ‰å¥½å¤šï¼Œç›®å‰ç»è¿‡æŸ¥æ‰¾æ‰¾åˆ°äº†åŸå› ï¼šåœ¨è°ƒç”¨å‡½æ•°ä¼ é€’floatç±»å‹çš„æ•°æ®çš„æ—¶å€™ï¼Œä¸èƒ½ç›´æ¥å†™æµ®ç‚¹æ•°ï¼Œç±»ä¼¼è¿™æ ·</p>

<p><code>printFloat(1.02);</code></p>

<p>å¿…é¡»ä¼ é€’ä¸€ä¸ªå˜é‡ï¼Œä¾‹å¦‚</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">float</span> <span class="n">test</span> <span class="o">=</span> <span class="mf">1.02</span><span class="p">;</span>
<span class="n">printFloat</span><span class="p">(</span><span class="n">test</span><span class="p">);</span></code></pre></div>
<p>æ‰¾åˆ°äº†æ ¹æœ¬ä¸€ç‚¹çš„è§£å†³æ–¹æ³•ï¼Œå³å‡»å·¥ç¨‹ï¼Œé€‰æ‹©<code>Options</code>-&gt;<code>Linker</code>ï¼Œåœ¨<code>Config</code>æ ‡ç­¾é¡µä¸‹æ‰¾åˆ°<code>Linker configuration file</code>ï¼Œå‹¾é€‰<code>Override default</code>ï¼Œé€‰æ‹©å®‰è£…çš„TIè“ç‰™åè®®æ ˆå·¥ç¨‹ä¾‹ç¨‹é‡Œcommonæ–‡ä»¶å¤¹ä¸‹çš„<code>ti_51ew_cc2540b.xcl</code>ï¼Œokï¼Œç¼–è¯‘é“¾æ¥å°±å¯ä»¥é€šè¿‡äº†ã€‚</p>

<h2 id="é—®é¢˜2">é—®é¢˜2</h2>

<p>å‡ºç°ç¼–è¯‘è¿æ¥é”™è¯¯ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Error<span class="o">[</span>e104<span class="o">]</span>: Failed to fit all segments into specified ranges. Problem discovered in segment XDATA_N. Unable to  
place <span class="m">2</span> block<span class="o">(</span>s<span class="o">)</span> <span class="o">(</span>0xbba byte<span class="o">(</span>s<span class="o">)</span> total<span class="o">)</span> in 0x664 byte<span class="o">(</span>s<span class="o">)</span> of memory. The problem occurred <span class="k">while</span> processing the  
segment placement <span class="nb">command</span> <span class="s2">&#34;-P(XDATA)XDATA_N=_XDATA_START-_XDATA_END&#34;</span>, where at the moment of placement the  
available memory ranges were <span class="s2">&#34;XDATA:189c-1eff&#34;</span>
Error <span class="k">while</span> running Linker</code></pre></div>
<h3 id="è§£å†³æ–¹æ³•-1"><strong>è§£å†³æ–¹æ³•ï¼š</strong></h3>

<p>å³å‡»å·¥ç¨‹ï¼Œé€‰æ‹©<code>Options</code>-&gt;<code>C/C++ Compiler</code>ï¼Œåœ¨<code>Preprocessor</code>æ ‡ç­¾é¡µä¸‹æ‰¾åˆ°<code>Define symbols:(one per line)</code>ï¼Œæ›´æ”¹å…¶ä¸­çš„<code>INT_HEAP_LEN</code>çš„å€¼ï¼Œé»˜è®¤å€¼æ˜¯3000ï¼Œæ”¹åˆ°ä¸€ä¸ªå°ä¸€ç‚¹çš„å€¼ï¼Œç‚¹å‡»OKï¼Œé‡æ–°ç¼–è¯‘ï¼Œç›´åˆ°æˆåŠŸï¼Œæˆ‘çš„æ”¹åˆ°äº†1500ï¼Œå°±å¯ä»¥è§£å†³äº†ã€‚</p>

<h3 id="å‚è€ƒ">å‚è€ƒï¼š</h3>

<ul>
<li><a href="http://e2e.ti.com/support/wireless_connectivity/f/538/t/95098" target="_blank">CC2540 flash memory size</a></li>
<li><a href="http://www.xuebuyuan.com/2053073.html" target="_blank">è§£å†³CC2540 XDATAå†…å­˜ä¸è¶³</a></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Jekyllåšæ–‡å†…é“¾å’Œè¿”å›é¡¶éƒ¨æŒ‰é’®</title>
			<link>https://www.smslit.top/2015/10/28/backToTop-Jekyll/</link>
			<pubDate>Wed, 28 Oct 2015 12:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/28/backToTop-Jekyll/</guid>
			<description>&lt;p&gt;æœ‰äº›æ—¶å€™ï¼Œå†™çš„æ–‡ç« ä¼šå¾ˆé•¿ï¼Œåœ¨å¼€å§‹çœ‹çš„æ—¶å€™ï¼Œæœ‰ç›®å½•ä¼šå¾ˆæ–¹ä¾¿ï¼Œèƒ½å³åˆ»è·³åˆ°éœ€è¦é˜…è¯»çš„åœ°æ–¹ï¼Œä¸ºäº†æ›´æ–¹ä¾¿å›åˆ°é¡¶éƒ¨ç›®å½•çš„åœ°æ–¹ï¼Œè¿˜å¾—éœ€è¦æ·»åŠ è¿”å›é¡¶éƒ¨çš„æŒ‰é’®ï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹Jekyllåšæ–‡ç”¨markdownä¹¦å†™æ—¶ä¸ºæ–‡ç« æ·»åŠ é”šç‚¹å’Œè¿”å›é¡¶éƒ¨æŒ‰é’®ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ‰äº›æ—¶å€™ï¼Œå†™çš„æ–‡ç« ä¼šå¾ˆé•¿ï¼Œåœ¨å¼€å§‹çœ‹çš„æ—¶å€™ï¼Œæœ‰ç›®å½•ä¼šå¾ˆæ–¹ä¾¿ï¼Œèƒ½å³åˆ»è·³åˆ°éœ€è¦é˜…è¯»çš„åœ°æ–¹ï¼Œä¸ºäº†æ›´æ–¹ä¾¿å›åˆ°é¡¶éƒ¨ç›®å½•çš„åœ°æ–¹ï¼Œè¿˜å¾—éœ€è¦æ·»åŠ è¿”å›é¡¶éƒ¨çš„æŒ‰é’®ï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹Jekyllåšæ–‡ç”¨markdownä¹¦å†™æ—¶ä¸ºæ–‡ç« æ·»åŠ é”šç‚¹å’Œè¿”å›é¡¶éƒ¨æŒ‰é’®ã€‚</p>

<h3 id="æ·»åŠ ç›®å½•é”šç‚¹">æ·»åŠ ç›®å½•é”šç‚¹</h3>

<p>å…¶å®è¯´èµ·æ¥å°±æ˜¯æ·»åŠ ä¸€ä¸ªå†…éƒ¨é“¾æ¥ï¼Œèƒ½ä½¿ç‚¹ä¸€ä¸‹ç›®å½•ç«‹é©¬è·³åˆ°å†…å®¹é“¾æ¥å¤„ï¼Œåˆ†ä¸¤æ­¥ï¼š</p>

<h4 id="æ·»åŠ ç›®å½•">æ·»åŠ ç›®å½•</h4>

<p>é¦–å…ˆï¼Œå¾—æ·»åŠ ä¸€ä¸ªæ¸…æ™°é†’ç›®çš„ç›®å½•ï¼Œæ·»åŠ ç›®å½•æ—¶åªéœ€æŒ‰ç…§markdownæ·»åŠ è¶…é“¾æ¥çš„æ–¹å¼ï¼Œä¸ºæ¯ä¸€ä¸ªç›®å½•ç‚¹æ·»åŠ é”šç‚¹é“¾æ¥ï¼Œä¸åŒäºä¸€èˆ¬è¶…é“¾æ¥çš„æ˜¯ï¼Œé“¾æ¥ä»¥ã€#ã€å¼€å¤´ï¼Œç´§æ¥ç€ã€é”šç‚¹åã€ï¼Œå¦‚ä»¥ä¸‹ä¾‹å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown"><span class="k">1.</span> [<span class="nt">è®¿é—®æ¨¡å¼</span>](<span class="na">#no1</span>)
<span class="k">2.</span> [<span class="nt">æ—¶é’Ÿç›¸å…³</span>](<span class="na">#no2</span>)
   <span class="k">*</span> [<span class="nt">æ—¶é’Ÿæ§åˆ¶å‘½ä»¤</span>](<span class="na">#no2-1</span>)
   <span class="k">*</span> [<span class="nt">æ—¶é’Ÿæ§åˆ¶çŠ¶æ€</span>](<span class="na">#no2-2</span>)
   <span class="k">*</span> [<span class="nt">ç¡çœ æ§åˆ¶å‘½ä»¤</span>](<span class="na">#no2-3</span>)
   <span class="k">*</span> [<span class="nt">ç¡çœ æ§åˆ¶çŠ¶æ€</span>](<span class="na">#no2-4</span>)
<span class="k">3.</span> [<span class="nt">ç«¯å£å¯„å­˜å™¨</span>](<span class="na">#no3</span>)
<span class="k">4.</span> [<span class="nt">æ–¹å‘å¯„å­˜å™¨</span>](<span class="na">#no4</span>)
<span class="k">5.</span> [<span class="nt">å¤–è®¾æ§åˆ¶</span>](<span class="na">#no5</span>)
<span class="k">6.</span> [<span class="nt">ADCè¾“å…¥é…ç½®</span>](<span class="na">#no6</span>)
<span class="k">7.</span> [<span class="nt">åŠŸèƒ½é€‰æ‹©</span>](<span class="na">#no7</span>)
<span class="k">8.</span> [<span class="nt">è¾“å…¥æ¨¡å¼</span>](<span class="na">#no8</span>)
<span class="k">9.</span> [<span class="nt">ä¸­æ–­çŠ¶æ€æ ‡å¿—</span>](<span class="na">#no9</span>)
<span class="k">10.</span> [<span class="nt">ä¸­æ–­æ§åˆ¶</span>](<span class="na">#no10</span>)
<span class="k">11.</span> [<span class="nt">ä¸­æ–­å±è”½</span>](<span class="na">#no11</span>)
<span class="k">12.</span> [<span class="nt">ä¸²å£åŠSPIç›¸å…³</span>](<span class="na">#no12</span>)
    <span class="k">*</span> [<span class="nt">USART0çš„æ§åˆ¶å’ŒçŠ¶æ€</span>](<span class="na">#no12-1</span>)
    <span class="k">*</span> [<span class="nt">UARTçš„æ§åˆ¶</span>](<span class="na">#no12-2</span>)
    <span class="k">*</span> [<span class="nt">USART0çš„é€šç”¨æ§åˆ¶</span>](<span class="na">#no12-3</span>)
    <span class="k">*</span> [<span class="nt">USART0çš„æ•°æ®ç¼“å­˜</span>](<span class="na">#no12-4</span>)
    * [<span class="nt">USART0æ³¢ç‰¹ç‡</span>](<span class="na">#no12-5</span>) </code></pre></div>
<h4 id="æ·»åŠ é”šç‚¹">æ·»åŠ é”šç‚¹</h4>

<p>ç´§æ¥ç€åœ¨ç›®å½•æ‰€å¯¹åº”å†…å®¹å¤„æ·»åŠ é”šç‚¹ï¼Œå¦‚ä¸‹ï¼š</p>

<p><strong>æ³¨æ„ï¼šæ·»åŠ é”šç‚¹è¦æ·»åŠ åˆ°å†…å®¹æ ‡é¢˜çš„å‰ä¸€è¡Œï¼Œè¿™æ ·èƒ½ä¿è¯è·³è½¬æ—¶èƒ½ä»¥æ ‡é¢˜é¡¶å¤´ï¼Œä¸»è¦æ˜¯æˆ‘ä¹‹å‰æ€»æ˜¯ä¸å†…å®¹å¤„çš„ç›®å½•æ ‡é¢˜åŒè¡Œï¼Œå¯¼è‡´è·³è½¬åè·³åˆ°äº†ç›®å½•ä¸‹ä¸€è¡Œï¼Œå°±çœ‹ä¸åˆ°ç›®å½•å¯¹åº”å†…å®¹çš„æ ‡é¢˜äº†ã€‚</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">&lt;a name=&#34;no1&#34;/&gt;

<span class="gu">#### è®¿é—®æ¨¡å¼
</span><span class="gu"></span>
...

...

...

&lt;a name=&#34;no12&#34;/&gt;

<span class="gu">#### 12. ä¸²å£åŠSPIç›¸å…³
</span><span class="gu"></span>
&lt;a name=&#34;no12-1&#34;/&gt;

<span class="gu">##### 12.1. USART0çš„æ§åˆ¶å’ŒçŠ¶æ€ï¼ˆU0CSRï¼Œ0x86ï¼‰
</span><span class="gu"></span>
...


&lt;a name=&#34;no12-5&#34;/&gt;

<span class="gu">##### 12.5. USART0æ³¢ç‰¹ç‡ï¼ˆU0BAUDï¼Œ0xC2ï¼‰
</span><span class="gu"></span>
...</code></pre></div>
<h4 id="1-3-æ•ˆæœå±•ç¤º">1.3 æ•ˆæœå±•ç¤º</h4>

<p>æ•ˆæœå°±åƒæ˜¯ä¸‹é¢å±•ç¤ºçš„ä¸€æ ·ï¼Œç‚¹å‡»ç›®å½•å³è·³è½¬åˆ°å¯¹åº”å†…å®¹å¤„ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/v9ekx.gif" alt="1" /></p>

<h3 id="æ·»åŠ è¿”å›é¡¶éƒ¨æŒ‰é’®">æ·»åŠ è¿”å›é¡¶éƒ¨æŒ‰é’®</h3>

<p>åªéœ€ä¸¤æ­¥å°±å¯ä»¥åœ¨é¡µé¢æ·»åŠ ä¸€ä¸ªå›ºå®šçš„è¿”å›é¡¶éƒ¨æŒ‰é’®ï¼Œè¿™é‡Œæ²¡æœ‰åŠ JSä»£ç ï¼Œæ²¡ä»€ä¹ˆæ¼‚äº®çš„æ•ˆæœï¼Œåªæ˜¯åŠŸèƒ½çš„å®ç°ã€‚</p>

<h4 id="æ·»åŠ è¿”å›æŒ‰é’®å—">æ·»åŠ è¿”å›æŒ‰é’®å—</h4>

<p>å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°åšæ–‡é‡‡ç”¨çš„å¸ƒå±€htmlæ–‡ä»¶çš„æœ€åï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯post.htmlã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;backtop&#34;</span><span class="p">&gt;</span>
   <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;#&#34;</span><span class="p">&gt;</span>TOP<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span> </code></pre></div>
<h4 id="æ·»åŠ æŒ‰é’®çš„cssæ ·å¼">æ·»åŠ æŒ‰é’®çš„cssæ ·å¼</h4>

<p>è¿™é‡Œæˆ‘æŠŠæˆ‘çš„cssæ ·å¼ç²˜ä¸Šï¼Œå¯ä»¥æŒ‰ç…§è‡ªå·±å–œæ¬¢ä¿®æ”¹æ ·å¼å³å¯ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">#</span><span class="nn">backtop</span> <span class="nt">a</span> <span class="p">{</span> <span class="c">/* back to top button */</span>
    <span class="k">text-align</span><span class="p">:</span> <span class="kc">center</span><span class="p">;</span>
    <span class="k">line-height</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mi">16</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span><span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">height</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">position</span><span class="p">:</span> <span class="kc">fixed</span><span class="p">;</span>
    <span class="k">bottom</span><span class="p">:</span> <span class="mi">10</span><span class="kt">px</span><span class="p">;</span> <span class="c">/* å°æŒ‰é’®åˆ°æµè§ˆå™¨åº•è¾¹çš„è·ç¦» */</span>
    <span class="k">right</span><span class="p">:</span> <span class="mi">60</span><span class="kt">px</span><span class="p">;</span> <span class="c">/* å°æŒ‰é’®åˆ°æµè§ˆå™¨å³è¾¹æ¡†çš„è·ç¦» */</span>
    <span class="k">color</span><span class="p">:</span> <span class="nb">rgb</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">192</span><span class="p">);</span> <span class="c">/* å°æŒ‰é’®ä¸­æ–‡å­—çš„é¢œè‰² */</span>
    <span class="k">z-index</span><span class="p">:</span> <span class="mi">1000</span><span class="p">;</span>
    <span class="k">background</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span> <span class="c">/* å°æŒ‰é’®åº•è‰² */</span>
    <span class="k">padding</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span> <span class="c">/* å°æŒ‰é’®ä¸­æ–‡å­—åˆ°æŒ‰é’®è¾¹ç¼˜çš„è·ç¦» */</span>
    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span> <span class="c">/* å°æŒ‰é’®åœ†è§’çš„å¼¯æ›²ç¨‹åº¦ï¼ˆåŠå¾„ï¼‰*/</span>
    <span class="kp">-moz-</span><span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
    <span class="kp">-webkit-</span><span class="k">border-radius</span><span class="p">:</span> <span class="mi">50</span><span class="kt">px</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span> <span class="c">/* å°æŒ‰é’®ä¸­æ–‡å­—çš„ç²—ç»† */</span>
    <span class="k">text-decoration</span><span class="p">:</span> <span class="kc">none</span> <span class="cp">!important</span><span class="p">;</span>
    <span class="k">box-shadow</span><span class="p">:</span><span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">2</span><span class="kt">px</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">.15</span><span class="p">),</span> <span class="mi">0</span> <span class="mi">1</span><span class="kt">px</span> <span class="mi">0</span> <span class="mh">#ffffff</span> <span class="kc">inset</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">#</span><span class="nn">backtop</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span> <span class="c">/* å°æŒ‰é’®ä¸Šæœ‰é¼ æ ‡æ‚¬åœæ—¶ */</span>
    <span class="k">background</span><span class="p">:</span> <span class="nb">rgba</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">192</span><span class="p">,</span><span class="mf">0.8</span><span class="p">);</span> <span class="c">/* å°æŒ‰é’®çš„åº•è‰² */</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span> <span class="c">/* æ–‡å­—é¢œè‰² */</span>
<span class="p">}</span></code></pre></div>
<h4 id="å±•ç¤ºæ•ˆæœ">å±•ç¤ºæ•ˆæœ</h4>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/lnxf0.gif" alt="2" /></p>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”CC2541å¯„å­˜å™¨æ•´ç†</title>
			<link>https://www.smslit.top/2015/10/27/BaseRegiser-BLE/</link>
			<pubDate>Tue, 27 Oct 2015 14:00:00 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/27/BaseRegiser-BLE/</guid>
			<description>&lt;p&gt;CC2541æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª8051å†…æ ¸çš„å•ç‰‡æœºï¼Œå¯¹å…¶ç¼–ç¨‹å¿…é¡»äº†è§£å…¶å¯„å­˜å™¨ï¼Œæœ¬æ–‡æ•´ç†äº†å¸¸ç”¨çš„å¯„å­˜å™¨ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>CC2541æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª8051å†…æ ¸çš„å•ç‰‡æœºï¼Œå¯¹å…¶ç¼–ç¨‹å¿…é¡»äº†è§£å…¶å¯„å­˜å™¨ï¼Œæœ¬æ–‡æ•´ç†äº†å¸¸ç”¨çš„å¯„å­˜å™¨ã€‚</p>

<h4 id="è®¿é—®æ¨¡å¼">è®¿é—®æ¨¡å¼</h4>

<table>
<thead>
<tr>
<th align="center">ç¬¦å·</th>
<th align="center">è®¿é—®æ¨¡å¼</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">R/W</td>
<td align="center">å¯è¯»å†™</td>
</tr>

<tr>
<td align="center">R</td>
<td align="center">åªè¯»</td>
</tr>

<tr>
<td align="center">R0</td>
<td align="center">è¯»0</td>
</tr>

<tr>
<td align="center">R1</td>
<td align="center">è¯»1</td>
</tr>

<tr>
<td align="center">W</td>
<td align="center">åªå†™</td>
</tr>

<tr>
<td align="center">W0</td>
<td align="center">å†™0</td>
</tr>

<tr>
<td align="center">W1</td>
<td align="center">å†™1</td>
</tr>

<tr>
<td align="center">H0</td>
<td align="center">ç¡¬ä»¶æ¸…é™¤</td>
</tr>

<tr>
<td align="center">H1</td>
<td align="center">ç¡¬ä»¶è®¾ç½®</td>
</tr>
</tbody>
</table>

<h4 id="æ—¶é’Ÿç›¸å…³">æ—¶é’Ÿç›¸å…³</h4>

<h5 id="æ—¶é’Ÿæ§åˆ¶å‘½ä»¤-clkconcmd-0xc6">æ—¶é’Ÿæ§åˆ¶å‘½ä»¤ï¼ˆCLKCONCMDï¼Œ0xC6ï¼‰</h5>

<table>
<thead>
   <tr>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>   
   <tr>
      <td>7</td>
      <td>OSC32K</td>
      <td>1</td>
      <td>R/W</td>
      <td>32kHzæ—¶é’ŸæŒ¯è¡å™¨é€‰æ‹©ã€‚è®¾ç½®è¯¥ä½åªèƒ½å‘èµ·ä¸€ä¸ªæ—¶é’Ÿæºæ”¹å˜ã€‚CLKCONSTA.OSC32K åæ˜ å½“å‰çš„è®¾ç½®ã€‚å½“è¦æ”¹å˜è¯¥ä½å¿…é¡»é€‰æ‹©16MHz RCOSCä½œä¸ºç³»ç»Ÿæ—¶é’Ÿã€‚0:32 kHz XOSC;1:32 kHz RCOSC;</td>
   </tr>
   <tr>
      <td>6</td>
      <td>OSC</td>
      <td>1</td>
      <td>R/W</td>
      <td>ç³»ç»Ÿæ—¶é’Ÿ æºé€‰æ‹© ã€‚è®¾ç½®è¯¥ä½åªèƒ½å‘èµ·ä¸€ä¸ªæ—¶é’Ÿæºæ”¹å˜ã€‚CLKCONSTA.OSC åæ˜ å½“å‰çš„è®¾ç½®ã€‚0:32 MHz XOSC;1:16 MHz RCOSC;</td>
   </tr>
   <tr>
      <td>5:3</td>
      <td>TICKSPD[2:0]</td>
      <td>001</td>
      <td>R/W</td>
      <td>å®šæ—¶å™¨æ ‡è®°è¾“å‡ºè®¾ç½®ã€‚ä¸èƒ½é«˜äºé€šè¿‡ OSC ä½è®¾ç½®çš„ç³»ç»Ÿæ—¶é’Ÿè®¾ç½®ã€‚000:32 MHz;001:16 MHz;010:8 MHz;011:4 MHz;100:2 MHz;101:1 MHz;110:500 kHz;111:250 kHz;æ³¨æ„ CLKCONCMD.TICKSPD å¯ä»¥è®¾ç½®ä¸ºä»»æ„å€¼ï¼Œä½†æ˜¯ç»“æœå—CLKCONCMD.OSC è®¾ç½®çš„é™åˆ¶ï¼Œå³å¦‚æœ CLKCONCMD.OSC=1ä¸” CLKCONCMD.TICKSPD=000ï¼ŒCLKCONCMD.TICKSPD è¯»å‡º001 ä¸”å®é™… TICKSPD æ˜¯ 16 MHzã€‚</td>
   </tr>
   <tr>
      <td>2:0</td>
      <td>CLKSPD</td>
      <td>001</td>
      <td>R/W</td>
      <td>æ—¶é’Ÿé€Ÿåº¦ã€‚ä¸èƒ½é«˜äºé€šè¿‡ OSC ä½è®¾ç½®çš„ç³»ç»Ÿæ—¶é’Ÿè®¾ç½® ã€‚ è¡¨ç¤ºå½“å‰ç³»ç»Ÿæ—¶é’Ÿé¢‘ç‡ã€‚000:32MHz;001:16MHz;010:8MHz;011:4MHz;100:2MHz;101:1MHz;110:500 kHz;111:250 kHz;æ³¨æ„CLKCONCMD.CLKSPDå¯ä»¥è®¾ç½®ä¸ºä»»æ„å€¼ï¼Œä½†æ˜¯ç»“æœå—CLKCONCMD.OSCè®¾ç½®çš„é™åˆ¶ï¼Œå³å¦‚æœCLKCONCMD.OSC=1ä¸”CLKCONCMD.CLKSPD=000 ï¼Œ CLKCONCMD.CLKSPDè¯»å‡º001ä¸”å®é™…CLKSPDæ˜¯16MHzã€‚è¿˜è¦æ³¨æ„è°ƒè¯•å™¨ä¸èƒ½å’Œä¸€ä¸ªåˆ’åˆ†è¿‡çš„ç³»ç»Ÿæ—¶é’Ÿä¸€èµ·å·¥ä½œã€‚å½“è¿è¡Œè°ƒè¯•å™¨ï¼Œå½“CLKCONCMD.OSC=0ï¼ŒCLKCONCMD.CLKSPDçš„å€¼å¿…é¡»è®¾ç½®ä¸º000ï¼Œæˆ–å½“CLKCONCMD.OSC=1è®¾ç½®ä¸º001ã€‚</td>
   </tr>
</table>

<h5 id="æ—¶é’Ÿæ§åˆ¶çŠ¶æ€-clkconsta-0x9e">æ—¶é’Ÿæ§åˆ¶çŠ¶æ€ï¼ˆCLKCONSTAï¼Œ0x9Eï¼‰</h5>

<table>
<thead>
   <tr>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>  
   <tr>
      <td>7</td>
      <td>OSC32K</td>
      <td>1</td>
      <td>R</td>
      <td>å½“å‰é€‰æ‹©çš„ 32 kHz æ—¶é’Ÿæºã€‚0:32kHz XOSC;1:32kHz RCOSC;</td>
   </tr>
   <tr>
      <td>6</td>
      <td>OSC </td>
      <td>1</td>
      <td>R</td>
      <td>å½“å‰é€‰æ‹©çš„ç³»ç»Ÿæ—¶é’Ÿã€‚0:32MHz XOSC;1:16MHz RCOSC</td>
   </tr>
   <tr>
      <td>5:3</td>
      <td>TICKSPD[2:0]</td>
      <td>001</td>
      <td>R</td>
      <td>å½“å‰è®¾ç½®çš„å®šæ—¶å™¨æ ‡è®°è¾“å‡ºã€‚000:32MHz;001:16MHz;010:8MHz;011:4MHz;100:2MHz;101:1MHz;110:500kHz;111:250 kHz;</td>
   </tr>
   <tr>
      <td>2:0</td>
      <td>CLKSPD</td>
      <td>001</td>
      <td>R</td>
      <td>å½“å‰æ—¶é’Ÿé€Ÿåº¦ã€‚000:32MHz;001:16MHz;010:8MHz;011:4MHz;100:2MHz;101:1MHz;110:500kHz;111:250 kHz;</td>
   </tr>
</table>

<h5 id="ç¡çœ æ¨¡å¼æ§åˆ¶å‘½ä»¤-sleepcmd-0xbe">ç¡çœ æ¨¡å¼æ§åˆ¶å‘½ä»¤ï¼ˆSLEEPCMDï¼Œ0xBEï¼‰</h5>

<table>
<thead>
<tr>
<th align="center">Bitä½</th>
<th align="center">åç§°</th>
<th align="center">åˆå§‹åŒ–</th>
<th align="center">è¯»å†™</th>
<th>æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">7</td>
<td align="center">OSC32K_CALDIS</td>
<td align="center">0</td>
<td align="center">R/W</td>
<td>ç¦ç”¨32-kHz RCæŒ¯è¡å™¨. 0: ä½¿èƒ½32-kHz RCæŒ¯è¡å™¨. 1: ç¦ç”¨32-kHz RCæŒ¯è¡å™¨.åœ¨ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è®¾ç½®æ­¤bitä½ï¼Œä½†åœ¨ç‰‡ä¸Š16-MHzé«˜é€ŸRCæŒ¯è¡å™¨èµ·æŒ¯å‰è®¾ç½®ä¸ä¼šæœ‰ä½œç”¨ã€‚</td>
</tr>

<tr>
<td align="center">6:3</td>
<td align="center">-</td>
<td align="center">000 0</td>
<td align="center">R0</td>
<td>ä¿ç•™</td>
</tr>

<tr>
<td align="center">2</td>
<td align="center">OSC_PD</td>
<td align="center">1</td>
<td align="center">R/W</td>
<td>è®¾ç½®æ™¶æŒ¯ã€æŒ¯è¡å™¨ç”µæºã€‚1:å…³é—­æœªä½¿ç”¨æŒ¯è¡å™¨å’Œæ™¶æŒ¯çš„ç”µæº  0:å¼€å¯æ‰€æœ‰æŒ¯è¡å™¨å’Œæ™¶æŒ¯çš„ç”µæºã€‚</td>
</tr>

<tr>
<td align="center">1:0</td>
<td align="center">MODE[1:0]</td>
<td align="center">00</td>
<td align="center">R/W</td>
<td>ç”µæºæ¨¡å¼   00: æ´»åŠ¨å’Œç©ºé—²æ¨¡å¼ 01:ç”µæºæ¨¡å¼1(PM1) 10: ç”µæºæ¨¡å¼2(PM2) 11:ç”µæºæ¨¡å¼3(PM3)</td>
</tr>
</tbody>
</table>

<h5 id="ç¡çœ æ¨¡å¼çŠ¶æ€-sleepsta-0x9d">ç¡çœ æ¨¡å¼çŠ¶æ€ï¼ˆSLEEPSTAï¼Œ0x9Dï¼‰</h5>

<table>
<thead>
<tr>
<th align="center">Bitä½</th>
<th align="center">åç§°</th>
<th align="center">åˆå§‹åŒ–</th>
<th align="center">è¯»å†™</th>
<th>æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">7</td>
<td align="center">OSC32K_CALDIS</td>
<td align="center">0</td>
<td align="center">R</td>
<td>ç¦ç”¨32-kHz RCæŒ¯è¡å™¨. 0: ä½¿èƒ½32-kHz RCæŒ¯è¡å™¨. 1: ç¦ç”¨32-kHz RCæŒ¯è¡å™¨.åœ¨ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è®¾ç½®æ­¤bitä½ï¼Œä½†åœ¨ç‰‡ä¸Š16-MHzé«˜é€ŸRCæŒ¯è¡å™¨èµ·æŒ¯å‰è®¾ç½®ä¸ä¼šæœ‰ä½œç”¨ã€‚</td>
</tr>

<tr>
<td align="center">6:5</td>
<td align="center">-</td>
<td align="center">00</td>
<td align="center">R</td>
<td>ä¿ç•™</td>
</tr>

<tr>
<td align="center">4:3</td>
<td align="center">RST[1:0]</td>
<td align="center">00</td>
<td align="center">R</td>
<td>è®°å½•æœ€ç»ˆå¤ä½ä¿¡å·æºã€‚æœ‰å¤šç§å¤ä½ï¼Œå¯„å­˜å™¨åªä¿ç•™æœ€åäº‹ä»¶ï¼Œ00:ä¸Šç”µå¤ä½å’Œæ‰ç”µæ£€æµ‹  01:å¤–éƒ¨å¤ä½ä¿¡å·  10:çœ‹é—¨ç‹—æ—¶é’Ÿå¤ä½ 11:æ—¶é’Ÿä¸¢å¤±å¤ä½ã€‚</td>
</tr>

<tr>
<td align="center">2</td>
<td align="center">OSC_PD</td>
<td align="center">1</td>
<td align="center">R</td>
<td>1:å…³é—­æœªä½¿ç”¨æŒ¯è¡å™¨å’Œæ™¶æŒ¯çš„ç”µæº  0:å¼€å¯æ‰€æœ‰æŒ¯è¡å™¨å’Œæ™¶æŒ¯çš„ç”µæºã€‚</td>
</tr>

<tr>
<td align="center">1</td>
<td align="center">-</td>
<td align="center">0</td>
<td align="center">R</td>
<td>ä¿ç•™.</td>
</tr>

<tr>
<td align="center">0</td>
<td align="center">CLK32K</td>
<td align="center">0</td>
<td align="center">R</td>
<td>32kHzæ—¶é’Ÿä¿¡å·ï¼Œä¸ç³»ç»Ÿæ—¶é’ŸåŒæ­¥ã€‚</td>
</tr>
</tbody>
</table>

<h4 id="ioå¯„å­˜å™¨">IOå¯„å­˜å™¨</h4>

<h5 id="ç«¯å£å¯„å­˜å™¨-p0-p1-p2">ç«¯å£å¯„å­˜å™¨ï¼ˆP0ï¼ŒP1ï¼ŒP2ï¼‰</h5>

<table>
<thead>
<tr>
<th align="center">ç«¯å£</th>
<th align="center">Bitä½</th>
<th align="center">åç§°</th>
<th align="center">åˆå§‹åŒ–</th>
<th align="center">è¯»å†™</th>
<th>æè¿°</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">P0</td>
<td align="center">7:0</td>
<td align="center">P0[7:0]</td>
<td align="center">0XFF</td>
<td align="center">R/W</td>
<td>ç«¯å£0ï¼Œé€šç”¨I/Oç«¯å£ï¼Œå¯ä»¥ä½å¯»å€ã€‚ XDATA (0x7080).</td>
</tr>

<tr>
<td align="center">P1</td>
<td align="center">7:0</td>
<td align="center">P1[7:0]</td>
<td align="center">0XFF</td>
<td align="center">R/W</td>
<td>ç«¯å£1ï¼Œé€šç”¨I/Oç«¯å£ï¼Œå¯ä»¥ä½å¯»å€ã€‚ XDATA (0x7090).</td>
</tr>

<tr>
<td align="center">P2</td>
<td align="center">7:5</td>
<td align="center"></td>
<td align="center">000</td>
<td align="center">R0</td>
<td>æœªä½¿ç”¨</td>
</tr>

<tr>
<td align="center">P2</td>
<td align="center">4:0</td>
<td align="center">P2[4:0]</td>
<td align="center">0x1F</td>
<td align="center">R/W</td>
<td>ç«¯å£2ï¼Œé€šç”¨I/Oç«¯å£ï¼Œå¯ä»¥ä½å¯»å€ã€‚ XDATA (0x70A0).</td>
</tr>
</tbody>
</table>

<h4 id="æ–¹å‘å¯„å­˜å™¨-p0dir-p1dir-p2dir">æ–¹å‘å¯„å­˜å™¨ï¼ˆP0DIRï¼ŒP1DIRï¼ŒP2DIRï¼‰</h4>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>  
   <tr>
      <td>P0DIR</td>
      <td>7:0</td>
      <td>DIRP0_[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>P0.7--P0.0çš„æ–¹å‘ï¼ˆ0ï¼šè¾“å…¥ 1ï¼šè¾“å‡º)</td>
   </tr>
   <tr>
      <td>P1DIR</td>
      <td>7:0</td>
      <td>DIRP1_[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>P1.7--P1.0çš„æ–¹å‘ï¼ˆ0ï¼šè¾“å…¥ 1ï¼šè¾“å‡º)</td>
   </tr>
   <tr>
      <td>P2DIR</td>
      <td>7:6</td>
      <td>PRIP0[1:0]</td>
      <td>00</td>
      <td>R/W</td>
      <td>ç«¯å£0å¤–è®¾ä¼˜å…ˆçº§æ§åˆ¶ï¼Œå½“PERCFGåˆ†é…ç»™ä¸€äº›å¤–è®¾ç›¸åŒå¼•è„šçš„æ—¶å€™ï¼Œè¿™äº›ä½å°†ç¡®å®šä¼˜å…ˆçº§ã€‚ä¼˜å…ˆçº§ä»å‰åˆ°åå¦‚ä¸‹ï¼š00ï¼šUSART 0ï¼ŒUSART 1ï¼ŒTimer 1; 01ï¼šUSART 1ï¼ŒUSART 0ï¼ŒTimer 1; 10ï¼šTimer 1 channels 0-1ï¼ŒUSART 1ï¼ŒUSART 0ï¼ŒTimer 1 channels 2-3; 11ï¼šTimer 1 channels 2-3ï¼ŒUSART 0ï¼ŒUSART 1ï¼ŒTimer 1 channels 0-1</td>
   </tr>
   <tr>
      <td>P2DIR</td>
      <td>5</td>
      <td>---</td>
      <td>0</td>
      <td>R0</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>P2DIR</td>
      <td>4:0</td>
      <td>DIRP2_[4:0]</td>
      <td>00000</td>
      <td>R/W</td>
      <td>P2.4â€”P2.0çš„æ–¹å‘ï¼ˆ0ï¼šè¾“å…¥ 1ï¼šè¾“å‡º)</td>
   </tr>
</table>

<h5 id="å¤–è®¾æ§åˆ¶-percfg">å¤–è®¾æ§åˆ¶ï¼ˆPERCFGï¼‰</h5>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>
   
   <tr>
      <td>PERCFG</td>
      <td>7</td>
      <td>---</td>
      <td>0</td>
      <td>R0</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>PERCFG</td>
      <td>6</td>
      <td>T1CFG</td>
      <td>0</td>
      <td>R/W</td>
      <td>è®¡æ—¶å™¨1çš„I/Oä½ç½®ï¼š0ï¼šä½ç½®1; 1ï¼šä½ç½®2</td>
   </tr>
   <tr>
      <td>PERCFG</td>
      <td>5</td>
      <td>T3CFG</td>
      <td>0</td>
      <td>R/W</td>
      <td>è®¡æ—¶å™¨3çš„I/Oä½ç½®ï¼š0ï¼šä½ç½®1; 1ï¼šä½ç½®2</td>
   </tr>
   <tr>
      <td>PERCFG</td>
      <td>4</td>
      <td>T4CFG</td>
      <td>0</td>
      <td>R/W</td>
      <td>è®¡æ—¶å™¨4çš„I/Oä½ç½®ï¼š0ï¼šä½ç½®1; 1ï¼šä½ç½®2</td>
   </tr>
   <tr>
      <td>PERCFG</td>
      <td>3:2</td>
      <td>---</td>
      <td>00</td>
      <td>R/W</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>PERCFG</td>
      <td>1</td>
      <td>U1CFG</td>
      <td>0</td>
      <td>R/W</td>
      <td>USART 1çš„I/Oä½ç½®ï¼š0ï¼šä½ç½®1; 1ï¼šä½ç½®2</td>
   </tr>
   <tr>
      <td>PERCFG</td>
      <td>0</td>
      <td>U0CFG</td>
      <td>0</td>
      <td>R/W</td>
      <td>USART 0çš„I/Oä½ç½®ï¼š0ï¼šä½ç½®1; 1ï¼šä½ç½®2</td>
   </tr>
</table>

<h5 id="åŠŸèƒ½é€‰æ‹©-p0sel-p1sel-p2sel">åŠŸèƒ½é€‰æ‹©ï¼ˆP0SELï¼ŒP1SELï¼ŒP2SELï¼‰</h5>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>
   
   <tr>
      <td>P0SEL</td>
      <td>7:0</td>
      <td>SELP0_[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>P0.7--P0.0çš„åŠŸèƒ½é€‰æ‹©ï¼ˆ0ï¼šé€šç”¨I/O  1ï¼šå¤–è®¾åŠŸèƒ½ï¼‰</td>
   </tr>
   <tr>
      <td>P1SEL</td>
      <td>7:0</td>
      <td>SELP1_[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>P1.7--P1.0çš„åŠŸèƒ½é€‰æ‹©ï¼ˆ0ï¼šé€šç”¨I/O  1ï¼šå¤–è®¾åŠŸèƒ½ï¼‰</td>
   </tr>
   <tr>
      <td>P2SEL</td>
      <td>7</td>
      <td>---</td>
      <td>0</td>
      <td>R0</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>P2SEL</td>
      <td>6</td>
      <td>PRI3P1</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£1å¤–è®¾ä¼˜å…ˆçº§æ§åˆ¶ï¼Œå½“PERCFGåˆ†é…USART0å’ŒUSART1ç›¸åŒå¼•è„šçš„æ—¶å€™ï¼Œè¿™äº›ä½å°†ç¡®å®šä¼˜å…ˆçº§ã€‚0ï¼šUSART 0 ä¼˜å…ˆ; 1ï¼šUSART 1 ä¼˜å…ˆ</td>
   </tr>
   <tr>
      <td>P2SEL</td>
      <td>5</td>
      <td>PRI2P1</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£1å¤–è®¾ä¼˜å…ˆçº§æ§åˆ¶ï¼Œå½“PERCFGåˆ†é…USART1å’ŒTIMER3ç›¸åŒå¼•è„šçš„æ—¶å€™ï¼Œè¿™äº›ä½å°†ç¡®å®šä¼˜å…ˆçº§ã€‚0ï¼šUSART 1 ä¼˜å…ˆ; 1ï¼šTIMER 3 ä¼˜å…ˆ</td>
   </tr>
   <tr>
      <td>P2SEL</td>
      <td>4</td>
      <td>PRI1P1</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£1å¤–è®¾ä¼˜å…ˆçº§æ§åˆ¶ï¼Œå½“PERCFGåˆ†é…TIMER1å’ŒTIMER4ç›¸åŒå¼•è„šçš„æ—¶å€™ï¼Œè¿™äº›ä½å°†ç¡®å®šä¼˜å…ˆçº§ã€‚0ï¼šTIMER 1 ä¼˜å…ˆ; 1ï¼šTIMER 4 ä¼˜å…ˆ</td>
   </tr>
   <tr>
      <td>P2SEL</td>
      <td>3</td>
      <td>PRI0P1</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£1å¤–è®¾ä¼˜å…ˆçº§æ§åˆ¶ï¼Œå½“PERCFGåˆ†é…USART0å’ŒTIMER1ç›¸åŒå¼•è„šçš„æ—¶å€™ï¼Œè¿™äº›ä½å°†ç¡®å®šä¼˜å…ˆçº§ã€‚0ï¼šUSART 0 ä¼˜å…ˆ; 1ï¼šTIMER 1 ä¼˜å…ˆ</td>
   </tr>
   <tr>
      <td>P2SEL</td>
      <td>2:0</td>
      <td>SELP2_[2:0]</td>
      <td>000</td>
      <td>R/W</td>
      <td>P2.2--P2.0çš„åŠŸèƒ½é€‰æ‹©ï¼ˆ0ï¼šé€šç”¨I/O  1ï¼šå¤–è®¾åŠŸèƒ½ï¼‰</td>
   </tr>
</table>

<h5 id="è¾“å…¥æ¨¡å¼-p0inp-p1inp-p2inp">è¾“å…¥æ¨¡å¼ï¼ˆP0INPï¼ŒP1INPï¼ŒP2INPï¼‰</h5>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>
   
   <tr>
      <td>P0INP</td>
      <td>7:0</td>
      <td>MDP0_[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>P0.7--P0.0çš„è¾“å…¥æ¨¡å¼: 0ï¼šä¸Šæ‹‰/ä¸‹æ‹‰ï¼ˆå…·ä½“çœ‹PDUP0è®¾ç½®ï¼‰; 1ï¼šä¸‰æ€</td>
   </tr>
   <tr>
      <td>P1INP</td>
      <td>7:2</td>
      <td>MDP1_[7:2]</td>
      <td>000000</td>
      <td>R/W</td>
      <td>P1.7â€”P1.2çš„è¾“å…¥æ¨¡å¼:0ï¼šä¸Šæ‹‰/ä¸‹æ‹‰ï¼ˆå…·ä½“çœ‹PDUP1è®¾ç½®ï¼‰;1ï¼šä¸‰æ€</td>
   </tr>
   <tr>
      <td>P1INP</td>
      <td>1:0</td>
      <td>---</td>
      <td>00</td>
      <td>R0</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>P2INP</td>
      <td>7</td>
      <td>PDUP2</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£2ä¸Šæ‹‰/ä¸‹æ‹‰é€‰æ‹©ï¼Œå¯¹æ‰€æœ‰ç«¯å£2å¼•è„šè®¾ç½®ä¸ºä¸Šæ‹‰/ä¸‹æ‹‰è¾“å…¥:0ï¼šä¸Šæ‹‰;1ï¼šä¸‹æ‹‰</td>
   </tr>
   <tr>
      <td>P2INP</td>
      <td>6</td>
      <td>PDUP1</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£1ä¸Šæ‹‰/ä¸‹æ‹‰é€‰æ‹©ï¼Œå¯¹æ‰€æœ‰ç«¯å£1å¼•è„šè®¾ç½®ä¸ºä¸Šæ‹‰/ä¸‹æ‹‰è¾“å…¥:0ï¼šä¸Šæ‹‰;1ï¼šä¸‹æ‹‰</td>
   </tr>
   <tr>
      <td>P2INP</td>
      <td>5</td>
      <td>PDUP0</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£0ä¸Šæ‹‰/ä¸‹æ‹‰é€‰æ‹©ï¼Œå¯¹æ‰€æœ‰ç«¯å£0å¼•è„šè®¾ç½®ä¸ºä¸Šæ‹‰/ä¸‹æ‹‰è¾“å…¥:0ï¼šä¸Šæ‹‰;1ï¼šä¸‹æ‹‰</td>
   </tr>
   <tr>
      <td>P2INP</td>
      <td>4:0</td>
      <td>MDP2_[4:0]</td>
      <td>00000</td>
      <td>R/W</td>
      <td>P2.4â€”P2.0çš„è¾“å…¥æ¨¡å¼: 0ï¼šä¸Šæ‹‰/ä¸‹æ‹‰ï¼ˆå…·ä½“çœ‹PDUP2è®¾ç½®ï¼‰;1ï¼šä¸‰æ€</td>
   </tr>
</table>

<h5 id="ä¸­æ–­çŠ¶æ€æ ‡å¿—-p0ifg-p1ifg-p2ifg">ä¸­æ–­çŠ¶æ€æ ‡å¿—ï¼ˆP0IFGï¼ŒP1IFGï¼ŒP2IFGï¼‰</h5>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»/å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>
   
   <tr>
      <td>P0IFG</td>
      <td>7:0</td>
      <td>P0IF[7:0]</td>
      <td>0x00</td>
      <td>R/W0</td>
      <td>ç«¯å£0ï¼Œä½7è‡³ä½0è¾“å…¥ä¸­æ–­çŠ¶æ€æ ‡å¿—ã€‚å½“æŸå¼•è„šä¸Šæœ‰ä¸­æ–­è¯·æ±‚æœªå†³ä¿¡å·æ—¶ï¼Œå…¶ç›¸åº”æ ‡å¿—ä¸ºè®¾1ã€‚</td>
   </tr>
   <tr>
      <td>P1IFG</td>
      <td>7:0</td>
      <td>P1IF[7:0]</td>
      <td>0x00</td>
      <td>R/W0</td>
      <td>ç«¯å£1ï¼Œä½7è‡³ä½0è¾“å…¥ä¸­æ–­çŠ¶æ€æ ‡å¿—ã€‚å½“æŸå¼•è„šä¸Šæœ‰ä¸­æ–­è¯·æ±‚æœªå†³ä¿¡å·æ—¶ï¼Œå…¶ç›¸åº”æ ‡å¿—ä¸ºè®¾1ã€‚</td>
   </tr>
   <tr>
      <td>P2IFG</td>
      <td>7:5</td>
      <td>---</td>
      <td>000</td>
      <td>R0</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>P2IFG</td>
      <td>4:0</td>
      <td>P2IF[4:0]</td>
      <td>0x00</td>
      <td>R/W0</td>
      <td>ç«¯å£2ï¼Œä½4è‡³ä½0è¾“å…¥ä¸­æ–­çŠ¶æ€æ ‡å¿—ã€‚å½“æŸå¼•è„šä¸Šæœ‰ä¸­æ–­è¯·æ±‚æœªå†³ä¿¡å·æ—¶ï¼Œå…¶ç›¸åº”æ ‡å¿—ä¸ºè®¾1ã€‚</td>
   </tr>
</table>

<h5 id="ä¸­æ–­æ§åˆ¶-pictl">ä¸­æ–­æ§åˆ¶ï¼ˆPICTLï¼‰</h5>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>
   
   <tr>
      <td>PICTL</td>
      <td>7</td>
      <td>PADSC</td>
      <td>0</td>
      <td>R/W</td>
      <td>å¼ºåˆ¶å¼•è„šåœ¨è¾“å‡ºæ¨¡å¼ã€‚é€‰æ‹©è¾“å‡ºé©±åŠ¨èƒ½åŠ›ï¼Œç”±DVDDå¼•è„šæä¾›ã€‚0ï¼šæœ€å°é©±åŠ¨èƒ½åŠ›;1ï¼šæœ€å¤§é©±åŠ¨èƒ½åŠ›</td>
   </tr>
   <tr>
      <td>PICTL</td>
      <td>6:4</td>
      <td>---</td>
      <td>000</td>
      <td>R0</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>PICTL</td>
      <td>3</td>
      <td>P2ICON</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£2ï¼Œå¼•è„š4è‡³0è¾“å…¥æ¨¡å¼ä¸‹çš„ä¸­æ–­é…ç½®ï¼Œè¯¥ä½ä¸ºç«¯å£2çš„4-0è„šçš„è¾“å…¥é€‰æ‹©ä¸­æ–­è¯·æ±‚æ¡ä»¶ã€‚0ï¼šè¾“å…¥çš„ä¸Šå‡æ²¿å¼•èµ·ä¸­æ–­;1ï¼šè¾“å…¥çš„ä¸‹é™æ²¿å¼•èµ·ä¸­æ–­</td>
   </tr>
   <tr>
      <td>PICTL</td>
      <td>2</td>
      <td>P1ICONH</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£1ï¼Œå¼•è„š7è‡³4è¾“å…¥æ¨¡å¼ä¸‹çš„ä¸­æ–­é…ç½®ï¼Œè¯¥ä½ä¸ºç«¯å£1çš„7-4è„šçš„è¾“å…¥é€‰æ‹©ä¸­æ–­è¯·æ±‚æ¡ä»¶ã€‚0ï¼šè¾“å…¥çš„ä¸Šå‡æ²¿å¼•èµ·ä¸­æ–­;1ï¼šè¾“å…¥çš„ä¸‹é™æ²¿å¼•èµ·ä¸­æ–­</td>
   </tr>
   <tr>
      <td>PICTL</td>
      <td>1</td>
      <td>P1ICONL</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£1ï¼Œå¼•è„š3è‡³0è¾“å…¥æ¨¡å¼ä¸‹çš„ä¸­æ–­é…ç½®ï¼Œè¯¥ä½ä¸ºç«¯å£1çš„3-0è„šçš„è¾“å…¥é€‰æ‹©ä¸­æ–­è¯·æ±‚æ¡ä»¶ã€‚0ï¼šè¾“å…¥çš„ä¸Šå‡æ²¿å¼•èµ·ä¸­æ–­;1ï¼šè¾“å…¥çš„ä¸‹é™æ²¿å¼•èµ·ä¸­æ–­</td>
   </tr>
   <tr>
      <td>PICTL</td>
      <td>0</td>
      <td>P0ICON</td>
      <td>0</td>
      <td>R/W</td>
      <td>ç«¯å£0ï¼Œå¼•è„š7è‡³0è¾“å…¥æ¨¡å¼ä¸‹çš„ä¸­æ–­é…ç½®ï¼Œè¯¥ä½ä¸ºç«¯å£0çš„7-0è„šçš„è¾“å…¥é€‰æ‹©ä¸­æ–­è¯·æ±‚æ¡ä»¶ã€‚0ï¼šè¾“å…¥çš„ä¸Šå‡æ²¿å¼•èµ·ä¸­æ–­;1ï¼šè¾“å…¥çš„ä¸‹é™æ²¿å¼•èµ·ä¸­æ–­</td>
   </tr>
</table>

<h5 id="ä¸­æ–­å±è”½-p0ien-p1ien-p2ien">ä¸­æ–­å±è”½ï¼ˆP0IENï¼ŒP1IENï¼ŒP2IENï¼‰</h5>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>
   
   <tr>
      <td>P0IEN</td>
      <td>7:0</td>
      <td>P0_[7:0]IEN</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>ç«¯å£0ï¼Œä½7è‡³ä½0ä¸­æ–­ä½¿èƒ½ã€‚0ï¼šä¸­æ–­ç¦æ­¢;1ï¼šä¸­æ–­ä½¿èƒ½</td>
   </tr>
   <tr>
      <td>P1IEN</td>
      <td>7:0</td>
      <td>P1_[7:0]IEN</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>ç«¯å£1ï¼Œä½7è‡³ä½0ä¸­æ–­ä½¿èƒ½ã€‚0ï¼šä¸­æ–­ç¦æ­¢;1ï¼šä¸­æ–­ä½¿èƒ½</td>
   </tr>
   <tr>
      <td>P2IEN</td>
      <td>7:6</td>
      <td>---</td>
      <td>00</td>
      <td>R0</td>
      <td>æœªä½¿ç”¨</td>
   </tr>
   <tr>
      <td>P2IEN</td>
      <td>5</td>
      <td>DPIEN</td>
      <td>0</td>
      <td>R/W</td>
      <td>USB D+ ä¸­æ–­ä½¿èƒ½ã€‚</td>
   </tr>
   <tr>
      <td>P2IEN</td>
      <td>4:0</td>
      <td>P2_[4:0]IEN</td>
      <td>00000</td>
      <td>R/W</td>
      <td>ç«¯å£2ï¼Œä½4è‡³ä½0ä¸­æ–­ä½¿èƒ½ã€‚0ï¼šä¸­æ–­ç¦æ­¢;1ï¼šä¸­æ–­ä½¿èƒ½</td>
   </tr>
</table>

<h4 id="adcè¾“å…¥é…ç½®-apcfg">ADCè¾“å…¥é…ç½®ï¼ˆAPCFGï¼‰</h4>

<table>
<thead>
   <tr>
      <th>ç«¯å£</th>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>   
   <tr>
      <td>APCFG</td>
      <td>7:0</td>
      <td>APCFG[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>æ¨¡æ‹Ÿå¤–å›´I/Oé…ç½®ï¼ˆADCè¾“å…¥é…ç½®ï¼‰ï¼ŒAPCFG[7:0]é€‰æ‹©P0.7â€”P0.0ä½œä¸ºæ¨¡æ‹Ÿè¾“å…¥å£ã€‚0ï¼šæ¨¡æ‹Ÿè¾“å…¥ï¼ˆADCè¾“å…¥ï¼‰ç¦æ­¢; 1ï¼šæ¨¡æ‹Ÿè¾“å…¥ï¼ˆACDè¾“å…¥ï¼‰ä½¿èƒ½</td>
   </tr>
</table>

<h4 id="ä¸²å£åŠspiç›¸å…³">ä¸²å£åŠSPIç›¸å…³</h4>

<h5 id="usart0çš„æ§åˆ¶å’ŒçŠ¶æ€-u0csr-0x86">USART0çš„æ§åˆ¶å’ŒçŠ¶æ€ï¼ˆU0CSRï¼Œ0x86ï¼‰</h5>

<table>
<thead>
   <tr>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>  
   <tr>
      <td>7</td>
      <td>MODE</td>
      <td>0</td>
      <td>R/W</td>
      <td>USARTæ¨¡å¼é€‰æ‹©: 0:SPIæ¨¡å¼;1:UARTæ¨¡å¼</td>
   </tr>
   <tr>
      <td>6</td>
      <td>RE</td>
      <td>0</td>
      <td>R/W</td>
      <td>UARTæ¥æ”¶å™¨ä½¿èƒ½ã€‚æ³¨æ„åœ¨UARTå®Œå…¨é…ç½®ä¹‹å‰ä¸ä½¿èƒ½æ¥æ”¶ã€‚0:ç¦ç”¨æ¥æ”¶å™¨;1:æ¥æ”¶å™¨ä½¿èƒ½</td>
   </tr>
   <tr>
      <td>5</td>
      <td>SLAVE</td>
      <td>0</td>
      <td>R/W</td>
      <td>SPIä¸»æˆ–è€…ä»æ¨¡å¼é€‰æ‹©.0:SPIä¸»æ¨¡å¼;1:SPIä»æ¨¡å¼;</td>
   </tr>
   <tr>
      <td>4</td>
      <td>FE</td>
      <td>0</td>
      <td>R/W0</td>
      <td>UARTå¸§é”™è¯¯çŠ¶æ€.0:æ— å¸§é”™è¯¯æ£€æµ‹;1:å­—èŠ‚æ”¶åˆ°ä¸æ­£ç¡®åœæ­¢ä½çº§åˆ«</td>
   </tr>
   <tr>
      <td>3</td>
      <td>ERR</td>
      <td>0</td>
      <td>R/W0</td>
      <td>UARTå¥‡å¶é”™è¯¯çŠ¶æ€.0:æ— å¥‡å¶é”™è¯¯æ£€æµ‹;1:å­—èŠ‚æ”¶åˆ°å¥‡å¶é”™è¯¯</td>
   </tr>
   <tr>
      <td>2</td>
      <td>RX_BYTE</td>
      <td>0</td>
      <td>R/W0</td>
      <td>æ¥æ”¶å­—èŠ‚çŠ¶æ€ã€‚URATæ¨¡å¼å’ŒSPIä»æ¨¡å¼ã€‚å½“è¯»U0DBUFè¯¥ä½è‡ªåŠ¨æ¸…é™¤ï¼Œé€šè¿‡å†™0æ¸…é™¤å®ƒï¼Œè¿™æ ·æœ‰æ•ˆä¸¢å¼ƒU0DBUFä¸­çš„æ•°æ® ã€‚0:æ²¡æœ‰æ”¶åˆ°å­—èŠ‚;1:å‡†å¤‡å¥½æ¥æ”¶å­—èŠ‚</td>
   </tr>
   <tr>
      <td>1</td>
      <td>TX_BYTE</td>
      <td>0</td>
      <td>R/W0</td>
      <td>ä¼ é€å­—èŠ‚çŠ¶æ€ã€‚URATæ¨¡å¼å’ŒSPIä¸»æ¨¡å¼.0:å­—èŠ‚æ²¡æœ‰è¢«ä¼ é€;1:å†™åˆ°æ•°æ®ç¼“å­˜å¯„å­˜å™¨çš„æœ€åå­—èŠ‚è¢«ä¼ é€</td>
   </tr>
   <tr>
      <td>0</td>
      <td>ACTIVE</td>
      <td>0</td>
      <td>R</td>
      <td>USARTä¼ é€/æ¥æ”¶ä¸»åŠ¨çŠ¶æ€ã€åœ¨SPIä»æ¨¡å¼ä¸‹è¯¥ä½ç­‰äºä»æ¨¡å¼é€‰æ‹©ã€‚0:USARTç©ºé—²;1:åœ¨ä¼ é€æˆ–è€…æ¥æ”¶æ¨¡å¼USARTå¿™ç¢Œ</td>
   </tr>
</table>

<h5 id="uartçš„æ§åˆ¶-u0ucr-0xc4">UARTçš„æ§åˆ¶ï¼ˆU0UCRï¼Œ0xC4ï¼‰</h5>

<table>
<thead>
   <tr>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>  
   <tr>
      <td>7</td>
      <td>FLUSH</td>
      <td>0</td>
      <td>R0/W1</td>
      <td>æ¸…é™¤å•å…ƒã€‚å½“è®¾ç½®æ—¶ï¼Œè¯¥äº‹ä»¶å°†ä¼šç«‹å³åœæ­¢å½“å‰æ“ä½œå¹¶ä¸”è¿”å›å•å…ƒçš„ç©ºé—²çŠ¶æ€ã€‚</td>
   </tr>
   <tr>
      <td>6</td>
      <td>FLOW</td>
      <td>0</td>
      <td>R/W</td>
      <td>UARTç¡¬ä»¶æµä½¿èƒ½ã€‚ç”¨RTSå’ŒCTSå¼•è„šé€‰æ‹©ç¡¬ä»¶æµæ§åˆ¶çš„ä½¿ç”¨ã€‚0:æµæ§åˆ¶ç¦æ­¢.1:æµæ§åˆ¶ä½¿èƒ½.</td>
   </tr>
   <tr>
      <td>5</td>
      <td>D9</td>
      <td>0</td>
      <td>R/W</td>
      <td>UARTå¥‡å¶æ ¡éªŒä½ã€‚å½“ä½¿èƒ½å¥‡å¶æ ¡éªŒï¼Œå†™å…¥D9çš„å€¼å†³å®šå‘é€çš„ç¬¬9ä½çš„å€¼ï¼Œå¦‚æœæ”¶åˆ°çš„ç¬¬9ä½ä¸åŒ¹é…æ”¶åˆ°å­—èŠ‚çš„å¥‡å¶æ ¡éªŒï¼Œæ¥æ”¶æ—¶æŠ¥å‘ŠERRã€‚å¦‚æœå¥‡å¶æ ¡éªŒä½¿èƒ½ï¼Œ é‚£ä¹ˆè¯¥ä½è®¾ç½®ä»¥ä¸‹å¥‡å¶æ ¡éªŒçº§åˆ«ã€‚0:å¥‡æ ¡éªŒ;1:å¶æ ¡éªŒ.</td>
   </tr>
   <tr>
      <td>4</td>
      <td>BIT9</td>
      <td>0</td>
      <td>R/W</td>
      <td>UART 9ä½æ•°æ®ä½¿èƒ½ã€‚å½“è¯¥ä½æ˜¯1æ—¶, ä½¿èƒ½å¥‡å¶æ ¡éªŒä½ä¼ è¾“ï¼ˆå³ç¬¬9ä½ï¼‰ã€‚å¦‚æœé€šè¿‡PARITYä½¿èƒ½å¥‡å¶æ ¡éªŒï¼Œç¬¬9ä½çš„å†…å®¹æ˜¯é€šè¿‡D9ç»™å‡ºçš„ã€‚0:8ä½ä¼ é€;1:9ä½ä¼ é€</td>
   </tr>
   <tr>
      <td>3</td>
      <td>PARITY</td>
      <td>0</td>
      <td>R/W</td>
      <td>UARTå¥‡å¶æ ¡éªŒä½¿èƒ½ã€‚é™¤äº†ä¸ºå¥‡å¶æ ¡éªŒè®¾ç½®è¯¥ä½ç”¨äºè®¡ç®—ï¼Œå¿…é¡»ä½¿èƒ½9ä½æ¨¡å¼ã€‚0:ç¦ç”¨å¥‡å¶æ ¡éªŒ;1:å¥‡å¶æ ¡éªŒä½¿èƒ½</td>
   </tr>
   <tr>
      <td>2</td>
      <td>SPB</td>
      <td>0</td>
      <td>R/W</td>
      <td>UARTåœæ­¢ä½çš„ä½æ•°ã€‚é€‰æ‹©è¦ä¼ é€çš„åœæ­¢ä½çš„ä½æ•°.0:1ä½åœæ­¢ä½;1:2ä½åœæ­¢ä½</td>
   </tr>
   <tr>
      <td>1</td>
      <td>STOP</td>
      <td>1</td>
      <td>R/W</td>
      <td>UARTåœæ­¢ä½çš„ç”µå¹³å¿…é¡»ä¸åŒäºå¼€å§‹ä½çš„ç”µå¹³.0:åœæ­¢ä½ä½ç”µå¹³;1:åœæ­¢ä½é«˜ç”µå¹³</td>
   </tr>
   <tr>
      <td>0</td>
      <td>START</td>
      <td>0</td>
      <td>R/W</td>
      <td>UARTèµ·å§‹ä½ç”µå¹³ã€‚é—²ç½®çº¿çš„ææ€§é‡‡ç”¨é€‰æ‹©çš„èµ·å§‹ä½çº§åˆ«çš„ç”µå¹³çš„ç›¸åçš„ç”µå¹³ã€‚0:èµ·å§‹ä½ä½ç”µå¹³;1:èµ·å§‹ä½é«˜ç”µå¹³</td>
   </tr>
</table>

<h5 id="usart0çš„é€šç”¨æ§åˆ¶-u0gcr-0xc5">USART0çš„é€šç”¨æ§åˆ¶ï¼ˆU0GCRï¼Œ0xC5ï¼‰</h5>

<table>
<thead>
   <tr>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>  
   <tr>
      <td>7</td>
      <td>CPOL</td>
      <td>0</td>
      <td>R/W</td>
      <td>SPIçš„æ—¶é’Ÿææ€§.0:è´Ÿæ—¶é’Ÿææ€§;1:æ­£æ—¶é’Ÿææ€§;</td>
   </tr>
   <tr>
      <td>6</td>
      <td>CPHA</td>
      <td>0</td>
      <td>R/W</td>
      <td>SPIæ—¶é’Ÿç›¸ä½.0:å½“SCKä»CPOLå€’ç½®åˆ°CPOLæ—¶æ•°æ®è¾“å‡ºåˆ°MOSI,å¹¶ä¸”å½“SCKä»CPOLå€’ç½®åˆ°CPOLæ—¶æ•°æ®è¾“å…¥æŠ½æ ·åˆ° MISOã€‚1:å½“SCKä»CPOLå€’ç½®åˆ°CPOLæ—¶æ•°æ®è¾“å‡ºåˆ°MOSIï¼Œå¹¶ä¸”å½“SCKä»CPOLå€’ç½®åˆ° CPOL æ—¶æ•°æ®è¾“å…¥æŠ½æ ·åˆ° MISO ã€‚</td>
   </tr>
   <tr>
      <td>5</td>
      <td>ORDER</td>
      <td>0</td>
      <td>R/W</td>
      <td>ä¼ é€ä½é¡ºåº.0:LSBå…ˆä¼ é€;1:MSBå…ˆä¼ é€;</td>
   </tr>
   <tr>
      <td>4:0</td>
      <td>BAUD_E[4:0]</td>
      <td>0</td>
      <td>0000</td>
      <td>R/W æ³¢ç‰¹ç‡æŒ‡æ•°å€¼ã€‚BAUD_E å’Œ BAUD_M å†³å®šäº† UART æ³¢ç‰¹ç‡ å’Œ SPI çš„ä¸» SCK æ—¶</td>
   </tr>
</table>

<h5 id="usart0çš„æ•°æ®ç¼“å­˜-u0buf-0xc1">USART0çš„æ•°æ®ç¼“å­˜ï¼ˆU0BUFï¼Œ0xC1ï¼‰</h5>

<table>
<thead>
   <tr>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>  
   <tr>
      <td>7:0</td>
      <td>DATA[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>USARTæ¥æ”¶å’Œä¼ é€æ•°æ® ã€‚ å½“å†™è¿™ä¸ªå¯„å­˜å™¨çš„æ—¶å€™æ•°æ®è¢«å†™åˆ°å†…éƒ¨ï¼Œä¼ é€æ•°æ®å¯„å­˜</td>
   </tr>
</table>

<h5 id="usart0æ³¢ç‰¹ç‡-u0baud-0xc2">USART0æ³¢ç‰¹ç‡ï¼ˆU0BAUDï¼Œ0xC2ï¼‰</h5>

<table>
<thead>
   <tr>
      <th>Bitä½</th>
      <th>åç§°</th>
      <th>åˆå§‹åŒ–</th>
      <th>è¯»å†™</th>
      <th>æè¿°</th>
   </tr>
</thead>  
   <tr>
      <td>7:0</td>
      <td>BAUD_M[7:0]</td>
      <td>0x00</td>
      <td>R/W</td>
      <td>æ³¢ç‰¹ç‡å°æ•°éƒ¨åˆ†çš„å€¼ã€‚ BAUD_Eå’Œ BAUD_Må†³å®šäº†UARTçš„æ³¢ç‰¹ç‡å’ŒSPIçš„ä¸»SCK</td>
   </tr>
</table>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”ç¬¬ä¸€ä¸ªå·¥ç¨‹,IOçš„è¾“å‡º</title>
			<link>https://www.smslit.top/2015/10/26/FirstProjectIOOUTPUT-BLE/</link>
			<pubDate>Mon, 26 Oct 2015 17:34:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/26/FirstProjectIOOUTPUT-BLE/</guid>
			<description>&lt;p&gt;CC2541æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª8051å†…æ ¸çš„å•ç‰‡æœºï¼Œåªè¦ç†Ÿæ‚‰51å•ç‰‡æœºå’Œcè¯­è¨€ï¼Œä¹Ÿä¾¿å¾ˆå®¹æ˜“ä¸Šæ‰‹CC2541çš„ç¨‹åºè®¾è®¡å§ã€‚ä¸ºäº†æ›´å¥½çš„ç†Ÿæ‚‰IARä»ç®€å•çš„IOæ§åˆ¶å¼€å§‹ï¼Œé€æ­¥ä¸ºä»¥åè¿›è¡Œè“ç‰™åè®®æ ˆå¼€å‘å¥ å®šåŸºç¡€ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>CC2541æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª8051å†…æ ¸çš„å•ç‰‡æœºï¼Œåªè¦ç†Ÿæ‚‰51å•ç‰‡æœºå’Œcè¯­è¨€ï¼Œä¹Ÿä¾¿å¾ˆå®¹æ˜“ä¸Šæ‰‹CC2541çš„ç¨‹åºè®¾è®¡å§ã€‚ä¸ºäº†æ›´å¥½çš„ç†Ÿæ‚‰IARä»ç®€å•çš„IOæ§åˆ¶å¼€å§‹ï¼Œé€æ­¥ä¸ºä»¥åè¿›è¡Œè“ç‰™åè®®æ ˆå¼€å‘å¥ å®šåŸºç¡€ã€‚</p>

<p>å¼€å‘ç¯å¢ƒé…ç½®å¥½äº†ï¼ŒCC Debuggerç¨‹åºä¸‹è½½è°ƒè¯•ä¹Ÿå¼„å¥½äº†ï¼Œé‚£å°±æ–°å»ºä¸€ä¸ªIARå·¥ç¨‹è¯•ä¸€ä¸‹IOã€‚</p>

<h4 id="æ–°å»ºiarå·¥ç¨‹">æ–°å»ºIARå·¥ç¨‹</h4>

<ul>
<li><p>åˆ›å»ºå·¥ç¨‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/o590b.png" alt="1" /></p></li>

<li><p>åœ¨æ–°å‡ºç°çš„å¯¹è¯æ¡†ä¸­ï¼ŒTool chainé€‰æ‹©8051ï¼ŒProject Templateé€‰æ‹©Empty Projectï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/1dcnh.png" alt="2" /></p></li>

<li><p>é€‰æ‹©ä¿å­˜ç›®å½•ï¼Œè¾“å…¥å·¥ç¨‹åç§°ï¼Œä¿å­˜</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/fspcl.png" alt="3" /></p></li>

<li><p>ä¿å­˜WorkSpaceï¼Œåœ¨IARä¸­æ¯ä¸ªå·¥ç¨‹éƒ½å¿…é¡»æœ‰ä¸€ä¸ªWorkspaceï¼Œè€Œä¸€ä¸ªWorkspaceä¸­å¯ä»¥æœ‰å¤šä¸ªå·¥ç¨‹ï¼Œè¿™é‡Œæˆ‘å¿…é¡»è¦ä¿å­˜ä¸€ä¸ªWorkspaceï¼Œfile-&gt;save Workspace Aså°±ä¼šå¼¹å‡ºå¦‚ä¸‹å¯¹è¯æ¡†ï¼Œè¿™é‡ŒåŒæ ·å–åä¸ºLEDï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2igii.png" alt="4" /></p></li>
</ul>

<h4 id="é…ç½®å·¥ç¨‹">é…ç½®å·¥ç¨‹</h4>

<ul>
<li><p>å³å‡»å·¥ç¨‹ï¼Œç‚¹å‡»Options&hellip;è¿›å…¥é…ç½®ç•Œé¢ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/tbo5m.png" alt="5" /></p></li>

<li><p>åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¿›è¡ŒTargeté…ç½®ï¼ŒDeviceé€‰æ‹©CC2541F256ï¼ˆæ ¹æ®æ¿ä¸ŠèŠ¯ç‰‡å‹å·å†³å®šï¼‰ï¼ŒData Modelé€‰æ‹©largeï¼ŒNumber of virtualé€‰æ‹©16ï¼ŒLocation for constants and stringsé€‰æ‹©ROM mapped as dataã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/qwb2y.png" alt="6" /></p></li>

<li><p>è¿›è¡Œlinkerè®¾ç½®ï¼Œé€‰ä¸­Outputæ ‡ç­¾é¡µï¼ŒFormatåŒºå‹¾é€‰Allow C-SPY-specific extra output fileï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/mx7qf.png" alt="7" /></p></li>

<li><p>Extra Outputæ ‡ç­¾é¡µï¼Œå‹¾é€‰Generate extra output fileï¼Œå‹¾é€‰Override defaultï¼Œæ›´åä¸ºLED.hexï¼Œé€‰æ‹©Out formatä¸ºintel-extendedï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/gw29r.png" alt="8" /></p></li>

<li><p>è¿›è¡ŒDebuggerè®¾ç½®ï¼ŒSetupæ ‡ç­¾é¡µä¸­Driveré€‰æ‹©Texas Instrumentsï¼š</p></li>
</ul>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/doi47.png" alt="9" /></p>

<ul>
<li><p>é…ç½®Debuggerçš„Texas Instrumentsï¼ŒDownloadæ ‡ç­¾é¡µä¸­å‹¾é€‰Erase flashï¼Œç„¶åç‚¹å‡»OKï¼Œè‡³æ­¤é¡¹ç›®é…ç½®å·¥ä½œå°±å®Œæˆäº†ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/7fj76.png" alt="10" /></p></li>
</ul>

<h4 id="æ·»åŠ æºæ–‡ä»¶">æ·»åŠ æºæ–‡ä»¶</h4>

<ul>
<li><p>å•å‡»å·¥å…·æ <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/qxped.png" alt="11" />æ–°å»ºæŒ‰é’®ï¼Œæ–°å»ºæ–‡ä»¶ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;ioCC2541.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">P1SEL</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0x01</span><span class="p">;</span>         <span class="c1">// é…ç½®ç®¡è„šä¸ºIOåŠŸèƒ½
</span><span class="c1"></span>    <span class="n">P1DIR</span> <span class="o">|=</span> <span class="mh">0x03</span><span class="p">;</span>          <span class="c1">// é…ç½®IOï¼ŒP1.0ä¸ºè¾“å‡º
</span><span class="c1"></span>        
    <span class="n">P1</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>             <span class="c1">// é…ç½®P1.0ç®¡è„šè¾“å‡ºé«˜ç”µå¹³
</span><span class="c1"></span>        
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            
    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>

<li><p>ä¿å­˜æºæ–‡ä»¶ä¸ºLED.c:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/z7hiq.png" alt="12" /></p></li>

<li><p>å°†LED.cæºæ–‡ä»¶æ·»åŠ åˆ°å·¥ç¨‹ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/6ljb2.png" alt="13" /></p></li>

<li><p>ä¿å­˜å·¥ç¨‹ï¼Œå•å‡»å·¥å…·æ çš„<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ybgku.png" alt="14" />ç¼–è¯‘æŒ‰é’®è¿›è¡Œç¼–è¯‘ï¼Œä¿å­˜å·¥ç¨‹ä¸ºLED.ewwï¼Œåœ¨ç¡®è®¤å¦å­˜ä¸ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©<code>æ˜¯</code>ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/yj4uy.png" alt="15" /></p></li>

<li><p>ç¼–è¯‘ç»“æœç±»ä¼¼ä¸€ä¸‹ï¼Œè¯´æ˜ç™½ç¼–è¯‘æˆåŠŸï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/5nzjl.png" alt="16" /></p></li>
</ul>

<h4 id="æµ‹è¯•">æµ‹è¯•</h4>

<ul>
<li><p>è¿æ¥å¥½ç”µè„‘ã€CC Debuggerå’ŒCC2541æ¿ï¼Œç¡®è®¤CC DebuggeræŒ‡ç¤ºä¸ºç»¿ç¯ï¼ˆä¿è¯CC Debuggerå·²ç»è¯†åˆ«åˆ°CC2541èŠ¯ç‰‡ï¼‰ï¼Œç„¶åç‚¹å‡»å·¥å…·æ <img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/10f23.png" alt="7" />ä¸‹è½½å’Œè°ƒè¯•æŒ‰é’®ï¼Œæ­£å¸¸çš„è¯å°±ä¼šè¿›å…¥è°ƒè¯•ç•Œé¢ï¼Œç„¶åç‚¹å‡»å·¥å…·æ çš„<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/93zdz.png" alt="17" />GOæŒ‰é’®ï¼Œä½¿ç¨‹åºå…¨é€Ÿè¿è¡Œï¼Œæµ‹è¯•èŠ¯ç‰‡çš„P1.0ç®¡è„šçš„ç”µå¹³ï¼Œå¦‚æœä¸º3.3Vå·¦å³çš„é«˜ç”µå¹³ï¼Œè¯´æ˜æˆåŠŸæå®šIOè¾“å‡ºã€‚ä¸‹é¢ç»™å‡ºCC2541ç®¡è„šMAPå›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/e2gj1.png" alt="18" /></p></li>

<li><p>ç¼–å†™ç®€å•çš„å»¶æ—¶å‡½æ•°ï¼Œæµ‹è¯•IOçš„é«˜ä½ç”µå¹³é—´éš”è¾“å‡ºï¼Œåˆ†åˆ«æ–°å»ºç¼–å†™delay.cå’Œdelay.hæ–‡ä»¶ï¼ŒæŒ‰ç…§3ä¸­çš„æ–¹å¼æ·»åŠ åˆ°å·¥ç¨‹ä¹‹ä¸­ã€‚</p>

<p>delay.hä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#ifndef __DELAY_H__
</span><span class="cp">#define __DELAY_H__
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">timeDelay</span><span class="p">);</span>

<span class="cp">#endif</span></code></pre></div>
<p>delay.cä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&#34;delay.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">delay</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">timeDelay</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="n">timeDelay</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">320</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">);</span>       <span class="c1">// æ‰§è¡Œç©ºå‘½ä»¤æ¨¡æ‹Ÿå»¶æ—¶1ms
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>

<li><p>ç„¶åæ›´æ”¹LED.cæ–‡ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;ioCC2541.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;delay.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">P1SEL</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mh">0x01</span><span class="p">;</span>         <span class="c1">// é…ç½®ç®¡è„šä¸ºIOåŠŸèƒ½
</span><span class="c1"></span>    <span class="n">P1DIR</span> <span class="o">|=</span> <span class="mh">0x03</span><span class="p">;</span>          <span class="c1">// é…ç½®P1.0ä¸ºè¾“å‡º
</span><span class="c1"></span>        
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">P1</span> <span class="o">|=</span> <span class="mh">0x01</span><span class="p">;</span>         <span class="c1">// é…ç½®P1.0è¾“å‡ºé«˜ç”µå¹³
</span><span class="c1"></span>        <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>        <span class="c1">// å»¶æ—¶1000ms
</span><span class="c1"></span>        <span class="n">P1</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="mh">0x01</span><span class="p">);</span>      <span class="c1">// é…ç½®P1.0è¾“å‡ºé«˜ç”µå¹³
</span><span class="c1"></span>        <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>        <span class="c1">// å»¶æ—¶1000ms
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>

<li><p>ç„¶åç¼–è¯‘å¹¶ä¸‹è½½ï¼ŒGOè¿è¡Œï¼Œä¸‡ç”¨è¡¨æµ‹é‡P1.0ç®¡è„šç”µå¹³ï¼Œå¤§çº¦ç»è¿‡1sç”µå¹³ä¾¿åˆ‡æ¢ä¸€æ¬¡ï¼Œè¯´æ˜å¯ç”¨ã€‚</p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”CC Debuggerçš„ä½¿ç”¨</title>
			<link>https://www.smslit.top/2015/10/26/CCDebugger-BLE/</link>
			<pubDate>Mon, 26 Oct 2015 10:34:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/26/CCDebugger-BLE/</guid>
			<description>&lt;p&gt;é…ç½®å¥½å¼€å‘ç¯å¢ƒï¼Œè¯è¯´é‚£å¾—è¦è¯•ä¸€ä¸‹ä¸‹è½½ç¨‹åºï¼ŒCC2541çš„BLEå¼€å‘è¦ç”¨CC Debuggerï¼Œè¿™é‡Œå°±è¯´ä¸€ä¸‹å®ƒçš„ä½¿ç”¨ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>é…ç½®å¥½å¼€å‘ç¯å¢ƒï¼Œè¯è¯´é‚£å¾—è¦è¯•ä¸€ä¸‹ä¸‹è½½ç¨‹åºï¼ŒCC2541çš„BLEå¼€å‘è¦ç”¨CC Debuggerï¼Œè¿™é‡Œå°±è¯´ä¸€ä¸‹å®ƒçš„ä½¿ç”¨ã€‚</p>

<h2 id="æ¥å£è¯´æ˜">æ¥å£è¯´æ˜</h2>

<p>è¿™ä¸€éƒ¨åˆ†å†…å®¹å–è‡ªå®˜æ–¹CC Debuggerçš„ä½¿ç”¨è¯´æ˜ã€‚å¯ä»¥ä»æˆ‘ç½‘ç›˜é‡Œä¸‹è½½</p>

<p>é“¾æ¥: <a href="http://pan.baidu.com/s/1x9jMA" target="_blank">http://pan.baidu.com/s/1x9jMA </a> å¯†ç : aefk</p>

<h3 id="æ¥å£ç¤ºæ„å›¾">æ¥å£ç¤ºæ„å›¾</h3>

<p>CCdebuggerçš„æ¥å£ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/og1zy.jpg" alt="1" /></p>

<h3 id="æ¥å£è¯´æ˜-1">æ¥å£è¯´æ˜</h3>

<p>è¯¦è¡¨å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>å¼•è„šç¼–å·</th>
<th>å¼•è„šåç§°</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td>GND</td>
<td>åœ°çº¿</td>
</tr>

<tr>
<td>2</td>
<td>VDD</td>
<td>ç›®æ ‡æ¿çš„æ­£ç”µæº</td>
</tr>

<tr>
<td>3</td>
<td>DC</td>
<td>è°ƒè¯•æ¥å£æ—¶é’Ÿçº¿</td>
</tr>

<tr>
<td>4</td>
<td>DD</td>
<td>è°ƒè¯•æ¥å£æ•°æ®çº¿</td>
</tr>

<tr>
<td>5</td>
<td>CSn</td>
<td>ä¸‹è½½ä¸²å£ç‰‡é€‰çº¿ï¼ˆä½ç”µå¹³æœ‰æ•ˆï¼‰</td>
</tr>

<tr>
<td>6</td>
<td>SCLK</td>
<td>ä¸‹è½½ä¸²å£æ—¶é’Ÿçº¿</td>
</tr>

<tr>
<td>7</td>
<td>RESETn</td>
<td>è°ƒè¯•å™¨å¤ä½æ¥å£</td>
</tr>

<tr>
<td>8</td>
<td>MOSI</td>
<td>ä¸‹è½½ä¸²å£æ•°æ®è¾“å‡ºçº¿</td>
</tr>

<tr>
<td>9</td>
<td>3.3V</td>
<td>ä»¿çœŸå™¨3.3Vç”µæºè¾“å‡º</td>
</tr>

<tr>
<td>10</td>
<td>MISO</td>
<td>ä¸‹è½½ä¸²å£æ•°æ®è¾“å…¥çº¿</td>
</tr>
</tbody>
</table>

<h2 id="ä½¿ç”¨">ä½¿ç”¨</h2>

<p><strong>è°ƒè¯•å™¨æ¥å£ä¸‹è½½è°ƒè¯•æ ¹æ®ä½¿ç”¨ç¯å¢ƒæ‰€éœ€å¯ä»¥ç”¨ä¸¤ç§æ¥çº¿æ–¹å¼</strong></p>

<ul>
<li><p>IARã€SmartRF Flash Programmer/Studioç¯å¢ƒçš„è¿æ¥</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/t5d8v.jpg" alt="2" /></p></li>

<li><p>SmartRF Packet Snifferç¯å¢ƒä¸‹çš„è¿æ¥</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/c3iwg.jpg" alt="3" /></p></li>
</ul>

<h3 id="æ³¨æ„">æ³¨æ„ï¼š</h3>

<ul>
<li>å¯ä»¥ç”¨ç®¡è„š9æ¥ç»™ç›®æ ‡æ¿æä¾›3.3Vç”µæº</li>
<li>ç¬¬ä¸€ä¸ªæ¥çº¿å›¾ä¸­NOTE1:

<ul>
<li>æ—©æœŸç‰ˆæœ¬çš„éƒ¨åˆ†SOCï¼ˆå¦‚ï¼šCC2430ã€CC2510ã€CC1110ï¼‰éœ€å¢åŠ ä¸€ä¸ªå¤–éƒ¨ä¸Šæ‹‰ç”µé˜»ã€‚</li>
<li>æœ€æ–°ç‰ˆæœ¬çš„æ‰€æœ‰SOCå†…éƒ¨å‡æœ‰ä¸Šæ‹‰ç”µé˜»ï¼Œæ‰€ä»¥ï¼Œä¸éœ€è¦è¯¥ä¸Šæ‹‰ç”µé˜»ã€‚</li>
</ul></li>
<li>ç¬¬ä¸€ä¸ªæ¥çº¿å›¾ä¸­NOTE2ï¼šå¤ä½çº¿å¯¹å™ªå£°æ•æ„Ÿï¼Œè¿™ä¼šå¯¼è‡´æ— æ•…å¤ä½èŠ¯ç‰‡ã€‚ï¼ˆå°¤å…¶å½“è¿æ¥çº¿è¾ƒé•¿çš„æ—¶å€™ï¼‰å»ºè®®å¢åŠ ä¸€ä¸ªå¤–éƒ¨RCæ»¤æ³¢å™¨ã€‚</li>
</ul>

<h2 id="æµ‹è¯•">æµ‹è¯•</h2>

<h3 id="æˆ‘çš„æµ‹è¯•æ¡ä»¶">æˆ‘çš„æµ‹è¯•æ¡ä»¶</h3>

<ul>
<li>IARçš„BLEå¼€å‘ç¯å¢ƒ</li>
<li>CC Debugger</li>
<li>ç•™æœ‰DDã€DCã€RSTæ¥å£çš„CC2541æœ€å°ç³»ç»Ÿï¼ˆåœ¨ä¸€ä¸ªä¸œè¥¿çš„ä¸»æ¿ä¸Šï¼‰</li>
</ul>

<h3 id="è¿çº¿">è¿çº¿</h3>

<ul>
<li><p>æŒ‰ç…§ä¸Šè¿°ç¬¬ä¸€ä¸ªæ¥çº¿å›¾ï¼Œå°†CC Debuggerçš„DDã€DCã€RSTåˆ†åˆ«è¿æ¥åˆ°æ¿ä¸Šçš„å¯¹åº”æ¥å£ã€‚æˆ‘é€‰æ‹©çš„æ˜¯è°ƒè¯•å™¨ç»™CC2541æ¿ä¾›ç”µï¼Œæ‰€ä»¥è¿˜åº”è¯¥å°†CC Debuggerçš„9å·ç®¡è„šæ¥åˆ°æ¿ä¸Švccï¼Œç„¶åæ¥åœ°çº¿å…±åœ°ï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/c7fek.jpg" alt="4" /></p></li>

<li><p>ä½†ä¼šå‘ç°ï¼ŒCC Debuggerä¸èƒ½è¯†åˆ«èŠ¯ç‰‡ï¼Œç°è±¡æ˜¯CC Debuggerçš„æŒ‡ç¤ºç¯æ˜¯çº¢è‰²çš„ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/nufej.jpg" alt="5" /></p></li>

<li><p>ç»è¿‡æ’æŸ¥å‘ç°ï¼ŒåŸæ¥è¯´æ˜é‡Œè¯´æ˜äº†ï¼ŒCC Debuggerçš„2å·ç®¡è„šéœ€è¦ä¸ç›®æ ‡æ¿å…±ç”µæºï¼Œè¿æ¥å¥½çº¿ï¼ŒæŒ‰ä¸€ä¸‹è°ƒè¯•å™¨çš„å¤ä½æŒ‰é’®ï¼Œå°±å¯ä»¥è¯†åˆ«èŠ¯ç‰‡äº†ï¼Œç°è±¡æ˜¯æŒ‡ç¤ºç¯å˜æˆç»¿è‰²ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/8gas0.jpg" alt="6" /></p></li>

<li><p>æ£€éªŒä¸€ä¸‹ï¼šIARæ‰“å¼€ä¸€ä¸ªCC2541çš„ä¾‹ç¨‹å·¥ç¨‹ï¼Œç¼–è¯‘ï¼Œè¿æ¥CC Debuggeråˆ°ç”µè„‘ï¼Œç„¶åç‚¹å‡»ä¸€ä¸‹<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ixjuw.png" alt="7" />ï¼ŒDownload and DebugæŒ‰é’®ï¼Œä¸‹è½½è°ƒè¯•ï¼Œä¸€èˆ¬å°±é¡ºåˆ©è¿›å…¥è°ƒè¯•ç•Œé¢äº†ã€‚</p></li>
</ul>

<h2 id="tip">Tipï¼š</h2>

<p>æœé‚¦çº¿å®³æ­»äººï¼Œåœ¨ä½¿ç”¨CC Debuggeræ—¶æœ€å¥½æ˜¯å¤„ç†ä¸€ä¸‹æœé‚¦çº¿ï¼Œä¿è¯ä¸¤ç‚¹ï¼š</p>

<ol>
<li>å°½é‡ä¿è¯è¿æ¥çº¿æ˜¯ç´§è¿çš„ã€‚</li>
<li>åšçš„çŸ­ä¸€äº›ï¼Œå¦åˆ™å½±å“ä¿¡å·ã€‚</li>
</ol>]]></content>
		</item>
		
		<item>
			<title>BLEå¼€å‘ç¬”è®°â€”â€”CC254xçš„å¼€å‘ç¯å¢ƒæ­å»º</title>
			<link>https://www.smslit.top/2015/10/20/BLEDevelopEnvironment-elec/</link>
			<pubDate>Tue, 20 Oct 2015 17:34:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/20/BLEDevelopEnvironment-elec/</guid>
			<description>&lt;p&gt;æœ€è¿‘æˆ‘å¼€å§‹å­¦ä¹ CC2541çš„BLEå¼€å‘ï¼Œç´¢æ€§å†³å®šè¾¹å­¦ä¹ è¾¹æ•´ç†å­¦ä¹ è®°å½•ï¼Œè¿™ç¯‡æ–‡ç« å°±è®²ä¸€ä¸‹åŸºäºIARçš„å¼€å‘ç¯å¢ƒçš„æ­å»ºã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ€è¿‘æˆ‘å¼€å§‹å­¦ä¹ CC2541çš„BLEå¼€å‘ï¼Œç´¢æ€§å†³å®šè¾¹å­¦ä¹ è¾¹æ•´ç†å­¦ä¹ è®°å½•ï¼Œè¿™ç¯‡æ–‡ç« å°±è®²ä¸€ä¸‹åŸºäºIARçš„å¼€å‘ç¯å¢ƒçš„æ­å»ºã€‚</p>

<p><strong>å£°æ˜ï¼š</strong></p>

<p>è¿™é‡Œç”¨ç ´è§£ç‰ˆçš„IARï¼Œåªç”¨äºå­¦ä¹ å’Œç ”ç©¶ï¼Œä¸ç”¨äºå•†ä¸šç ”å‘ã€‚è¿˜æ˜¯è¦æ”¯æŒä½¿ç”¨æ­£ç‰ˆè½¯ä»¶çš„ï¼ï¼ï¼ã€‚</p>

<h3 id="å‡†å¤‡">å‡†å¤‡</h3>

<p><strong>å…ˆä¸‹è½½æ­å»ºå¼€å‘ç¯å¢ƒæ‰€éœ€è¦çš„ä¸€äº›è½¯ä»¶ã€‚</strong></p>

<p>è½¯ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>åç¼€å</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>BLE-CC254x-1.4.0</td>
<td>Ble çš„åè®®æ ˆ,CC2541èŠ¯ç‰‡å¼€å‘éœ€è¦ç”¨åˆ°æ­¤åè®®æ ˆ</td>
</tr>

<tr>
<td>IAR for 8051</td>
<td>BLEçš„å¼€å‘ç¯å¢ƒ</td>
</tr>

<tr>
<td>BTool</td>
<td>è“ç‰™å¼€å‘çš„è¾…åŠ©å·¥å…·åŒ…</td>
</tr>

<tr>
<td>Packet Sniffer</td>
<td>è“ç‰™æŠ“åŒ…è½¯ä»¶</td>
</tr>

<tr>
<td>SmartRF Studio 7</td>
<td></td>
</tr>

<tr>
<td>SmartRF Flash Programmer</td>
<td>Flashç¼–ç¨‹ä¸Šä½æœºè½¯ä»¶</td>
</tr>
</tbody>
</table>

<p>*å…¶ä¸­å®‰è£…å®Œ<strong>BLE-CC254x-1.4.0</strong>åå¯ä»¥åœ¨å…¶å®‰è£…ç›®å½•ä¸‹æ‰¾åˆ°<strong>BTool</strong>*</p>

<p><strong>æˆ‘å·²ç»æŠŠä¸Šé¢çš„è½¯ä»¶æ”¾åˆ°äº†è‡ªå·±çš„ç™¾åº¦äº‘ï¼Œä¸‹è½½ä¸Šè¿°è½¯ä»¶å¯ä»¥ç‚¹<a href="http://pan.baidu.com/s/1qWFxcIw" target="_blank">http://pan.baidu.com/s/1qWFxcIw</a>ä¸‹è½½ï¼Œå¯†ç æ˜¯: d626</strong></p>

<h3 id="å¼€å‘ç¯å¢ƒæ­å»º">å¼€å‘ç¯å¢ƒæ­å»º</h3>

<h4 id="åè®®æ ˆçš„å®‰è£…">åè®®æ ˆçš„å®‰è£…</h4>

<p>å®‰è£…åŒ…å¯ä»¥ä»ä¸Šè¿°ç™¾åº¦äº‘åˆ†äº«é‡Œä¸‹è½½ä¹Ÿå¯ä»¥è‡ªå·±å»TIå®˜ç½‘ä¸‹è½½ï¼Œè¿™é‡Œæˆ‘æ‰€å®‰è£…çš„ç‰ˆæœ¬æ˜¯v1.40ï¼Œ<code>BLE-CC254x-1.4.0.exe</code></p>

<h5 id="å®‰è£…æ­¥éª¤">å®‰è£…æ­¥éª¤ï¼š</h5>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/y079a.png" alt="1-1" /></p>

<p>next</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xol42.png" alt="1-2" /></p>

<p>acceptï¼Œç„¶ånext</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/7df2x.png" alt="1-3" /></p>

<p>next</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ha08m.png" alt="1-4" /></p>

<p>ç„¶åç‚¹å‡»installå®Œæˆå®‰è£…ã€‚</p>

<h4 id="å®‰è£…iar">å®‰è£…IAR</h4>

<p>ä»æˆ‘çš„ç™¾åº¦äº‘ä¸‹è½½<code>IAR for 8050 v9.10ç ´è§£.zip</code>ï¼Œè§£å‹å‹ç¼©åŒ…ã€‚</p>

<h5 id="iar-for-8051çš„å®‰è£…">IAR for 8051çš„å®‰è£…</h5>

<h6 id="å®‰è£…æ­¥éª¤-1">å®‰è£…æ­¥éª¤ï¼š</h6>

<p>ç‚¹å‡»<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/bs8u5.png" alt="2-1" />ï¼Œå®‰è£…IAR for 8051.</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xxfb6.png" alt="2-2" /></p>

<p>é€‰ä¸­ç‚¹å‡»<code>INSTALL IAR Embedded Workbench</code>ï¼Œä¸€è·¯ç‚¹yeså’Œnextè¿›è¡Œå®‰è£…å³å¯ã€‚</p>

<h6 id="æ³¨æ„">æ³¨æ„ï¼š</h6>

<p>å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½è·³å‡ºå¯¹è¯æ¡†ï¼šIAR è¦åœ¨ç³»ç»Ÿä¸Šå®‰è£… dongle é©±åŠ¨ç¨‹åºï¼Œä¸€èˆ¬ç‚¹â€œæ˜¯â€å³å¯ã€‚</p>

<h5 id="iarçš„ç ´è§£">IARçš„ç ´è§£</h5>

<p>ä¸ºäº†èƒ½å¤Ÿç¼–è¯‘æˆ‘ä»¬ä»¥ååˆ›å»ºçš„å·¥ç¨‹ï¼Œè¿™ä¸€æ­¥è¿˜æ˜¯å¿…é¡»çš„ï¼Œç ´è§£ä¹‹ï¼Œæ˜¯ç”¨æ³¨å†Œæœºé‡Œå…ˆæ³¨å†Œã€‚</p>

<ul>
<li><p>è¦ç”¨æ³¨å†Œæœºç”Ÿæˆä¸€ä¸ªæ¿€æ´»æ–‡ä»¶ï¼Œç®¡ç†å‘˜èº«ä»½è¿è¡Œ<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/st5cy.png" alt="2-3" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/05l1p.png" alt="2-4" /></p></li>

<li><p>åœ¨ProductåŒºçš„ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©<code>IAR Embedded Workbench for 8051,Standard</code>ï¼Œç„¶åç‚¹å‡»<code>Generate</code>ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªLicense Numberï¼Œå¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/0gymj.png" alt="2-5" /></p></li>

<li><p>ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ä¹‹å‰å®‰è£…å¥½çš„IARï¼Œæ‰“å¼€license Manager</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/auiah.png" alt="2-6" /></p></li>

<li><p>é€‰æ‹©<code>Offline Activation</code></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/x2jo9.png" alt="2-7" /></p></li>

<li><p>åœ¨å‡ºç°çš„çª—å£License Numberä¸€æ ï¼Œå¡«å…¥ä¸Šé¢ç”Ÿæˆçš„License Numberï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œé€‰æ‹©Noï¼Œå†ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œå¦‚ä¸‹</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/kk2c9.png" alt="2-8" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/4cdod.png" alt="2-9" /></p></li>

<li><p>ç‚¹å‡»æŒ‰é’®<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ba563.png" alt="2-10" />ï¼Œé€‰æ‹©æ¿€æ´»æ–‡ä»¶ä¿å­˜ç›®å½•ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯IARçš„å®‰è£…ç›®å½•ï¼Œå¦‚ä¸‹ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/j6tl0.png" alt="2-11" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/1w5ab.png" alt="2-12" /></p></li>

<li><p>ç„¶åç‚¹å‡»ä¸¤æ¬¡ä¸‹ä¸€æ­¥ï¼Œå†å»åˆšæ‰é€‰æ‹©çš„ç›®å½•ä¸‹ï¼Œå‘ç°å·²ç»ç”Ÿæˆäº†Activation.txtæ¿€æ´»æ–‡ä»¶ï¼Œç„¶ååœ¨æ³¨å†Œæœºçš„Activate LicenseåŒºç‚¹å‡»æŒ‰é’®<code>Browser</code>ï¼Œæ‰¾åˆ°åˆšæ‰ç”Ÿæˆçš„Activation.txt</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/i1ojx.png" alt="2-13" /></p></li>

<li><p>ç‚¹å‡»<code>Activate license</code>ä¼šåœ¨è¿™ä¸ªç›®å½•å¾—åˆ°ä¸€ä¸ªå›åº”æ–‡ä»¶ï¼Œç„¶åå›åˆ°License Wizardçª—å£é€‰æ‹©è¿™ä¸ªå›åº”æ–‡ä»¶ç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ch4si.png" alt="2-14" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/jd8qt.png" alt="2-15" /></p></li>

<li><p>ç‚¹å‡»Doneï¼Œå³å¯å®Œæˆæ¿€æ´»ï¼Œå¦‚ä¸‹çš„æ ·å­ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/zp0fi.png" alt="2-16" /></p></li>
</ul>

<h5 id="bleå¼€å‘å·¥ç¨‹éœ€è¦åšçš„ä¿®æ”¹">BLEå¼€å‘å·¥ç¨‹éœ€è¦åšçš„ä¿®æ”¹</h5>

<ul>
<li><p>é¦–å…ˆæ‰“å¼€ä¸€ä¸ªTIåè®®æ ˆé‡ŒBLEå¼€å‘çš„ä¾‹ç¨‹å·¥ç¨‹ï¼Œæ¯”å¦‚</p>

<p><code>C:\Texas Instruments\BLE-CC254x-1.4.0\Projects\ble\SimpleBLEPeripheral\CC2540DB</code></p></li>

<li><p>ç¼–è¯‘ä¸€ä¸‹ï¼Œèƒ½ç¼–è¯‘ä¹Ÿè¯´æ˜å·²ç»æ¿€æ´»æˆåŠŸï¼Œä½†ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/he678.png" alt="2-17" /></p></li>

<li><p>è¿™é‡Œé€šè¿‡ä¿®æ”¹ä¸€ä¸ªç¼–è¯‘ä¾èµ–æ–‡ä»¶</p>

<p><code>C:\Texas Instruments\BLE-CC254x-1.4.0\Projects\ble\common\cc2540\ti_51ew_cc2540b.xcl</code></p>

<p>æ¥è§£å†³ï¼š</p>

<p>å°†ç¬¬155è¡Œï¼š<code>-Z(DATA)VREG+_NR_OF_VIRTUAL_REGISTERS=08-7F</code></p>

<p>ä¿®æ”¹ä¸ºï¼š<code>-Z(DATA)VREG=08-7F</code></p>

<p>ä¿å­˜ã€‚</p></li>

<li><p>ç¼–è¯‘å³å¯æˆåŠŸï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/88n50.png" alt="2-18" /></p></li>
</ul>

<h4 id="btoolçš„å®‰è£…">BTOOLçš„å®‰è£…</h4>

<p>æ‰¾åˆ°å®‰è£…çš„è“ç‰™åè®®æ ˆçš„ç›®å½•ï¼Œåœ¨æœŸç›®å½•ä¸‹ä¼šæ‰¾çš„BToolç›®å½•ï¼Œè¿è¡Œå»ç›®å½•ä¸‹çš„<code>setup.exe</code>ï¼ŒæŒ‰ç…§é»˜è®¤è®¾ç½®ä¸€è·¯ä¸‹ä¸€æ­¥å®‰è£…å³å¯ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/h2fao.png" alt="3-1" /></p>

<h4 id="packet-snifferçš„å®‰è£…">Packet Snifferçš„å®‰è£…</h4>

<p>è¿™ä¸ªè½¯ä»¶å¯ä»¥å»TIå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥åœ¨æˆ‘çš„ç™¾åº¦äº‘åˆ†äº«çš„BLEå¼€å‘ç›®å½•ä¸‹ä¸‹è½½ï¼Œå»ºè®®æŒ‰ç…§é»˜è®¤å®‰è£…ç›®å½•è¿›è¡Œå®‰è£…ã€‚</p>

<h4 id="smartrf-studio7çš„å®‰è£…">SMARTRF STUDIO7çš„å®‰è£…</h4>

<p>è¿™ä¸ªè½¯ä»¶å¯ä»¥å»TIå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥åœ¨æˆ‘çš„ç™¾åº¦äº‘åˆ†äº«çš„BLEå¼€å‘ç›®å½•ä¸‹ä¸‹è½½ï¼Œå»ºè®®æŒ‰ç…§é»˜è®¤å®‰è£…ç›®å½•è¿›è¡Œå®‰è£…ã€‚</p>

<h4 id="smartrf-flash-programmerçš„å®‰è£…">SMARTRF FLASH Programmerçš„å®‰è£…</h4>

<p>è¿™ä¸ªè½¯ä»¶å¯ä»¥å»TIå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥åœ¨æˆ‘çš„ç™¾åº¦äº‘åˆ†äº«çš„BLEå¼€å‘ç›®å½•ä¸‹ä¸‹è½½ï¼Œå»ºè®®æŒ‰ç…§é»˜è®¤å®‰è£…ç›®å½•è¿›è¡Œå®‰è£…ã€‚</p>

<p>è¿™æ ·ï¼ŒBLEçš„å¼€å‘ç¯å¢ƒåŸºæœ¬ä¸Šå°±æ­å»ºå¥½äº†ã€‚</p>]]></content>
		</item>
		
		<item>
			<title>Jekyllåšæ–‡å›¾ç‰‡å±…ä¸­</title>
			<link>https://www.smslit.top/2015/10/15/PostImgCenter-Jekyll/</link>
			<pubDate>Thu, 15 Oct 2015 17:34:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/15/PostImgCenter-Jekyll/</guid>
			<description>&lt;p&gt;åœ¨å†™jekyllåšæ–‡æ—¶ï¼Œå‘ç°å†™å‡ºçš„æ–‡ç« é‡Œå›¾ç‰‡éƒ½æ˜¯å±…å·¦çš„ï¼Œä¸æ˜¯å¾ˆç¾è§‚ï¼Œä¸ºäº†ä½¿å›¾ç‰‡å±…ä¸­ï¼Œè¯•è¿‡äº†text-alignï¼Œå‘ç°ä¸å¥½ä½¿ï¼Œç½‘ä¸Šæœå¯»æ‰¾åˆ°äº†æœ‰æ•ˆçš„åŠæ³•ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶æ­¤ç§å±…ä¸­æ–¹æ³•é€‚ç”¨äºå¤§éƒ¨åˆ†cssæ ·å¼é…ç½®ï¼Œä¸ä»…å±€é™äºjekyllåšæ–‡ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>åœ¨å†™jekyllåšæ–‡æ—¶ï¼Œå‘ç°å†™å‡ºçš„æ–‡ç« é‡Œå›¾ç‰‡éƒ½æ˜¯å±…å·¦çš„ï¼Œä¸æ˜¯å¾ˆç¾è§‚ï¼Œä¸ºäº†ä½¿å›¾ç‰‡å±…ä¸­ï¼Œè¯•è¿‡äº†text-alignï¼Œå‘ç°ä¸å¥½ä½¿ï¼Œç½‘ä¸Šæœå¯»æ‰¾åˆ°äº†æœ‰æ•ˆçš„åŠæ³•ã€‚</p>

<p>å½“ç„¶æ­¤ç§å±…ä¸­æ–¹æ³•é€‚ç”¨äºå¤§éƒ¨åˆ†cssæ ·å¼é…ç½®ï¼Œä¸ä»…å±€é™äºjekyllåšæ–‡ã€‚</p>

<h4 id="å¯¹é½æ–¹å¼çš„ç­‰æ•ˆä»£ç ">å¯¹é½æ–¹å¼çš„ç­‰æ•ˆä»£ç </h4>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="c">/* Alignment */</span> 
<span class="p">.</span><span class="nc">alignleft</span> <span class="p">{</span> 
<span class="k">display</span><span class="p">:</span> <span class="kc">inline</span><span class="p">;</span> 
<span class="k">float</span><span class="p">:</span> <span class="kc">left</span><span class="p">;</span> 
<span class="p">}</span> 
<span class="p">.</span><span class="nc">alignright</span> <span class="p">{</span> 
<span class="k">display</span><span class="p">:</span> <span class="kc">inline</span><span class="p">;</span> 
<span class="k">float</span><span class="p">:</span> <span class="kc">right</span><span class="p">;</span> 
<span class="p">}</span> 
<span class="p">.</span><span class="nc">aligncenter</span> <span class="p">{</span> 
<span class="k">clear</span><span class="p">:</span> <span class="kc">both</span><span class="p">;</span> 
<span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span> 
<span class="k">margin</span><span class="p">:</span><span class="kc">auto</span><span class="p">;</span> 
<span class="p">}</span> </code></pre></div>
<h4 id="ä¿®æ”¹-layout-scssæ–‡ä»¶">ä¿®æ”¹_layout.scssæ–‡ä»¶</h4>

<p>ä¿®æ”¹jekyllç›®å½•ä¸­_sassä¸‹çš„ _ layout.scssæ–‡ä»¶</p>

<p>å¯ä»¥æ‰¾åˆ°å¯¹åº”åšæ–‡çš„æ ·å¼è®¾ç½®ä»£ç ï¼Œåœ¨<code>post-cotent{}</code>å—ä¸­æ·»åŠ <code>img</code>é¡¹çš„é…ç½®å³å¯ï¼Œå€Ÿé‰´ä¸Šè¿°å±…ä¸­ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">img</span> <span class="p">{</span>
    <span class="k">clear</span><span class="p">:</span> <span class="kc">both</span><span class="p">;</span> 
    <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span> 
    <span class="k">margin</span><span class="p">:</span><span class="kc">auto</span><span class="p">;</span> 
<span class="p">}</span></code></pre></div>
<p>å¦‚æœå¼€ç€jekyll serveæœ¬åœ°æœåŠ¡çš„è¯ï¼Œä¿å­˜åï¼Œèƒ½ç«‹å³è®¿é—®127.0.0.1:4000ï¼ŒæŸ¥çœ‹è‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Œéšä¾¿æŸ¥çœ‹ä¸€ç¯‡åšæ–‡å°±èƒ½çœ‹åˆ°ï¼Œå›¾ç‰‡å±…ä¸­äº†ï¼Œå°±åƒä¸‹é¢å›¾ç‰‡çš„æ•ˆæœï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/8w9kh.png" alt="1" /></p>

<h4 id="é™„">é™„ï¼š</h4>

<p><strong>ä»ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œé…ç½®æˆ‘ä»¬æ–‡ç« çš„æ ·å¼çš„è¯ï¼Œå°±æ˜¯æ·»åŠ æˆ–ä¿®æ”¹_sassä¸‹çš„ _layout.scssæ–‡ä»¶çš„<code>post-cotent{}</code>é‡Œçš„ä»£ç ï¼Œæˆ‘è¿˜ä¿®æ”¹äº†è¡¨æ ¼çš„æ ·å¼</strong></p>

<ul>
<li><p>ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="nt">table</span> <span class="p">{</span>
    <span class="k">border-collapse</span><span class="p">:</span><span class="kc">collapse</span><span class="p">;</span>
    <span class="k">margin</span><span class="p">:</span><span class="mi">8</span><span class="kt">px</span> <span class="kc">auto</span> <span class="mi">16</span><span class="kt">px</span> <span class="kc">auto</span><span class="p">;</span>
    <span class="k">width</span><span class="p">:</span><span class="mi">100</span><span class="kt">%</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">th</span><span class="o">,</span> <span class="nt">td</span> <span class="p">{</span>
    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#828282</span><span class="p">;</span>
    <span class="k">padding</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span></code></pre></div></li>

<li><p>æ•ˆæœå°±åƒä¸‹é¢çš„è¡¨æ ¼ï¼š</p></li>
</ul>

<table>
<thead>
<tr>
<th>åç¼€å</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>zip</td>
<td>zipç¨‹åºæ‰“åŒ…å‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>rar</td>
<td>rarç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>7z</td>
<td>7zipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar</td>
<td>tarç¨‹åºæ‰“åŒ…ï¼Œæœªå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>gz</td>
<td>gzipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>xz</td>
<td>xzç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>bz2</td>
<td>bzip2ç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.gz</td>
<td>taræ‰“åŒ…ï¼Œgzipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.xz</td>
<td>taræ‰“åŒ…ï¼Œxzç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.bz2</td>
<td>taræ‰“åŒ…ï¼Œbzip2ç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.7z</td>
<td>taræ‰“åŒ…ï¼Œ7zipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>
</tbody>
</table>

<p><strong>å…¶ä»–çš„å…ƒç´ çš„æ ·å¼åŒæ ·å¯ä»¥åœ¨<code>post-content</code>é‡Œé…ç½®ã€‚</strong></p>]]></content>
		</item>
		
		<item>
			<title>æµ‹è¯•Arduinoä¸­digitalå‡½æ•°çš„æ‰§è¡Œæ—¶é—´</title>
			<link>https://www.smslit.top/2015/10/15/ArduinoDigitalWriteAndReadTime-Arduino/</link>
			<pubDate>Thu, 15 Oct 2015 12:34:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/15/ArduinoDigitalWriteAndReadTime-Arduino/</guid>
			<description>&lt;p&gt;å¥½ä¹…æ²¡æœ‰ç©Arduinoäº†ï¼Œä¹Ÿæ²¡è®°å½•è¿‡å¤šå°‘å…³äºArduinoçš„ä¸œè¥¿ï¼Œç°åœ¨æœ‰äº†æ—¶é—´ï¼Œå°±å†™ç‚¹ä¸œè¥¿å§ï¼Œå› ä¸ºArduinoå°è£…äº†åŸºæœ¬åŠŸèƒ½çš„å‡½æ•°ï¼Œæ–¹ä¾¿å¾ˆå¤šï¼Œä½†å¥½å¤šå‡½æ•°å†…éƒ¨å¯èƒ½æ·»åŠ äº†æˆ‘ä»¬ä¸çŸ¥é“çš„ä»£ç ï¼Œæˆ‘å¾ˆè‡ªç„¶åœ°æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œè¿è¡Œæ—¶é—´æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Œå½±å“å¤šå¤§å‘¢ï¼Ÿæµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹ä»€ä¹ˆæƒ…å†µã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å¥½ä¹…æ²¡æœ‰ç©Arduinoäº†ï¼Œä¹Ÿæ²¡è®°å½•è¿‡å¤šå°‘å…³äºArduinoçš„ä¸œè¥¿ï¼Œç°åœ¨æœ‰äº†æ—¶é—´ï¼Œå°±å†™ç‚¹ä¸œè¥¿å§ï¼Œå› ä¸ºArduinoå°è£…äº†åŸºæœ¬åŠŸèƒ½çš„å‡½æ•°ï¼Œæ–¹ä¾¿å¾ˆå¤šï¼Œä½†å¥½å¤šå‡½æ•°å†…éƒ¨å¯èƒ½æ·»åŠ äº†æˆ‘ä»¬ä¸çŸ¥é“çš„ä»£ç ï¼Œæˆ‘å¾ˆè‡ªç„¶åœ°æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œè¿è¡Œæ—¶é—´æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Œå½±å“å¤šå¤§å‘¢ï¼Ÿæµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹ä»€ä¹ˆæƒ…å†µã€‚</p>

<h3 id="æµ‹è¯•digitalwriteå’Œdigitalreadå‡½æ•°">æµ‹è¯•digitalWriteå’ŒdigitalReadå‡½æ•°</h3>

<h4 id="sketchä»£ç å¦‚ä¸‹">sketchä»£ç å¦‚ä¸‹</h4>

<p>ç¨‹åºä¸­ä¼šä½¿æ¿ä¸Šledä»¥2ç§’ä¸ºå‘¨æœŸé—ªçƒï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="n">ledState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">long</span> <span class="n">exeTime</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">long</span> <span class="n">dletaTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">String</span> <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;Delta Time(write):&#34;</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">exeTime</span> <span class="o">&gt;=</span> <span class="mi">1000000</span><span class="p">){</span>
        <span class="c1">// æµ‹è¯•digitalWriteçš„æ‰§è¡Œæ—¶é—´
</span><span class="c1"></span>        <span class="n">exeTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">();</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">ledState</span><span class="p">);</span>
        <span class="n">dletaTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">exeTime</span><span class="p">;</span>
        <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;Delta Time: Write-&gt;&#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">dletaTime</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;us&#34;</span><span class="p">;</span>
        <span class="c1">// æµ‹è¯•digitalReadçš„æ‰§è¡Œæ—¶é—´
</span><span class="c1"></span>        <span class="n">exeTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">();</span>
        <span class="n">digitalRead</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
        <span class="n">dletaTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">exeTime</span><span class="p">;</span>
        <span class="n">timeInfo</span> <span class="o">+=</span> <span class="s">&#34;, Read-&gt;&#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">dletaTime</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;us&#34;</span><span class="p">;</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">timeInfo</span><span class="p">);</span>
        <span class="n">ledState</span> <span class="o">=</span> <span class="n">HIGH</span> <span class="o">-</span> <span class="n">ledState</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<h4 id="ç»“æœåŠåˆ†æ">ç»“æœåŠåˆ†æ</h4>

<h5 id="ç»“æœå¦‚ä¸‹">ç»“æœå¦‚ä¸‹ï¼š</h5>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span><span class="p">,</span> <span class="n">Read</span><span class="o">-&gt;</span><span class="mi">8u</span><span class="n">s</span>
<span class="p">...</span></code></pre></div>
<h5 id="åˆ†æ">åˆ†æ</h5>

<p>å¦‚ä¸Šç»“æœå¯ä»¥çœ‹åˆ°digitalWriteå’ŒdigitalReadå‡½æ•°çš„æ‰§è¡Œæ—¶é—´å¤§çº¦8usï¼Œæœ‰æ—¶ä¹Ÿä¼šæ˜¯4usï¼Œä¸å¤ªæ¸…æ¥šè¿™æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Œä¸çŸ¥é“ä¼šä¸ä¼šæ˜¯microsçš„æ—¶é—´è¯¯å·®å¯¼è‡´çš„ï¼Œä¸è¿‡çœ‹æ—¶é—´çš„è¯ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°ä¸ä¼šå¤ªå½±å“è¿è¡Œæ—¶é—´çš„è¦æ±‚ã€‚</p>

<h3 id="æµ‹è¯•digitalwriteä¸å¯„å­˜å™¨ç›´æ¥èµ‹å€¼">æµ‹è¯•digitalWriteä¸å¯„å­˜å™¨ç›´æ¥èµ‹å€¼</h3>

<h4 id="sketchä»£ç å¦‚ä¸‹-1">sketchä»£ç å¦‚ä¸‹</h4>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="n">ledState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">long</span> <span class="n">exeTime</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">long</span> <span class="n">dletaTime</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">String</span> <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;Delta Time(write):&#34;</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">INPUT</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">exeTime</span> <span class="o">&gt;=</span> <span class="mi">2000000</span><span class="p">){</span>
        <span class="c1">// æµ‹è¯•digitalWriteçš„æ‰§è¡Œæ—¶é—´
</span><span class="c1"></span>        <span class="n">exeTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">();</span>
        <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">ledState</span><span class="p">);</span>
        <span class="n">dletaTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">exeTime</span><span class="p">;</span>
        <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;Delta Time: Write&#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">dletaTime</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;us&#34;</span><span class="p">;</span>
        <span class="c1">// æµ‹è¯•ç›´æ¥é…ç½®å¯„å­˜å™¨çš„æ‰§è¡Œæ—¶é—´
</span><span class="c1"></span>        <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> 
        <span class="n">exeTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">();</span>
        <span class="n">PORTB</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
        <span class="n">dletaTime</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span> <span class="o">-</span> <span class="n">exeTime</span><span class="p">;</span>
        <span class="n">timeInfo</span> <span class="o">+=</span> <span class="s">&#34;, Reg-&gt;&#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">dletaTime</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;us&#34;</span><span class="p">;</span>
        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">timeInfo</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div>
<h4 id="ç»“æœåŠåˆ†æ-1">ç»“æœåŠåˆ†æ</h4>

<h5 id="ç»“æœå¦‚ä¸‹-1">ç»“æœå¦‚ä¸‹ï¼š</h5>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write8us</span><span class="p">,</span> <span class="n">Reg</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write4us</span><span class="p">,</span> <span class="n">Reg</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write8us</span><span class="p">,</span> <span class="n">Reg</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write8us</span><span class="p">,</span> <span class="n">Reg</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write8us</span><span class="p">,</span> <span class="n">Reg</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write8us</span><span class="p">,</span> <span class="n">Reg</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="n">Delta</span> <span class="nl">Time</span><span class="p">:</span> <span class="n">Write8us</span><span class="p">,</span> <span class="n">Reg</span><span class="o">-&gt;</span><span class="mi">4u</span><span class="n">s</span>
<span class="p">...</span></code></pre></div>
<h5 id="åˆ†æ-1">åˆ†æï¼š</h5>

<p>æ ¹æ®ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œç›´æ¥å¯„å­˜å™¨å¤åˆ¶å ç”¨4usï¼Œè™½æ¯”è°ƒç”¨å‡½æ•°çš„é€Ÿåº¦å¿«ï¼Œä½†ä¹Ÿå·®åˆ«ä¸å¤§ï¼Œæ‰€ä»¥ä¸ç”¨å¤ªæ‹…å¿ƒè°ƒç”¨digitalå‡½æ•°ä¼šå½±å“æ‰§è¡Œæ•ˆç‡ã€‚</p>

<h3 id="å¯¹æ¯”ä¸¤ç§å®ç°ledé—ªçƒçš„æ–¹å¼">å¯¹æ¯”ä¸¤ç§å®ç°LEDé—ªçƒçš„æ–¹å¼</h3>

<h4 id="å®ç°">å®ç°ï¼š</h4>

<ul>
<li><p><strong>æ–¹å¼1ï¼šåˆ©ç”¨delayå»¶æ—¶åšåˆ°é—ªçƒï¼Œæ¯æ¬¡loopæ‰“å°Arduinoè¿è¡Œçš„æ—¶é—´ã€‚</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="n">ledState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">long</span> <span class="n">exeTime</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">String</span> <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;Time(write):&#34;</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="n">exeTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">exeTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
    <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;time:&#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">exeTime</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;ms&#34;</span><span class="p">;</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">ledState</span><span class="p">);</span>
    <span class="n">ledState</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">ledState</span><span class="p">;</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">timeInfo</span><span class="p">);</span>
    <span class="n">delay</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span></code></pre></div></li>

<li><p><strong>æ–¹å¼2ï¼šåˆ©ç”¨æ—¶é—´åˆ¤æ–­ï¼Œåšåˆ°ç²¾ç¡®1000mså¾ªç¯ï¼Œæ¯ä¸ªloopæ‰“å°è¿è¡Œæ—¶é—´ï¼›</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="n">ledState</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">long</span> <span class="n">exeTime</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">String</span> <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;Time(write):&#34;</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">pinMode</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
    <span class="n">exeTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">millis</span><span class="p">()</span> <span class="o">-</span> <span class="n">exeTime</span> <span class="o">&gt;=</span> <span class="mi">1000</span><span class="p">){</span>
        <span class="n">exeTime</span> <span class="o">=</span> <span class="n">millis</span><span class="p">();</span>
        <span class="n">timeInfo</span> <span class="o">=</span> <span class="s">&#34;time:&#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">exeTime</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;ms&#34;</span><span class="p">;</span>
            
        <span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">ledState</span><span class="p">);</span>
        <span class="n">ledState</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">ledState</span><span class="p">;</span>

        <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">timeInfo</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></div></li>
</ul>

<h4 id="å¯¹æ¯”ç»“æœ">å¯¹æ¯”ç»“æœ</h4>

<ul>
<li><p><strong>æ–¹å¼1</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="nl">time</span><span class="p">:</span><span class="mi">0</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">999</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">1999</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">3000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">4001</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">5002</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">6002</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">7003</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">8003</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">9004</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">10004</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">11004</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">12005</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">13005</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">14006</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">15006</span><span class="n">ms</span></code></pre></div></li>

<li><p><strong>æ–¹å¼2</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="nl">time</span><span class="p">:</span><span class="mi">1000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">2000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">3000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">4000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">5000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">6000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">7000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">8000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">9000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">10000</span><span class="n">m</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">11000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">12000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">13000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">14000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">15000</span><span class="n">ms</span>
<span class="nl">time</span><span class="p">:</span><span class="mi">16000</span><span class="n">ms</span></code></pre></div></li>
</ul>

<h4 id="åˆ†æ-2">åˆ†æ</h4>

<p>å¯ä»¥çœ‹åˆ°ä¸¤ç§æ–¹å¼çš„ç»“æœå¯¹æ¯”ï¼Œæ‰“å°æ—¶é—´æ˜¯msçº§åˆ«çš„ï¼Œç¬¬ä¸€ç§æ–¹å¼å°±æ˜æ˜¾çš„çœ‹åˆ°çš„æ—¶é—´å·®çš„ç´¯åŠ ï¼Œè€Œç¬¬äºŒç§æ–¹å¼åšåˆ°äº†ç²¾ç¡®æ—¶é—´çš„å¾ªç¯ï¼Œæœ‰æ•ˆçš„é¿å…ä¸­é—´ä»£ç æ‰§è¡Œæ—¶é—´çš„ä¸ç¡®å®šæ€§æ‰€é€ æˆå‘¨æœŸæ—¶é—´çš„å˜åŒ–ï¼Œè¿™ç§æ–¹æ³•æä¾›çš„æ€è·¯è¿˜æ˜¯æ¯”è¾ƒæœ‰ç”¨å¤„çš„ã€‚</p>

<ul>
<li><p><strong>æ–¹å¼1ä»£ç æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ</strong></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/9qjar.png" alt="1" /></p></li>

<li><p><strong>æ–¹å¼2ä»£ç æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ</strong></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/do0in.png" alt="2" /></p></li>
</ul>

<p><strong>å…¶ä¸­æœ‰Loop time = Free time + Work time</strong></p>]]></content>
		</item>
		
		<item>
			<title>Jekyllç¼–è¯‘å‡ºç°ivalid GBKé—®é¢˜</title>
			<link>https://www.smslit.top/2015/10/09/JekyllServeInvalidGBK-jekyll/</link>
			<pubDate>Fri, 09 Oct 2015 12:34:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/09/JekyllServeInvalidGBK-jekyll/</guid>
			<description>&lt;p&gt;ä¸çŸ¥ä»€ä¹ˆåŸå› ï¼Œåœ¨ç”¨jekyll serveç”Ÿæˆæœ¬åœ°ç½‘é¡µæ—¶å‡ºç°äº†ivalid GBKé—®é¢˜ï¼Œå› ä¸ºjekyllåˆ©ç”¨çš„æ˜¯rubyï¼Œåº”è¯¥æ˜¯rubyçš„ç¼–è¯‘é”™è¯¯ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>ä¸çŸ¥ä»€ä¹ˆåŸå› ï¼Œåœ¨ç”¨jekyll serveç”Ÿæˆæœ¬åœ°ç½‘é¡µæ—¶å‡ºç°äº†ivalid GBKé—®é¢˜ï¼Œå› ä¸ºjekyllåˆ©ç”¨çš„æ˜¯rubyï¼Œåº”è¯¥æ˜¯rubyçš„ç¼–è¯‘é”™è¯¯ã€‚</p>

<h4 id="ç°è±¡">ç°è±¡</h4>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="no">Conversion</span> <span class="ss">error</span><span class="p">:</span> <span class="no">Jekyll</span><span class="o">::</span><span class="no">Converters</span><span class="o">::</span><span class="no">Scss</span> <span class="n">encountered</span> <span class="n">an</span> <span class="n">error</span> <span class="k">while</span> <span class="n">converting</span> <span class="s1">&#39;css/main.scss&#39;</span><span class="p">:</span>
                    <span class="no">Invalid</span> <span class="no">GBK</span> <span class="n">character</span> <span class="s2">&#34;</span><span class="se">\xE5</span><span class="s2">&#34;</span> <span class="n">on</span> <span class="n">line</span> <span class="mi">368</span></code></pre></div>
<p>æœç´¢ç½‘ä¸Šï¼Œæœç„¶å‘ç°æœ‰äººä¹Ÿé‡åˆ°äº†æ­¤é—®é¢˜ï¼Œåˆ†æ:<code>Invalid GBK character &quot;\xE5&quot; on line 368</code>æç¤ºçš„å€’å¾ˆæ¸…æ¥šï¼Œä½†æˆ‘çš„jekyllåšå®¢æ–‡ä»¶å¤¹cssçš„main.scssæ²¡æœ‰ç¬¬368è¡Œå‘€ï¼Œåº”è¯¥æ˜¯ç¼–è¯‘æ—¶è°ƒç”¨äº†å…¶ä»–æ–‡ä»¶ï¼Œè€Œè¿™äº›æ–‡ä»¶åŒ…å«äº†ä¸­æ–‡ç¼–ç ã€‚</p>

<h4 id="è§£å†³">è§£å†³</h4>

<p>ä¿®æ”¹ç¼–è¯‘å¼•æ“æ–‡ä»¶è®¾ç½®å¤–éƒ¨é»˜è®¤ç¼–ç æ˜¯utf-8å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥ä¿®æ”¹rubyæ–‡ä»¶ï¼Œæ ¹æ®è‡ªå·±çš„å®‰è£…ç›®å½•æ‰¾åˆ°æ­¤æ–‡ä»¶,åœ¨<code>module Sass</code>ä¹‹åæ·»åŠ <code>Encoding.default_external = Encoding.find('utf-8')</code>ä¸€è¡Œå³å¯ï¼Œæˆ‘çš„æ˜¯<code>C:\Ruby22-x64\lib\ruby\gems\2.2.0\gems\sass-3.4.18\lib\sass\engine.rb</code>ï¼Œå¦‚ä¸‹çš„æ ·å­ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;sass/script&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sass/scss&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sass/stack&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sass/error&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sass/importers&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sass/shared&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sass/media&#39;</span>
<span class="nb">require</span> <span class="s1">&#39;sass/supports&#39;</span>

<span class="k">module</span> <span class="nn">Sass</span>

<span class="no">Encoding</span><span class="o">.</span><span class="n">default_external</span> <span class="o">=</span> <span class="no">Encoding</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code></pre></div>]]></content>
		</item>
		
		<item>
			<title>è§£å†³windowsä¸‹git bashä¸­æ–‡ä¹±ç é—®é¢˜</title>
			<link>https://www.smslit.top/2015/10/09/GitBashChineseCodeGarbled-Git/</link>
			<pubDate>Fri, 09 Oct 2015 12:14:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/10/09/GitBashChineseCodeGarbled-Git/</guid>
			<description>&lt;p&gt;å› ä¸ºwindowsä¸‹é»˜è®¤ç¼–ç å¹¶ä¸æ˜¯ä¸€èˆ¬é¡¹ç›®ä½¿ç”¨çš„UTF-8ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨git bashæ—¶æ€»ä¼šå‡ºç°ä¹±ç ç°è±¡ï¼Œæœ¬æ–‡ä»…å°±æˆ‘åœ¨ä½¿ç”¨git bashæ—¶å‡ºç°çš„é—®é¢˜æå‡ºè§£å†³åŠæ³•ï¼Œå¹¶æ•´ç†åˆ«äººå‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>å› ä¸ºwindowsä¸‹é»˜è®¤ç¼–ç å¹¶ä¸æ˜¯ä¸€èˆ¬é¡¹ç›®ä½¿ç”¨çš„UTF-8ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨git bashæ—¶æ€»ä¼šå‡ºç°ä¹±ç ç°è±¡ï¼Œæœ¬æ–‡ä»…å°±æˆ‘åœ¨ä½¿ç”¨git bashæ—¶å‡ºç°çš„é—®é¢˜æå‡ºè§£å†³åŠæ³•ï¼Œå¹¶æ•´ç†åˆ«äººå‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ³•ã€‚</p>

<h3 id="è§£å†³ä¸­æ–‡è¾“å…¥é—®é¢˜">è§£å†³ä¸­æ–‡è¾“å…¥é—®é¢˜</h3>

<p>åœ¨git bashä¸‹è¾“å…¥ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">set</span> output-meta on <span class="c1">#bashä¸­å¯ä»¥æ­£å¸¸è¾“å…¥ä¸­æ–‡</span>
$ <span class="nb">set</span> convert-meta off </code></pre></div>
<h3 id="git-logä¸­æ–‡ä¹±ç é—®é¢˜">git logä¸­æ–‡ä¹±ç é—®é¢˜</h3>

<p>è§£å†³æ­¤é—®é¢˜éœ€è¦è®¾ç½®Git bashæ”¯æŒUTF-8ç¼–ç ï¼Œæ‰€ä»¥åœ¨git bashä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ git config --global core.quotepath <span class="nb">false</span>          <span class="c1"># æ˜¾ç¤º status ç¼–ç </span>
$ git config --global gui.encoding utf-8            <span class="c1"># å›¾å½¢ç•Œé¢ç¼–ç </span>
$ git config --global i18n.commit.encoding utf-8    <span class="c1"># æäº¤ä¿¡æ¯ç¼–ç </span>
$ git config --global i18n.logoutputencoding utf-8  <span class="c1"># è¾“å‡º log ç¼–ç </span>
$ <span class="nb">export</span> <span class="nv">LESSCHARSET</span><span class="o">=</span>utf-8
<span class="c1"># æœ€åä¸€æ¡å‘½ä»¤æ˜¯å› ä¸º git log é»˜è®¤ä½¿ç”¨ less åˆ†é¡µï¼Œæ‰€ä»¥éœ€è¦ bash å¯¹ less å‘½ä»¤è¿›è¡Œ utf-8 ç¼–ç </span></code></pre></div>
<h3 id="lsæ–‡ä»¶åˆ—è¡¨ä¸­æ–‡ä¹±ç ">lsæ–‡ä»¶åˆ—è¡¨ä¸­æ–‡ä¹±ç </h3>

<p>åœ¨git bashä¸‹è¾“å…¥å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">alias</span> <span class="nv">ls</span><span class="o">=</span><span class="s1">&#39;ls --show-control-chars --color=auto&#39;</span> <span class="c1">#lsèƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºä¸­æ–‡&#34;</span></code></pre></div>
<h3 id="è§£å†³git-statusä¸­æ–‡ä¹±ç é—®é¢˜">è§£å†³git statusä¸­æ–‡ä¹±ç é—®é¢˜</h3>

<p>git bashä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">git config --global core.quotepath false</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>è¶…é…·çš„é«˜ç§‘æŠ€é­”æ–¹Cubli</title>
			<link>https://www.smslit.top/2015/09/27/Cubli-share/</link>
			<pubDate>Sun, 27 Sep 2015 20:14:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/09/27/Cubli-share/</guid>
			<description>&lt;p&gt;æ€ä¹ˆæ¨éƒ½ä¸å€’ï¼è¶…é…·çš„é«˜ç§‘æŠ€é­”æ–¹Cubli&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æ€ä¹ˆæ¨éƒ½ä¸å€’ï¼è¶…é…·çš„é«˜ç§‘æŠ€é­”æ–¹Cubli</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/share/cubi/cubli.mp4" poster="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/share/cubi/cubli.jpg" controls="controls" width="100%">Cubli</video>]]></content>
		</item>
		
		<item>
			<title>linuxä¸‹æ–‡ä»¶æ‰“åŒ…åŠè§£å‹ç¼©</title>
			<link>https://www.smslit.top/2015/09/12/linux-zipUnzip/</link>
			<pubDate>Sat, 12 Sep 2015 14:00:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/09/12/linux-zipUnzip/</guid>
			<description>&lt;p&gt;æœ¬æ–‡æ˜¯å…³äºlinuxä¸‹æ–‡ä»¶æ‰“åŒ…å’Œè§£å‹ç¼©çš„å­¦ä¹ è®°å½•ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡æ˜¯å…³äºlinuxä¸‹æ–‡ä»¶æ‰“åŒ…å’Œè§£å‹ç¼©çš„å­¦ä¹ è®°å½•ã€‚</p>

<p>windowsä¸­å¸¸ç”¨çš„å‹ç¼©æ ¼å¼ä¸å¤–ä¹zipï¼Œrarï¼Œ7zä¸‰ç§æ ¼å¼ï¼Œè€Œåˆ°äº†linuxé™¤äº†è¿™ä¸‰ç§å‹ç¼©æ ¼å¼è¿˜æœ‰å¾ˆå¤šï¼šgz,xz,bz2,tar,tar.gz,tar.xz,tar.bz2ï¼Œç®€å•ä»‹ç»å¦‚ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>åç¼€å</th>
<th>è¯´æ˜</th>
</tr>
</thead>

<tbody>
<tr>
<td>zip</td>
<td>zipç¨‹åºæ‰“åŒ…å‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>rar</td>
<td>rarç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>7z</td>
<td>7zipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar</td>
<td>tarç¨‹åºæ‰“åŒ…ï¼Œæœªå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>gz</td>
<td>gzipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>xz</td>
<td>xzç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>bz2</td>
<td>bzip2ç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.gz</td>
<td>taræ‰“åŒ…ï¼Œgzipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.xz</td>
<td>taræ‰“åŒ…ï¼Œxzç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.bz2</td>
<td>taræ‰“åŒ…ï¼Œbzip2ç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>

<tr>
<td>tar.7z</td>
<td>taræ‰“åŒ…ï¼Œ7zipç¨‹åºå‹ç¼©çš„æ–‡ä»¶</td>
</tr>
</tbody>
</table>

<p><strong>ä¸è¿‡å¸¸ç”¨çš„åªæ˜¯zipï¼Œrarå’Œtarå‘½ä»¤ã€‚</strong></p>

<h4 id="zipå‹ç¼©æ‰“åŒ…ç¨‹åº">zipå‹ç¼©æ‰“åŒ…ç¨‹åº</h4>

<h5 id="ä½¿ç”¨zipæ‰“åŒ…æ–‡ä»¶">ä½¿ç”¨zipæ‰“åŒ…æ–‡ä»¶</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ zip -r -q -o test.zip ./test</code></pre></div>
<p>ä¸Šé¢å‘½ä»¤å°†å½“å‰ç›®å½•ä¸‹çš„testç›®å½•æ‰“åŒ…å‹ç¼©æˆtest.zipã€‚</p>

<ul>
<li>-rï¼šè¡¨ç¤ºé€’å½’æ‰“åŒ…ç›®å½•åŠç›®å½•é‡Œçš„æ‰€æœ‰å†…å®¹</li>
<li>-qï¼šè¡¨ç¤ºå®‰é™æ¨¡å¼ï¼Œä¸åœ¨ç»ˆç«¯é‡Œæ‰“å°ä¿¡æ¯</li>
<li>-oï¼šè¡¨ç¤ºè¾“å‡ºæ–‡ä»¶ï¼Œåé¢éœ€è¦ç´§è·Ÿæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å</li>
</ul>

<h5 id="æŸ¥çœ‹å‹ç¼©åŒ…ä¿¡æ¯-å¤§å°æˆ–å…¶å®ƒ">æŸ¥çœ‹å‹ç¼©åŒ…ä¿¡æ¯ï¼ˆå¤§å°æˆ–å…¶å®ƒï¼‰</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ du -h test.zip</code></pre></div>
<ul>
<li>-hï¼š&ndash;human-readable</li>
<li>-dï¼š&ndash;max-depthï¼ˆæŸ¥çœ‹æ–‡ä»¶æ·±åº¦ï¼‰</li>
</ul>

<p>æˆ–</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ file test.zip</code></pre></div>
<h5 id="è®¾ç½®å‹ç¼©çº§åˆ«">è®¾ç½®å‹ç¼©çº§åˆ«</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ zip -r -9 -q -o test9.zip ./test -x ./*.zip</code></pre></div>
<ul>
<li>-[1~9]ï¼š1è¡¨ç¤ºæœ€å¿«å‹ç¼©ä½“ç§¯æœ€å¤§ï¼Œ9è¡¨ç¤ºä½“ç§¯æœ€å°è€—æ—¶æœ€é•¿</li>
<li>-xï¼šæ’é™¤æ–‡ä»¶é€‰é¡¹ï¼Œåé¢åŠ ä¸Šæ–‡ä»¶</li>
</ul>

<h5 id="åŠ å¯†å‹ç¼©">åŠ å¯†å‹ç¼©</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ zip -r -e -o test.zip ./test</code></pre></div>
<ul>
<li>-eï¼šåŠ å¯†é€‰é¡¹</li>
</ul>

<h5 id="å…¼å®¹windowsæ¢è¡Œé€‰é¡¹">å…¼å®¹windowsæ¢è¡Œé€‰é¡¹</h5>

<ul>
<li><p>å…³äºzipå‘½ä»¤ï¼Œå› ä¸º Windows ç³»ç»Ÿä¸ Linux/Unix åœ¨æ–‡æœ¬æ–‡ä»¶æ ¼å¼ä¸Šçš„ä¸€äº›å…¼å®¹é—®é¢˜ï¼Œæ¯”å¦‚æ¢è¡Œç¬¦ï¼ˆä¸ºä¸å¯è§å­—ç¬¦ï¼‰ï¼Œåœ¨ Windows ä¸º CR+LFï¼ˆCarriage-Return+Line-Feedï¼šå›è½¦åŠ æ¢è¡Œï¼‰ï¼Œè€Œåœ¨ Linux/Unix ä¸Šä¸º LFï¼ˆæ¢è¡Œï¼‰ï¼Œæ‰€ä»¥å¦‚æœåœ¨ä¸åŠ å¤„ç†çš„æƒ…å†µä¸‹ï¼Œåœ¨ Linux ä¸Šç¼–è¾‘çš„æ–‡æœ¬ï¼Œåœ¨ Windows ç³»ç»Ÿä¸Šæ‰“å¼€å¯èƒ½çœ‹èµ·æ¥æ˜¯æ²¡æœ‰æ¢è¡Œçš„ã€‚å¦‚æœä½ æƒ³è®©ä½ åœ¨ Linux åˆ›å»ºçš„ zip å‹ç¼©æ–‡ä»¶åœ¨ Windows ä¸Šè§£å‹åæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦å¯¹å‘½ä»¤åšä¸€äº›ä¿®æ”¹ï¼Œéœ€è¦åŠ ä¸ªé€‰é¡¹<code>-l</code>ï¼Œå°†<code>LF</code>è½¬æ¢ä¸º<code>CR+LF</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ zip -r -l -o test.zip ./test</code></pre></div></li>
</ul>

<h4 id="unzipå‘½ä»¤è§£å‹ç¼©zipæ–‡ä»¶">unzipå‘½ä»¤è§£å‹ç¼©zipæ–‡ä»¶</h4>

<h5 id="æ™®é€šè§£å‹zip">æ™®é€šè§£å‹zip</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ unzip test.zip</code></pre></div>
<h5 id="å¸¦å‚æ•°è§£å‹">å¸¦å‚æ•°è§£å‹</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ unzip -q test.zip -d ziptest</code></pre></div>
<ul>
<li>-qï¼šé™é»˜æ¨¡å¼ï¼Œä¸æ‰“å°è§£å‹ä¿¡æ¯</li>
<li>-dï¼šè§£å‹åˆ°æŒ‡å®šç›®å½•ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨å°±æ–°å»ºç›®å½•</li>
</ul>

<h5 id="æ¢è¡Œå…¼å®¹é—®é¢˜">æ¢è¡Œå…¼å®¹é—®é¢˜</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ unzip -l test.zip</code></pre></div>
<h5 id="ç¼–ç é—®é¢˜">ç¼–ç é—®é¢˜</h5>

<ul>
<li><p>ä½¿ç”¨unzipè§£å‹æ–‡ä»¶æ—¶æˆ‘ä»¬åŒæ ·åº”è¯¥æ³¨æ„å…¼å®¹é—®é¢˜ï¼Œä¸è¿‡è¿™é‡Œæˆ‘ä»¬å…³å¿ƒçš„ä¸å†æ˜¯ä¸Šé¢çš„é—®é¢˜ï¼Œè€Œæ˜¯ä¸­æ–‡ç¼–ç çš„é—®é¢˜ï¼Œé€šå¸¸ Windows ç³»ç»Ÿä¸Šé¢åˆ›å»ºçš„å‹ç¼©æ–‡ä»¶ï¼Œå¦‚æœæœ‰æœ‰åŒ…å«ä¸­æ–‡çš„æ–‡æ¡£æˆ–ä»¥ä¸­æ–‡ä½œä¸ºæ–‡ä»¶åçš„æ–‡ä»¶æ—¶é»˜è®¤ä¼šé‡‡ç”¨ GBK æˆ–å…¶å®ƒç¼–ç ï¼Œè€Œ Linux ä¸Šé¢é»˜è®¤ä½¿ç”¨çš„æ˜¯ UTF-8 ç¼–ç ï¼Œå¦‚æœä¸åŠ ä»»ä½•å¤„ç†ï¼Œç›´æ¥è§£å‹çš„è¯å¯èƒ½ä¼šå‡ºç°ä¸­æ–‡ä¹±ç çš„é—®é¢˜ï¼ˆæœ‰æ—¶å€™å®ƒä¼šè‡ªåŠ¨å¸®ä½ å¤„ç†ï¼‰ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è§£å‹æ—¶æŒ‡å®šç¼–ç ç±»å‹ã€‚ä½¿ç”¨-Oï¼ˆè‹±æ–‡å­—æ¯ï¼Œå¤§å†™oï¼‰å‚æ•°æŒ‡å®šç¼–ç ç±»å‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ unzip -O GBK test.zip</code></pre></div></li>
</ul>

<h4 id="raræ‰“åŒ…å‹ç¼©å‘½ä»¤">raræ‰“åŒ…å‹ç¼©å‘½ä»¤</h4>

<p>rarä¹Ÿæ˜¯ Windows ä¸Šå¸¸ç”¨çš„ä¸€ç§å‹ç¼©æ–‡ä»¶æ ¼å¼ï¼Œåœ¨ Linux ä¸Šå¯ä»¥ä½¿ç”¨rarå’Œunrarå·¥å…·åˆ†åˆ«åˆ›å»ºå’Œè§£å‹ rar å‹ç¼©åŒ…ã€‚</p>

<h5 id="å®‰è£…rarå’Œunrarå·¥å…·">å®‰è£…rarå’Œunrarå·¥å…·</h5>

<ul>
<li><p>ubuntu:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo apt-get update
$ sudo apt-get install rar unrar</code></pre></div></li>

<li><p>fedora</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo dnf update
$ sudo dnf install unrar</code></pre></div></li>

<li><p>ç›®å‰ï¼Œæˆ‘åªæ‰¾åˆ°äº†fedoraä¸‹unrarã€‚</p></li>
</ul>

<h5 id="ä»æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºå‹ç¼©åŒ…æˆ–æ·»åŠ æ–‡ä»¶åˆ°å‹ç¼©åŒ…">ä»æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•åˆ›å»ºå‹ç¼©åŒ…æˆ–æ·»åŠ æ–‡ä»¶åˆ°å‹ç¼©åŒ…</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rar a test.rar .</code></pre></div>
<ul>
<li>ä¸Šé¢çš„å‘½ä»¤ä½¿ç”¨aå‚æ•°æ·»åŠ ä¸€ä¸ªç›®å½•ï½åˆ°ä¸€ä¸ªå½’æ¡£æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨å°±ä¼šè‡ªåŠ¨åˆ›å»ºã€‚</li>
<li><em>æ³¨ï¼šrar çš„å‘½ä»¤å‚æ•°æ²¡æœ‰-ï¼Œå¦‚æœåŠ ä¸Šä¼šæŠ¥é”™ã€‚</em></li>
</ul>

<h5 id="ä»æŒ‡å®šå‹ç¼©åŒ…æ–‡ä»¶ä¸­åˆ é™¤æŸä¸ªæ–‡ä»¶">ä»æŒ‡å®šå‹ç¼©åŒ…æ–‡ä»¶ä¸­åˆ é™¤æŸä¸ªæ–‡ä»¶</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rar d test.rar .zshrc</code></pre></div>
<h5 id="æŸ¥çœ‹ä¸è§£å‹æ–‡ä»¶">æŸ¥çœ‹ä¸è§£å‹æ–‡ä»¶</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rar l test.rar</code></pre></div>
<h5 id="unrarè§£å‹æ–‡ä»¶">unrarè§£å‹æ–‡ä»¶</h5>

<ul>
<li><p>å…¨è·¯å¾„è§£å‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ unrar x test.rar</code></pre></div></li>

<li><p>å»æ‰è§£å‹è·¯å¾„</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ mkdir tmp
$ unrar e test.rar tmp/</code></pre></div></li>
</ul>

<h4 id="taræ‰“åŒ…è§£å‹å·¥å…·">taræ‰“åŒ…è§£å‹å·¥å…·</h4>

<p>åœ¨ Linux ä¸Šé¢æ›´å¸¸ç”¨çš„æ˜¯tarå·¥å…·ï¼Œtar åŸæœ¬åªæ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œåªæ˜¯åŒæ—¶è¿˜æ˜¯å®ç°äº†å¯¹ 7zï¼Œgzipï¼Œxzï¼Œbzip2 ç­‰å·¥å…·çš„æ”¯æŒï¼Œè¿™äº›å‹ç¼©å·¥å…·æœ¬èº«åªèƒ½å®ç°å¯¹æ–‡ä»¶æˆ–ç›®å½•ï¼ˆå•ç‹¬å‹ç¼©ç›®å½•ä¸­çš„æ–‡ä»¶ï¼‰çš„å‹ç¼©ï¼Œæ²¡æœ‰å®ç°å¯¹æ–‡ä»¶çš„æ‰“åŒ…å‹ç¼©ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ— éœ€å†å•ç‹¬å»å­¦ä¹ å…¶ä»–å‡ ä¸ªå·¥å…·ï¼Œtar çš„è§£å‹å’Œå‹ç¼©éƒ½æ˜¯åŒä¸€ä¸ªå‘½ä»¤ï¼Œåªéœ€å‚æ•°ä¸åŒï¼Œä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>

<h5 id="åˆ›å»ºä¸€ä¸ªtaråŒ…">åˆ›å»ºä¸€ä¸ªtaråŒ…</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tar -cf test.tar ~</code></pre></div>
<ul>
<li>-cï¼šè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªtaråŒ…</li>
<li>-fï¼šç”¨äºæŒ‡å®šåˆ›å»ºçš„æ–‡ä»¶åï¼Œæ³¨æ„æ–‡ä»¶åå¿…é¡»ç´§è·Ÿåœ¨-fåé¢ï¼Œæ¯”å¦‚ä¸èƒ½å†™æˆ<code>tar -fc test.tar</code>ï¼Œå¯ä»¥å†™æˆ<code>tar -f test.tar -c ~</code>ã€‚</li>
<li>-vï¼šä»¥å¯è§†çš„æ–¹å¼è¾“å‡ºæ‰“åŒ…æ–‡ä»¶</li>

<li><p>-zï¼šåˆ›å»ºgzipå‹ç¼©æ–‡ä»¶ï¼Œå¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tar -czf test.tar.gz ~</code></pre></div></li>

<li><p><em>æ³¨ï¼štarä¼šè‡ªåŠ¨å»æ‰è¡¨ç¤ºç»å¯¹è·¯å¾„çš„/ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨-Pä¿ç•™ç»å¯¹è·¯å¾„ç¬¦ã€‚</em></p></li>
</ul>

<h5 id="è§£å‹taræ–‡ä»¶åŒ…">è§£å‹taræ–‡ä»¶åŒ…</h5>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ mkdir tardir
$ tar -xf test.tar -C tardir</code></pre></div>
<ul>
<li>-xï¼šè§£å‹æ–‡ä»¶</li>
<li>-Cï¼šè§£å‹åˆ°æŒ‡å®šç›®å½•</li>
<li>-tï¼šä¹‹æŸ¥çœ‹ä¸è§£å‹</li>
<li>-pï¼šä¿ç•™æ–‡ä»¶å±æ€§</li>
<li>-hï¼šä¿ç•™æ–‡ä»¶é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥å’Œè½¯é“¾æ¥ï¼‰</li>

<li><p>-zï¼šè§£å‹tar.gzå‹ç¼©æ–‡ä»¶(å³gzipæ–‡ä»¶)ï¼Œå¦‚ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tar -xzf test.tar.gz</code></pre></div></li>
</ul>

<p>ç°åœ¨æˆ‘ä»¬è¦ä½¿ç”¨å…¶ä»–çš„å‹ç¼©å·¥å…·åˆ›å»ºæˆ–è§£å‹ç›¸åº”æ–‡ä»¶åªéœ€è¦æ›´æ”¹ä¸€ä¸ªå‚æ•°å³å¯ï¼š</p>

<table>
<thead>
<tr>
<th>å‹ç¼©æ–‡ä»¶æ ¼å¼</th>
<th>å¯¹åº”è§£å‹å‚æ•°</th>
</tr>
</thead>

<tbody>
<tr>
<td>.tar.gz</td>
<td>-z</td>
</tr>

<tr>
<td>.tar.xz</td>
<td>-J</td>
</tr>

<tr>
<td>.tar.bz2</td>
<td>-j</td>
</tr>
</tbody>
</table>

<h4 id="å‚è€ƒ">å‚è€ƒ</h4>

<p><a href="https://www.shiyanlou.com/courses/1" target="_blank">å®éªŒæ¥¼ç½‘ç«™è¯¾ç¨‹-linuxåŸºç¡€å…¥é—¨-æ–‡ä»¶æ‰“åŒ…ä¸è§£å‹ç¼©</a></p>]]></content>
		</item>
		
		<item>
			<title>Fedora Linuxä¸‹å°†ç»ˆç«¯æ”¹ç”¨zsh</title>
			<link>https://www.smslit.top/2015/08/26/zshFedoraLinux/</link>
			<pubDate>Wed, 26 Aug 2015 17:55:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/08/26/zshFedoraLinux/</guid>
			<description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Fedora Linuxä¸‹ä»bashè¿›å…¥zshé˜µè¥ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Fedora Linuxä¸‹ä»bashè¿›å…¥zshé˜µè¥ã€‚</p>

<h4 id="ç®€è¯´">ç®€è¯´</h4>

<p>æ®è¯´zshæ˜¯å¾ˆå¤æ‚çš„ï¼Œä½†åŠŸèƒ½å¼ºå¤§ï¼Œå› ç‰›äººrobbyrussellå¼„äº†ä¸ªoh-my-zshï¼Œè®©zshçš„ä½¿ç”¨é—¨æ§›é™äº†å¥½å¤šã€‚çœ‹åˆ°æœ‰ç½‘å‹æ•´ç†äº†<a href="http://www.linuxeden.com/html/develop/20120928/130477.html" target="_blank">ä½¿ç”¨ Zsh çš„ä¹ä¸ªç†ç”±</a>ï¼Œä¸çŸ¥é“è¿™äº›æ˜¯ä¸æ˜¯å¯ä»¥è¯´æœä½ ä½¿ç”¨zshï¼Œ^_^ï¼Œé…åˆoh-my-zshï¼Œå¯ä»¥ç®€å•ä¸Šæ‰‹zshï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹æˆ‘åœ¨fedora22ä¸‹å®‰è£…zshçš„è¿‡ç¨‹ã€‚</p>

<h4 id="å®‰è£…è¿‡ç¨‹">å®‰è£…è¿‡ç¨‹</h4>

<h5 id="å®‰è£…zsh"><strong>å®‰è£…zsh</strong></h5>

<p><strong>fedoraæ˜¯ä¸è‡ªå¸¦zshï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å®‰è£…ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…ï¼š</strong></p>

<p><code>sudo dnf install zsh</code></p>

<h5 id="å®‰è£…oh-my-zsh"><strong>å®‰è£…oh-my-zsh</strong></h5>

<p><strong>oh-my-zshç¡®å®å¾ˆèµï¼Œè¿™ä¸ªå¿…é¡»å®‰è£…ï¼Œå®ƒæ˜¯githubä¸Šçš„ä¸€ä¸ªé¡¹ç›®ï¼Œgit cloneåˆ°$HOMEä¸‹å°±OKäº†ï¼š</strong></p>

<p><code>cd ~</code></p>

<p><code>git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</code></p>

<p><strong>æ³¨ï¼š</strong>æ²¡æœ‰ç‰¹æ®Šå£°æ˜ï¼Œå‡åœ¨$HOMEç›®å½•ä¸‹æ“ä½œã€‚</p>

<h5 id="ç”Ÿæˆ-zshrc-æ–‡ä»¶"><strong>ç”Ÿæˆ[.zshrc]æ–‡ä»¶</strong></h5>

<p><strong>åªéœ€ä»oh-my-zshä¸­çš„æ¨¡æ¿æ‹·è´è¿‡æ¥å°±å¯ä»¥äº†ï¼Œè¿™ä¸ªæ–‡ä»¶ç±»ä¼¼[.bashrc]æ–‡ä»¶ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤æå®šï¼š</strong></p>

<p><code>cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</code></p>

<h5 id="é…ç½®ä¸»é¢˜"><strong>é…ç½®ä¸»é¢˜</strong></h5>

<ul>
<li><p>ç¼–è¾‘[.zshrc]æ–‡ä»¶ï¼Œåªéœ€é…ç½®[ZSH_THEME]çš„å€¼å°±å¯ä»¥ï¼Œæˆ‘æ˜¯ç”¨é»˜è®¤çš„[robbyrussell]ä¸»é¢˜ï¼Œè¿˜æœ‰ä¸ªä¸é”™çš„ä¸»é¢˜[candy]ã€‚</p>

<ul>
<li><code>gedit .zshrc</code></li>
<li>ä¿®æ”¹[ZSH_THEME=&ldquo;robbyrussell&rdquo;]ä¸€é¡¹å³å¯ï¼Œå°†robbyrussellä¿®æ”¹ä¸ºä½ æƒ³è¦çš„ä¸»é¢˜å°±å¯ä»¥äº†ã€‚æ¯”å¦‚[ZSH_THEME=&ldquo;candy&rdquo;]ã€‚</li>
</ul></li>

<li><p>ä½ å¯èƒ½ä¼šé—®éƒ½æœ‰ä»€ä¹ˆä¸»é¢˜ï¼Œè¿™ä¸ªæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ¥åˆ—å‡ºæ‰€æœ‰ä¸»é¢˜ï¼Œè‡ªå·±è¯•ç€çœ‹çœ‹ï¼Œè‡ªå·±å–œæ¬¢å“ªä¸ªå°±ç”¨å“ªä¸ªï¼š</p>

<p><code>ls ~/.oh-my-zsh/themes/</code></p></li>
</ul>

<h5 id="é…ç½®æ’ä»¶"><strong>é…ç½®æ’ä»¶</strong></h5>

<ul>
<li><p>ç¼–è¾‘[.zshrc]æ–‡ä»¶ï¼Œåªéœ€é…ç½®[plugins]çš„å€¼ï¼Œé»˜è®¤æ˜¯[plugins=(git)]ï¼Œè¦ç”¨æ’ä»¶çš„è¯åªéœ€åŠ å…¥åç§°ï¼Œç©ºæ ¼ç›¸éš”å°±å¯ä»¥ï¼Œå°±åƒè¿™æ ·ï¼š</p>

<p><code>plugins=(git git-flow debian grails rvm history-substring-search github gradle svn node npm zsh-syntax-highlighting sublime)</code></p></li>

<li><p>åŒæ ·é€šè¿‡ä¸‹é¢å‘½ä»¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŸ¥çœ‹å·²ç»å®‰è£…çš„æ’ä»¶ï¼š</p>

<p><code>ls ~/.oh-my-zsh/plugins/</code></p></li>
</ul>

<h5 id="åˆ‡æ¢åˆ°zsh"><strong>åˆ‡æ¢åˆ°zsh</strong></h5>

<p><strong>æœ€åä¸€æ­¥ï¼Œå°±æ˜¯åˆ‡æ¢åˆ°zshï¼Œç„¶åé‡å¯å°±å¯ä»¥ç”¨ä¸Šzshäº†ï¼Œæ„Ÿå—å…¶å¼ºå¤§å§ï¼</strong></p>

<p><code>chsh -s /bin/zsh</code></p>

<h4 id="å°¾è¿°">å°¾è¿°</h4>

<p>æ›´å¤šä¸oh-my-zshç›¸å…³ï¼Œè¯¦è§<a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank"><strong>oh-my-zsh</strong></a></p>]]></content>
		</item>
		
		<item>
			<title>Fedora Linuxä¸‹å®‰è£…Jekyll</title>
			<link>https://www.smslit.top/2015/08/24/jekyllInstallFedoraLinux/</link>
			<pubDate>Mon, 24 Aug 2015 17:55:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/08/24/jekyllInstallFedoraLinux/</guid>
			<description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Fedora Linuxä¸‹å®‰è£…Jekyllã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨Fedora Linuxä¸‹å®‰è£…Jekyllã€‚</p>

<h3 id="ç®€è¯´">ç®€è¯´</h3>

<p>ç»è¿‡ä¸€å¤©æ—¶é—´æŠ˜è…¾å…¬å¸é…å‘çš„thinkpad-x250å®‰è£…äº†Fedora22ï¼Œå®‰è£…äº†Evopopä¸»é¢˜å’Œå›¾æ ‡åŒ…ï¼Œç®€ç›´ç¾ç¿»äº†ï¼ŒåŸæ¥linuxä¹Ÿå¯ä»¥è¿™ä¹ˆç¾ï¼Œå“ˆå“ˆï¼Œå®‰è£…å„ç§è½¯ä»¶å’Œå·¥å…·æ˜¯å…ä¸äº†çš„ï¼Œjekyllä¹Ÿä¸ä¾‹å¤–ï¼Œä»Šå¤©å°±è¯´ä¸€ä¸‹æˆ‘åœ¨Fedoraä¸‹å®‰è£…jekyllçš„è¿‡ç¨‹ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/s9ybv.png" alt="1" /></p>

<ul>
<li>å¹³å°ï¼šFedora 22</li>
</ul>

<h3 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h3>

<ol>
<li><p><strong>å®‰è£…ruby</strong></p>

<p><strong>æ³¨ï¼šä»fedora22å¼€å§‹yumåœç”¨ï¼Œè€Œä½¿ç”¨äº†æ–°çš„å®‰è£…è½¯ä»¶åŒ…çš„å·¥å…·dnfï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°æ·»åŠ æºçš„é—®é¢˜ã€‚</strong></p>

<ul>
<li><p>åœ¨ã€terminalã€‘ä¸­ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>

<p><code>sudo dnf install ruby</code></p></li>

<li><p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œå‘½ä»¤éªŒè¯ï¼š</p>

<p><code>ruby -v</code></p></li>
</ul>

<p>ä¼šå‡ºç°ç±»ä¼¼ä¸‹é¢çš„å­—æ ·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼š</p>
<div class="highlight"><pre class="chroma">ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]</pre></div>
<ul>
<li><p>æ‰§è¡Œå‘½ä»¤éªŒè¯gemï¼š</p>

<p><code>gem -v</code></p>

<p>ä¼šå‡ºç°ç‰ˆæœ¬å·<code>2.4.8</code>ï¼Œè¯´æ˜gemä¹Ÿå®‰è£…æˆåŠŸã€‚</p></li>
</ul></li>

<li><p><strong>å®‰è£…nodejs</strong></p>

<ul>
<li><p>åœ¨ã€terminalã€‘ä¸­ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>

<p><code>sudo dnf install nodejs</code></p></li>

<li><p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œå‘½ä»¤éªŒè¯ï¼š</p>

<p><code>node -v</code></p>

<p>ä¼šå‡ºç°ç±»ä¼¼ä¸‹é¢çš„å­—æ ·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼š</p>

<p><code>v0.10.36</code></p></li>
</ul></li>

<li><p><strong>æ›´æ”¹gemæº</strong></p>

<p><strong>å›½å†…æ¯”è¾ƒå‘ï¼ŒåŸè®¾ç½®çš„æºåœ¨å¢™å¤–ï¼Œæ‰€ä»¥è¦æ›´æ”¹æˆå›½å†…çš„ã€‚</strong></p>

<ul>
<li><p>åˆ†åˆ«æ‰§è¡Œä¸€ä¸‹ä¸¤æ¡å‘½ä»¤ï¼š</p>

<p><code>sudo gem sources --remove https://rubygems.org/</code></p>

<p><code>sudo gem sources -a https://ruby.taobao.org/</code></p></li>

<li><p>ç¡®ä¿gemæºåªæœ‰ã€<a href="https://ruby.taobao.org/ã€‘ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹gemæºåˆ—è¡¨ï¼š" target="_blank">https://ruby.taobao.org/ã€‘ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤æŸ¥çœ‹gemæºåˆ—è¡¨ï¼š</a></p>

<p><code>gem sources -l</code></p></li>
</ul></li>

<li><p><strong>å®‰è£…ruby-devel</strong></p>

<ul>
<li><p>æ‰§è¡Œå‘½ä»¤å®‰è£…jekyllå‘ç°ï¼Œç»“æœå¯èƒ½å‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/tletd.png" alt="2" /></p></li>

<li><p>å‡ºç°è¿™ç§æƒ…å†µæ˜¯å› ä¸ºç¼–è¯‘å®‰è£…jekylléœ€è¦å®‰è£…ruby-develåŒ…ï¼š</p>

<p><code>sudo dnf install ruby-devel</code></p></li>
</ul></li>
</ol>

<h3 id="å®‰è£…jekyll">å®‰è£…jekyll</h3>

<ul>
<li><p>è¿™æ—¶æ‰§è¡Œå®‰è£…å‘½ä»¤åº”è¯¥å°±æ²¡é—®é¢˜äº†ï¼š</p>

<p><code>sudo gem install jekyll</code></p></li>

<li><p>éªŒè¯å®‰è£…ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·ã€jekyll 2.5.3ã€‘ï¼š</p>

<p><code>jekyll -v</code></p></li>
</ul>

<p><strong>è‡³æ­¤ä¸ºæ­¢ï¼Œjekyllå®‰è£…å®Œæˆã€‚</strong></p>

<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<ul>
<li><a href="http://www.it165.net/os/html/201408/9059.html" target="_blank">Linuxä¸‹å®‰è£…jekyll</a></li>
<li><a href="blog.csdn.net/cherry_sun/article/details/774362" target="_blank">Ruby gem install Error(mkmf.rb can&rsquo;t find header files for ruby at&hellip;)</a></li>
<li><a href="http://jekyll.bootcss.com/" target="_blank">jekyll</a></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Jekyllåšå®¢æ·»ä¸­æ·»åŠ ä¼˜é…·è§†é¢‘</title>
			<link>https://www.smslit.top/2015/08/22/jekyllAddVideoShare/</link>
			<pubDate>Sat, 22 Aug 2015 17:55:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/08/22/jekyllAddVideoShare/</guid>
			<description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¸ºç”¨jekyllç”Ÿæˆçš„åšå®¢æ·»åŠ ä¼˜é…·è§†é¢‘ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¸ºç”¨jekyllç”Ÿæˆçš„åšå®¢æ·»åŠ ä¼˜é…·è§†é¢‘ã€‚</p>

<h3 id="ç®€è¯´">ç®€è¯´</h3>

<p>åˆ†äº«ç§‘æŠ€ä¹è¶£ï¼Œè‚¯å®šæ˜¯å°‘ä¸äº†è§†é¢‘åˆ†äº«çš„ï¼Œyoukuçš„è§†é¢‘è¿˜æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œåœ¨ä¼˜é…·å¾€å¾€ä¼šçœ‹åˆ°æ–°é²œçš„ç§‘æŠ€è§é—»ï¼Œåˆ†äº«ä¸€ä¸‹ä¹Ÿæ˜¯ä¸é”™çš„ã€‚æœ¬æ–‡ä»¥æˆ‘çš„ä¸€ç‰‡åˆ†äº«ã€çœŸ æŒ‡ç‚¹æ±Ÿå±±ï¼Œè°·æ­Œè¶…ç²¾ç»†æ‰‹åŠ¿è¯†åˆ«ã€‘ä¸ºä¾‹ã€‚</p>

<h3 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h3>

<h4 id="i-å¤åˆ¶htmlä»£ç "><strong>I. å¤åˆ¶HTMLä»£ç </strong></h4>

<ul>
<li><p>è¿›å…¥ä½ è¦åˆ†äº«çš„ä¼˜é…·è§†é¢‘é¡µé¢ï¼Œæ¯”å¦‚è¿™ä¸ªè§†é¢‘ï¼š<a href="http://v.youku.com/v_show/id_XMTI1NzgyNjY1Ng==.html#paction" target="_blank">çœŸ æŒ‡ç‚¹æ±Ÿå±±ï¼Œè°·æ­Œè¶…ç²¾ç»†æ‰‹åŠ¿è¯†åˆ«</a>ï¼Œæ’­æ”¾çª—å£ä¸‹é¢æ‰¾åˆ°ã€åˆ†äº«ç»™å¥½å‹ã€‘ï¼Œç‚¹å‡»<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/0iksy.png" alt="1" /> æŒ‰é’®ï¼Œä¼šå‡ºç°å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/b6gxc.png" alt="2" /></p></li>

<li><p>ç‚¹å‡»ã€htmlä»£ç ï¼šã€‘ä¸€æ å³é¢çš„ã€å¤åˆ¶ã€‘æŒ‰é’®ï¼Œhtmlä»£ç å°±å¤åˆ¶å¥½äº†ã€‚</p></li>
</ul>

<h4 id="ii-postä¸­æ·»åŠ htmlä»£ç "><strong>II. postä¸­æ·»åŠ htmlä»£ç </strong></h4>

<ul>
<li><p>æ‰“å¼€è¦ç¼–è¾‘çš„æ–‡ç« ï¼Œå°†ä»£ç ç²˜è´´åˆ°åˆé€‚ä½ç½®ï¼Œæ³¨æ„è¦å°†æœ€åçš„<code>&lt;/embed&gt;</code>åˆ æ‰ï¼Œä¾‹å¦‚æˆ‘çš„æ–‡ç« ï¼Œè§ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/yx60t.png" alt="3" /></p></li>

<li><p>ç„¶åå°†æ–‡ç« æ¨é€åˆ°githubå°±å¯ä»¥äº†ï¼Œç±»ä¼¼æ•ˆæœå¦‚ä¸‹æ‰€ç¤º,<strong>ç„¶åå°±å¤§åŠŸå‘Šæˆï¼ï¼ï¼(^_^)</strong>ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/fnn9j.png" alt="4" /></p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Project Soli è°·æ­Œè¶…ç²¾ç»†æ‰‹åŠ¿è¯†åˆ«</title>
			<link>https://www.smslit.top/2015/08/22/googleProjectSoli-share/</link>
			<pubDate>Sat, 22 Aug 2015 08:14:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/08/22/googleProjectSoli-share/</guid>
			<description>&lt;p&gt;é™¤äº†Google Xï¼Œæˆ‘ä»¬è¿˜åº”è¯¥äº†è§£Googleçš„ATAPéƒ¨é—¨ï¼Œè¿™é‡Œå°†åˆ†äº«è¿™ä¸ªéƒ¨é—¨çš„Project Soliï¼Œç»å¯¹çš„é»‘ç§‘æŠ€ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œä»Šåæ‰“ä¸ªå“æŒ‡ï¼Œæ‰‹æŒ‡æ“ä¸€æ“ï¼Œä½ çš„å¯ç©¿æˆ´è®¾å¤‡å°±æ’­æ”¾éŸ³ä¹ï¼Œè°ƒèŠ‚éŸ³é‡äº†ï¼Œæ˜¯ä¸æ˜¯æƒ³æƒ³éƒ½å…´å¥‹äº†ï¼Ÿ&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>é™¤äº†Google Xï¼Œæˆ‘ä»¬è¿˜åº”è¯¥äº†è§£Googleçš„ATAPéƒ¨é—¨ï¼Œè¿™é‡Œå°†åˆ†äº«è¿™ä¸ªéƒ¨é—¨çš„Project Soliï¼Œç»å¯¹çš„é»‘ç§‘æŠ€ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œä»Šåæ‰“ä¸ªå“æŒ‡ï¼Œæ‰‹æŒ‡æ“ä¸€æ“ï¼Œä½ çš„å¯ç©¿æˆ´è®¾å¤‡å°±æ’­æ”¾éŸ³ä¹ï¼Œè°ƒèŠ‚éŸ³é‡äº†ï¼Œæ˜¯ä¸æ˜¯æƒ³æƒ³éƒ½å…´å¥‹äº†ï¼Ÿ</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/okls7.png" alt="1" /></p>

<p>è¿™ä¸€é»‘ç§‘æŠ€çš„æ ¸å¿ƒå…¶å®å°±æ˜¯å°†ä¸€æ•´å¥—é›·è¾¾ç³»ç»Ÿé›†æˆåˆ°ä¸€å—å¤§å°ç›¸å½“äºMini SDå¡çš„èŠ¯ç‰‡ä¸­ï¼Œ60Ghz é›·è¾¾é¢‘æ®µè¿›è¡Œé«˜é€Ÿçš„æ‰«æï¼Œé€šè¿‡é›·è¾¾çš„ä¿¡å·å¯¹å‘¨è¾¹åŠ¨ä½œå’Œæ‰‹åŠ¿è¿›è¡Œæ•æ‰ï¼Œæ˜¯ä¸æ˜¯ç›¸å½“é«˜å†·åˆ°æ²¡æœ‹å‹çš„äº¤äº’æ–¹å¼ï¼Ÿè¿˜è®°å¾—å½“ç¬¬ä¸€ä»£iPhoneå‘å¸ƒæ—¶ï¼Œç”µå®¹è§¦æ‘¸å±çš„äººæœºäº¤äº’å¸¦æ¥äº†éœ‡æ’¼å’Œç”¨æˆ·ä½“éªŒï¼Œå½“è¿™ä¸ªé»‘ç§‘æŠ€åº”ç”¨åˆ°å®é™…è®¾å¤‡ä¸­çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå¸¦æ¥æ›´åŠ éœ‡æ’¼çš„äº¤äº’ä½“éªŒï¼</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/7t9s3.png" alt="2" /></p>

<p>å¯åº”ç”¨åœºæ™¯ä¹‹ä¸€ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xht2t.gif" alt="3" /></p>

<h4 id="è§†é¢‘">è§†é¢‘</h4>

<p>çœ‹è§†é¢‘æ„Ÿå—ä¸€ä¸‹å§ï¼</p>

<video src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/share/soli/soli.mp4" poster="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/share/soli/soli.jpg" controls="controls" width="100%">Soli</video>]]></content>
		</item>
		
		<item>
			<title>Sublime Text 3å®‰è£…åŠç®€å•é…ç½®</title>
			<link>https://www.smslit.top/2015/08/19/sublimeText/</link>
			<pubDate>Wed, 19 Aug 2015 14:14:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/08/19/sublimeText/</guid>
			<description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å®‰è£…Sublime Text3ï¼Œä»¥åŠå®‰è£…æˆåŠŸåæˆ‘ä¼šåšçš„ä¸€äº›äº‹æƒ…ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å®‰è£…Sublime Text3ï¼Œä»¥åŠå®‰è£…æˆåŠŸåæˆ‘ä¼šåšçš„ä¸€äº›äº‹æƒ…ã€‚</p>

<h3 id="å‰è¨€"><strong>å‰è¨€</strong></h3>

<p>è®°å¾—ç¬¬ä¸€æ¬¡å®‰è£…sublime text3åº”è¯¥æ˜¯ä¸¤å¹´å‰ï¼Œå½“æ—¶æ˜¯å› ä¸ºè§‰å¾—Arduino IDEå¤ªä¸‘è¿˜ä¸èƒ½è¾“å…¥ä¸­æ–‡ï¼Œå°±å†³å®šæ‰¾ä¸ªå®ƒçš„æ›¿ä»£å“ï¼Œä¸ç»æ„é—´æ‰¾åˆ°äº†ST3ï¼Œå®ƒæœ€å¸å¼•æˆ‘çš„åº”è¯¥æ˜¯ç•Œé¢äº†ï¼Œä½†ä¹‹åå…¶åŠŸèƒ½åŠæ‰©å±•æ€§æ›´æ˜¯å¸å¼•æˆ‘ï¼Œç›®å‰å®ƒå·²æˆä¸ºæˆ‘ç»å¸¸ç”¨çš„ä»£ç åŠæ–‡æœ¬çš„ç¼–è¾‘å™¨ã€‚æ¯æ¬¡å®‰è£…ç³»ç»Ÿï¼Œéƒ½ä¼šå®‰è£…ST3ï¼Œæœ¬æ–‡å°±è¯´ä¸€ä¸‹å®‰è£…Sublime Text3ï¼Œä»¥åŠå®‰è£…æˆåŠŸåæˆ‘ä¼šåšçš„ä¸€äº›äº‹æƒ…ã€‚</p>

<h3 id="ç®€ä»‹"><strong>ç®€ä»‹</strong></h3>

<p><a href="http://baike.baidu.com/link?url=vGvQYJCEabAC4iUDhw80qloKPvCSenPEm_u1iaLs5VlQqwyjN3sKIuIAESK7FRQvJOYDEG77mOn2dKW-7yKgy_z-ioUQqWO98MYEyeJprTZ7sTp4o3U36OPes-wH8nLlQ_I9BlJy_v85CYS_hg1sVK" target="_blank">Sublime Text 3</a>æ˜¯ä¸€ä¸ªä»£ç ç¼–è¾‘å™¨ï¼ˆSublime Textæ˜¯æ”¶è´¹è½¯ä»¶ï¼Œä½†å¯ä»¥æ— é™æœŸè¯•ç”¨ï¼‰ï¼Œä¹Ÿæ˜¯HTMLå’Œæ•£æ–‡å…ˆè¿›çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚Sublime Textæ˜¯ç”±ç¨‹åºå‘˜Jon Skinneräº2008å¹´1æœˆä»½æ‰€å¼€å‘å‡ºæ¥ï¼Œå®ƒæœ€åˆè¢«è®¾è®¡ä¸ºä¸€ä¸ªå…·æœ‰ä¸°å¯Œæ‰©å±•åŠŸèƒ½çš„Vimï¼Œå«æœ‰ä¸°å¯Œçš„æ’ä»¶ã€‚</p>

<h3 id="æ­£æ–‡"><strong>æ­£æ–‡</strong></h3>

<h4 id="å®‰è£…sublime-text-3">å®‰è£…Sublime text 3</h4>

<ol>
<li>åˆ°Sublime Text 3å®˜ç½‘ä¸‹è½½è¿™ä¸ªè·¨å¹³å°çš„ä»£ç ç¼–è¾‘å™¨ï¼Œ<a href="http://www.sublimetext.com/3" target="_blank"><strong>ç‚¹æˆ‘ä¸‹è½½</strong></a>ï¼Œä¸‹è½½å¯¹åº”å¹³å°çš„å®‰è£…åŒ…ï¼Œæœ€æ–°ç‰ˆæœ¬å·ç›®å‰æ˜¯3083ã€‚
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/0j96u.png" alt="1" /></li>
<li>å®‰è£…:

<ul>
<li>windows:åŒå‡»è¿è¡Œexeæ–‡ä»¶å®‰è£…å³å¯ã€‚</li>
<li>macosxï¼šæ‰“å¼€dmgé•œåƒæ–‡ä»¶ï¼Œå°†è½¯ä»¶åŒ…æ‹–åˆ°Applicationsæ–‡ä»¶å¤¹é‡Œï¼Œå°±ç®—è£…å®Œæ¯•äº†ã€‚</li>
<li>ubuntuï¼šä¸‹è½½ä¸‹æ¥æ˜¯debå®‰è£…åŒ…ï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œä»¥debæ–‡ä»¶ä¸‹è½½åˆ°äº†ã€ä¸‹è½½ã€‘ç›®å½•ä¸‹ä¸ºä¾‹ï¼Œå…ˆæ‰§è¡Œ<code>cd ~/Download</code>ï¼Œå†æ‰§è¡Œ<code>sudo dpkg -i xxxxx.deb</code>å³å¯ã€‚</li>
</ul></li>
</ol>

<h4 id="æ’ä»¶ç®¡ç†å·¥å…·">æ’ä»¶ç®¡ç†å·¥å…·</h4>

<p>ä¸ºäº†æ›´æ–¹ä¾¿ä½¿ç”¨ï¼Œè¿˜éœ€è¦å®‰è£…ä¸€äº›è‡ªå·±éœ€è¦çš„æ’ä»¶ï¼Œè¿™å¾—éœ€è¦å®‰è£…æ’ä»¶ç®¡ç†å·¥å…·Package Controlï¼Œä»¥åŠè¿›è¡Œç®€å•ç”¨æˆ·é…ç½®ã€‚</p>

<ul>
<li><p>å®‰è£…Package Controlï¼ŒæŒ‰ä¸‹å¿«æ·é”® <code>CTRL</code>+ ` ï¼Œå¤åˆ¶ç²˜è´´ä»¥ä¸‹å‘½ä»¤ï¼Œå¹¶å›è½¦å°±ä¼šè‡ªåŠ¨å®‰è£…ï¼Œç¨ç­‰å³å¯ï¼Œä¼šæœ‰æç¤ºé‡å¯è½¯ä»¶ï¼Œé‡æ–°å¯åŠ¨Sublimeå°±è¡Œäº†ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">import urllib.request,os<span class="p">;</span> <span class="nv">pf</span> <span class="o">=</span> <span class="s1">&#39;Package Control.sublime-package&#39;</span><span class="p">;</span> <span class="nv">ipp</span> <span class="o">=</span> sublime.installed_packages_path<span class="o">()</span><span class="p">;</span> urllib.request.install_opener<span class="o">(</span> urllib.request.build_opener<span class="o">(</span> urllib.request.ProxyHandler<span class="o">())</span> <span class="o">)</span><span class="p">;</span> open<span class="o">(</span>os.path.join<span class="o">(</span>ipp, pf<span class="o">)</span>, <span class="s1">&#39;wb&#39;</span><span class="o">)</span>.write<span class="o">(</span>urllib.request.urlopen<span class="o">(</span> <span class="s1">&#39;http://sublime.wbond.net/&#39;</span> + pf.replace<span class="o">(</span><span class="s1">&#39; &#39;</span>,<span class="s1">&#39;%20&#39;</span><span class="o">))</span>.read<span class="o">())</span></code></pre></div>
<p>éªŒè¯å®‰è£…ï¼šæŒ‰ä¸‹å¿«æ·é”®ã€SHIFT+CTRL+Pã€‘ï¼Œè¾“å…¥packageçš„å­—æ ·å°±ä¼šå‡ºç°ä¸‹å›¾æ ·å­ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/u57ni.png" alt="2" /></p></li>

<li><p>ç®€å•é…ç½®ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼Œèœå•æ ã€Preferences-&gt;Settings-Userã€‘,å³å¯æ‰“å¼€ç”¨æˆ·é…ç½®æ–‡ä»¶</p>

<ul>
<li>å…³é—­æ£€æŸ¥æ›´æ–°ï¼ŒåŠ å…¥&rdquo;update_check&rdquo;:&ldquo;false&rdquo;ã€‚</li>
<li>è®¾ç½®å­—ä½“ï¼Œå…¶ä¸­xxxxxxæ˜¯ä½ è¦è®¾ç½®çš„å­—ä½“ï¼Œæˆ‘ä¸€èˆ¬ç”¨Consolasï¼ŒåŠ å…¥&rdquo;font_face&rdquo;:&ldquo;xxxxxx&rdquo;ã€‚</li>
<li>è®¾ç½®å­—ä½“å¤§å°ï¼ŒåŠ å…¥&rdquo;font_size&rdquo;:11ã€‚
<strong>æ¯ä¸ªè®¾ç½®é¡¹ä¹‹é—´è¦ä»¥é€—å·éš”å¼€ï¼Œå¦‚ä¸‹çš„æ ·å­ï¼š</strong>
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/z40jx.png" alt="3" /></li>
</ul></li>
</ul>

<h4 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h4>

<p>æˆ‘åªå®‰è£…äº†å‡ ä¸ªå¿…é¡»çš„æ’ä»¶ï¼ŒæŒ‰ä¸‹å¿«æ·é”®ã€SHIFT+CTRL+Pã€‘è¾“å…¥installï¼Œä¸€èˆ¬ä¼šé€‰ä¸­ã€Package control:install packageã€‘æ•²å›è½¦ï¼Œéœ€è¦è”ç½‘ï¼Œç­‰ä¸€ä¼šå„¿å°±ä¼šå‡ºç°æ’ä»¶åˆ—è¡¨ï¼Œæ‰¾åˆ°å¯¹åº”æ’ä»¶é€‰ä¸­å®‰è£…å³å¯ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/5cufb.png" alt="4" /></p>

<ol>
<li>ConvertToUTF8:è¿™æ˜¯ä¸€ä¸ªè§£å†³ä»£ç æ–‡ä»¶ä¸­æ–‡ä¹±ç é—®é¢˜çš„ï¼Œè¿™ä¸ªæ˜¯éå¸¸æœ‰å¿…è¦å®‰è£…çš„ï¼Œå¯èƒ½è¿˜å¾—éœ€è¦å®‰è£…ä¾èµ–åŒ…codec33ï¼ŒåŒæ ·çš„å®‰è£…æ–¹æ³•ã€‚</li>
<li>ctagsï¼šè¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶ï¼Œå¯ä»¥å®ç°ä»£ç ä¸­å‡½æ•°è·³è½¬ï¼Œéå¸¸æœ‰ç”¨ï¼Œè¿˜å¾—å®‰è£…ctags58æ‰§è¡Œæ–‡ä»¶ï¼Œå…·ä½“å®‰è£…ï¼Œè§å¤–é“¾&ndash;<a href="http://jingyan.baidu.com/article/63acb44afb532561fcc17ef4.html" target="_blank"><strong>sublime text2/3æ€æ ·åœ¨windowsä¸­é…ç½®ctagsæ’ä»¶</strong></a></li>
<li>Alignmentï¼šè¿™æ˜¯ä¸€æ¬¾å¯¹é½æ’ä»¶ï¼Œæ¯”å¦‚ç­‰å·å¯¹é½ä»€ä¹ˆçš„ã€‚</li>
</ol>

<h4 id="é…ç½®ä¸»é¢˜">é…ç½®ä¸»é¢˜</h4>

<p>ä¸ªäººæ¯”è¾ƒå–œæ¬¢ä¸¤æ¬¾ä¸»é¢˜ï¼šflatlandå’ŒBrogrammerã€‚ä¸»é¢˜ä¹Ÿæ˜¯ä»¥æ’ä»¶çš„å®‰è£…æ–¹å¼æ¥å®‰è£…çš„ã€‚ä¸‹é¢ä»¥Brogrammerä¸ºä¾‹è¯´ä¸€ä¸‹å®‰è£…åŠé…ç½®ï¼š</p>

<ol>
<li>å®‰è£…ï¼Œé€šè¿‡ã€package controlã€‘æ‰¾åˆ°ã€Theme-Brogrammerã€‘é€‰ä¸­å®‰è£…å³å¯ã€‚</li>
<li>ç”¨æˆ·é…ç½®æ–‡ä»¶é…ç½®ï¼ŒåŠ å…¥ä¸‹é¢ä¸¤æ¡ä¿å­˜å³å¯å®Œæˆä¸»é¢˜é…ç½®ï¼š

<ul>
<li><code>&quot;theme&quot;: &quot;Brogrammer.sublime-theme&quot;</code></li>
<li><code>&quot;color_scheme&quot;: &quot;Packages/Theme - Brogrammer/brogrammer.tmTheme&quot;</code></li>
</ul></li>
<li>æ•ˆæœå¦‚ä¸‹ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/aiaa0.png" alt="5" /></li>
</ol>

<h3 id="æ€»ç»“">æ€»ç»“</h3>

<p>Sublime Text 3æ˜¯ä¸€æ¬¾ç›¸å½“ä¼˜ç§€çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¦‚æœç»å¸¸è·Ÿä»£ç æ‰“äº¤é“è¿™ç»å¯¹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå¶ç„¶çš„æ”¶è·å¸¦æ¥æƒ³ä¸åˆ°çš„æƒŠå–œï¼</p>]]></content>
		</item>
		
		<item>
			<title>Mac/Fedora22ä¸‹STM32çš„Eclipseå¼€å‘ç¯å¢ƒæ­å»º</title>
			<link>https://www.smslit.top/2015/07/25/stm32eclipse/</link>
			<pubDate>Sat, 25 Jul 2015 17:55:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/07/25/stm32eclipse/</guid>
			<description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨MacOSXå¹³å°ä¸‹STM32çš„Eclipseå¼€å‘ç¯å¢ƒçš„æ­å»ºã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨MacOSXå¹³å°ä¸‹STM32çš„Eclipseå¼€å‘ç¯å¢ƒçš„æ­å»ºã€‚</p>

<h2 id="æç¤º">æç¤º</h2>

<p>åé‡Œå‘ç°äº†æ›´å¥½çš„MCUå¼€å‘ç¯å¢ƒï¼Œå¦‚æœæ‚¨æ„Ÿå…´è¶£å¯ä»¥ç§»æ­¥äº†è§£ä¸‹ <a href="http://platformio.org" target="_blank"><strong>platformio</strong></a>ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å¸®æ‚¨å¼€å‘å¾ˆå¤šå•ç‰‡æœºå¹³å°ï¼Œè€Œä¸”è·¨å¹³å°æ”¯æŒ <strong>win/mac/linux</strong> ï¼Œå®ƒèƒ½æ™ºèƒ½ä¸‹è½½æ‰€å¼€å‘å¹³å°éœ€è¦çš„ç¼–è¯‘åŠçƒ§å†™å·¥å…·ï¼Œå†æ¬¡è¯´æ˜è¿™ä¸ªæ–¹æ¡ˆæ¯”æœ¬æ–‡çš„å¼€å‘æ–¹å¼æ›´ç®€å•ã€æ›´ä¼˜ï¼é˜…è¯» <a href="/2017/11/08/stm32InPIO-start/" target="_blank">stm32å¼€å‘æ–°æ–¹å¼-platformio</a>ç®€å•äº†è§£ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ <strong>paltformio</strong> åœ¨å‘½ä»¤è¡Œä¸‹å¼€å‘ <strong>stm32</strong> å•ç‰‡æœºç¨‹åºï¼Œå¦å¤–å®ƒä¹Ÿæ”¯æŒå›¾å½¢ç•Œé¢å¼€å‘ï¼Œ<a href="https://docs.platformio.org/en/latest/ide.html#platformio-ide" target="_blank">ç‚¹æˆ‘</a>äº†è§£ã€‚ä¹Ÿè®¸ <strong>platformio</strong> èƒ½å¸¦ç»™æ‚¨æƒŠå–œï¼</p>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œåšå¼€å‘ï¼Œå¼€å‘å·¥å…·å¾ˆé‡è¦ï¼Œwindowsä¸‹STM32çš„å¼€å‘ç¯å¢ƒå¾ˆå¥½è§£å†³ï¼Œkeilå°±å¯ä»¥ã€‚ä½†åœ¨Mac OSXå’ŒFedora Linuxä¸‹è¿™çœŸæ˜¯ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œå…¶å®å•ç‰‡æœºå¼€å‘ï¼Œç”¨å‘½ä»¤è¡Œéƒ½ä¸€æ ·ï¼Œåªè¦æœ‰äº¤å‰ç¼–è¯‘å·¥å…·ï¼ŒåŠ ä¸Šå¯¹makefileäº†è§£çš„è¯ï¼Œæ­å»ºå‘½ä»¤ç¼–è¯‘ä¸‹è½½ç¯å¢ƒä¹Ÿæˆï¼Œä½†å¯¹äºmakefileæˆ‘è¿˜æ˜¯ä¸ªèœé¸Ÿï¼Œæœ¬èº«åˆä¸æ˜¯ä¸“ä¸šå­¦è®¡ç®—æœºçš„ï¼Œæ›´å¸Œæœ›èƒ½æ‰¾åˆ°ä¸€ä¸ªGUIçš„å¼€å‘æ–¹æ¡ˆã€‚åªèƒ½ä¸æ–­åœ¨ç½‘ä¸Šå¯»æ‰¾GUIçš„å¼€å‘ç¯å¢ƒï¼Œç»è¿‡ä¸æ‡ˆåŠªåŠ›ï¼Œæ‰¾åˆ°äº†<a href="http://gnuarmeclipse.livius.net/blog/" target="_blank"><strong>Eclipseçš„armåµŒå…¥å¼å¼€å‘æ’ä»¶</strong></a>ï¼Œ<strong>çœŸçš„ç‰¹åˆ«æ„Ÿè°¢å¼€å‘è¿™ä¸ªæ’ä»¶çš„å¼€å‘è€…ä»¬</strong>ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åœ¨MacOSXå¹³å°ä¸‹STM32çš„Eclipseå¼€å‘ç¯å¢ƒçš„æ­å»ºï¼Œlinuxå¹³å°ä¸‹åŒç†ä¹Ÿå¯ä»¥æ­å»ºï¼Œå¯ä»¥å‚è€ƒ<a href="http://gnuarmeclipse.livius.net/blog/install/" target="_blank">æ’ä»¶ç½‘ç«™</a>ã€‚</p>

<h2 id="æ­£æ–‡">æ­£æ–‡</h2>

<p><strong>ç›´æ¥åˆ‡å…¥æ­£é¢˜ï¼Œä¸‹é¢å°±è®²è§£ä¸€ä¸‹ï¼Œæˆ‘æ­å»ºå¼€å‘ç¯å¢ƒçš„è¿‡ç¨‹ï¼Œä»¥Mac OSXä¸ºä¸»è¿›è¡Œå™è¿°ï¼ŒFedora22æœ‰ä¸åŒçš„åœ°æ–¹ä¼šæŒ‡å‡ºï¼Œé¦–å…ˆè¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘çš„æƒ…å†µï¼š</strong></p>

<ul>
<li>Mac OSXç³»ç»Ÿ/Fedora22</li>
<li>å¼€å‘æ¿æ˜¯STM32F103RCT6çš„æœ€å°ç³»ç»Ÿæ¿</li>
<li>ä¸‹è½½åŠä»¿çœŸå·¥å…·æ˜¯stlink v2</li>
</ul>

<h3 id="å®‰è£…eclipse">å®‰è£…eclipse</h3>

<ol>
<li>åˆ°eclipseå®˜ç½‘ä¸‹è½½å«CDTæ’ä»¶çš„eclipseç‰ˆæœ¬ï¼š<a href="http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/marsr" target="_blank">Eclipse IDE for C/C++ Developers</a>ã€‚</li>

<li><p>å°†ä¸‹è½½åŒ…è§£å‹ï¼Œå¹¶å°†è§£å‹å‡ºæ¥çš„æ–‡ä»¶å¤¹æ‹–åˆ°<code>åº”ç”¨ç¨‹åº</code>æ–‡ä»¶å¤¹ä¸­ï¼Œå®Œæˆå®‰è£…eclipseï¼Œå¯ä»¥åˆ°lauchpadä¸­æ‰¾åˆ°ä¸‹é¢çš„å›¾æ ‡ï¼Œå•å‡»å°±å¯å¯åŠ¨eclipseã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/joqmh.png" alt="1" /></p>

<p><strong><em>Fdora22ä¸‹è§£å‹ä¸‹è½½çš„å‹ç¼©åŒ…ï¼Œè¿è¡Œè§£å‹ç›®å½•ä¸‹çš„eclipseè„šæœ¬å³å¯å¯åŠ¨eclipseã€‚</em></strong></p></li>
</ol>

<h3 id="å®‰è£…gnu-arm-eclipseæ’ä»¶">å®‰è£…GNU ARM Eclipseæ’ä»¶</h3>

<p>è¿™é‡Œåªä»‹ç»è”ç½‘å®‰è£…ï¼Œç¦»çº¿å®‰è£…ä¹Ÿå¯ä»¥ï¼Œå‚è€ƒ<a href="http://gnuarmeclipse.livius.net/blog/plugins-install/" target="_blank">GNU ARM Eclipseæ’ä»¶çš„å®‰è£…æŒ‡å—</a>ã€‚è”ç½‘çš„æ–¹å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯åˆ©ç”¨Eclipseçš„<strong>Install New Software</strong>ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯ä»<strong>Eclipse Marketplace</strong>ä¸­å®‰è£…ï¼Œå»ºè®®é‡‡ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚</p>

<h4 id="install-new-softwareæ–¹å¼">Install New Softwareæ–¹å¼</h4>

<ol>
<li>å¯åŠ¨eclipseï¼Œé€‰æ‹©èœå•æ -ã€Helpã€-ã€Install New Software&hellip;ã€
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/245kc.png" alt="2" /></li>
<li>å®‰è£…GNU ARM Eclipseæ’ä»¶ï¼Œè¾“å…¥ä¸‹é¢çš„Nameå’ŒURLï¼Œç„¶åpendingï¼Œé€‰ä¸­æ‰€æœ‰çš„å·¥å…·ï¼Œä¸€è·¯[Next]ï¼Œ[Accept]ï¼Œ[Finish]å³å¯ï¼Œå®‰è£…æˆåŠŸçš„è¯ä¼šæç¤ºè¦é‡å¯Eclipseã€‚

<ul>
<li>name: GNU ARM Eclipse Plug-ins</li>
<li>URL: <a href="http://gnuarmeclipse.sourceforge.net/updates" target="_blank">http://gnuarmeclipse.sourceforge.net/updates</a>
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/x34vu.png" alt="3" /></li>
</ul></li>
</ol>

<h4 id="eclipse-marketplaceæ–¹å¼">Eclipse Marketplaceæ–¹å¼</h4>

<ol>
<li>å¯åŠ¨eclipseï¼Œé€‰æ‹©èœå•æ -ã€Helpã€-ã€Eclipse Marketplaceã€</li>
<li>ç­‰å¾…ä¸€ä¼šå„¿ï¼Œè·³å‡ºçš„çª—å£ä¼šåŠ è½½æ’ä»¶å¸‚åœºé‡Œå¯ç”¨çš„æ’ä»¶ï¼Œç„¶ååœ¨<strong>Find</strong>æ ä¸­è¾“å…¥<strong>GNU</strong>ï¼Œå•å‡»åé¢çš„<strong>Go</strong>æŒ‰é’®ã€‚</li>
<li>å¦‚æœæ“ä½œæ­£ç¡®çš„è¯åº”è¯¥ä¼šçœ‹åˆ°<strong>GNU ARM Eclipse</strong>çš„æ’ä»¶ï¼Œç‚¹å‡»<strong>Install</strong>è¿›è¡Œå®‰è£…ï¼ŒæŒ‰ç…§æç¤ºæ“ä½œè¿›è¡Œå®‰è£…å³å¯ã€‚</li>
</ol>

<h3 id="ä¸‹è½½stm32çš„åº“å‡½æ•°æ–‡ä»¶åŒ…">ä¸‹è½½STM32çš„åº“å‡½æ•°æ–‡ä»¶åŒ…</h3>

<p>ä¿è¯æ’ä»¶å·²ç»å®‰è£…æˆåŠŸ</p>

<ol>
<li><p>åœ¨eclipseå·¥å…·æ ä¸Šæ‰¾åˆ°<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/r5ued.png" alt="4" />ï¼ˆMake the C/C++ packs perspective visibleï¼‰æ­¤å·¥å…·ï¼Œå¹¶å•å‡»ï¼Œæ˜¾ç¤ºpackçª—å£ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/2gfg5.png" alt="5" /></p></li>

<li><p>ç‚¹å‡»å›¾æ ‡<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/1pmo9.png" alt="6" />ï¼Œåˆ·æ–°ï¼Œä¼šè”ç½‘åŠ è½½æœ€æ–°çš„åº“å‡½æ•°æ–‡ä»¶åŒ…åˆ—è¡¨ï¼Œå¦‚ä¸Šå›¾ï¼Œåˆ—è¡¨ä¼šæŒ‰ç…§å…¬å¸è¿›è¡Œåˆ†ç±»ï¼Œstm32èŠ¯ç‰‡æ˜¯STmicroelectronicså…¬å¸çš„ï¼Œæ‰€ä»¥å±•å¼€æ­¤å…¬å¸åˆ—è¡¨ï¼Œæˆ‘çš„å¼€å‘æ¿æ˜¯stm32f103rct6æœ€å°ç³»ç»Ÿæ¿ï¼Œæ‰€ä»¥å³å‡»<code>STM32F1 Series</code>é¡¹ã€Installã€å³å¯å®‰è£…ï¼Œå¼€å§‹æ—¶æ˜¯ç°è‰²çš„ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ä¸‹è½½å®‰è£…æˆåŠŸåå°±ä¼šå˜æˆé»‘è‰²ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/60w2w.png" alt="7" /></p></li>
</ol>

<h3 id="iv-äº¤å‰ç¼–è¯‘é“¾çš„å®‰è£…">IV.  äº¤å‰ç¼–è¯‘é“¾çš„å®‰è£…</h3>

<p>è¿™æ˜¯ä¸€ä¸ªå¼€æºçš„armåµŒå…¥å¼äº¤å‰ç¼–è¯‘é“¾å·¥å…·ï¼Œè¦é…ç½®å¥½ç¼–è¯‘ç¯å¢ƒè¿™æ˜¯æ‰€å¿…éœ€çš„ä¸œè¥¿ã€‚</p>

<ul>
<li><p>é¦–å…ˆæœ€æ–°çš„é€‚åˆMacOSXç‰ˆæœ¬çš„<a href="https://launchpad.net/gcc-arm-embedded/+download" target="_blank">TOLLCHAIN(s)</a>ä¸‹è½½åˆ°æ¡Œé¢:</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xx6jg.png" alt="8" /></p></li>

<li><p>è§£å‹ä¸‹è½½çš„æ–‡ä»¶ï¼Œå¹¶å°†è§£å‹å‡ºæ¥çš„æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°<code>/usr/local</code>ç›®å½•ä¸‹ï¼Œå› ä¸ºå®‰è£…çš„eclipseæ’ä»¶ä¼šè‡ªåŠ¨åœ¨<code>/usr/local</code>ç›®å½•ä¸‹æœå¯»TOOLCHAIN(s)ï¼Œæ­¤æ­¥çš„æ“ä½œè¦åœ¨[Terminal]ï¼ˆå³ç»ˆç«¯ï¼‰ä¸‹æ‰§è¡Œå‘½ä»¤å®Œæˆã€‚å…¶ä¸­ã€gcc-arm-none-eabi-xxxxxxxxxxxxxxxx-mac.tar.bz2ã€ä¸ºä¸‹è½½çš„å‹ç¼©åŒ…æ–‡ä»¶åï¼Œæ”¹ä¸ºè‡ªå·±ä¸‹è½½çš„ç›¸åº”çš„æ–‡ä»¶åå³å¯ï¼Œä¾æ¬¡æ‰§è¡Œä¸‹é¢ä¸‰æ¡å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">sudo mkdir /usr/local
<span class="nb">cd</span> /usr/local
sudo tar xjf ~/Desktop/gcc-arm-none-eabi-xxxxxxxxxxxxx-mac.tar.bz2</code></pre></div></li>

<li><p>åœ¨ç»ˆç«¯ä¸‹å¯ä»¥éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">/usr/local/gcc-arm-none-eabi-xxxxxxxx/bin/arm-none-eabi-gcc --version</code></pre></div>
<p>å¦‚æœå‡ºç°ç±»ä¼¼ä¸‹é¢çš„è¯­å¥ï¼Œè¯´æ˜æˆåŠŸå®‰è£…äº†ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">arm-none-eabi-gcc <span class="o">(</span>GNU Tools <span class="k">for</span> ARM Embedded Processors<span class="o">)</span> <span class="m">4</span>.8.4 <span class="m">20140526</span> <span class="o">(</span>release<span class="o">)</span> <span class="o">[</span>ARM/embedded-4_8-branch revision <span class="m">211358</span><span class="o">]</span></code></pre></div></li>
</ul>

<h3 id="é…ç½®st-link">é…ç½®ST-Link</h3>

<p>å› ä¸ºæ€§ä»·æ¯”é«˜ï¼Œæ‰€ä»¥ST-Linkç”¨çš„è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä¸‹é¢å°±è®²è§£ä¸€ä¸‹ï¼Œå¦‚ä½•å®ç°åœ¨MacOSXä¸‹é€šè¿‡st-linkå¯¹å¼€å‘æ¿è¿›è¡Œä»¿çœŸåŠä¸‹è½½ç¨‹åºã€‚</p>

<ul>
<li><p>å®‰è£…Xcodeçš„ã€Command Line Toolsã€ï¼Œè¿™ä¸ªéå¸¸å®¹æ˜“çš„ï¼Œå› ä¸ºæˆ‘å®‰è£…äº†Xcodeæ‰€ä»¥å¾ˆç®€å•å°±èƒ½å¤Ÿå®‰è£…äº†ï¼Œä¸æ˜ç™½è‡ªè¡Œgoogleè§£å†³ã€‚</p></li>

<li><p>å®‰è£…<a href="http://brew.sh/index_zh-cn.html" target="_blank">Homebrew</a>å·¥å…·ï¼ˆåªé€‚ç”¨äºMacï¼ŒFedoraæœ‰dnfå·¥å…·ï¼‰ï¼Œæ­¤å·¥å…·å¯ä»¥è®©macå®ç°ubuntuä¸‹apt-getçš„ç±»ä¼¼åŠŸèƒ½ï¼Œæ­¤æ­¥éª¤ä¸»è¦æ–¹ä¾¿ä¸ºå®‰è£…ç¼–è¯‘st-linkæºä»£ç æ‰€éœ€çš„ä¾èµ–åŒ…è¿›è¡Œçš„ï¼Œåœ¨ç»ˆç«¯ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ•²å›è½¦ï¼Œå°±å¯ä»¥è‡ªåŠ¨å®‰è£…homebrewï¼š</p>

<ul>
<li><p>å®‰è£…homebrew:</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">ruby -e <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&#34;</span></code></pre></div></li>

<li><p>å®‰è£…libusb-1.0ï¼Œåœ¨ç»ˆç«¯ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ•²å›è½¦å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">sudo brew install libusb libusb-compat</code></pre></div></li>

<li><p>å®‰è£…pkg-configï¼Œåœ¨ç»ˆç«¯ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ•²å›è½¦å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">sudo brew install pkg-config</code></pre></div></li>

<li><p>å®‰è£…autotoolsï¼Œåœ¨ç»ˆç«¯ä¸‹è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ•²å›è½¦å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">sudo brew install autoconf automake libtool</code></pre></div>
<p>è¿™ä¸€æ­¥ä¸­ï¼Œå¦‚æœç³»ç»Ÿæ˜¯Fedora22ï¼Œå…¶è‡ªå¸¦DNFå·¥å…·ï¼ŒåŒHomebrewä¸€æ ·åªæ˜¯ä¸ªå·¥å…·è€Œå·²ï¼Œç»ˆç«¯ä¸‹æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…ä¾èµ–åŒ…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">sudo dnf install autoconf automake libtool libusb-devel</code></pre></div></li>
</ul></li>

<li><p>ä¾æ¬¡æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ä¸‹è½½å¹¶ç¼–è¯‘st-linkå·¥å…·ï¼Œå¹¶å®Œæˆå®‰è£…ï¼Œä¸‹é¢éƒ½æ˜¯åœ¨ç»ˆç«¯é‡Œæ‰§è¡Œå‘½ä»¤å®Œæˆçš„ï¼š</p>

<ul>
<li><p>è¿›å…¥ä¹‹å‰åˆ›å»ºçš„<code>/usr/local</code>ç›®å½•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"> <span class="nb">cd</span> /usr/local</code></pre></div></li>

<li><p>åˆ©ç”¨gitä¸‹è½½å¼€æºçš„æºä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">git clone https://github.com/texane/stlink stlink.git**</code></pre></div></li>

<li><p>è¿›å…¥cloneåˆ°<code>/usr/local</code>ç›®å½•ä¸‹çš„<code>stlink.git</code>ç›®å½•ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">cd</span> stlink.git</code></pre></div></li>

<li><p>æ‰§è¡Œç‰¹å®šè„šæœ¬ï¼Œå®Œæˆé…ç½®å¹¶å®Œæˆæºä»£ç çš„ç¼–è¯‘ï¼Œä»è€Œå®Œæˆå·¥å…·çš„å®‰è£…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">./autogen.sh
./configure
make</code></pre></div></li>
</ul></li>

<li><p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå°†stm32f103rct6çš„æœ€å°ç³»ç»Ÿæ¿é€šè¿‡ã€st-link v2ã€è¿æ¥åˆ°ç”µè„‘ï¼Œæ‰§è¡Œä¸‹é¢çš„ç‰‡å­æ¸…é™¤å‘½ä»¤ï¼š</p>
<div class="highlight"><pre class="chroma">st-flash erase</pre></div>
<p>è‹¥å‡ºç°<code>Mass erasing...</code>çš„å­—æ ·è¯´æ˜æˆåŠŸã€‚</p></li>
</ul>

<p><strong>æ³¨</strong>ï¼šåœ¨linuxä¸‹å¯èƒ½ä¼šé‡åˆ°æƒé™é—®é¢˜ï¼Œè¿™æ—¶éœ€è¦å°†stlink.gitæ–‡ä»¶ä¸‹çš„rulesæ–‡ä»¶æ‹·è´åˆ°<code>/etc/udev/rules.d/</code>ç›®å½•ä¸‹ï¼Œç„¶åé‡å¯pcå³å¯ã€‚</p>

<ul>
<li><p>ä¸ºäº†èƒ½å¤Ÿåœ¨ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œ<code>st-flash</code>å‘½ä»¤ï¼Œéœ€è¦é…ç½®ç”¨æˆ·ç¯å¢ƒå˜é‡ï¼Œåªéœ€å°†<code>/usr/local/stlink.git</code>ç›®å½•åŠ å…¥åˆ°ç¯å¢ƒå˜é‡é‡Œå³å¯ï¼Œä¸‹é¢ç¼–è¾‘æ–‡ä»¶å¯ä»¥ç”¨ã€vimã€ï¼Œæƒ³äº†è§£ã€vimã€ä½¿ç”¨å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a href="http://www.smslit.top/2015/07/16/vimtution" target="_blank"><strong>vimçš„ä½¿ç”¨å…¥é—¨</strong></a>ï¼š</p>

<ul>
<li><p>å¦‚æœç»ˆç«¯ç”¨çš„[bash]ï¼Œè¿›å…¥<strong>$HOME</strong>ï¼Œç¼–è¾‘ã€.bashrcã€æ–‡ä»¶ï¼ŒåŠ å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/stlink.git:<span class="nv">$PATH</span></code></pre></div></li>

<li><p>å¦‚æœç»ˆç«¯ç”¨çš„[zsh]ï¼Œè¿›å…¥<strong>$HOME</strong>ï¼Œç¼–è¾‘ã€.zshrcã€æ–‡ä»¶ï¼ŒåŠ å…¥ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span>/usr/local/stlink.git:<span class="nv">$PATH</span></code></pre></div></li>
</ul></li>

<li><p>stlinkçš„ç®€å•ä½¿ç”¨ï¼ˆä»¥stlink-v2å’Œstm32f103c8t6ä¸ºä¾‹ï¼‰ã€‚</p>

<ul>
<li><p>æ“¦é™¤ç‰‡å­å‘½ä»¤</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">st-flash erase</code></pre></div></li>

<li><p>çƒ§å†™ç¨‹åºå‘½ä»¤ï¼Œåªèƒ½çƒ§å†™binaryæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶binæ–‡ä»¶ï¼‰ï¼Œæ‰€ä»¥ç¼–è¯‘åº”è¯¥ç”Ÿæˆbinæ–‡ä»¶è¿›è¡Œçƒ§å†™</p>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">st-flash write xxx.bin 0x8000000</code></pre></div></li>
</ul></li>
</ul>

<h2 id="æ€»ç»“">æ€»ç»“</h2>

<p>æ€»ç®—å®Œæˆäº†MacOSXä¸‹STM32çš„Eclipseå¼€å‘ç¯å¢ƒçš„æ­å»ºçš„è®²è§£ï¼Œç›®å‰æˆ‘ä¹Ÿæ˜¯åœ¨å­¦ä¹ ä¸­ï¼Œæ­¤ç¯å¢ƒä¸‹ä¸windowsä¸‹çš„Keilä¸åŒï¼Œä½¿ç”¨çš„æ˜¯C++å¼€å‘è¯­è¨€ï¼Œæ›´åŠ æ–¹ä¾¿çµæ´»ä¸€äº›ï¼Œå¼€å‘ç¯å¢ƒæ˜¯ï¼Œç¼–å†™ä»£ç å’Œç¼–è¯‘æ˜¯ç”¨eclipseï¼Œä¸‹è½½åŠä»¿çœŸéƒ½æ˜¯ç”¨ç»ˆç«¯å‘½ä»¤ï¼Œæœ‰ç©ºä¼šå¤§ä½“è®²è§£ä¸€ä¸‹ç»ˆç«¯ä¸‹ç®€å•çš„ä»¿çœŸã€‚</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<ul>
<li><p><a href="http://gnuarmeclipse.livius.net/blog/" target="_blank">Eclipseçš„armåµŒå…¥å¼å¼€å‘æ’ä»¶</a></p></li>

<li><p><a href="http://www.cnblogs.com/humaoxiao/p/3576732.html" target="_blank">åœ¨Mac OS Xä¸­æ­å»ºSTM32å¼€å‘ç¯å¢ƒ</a>&ndash;æ¥è‡ª<a href="http://www.cnblogs.com/humaoxiao/" target="_blank">èƒ¡èŒ‚æ™“çš„BLOG</a>ï¼Œè®²è§£çš„æ˜¯å®Œå…¨å‘½ä»¤è¡Œçš„å¼€å‘ç¯å¢ƒçš„æ­å»ºã€‚</p></li>
</ul>]]></content>
		</item>
		
		<item>
			<title>Jekyllåšå®¢æ·»åŠ åˆ†äº«åŠŸèƒ½</title>
			<link>https://www.smslit.top/2015/07/19/jekyllShare/</link>
			<pubDate>Sun, 19 Jul 2015 23:55:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/07/19/jekyllShare/</guid>
			<description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¸ºç”¨jekyllç”Ÿæˆçš„åšå®¢æ·»åŠ ç½‘é¡µåŠå›¾ç‰‡åˆ†äº«çš„åŠŸèƒ½ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¸ºç”¨jekyllç”Ÿæˆçš„åšå®¢æ·»åŠ ç½‘é¡µåŠå›¾ç‰‡åˆ†äº«çš„åŠŸèƒ½ã€‚</p>

<h3 id="ç®€è¯´">ç®€è¯´</h3>

<p>åˆ†äº«çš„åŠŸèƒ½ä¸ç”¨å¤šè¯´å§ï¼Œçœ‹åˆ°å¥½çš„ç½‘é¡µå°±ä¼šæƒ³åˆ†äº«ç»™æ›´å¤šäººï¼Œæ·»åŠ æ­¤åŠŸèƒ½æ˜¯æœ‰å¿…è¦çš„ï¼Œä¸‡ä¸€æˆ‘ä»¬å†™äº†ä¸€ç¯‡ç»å¥½çš„åšæ–‡å’‹åŠå‘¢ï¼Œå“ˆå“ˆï¼Œè¿™é‡Œä»‹ç»çš„æ˜¯è°ƒç”¨ç™¾åº¦åˆ†äº«é€šè¿‡ç®€å•è®¾ç½®ç”Ÿæˆçš„ä»£ç ã€‚</p>

<h3 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h3>

<h4 id="æœç´¢-ç™¾åº¦åˆ†äº«">æœç´¢[ç™¾åº¦åˆ†äº«]</h4>

<p>æœç´¢[ç™¾åº¦åˆ†äº«]åï¼Œä¸€èˆ¬ä¼šå‡ºæ¥å¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ¡ç›®ï¼Œé€‰æ‹©è¿›å…¥è¯¥æ¡ç›®ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/nf53f.png" alt="1" /></p>

<h4 id="å¤åˆ¶jsä»£ç ">å¤åˆ¶JSä»£ç </h4>

<p>æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œä¸‰æ­¥é…ç½®ï¼Œå¤åˆ¶JSä»£ç </p>

<ol>
<li>è¿›å…¥æ¡ç›®åï¼Œé€‰æ‹©å…è´¹è·å–ä»£ç ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/f0l77.png" alt="2" /></li>
<li>è¿™é‡Œè®²è§£[è‡ªç”±ç‰ˆå¼]é€‰æ‹©ï¼Œé¦–å…ˆæ ¹æ®åˆ†äº«éœ€æ±‚é€‰æ‹©åˆ†äº«åŠŸèƒ½ï¼Œæœ‰ä¸‰ç§å¯é€‰ï¼Œä¸‰ç§æˆ‘éƒ½é€‰æ‹©äº†ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/iaqzn.png" alt="3" /></li>
<li>ç‚¹å‡»ã€ä¸‹ä¸€æ­¥ã€ï¼Œè¿›å…¥ã€é¡µé¢æŒ‰é’®è®¾ç½®ã€ï¼Œæˆ‘çš„è®¾ç½®å¦‚ä¸‹ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/8boff.png" alt="4" /></li>
<li>ç‚¹å‡»ã€ä¸‹ä¸€æ­¥ã€ï¼Œè¿›å…¥ã€å›¾ç‰‡æŒ‰é’®è®¾ç½®ã€ï¼Œæˆ‘çš„è®¾ç½®ä¸ºé»˜è®¤è®¾ç½®ï¼š
<img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/8boff.png" alt="4" /></li>

<li><p>ç‚¹å‡»ã€ä¸‹ä¸€æ­¥ã€ï¼Œå³å¯ã€è·å–ä»£ç ã€ï¼Œæˆ‘çš„è®¾ç½®å¯¹åº”çš„<strong>JSä»£ç </strong>å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;bdsharebuttonbox&#34;</span><span class="o">&gt;&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">&#34;#&#34;</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;bds_more&#34;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">cmd</span><span class="o">=</span><span class="s2">&#34;more&#34;</span><span class="o">&gt;&lt;</span><span class="err">/a&gt;&lt;a href=&#34;#&#34; class=&#34;bds_qzone&#34; data-cmd=&#34;qzone&#34; title=&#34;åˆ†äº«åˆ°QQç©ºé—´&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#&#34; class=&#34;bds_tsina&#34; data-cmd=&#34;tsina&#34; title=&#34;åˆ†äº«åˆ°æ–°æµªå¾®åš&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#&#34; class=&#34;bds_tqq&#34; data-cmd=&#34;tqq&#34; title=&#34;åˆ†äº«åˆ°è…¾è®¯å¾®åš&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#&#34; class=&#34;bds_renren&#34; data-cmd=&#34;renren&#34; title=&#34;åˆ†äº«åˆ°äººäººç½‘&#34;&gt;&lt;/a&gt;&lt;a href=&#34;#&#34; class=&#34;bds_weixin&#34; data-cmd=&#34;weixin&#34; title=&#34;åˆ†äº«åˆ°å¾®ä¿¡&#34;&gt;&lt;/a&gt;&lt;/div&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span><span class="nb">window</span><span class="p">.</span><span class="nx">_bd_share_config</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;common&#34;</span><span class="o">:</span><span class="p">{</span><span class="s2">&#34;bdSnsKey&#34;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&#34;bdText&#34;</span><span class="o">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;bdMini&#34;</span><span class="o">:</span><span class="s2">&#34;2&#34;</span><span class="p">,</span><span class="s2">&#34;bdMiniList&#34;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&#34;bdPic&#34;</span><span class="o">:</span><span class="s2">&#34;&#34;</span><span class="p">,</span><span class="s2">&#34;bdStyle&#34;</span><span class="o">:</span><span class="s2">&#34;1&#34;</span><span class="p">,</span><span class="s2">&#34;bdSize&#34;</span><span class="o">:</span><span class="s2">&#34;16&#34;</span><span class="p">},</span><span class="s2">&#34;share&#34;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&#34;image&#34;</span><span class="o">:</span><span class="p">{</span><span class="s2">&#34;viewList&#34;</span><span class="o">:</span><span class="p">[</span><span class="s2">&#34;qzone&#34;</span><span class="p">,</span><span class="s2">&#34;tsina&#34;</span><span class="p">,</span><span class="s2">&#34;tqq&#34;</span><span class="p">,</span><span class="s2">&#34;renren&#34;</span><span class="p">,</span><span class="s2">&#34;weixin&#34;</span><span class="p">],</span><span class="s2">&#34;viewText&#34;</span><span class="o">:</span><span class="s2">&#34;åˆ†äº«åˆ°ï¼š&#34;</span><span class="p">,</span><span class="s2">&#34;viewSize&#34;</span><span class="o">:</span><span class="s2">&#34;16&#34;</span><span class="p">},</span><span class="s2">&#34;selectShare&#34;</span><span class="o">:</span><span class="p">{</span><span class="s2">&#34;bdContainerClass&#34;</span><span class="o">:</span><span class="kc">null</span><span class="p">,</span><span class="s2">&#34;bdSelectMiniList&#34;</span><span class="o">:</span><span class="p">[</span><span class="s2">&#34;qzone&#34;</span><span class="p">,</span><span class="s2">&#34;tsina&#34;</span><span class="p">,</span><span class="s2">&#34;tqq&#34;</span><span class="p">,</span><span class="s2">&#34;renren&#34;</span><span class="p">,</span><span class="s2">&#34;weixin&#34;</span><span class="p">]}};</span><span class="kd">with</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span><span class="mi">0</span><span class="p">[(</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">||</span><span class="nx">body</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">)).</span><span class="nx">src</span><span class="o">=</span><span class="s1">&#39;http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=&#39;</span><span class="o">+~</span><span class="p">(</span><span class="o">-</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span><span class="o">/</span><span class="mi">36</span><span class="nx">e5</span><span class="p">)];</span><span class="o">&lt;</span><span class="err">/script&gt;</span>
</code></pre></div></li>
</ol>

<p><strong>ä¸­é€”å…¶å®ä¹Ÿå¯ä»¥éƒ½æŒ‰ç…§é»˜è®¤è®¾ç½®ï¼Œç‚¹å‡»*ã€ç›´æ¥è·å–ä»£ç ã€*æ¥è·å–ä»£ç ã€‚</strong></p>

<h4 id="ä¿®æ”¹å¸ƒå±€æ–‡ä»¶">ä¿®æ”¹å¸ƒå±€æ–‡ä»¶</h4>

<p>å°†JSä»£ç è´´åˆ°å¯¹åº”htmlæ–‡ä»¶ä¸­</p>

<p>å°†<strong>JSä»£ç </strong>æ‹·è´åˆ°éœ€è¦æ·»åŠ åˆ†äº«åŠŸèƒ½é¡µé¢çš„HTMLæ–‡ä»¶é‡Œå³å¯ï¼Œå¦‚æœè¦åœ¨åšå®¢ä¸»é¡µæ·»åŠ åˆ†äº«åŠŸèƒ½ï¼Œå°±è¦æŠŠä»£ç è´´åˆ°<code>jekyllå·¥ç¨‹æ–‡ä»¶</code>æ ¹ç›®å½•ä¸‹çš„<code>index.html</code>æ–‡ä»¶ä¸­ï¼Œå¦‚æœè¦ä¸ºåšæ–‡é¡µé¢æ·»åŠ åˆ†äº«åŠŸèƒ½é‚£åº”è¯¥æŠŠä»£ç è´´åˆ°<code>_layout</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>post.html</code>æ–‡ä»¶ä¸­ã€‚</p>

<p><strong>é¡µé¢åˆ†äº«æŒ‰é’®å°±åƒæœ¬æ–‡ä¸­æœ€ä¸‹é¢çš„æ ·å­æ‰€ç¤ºã€‚</strong></p>

<h4 id="å‚è€ƒ">å‚è€ƒ</h4>

<p><a href="http://www.divcss5.com/wenzhai/h763.shtml" target="_blank"><strong>ç½‘ç«™ç½‘é¡µä¸­åŠ å…¥å„ç§åˆ†äº«æŒ‰é’®åŠŸèƒ½ ç™¾åº¦åˆ†äº«</strong></a></p>]]></content>
		</item>
		
		<item>
			<title>Jekyllåšå®¢æ·»åŠ å¤šè¯´è¯„è®º</title>
			<link>https://www.smslit.top/2015/07/16/jekyllCommit/</link>
			<pubDate>Thu, 16 Jul 2015 23:07:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/07/16/jekyllCommit/</guid>
			<description>&lt;p&gt;jekyllç”Ÿæˆçš„blogï¼Œè™½ç„¶æ˜¯é™æ€è½»é‡çº§çš„å’Œé™æ€çš„ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥å°½é‡åœ¨åŠŸèƒ½ä¸Šä½¿å…¶æˆä¸ºä¸€ä¸ªä¸€ä¸ªå®Œæ•´çš„åšå®¢ã€‚é™æ€åšå®¢è¦å®ç°è¯„è®ºåŠŸèƒ½å¿…é¡»ä¾èµ–ç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¸ºè‡ªå·±çš„åšå®¢æ·»åŠ è¯„è®ºçš„åŠŸèƒ½ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>jekyllç”Ÿæˆçš„blogï¼Œè™½ç„¶æ˜¯é™æ€è½»é‡çº§çš„å’Œé™æ€çš„ï¼Œä½†æˆ‘ä»¬ä»ç„¶å¯ä»¥å°½é‡åœ¨åŠŸèƒ½ä¸Šä½¿å…¶æˆä¸ºä¸€ä¸ªä¸€ä¸ªå®Œæ•´çš„åšå®¢ã€‚é™æ€åšå®¢è¦å®ç°è¯„è®ºåŠŸèƒ½å¿…é¡»ä¾èµ–ç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä¸ºè‡ªå·±çš„åšå®¢æ·»åŠ è¯„è®ºçš„åŠŸèƒ½ã€‚</p>

<h3 id="å¤šè¯´-çš„ä»‹ç»">ã€å¤šè¯´ã€çš„ä»‹ç»</h3>

<p>å¤šè¯´æ˜¯è¿½æ±‚æœ€ä½³ç”¨æˆ·ä½“éªŒçš„ç¤¾ä¼šåŒ–è¯„è®ºæ¡†ï¼Œä¸ºä¸­å°ç½‘ç«™æä¾›æ–°æµªå¾®åšã€QQï¼ˆQQç©ºé—´å’Œè…¾è®¯å¾®åšï¼‰ã€äººäººã€å¼€å¿ƒç½‘ã€è±†ç“£ã€ç½‘æ˜“å¾®åšã€æœç‹å¾®åšã€ç™¾åº¦ã€æ·˜å®ã€Googleç­‰å¤šå¸å·ç™»å½•å¹¶è¯„è®ºåŠŸèƒ½ã€‚å®ƒå¸®ä½ æ­å»ºæ›´æ´»è·ƒï¼Œäº’åŠ¨æ€§æ›´å¼ºçš„è¯„è®ºå¹³å°ã€‚å…·æœ‰ä¼—å¤šå®ç”¨ç‰¹æ€§ï¼ŒåŠŸèƒ½å¼ºå¤§ä¸”æ°¸ä¹…å…è´¹ã€‚</p>

<h3 id="å…·ä½“å®ç°">å…·ä½“å®ç°</h3>

<h4 id="æ³¨å†Œ-å¤šè¯´-http-duoshuo-com">æ³¨å†Œ<a href="http://duoshuo.com/" target="_blank">å¤šè¯´</a></h4>

<p>æ³¨å†Œè´¦æˆ·ï¼Œå¹¶åˆ›å»ºå¤šè¯´ç«™ç‚¹ã€‚</p>

<h5 id="ç™»å½•">ç™»å½•</h5>

<p>å…ˆç”¨ç°æœ‰çš„å¾®åšã€qqæˆ–ç™¾åº¦å¸å·ä»€ä¹ˆçš„ç™»å½•å¤šè¯´</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/u94vt.png" alt="1" /></p>

<h5 id="è·³è½¬">è·³è½¬</h5>

<p>ç™»å½•åï¼Œå†å›åˆ°é¦–é¡µï¼Œç‚¹å‡»ã€æˆ‘è¦å®‰è£…ã€ï¼Œç„¶åå°±è·³è½¬åˆ°åˆ›å»ºç«™ç‚¹çš„é¡µé¢ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/d0b1l.png" alt="2" /></p>

<h5 id="åˆ›å»ºç«™ç‚¹">åˆ›å»ºç«™ç‚¹</h5>

<p>åˆ›å»ºå±äºè‡ªå·±çš„ç«™ç‚¹ã€‚</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/zivhx.png" alt="3" /></p>

<h4 id="é…ç½®">é…ç½®</h4>

<p>æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œé…ç½®ï¼Œå¤åˆ¶JSä»£ç </p>

<h5 id="jsä»£ç ">JSä»£ç </h5>

<p>è¿™é‡Œæˆ‘ç”¨é»˜è®¤é…ç½®ç”Ÿæˆçš„JSä»£ç ï¼Œä¾æ¬¡é€‰æ‹©æ ‡ç­¾ã€å·¥å…·ã€-ã€è·å–ä»£ç ã€-ã€é€šç”¨ä»£ç ã€ï¼Œç‚¹å‡»å¤åˆ¶å³å¯å°†ä»£ç å¤åˆ¶åˆ°ç²˜è´´æ¿ä¸Šï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/w5x1p.png" alt="4" /></p>

<p><strong>é€šç”¨ä»£ç å¦‚ä¸‹:</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c">&lt;!--</span> <span class="nx">å¤šè¯´è¯„è®ºæ¡†</span> <span class="nx">start</span> <span class="o">--&gt;</span>
	<span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">&#34;ds-thread&#34;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">thread</span><span class="o">-</span><span class="nx">key</span><span class="o">=</span><span class="s2">&#34;è¯·å°†æ­¤å¤„æ›¿æ¢æˆæ–‡ç« åœ¨ä½ çš„ç«™ç‚¹ä¸­çš„ID&#34;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">title</span><span class="o">=</span><span class="s2">&#34;è¯·æ›¿æ¢æˆæ–‡ç« çš„æ ‡é¢˜&#34;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">url</span><span class="o">=</span><span class="s2">&#34;è¯·æ›¿æ¢æˆæ–‡ç« çš„ç½‘å€&#34;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>
<span class="c">&lt;!--</span> <span class="nx">å¤šè¯´è¯„è®ºæ¡†</span> <span class="nx">end</span> <span class="o">--&gt;</span>
<span class="c">&lt;!--</span> <span class="nx">å¤šè¯´å…¬å…±JSä»£ç </span> <span class="nx">start</span> <span class="p">(</span><span class="nx">ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡</span><span class="p">)</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&#34;text/javascript&#34;</span><span class="o">&gt;</span>
<span class="kd">var</span> <span class="nx">duoshuoQuery</span> <span class="o">=</span> <span class="p">{</span><span class="nx">short_name</span><span class="o">:</span><span class="s2">&#34;è¯·å°†æ­¤å¤„æ›¿æ¢ä¸ºä½ çš„å¤šè¯´ç«™ç‚¹çš„çŸ­åshort_name&#34;</span><span class="p">};</span>
	<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
		<span class="nx">ds</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;text/javascript&#39;</span><span class="p">;</span><span class="nx">ds</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
		<span class="nx">ds</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span> <span class="o">==</span> <span class="s1">&#39;https:&#39;</span> <span class="o">?</span> <span class="s1">&#39;https:&#39;</span> <span class="o">:</span> <span class="s1">&#39;http:&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;//static.duoshuo.com/embed.js&#39;</span><span class="p">;</span>
		<span class="nx">ds</span><span class="p">.</span><span class="nx">charset</span> <span class="o">=</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">;</span>
		<span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> 
		 <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">ds</span><span class="p">);</span>
	<span class="p">})();</span>
	<span class="o">&lt;</span><span class="err">/script&gt;</span>
<span class="c">&lt;!--</span> <span class="nx">å¤šè¯´å…¬å…±JSä»£ç </span> <span class="nx">end</span> <span class="o">--&gt;</span>
</code></pre></div>
<p><strong>æŒ‰ç…§ä»£ç ä¸­ä¸­æ–‡æç¤ºæ›¿æ¢æˆå¯¹åº”è‡ªå·±ç½‘é¡µçš„è®¾ç½®å°±å¯ä»¥äº†ã€‚</strong>
<strong>ä¸€èˆ¬çš„:</strong></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/i234m.png" alt="5" /></p>

<h5 id="ç¼–è¾‘å¸ƒå±€æ–‡ä»¶">ç¼–è¾‘å¸ƒå±€æ–‡ä»¶</h5>

<p>å°†ä¿®æ”¹å¥½çš„JSä»£ç ç²˜è´´åˆ°<code>_layout</code>æ–‡ä»¶å¤¹ä¸‹postä¸­é…ç½®å¸ƒå±€layoutå¯¹åº”çš„htmlæ–‡ä»¶çš„æœ€åï¼Œå³å¯å®ç°å¦‚æ­¤åšæ–‡ä¸‹é¢çš„è¯„è®ºæ¡†ã€‚</p>

<h4 id="ä¿®æ”¹æ ·å¼">ä¿®æ”¹æ ·å¼</h4>

<p>ä¿®æ”¹cssè¿›è¡Œè¯„è®ºæ¡†æ ·å¼æ›´æ”¹</p>

<p>ä½ ä¼šå‘ç°æˆ‘çš„è¯„è®ºæ¡†å¯¹åº”å¤´åƒæ˜¯åœ†çš„ï¼Œå°±æ˜¯æ·»åŠ æ ·å¼é…ç½®å®ç°çš„ã€‚</p>

<p>ä¸‹é¢è¦æ·»åŠ çš„ä»£ç å‡æ·»åŠ åˆ°<code>_sass</code>æ–‡ä»¶å¤¹ä¸‹çš„çš„<code>_layout.scss</code>æ–‡ä»¶ä¸­ã€‚</p>

<h5 id="å®ç°å…¶ä»–æ ·å¼">å®ç°å…¶ä»–æ ·å¼</h5>

<p>å®ç°åœ†å½¢å¤´åƒï¼Œå¹¶å¯ä»¥åœ¨é¼ æ ‡ç½®äºä¸Šé¢æ—¶ï¼Œå¤´åƒæ—‹è½¬360åº¦</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">#</span><span class="nn">ds-reset</span> <span class="p">.</span><span class="nc">ds-avatar</span> <span class="nt">img</span> <span class="p">{</span>
  <span class="k">width</span><span class="p">:</span> <span class="mi">54</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="k">height</span><span class="p">:</span> <span class="mi">54</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="kp">-webkit-</span><span class="k">border-radius</span><span class="p">:</span> <span class="mi">27</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="kp">-moz-</span><span class="k">border-radius</span><span class="p">:</span> <span class="mi">27</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="k">border-radius</span><span class="p">:</span> <span class="mi">27</span><span class="kt">px</span> <span class="cp">!important</span><span class="p">;</span>
  <span class="kp">-webkit-</span><span class="k">transition</span><span class="p">:</span> <span class="kp">-webkit-</span><span class="k">transform</span> <span class="mf">0.4</span><span class="kt">s</span> <span class="kc">ease</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
  <span class="kp">-moz-</span><span class="k">transition</span><span class="p">:</span> <span class="kp">-moz-</span><span class="k">transform</span> <span class="mf">0.4</span><span class="kt">s</span> <span class="kc">ease</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
  <span class="k">transition</span><span class="p">:</span> <span class="k">transform</span> <span class="mf">0.4</span><span class="kt">s</span> <span class="kc">ease</span><span class="o">-</span><span class="n">out</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">ds-reset</span> <span class="p">.</span><span class="nc">ds-avatar</span> <span class="nt">img</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
  <span class="kp">-webkit-</span><span class="k">transform</span><span class="p">:</span> <span class="nb">rotateZ</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">);</span>
  <span class="kp">-moz-</span><span class="k">transform</span><span class="p">:</span> <span class="nb">rotateZ</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">);</span>
  <span class="k">transform</span><span class="p">:</span> <span class="nb">rotateZ</span><span class="p">(</span><span class="mi">360</span><span class="kt">deg</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>
<h5 id="éšè—">éšè—</h5>

<p>éšè—è¯„è®ºæ¡†åº•ä¸‹æ˜¾ç¤ºâ€œxxæ­£åœ¨ä½¿ç”¨å¤šè¯´â€å­—æ ·</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="err">#</span><span class="nx">ds</span><span class="o">-</span><span class="nx">reset</span> <span class="p">.</span><span class="nx">ds</span><span class="o">-</span><span class="nx">powered</span><span class="o">-</span><span class="nx">by</span> <span class="p">{</span>
  <span class="nx">display</span><span class="o">:</span> <span class="nx">none</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="ç•™è¨€æ¿">ç•™è¨€æ¿</h4>

<p>ä¸ºåšå®¢å¼€å‘ç•™è¨€æ¿åŠŸèƒ½</p>

<p><strong>å…¶å®å°±æ˜¯å¼€è¾Ÿä¸€ä¸ªæ–°çš„å¯¼èˆªé¡¹ã€Messageã€,åœ¨å…¶ä¸­å¯¹åº”çš„layoutå¸ƒå±€æ–‡ä»¶ä¸­åŠ å…¥ä¸Šé¢çš„è¯„è®ºJSä»£ç ã€‚</strong></p>

<p><strong>æ•ˆæœå¦‚æœ¬ç½‘ç«™çš„<a href="/message">Messageé¡µ</a></strong></p>

<h4 id="å‚è€ƒ">å‚è€ƒ</h4>

<p><a href="http://liberize.me/tech/jekyll-use-duoshuo-comment-system.html" target="_blank"><strong>Jekyll ä½¿ç”¨å¤šè¯´è¯„è®ºç³»ç»Ÿ</strong></a></p>]]></content>
		</item>
		
		<item>
			<title>vimçš„ä½¿ç”¨å…¥é—¨</title>
			<link>https://www.smslit.top/2015/07/16/vimtution/</link>
			<pubDate>Thu, 16 Jul 2015 02:44:46 +0800</pubDate>
			
			<guid>https://www.smslit.top/2015/07/16/vimtution/</guid>
			<description>&lt;p&gt;Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚å’ŒEmacså¹¶åˆ—æˆä¸ºç±»Unixç³»ç»Ÿç”¨æˆ·æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ã€‚åœ¨Mac OSXä¸‹vimæ˜¯è‡ªå¸¦çš„ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œä¸‹æ–‡æœ¬ç¼–è¾‘å™¨ã€‚&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚å’ŒEmacså¹¶åˆ—æˆä¸ºç±»Unixç³»ç»Ÿç”¨æˆ·æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ã€‚åœ¨Mac OSXä¸‹vimæ˜¯è‡ªå¸¦çš„ï¼Œæ˜¯åœ¨å‘½ä»¤è¡Œä¸‹æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p>

<p>###å£°æ˜ï¼š
ä½¿ç”¨å¹³å°ä¸ºMac OSXã€‚å¼ºè°ƒçš„æ˜¯å®è·µæ“ä½œï¼Œæ‰€ä»¥åœ¨æ¯ä¸€ä¸ªå‘½ä»¤ä½¿ç”¨æ—¶éƒ½åº”å®é™…æ“ç»ƒã€‚æ–‡ä¸­æè¿°çš„å‘½ä»¤ï¼Œä¸åŒ…å«ã€ã€ç¬¦å·ï¼Œåªéœ€è¾“å…¥å†…éƒ¨çš„å‘½ä»¤ã€‚</p>

<h3 id="å…¥é—¨">å…¥é—¨ï¼š</h3>

<h4 id="ç¬¬ä¸€éƒ¨åˆ†-å…‰æ ‡ç§»åŠ¨åŠè¿›å…¥vim">ç¬¬ä¸€éƒ¨åˆ† å…‰æ ‡ç§»åŠ¨åŠè¿›å…¥vim</h4>

<ol>
<li>åœ¨Terminalä¸­è¾“å…¥ã€vim æ–‡ä»¶å ã€&lt;æ•²å›è½¦&gt;ï¼Œå°±èƒ½è¿›å…¥å¯¹äºæ–‡ä»¶çš„vimç•Œé¢ï¼Œé»˜è®¤è¿›å…¥çš„æ˜¯å‘½ä»¤çŠ¶æ€ï¼Œç­‰å€™å‘½ä»¤è¾“å…¥ã€‚</li>
<li><ESC> ä»ç¼–è¾‘çŠ¶æ€è¿›å…¥æ­£å¸¸å‘½ä»¤çŠ¶æ€ï¼Œç„¶åè¾“å…¥ã€:q!ã€&lt;æ•²å›è½¦&gt;(ä¸ä¿å­˜é€€å‡º)æˆ–ã€:wqã€&lt;æ•²å›è½¦&gt;(ä¿å­˜åé€€å‡º)</li>
<li>åœ¨å‘½ä»¤çŠ¶æ€ä¸‹è¾“å…¥ã€iã€ï¼Œå³åˆ»è¿›å…¥ç¼–è¾‘æ’å…¥çŠ¶æ€ï¼Œ&lt;æ•²ESC&gt;å¯é€€å‡ºåˆ°æ­£å¸¸å‘½ä»¤çŠ¶æ€ã€‚</li>
<li>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œè¾“å…¥ã€xã€ï¼Œåˆ é™¤å…‰æ ‡å¤„çš„å•ä¸ªå­—ç¬¦ã€‚</li>
<li>æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œå…‰æ ‡ç§»åŠ¨å‘½ä»¤ï¼š

<ul>
<li>h:å·¦ç§»</li>
<li>j:ä¸‹ç§»</li>
<li>k:ä¸Šç§»</li>
<li>l:å³ç§»</li>
</ul></li>
</ol>

<p><em>æ¼”ç¤º: ç”¨vimæ‰“å¼€æ–‡ä»¶test.md</em></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/xk5fi.gif" alt="1" /></p>

<h4 id="ç¬¬äºŒéƒ¨åˆ†-åˆ é™¤å‘½ä»¤">ç¬¬äºŒéƒ¨åˆ† åˆ é™¤å‘½ä»¤</h4>

<ol>
<li>ä»å…‰æ ‡å¤„åˆ é™¤åˆ°å•å­—/è¯æœ«å°¾ï¼Œè¾“å…¥å‘½ä»¤ã€dwã€</li>
<li>ä»å…‰æ ‡å¤„åˆ é™¤åˆ°è¡Œæœ«ï¼Œè¾“å…¥å‘½ä»¤ã€d$ã€</li>
<li>åˆ é™¤æ•´è¡Œï¼Œè¾“å…¥å‘½ä»¤ã€ddã€</li>
<li>æ’¤é”€æ“ä½œï¼Œè¾“å…¥å‘½ä»¤ã€uã€ï¼›æ’¤é”€åœ¨ä¸€è¡Œä¸­çš„æ“ä½œï¼Œè¾“å…¥å‘½ä»¤ã€Uã€ï¼›æ¢å¤æ“ä½œï¼Œè¾“å…¥å‘½ä»¤ã€CTRL+Rã€</li>
<li>æ­£å¸¸å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œå‘½ä»¤æœ‰ä¸€å®šæ ¼å¼ï¼š[command][number][object]æˆ–[number][command][object]

<ul>
<li>[command]-ä»£è¡¨è¦åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚åˆ é™¤å‘½ä»¤ã€dã€</li>
<li>[number ]-ä»£è¡¨å‘½ä»¤è¦æ‰§è¡Œçš„æ¬¡æ•°</li>
<li>[object ]-ä»£è¡¨è¦æ“ä½œçš„å¯¹è±¡ï¼Œã€wã€ä»£è¡¨å•å­—/è¯ï¼Œã€$ã€ä»£è¡¨åˆ°è¡Œæœ«ç­‰ç­‰ã€‚</li>
</ul></li>
</ol>

<p><em>æ¼”ç¤º</em></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/93fgs.gif" alt="2" /></p>

<h4 id="ç¬¬ä¸‰éƒ¨åˆ†-æ›´æ”¹å­—ç¬¦-å•è¯">ç¬¬ä¸‰éƒ¨åˆ† æ›´æ”¹å­—ç¬¦/å•è¯</h4>

<ol>
<li>ç²˜è´´å·²ç»åˆ é™¤çš„æ–‡æœ¬ï¼Œè¾“å…¥å‘½ä»¤ã€pã€ã€‚è¯¥æ“ä½œä¼šæŠŠä»¥åŠç»™ä½ åˆ é™¤çš„å†…å®¹ç²˜è´´åˆ°å…‰æ ‡åé¢ï¼Œå¦‚æœåˆ é™¤çš„æ˜¯æ•´è¡Œæ–‡æœ¬ï¼Œå°†ä¼šåœ¨å…‰æ ‡çš„ä¸‹é¢é‡æ–°æ’å…¥ä¸€è¡Œï¼Œå†…å®¹ä¸ºåˆ é™¤çš„æ–‡æœ¬ã€‚</li>
<li>è¦æ›¿æ¢å…‰æ ‡ä½ç½®çš„å­—ç¬¦ï¼Œè¾“å…¥å‘½ä»¤ã€rå­—ç¬¦ã€ï¼Œå¦‚ã€raã€ï¼Œå°±æ˜¯æŠŠå…‰æ ‡å¤„å­—ç¬¦æ›¿æ¢æˆå­—ç¬¦aã€‚</li>
<li>æ”¹å˜æŒ‡å®šçš„å¯¹è±¡ï¼Œä»å…‰æ ‡ä½ç½®çŸ¥é“å¯¹è±¡æœ«å°¾ï¼Œæ¯”å¦‚ã€cwã€ï¼Œå°±æ˜¯æ›´æ”¹å…‰æ ‡åˆ°å•è¯æœ«å°¾çš„çš„å†…å®¹ï¼›ã€c$ã€ï¼Œå°±æ˜¯æ›´æ”¹å…‰æ ‡åˆ°è¡Œæœ«çš„å†…å®¹ã€‚</li>
</ol>

<p><em>æ¼”ç¤º</em></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/93cxi.gif" alt="3" /></p>

<h4 id="ç¬¬å››éƒ¨åˆ†-æŸ¥æ‰¾-æ›¿æ¢åŠè·³è½¬">ç¬¬å››éƒ¨åˆ† æŸ¥æ‰¾/æ›¿æ¢åŠè·³è½¬</h4>

<ol>
<li>ã€ctrl-gã€ç”¨æ¥ç°å®å½“å‰å…‰æ ‡æ‰€åœ¨ä½ç½®å’Œæ–‡ä»¶çŠ¶æ€ä¿¡æ¯ã€‚</li>
<li>ã€shift-gã€ç”¨äºå°†å…‰æ ‡è·³è½¬åˆ°æ–‡ä»¶æœ€åä¸€è¡Œï¼Œå¦‚æœå…ˆæ•²å…¥ä¸€ä¸ªæ•°å­—ï¼Œæ­¤æ•°å­—å°±æ˜¯ä»£è¡¨æ–‡æœ¬è¡Œå·ï¼ŒæŒ‰ä¸‹ã€shift-gã€åå…‰æ ‡å°±ä¼šè·³è½¬åˆ°æ­¤è¡Œã€‚</li>
<li>æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¾“å…¥å‘½ä»¤ã€/è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ã€ï¼Œå°±ä¼šä»å½“å‰å…‰æ ‡ä½ç½®å‘åæŸ¥æ‰¾ï¼Œæ¯”å¦‚ã€/boyã€&lt;æ•²å›è½¦&gt;ï¼Œå°±ä¼šå‘åæŸ¥æ‰¾å­—ç¬¦ä¸²boyï¼›å‘½ä»¤ã€?è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ã€åˆ™æ˜¯å‘å‰æŸ¥æ‰¾ï¼›å®Œæˆä¸€æ¬¡æŸ¥æ‰¾å‘½ä»¤åï¼Œè¾“å…¥ã€nã€ï¼Œä¼šæŒ‰å‰æ¬¡æŸ¥æ‰¾æ–¹å‘ç»§ç»­æŸ¥æ‰¾ã€‚</li>
<li>æŸ¥æ‰¾å…‰æ ‡ä½ç½®é…å¯¹çš„(ã€)ã€[ã€]ã€{ã€}ï¼Œè¾“å…¥å‘½ä»¤ã€%ã€ã€‚</li>
<li>æ›¿æ¢å­—ç¬¦

<ul>
<li>æ›¿æ¢ä¸€è¡Œå†…é¦–ä¸ªå­—ç¬¦ä¸²oldä¸ºæ–°å­—ç¬¦ä¸²newï¼Œè¾“å…¥å‘½ä»¤ã€:s/old/newã€&lt;æ•²å›è½¦&gt;;</li>
<li>æ›¿æ¢ä¸€è¡Œå†…æ‰€æœ‰å­—ç¬¦ä¸²oldä¸ºæ–°å­—ç¬¦ä¸²newï¼Œè¾“å…¥å‘½ä»¤ã€:s/old/new/gã€&lt;æ•²å›è½¦&gt;;</li>
<li>æ›¿æ¢ä¸¤è¡Œå†…æ‰€æœ‰å­—ç¬¦ä¸²oldä¸ºæ–°å­—ç¬¦ä¸²newï¼Œè¾“å…¥å‘½ä»¤ã€:#,#s/old/new/gã€&lt;æ•²å›è½¦&gt;;</li>
<li>æ›¿æ¢æ–‡ä»¶å†…æ‰€æœ‰å­—ç¬¦ä¸²oldä¸ºæ–°å­—ç¬¦ä¸²newï¼Œè¾“å…¥å‘½ä»¤ã€:%s/old/new/gã€&lt;æ•²å›è½¦&gt;;</li>
<li>å…¨æ–‡æ›¿æ¢å­—ç¬¦ä¸²oldä¸ºæ–°å­—ç¬¦ä¸²newæ—¶è¯¢é—®ç”¨æˆ·ç¡®è®¤ï¼Œè¾“å…¥å‘½ä»¤ã€:%s/old/new/gcã€&lt;æ•²å›è½¦&gt;ã€‚
<br /></li>
</ul></li>
</ol>

<p><em>æ¼”ç¤º</em></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/yhiht.gif" alt="4" /></p>

<h4 id="ç¬¬äº”éƒ¨åˆ†-æ‰§è¡Œshå‘½ä»¤-æå–æ–‡ä»¶å†…å®¹">ç¬¬äº”éƒ¨åˆ† æ‰§è¡Œshå‘½ä»¤/æå–æ–‡ä»¶å†…å®¹</h4>

<ol>
<li>æ‰§è¡Œä¸€ä¸ªå¤–éƒ¨å‘½ä»¤cmdï¼Œè¾“å…¥å‘½ä»¤ã€:!cmdã€ï¼Œå¦‚ï¼šã€:!pwdã€ï¼Œç”¨æ¥æ˜¾ç¤ºå½“å‰ç›®å½•ã€‚</li>
<li>å°†æ­£åœ¨ç¼–è¾‘çš„æ–‡ä»¶ä¿å­˜ä¸ºFILENAMEçš„æ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤ã€:w FILENAMEã€&lt;æ•²å›è½¦&gt;,å¦‚ã€:w test.cppã€ï¼Œå°±æ˜¯å°†ç¼–è¾‘çš„æ–‡ä»¶ä¿å­˜ä¸ºtest.cppæ–‡ä»¶ã€‚</li>
<li>å°†å½“å‰ç¼–è¾‘æ–‡ä»¶ä¸­ç¬¬#è¡Œåˆ°ç¬¬#è¡Œçš„å†…å®¹ä¿å­˜åˆ°FILENAMEæ–‡ä»¶ä¸­ï¼Œè¾“å…¥å‘½ä»¤ã€:#,#w FILENAMEã€ï¼Œæ¯”å¦‚ï¼šã€:12,67w test.cã€ï¼Œå°±æ˜¯æŠŠç¼–è¾‘æ–‡ä»¶çš„ç¬¬12è¡Œåˆ°67è¡Œçš„å†…å®¹ä¿å­˜åˆ°test.cæ–‡ä»¶ä¸­ã€‚</li>
<li>æå–æ–‡ä»¶FILENAMEä¸­çš„å†…å®¹åˆ°å…‰æ ‡å¤„ï¼Œè¾“å…¥å‘½ä»¤ã€:r FILENAMEã€ã€‚</li>
</ol>

<p><em>æ¼”ç¤º</em></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/6a7hn.gif" alt="5" /></p>

<h4 id="ç¬¬å…­éƒ¨åˆ†-æ’å…¥æ–°è¡Œ-æ–‡æœ¬-æ›¿æ¢æ¨¡å¼">ç¬¬å…­éƒ¨åˆ† æ’å…¥æ–°è¡Œ/æ–‡æœ¬ï¼Œæ›¿æ¢æ¨¡å¼</h4>

<ol>
<li>åœ¨å…‰æ ‡æ‰€åœ¨è¡Œä¸‹æ–¹æ’å…¥æ–°çš„ä¸€è¡Œå¹¶å°†å…‰æ ‡ç½®äºè¡Œé¦–ï¼Œè¾“å…¥å‘½ä»¤ã€oã€ï¼›åœ¨å…‰æ ‡æ‰€åœ¨è¡Œä¸Šæ–¹æ’å…¥æ–°çš„ä¸€è¡Œå¹¶å°†å…‰æ ‡ç½®äºè¡Œé¦–ï¼Œè¾“å…¥å‘½ä»¤ã€Oã€ã€‚</li>
<li>åœ¨å…‰æ ‡æ‰€åœ¨ä½ç½®ä¹‹åæ’å…¥æ–‡æœ¬ï¼Œè¾“å…¥å‘½ä»¤ã€aã€ï¼›åœ¨å…‰æ ‡æ‰€åœ¨è¡Œçš„è¡Œæœ«ä¹‹åæ’å…¥æ–‡æœ¬ï¼Œè¾“å…¥å‘½ä»¤ã€Aã€ã€‚</li>
<li>è¿›å…¥æ–‡æœ¬æ›¿æ¢æ¨¡å¼ï¼Œè¾“å…¥å‘½ä»¤ã€Rã€ã€‚</li>
<li>vimé€‰é¡¹é…ç½®å‘½ä»¤ï¼Œæ ¼å¼ä¸ºï¼šã€set xxxã€</li>
</ol>

<p><em>æ¼”ç¤º</em></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/bysdd.gif" alt="6" /></p>

<h4 id="ç¬¬ä¸ƒéƒ¨åˆ†-å¤åˆ¶vimæ¨¡æ¿é…ç½®">ç¬¬ä¸ƒéƒ¨åˆ† å¤åˆ¶vimæ¨¡æ¿é…ç½®</h4>

<p>åˆ›å»ºä¸€ä¸ªvimå¯åŠ¨è„šæœ¬ï¼Œå°†ä¾‹ç¨‹é…ç½®å¯¼å…¥è„šæœ¬æ–‡ä»¶ã€~/.vimrcã€ï¼Œæ·»åŠ vimä¸‹ä»£ç é«˜äº®åŠŸèƒ½æŒ‰ç…§ä¸‹é¢å‡ éƒ¨å®Œæˆï¼š</p>

<ol>
<li>è¿›å…¥~ï¼ˆç”¨æˆ·ç›®å½•ï¼‰ï¼Œåˆ›å»ºã€.vimrcã€æ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤ï¼šã€vim .vimrcã€.</li>
<li>å°†ä¾‹ç¨‹é…ç½®å¯¼å…¥åˆ°ã€.vimrcã€æ–‡ä»¶ï¼Œè¾“å…¥å‘½ä»¤ï¼šã€:read $VIMRUNTIME/vimrc_example.vimã€&lt;æ•²å›è½¦&gt;</li>
<li>ä¿å­˜å¹¶é€€å‡ºï¼Œè¾“å…¥å‘½ä»¤ã€:wqã€&lt;æ•²å›è½¦&gt;</li>
</ol>

<p><em>æ¼”ç¤º</em></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ppx0b.gif" alt="7" /></p>

<h3 id="é¸£è°¢">é¸£è°¢</h3>

<p>ä¸»è¦å‚è€ƒvimtutorï¼Œæ„Ÿè°¢ä½œè€… <strong>æ¢æ˜Œæ³°</strong> <a href="mailto:beos@turbolinux.com.cn" target="_blank">beos@turbolinux.com.cn</a></p>]]></content>
		</item>
		
		<item>
			<title>Arduino UNO R3 è½¯ä»¶å®ç°HIDé”®ç›˜åŠŸèƒ½</title>
			<link>https://www.smslit.top/2014/03/27/ArduinoUnoHIDKeyboard/</link>
			<pubDate>Thu, 27 Mar 2014 17:11:40 +0800</pubDate>
			
			<guid>https://www.smslit.top/2014/03/27/ArduinoUnoHIDKeyboard/</guid>
			<description>&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ç”¨Arduino UNO R3 è½¯ä»¶å®ç°HIDé”®ç›˜åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡æ¬è‡ªæˆ‘ä¹‹å‰åœ¨Arduinoä¸­æ–‡ç¤¾åŒºçš„å¸–å­-&lt;a href=&#34;http://www.arduino.cn/thread-5107-1-1.html&#34; target=&#34;_blank&#34;&gt;UNO R3 è½¯ä»¶å®ç°HIDé”®ç›˜åŠŸèƒ½&lt;/a&gt;ï¼Œæ‰€ä»¥æœ¬æ–‡çš„æ—¶é—´èŠ‚ç‚¹ä¸å¸–å­ä¸€è‡´ã€‚åœ¨Arduinoä¸­æ–‡ç¤¾åŒºé‡Œæˆ‘å«bboxerï¼Œæˆ‘çœŸçš„ä¼šbboxå¹ºï¼ŒB h S h~ï¼Œå“ˆå“ˆï¼&lt;/p&gt;</description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ç”¨Arduino UNO R3 è½¯ä»¶å®ç°HIDé”®ç›˜åŠŸèƒ½ã€‚</p>

<p>æœ¬æ–‡æ¬è‡ªæˆ‘ä¹‹å‰åœ¨Arduinoä¸­æ–‡ç¤¾åŒºçš„å¸–å­-<a href="http://www.arduino.cn/thread-5107-1-1.html" target="_blank">UNO R3 è½¯ä»¶å®ç°HIDé”®ç›˜åŠŸèƒ½</a>ï¼Œæ‰€ä»¥æœ¬æ–‡çš„æ—¶é—´èŠ‚ç‚¹ä¸å¸–å­ä¸€è‡´ã€‚åœ¨Arduinoä¸­æ–‡ç¤¾åŒºé‡Œæˆ‘å«bboxerï¼Œæˆ‘çœŸçš„ä¼šbboxå¹ºï¼ŒB h S h~ï¼Œå“ˆå“ˆï¼</p>

<h3 id="åŸç†"><strong>åŸç†</strong></h3>

<p>æå®¢å·¥åŠæœ‰å¸–å­æ˜¯æ­ç¡¬ä»¶å®ç°HIDè®¾å¤‡åŠŸèƒ½ï¼Œä½†ç»æœç´¢å’Œäº†è§£ï¼Œä¸ç”¨æ­ç”µè·¯ç…§æ ·è®©æˆ‘ä»¬çš„Arduino uno r3ä½œHID é”®ç›˜æˆ–é¼ æ ‡ï¼Œè¿™å…¨å½’åŠŸäºæ¿å­ä¸Šçš„<strong>atemga16uèŠ¯ç‰‡</strong>ï¼Œå¹³å¸¸æ˜¯ä½œä¸ºusbè½¬ä¸²å£çš„å…¶å®è¿™æ˜¯å†…éƒ¨ç¨‹åºå®ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡ç»™å®ƒæ¢æ‰€è°“çš„bootloaderå³å¯å®ç°å…¶keyboardæˆ–é¼ æ ‡åŠŸèƒ½ï¼Œæˆ‘åªå°è¯•äº†é”®ç›˜çš„å®ç°ï¼Œæ‰€ä»¥è¿™é‡Œåªè®²åšé”®ç›˜è¿™æ–¹é¢çš„ã€‚è¿™é‡Œå…ˆè®²è¿°ä¸€ä¸‹ï¼ŒåŸºæœ¬çš„å·¥ä½œåŸç†å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/gh5q3.jpg" alt="1" /></p>

<p>æ ¹æ®ä¸Šå›¾ï¼Œä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼ŒHIDè¯†åˆ«ç æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œå…¶å®è¿™æ˜¯æˆ‘è‡ªå·±è¿™ä¹ˆå«çš„ï¼Œå¯ä»¥è®¤ä¸ºå°±æ˜¯æŒ‰é”®IDï¼Œç”¨æ¥å‘Šè¯‰<strong>atmega16u2</strong>å“ªäº›æŒ‰é”®æŒ‰ä¸‹äº†ï¼Œè¿™é‡Œæœ‰ä¸ªè§„åˆ™ï¼Œå¦‚å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/v9mg7.jpg" alt="2" /></p>

<p><strong><em>è¯´æ˜ï¼šç‰¹æ®ŠæŒ‰é”®ï¼Œå°±æ˜¯ä¸€äº›ä¿®é¥°é”®ï¼Œå¦‚ctrlï¼Œshiftï¼Œaltç­‰ï¼Œè¿™é‡Œè¿™ä¹ˆç®€å•è¯´ï¼Œå¯èƒ½ä¼šä¸å¤ªç†è§£ï¼Œç»“åˆä¸‹é¢å…·ä½“åšæ³•å°±ä¼šæ˜ç™½äº†ã€‚</em></strong></p>

<h3 id="å®ç°"><strong>å®ç°</strong></h3>

<h4 id="atmega328pçš„ç¨‹åºç¼–å†™å’Œä¸‹è½½">ATmega328pçš„ç¨‹åºç¼–å†™å’Œä¸‹è½½</h4>

<h5 id="ä¸‹è½½å¯¹åº”æ”¯æŒåº“">ä¸‹è½½å¯¹åº”æ”¯æŒåº“</h5>

<p>å…¶å®å°±æ˜¯ç®€å•çš„ä¸²å£é€šä¿¡å°è£…çš„ä¸€äº›æ–¹æ³•å’Œå¯¹åº”æŒ‰é”®çš„æŒ‰é”®IDçš„å®å®šä¹‰ï¼Œ<a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/arduino/keyboard/USBKeyboard.zip" target="_blank">ç‚¹æˆ‘</a>ä¸‹è½½åº“ï¼Œåº“ä¸‹è½½åè§£å‹å®‰è£…ã€‚</p>

<p><strong><em>è¯´æ˜ä¸€ä¸‹</em></strong>ä¹‹å‰åº“æ˜¯ä¸‹è½½çš„ç½‘ä¸Šçš„ï¼Œä¸è¿‡æœ‰ä¸ªå°æ¯›ç—…ï¼Œæ²¡è€ƒè™‘åˆ°åŒæ—¶æŒ‰ä¸‹å¤šä¸ªé”®çš„æƒ…å†µï¼Œè€Œä¸”æ¯å‘é€ä¸€ä¸ªæŒ‰é”®æŒ‰ä¸‹çš„æ¶ˆæ¯åéƒ½ä¼šå‘é€æŒ‰é”®æ¾å¼€çš„æ¶ˆæ¯ï¼Œæˆ‘ç¨å¾®ä¿®æ”¹äº†ä¸€ä¸‹ï¼Œå°†æŒ‰é”®æ¾å¼€çš„æ¶ˆæ¯ç‹¬ç«‹å‡ºæ¥ï¼ŒåŒæ—¶æ·»åŠ äº†ä¸€äº›åŒæ—¶æŒ‰ä¸‹æŒ‰é”®çš„æ–¹æ³•ã€‚ä»£ç é‡Œæœªåšæ³¨é‡Šï¼Œä¸è¿‡èƒ½çœ‹æ‡‚ï¼Œåœ¨è¿™é‡Œç¨ç¨è¯´ä¸€ä¸‹ï¼š</p>

<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>ä»£ç </th>
</tr>
</thead>

<tbody>
<tr>
<td>ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å‘é€æ¶ˆæ¯çš„æ–¹æ³•ï¼š</td>
<td>Keyboard.print(),ä¾‹å¦‚Keyboard.print(&ldquo;helloWorld&rdquo;)ï¼›//åŒºåˆ†å¤§å°å†™</td>
</tr>

<tr>
<td>åªå‘é€å•ä¸ªæŒ‰é”®æŒ‰ä¸‹ä¸æ¾æ¶ˆæ¯çš„æ–¹æ³•ï¼š</td>
<td>Keyboard.sendKeyStrokeUnReleased(KEY_A);//æŒ‰ä¸‹æŒ‰é”®Aä¸”ä¸æ¾å¼€æˆ–Keyboard.sendKeyStroke(KEY_Aï¼Œ 0);//ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¿®é¥°é”®IDï¼ˆshiftç­‰ï¼‰ï¼Œç”¨çš„è¯è¦ä½¿ç”¨å¯¹åº”å®å®šä¹‰è§hid_keys.h</td>
</tr>

<tr>
<td>åªå‘é€æŒ‰é”®æ¾å¼€çš„æ¶ˆæ¯ï¼Œå…¶å®å°±æ˜¯HIDç å…¨æ˜¯0ï¼š</td>
<td>Keyboard.sendKeyReleased();//æ²¡æœ‰æŒ‰ä¸‹æŒ‰é”®</td>
</tr>

<tr>
<td>åŒæ—¶æŒ‰ä¸‹ä¸¤ä¸ªæŒ‰é”®çš„æ–¹æ³•ï¼š</td>
<td>å¦‚,Keyboard.sendKeyStrokeUnReleased(KEY_A, KEY_B, 0);//åŒæ—¶æŒ‰ä¸‹Aã€Bé”®</td>
</tr>
</tbody>
</table>

<h5 id="ç¼–å†™ä»£ç åŠä¸‹è½½">ç¼–å†™ä»£ç åŠä¸‹è½½</h5>

<p>å¯æ‰“å¼€åˆšå®‰è£…çš„åº“çš„Exampleï¼Œå…¶ä¸­æœ‰ä¸ªhelloworldï¼Œæˆ–è€…è‡ªå·±åˆ›å»ºæ–°çš„sketchbookå¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;USBKeyboard.h&gt;</span><span class="cp">
</span><span class="cp"></span> 
<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> 
<span class="p">{</span>
  <span class="n">Keyboard</span><span class="p">.</span><span class="n">init</span><span class="p">();</span>
<span class="p">}</span>
 
<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> 
<span class="p">{</span>
  <span class="n">delay</span><span class="p">(</span><span class="mi">5000</span><span class="p">);</span>
  <span class="n">Keyboard</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;hello world&#34;</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>ç¼–è¯‘ä¸Šä¼ åˆ°unoæ¿å­ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç¼–å†™å±äºè‡ªå·±çš„ä»£ç ï¼Œå¦‚æ­¤å°±å®Œæˆç¬¬ä¸€æ­¥å·¥ä½œäº†ã€‚</p>

<h4 id="atmega16u2çš„ç¨‹åºç¼–å†™å’Œä¸‹è½½">ATmega16u2çš„ç¨‹åºç¼–å†™å’Œä¸‹è½½</h4>

<p>ä¸‹è½½bootloaderçš„æ–¹æ³•ï¼Œè®ºå›é‡Œæœ‰ç›¸å…³å¸–å­ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šï¼Œè‡ªå·±å¤šæœæœçœ‹çœ‹å§ï¼Œæœåˆ°çš„å°æ¹¾çš„ä¸€ä¸ªè®ºå›æ–¹æ³•æ˜¯è®©atmega16u2è¿›å…¥DFUæ¨¡å¼ï¼Œä½†æ‚²å‚¬çš„æ˜¯ï¼Œæˆ‘çš„æ¿å­æ˜¯å›½å†…å±±å¯¨è´§ä¸èƒ½è¿›å…¥DFUæ¨¡å¼ï¼Œæ— è¯­ï¼Œä¾¿å®œæœç„¶æ²¡å¥½è´§ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹æœ€åæˆ‘è´´çš„å¸–å­åœ°å€ï¼Œä¹‹ååˆæœäº†å¥½å¤šèµ„æ–™ï¼Œç»ˆäºæ‰¾åˆ°é€‚åˆæˆ‘è‡ªå·±ç”¨çš„æ–¹æ³•ï¼Œå› ä¸ºæˆ‘åªæœ‰ft232r usbè½¬ä¸²å£çº¿ï¼Œæ‰€ä»¥æˆ‘å‚è€ƒäº†YFduinoè®ºå›é‡Œ<strong>YFRobot</strong>çš„å¸–å­ï¼š<a href="http://www.yfrobot.com/forum.php?mod=viewthread&amp;tid=2401" target="_blank">åˆ©ç”¨ft232rçš„Bitbangæ¨¡å¼ç»™arduinoæ§åˆ¶å™¨é‡æ–°çƒ§å†™bootloader</a>ï¼Œå› ä¸ºä»¥æˆ‘çš„æ¡ä»¶æˆ‘åªèƒ½ç”¨è¿™ç§æ–¹æ³•ï¼Œåœ¨æ­¤æ„Ÿè°¢ï¼</p>

<h5 id="avrdudeå‹ç¼©åŒ…">avrdudeå‹ç¼©åŒ…</h5>

<p><a href="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/arduino/keyboard/avrdude.zip" target="_blank">ç‚¹æˆ‘</a>ä¸‹è½½avrdudeå‹ç¼©åŒ…,
å‹ç¼©åŒ…é‡Œæœ‰avrdudeå’Œå…¶å¯¹åº”çš„avrdude-GUIä»¥åŠç”¨åˆ°çš„ä¸¤ä¸ªbootloaderï¼Œä¸€ä¸ªæ˜¯æ”¯æŒkeyboardçš„Arduino-keyboard-0.3.hexå’ŒåŸæ¥çš„åšusbè½¬ä¸²å£çš„Arduino-usbserial-uno.hex</p>

<h5 id="atmega16u2çƒ§å†™ä¸“ç”¨ç¨‹åº">Atmega16u2çƒ§å†™ä¸“ç”¨ç¨‹åº</h5>

<p>å°†FT232Rä¸²å£çº¿ä¸uno r3æ¿å­ä¸Šçš„Atmega16u2è¿æ¥,å¦‚å›¾ï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/rdq47.jpg" alt="3" /></p>

<p>æŒ‰ç…§å›¾ç¤ºæ­¥éª¤æ“ä½œï¼š</p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/a6c4k.jpg" alt="4" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/pwhvk.jpg" alt="5" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/ni47v.jpg" alt="6" /></p>

<p><img src="https://pichome-1254392422.cos.ap-chengdu.myqcloud.com/img/oga5y.jpg" alt="7" /></p>

<p>è¿™å°±å®Œæˆäº†ä¸¤å¤§å·¥ä½œï¼Œä¹‹åå°†Ft232rä¸²å£çº¿ä¸æ¿å­æ–­å¼€ï¼Œå°†Arduino UNO r3æ¿å­é€šè¿‡ä»–çš„USbå£è¿æ¥ç”µè„‘ï¼Œåœ¨ç”µè„‘ä¸Šæ‰¾ä¸ªèƒ½è¾“æ–‡æœ¬çš„åœ°æ–¹ï¼Œå•å‡»å…‰æ ‡é—ªåŠ¨ï¼Œä½ ä¼šçœ‹åˆ°æ¯éš”5så°±ä¼šæœ‰ä¸€ä¸ªhelloWorldå­—ç¬¦ä¸²å‡ºç°ï¼Œæ€ä¹ˆæ ·ä¸é”™å§ï¼Œåˆ©ç”¨è¿™ä¸ªæ¢ç´¢å…¶å®ƒçš„ç©æ³•å§ï¼</p>

<h6 id="å¦‚æœæƒ³è®©æ¿å­å›åˆ°åŸæ¥çš„çŠ¶æ€-ä¸ºatmega16u2ä¸‹è½½arduino-usbserial-uno-hexå³å¯">å¦‚æœæƒ³è®©æ¿å­å›åˆ°åŸæ¥çš„çŠ¶æ€ï¼Œä¸ºAtmega16u2ä¸‹è½½Arduino-usbserial-uno.hexå³å¯</h6>

<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<ol>
<li>Cooper Maaè®ºå›ï¼ˆå°æ¹¾çš„ï¼‰å¸–å­ï¼šï¼ˆå¯èƒ½éœ€è¦ç¿»å¢™ï¼‰

<ul>
<li><a href="http://yehnan.blogspot.com/2013/08/arduino-unousb.html" target="_blank">è®“Arduino Unoè®ŠæˆUSBéµç›¤</a></li>
<li><a href="http://coopermaa2nd.blogspot.tw/2011/11/usbkeyboard-library.html" target="_blank">USBKeyboard Library</a></li>
</ul></li>
<li>YFduino

<ul>
<li><a href="http://www.yfrobot.com/forum.php?mod=viewthread&amp;tid=2401" target="_blank">åˆ©ç”¨ft232rçš„Bitbangæ¨¡å¼ç»™arduinoæ§åˆ¶å™¨é‡æ–°çƒ§å†™bootloader</a></li>
</ul></li>
<li>æå®¢å·¥åŠ

<ul>
<li><a href="http://www.geek-workshop.com/thread-658-1-1.html" target="_blank">arduino uno mega2560ç­‰å„ç§ä¸åŒæ¿å­bootloaderçƒ§å†™æ–¹æ³•</a></li>
</ul></li>
</ol>]]></content>
		</item>
		
	</channel>
</rss>
