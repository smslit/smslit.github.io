<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="在MacOS终端下使用Ino进行Arduino开发">
<meta itemprop="description" content="虽然我算不上真正的Vimer，但我还是惊叹与vim的强大，也正慢慢学习vim的使用，经朋友介绍可以用命令行工具Ino进行Arduino开发，那么就可以在终端中使用vim进行Arduino的coding了。其实我使用了好长时间了，觉得不错，适合喜欢用终端敲命令的朋友，所以在此写一下安装和使用。">


<meta itemprop="datePublished" content="2016-06-15T09:10:38&#43;08:00" />
<meta itemprop="dateModified" content="2016-06-15T09:10:38&#43;08:00" />
<meta itemprop="wordCount" content="3360">



<meta itemprop="keywords" content="vim,arduino,ino," />
<meta property="og:title" content="在MacOS终端下使用Ino进行Arduino开发" />
<meta property="og:description" content="虽然我算不上真正的Vimer，但我还是惊叹与vim的强大，也正慢慢学习vim的使用，经朋友介绍可以用命令行工具Ino进行Arduino开发，那么就可以在终端中使用vim进行Arduino的coding了。其实我使用了好长时间了，觉得不错，适合喜欢用终端敲命令的朋友，所以在此写一下安装和使用。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.smslit.top/2016/06/15/ino-vim-arduino/" />
<meta property="article:published_time" content="2016-06-15T09:10:38&#43;08:00"/>
<meta property="article:modified_time" content="2016-06-15T09:10:38&#43;08:00"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="在MacOS终端下使用Ino进行Arduino开发"/>
<meta name="twitter:description" content="虽然我算不上真正的Vimer，但我还是惊叹与vim的强大，也正慢慢学习vim的使用，经朋友介绍可以用命令行工具Ino进行Arduino开发，那么就可以在终端中使用vim进行Arduino的coding了。其实我使用了好长时间了，觉得不错，适合喜欢用终端敲命令的朋友，所以在此写一下安装和使用。"/>
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>在MacOS终端下使用Ino进行Arduino开发</title>
	<link rel="stylesheet" href="https://www.smslit.top/css/style.min.645b14dc26ce57a45585b37a4ef11a96fee72376dcd62ffbcd5103cd5edf7f1c.css" integrity="sha256-ZFsU3CbOV6RVhbN6TvEalv7nI3bc1i/7zVEDzV7ffxw=">
	
	<link rel="stylesheet" href="https://www.smslit.top/css/valine.css">
	<link rel="stylesheet" href="https://www.smslit.top/css/reward.css">
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://www.smslit.top">SMSLIT</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					<a href="https://www.smslit.top/post/">Posts</a>
					<a href="https://www.smslit.top/tags/">Tags</a>
					<a href="https://www.smslit.top/about/">Me</a>
					<a href="https://smslit.coding.me/ownwiki/">wiki</a>
				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="目录"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="http://weibo.com/u/2684217817" target="_blank" rel="noopener" title="Weibo"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"  fill="none" fill-rule="evenodd" class="feather feather-mail">
    <g transform="translate(0.000000, 2.000000)" fill="#000000" fill-rule="nonzero" id="形状">
        <path d="M23.7,8.59152679 C23.6,8.94964029 23.25,9.20543566 22.9,9.25659472 C22.55,9.30775379 22.2,9.10311751 22,8.745004 C21.9,8.54036772 21.85,8.28457235 21.95,8.02877698 C22.45,6.44284573 22.1,4.70343724 21,3.4756195 C19.9,2.24780175 18.3,1.68505194 16.7,2.04316547 C16.45,2.09432453 16.2,2.04316547 16,1.88968825 C15.8,1.73621103 15.65,1.53157475 15.6,1.27577938 C15.5,0.764188657 15.8,0.252597914 16.3,0.150279784 C18.45,-0.310151871 20.75,0.354916067 22.35,2.14548362 C23.95,3.98721024 24.35,6.44284573 23.7,8.59152679 Z M17.35,5.06155077 C17.15,5.11270983 16.95,5.06155077 16.75,4.95923261 C16.55,4.85691446 16.45,4.65227818 16.4,4.44764189 C16.3,3.98721024 16.6,3.57793765 17,3.4756195 C18.1,3.21982412 19.2,3.62909671 19.95,4.44764189 C20.7,5.31734614 20.9,6.4940048 20.6,7.56834532 C20.55,7.77298161 20.4,7.92645882 20.2,8.02877698 C20,8.13109513 19.8,8.13109513 19.6,8.07993604 C19.2,7.92645882 18.95,7.46602717 19.1,7.0567546 C19.25,6.54516388 19.15,5.93125501 18.8,5.52198242 C18.4,5.11270983 17.85,4.95923261 17.35,5.06155077 Z M18.05,9.66586731 C19.45,10.126299 20.95,11.1494804 20.95,13.0423661 C20.95,16.1119105 16.6,20 10.1,20 C5.1,20 1.13686838e-13,17.5443645 1.13686838e-13,13.4516387 C1.13686838e-13,11.3029576 1.30000001,8.84732213 3.6,6.54516386 C6.6,3.42446043 10.15,2.04316547 11.45,3.37330137 C12.05,3.98721024 12.1,5.0103917 11.7,6.23820942 C11.5,6.8521183 12.25,6.4940048 12.25,6.4940048 C14.7,5.41966427 16.85,5.3685052 17.6,6.54516386 C18,7.15907273 17.95,8.02877698 17.6,9.00079935 C17.45,9.46123101 17.7,9.56354916 18.05,9.66586731 Z M10.1,18.5163869 C14.05,18.1071143 17.1,15.6003197 16.85,12.940048 C16.6,10.2797762 13.15,8.43804957 9.19999999,8.84732213 C5.25,9.25659472 2.19999998,11.7633893 2.44999999,14.4236611 C2.7,17.0839329 6.09999998,18.9256595 10.1,18.5163869 Z M10.5,10.8936851 C12.45,11.4052758 13.45,13.2981615 12.65,15.1398881 C11.85,17.0327738 9.49999999,18.0047962 7.54999999,17.3908873 C5.64999998,16.7769784 4.84999999,14.8329336 5.65000001,13.0935252 C6.45,11.3541167 8.60000002,10.3820943 10.5,10.8936851 Z M9.04999999,15.3445244 C9.45,14.7306155 9.24999998,13.9632294 8.59999999,13.7074341 C7.99999999,13.4516387 7.2,13.7074341 6.79999999,14.3213429 C6.39999998,14.9352518 6.6,15.6514788 7.2,15.9584333 C7.84999999,16.2653877 8.65000001,16.0095923 9.04999999,15.3445244 Z" fill="currentColor"></path>
    </g>
</svg></a><a href="https://www.zhihu.com/people/smslit/activities" target="_blank" rel="noopener" title="Zhihu"><svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="none" fill-rule="evenodd" class="feather feather-mail">
    <path d="M12.1197571,11.3394973 C11.2394396,11.2471275 8.50587146,11.3394973 8.50587146,11.3394973 L8.50587146,5.8004836 L12.5830381,5.8004836 C12.5830381,5.8004836 12.5367176,3.95412048 11.7490411,3.95412048 L5.12356308,3.95412048 L6.23550841,1 C6.23550841,1 4.56753979,1.09236985 3.96524661,2.15395489 C3.36295344,3.21553992 1.46333165,8.52386857 1.46333165,8.52386857 C1.46333165,8.52386857 2.11199596,8.80082682 3.17759547,8.0161496 C4.2432456,7.2314976 4.6138603,5.84665591 4.6138603,5.84665591 L6.5598026,5.75428606 L6.60612311,11.3856444 C6.60612311,11.3856444 3.22394129,11.3394973 2.52895647,11.3856444 C1.83397166,11.4317915 1.46330634,13.2781799 1.46330634,13.2781799 L6.60619904,13.2781799 C6.60619904,13.2781799 6.14281677,16.4169392 4.8455894,18.6787523 C3.50191497,20.9405149 1,22.7406553 1,22.7406553 C1,22.7406553 2.80693015,23.4791854 4.56761573,22.4636971 C6.32822537,21.4020364 7.62555398,16.8323387 7.62555398,16.8323387 L11.7491424,21.9559781 C11.7491424,21.9559781 12.1197824,19.5096018 11.7028219,18.8172188 C11.2394396,18.1248358 8.83019096,15.3553541 8.83019096,15.3553541 L7.76454082,16.2784726 L8.50584615,13.2319823 L12.9999986,13.2319823 C13.0000745,13.2320328 13.0000745,11.4318672 12.1197571,11.3394973 Z M14.0447646,4 L14,20.8940959 L15.6119399,20.8940959 L16.1940015,23 L19.014927,20.8940959 L23,20.8940959 L23,4 L14.0448624,4 L14.0447646,4 Z M21,18.2118088 L19.2203194,18.2118088 L16.9745545,20 L16.4660842,18.2118088 L16,18.2118088 L16,6 L21,6 L21,18.2118088 Z" id="形状" fill="currentColor" fill-rule="nonzero"></path>    
</svg></a><a href="mailto:5km@smslit.cn" target="_blank" rel="noopener" title="Email"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a><a href="https://github.com/smslit" target="_blank" rel="noopener" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="菜单"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://www.smslit.top/post/">Posts</a></li>
			<li><a href="https://www.smslit.top/tags/">Tags</a></li>
			<li><a href="https://www.smslit.top/about/">Me</a></li>
			<li><a href="https://smslit.coding.me/ownwiki/">wiki</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Jun 15, 2016</span></div>
				<h1>在MacOS终端下使用Ino进行Arduino开发</h1>
			</header>
			<div class="content">
				<p>虽然我算不上真正的Vimer，但我还是惊叹与vim的强大，也正慢慢学习vim的使用，经朋友介绍可以用命令行工具<strong>Ino</strong>进行Arduino开发，那么就可以在终端中使用vim进行Arduino的coding了。其实我使用了好长时间了，觉得不错，适合喜欢用终端敲命令的朋友，所以在此写一下安装和使用。</p>

<h3 id="ino工具安装">Ino工具安装</h3>

<p><a href="http://inotool.org/" target="_blank"><strong>Ino</strong></a>依赖于Arduino IDE，所以使用Ino之前保证已经安装了Arduino IDE，有了Ino你可以做以下事情：</p>

<ul>
<li>快速新建Arduino工程。</li>
<li>编译工程。</li>
<li>上传工程到Arduino开发板。</li>
<li>串口通信。</li>
</ul>

<h4 id="安装">安装</h4>

<p>可以通过下载最新的源码进行安装，不过这里我还是建议用工具进行安装，<strong>Ino</strong>使用python实现的，一般mac上都安装了python，所以不用担心，那么<strong>Ino</strong>可以用Python的包管理工具进行安装，<strong>pip</strong>或者<strong>easy_insyall</strong>。这里我们用<strong>pip</strong>，需要安装pip：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl https://bootstrap.pypa.io/ez_setup.py -o - <span class="p">|</span> sudo python
$ sudo easy_install pip</code></pre></div>
<p><strong>pip</strong>可以用来安装、更新或卸载python软件包，那么我们就可以安装<strong>Ino</strong>了：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo pip isntall ino</code></pre></div>
<h4 id="依赖">依赖</h4>

<p>要正常使用<strong>Ino</strong>，依赖于以下工具：</p>

<ul>
<li><strong>Python</strong> 2.6+</li>
<li><strong>Arduino IDE</strong></li>
<li><strong>picocom</strong>，用来进行串口通信</li>
</ul>

<p>第一个Python需求macOS天然满足，Arduino IDE我们需要自己去<a href="https://www.arduino.cc/en/Main/OldSoftwareReleases" target="_blank">官网</a>下载，友情提示一定要安装1.0.x版本的，1.6.x或更新的有问题。</p>

<p><strong>picocom</strong>工具的话，我们可以用macOS下的homebrew进行安装，在这之前先来安装强大的mac软件包管理工具<a href="http://brew.sh/index_zh-cn.html" target="_blank"><strong>Homebrew</strong></a>，它的能力类似与Ubuntu Linux的apt-get。</p>

<p>安装<strong>Homebrew</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ /usr/bin/ruby -e <span class="s2">&#34;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&#34;</span></code></pre></div>
<p>安装<strong>picocom</strong>：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ brew install picocom</code></pre></div>
<h3 id="ino的使用">ino的使用</h3>

<p>如果安装成功了，顺利的话，终端下敲命令<code>ino --help</code>或<code>ino -h</code>，会出现简单的使用说明：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino -h
usage: ino <span class="o">[</span>-h<span class="o">]</span> <span class="o">{</span>list-models,preproc,upload,init,build,clean,serial<span class="o">}</span> ...

Ino is a command-line toolkit <span class="k">for</span> working with Arduino hardware.

It is intended to replace Arduino IDE UI <span class="k">for</span> those who prefer to work in
terminal or want to integrate Arduino development in a 3rd party IDE.

Ino can build sketches, libraries, upload firmwares, establish
serial-communication. For this it is split in a bunch of subcommands, like git
or mercurial <span class="k">do</span>. The full list is provided below. You may run any of them with
--help to get further help. E.g.:

    ino build --help

positional arguments:
  <span class="o">{</span>list-models,preproc,upload,init,build,clean,serial<span class="o">}</span>
    build               Build firmware from the current directory project
    clean               Remove intermediate compilation files completely
    init                Setup a new project in the current directory
    list-models         List supported Arduino board models
    preproc             Transform a sketch file into valid C++ <span class="nb">source</span>
    serial              Open a serial monitor
    upload              Upload built firmware to the device

optional arguments:
  -h, --help            show this <span class="nb">help</span> message and exit</code></pre></div>
<p>命令表如下：</p>

<table>
<thead>
<tr>
<th align="center">命令</th>
<th align="left">含义</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">build</td>
<td align="left">编译当前目录下的工程</td>
</tr>

<tr>
<td align="center">clean</td>
<td align="left">删除编译生成的中间文件</td>
</tr>

<tr>
<td align="center">init</td>
<td align="left">在当前目录下新建工程</td>
</tr>

<tr>
<td align="center">list-model</td>
<td align="left">列出所有支持的Arduino开发板</td>
</tr>

<tr>
<td align="center">preproc</td>
<td align="left">将工程文件转换为有效c++文件</td>
</tr>

<tr>
<td align="center">serial</td>
<td align="left">打开串口监视器</td>
</tr>

<tr>
<td align="center">upload</td>
<td align="left">给Arduino设备上传程序</td>
</tr>
</tbody>
</table>

<p>也可以访问<a href="http://inotool.org/quickstart" target="_blank">http://inotool.org/quickstart</a>简单了解<strong>Ino</strong>的使用，这里简单说一下使用。</p>

<h4 id="查看arduino型号">查看Arduino型号</h4>

<p>查看一下是否有支持的Arduino开发板。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino list-models
Searching <span class="k">for</span> Board description file <span class="o">(</span>boards.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/boards.txt
         uno: <span class="o">[</span>DEFAULT<span class="o">]</span> Arduino Uno
   atmega328: Arduino Duemilanove w/ ATmega328
   diecimila: Arduino Diecimila or Duemilanove w/ ATmega168
     nano328: Arduino Nano w/ ATmega328
        nano: Arduino Nano w/ ATmega168
    mega2560: Arduino Mega <span class="m">2560</span> or Mega ADK
        mega: Arduino Mega <span class="o">(</span>ATmega1280<span class="o">)</span>
    leonardo: Arduino Leonardo
     esplora: Arduino Esplora
       micro: Arduino Micro
     mini328: Arduino Mini w/ ATmega328
        mini: Arduino Mini w/ ATmega168
    ethernet: Arduino Ethernet
         fio: Arduino Fio
       bt328: Arduino BT w/ ATmega328
          bt: Arduino BT w/ ATmega168
  LilyPadUSB: LilyPad Arduino USB
  lilypad328: LilyPad Arduino w/ ATmega328
     lilypad: LilyPad Arduino w/ ATmega168
    pro5v328: Arduino Pro or Pro Mini <span class="o">(</span>5V, <span class="m">16</span> MHz<span class="o">)</span> w/ ATmega328
       pro5v: Arduino Pro or Pro Mini <span class="o">(</span>5V, <span class="m">16</span> MHz<span class="o">)</span> w/ ATmega168
      pro328: Arduino Pro or Pro Mini <span class="o">(</span><span class="m">3</span>.3V, <span class="m">8</span> MHz<span class="o">)</span> w/ ATmega328
         pro: Arduino Pro or Pro Mini <span class="o">(</span><span class="m">3</span>.3V, <span class="m">8</span> MHz<span class="o">)</span> w/ ATmega168
   atmega168: Arduino NG or older w/ ATmega168
     atmega8: Arduino NG or older w/ ATmega8
robotControl: Arduino Robot Control
  robotMotor: Arduino Robot Motor</code></pre></div>
<p>上面就是支持的所有型号的开发板，冒号前的是我们用到配置文件中的，我的开发板是<strong>Arduino Pro Mini (5V, 16MHz) w/ ATmega328</strong>，所以对应的是pro5v328，你可以找到自己的板型，编译和上传的时候会用到，默认的是uno，所以一定要搞清楚自己的是哪一个型号。</p>

<h4 id="新建ino工程">新建Ino工程</h4>

<p>可以用blink模板新建工程，这之前需要创建自己的工程目录，比如<strong>blink</strong>：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ mkdir blink
$ <span class="nb">cd</span> blink
$ ino init -t blink</code></pre></div>
<p>可以用tree命令列出文件树（tree命令可以用homebrew安装<code>brew install tree</code>）：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tree
.
├── lib
└── src
    └── sketch.ino

<span class="m">2</span> directories, <span class="m">1</span> file</code></pre></div>
<p>可以看到生成了两个目录，一个是lib一个是src，lib用来放第三方arduino的库，而src存放我们自己的代码，这里因为用了模板，所以生成了一个sketch.ino，可以查看其内容：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ cat src/sketch.ino

<span class="c1">#define LED_PIN 13</span>

void setup<span class="o">()</span>
<span class="o">{</span>
    pinMode<span class="o">(</span>LED_PIN, OUTPUT<span class="o">)</span><span class="p">;</span>
<span class="o">}</span>

void loop<span class="o">()</span>
<span class="o">{</span>
    digitalWrite<span class="o">(</span>LED_PIN, HIGH<span class="o">)</span><span class="p">;</span>
    delay<span class="o">(</span><span class="m">100</span><span class="o">)</span><span class="p">;</span>
    digitalWrite<span class="o">(</span>LED_PIN, LOW<span class="o">)</span><span class="p">;</span>
    delay<span class="o">(</span><span class="m">900</span><span class="o">)</span><span class="p">;</span>
<span class="o">}</span></code></pre></div>
<p>这样我们就可以用vim进行coding了，修改sketch.ino即可，当然，我们也可以将其改成其他的名字，比如blink.ino。</p>

<h4 id="编译工程">编译工程</h4>

<p>用ino build编译工程时，其实相关的是板子的mcu型号，所以使用此命令可以加-m参数指定开发板型号，就是我们之前看到的，我的是pro5v328，如果不指定-m参数的话，命令会使用默认的板型，就是list-model结果中带有<strong>[DEFAULT]</strong>标识的，一般为uno。</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino build -m pro5v328
Searching <span class="k">for</span> Board description file <span class="o">(</span>boards.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/boards.txt
Searching <span class="k">for</span> Arduino lib version file <span class="o">(</span>version.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/lib/version.txt
Detecting Arduino software version ...  <span class="m">1</span>.0.6 <span class="o">(</span><span class="m">1</span>.0.6<span class="o">)</span>
Searching <span class="k">for</span> Arduino core library ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/cores/arduino
Searching <span class="k">for</span> Arduino variants directory ... /Applications/Arduino.app/Contents/Resources/Java/hardware/arduino/variants
Searching <span class="k">for</span> Arduino standard libraries ... /Applications/Arduino.app/Contents/Resources/Java/libraries
Searching <span class="k">for</span> make ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/make
Searching <span class="k">for</span> avr-gcc ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-gcc
Searching <span class="k">for</span> avr-g++ ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-g++
Searching <span class="k">for</span> avr-ar ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-ar
Searching <span class="k">for</span> avr-objcopy ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avr-objcopy
src/sketch.ino
Searching <span class="k">for</span> Arduino lib version file <span class="o">(</span>version.txt<span class="o">)</span> ... /Applications/Arduino.app/Contents/Resources/Java/lib/version.txt
Detecting Arduino software version ...  <span class="m">1</span>.0.6 <span class="o">(</span><span class="m">1</span>.0.6<span class="o">)</span>
Scanning dependencies of src
Scanning dependencies of arduino
src/sketch.cpp
arduino/avr-libc/malloc.c
arduino/avr-libc/realloc.c
arduino/WInterrupts.c
arduino/wiring.c
arduino/wiring_analog.c
arduino/wiring_digital.c
arduino/wiring_pulse.c
arduino/wiring_shift.c
arduino/CDC.cpp
arduino/HardwareSerial.cpp
arduino/HID.cpp
arduino/IPAddress.cpp
arduino/main.cpp
arduino/new.cpp
arduino/Print.cpp
arduino/Stream.cpp
arduino/Tone.cpp
arduino/USBCore.cpp
arduino/WMath.cpp
arduino/WString.cpp
Linking libarduino.a
Linking firmware.elf
Converting to firmware.hex</code></pre></div>
<p>当然我们还有另一种方法指定板子型号，就是添加配置文件，有三种类型的配置文件：</p>

<table>
<thead>
<tr>
<th align="left">配置文件</th>
<th align="left">作用域</th>
<th align="left">优先级</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">/etc/ino.ini</td>
<td align="left">对mac中所有用户下的所有ino工程有效</td>
<td align="left">最低</td>
</tr>

<tr>
<td align="left">~/.inorc</td>
<td align="left">对当前用户下的所有工程有效</td>
<td align="left">次之</td>
</tr>

<tr>
<td align="left">./ino.ini</td>
<td align="left">对当前工程有效</td>
<td align="left">最高</td>
</tr>
</tbody>
</table>

<p><strong>ino build</strong>不指定-m时，工具会优先查看当前工程目录下是否有ino.ini，如果有的话依据配置文件中的参数设置进行编译，如果没有，在去常看当前mac用户$HOME目录下是否有.inorc文件，如果有则据此文件中的配置编译，如果没有，再继续查找系统配置中是否有ino.ini文件，如果有则按配置编译，如果没有则按照默认板型uno进行编译，上传命令ino upload和调用串口监视器ino serial同样是此规则。</p>

<p>所以建议在每个工程下添加适配的配置文件：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ touch ino.ini</code></pre></div>
<p>配置文件中可以指定build、upload和serial这三个功能的参数，用vim编辑ino.ini文件，内容如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>build<span class="o">]</span>
board-model <span class="o">=</span> pro5v328

<span class="o">[</span>upload<span class="o">]</span>
board-model <span class="o">=</span> pro5v328
serial-port <span class="o">=</span> /dev/tty.wchusbserial1470

<span class="o">[</span>serial<span class="o">]</span>
serial-port <span class="o">=</span> /dev/tty.wchusbserial1470</code></pre></div>
<p>上面的serial和upload参数用于后面。</p>

<p>这样的话，我们每次在自己的工程里只需执行命令<code>ino build</code>即可。</p>

<p>工程目录下加入配置文件后的文件树如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tree
.
├── ino.ini
├── lib
└── src
    └── sketch.ino

	<span class="m">2</span> directories, <span class="m">2</span> files</code></pre></div>
<h4 id="上传程序">上传程序</h4>

<p>上传程序会使用到串口，我用的串口工具，在系统中识别为<strong>tty.wchusbserial1470</strong>，所以配置文件中改为我们自己对应的串口，如果你不知道自己的串口是什么，可以查看<code>/dev/</code>目录下以tty为前缀的串口：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ls /dev/tty.*
/dev/tty.Bluetooth-Incoming-Port /dev/tty.wchusbserial1470</code></pre></div>
<p>可以看到有效的串口，mac一般都会有蓝牙，其中有一个是蓝牙，那么另一个就是我们的串口***，所以这里配置文件就是<code>/dev/tty.wchusbserial1470</code>。</p>

<p>其实上传命令可以使用两个参数，一个是-m（同上）来指定板子型号，另一个是-p，用来指定使用串口，所以这里可以指定参数来上传程序到arduino设备：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino upload -m pro5v328 -p /dev/tty.wchusbserial1470</code></pre></div>
<p>如果不指定-p参数的话就会按照之前提到的规则去查找配置文件，使用配置文件中指定的串口进行上传，所以执行<code>ino upload</code>命令就可以了：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino upload
Searching <span class="k">for</span> stty ... /bin/stty
Searching <span class="k">for</span> avrdude ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/bin/avrdude
Searching <span class="k">for</span> avrdude.conf ... /Applications/Arduino.app/Contents/Resources/Java/hardware/tools/avr/etc/avrdude.conf

avrdude: AVR device initialized and ready to accept instructions

Reading <span class="p">|</span> <span class="c1">################################################## | 100% 0.02s</span>

avrdude: Device <span class="nv">signature</span> <span class="o">=</span> 0x1e950f
avrdude: reading input file <span class="s2">&#34;.build/pro5v328/firmware.hex&#34;</span>
avrdude: writing flash <span class="o">(</span><span class="m">1082</span> bytes<span class="o">)</span>:

Writing <span class="p">|</span> <span class="c1">################################################## | 100% 0.72s</span>

avrdude: <span class="m">1082</span> bytes of flash written
avrdude: verifying flash memory against .build/pro5v328/firmware.hex:
avrdude: load data flash data from input file .build/pro5v328/firmware.hex:
avrdude: input file .build/pro5v328/firmware.hex contains <span class="m">1082</span> bytes
avrdude: reading on-chip flash data:

Reading <span class="p">|</span> <span class="c1">################################################## | 100% 0.63s</span>

avrdude: verifying ...
avrdude: <span class="m">1082</span> bytes of flash verified

avrdude: safemode: Fuses OK

avrdude <span class="k">done</span>.  Thank you.<span class="o">)</span><span class="s2">&#34;&#34;</span></code></pre></div>
<h4 id="使用库文件">使用库文件</h4>

<p>如果要使用第三方库的话，可以将库放到工程目录的lib目录下，比如这里我们使用定时器来触发led的blink，用到定时器的库<strong><a href="https://github.com/PaulStoffregen/MsTimer2" target="_blank">MsTimer2</a></strong>，下载下来将库放到lib目录下即可，此时文件树类似如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ tree
.
├── ino.ini
├── lib
│   └── MsTimer2
│       ├── MsTimer2.cpp
│       ├── MsTimer2.h
│       └── examples
│           └── FlashLed
│               └── FlashLed.pde
└── src
    └── sketch.ino

	<span class="m">5</span> directories, <span class="m">5</span> files</code></pre></div>
<p>然后修改我们的sketch.ino来使用库，可以修改为如下的内容：</p>
<div class="highlight"><pre class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;MsTimer2.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="c1">// Switch on LED on pin 13 each second
</span><span class="c1"></span>
<span class="kt">void</span> <span class="nf">flash</span><span class="p">()</span> <span class="p">{</span>
	<span class="k">static</span> <span class="n">boolean</span> <span class="n">output</span> <span class="o">=</span> <span class="n">HIGH</span><span class="p">;</span>
	<span class="n">digitalWrite</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">output</span><span class="p">);</span>
	<span class="n">output</span> <span class="o">=</span> <span class="o">!</span><span class="n">output</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">pinMode</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>

	<span class="n">MsTimer2</span><span class="o">::</span><span class="n">set</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">flash</span><span class="p">);</span> <span class="c1">// 500ms period
</span><span class="c1"></span>	<span class="n">MsTimer2</span><span class="o">::</span><span class="n">start</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>

<span class="p">}</span></code></pre></div>
<p>然后我们就可以再次编译了，编译之前也可以先清除一下上一次编译生成的中间文件：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ino clean</code></pre></div>
<p>然后再进行编译和上传即可。</p>

<h3 id="vim配合ino">vim配合Ino</h3>

<p>进行Arduino开发使用Ino可以用vim进行代码编辑，为了更方便，我们可以为vim配置快捷键来完成工程的编译、清除和上传(即build\clean\upload)，在<code>~/.vimrc</code>中添加配置即可，我的Vim配置如下：</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">nmap &lt;F5&gt;b :!ino build&lt;CR&gt;
nmap &lt;F5&gt;c :!ino clean&lt;CR&gt;
nmap &lt;F5&gt;u :!ino upload&lt;CR&gt;</code></pre></div>
<p>这样就可以在用vim编辑sketch.ino时，普通模式下按下<F5>键+b来进行编译，按下<F5>键+u键进行上传，按下<F5>键+c键进行清除编译生成的中间文件。</p>
			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://www.smslit.top/tags/vim">vim</a></span><span class="tag"><a href="https://www.smslit.top/tags/arduino">arduino</a></span><span class="tag"><a href="https://www.smslit.top/tags/ino">ino</a></span>
				</p>
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
					3360 字
				</p>
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
					2016-06-15 09:10 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc">
			<div class="toc-title">目录</div>
			<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#ino工具安装">Ino工具安装</a>
<ul>
<li><a href="#安装">安装</a></li>
<li><a href="#依赖">依赖</a></li>
</ul></li>
<li><a href="#ino的使用">ino的使用</a>
<ul>
<li><a href="#查看arduino型号">查看Arduino型号</a></li>
<li><a href="#新建ino工程">新建Ino工程</a></li>
<li><a href="#编译工程">编译工程</a></li>
<li><a href="#上传程序">上传程序</a></li>
<li><a href="#使用库文件">使用库文件</a></li>
</ul></li>
<li><a href="#vim配合ino">vim配合Ino</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://www.smslit.top/2016/06/15/usb2ttl_ch340-elec/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;下一篇</span><br><span>用KiCAD设计使用CH340G的USB转串口的模块</span>
			</a>
			<a class="prev-post" href="https://www.smslit.top/2016/05/05/halled-ble/">
				<span class="post-nav-label">上一篇&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>BLE开发笔记——协议栈HAL驱动控制LED</span>
			</a>
		</div>
		<div id="comments" class="thin">
		<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">打赏作者</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/assets/pay/wechatpay.png">
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/assets/pay/alipay.png">
      </label>
  </div>
</div>


<span id="/2016/06/15/ino-vim-arduino/" class="leancloud_visitors" data-flag-title="在MacOS终端下使用Ino进行Arduino开发">
  <span class="post-meta-item-text">访问量 </span>
  <span class="leancloud-visitors-count"></span>
  <p></p>
</span>
<div id="vcomments"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script type="text/javascript">
  new Valine({
      el: '#vcomments' ,
      appId: 'IlJ4XQsE83q10RN3Maoglx2x-gzGzoHsz',
      appKey: 'OxVuAMUYBTbDMO9vO2IqTsMR',
      notify:  false , 
      verify:  false , 
      avatar:'', 
      placeholder: '说点什么吧...(提醒：填写邮箱，若有人回复您，您将及时收到提醒邮件！)',
      visitor:  true 
  });
</script>
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2019 <a href="https://www.smslit.top">5km</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://www.smslit.top/post/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://www.smslit.top/js/main.min.8f39f24808e9d0a9b02da58c2d2838da859dc0b7bdfadbdb1883aae8b6adacfe.js" integrity="sha256-jznySAjp0KmwLaWMLSg42oWdwLe9+tvbGIOq6LatrP4="></script>

	
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      TeX: {equationNumbers: {autoNumber: "AMS"}},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>

</html>
